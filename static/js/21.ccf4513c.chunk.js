(this["webpackJsonplight-chaser"]=this["webpackJsonplight-chaser"]||[]).push([[21],{369:function(e,t,a){},370:function(e,t,a){},615:function(e,t,a){"use strict";a.r(t);var c=a(100),n=a(8),i=a(9),s=a(10),o=a(11),l=a(12),r=a(0),d=(a(369),a(370),a(136)),j=a(74),h=a(78),b=a(125),p=a(81),u=a(3),O=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).projectInfo={name:"",description:"",width:500,height:300},e.onOk=function(t){t.preventDefault();var a=e.props.onOk;a&&a(e.projectInfo)},e.onCancel=function(){var t=e.props.onCancel;t&&t()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.visible,a=void 0!==t&&t;return Object(u.jsx)(d.a,{title:"\u65b0\u5efa\u5927\u5c4f",visible:a,className:"add-new-screen-dialog",onClose:this.onCancel,children:Object(u.jsxs)("form",{onSubmit:this.onOk,children:[Object(u.jsxs)("div",{className:"lc-add-new-screen",children:[Object(u.jsx)(j.a,{title:"\u540d\u79f0",children:Object(u.jsx)(h.default,{required:!0,maxLength:20,onChange:function(t){return e.projectInfo.name=t.target.value}})}),Object(u.jsx)(j.a,{title:"\u63cf\u8ff0",children:Object(u.jsx)(h.default,{maxLength:60,onChange:function(t){return e.projectInfo.description=t.target.value}})}),Object(u.jsx)(j.a,{title:"\u5bbd\u5ea6",children:Object(u.jsx)(h.default,{type:"number",min:500,required:!0,onChange:function(t){return e.projectInfo.width=parseInt(t.target.value)}})}),Object(u.jsx)(j.a,{title:"\u9ad8\u5ea6",children:Object(u.jsx)(h.default,{type:"number",min:300,required:!0,onChange:function(t){return e.projectInfo.height=parseInt(t.target.value)}})}),Object(u.jsx)(j.a,{title:"\u5b58\u50a8",children:Object(u.jsx)(p.default,{defaultValue:"1",options:[{value:"1",label:"\u672c\u5730\u5b58\u50a8"}]})})]}),Object(u.jsxs)("div",{className:"add-new-screen-explain",children:[Object(u.jsx)("p",{children:"\u8bf4\u660e\uff1a"}),Object(u.jsx)("p",{children:"1\u3001\u540d\u79f0\u4e0d\u8d85\u8fc720\u5b57\uff0c\u63cf\u8ff0\u4e0d\u8d85\u8fc760\u5b57"}),Object(u.jsx)("p",{children:"2\u3001\u5bbd\u5ea6\u5fc5\u987b\u2265500\uff0c\u9ad8\u5ea6\u5fc5\u987b\u2265300"})]}),Object(u.jsxs)("div",{className:"add-new-screen-footer",children:[Object(u.jsx)(b.a,{type:"submit",children:"\u4fdd\u5b58"}),Object(u.jsx)(b.a,{onClick:this.onCancel,children:"\u53d6\u6d88"})]})]})})}}]),a}(r.Component),m=O,v=a.p+"static/media/list-bottom.5389dd50.svg",f=a.p+"static/media/template-market.b6765c6d.svg",x=a.p+"static/media/datasource.7f397ca1.svg",g=a.p+"static/media/list-del.19d35f77.svg",C=a.p+"static/media/list-display.31b224dd.svg",w=a.p+"static/media/list-edit.ce8d908b.svg",y=a.p+"static/media/list-clone.1586d6b1.svg",N=a(144),k=a(260),I=a(115),D=a(79),S=a(107),L=a(569),T=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={showAddDialog:!1,showDelDialog:!1,showCloneDialog:!1,addNewData:{},data:[],imageIdToUrl:{}},e.toBeDelId="",e.toBeCloneId="",e.loadProjectList=function(){S.a.getInstance().scannerProjectOperators();var t=D.a.projectConfig.saveType,a=void 0===t?I.e.LOCAL:t;S.a.getInstance().abstractOperatorMap[a].getProjectSimpleInfoList().then((function(t){if(t&&t.length>0){e.setState({data:t});var a=[];t.forEach((function(e){var t=e.screenshot;t&&""!==t&&a.push(t)}));var c=a.map((function(e){return k.a.getImageFromLocalWithKey(e)})),n={};Promise.all(c).then((function(t){t.forEach((function(e){var t=Object.keys(e)[0];n[t]=e[t]})),e.setState({imageIdToUrl:n})}))}}))},e.toggleNewProVisible=function(){var t=e.state.addNewScreen;e.setState({addNewScreen:!t})},e.onOk=function(t){var a=Object(N.b)(Object(n.a)(Object(n.a)({},t),{action:"create"}));e.setState({addNewScreen:!1}),window.open("/light-chaser-app/#/designer?".concat(a),"_blank")},e.onCancel=function(){return e.setState({addNewScreen:!1})},e.operateHandler=function(t){var a=t.target.dataset,c=a.type,n=a.savetype;if(c){var i=t.currentTarget.id;switch(c){case"edit":var s=Object(N.b)({id:i,action:"edit"});window.open("/light-chaser-app/#/designer?".concat(s),"_blank");break;case"show":window.open("/light-chaser-app/#/view?id=".concat(i,"&saveType=").concat(n,"&action=view"),"_blank");break;case"del":e.toBeDelId=i,e.setState({showDelDialog:!0});break;case"clone":e.toBeCloneId=i,e.setState({showCloneDialog:!0})}}},e.confirmDel=function(){S.a.getInstance().abstractOperatorMap[I.e.LOCAL].deleteProject(e.toBeDelId);var t=e.state.data;t=t.filter((function(t){return t.id!==e.toBeDelId})),e.setState({data:t,showDelDialog:!1})},e.cancelDel=function(){e.setState({showDelDialog:!1})},e.confirmClone=function(t){var a=S.a.getInstance().abstractOperatorMap[I.e.LOCAL];a.copyProject(e.toBeCloneId,t).then((function(t){a.getProjectSimpleInfoList().then((function(a){var i=a.filter((function(e){return e.id===t}));k.a.getImageFromLocalWithKey(i[0].screenshot).then((function(t){L.b.success("\u514b\u9686\u6210\u529f"),e.setState({data:[].concat(Object(c.a)(e.state.data),Object(c.a)(i)),imageIdToUrl:Object(n.a)(Object(n.a)({},e.state.imageIdToUrl),t),showCloneDialog:!1})}))}))}))},e.cancelClone=function(){e.setState({showCloneDialog:!1})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadProjectList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.addNewScreen,c=t.data,n=t.imageIdToUrl,i=t.showDelDialog,s=t.showCloneDialog,o=(window.innerWidth-230-100)/5,l=o*(9/16);return Object(u.jsxs)("div",{className:"lc-console",children:[Object(u.jsx)("div",{className:"console-head",children:Object(u.jsx)("div",{className:"console-head-title",children:"LC \u63a7\u5236\u53f0"})}),Object(u.jsxs)("div",{className:"console-body",children:[Object(u.jsxs)("div",{className:"console-list",children:[Object(u.jsxs)("div",{className:"console-list-item",children:[Object(u.jsx)("div",{className:"item-icon",children:Object(u.jsx)("img",{src:v,alt:"\u9879\u76ee\u5217\u8868"})}),Object(u.jsx)("div",{className:"item-text",children:"\u9879\u76ee\u5217\u8868"})]}),Object(u.jsxs)("div",{className:"console-list-item",children:[Object(u.jsx)("div",{className:"item-icon",children:Object(u.jsx)("img",{src:x,alt:"\u6570\u636e\u6e90\u7ba1\u7406"})}),Object(u.jsx)("div",{className:"item-text",children:"\u6570\u636e\u6e90\u7ba1\u7406"})]}),Object(u.jsxs)("div",{className:"console-list-item",children:[Object(u.jsx)("div",{className:"item-icon",children:Object(u.jsx)("img",{src:f,alt:"\u6a21\u677f\u5e02\u573a"})}),Object(u.jsx)("div",{className:"item-text",children:"\u6a21\u677f\u5e02\u573a"})]})]}),Object(u.jsx)("div",{className:"console-content",children:Object(u.jsx)("div",{className:"content-body",children:Object(u.jsxs)("div",{className:"project-list",children:[Object(u.jsx)("div",{style:{width:o,height:l,margin:"0 20px 20px 0"},children:Object(u.jsx)(b.a,{onClick:this.toggleNewProVisible,style:{width:o,height:l,fontSize:20},children:"+ \u65b0\u5efa\u9879\u76ee"})}),c&&c.map((function(t){var a,c,i=n[null===t||void 0===t?void 0:t.screenshot];return t.state===I.d.DRAFT?(a="\u8349\u7a3f",c="#FFB800"):t.state===I.d.PUBLISH&&(a="\u5df2\u53d1\u5e03",c="#00CC66"),Object(u.jsxs)("div",{style:{width:o,height:l,backgroundImage:i&&"url(".concat(i,")")},onClick:e.operateHandler,id:t.id+"",className:"project-item",children:[Object(u.jsxs)("div",{className:"pro-list-content",style:{zIndex:1},children:[Object(u.jsx)("div",{className:"pro-content-title",children:null===t||void 0===t?void 0:t.name}),Object(u.jsxs)("div",{className:"pro-content-operates",children:[Object(u.jsx)("div",{className:"operate-item","data-type":"edit",children:Object(u.jsx)("img",{src:w,alt:"\u7f16\u8f91"})}),Object(u.jsx)("div",{className:"operate-item","data-type":"show","data-savetype":t.saveType,children:Object(u.jsx)("img",{src:C,alt:"\u5c55\u793a"})}),Object(u.jsx)("div",{className:"operate-item","data-type":"del",children:Object(u.jsx)("img",{src:g,alt:"\u5220\u9664"})}),Object(u.jsx)("div",{className:"operate-item","data-type":"clone",children:Object(u.jsx)("img",{src:y,alt:"\u514b\u9686"})})]})]}),Object(u.jsxs)("div",{className:"pro-content-footer",children:[Object(u.jsx)("div",{className:"state-point",style:{backgroundColor:c}}),Object(u.jsx)("div",{className:"state-text",style:{color:c},children:a})]})]},t.id+"")}))]})})})]}),Object(u.jsx)(m,{onOk:this.onOk,onCancel:this.onCancel,visible:a}),Object(u.jsx)(P,{visible:i,onOk:this.confirmDel,onCancel:this.cancelDel}),Object(u.jsx)(B,{onOk:function(t){return e.confirmClone(t)},onCancel:this.cancelClone,visible:s})]})}}]),a}(r.Component),P=(t.default=T,function(e){var t=e.onOk,a=e.onCancel,c=e.visible;return Object(u.jsxs)(d.a,{title:"\u5220\u9664\u786e\u8ba4",visible:c,onClose:a,children:[Object(u.jsx)("div",{style:{color:"#aeaeae",padding:10},children:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u9879\u76ee\u5417\uff1f"}),Object(u.jsxs)("div",{className:"del-pro-confirm",style:{display:"flex",justifyContent:"flex-end",borderTop:"2px solid #272b34",paddingTop:5},children:[Object(u.jsx)(b.a,{onClick:t,children:"\u786e\u8ba4"}),Object(u.jsx)(b.a,{onClick:a,children:"\u53d6\u6d88"})]})]})}),B=function(e){var t=e.onOk,a=e.onCancel,c=e.visible,n="";return Object(u.jsx)(d.a,{title:"\u514b\u9686\u9879\u76ee",visible:c,onClose:a,children:Object(u.jsxs)("form",{onSubmit:function(e){console.log(n),e.preventDefault(),t(n)},children:[Object(u.jsx)(j.a,{title:"\u9879\u76ee\u540d\u79f0",contentStyle:{width:"80%"},children:Object(u.jsx)(h.default,{required:!0,defaultValue:n,onChange:function(e){return n=e.target.value}})}),Object(u.jsxs)("div",{className:"del-pro-confirm",style:{display:"flex",justifyContent:"flex-end",borderTop:"2px solid #272b34",paddingTop:10},children:[Object(u.jsx)(b.a,{type:"submit",children:"\u786e\u8ba4"}),Object(u.jsx)(b.a,{onClick:a,children:"\u53d6\u6d88"})]})]})})}}}]);