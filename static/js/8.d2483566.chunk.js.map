{"version":3,"sources":["comps/lc/background/DesignerBackground.tsx","framework/core/ComponentContainer.tsx","designer/LoadDesigner.ts","designer/operate-provider/core/EventManager.ts","designer/operate-provider/keyboard-mouse/KeyboardMouse.ts","designer/operate-provider/drag/AbstractDrag.ts","designer/operate-provider/drag/CanvasDragger.ts","designer/operate-provider/keyboard-mouse/HotKey.tsx","designer/operate-provider/scale/Scaler.ts","designer/operate-provider/DragScaleProvider.tsx","lib/lc-ruler/DesignerRuler.tsx","designer/operate-provider/DesignerContainer.tsx","lib/lc-movable/GroupMovable.tsx","lib/lc-movable/GroupSelectable.tsx","designer/operate-provider/right-click-menu/ContextMenuStore.ts","utils/RenderUtil.ts","designer/left/classify-list/ClassifyType.ts","designer/operate-provider/keyboard-mouse/HotKeyConfig.ts","designer/operate-provider/right-click-menu/ContextMenu.tsx","designer/canvas/DesignerCanvas.tsx","designer/header/DesignerHeader.tsx","designer/structure/LcHeader.tsx","designer/structure/LcBody.tsx","designer/structure/LcLeft.tsx","designer/structure/LcContent.tsx","designer/structure/LcRight.tsx","designer/structure/LcStructure.tsx","designer/structure/LcFoot.tsx","icon/icon-all.svg","icon/icon-bar.svg","icon/icon-column.svg","icon/icon-area.svg","icon/icon-pie.svg","icon/icon-scatter.svg","icon/icon-line.svg","icon/icon-loading.svg","icon/icon-flowers.svg","icon/icon-optimize.svg","icon/icon-points.svg","designer/left/classify-list/ClassifyListStore.ts","designer/float-configs/comp-list/CompListStore.ts","designer/left/classify-list/ClassifyList.tsx","designer/left/index.tsx","designer/right/MenuList.tsx","designer/right/ConfigContent.tsx","designer/right/index.tsx","designer/footer/HotKeyDes.tsx","designer/footer/keyboard-icon.svg","designer/footer/layers-icon.svg","designer/footer/Footer.tsx","designer/operate-provider/drag/CommonDragger.ts","designer/float-configs/common/FloatPanel.tsx","designer/float-configs/comp-list/CompList.tsx","designer/float-configs/layer-list/icon/lock.svg","designer/float-configs/layer-list/icon/preview-close.svg","designer/float-configs/layer-list/icon/preview-open.svg","designer/float-configs/layer-list/icon/unlock.svg","designer/float-configs/layer-list/LayerItem.tsx","designer/float-configs/layer-list/LayerComponent.ts","designer/float-configs/layer-list/LayerContainer.tsx","designer/float-configs/layer-list/LayerList.tsx","designer/float-configs/FloatConfigs.tsx","designer/Designer.tsx","designer/RegisterEvent.ts"],"names":["DesignerBackground","props","onClick","e","getBgConfigProps","bgConfig","state","config","width","height","bgMode","bgColor","bgImg","bgImgSize","length","bgImgPosition","bgImgPos","bgConfigProps","BackgroundMode","NONE","PICTURE","bgImgUrl","bgImgRepeat","single","radialGradient","linearGradient","bgColorMode","BackgroundColorMode","SINGLE","color","LINEAR_GRADIENT","compInstances","designerStore","elemConfigs","customComponentInfoMap","designerStarter","componentDefine","getInitConfig","AbstractBackgroundImpl","background","className","id","onDoubleClick","this","style","children","Component","ComponentContainer","ref","mode","parseUrlParams","action","layout","type","AbsCompImpl","getComponent","initConfig","info","create","then","instance","fallback","locked","hide","transform","position","display","pointerEvents","React","PureComponent","doScan","loadDesigner","loadProjectData","includes","initExistProject","Error","initNewProject","urlParams","name","doInit","setLoaded","canvasConfig","parseInt","projectConfig","abstractOperatorMap","saveType","SaveType","LOCAL","getProject","store","layoutConfigs","statisticInfo","themeConfig","extendParams","setMinLevel","eventOperateStore","setMaxLevel","minLevel","maxLevel","EventManager","events","handler","push","index","indexOf","splice","args","forEach","eventManager","KMMap","leftClick","rightClick","middleClick","AbstractDrag","target","dragTarget","x","y","onDragStart","onDragEnd","CanvasDragger","initPosition","register","button","releasePointerCapture","pointerId","console","log","unregister","onDragMove","movementX","movementY","scale","scaleCore","setPointerCapture","error","clientX","clientY","destroy","registerDragger","TriggerType","scaleConfig","content","offsetX","offsetY","doScale","setScale","scaleCanvas","emit","deltaY","compute","origin","ratio","DragScaleProvider","dragger","overflow","window","innerHeight","innerWidth","backgroundColor","observer","DesignerRuler","wheelTimerId","pointerMoveTimerId","render","unit","baseOffset","_scrollPosX","_scrollPosY","rulerX","mousePosX","scrollPosX","startPosX","rulerY","mousePosY","scrollPosY","startPosY","ofX","ofY","Math","floor","clearTimeout","setTimeout","setState","scroll","textAlign","fontSize","top","left","scrollPos","zoom","lineColor","textColor","segment","negativeRuler","textOffset","DesignerContainer","designerContainerRef","handleClick","event","handleContextMenu","handlePointerDown","handlePointerMove","handlePointerUp","document","addEventListener","removeEventListener","dom","outline","GroupMovable","movableRef","updateLayout","lastEvent","beforeTranslate","offsetWidth","offsetHeight","dataset","onDragGroupEnd","data","ev","onResizeEnd","translate","drag","onResizeGroupEnd","targets","setMovableRef","readonly","selectorRef","rasterize","dragStep","resizeStep","draggable","resizable","keepRatio","throttleDrag","throttleResize","onClickGroup","current","clickTarget","inputEvent","inputTarget","onDrag","onDragGroup","onResize","onResizeGroup","GroupSelectable","createRef","onSelectEnd","setTargets","setTargetIds","movable","isDragStart","preventDefault","dragStart","selected","filter","item","targetIds","calculateGroupRootCoordinate","setSelectorRef","dragContainer","selectableTargets","hitRate","selectByClick","selectFromInside","toggleContinueSelect","isMoveableElement","some","t","contains","stop","contextMenuStore","visible","mouseDownTime","mouseUpTime","updateVisible","setPosition","setMouseDownTime","time","setMouseUpTime","makeObservable","observable","shieldKeyList","HotKey","handlerMapping","currHotKey","existHandlerKey","doHandler","hotKey","triggerType","COILED","pointerTarget","enforcementCap","querySelector","classList","keyDown","key","toLowerCase","join","keyUp","wheel","onBlur","onblur","RenderUtil","fn","delay","callback","now","Date","prev","ClassifyEnum","selectAll","comps","getElementsByClassName","compIds","compArr","Array","from","comp","doCopy","newIds","copyItem","newId","getElementById","doLock","toBeUpdate","toTop","order","toBottom","doDelete","setContentVisible","rightStore","activeConfig","delItem","doSave","throttle","doCreateOrUpdate","cloneDeep","getData","SERVER","alert","message","warn","doUnLock","unLockedId","doHide","doMoveUp","groupRootCoordinate","setGroupRootCoordinate","yPos","request","doMoveDown","doMoveLeft","xPos","doMoveRight","ContextMenu","menuList","icon","LockOutlined","EyeInvisibleOutlined","CopyOutlined","VerticalAlignTopOutlined","VerticalAlignBottomOutlined","DeleteOutlined","menuListDom","i","menuItem","Icon","DesignerCanvas","backgroundRef","designerRef","updateActive","activeElem","isEqual","generateElement","Object","values","sort","a","b","map","loaded","Loading","ProjectHdItemImpl","lazy","ThemeHdItemImpl","Header","buildHeaderList","headerItemInstances","items","canvasVisible","headerStore","projectVisible","themeVisible","CanvasHdConfigImpl","LcHeader","LcBody","LcLeft","LcContent","LcRight","LcStructure","LcFoot","classifyListStore","classifies","classifyKey","icon_all","classify","ALL","icon_points","BASE","icon_optimize","ORNAMENTAL","icon_bar","BAR","icon_column","COLUMN","icon_line","LINE","icon_area","AREA","icon_pie","PIE","icon_loading","PROGRESS","icon_scatter","SCATTER","icon_flowers","ROSE","doClear","setClassifyKey","makeAutoObservable","compListStore","compInfoArr","compKey","keys","baseInfo","getBaseInfo","setVisible","setCompKey","ClassifyList","changeClassifyKey","currentTarget","buildClassifyList","classifyArr","src","alt","classifyListDom","overflowY","DesignerLeft","MenuList","menuChange","setActiveMenu","buildMenuList","menus","ConfigContent","buildConfigContent","activeMenu","ConfigComp","getMenuToConfigContentMap","onClose","activeMenuName","LineOutlined","Right","HotKeyDes","Footer","showHotKeyDes","toggleHotKeyDes","toggleLayerList","layerListStore","stateStr","keyboardIcon","layerIcon","toFixed","Dialog","title","CommonDragger","initPos","FloatPanel","panelRef","dragTargetRef","CompList","addItem","movableItem","idGenerate","generateId","getChartDom","chartDom","typeKey","compName","compInfo","chartImg","getChartImg","searchChart","value","placeholder","onPressEnter","LayerItem","lock","compId","toggleLock","lockChange","toggleHide","hideChange","onSelected","selectedChange","previewClose","previewOpen","lockImg","unlockImg","LayerComponent","container","ComponentUtil","createAndRender","upOp","merge","reRender","operateType","OperateType","OPTIONS","AbstractComponent","LayerContainer","layerContainerRef","layerInstanceMap","r","LayerList","cancelSelected","layerListDom","searchLayer","setContent","buildLayerList","searchContent","_props","FloatConfigs","compListVisible","layerListVisible","Designer","setUnLockedId","setPointerTarget","registerEventOnDesignerLoaded"],"mappings":"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","file":"static/js/8.d2483566.chunk.js","sourcesContent":["import React, {Component, MouseEvent} from 'react';\r\nimport {BackgroundColorMode, BackgroundMode} from \"../../../designer/DesignerType\";\r\nimport AbstractBackgroundImpl, {AbstractBackgroundImplProps, BackgroundConfigType} from \"./AbstractBackgroundImpl\";\r\nimport designerStore from \"../../../designer/store/DesignerStore\";\r\nimport designerStarter from \"../../../designer/DesignerStarter\";\r\n\r\ninterface LcDesignerBackgroundProps {\r\n    onClick?: (e: MouseEvent<HTMLDivElement>) => void;\r\n    config?: BackgroundConfigType;\r\n}\r\n\r\n/**\r\n * 设计器画布背景\r\n */\r\nclass DesignerBackground extends Component<LcDesignerBackgroundProps> {\r\n\r\n    constructor(props: LcDesignerBackgroundProps) {\r\n        super(props);\r\n        const {compInstances, elemConfigs} = designerStore;\r\n        const {customComponentInfoMap} = designerStarter;\r\n        let config: AbstractBackgroundImplProps | null = null;\r\n        if ('80cc666f' in elemConfigs!)\r\n            config = elemConfigs['80cc666f'];\r\n        else {\r\n            const componentDefine = customComponentInfoMap['LcBg'];\r\n            if (componentDefine)\r\n                config = componentDefine.getInitConfig();\r\n        }\r\n        compInstances['80cc666f'] = new AbstractBackgroundImpl(this, config!);\r\n        this.state = {config: config?.background}\r\n        delete elemConfigs!['80cc666f'];\r\n    }\r\n\r\n    onClick = (e: MouseEvent<HTMLDivElement>) => {\r\n        const {onClick} = this.props;\r\n        onClick && onClick(e);\r\n    }\r\n\r\n    getBgConfigProps = () => {\r\n        // const bgConfig: BackgroundConfigType = this.props.config!!;\r\n        const {config: bgConfig} = this.state as any;\r\n        const {width, height, bgMode, bgColor, bgImg} = bgConfig;\r\n        let bgImgSize = '100% 100%';\r\n        if (bgImg.bgImgSize && bgImg.bgImgSize.length === 2)\r\n            bgImgSize = `${bgConfig.bgImg.bgImgSize[0]}px ${bgImg.bgImgSize[1]}px`;\r\n        let bgImgPosition = '0 0';\r\n        if (bgImg.bgImgPos && bgImg.bgImgPos.length === 2)\r\n            bgImgPosition = `${bgImg.bgImgPos[0]}px ${bgImg.bgImgPos[1]}px`;\r\n        if (bgConfig) {\r\n            let bgConfigProps: any = {height: height, width: width}\r\n            if (bgMode + '' === BackgroundMode.NONE)\r\n                bgConfigProps['backgroundColor'] = '#000000';\r\n            else if (bgMode + '' === BackgroundMode.PICTURE) {\r\n                if (bgImg.bgImgUrl && bgImg.bgImgUrl !== '') {\r\n                    bgConfigProps['backgroundImage'] = `url(${bgImg.bgImgUrl})`;\r\n                    bgConfigProps['backgroundSize'] = bgImgSize;\r\n                    bgConfigProps['backgroundPosition'] = bgImgPosition;\r\n                    bgConfigProps['backgroundRepeat'] = bgImg?.bgImgRepeat;\r\n                } else\r\n                    bgConfigProps['backgroundColor'] = '#000000';\r\n            } else {\r\n                const {single, radialGradient, linearGradient, bgColorMode} = bgColor;\r\n                if (bgConfig?.bgColor.bgColorMode + '' === BackgroundColorMode.SINGLE)\r\n                    bgConfigProps['backgroundColor'] = single.color;\r\n                else if (bgColorMode === BackgroundColorMode.LINEAR_GRADIENT)\r\n                    bgConfigProps['background'] = linearGradient.color;\r\n                else\r\n                    bgConfigProps['background'] = radialGradient.color;\r\n            }\r\n            return bgConfigProps;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'lc-background'}\r\n                 id={'80cc666f'}\r\n                 data-type={'LcBg'}\r\n                 onDoubleClick={this.onClick}\r\n                 style={this.getBgConfigProps()}>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerBackground;","import React, {Suspense} from \"react\";\r\nimport designerStarter from \"../../designer/DesignerStarter\";\r\nimport {MovableItemType} from \"../../lib/lc-movable/types\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport designerStore from \"../../designer/store/DesignerStore\";\r\nimport {AbstractCustomComponentDefinition} from \"./AbstractCustomComponentDefinition\";\r\nimport {parseUrlParams} from \"../../utils/URLUtil\";\r\n\r\nexport interface ComponentContainerProps {\r\n    layout: MovableItemType;\r\n}\r\n\r\nclass ComponentContainer extends React.PureComponent<ComponentContainerProps> {\r\n\r\n    private ref: HTMLDivElement | null = null;\r\n\r\n    private mode: string = parseUrlParams()?.action || 'edit';\r\n\r\n    componentDidMount(): void {\r\n        //通过ref创建组件，并将组件实例方法Map中。后续通过Map匹配到具体实例，\r\n        //调用实例的对象方法进行组件的更新操作\r\n        const {layout} = this.props;\r\n        const {customComponentInfoMap} = designerStarter;\r\n        const {elemConfigs} = designerStore;\r\n        let componentDefine: AbstractCustomComponentDefinition = customComponentInfoMap[layout!.type + ''];\r\n        if (componentDefine) {\r\n            const AbsCompImpl = componentDefine.getComponent();\r\n            if (AbsCompImpl) {\r\n                const config = layout.id! in elemConfigs! ? elemConfigs![layout.id!] : (function () {\r\n                    let initConfig = componentDefine.getInitConfig();\r\n                    initConfig.info.id = layout.id!;\r\n                    return initConfig;\r\n                })() as any;\r\n                new AbsCompImpl()!.create(this.ref!, config).then((instance: any) => {\r\n                    const {compInstances} = designerStore;\r\n                    compInstances[layout.id + ''] = instance;\r\n                });\r\n                delete elemConfigs![layout.id!];\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {layout} = this.props;\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <div\r\n                    id={layout.id}\r\n                    data-type={layout.type}\r\n                    data-locked={layout.locked}\r\n                    data-hide={layout.hide}\r\n                    key={layout.id + ''}\r\n                    style={{\r\n                        width: layout.width,\r\n                        height: layout.height,\r\n                        transform: `translate(${layout.position![0]}px, ${layout.position![1]}px)`,\r\n                        position: 'absolute',\r\n                        display: layout.hide ? 'none' : 'block',\r\n                    }} className={'lc-comp-item'}>\r\n                    <div ref={(ref) => this.ref = ref} style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        //todo 要优化\r\n                        pointerEvents: `${this.mode === 'view' ? 'auto' : 'none'}`,\r\n                        position: 'relative'\r\n                    }}/>\r\n                </div>\r\n            </Suspense>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default ComponentContainer;","import designerStore from \"./store/DesignerStore\";\r\nimport eventOperateStore from \"./operate-provider/EventOperateStore\";\r\nimport designerStarter from \"./DesignerStarter\";\r\nimport {parseUrlParams} from \"../utils/URLUtil\";\r\nimport {ProjectDataType, SaveType} from \"./DesignerType\";\r\n\r\nconst {doScan} = designerStarter;\r\n\r\nexport const loadDesigner = () => {\r\n    //扫描组件\r\n    doScan();\r\n    //初始化项目数据\r\n    loadProjectData();\r\n}\r\n\r\n/**\r\n * 初始化项目操作类型。新增 / 更新\r\n */\r\nconst loadProjectData = () => {\r\n    let urlParams = parseUrlParams();\r\n    const {action} = urlParams;\r\n    if (['edit', 'view'].includes(action))\r\n        initExistProject();\r\n    else if (action === 'create')\r\n        initNewProject();\r\n    else\r\n        throw new Error('action is error')\r\n}\r\n\r\n/**\r\n * 初始化以创建方式打开时项目信息\r\n */\r\nconst initNewProject = () => {\r\n    let urlParams = parseUrlParams();\r\n    const {width, height, name} = urlParams;\r\n    const {doInit, setLoaded} = designerStore;\r\n    doInit({\r\n        canvasConfig: {\r\n            width: parseInt(width),\r\n            height: parseInt(height),\r\n        },\r\n        projectConfig: {\r\n            name: name\r\n        },\r\n    })\r\n    setLoaded(true);\r\n}\r\n\r\n/**\r\n * 初始化以更新方式打开时项目信息\r\n */\r\nconst initExistProject = () => {\r\n    let urlParams = parseUrlParams();\r\n    const {doInit, setLoaded} = designerStore;\r\n    const {abstractOperatorMap} = designerStarter;\r\n    const {projectConfig: {saveType = SaveType.LOCAL}} = designerStore;\r\n    abstractOperatorMap[saveType].getProject(urlParams.id).then((store: ProjectDataType | null) => {\r\n        if (store) {\r\n            doInit({\r\n                id: store.id,\r\n                canvasConfig: store.canvasConfig,\r\n                projectConfig: store.projectConfig,\r\n                elemConfigs: store.elemConfigs,\r\n                layoutConfigs: store.layoutConfigs,\r\n                statisticInfo: store.statisticInfo,\r\n                themeConfig: store.themeConfig,\r\n                extendParams: store.extendParams,\r\n            })\r\n            //设置事件操作器的最大最小层级\r\n            const {setMinLevel, setMaxLevel} = eventOperateStore;\r\n            setMinLevel(store.extendParams?.minLevel || 0);\r\n            setMaxLevel(store.extendParams?.maxLevel || 0);\r\n        }\r\n        setLoaded(true);\r\n    })\r\n}","class EventManager {\r\n    events: any = {};\r\n\r\n    register(type: string, handler: Function) {\r\n        if (!this.events[type])\r\n            this.events[type] = [];\r\n        this.events[type].push(handler);\r\n    }\r\n\r\n    unregister(type: string, handler?: Function) {\r\n        if (!this.events[type])\r\n            return;\r\n\r\n        const index = this.events[type].indexOf(handler);\r\n        if (index > -1)\r\n            this.events[type].splice(index, 1);\r\n\r\n    }\r\n\r\n    emit(type: string, ...args: any[]) {\r\n        if (!this.events[type])\r\n            return;\r\n        this.events[type].forEach((handler: Function) => {\r\n            handler(...args);\r\n        });\r\n    }\r\n}\r\n\r\nconst eventManager = new EventManager();\r\nexport default eventManager;","export const KMMap = {\r\n    leftClick: false,\r\n    rightClick: false,\r\n    middleClick: false,\r\n}","abstract class AbstractDrag {\r\n    //被拖拽的目标\r\n    protected target: any = null;\r\n    //触发拖拽的目标元素\r\n    protected dragTarget: any = null;\r\n    //拖拽的起始位置\r\n    protected position: { x: number, y: number } = {x: 0, y: 0};\r\n\r\n    public registerDragger(): void {\r\n        this.onDragStart(this.target);\r\n        this.onDragEnd(this.target);\r\n    }\r\n\r\n    protected abstract onDragStart(e: any): void;\r\n\r\n    protected abstract onDragMove(e: any): void;\r\n\r\n    protected abstract onDragEnd(e: any): void;\r\n}\r\n\r\nexport default AbstractDrag;","import AbstractDrag from \"./AbstractDrag\";\r\nimport eventManager from \"../core/EventManager\";\r\nimport {KMMap} from \"../keyboard-mouse/KeyboardMouse\";\r\nimport scaleCore from \"../scale/ScaleCore\";\r\n\r\nclass CanvasDragger extends AbstractDrag {\r\n\r\n    //设置为静态属性，以供画布的拖拽和缩放信息共用\r\n    public static position: { x: number, y: number } = {x: 0, y: 0};\r\n\r\n    constructor(target: any, initPosition?: { x: number, y: number }) {\r\n        super();\r\n        if (!target)\r\n            throw new Error(\"target is null, cannot drag\");\r\n        this.target = target;\r\n        CanvasDragger.position = initPosition || CanvasDragger.position;\r\n        this.registerDragger();\r\n    }\r\n\r\n    protected onDragEnd = (): void => {\r\n        eventManager.register('pointerup', (e: any) => {\r\n            if (e.button === 2) {\r\n                try {\r\n                    this.target.releasePointerCapture(e.pointerId);\r\n                } catch (e) {\r\n                    console.log(e);\r\n                }\r\n                eventManager.unregister('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected onDragMove = (e: any): void => {\r\n        if (KMMap.rightClick) {\r\n            CanvasDragger.position.x += e.movementX;\r\n            CanvasDragger.position.y += e.movementY;\r\n            const {scale} = scaleCore;\r\n            this.target.style.transform = 'translate3d(' + CanvasDragger.position.x + 'px, ' + CanvasDragger.position.y + 'px, 0) scale(' + scale + ')';\r\n        }\r\n    }\r\n\r\n    protected onDragStart = (): void => {\r\n        eventManager.register('pointerdown', (e: any) => {\r\n            if (e.button === 2) {\r\n                try {\r\n                    this.target.setPointerCapture(e.pointerId);\r\n                } catch (error) {\r\n                    this.target.releasePointerCapture(e.pointerId);\r\n                }\r\n                this.position = {x: e.clientX, y: e.clientY};\r\n                eventManager.register('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    destroy = () => {\r\n        eventManager.unregister('pointerdown');\r\n        eventManager.unregister('pointermove');\r\n        eventManager.unregister('pointerup');\r\n    }\r\n\r\n}\r\n\r\nexport default CanvasDragger;","import {Component} from 'react';\r\nimport eventOperateStore from \"../EventOperateStore\";\r\n\r\nexport enum TriggerType {\r\n    SINGLE,\r\n    COILED\r\n}\r\n\r\nexport interface HandlerMapping {\r\n    [key: string]: {\r\n        handler: Function,\r\n        target?: any,\r\n        triggerType?: TriggerType\r\n    }\r\n}\r\n\r\ninterface HotKeyProps {\r\n    handlerMapping: HandlerMapping;\r\n}\r\n\r\n//需要屏蔽浏览器默认快捷键效果的快捷键列表\r\nconst shieldKeyList = ['control + s', 'alt', 'control + l']\r\n\r\nclass HotKey extends Component<HotKeyProps> {\r\n\r\n    handlerMapping: HandlerMapping = {}\r\n    currHotKey: string[] = [];\r\n    existHandlerKey: string = \"\";\r\n\r\n    constructor(props: HotKeyProps) {\r\n        super(props);\r\n        this.handlerMapping = props.handlerMapping;\r\n    }\r\n\r\n    /**\r\n     * 从快捷键配置管理映射表中匹配对应的快捷键处理函数并执行。\r\n     * @param e 鼠标事件对象\r\n     * @param hotKey 当前按下的快捷键\r\n     */\r\n    doHandler = (e: any, hotKey: string) => {\r\n        const {handler, triggerType = TriggerType.SINGLE} = this.handlerMapping[hotKey] || {};\r\n        if (handler) {\r\n            if ((triggerType === TriggerType.SINGLE && this.existHandlerKey !== hotKey) || triggerType === TriggerType.COILED) {\r\n                const {pointerTarget} = eventOperateStore;\r\n                //todo 需要优化快捷键的执行范围\r\n                const enforcementCap = document.querySelector('.lc-ruler-content');\r\n                if (enforcementCap && (enforcementCap.contains(pointerTarget) || (pointerTarget && pointerTarget.classList.contains('layer-item')))) {\r\n                    handler(e);\r\n                    this.existHandlerKey = hotKey;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    keyDown = (e: any) => {\r\n        const key = e.key.toLowerCase();\r\n        if (!this.currHotKey.some(item => item === key))\r\n            this.currHotKey.push(key);\r\n        let hotKey = this.currHotKey.join(' + ');\r\n        if (shieldKeyList.some(item => item === hotKey))\r\n            e.preventDefault();\r\n        this.doHandler(e, hotKey);\r\n    };\r\n\r\n    keyUp = (e: any) => {\r\n        const key = e.key.toLowerCase();\r\n        if (this.currHotKey.some(item => item === key)) {\r\n            this.currHotKey = this.currHotKey.filter(item => item !== key);\r\n            this.existHandlerKey = '';\r\n        }\r\n    }\r\n\r\n    wheel = (e: any) => {\r\n        let hotKey = this.currHotKey.join(' + ') + ' + wheel';\r\n        const {handler, target} = this.handlerMapping[hotKey] || {};\r\n        if (handler) {\r\n            if (target && !target.contains(e.target))\r\n                return;\r\n            handler(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 失去焦点时清空当前热键（一般是切换屏幕）\r\n     */\r\n    onBlur = () => {\r\n        this.currHotKey = [];\r\n        this.existHandlerKey = '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.keyDown);\r\n        document.addEventListener('keyup', this.keyUp);\r\n        document.addEventListener('wheel', this.wheel);\r\n        window.onblur = this.onBlur;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.keyDown);\r\n        document.removeEventListener('keyup', this.keyUp);\r\n        document.removeEventListener('wheel', this.wheel);\r\n        window.onblur = null;\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default HotKey;","import designerStore from \"../../store/DesignerStore\";\r\nimport scaleCore from \"./ScaleCore\";\r\nimport eventOperateStore from \"../EventOperateStore\";\r\nimport eventManager from \"../core/EventManager\";\r\nimport {KMMap} from \"../keyboard-mouse/KeyboardMouse\";\r\nimport CanvasDragger from \"../drag/CanvasDragger\";\r\n\r\nexport const scaleConfig = {\r\n    content: null,\r\n    offsetX: 0,\r\n    offsetY: 0,\r\n}\r\n\r\nexport const doScale = (e: any) => {\r\n    //缩放拖拽不能同时进行\r\n    if (KMMap.rightClick) return;\r\n    const {setScale} = eventOperateStore;\r\n    //缩放画布\r\n    scaleCanvas(e);\r\n    //缩放标尺\r\n    eventManager.emit('wheel', e);\r\n    setScale(scaleCore.scale);\r\n}\r\n\r\nexport const scaleCanvas = (e: any) => {\r\n    let {canvasConfig: {width = 1920, height = 1080}} = designerStore;\r\n    let type = 1;\r\n    if (e.deltaY > 0)\r\n        type = 0;\r\n    scaleCore.compute(type);\r\n    const origin = {\r\n        x: (scaleCore.ratio - 1) * width * 0.5,\r\n        y: (scaleCore.ratio - 1) * height * 0.5\r\n    };\r\n    // 计算偏移量\r\n    CanvasDragger.position.x -= (scaleCore.ratio - 1) * (e.clientX - scaleConfig.offsetX - CanvasDragger.position.x) - origin.x;\r\n    CanvasDragger.position.y -= (scaleCore.ratio - 1) * (e.clientY - scaleConfig.offsetY - CanvasDragger.position.y) - origin.y;\r\n    (scaleConfig.content as any).style.transform = 'translate3d(' + CanvasDragger.position.x + 'px, ' + CanvasDragger.position.y + 'px, 0) scale(' + scaleCore.scale + ')';\r\n}","import React, {Component} from 'react';\r\nimport {scaleConfig} from \"./scale/Scaler\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport CanvasDragger from \"./drag/CanvasDragger\";\r\n\r\nclass DragScaleProvider extends Component {\r\n\r\n    content: any = null;\r\n    dragger: CanvasDragger | null = null;\r\n\r\n    componentDidMount() {\r\n        //配置缩放\r\n        this.content!.style.transform = 'translate3d(' + CanvasDragger.position.x + 'px, ' + CanvasDragger.position.y + 'px, 0) scale(1)';\r\n        scaleConfig.content = this.content;\r\n        scaleConfig.offsetX = 80;\r\n        scaleConfig.offsetY = 70;\r\n        this.dragger = new CanvasDragger(this.content);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.dragger)\r\n            this.dragger.destroy();\r\n    }\r\n\r\n    render() {\r\n        const {canvasConfig} = designerStore!;\r\n        return (\r\n            <div style={{\r\n                overflow: \"hidden\",\r\n                height: window.innerHeight - 90,\r\n                width: window.innerWidth - 95,\r\n                backgroundColor: '#434343'\r\n            }}>\r\n                <div ref={ref => this.content = ref} className={'lc-content-scale'}\r\n                     style={{width: canvasConfig?.width, height: canvasConfig?.height}}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DragScaleProvider);\r\n","import React, {Component} from 'react';\r\nimport Ruler, {RulerProps} from \"@scena/react-ruler\";\r\nimport {KMMap} from \"../../designer/operate-provider/keyboard-mouse/KeyboardMouse\";\r\nimport eventManager from \"../../designer/operate-provider/core/EventManager\";\r\nimport scaleCore from \"../../designer/operate-provider/scale/ScaleCore\";\r\n\r\ninterface DesignerRulerProps {\r\n    offsetX?: number;\r\n    offsetY?: number;\r\n}\r\n\r\n/**\r\n * 缩放计算公式：\r\n * 设现有条件：\r\n * 1) 当前鼠标位置：P\r\n * 2) 当前缩放倍数：S1\r\n * 3) 最新缩放倍数：S2\r\n * 4) 标尺起始位置：St\r\n * 5) 标尺渲染起始位置：scrollPos\r\n * 则：scrollPos = P-[(P-St)/(S2/S1)]\r\n *\r\n * 鼠标移动计算公式：\r\n * 设现有条件：\r\n * 1) 鼠标按下时在当前屏幕分辨路下的真实鼠标位置：mosP\r\n * 2) 标尺当前的起始位置：startP\r\n * 3) 鼠标本次移动的距离：mouOffset\r\n * 4) 标尺当前的缩放系数：scale\r\n * 5) 在当前缩放系数下，鼠标对应的标尺位置：rulerP\r\n *\r\n * 则鼠标指针在当前缩放系数下的位置为：rulerP = startP + (mouOffset / scale)\r\n * 鼠标移动后的标尺起始位置为：scrollPos = startP + (mouOffset / scale)\r\n */\r\nclass DesignerRuler extends Component<RulerProps & DesignerRulerProps> {\r\n\r\n    wheelTimerId: any = null;\r\n    pointerMoveTimerId: any = null;\r\n\r\n    state = {\r\n        render: 0\r\n    }\r\n\r\n    unit = 50;\r\n\r\n    baseOffset = 20;\r\n    _scrollPosX = 0;\r\n    _scrollPosY = 0;\r\n\r\n    rulerX: any = null;\r\n    offsetX = 0;\r\n    mousePosX = 0;\r\n    scrollPosX = 0;\r\n    startPosX = 0;\r\n\r\n    rulerY: any = null;\r\n    offsetY = 0;\r\n    mousePosY = 0;\r\n    scrollPosY = 0;\r\n    startPosY = 0;\r\n\r\n    componentDidMount() {\r\n        const {offsetX: ofX = 0, offsetY: ofY = 0} = this.props;\r\n        eventManager.register('wheel', () => {\r\n            this.startPosX = this.mousePosX - ((this.mousePosX - this.startPosX) / scaleCore.ratio);\r\n            this.scrollPosX = this.startPosX;\r\n            this.startPosY = this.mousePosY - ((this.mousePosY - this.startPosY) / scaleCore.ratio);\r\n            this.scrollPosY = this.startPosY;\r\n            this.unit = Math.floor(50 / scaleCore.scale);\r\n            clearTimeout(this.wheelTimerId);\r\n            this.wheelTimerId = setTimeout(() => {\r\n                this.setState({render: this.state.render + 1})\r\n            }, 300);\r\n        });\r\n\r\n        eventManager.register('pointermove', (e: any) => {\r\n            const {scale} = scaleCore;\r\n            this.mousePosX = this.startPosX + ((e.clientX - this.baseOffset - ofX) / scale);\r\n            this.mousePosY = this.startPosY + ((e.clientY - this.baseOffset - ofY) / scale);\r\n            if (KMMap.rightClick) {\r\n                this.offsetX = this.offsetX - e.movementX;\r\n                this._scrollPosX = this.startPosX + (this.offsetX / scale)\r\n                this.offsetY = this.offsetY - e.movementY;\r\n                this._scrollPosY = this.startPosY + (this.offsetY / scale)\r\n\r\n                clearTimeout(this.pointerMoveTimerId);\r\n                this.pointerMoveTimerId = setTimeout(() => {\r\n                    this.rulerX && this.rulerX.scroll(this._scrollPosX);\r\n                    this.rulerY && this.rulerY.scroll(this._scrollPosY);\r\n                }, 300);\r\n            }\r\n        });\r\n\r\n        eventManager.register('pointerdown', (e: PointerEvent) => {\r\n            if (e.button === 2) {\r\n                this.offsetX = 0;\r\n                this.offsetY = 0;\r\n            }\r\n        });\r\n\r\n        eventManager.register('pointerup', (e: PointerEvent) => {\r\n            if (e.button === 2) {\r\n                this.offsetX = 0;\r\n                this.offsetY = 0;\r\n                this.scrollPosX = this._scrollPosX;\r\n                this.startPosX = this._scrollPosX;\r\n                this.scrollPosY = this._scrollPosY;\r\n                this.startPosY = this._scrollPosY;\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventManager.unregister('wheel');\r\n        eventManager.unregister('pointermove');\r\n        eventManager.unregister('pointerdown');\r\n        eventManager.unregister('pointerup');\r\n        clearTimeout(this.wheelTimerId);\r\n        clearTimeout(this.pointerMoveTimerId);\r\n    }\r\n\r\n\r\n    render() {\r\n        const {scale} = scaleCore;\r\n        return (\r\n            <div className={'lc-ruler'} style={{position: 'relative'}}>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    width: 20,\r\n                    height: 20,\r\n                    color: '#838383',\r\n                    textAlign: 'center',\r\n                    fontSize: 12,\r\n                    top: -1\r\n                }}>px\r\n                </div>\r\n                <div className={'lc-ruler-horizontal'}\r\n                     style={{\r\n                         height: this.baseOffset,\r\n                         width: `calc(100% - ${this.baseOffset}px)`,\r\n                         position: 'relative',\r\n                         left: this.baseOffset\r\n                     }}>\r\n                    <Ruler ref={ref => this.rulerX = ref}\r\n                           scrollPos={this.scrollPosX}\r\n                           zoom={scale}\r\n                           lineColor={'#444b4d'}\r\n                           textColor={'#a6a6a6'}\r\n                           segment={2}\r\n                           negativeRuler={true}\r\n                           textOffset={[0, 10]}\r\n                           backgroundColor={'#090f1d'}\r\n                           unit={this.unit}/>\r\n                </div>\r\n                <div className={'lc-ruler-vertical'}\r\n                     style={{\r\n                         width: this.baseOffset,\r\n                         height: window.innerHeight - this.baseOffset - 90,\r\n                         position: 'relative',\r\n                         overflow: 'hidden'\r\n                     }}>\r\n                    <Ruler ref={ref => this.rulerY = ref}\r\n                           type={'vertical'}\r\n                           scrollPos={this.scrollPosY}\r\n                           lineColor={'#444b4d'}\r\n                           textColor={'#a6a6a6'}\r\n                           zoom={scale}\r\n                           segment={2}\r\n                           negativeRuler={true}\r\n                           textOffset={[10, 0]}\r\n                           backgroundColor={'#090f1d'}\r\n                           unit={this.unit}/>\r\n                </div>\r\n                <div className={'lc-ruler-content'} style={{\r\n                    position: 'absolute',\r\n                    top: this.baseOffset,\r\n                    left: this.baseOffset,\r\n                }}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerRuler;","import React, {Component} from 'react';\r\nimport eventManager from \"./core/EventManager\";\r\n\r\nclass DesignerContainer extends Component {\r\n\r\n    designerContainerRef: any;\r\n\r\n    componentDidMount() {\r\n        document.addEventListener(\"click\", this.handleClick);\r\n        this.designerContainerRef.addEventListener(\"contextmenu\", this.handleContextMenu);\r\n        document.addEventListener(\"pointerdown\", this.handlePointerDown);\r\n        document.addEventListener(\"pointermove\", this.handlePointerMove);\r\n        document.addEventListener(\"pointerup\", this.handlePointerUp);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener(\"click\", this.handleClick);\r\n        this.designerContainerRef.removeEventListener(\"contextmenu\", this.handleContextMenu);\r\n        document.removeEventListener(\"pointerdown\", this.handlePointerDown);\r\n        document.removeEventListener(\"pointermove\", this.handlePointerMove);\r\n        document.removeEventListener(\"pointerup\", this.handlePointerUp);\r\n    }\r\n\r\n    /**\r\n     * 监听点击事件\r\n     */\r\n    handleClick = (event: any) => eventManager.emit('click', event);\r\n    /**\r\n     * 监听右键菜单事件\r\n     */\r\n    handleContextMenu = (event: any) => eventManager.emit('contextmenu', event);\r\n    /**\r\n     * 监听触摸屏按下事件\r\n     */\r\n    handlePointerDown = (event: any) => eventManager.emit('pointerdown', event);\r\n    /**\r\n     * 监听指针移动事件\r\n     */\r\n    handlePointerMove = (event: any) => eventManager.emit('pointermove', event);\r\n    /**\r\n     * 监听指针抬起事件\r\n     */\r\n    handlePointerUp = (event: any) => eventManager.emit('pointerup', event);\r\n\r\n    render() {\r\n        return (\r\n            <div ref={dom => this.designerContainerRef = dom} style={{outline: 'none'}}\r\n                 className={'lc-event-container'}>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerContainer;","import * as React from \"react\";\r\nimport Moveable from \"react-moveable\";\r\nimport {observer} from \"mobx-react\";\r\nimport eventOperateStore from \"../../designer/operate-provider/EventOperateStore\";\r\nimport designerStore from \"../../designer/store/DesignerStore\";\r\nimport {MovableItemType} from \"./types\";\r\n\r\ninterface GroupMovableProps {\r\n    readonly?: boolean;\r\n}\r\n\r\nclass GroupMovable extends React.Component<GroupMovableProps> {\r\n    movableRef = React.createRef<Moveable>();\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            targets: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {setMovableRef} = eventOperateStore;\r\n        setMovableRef(this.movableRef);\r\n    }\r\n\r\n    onDragEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        const {lastEvent, target} = e;\r\n        if (lastEvent) {\r\n            const {beforeTranslate} = lastEvent;\r\n            updateLayout([\r\n                {\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [beforeTranslate[0], beforeTranslate[1]]\r\n                }\r\n            ], false);\r\n        }\r\n    }\r\n\r\n    onDragGroupEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        let data: MovableItemType[] = [];\r\n        e.events.forEach((ev: any) => {\r\n            const {target, lastEvent} = ev;\r\n            if (lastEvent) {\r\n                const {beforeTranslate} = lastEvent;\r\n                data.push({\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [beforeTranslate[0], beforeTranslate[1]]\r\n                })\r\n            }\r\n        })\r\n        if (data.length > 0)\r\n            updateLayout(data);\r\n    }\r\n\r\n    onResizeEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        const {target, lastEvent} = e;\r\n        if (lastEvent) {\r\n            const {width, height, drag: {translate}} = lastEvent;\r\n            updateLayout([\r\n                {\r\n                    id: target.id,\r\n                    width: width,\r\n                    height: height,\r\n                    type: target.dataset.type,\r\n                    position: [translate[0], translate[1]]\r\n                }\r\n            ], false)\r\n        }\r\n    }\r\n\r\n    onResizeGroupEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        let data: MovableItemType[] = [];\r\n        e.events.forEach((ev: any) => {\r\n            const {target, lastEvent} = ev;\r\n            if (lastEvent) {\r\n                const {drag: {translate}} = lastEvent;\r\n                data.push({\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [translate[0], translate[1]]\r\n                })\r\n            }\r\n        })\r\n        if (data.length > 0)\r\n            updateLayout(data, false);\r\n    }\r\n\r\n\r\n    render() {\r\n        const {readonly = false} = this.props;\r\n        const {selectorRef, targets} = eventOperateStore;\r\n        const {canvasConfig: {rasterize, dragStep, resizeStep}} = designerStore;\r\n        return (\r\n            <>\r\n                {this.props.children}\r\n                <Moveable ref={this.movableRef}\r\n                          target={targets}\r\n                          draggable={!readonly}\r\n                          resizable={!readonly}\r\n                          keepRatio={false}\r\n                          throttleDrag={rasterize ? dragStep : 0}\r\n                          throttleResize={rasterize ? resizeStep : 1}\r\n                          onClickGroup={e => {\r\n                              (selectorRef.current as any)?.clickTarget(e.inputEvent, e.inputTarget);\r\n                          }}\r\n                          onDrag={({target, beforeTranslate}) => {\r\n                              target.style.transform = `translate(${beforeTranslate[0]}px, ${beforeTranslate[1]}px)`;\r\n                          }}\r\n                          onDragEnd={this.onDragEnd}\r\n                          onDragGroup={e => {\r\n                              e.events.forEach(ev => {\r\n                                  ev.target.style.transform = ev.transform;\r\n                              });\r\n                          }}\r\n                          onDragGroupEnd={this.onDragGroupEnd}\r\n                          onResize={({target, width, height, drag}) => {\r\n                              target.style.width = `${width}px`;\r\n                              target.style.height = `${height}px`;\r\n                              target.style.transform = `translate(${drag.beforeTranslate[0]}px, ${drag.beforeTranslate[1]}px)`;\r\n                          }}\r\n                          onResizeEnd={this.onResizeEnd}\r\n                          onResizeGroupEnd={this.onResizeGroupEnd}\r\n                          onResizeGroup={({events}) => {\r\n                              events.forEach(ev => {\r\n                                  ev.target.style.width = `${ev.width}px`;\r\n                                  ev.target.style.height = `${ev.height}px`;\r\n                                  ev.target.style.transform = ev.drag.transform;\r\n                              })\r\n                          }}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(GroupMovable);","import React, {Component} from 'react';\r\nimport Selecto from \"react-selecto\";\r\nimport eventOperateStore from \"../../designer/operate-provider/EventOperateStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport Moveable from 'react-moveable';\r\n\r\nclass GroupSelectable extends Component {\r\n    selectorRef = React.createRef<Selecto>();\r\n\r\n    componentDidMount() {\r\n        const {setSelectorRef} = eventOperateStore;\r\n        setSelectorRef(this.selectorRef);\r\n    }\r\n\r\n    onSelectEnd = (e: any) => {\r\n        const {movableRef, setTargets, setTargetIds} = eventOperateStore;\r\n        if (!movableRef) return;\r\n        const movable: Moveable = movableRef!.current!;\r\n        if (e.isDragStart) {\r\n            e.inputEvent.preventDefault();\r\n            setTimeout(() => {\r\n                movable.dragStart(e.inputEvent);\r\n            });\r\n        }\r\n        let selected = e.selected.filter((item: any) => {\r\n            return item.dataset.locked !== 'true';\r\n        });\r\n        //如果展示了图层列表，则同步勾选图层列表中的元素\r\n        if (e.inputEvent.target.className.indexOf('menu-item') === -1) {\r\n            let targetIds: string[] = [];\r\n            selected.forEach((item: any) => targetIds.push(item.id));\r\n            setTargetIds(targetIds);\r\n        }\r\n        setTargets(selected);\r\n        if (selected.length > 1) {\r\n            //计算组件多选时的左上角坐标\r\n            let {calculateGroupRootCoordinate} = eventOperateStore;\r\n            calculateGroupRootCoordinate(selected);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.props.children}\r\n                <Selecto ref={this.selectorRef}\r\n                         dragContainer={\".lc-event-container\"}\r\n                         selectableTargets={[\".lc-comp-item\"]}\r\n                         hitRate={0}\r\n                         selectByClick={true}\r\n                         selectFromInside={false}\r\n                         toggleContinueSelect={[\"ctrl\"]}\r\n                         ratio={0}\r\n                         onDragStart={e => {\r\n                             const {movableRef, targets} = eventOperateStore;\r\n                             const movable: Moveable = movableRef!.current!;\r\n                             const target = e.inputEvent.target;\r\n                             if ((movable.isMoveableElement(target))\r\n                                 || targets.some((t: any) => t === target || t.contains(target))\r\n                             ) {\r\n                                 e.stop();\r\n                             }\r\n                         }}\r\n                         onSelectEnd={this.onSelectEnd}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(GroupSelectable);","import {action, makeObservable, observable} from \"mobx\";\r\n\r\n/**\r\n * 右键操作菜单的状态管理类。\r\n */\r\nclass ContextMenuStore {\r\n    constructor() {\r\n        makeObservable(this, {\r\n            visible: observable,\r\n            position: observable,\r\n            updateVisible: action,\r\n            setPosition: action,\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 右键菜单显示状态\r\n     */\r\n    visible = false;\r\n    /**\r\n     * 右键菜单位置\r\n     */\r\n    position = [0, 0];\r\n    /**\r\n     * 鼠标按下时间，用于优化。 右键菜单的操作体验。由于长按右键是拖拽整个画布的操作。 在长时间按住右键后。\r\n     * 右键菜单也会显示。为了避免这种情况。 需要在鼠标抬起时。 判断鼠标按下到抬起的时间。如果时间小于200ms则不显示右键菜单。\r\n     */\r\n    mouseDownTime = 0;\r\n    /**\r\n     * 鼠标抬起时间\r\n     */\r\n    mouseUpTime = 0;\r\n\r\n    updateVisible = (visible: boolean) => this.visible = visible;\r\n\r\n    setPosition = (position: number[]) => this.position = position;\r\n\r\n    setMouseDownTime = (time: any) => this.mouseDownTime = time;\r\n\r\n    setMouseUpTime = (time: any) => this.mouseUpTime = time;\r\n\r\n}\r\n\r\nconst contextMenuStore = new ContextMenuStore();\r\nexport default contextMenuStore;","export default class RenderUtil {\r\n    private static prev: number = 0;\r\n\r\n    public static throttle(fn: Function, delay: number, callback?: Function) {\r\n\r\n        return function (...args: any) {\r\n            const now = Date.now();\r\n            if (now - RenderUtil.prev > delay) {\r\n                fn(...args);\r\n                RenderUtil.prev = now;\r\n            } else {\r\n                callback && callback(...args);\r\n            }\r\n        };\r\n    }\r\n}\r\n","export enum ClassifyEnum {\r\n    //所有\r\n    ALL = 'all',\r\n    //基础\r\n    BASE = 'base',\r\n    //装饰\r\n    ORNAMENTAL = 'ornamental',\r\n    //条形图\r\n    BAR = 'bar',\r\n    //柱状图\r\n    COLUMN = 'column',\r\n    //折线图\r\n    LINE = 'line',\r\n    //面积图\r\n    AREA = 'area',\r\n    //饼图\r\n    PIE = 'pie',\r\n    //进度图\r\n    PROGRESS = 'progress',\r\n    //散点图\r\n    SCATTER = 'scatter',\r\n    //雷达图\r\n    RADAR = 'radar',\r\n    //玫瑰图\r\n    ROSE = 'rose',\r\n    //词云图\r\n    WORD_CLOUD = 'word_cloud',\r\n    //直方图\r\n    HISTOGRAM = 'histogram',\r\n    //旭日图\r\n    SUNBURST = 'sunburst',\r\n    //矩阵图\r\n    TREEMAP = 'treemap',\r\n\r\n}\r\n","import {TriggerType} from \"./HotKey\";\r\nimport {doScale} from \"../scale/Scaler\";\r\nimport eventOperateStore from \"../EventOperateStore\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\nimport rightStore from \"../../right/RightStore\";\r\nimport {SaveType} from \"../../DesignerType\";\r\nimport designerStarter from \"../../DesignerStarter\";\r\nimport RenderUtil from \"../../../utils/RenderUtil\";\r\nimport {message} from \"antd\";\r\nimport {cloneDeep} from \"lodash\";\r\n\r\n\r\nexport const selectAll = () => {\r\n    let comps = document.getElementsByClassName('lc-comp-item');\r\n    let compIds: string[] = [];\r\n    let compArr: any[] = [];\r\n    comps && Array.from(comps).forEach((comp: any) => {\r\n        if (comp.dataset.locked !== 'true') {\r\n            compArr.push(comp);\r\n            compIds.push(comp.id);\r\n        }\r\n    });\r\n    const {setTargets, setTargetIds, calculateGroupRootCoordinate} = eventOperateStore;\r\n    setTargets(compArr);\r\n    setTargetIds(compIds);\r\n\r\n    //计算组件多选时的左上角坐标\r\n    if (compArr.length > 1)\r\n        calculateGroupRootCoordinate(compArr);\r\n}\r\n\r\nexport const doCopy = () => {\r\n    const {targetIds, setTargetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {copyItem} = designerStore;\r\n    let newIds = copyItem(targetIds);\r\n    let targets: any = [];\r\n    //延迟10毫秒，等待dom元素渲染完毕后再获取。\r\n    setTimeout(() => {\r\n        for (const newId of newIds) {\r\n            targets.push(document.getElementById(newId));\r\n        }\r\n        targets.filter((item: any) => item !== null);\r\n        setTargets(targets);\r\n        setTargetIds(newIds);\r\n    }, 10);\r\n}\r\n\r\nexport const doLock = () => {\r\n    const {targetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate = [];\r\n    for (const targetId of targetIds) {\r\n        let item = layoutConfigs[targetId];\r\n        toBeUpdate.push({...item, locked: true})\r\n    }\r\n    updateLayout(toBeUpdate);\r\n    //操作完毕之后，清空已被选择的元素。\r\n    setTargets([]);\r\n}\r\n\r\nexport const toTop = () => {\r\n    let {maxLevel, setMaxLevel, targetIds, setTargetIds} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, order: ++maxLevel});\r\n    });\r\n    setMaxLevel(maxLevel)\r\n    setTargetIds([]);\r\n    updateLayout(toBeUpdate);\r\n}\r\n\r\nexport const toBottom = () => {\r\n    let {minLevel, setMinLevel, targetIds, setTargetIds} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, order: --minLevel});\r\n    });\r\n    setMinLevel(minLevel)\r\n    setTargetIds([]);\r\n    updateLayout(toBeUpdate);\r\n}\r\n\r\nexport const doDelete = () => {\r\n    const {targetIds, setTargetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {setContentVisible, activeConfig} = rightStore;\r\n    setContentVisible(false);\r\n    activeConfig(\"80cc666f\", \"LcBg\");\r\n    targetIds.length > 0 && designerStore.delItem(targetIds);\r\n    setTargetIds([]);\r\n    setTargets([])\r\n}\r\n\r\nexport const doSave = () => {\r\n    RenderUtil.throttle(() => {\r\n        let {projectConfig: {saveType}} = designerStore;\r\n        if (saveType === SaveType.LOCAL) {\r\n            const {abstractOperatorMap} = designerStarter;\r\n            const {projectConfig: {saveType = SaveType.LOCAL}} = designerStore;\r\n            abstractOperatorMap[saveType].doCreateOrUpdate(cloneDeep(designerStore.getData()));\r\n        } else if (saveType === SaveType.SERVER) {\r\n            alert(\"server save\");\r\n        }\r\n    }, 5000, () => {\r\n        message.warn('保存过于频繁，请稍后再试！')\r\n    })();\r\n\r\n}\r\n\r\nexport const doUnLock = () => {\r\n    const {unLockedId} = eventOperateStore;\r\n    if (!unLockedId || unLockedId === '') return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let item = layoutConfigs[unLockedId];\r\n    updateLayout([{...item, locked: false}])\r\n}\r\n\r\nexport const doHide = () => {\r\n    const {targetIds} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, hide: true});\r\n    });\r\n    updateLayout(toBeUpdate)\r\n}\r\n\r\nexport const doMoveUp = () => {\r\n    const {targets, movableRef, groupRootCoordinate, setGroupRootCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let yPos = layoutConfigs[id].position![1] - dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n    } else {\r\n        const yPos = groupRootCoordinate.y - dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n        setGroupRootCoordinate({x: groupRootCoordinate.x, y: yPos});\r\n    }\r\n}\r\n\r\nexport const doMoveDown = () => {\r\n    const {targets, movableRef, groupRootCoordinate, setGroupRootCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let yPos = layoutConfigs[id].position![1] + dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n    } else {\r\n        const yPos = groupRootCoordinate.y + dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n        setGroupRootCoordinate({x: groupRootCoordinate.x, y: yPos});\r\n\r\n    }\r\n}\r\n\r\nexport const doMoveLeft = () => {\r\n    const {targets, movableRef, groupRootCoordinate, setGroupRootCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let xPos = layoutConfigs[id].position![0];\r\n        movableRef?.current?.request(\"draggable\", {x: xPos - dragStep}, true);\r\n    } else {\r\n        const xPos = groupRootCoordinate.x - dragStep;\r\n        movableRef?.current?.request(\"draggable\", {x: xPos}, true);\r\n        setGroupRootCoordinate({x: xPos, y: groupRootCoordinate.y});\r\n    }\r\n}\r\n\r\nexport const doMoveRight = () => {\r\n    const {targets, movableRef, groupRootCoordinate, setGroupRootCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let xPos = layoutConfigs[id].position![0];\r\n        movableRef?.current?.request(\"draggable\", {x: xPos + dragStep}, true);\r\n    } else {\r\n        const xPos = groupRootCoordinate.x + dragStep;\r\n        movableRef?.current?.request(\"draggable\", {x: xPos}, true);\r\n        setGroupRootCoordinate({x: xPos, y: groupRootCoordinate.y});\r\n    }\r\n}\r\n\r\nexport const getOperateEventMapping: any = () => {\r\n    return {\r\n        'alt + wheel': {\r\n            handler: doScale,\r\n            triggerType: TriggerType.COILED,\r\n        },\r\n        'control + a': {\r\n            handler: selectAll,\r\n        },\r\n        'control + v': {\r\n            handler: doCopy,\r\n        },\r\n        'control + l': {\r\n            handler: doLock,\r\n        },\r\n        'control + arrowup': {\r\n            handler: toTop,\r\n        },\r\n        'control + arrowdown': {\r\n            handler: toBottom,\r\n        },\r\n        'control + s': {\r\n            handler: doSave,\r\n        },\r\n        'delete': {\r\n            handler: doDelete,\r\n        },\r\n        'arrowup': {\r\n            handler: doMoveUp,\r\n            triggerType: TriggerType.COILED,\r\n        },\r\n        'arrowdown': {\r\n            handler: doMoveDown,\r\n            triggerType: TriggerType.COILED,\r\n        },\r\n        'arrowleft': {\r\n            handler: doMoveLeft,\r\n            triggerType: TriggerType.COILED,\r\n        },\r\n        'arrowright': {\r\n            handler: doMoveRight,\r\n            triggerType: TriggerType.COILED,\r\n        }\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport contextMenuStore from \"./ContextMenuStore\";\r\nimport './OperateMenu.less';\r\nimport {\r\n    CopyOutlined,\r\n    DeleteOutlined,\r\n    EyeInvisibleOutlined,\r\n    LockOutlined,\r\n    VerticalAlignBottomOutlined,\r\n    VerticalAlignTopOutlined\r\n} from \"@ant-design/icons\";\r\nimport {doCopy, doDelete, doHide, doLock, doUnLock, toBottom, toTop} from \"../keyboard-mouse/HotKeyConfig\";\r\n\r\nclass ContextMenu extends Component {\r\n\r\n    menuList = [\r\n        {\r\n            name: '锁定',\r\n            icon: LockOutlined,\r\n            onClick: doLock,\r\n        },\r\n        {\r\n            name: '解锁',\r\n            icon: LockOutlined,\r\n            onClick: doUnLock,\r\n        },\r\n        {\r\n            name: '隐藏',\r\n            icon: EyeInvisibleOutlined,\r\n            onClick: doHide,\r\n        },\r\n        {\r\n            name: '复制',\r\n            icon: CopyOutlined,\r\n            onClick: doCopy,\r\n        },\r\n        {\r\n            name: '置顶',\r\n            icon: VerticalAlignTopOutlined,\r\n            onClick: toTop,\r\n        },\r\n        {\r\n            name: '置底',\r\n            icon: VerticalAlignBottomOutlined,\r\n            onClick: toBottom,\r\n        },\r\n        {\r\n            name: '删除',\r\n            icon: DeleteOutlined,\r\n            onClick: doDelete,\r\n        },\r\n    ]\r\n\r\n    render() {\r\n        const {visible, position = [0, 0]} = contextMenuStore;\r\n        let menuListDom = [];\r\n        for (let i = 0; i < this.menuList.length; i++) {\r\n            let menuItem = this.menuList[i];\r\n            let Icon = menuItem.icon;\r\n            menuListDom.push(\r\n                <div key={i + ''} className={'menu-item'} onClick={menuItem.onClick}>\r\n                    <label><Icon/></label>\r\n                    <span>{menuItem.name}</span>\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <>\r\n                {visible &&\r\n                <div className={'lc-right-menu'} style={{\r\n                    position: 'fixed',\r\n                    top: position[1],\r\n                    left: position[0]\r\n                }}>\r\n                    {menuListDom}\r\n                </div>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ContextMenu);","import React, {MouseEvent, PureComponent} from 'react';\r\nimport DragScaleProvider from \"../operate-provider/DragScaleProvider\";\r\nimport {observer} from \"mobx-react\";\r\nimport designerStore, {DesignerStore} from \"../store/DesignerStore\";\r\nimport DesignerBackground from \"../../comps/lc/background/DesignerBackground\";\r\nimport rightStore from \"../right/RightStore\";\r\nimport DesignerRuler from \"../../lib/lc-ruler/DesignerRuler\";\r\nimport DesignerContainer from \"../operate-provider/DesignerContainer\";\r\nimport GroupMovable from \"../../lib/lc-movable/GroupMovable\";\r\nimport GroupSelectable from \"../../lib/lc-movable/GroupSelectable\";\r\nimport LcRightMenu from \"../operate-provider/right-click-menu/ContextMenu\";\r\nimport {MovableItemType} from \"../../lib/lc-movable/types\";\r\nimport HotKey from \"../operate-provider/keyboard-mouse/HotKey\";\r\nimport {getOperateEventMapping} from \"../operate-provider/keyboard-mouse/HotKeyConfig\";\r\nimport ComponentContainer from \"../../framework/core/ComponentContainer\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport {isEqual} from \"lodash\";\r\n\r\n/**\r\n * 设计器画布\r\n */\r\nclass DesignerCanvas extends PureComponent<DesignerStore | any> {\r\n\r\n    backgroundRef: DesignerBackground | null = null;\r\n\r\n    state = {\r\n        designerRef: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({designerRef: document.querySelector('.lc-ruler-content')});\r\n    }\r\n\r\n    updateActive = (e: MouseEvent<HTMLDivElement>) => {\r\n        let {id, dataset: {type}} = e.target as HTMLDivElement;\r\n        const {activeConfig, activeElem} = rightStore;\r\n        if (isEqual(activeElem, {id, type})) return;\r\n        activeConfig(id, type!);\r\n    }\r\n\r\n    /**\r\n     * 元素生成\r\n     */\r\n    generateElement = () => {\r\n        let {layoutConfigs} = designerStore!;\r\n        const sortLayout = Object.values(layoutConfigs).sort((a: MovableItemType, b: MovableItemType) => a.order! - b.order!);\r\n        return sortLayout.map((item: MovableItemType) => {\r\n            return <ComponentContainer layout={item} key={item.id}/>\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {loaded} = designerStore;\r\n        if (!loaded)\r\n            return <Loading/>;\r\n        return (\r\n            <>\r\n                <DesignerContainer>\r\n                    <GroupSelectable>\r\n                        <DesignerRuler offsetX={60} offsetY={50}>\r\n                            <DragScaleProvider>\r\n                                <GroupMovable>\r\n                                    <DesignerBackground onClick={this.updateActive}\r\n                                                        ref={ref => this.backgroundRef = ref}>\r\n                                        {this.generateElement()}\r\n                                    </DesignerBackground>\r\n                                </GroupMovable>\r\n                            </DragScaleProvider>\r\n                            <LcRightMenu/>\r\n                        </DesignerRuler>\r\n                    </GroupSelectable>\r\n                </DesignerContainer>\r\n                <HotKey handlerMapping={getOperateEventMapping()}/>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DesignerCanvas);\r\n\r\n","import React, {Component, ReactElement, Suspense} from 'react';\r\nimport './DesignerHeader.less';\r\nimport headerStore from \"./HeaderStore\";\r\nimport CanvasHdConfigImpl from \"./items/canvas/CanvasHdConfigImpl\";\r\nimport {observer} from \"mobx-react\";\r\nimport designerStarter from \"../DesignerStarter\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\n\r\nconst ProjectHdItemImpl = React.lazy(() => import('./items/project/ProjectHdItemImpl'));\r\nconst ThemeHdItemImpl = React.lazy(() => import('./items/theme/ThemeHdItemImpl'));\r\n\r\nclass Header extends Component<any> {\r\n\r\n    buildHeaderList = (): Array<ReactElement> => {\r\n        const {headerItemInstances} = designerStarter;\r\n        let items: Array<ReactElement> = [];\r\n        for (let i = 0; i < headerItemInstances.length; i++) {\r\n            const {icon: Icon, name, onClick} = headerItemInstances[i];\r\n            items.push(\r\n                <div key={i + ''} className={'right-item'} onClick={onClick}>\r\n                    <span className={'item-span'}><Icon/>&nbsp;{name}</span>\r\n                </div>\r\n            );\r\n        }\r\n        return items;\r\n    }\r\n\r\n    render() {\r\n        const {canvasVisible, projectVisible, themeVisible} = headerStore;\r\n        const items = this.buildHeaderList();\r\n        return (\r\n            <div className={'designer-header'}>\r\n                <div className={'header-left'}>\r\n                    <div className={'header-title'}>L C</div>\r\n                </div>\r\n                <div className={'header-right'}>\r\n                    {items}\r\n                </div>\r\n                {/*todo 想办法让这两个组件不要在这里写死*/}\r\n                {canvasVisible && <Suspense fallback={<Loading/>}><CanvasHdConfigImpl/> </Suspense>}\r\n                {projectVisible && <Suspense fallback={<Loading/>}><ProjectHdItemImpl/></Suspense>}\r\n                {themeVisible && <Suspense fallback={<Loading/>}><ThemeHdItemImpl/></Suspense>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Header);\r\n","import React, {Component} from 'react';\r\n\r\nclass LcHeader extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-header'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcHeader;","import React, {Component} from 'react';\r\n\r\nclass LcBody extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcBody;","import React, {Component} from 'react';\r\n\r\nclass LcLeft extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body-left'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcLeft;","import React, {Component} from 'react';\r\n\r\nclass LcContent extends Component {\r\n    render() {\r\n        return (\r\n            <div id={'structureContent'} className={'structure-body-content'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcContent;","import React, {Component} from 'react';\r\n\r\nclass LcRight extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body-right'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcRight;","import React, {Component} from 'react';\r\nimport './structure.less';\r\n\r\nclass LcStructure extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'lc-designer-structure'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcStructure;","import React, {Component} from 'react';\r\n\r\nclass LcFoot extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-foot'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcFoot;","export default __webpack_public_path__ + \"static/media/icon-all.fe79e4fd.svg\";","export default __webpack_public_path__ + \"static/media/icon-bar.dfbc87b2.svg\";","export default __webpack_public_path__ + \"static/media/icon-column.ae79292f.svg\";","export default __webpack_public_path__ + \"static/media/icon-area.f3992c44.svg\";","export default __webpack_public_path__ + \"static/media/icon-pie.4d05a7b6.svg\";","export default __webpack_public_path__ + \"static/media/icon-scatter.778bce01.svg\";","export default __webpack_public_path__ + \"static/media/icon-line.b79af542.svg\";","export default __webpack_public_path__ + \"static/media/icon-loading.9d197f5f.svg\";","export default __webpack_public_path__ + \"static/media/icon-flowers.442a19b5.svg\";","export default __webpack_public_path__ + \"static/media/icon-optimize.9b17ea95.svg\";","export default __webpack_public_path__ + \"static/media/icon-points.7fb541f7.svg\";","import {makeAutoObservable} from \"mobx\";\r\nimport {ClassifyEnum} from \"./ClassifyType\";\r\nimport icon_all from '../../../icon/icon-all.svg';\r\nimport icon_bar from '../../../icon/icon-bar.svg';\r\nimport icon_column from '../../../icon/icon-column.svg';\r\nimport icon_area from '../../../icon/icon-area.svg';\r\nimport icon_pie from '../../../icon/icon-pie.svg';\r\nimport icon_scatter from '../../../icon/icon-scatter.svg';\r\nimport icon_line from '../../../icon/icon-line.svg';\r\nimport icon_loading from '../../../icon/icon-loading.svg';\r\nimport icon_flowers from '../../../icon/icon-flowers.svg';\r\nimport icon_optimize from '../../../icon/icon-optimize.svg';\r\nimport icon_points from '../../../icon/icon-points.svg';\r\n\r\nconst getClassifyItemInfo = () => {\r\n    return [\r\n        {\r\n            icon: icon_all,\r\n            name: \"全部\",\r\n            classify: ClassifyEnum.ALL,\r\n        },\r\n        {\r\n            icon: icon_points,\r\n            name: \"基础\",\r\n            classify: ClassifyEnum.BASE,\r\n        },\r\n        {\r\n            icon: icon_optimize,\r\n            name: \"装饰\",\r\n            classify: ClassifyEnum.ORNAMENTAL,\r\n        },\r\n        {\r\n            icon: icon_bar,\r\n            name: \"条形图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_column,\r\n            name: \"柱状图\",\r\n            classify: ClassifyEnum.COLUMN,\r\n        },\r\n        {\r\n            icon: icon_line,\r\n            name: \"折线图\",\r\n            classify: ClassifyEnum.LINE,\r\n        },\r\n        {\r\n            icon: icon_area,\r\n            name: \"面积图\",\r\n            classify: ClassifyEnum.AREA,\r\n        },\r\n        {\r\n            icon: icon_pie,\r\n            name: \"饼图\",\r\n            classify: ClassifyEnum.PIE,\r\n        },\r\n        {\r\n            icon: icon_loading,\r\n            name: \"进度图\",\r\n            classify: ClassifyEnum.PROGRESS,\r\n        },\r\n        {\r\n            icon: icon_scatter,\r\n            name: \"散点图\",\r\n            classify: ClassifyEnum.SCATTER,\r\n        },\r\n        {\r\n            icon: icon_flowers,\r\n            name: \"玫瑰图\",\r\n            classify: ClassifyEnum.ROSE,\r\n        },\r\n        // {\r\n        //     icon: icon_radar,\r\n        //     name: \"雷达图\",\r\n        //     classify: ClassifyEnum.RADAR,\r\n        // },\r\n        // {\r\n        //     icon: icon_word_cloud,\r\n        //     name: \"词云图\",\r\n        //     classify: ClassifyEnum.WORD_CLOUD,\r\n        // },\r\n        // {\r\n        //     icon: icon_histogram,\r\n        //     name: \"直方图\",\r\n        //     classify: ClassifyEnum.HISTOGRAM,\r\n        // },\r\n        // {\r\n        //     icon: icon_sun,\r\n        //     name: \"旭日图\",\r\n        //     classify: ClassifyEnum.SUNBURST,\r\n        // },\r\n        // {\r\n        //     icon: icon_rectangle,\r\n        //     name: \"矩形树图\",\r\n        //     classify: ClassifyEnum.TREEMAP,\r\n        // },\r\n    ]\r\n}\r\n\r\n/**\r\n * 左侧分类列表store\r\n */\r\nclass ClassifyListStore {\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    /**\r\n     * 分类列表\r\n     */\r\n    classifies: Array<any> = [];\r\n    /**\r\n     * 分类搜索关键字\r\n     */\r\n    classifyKey: string = 'all';\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    doInit = () => {\r\n        this.classifies = getClassifyItemInfo();\r\n    }\r\n\r\n    /**\r\n     * 清空store\r\n     */\r\n    doClear = () => {\r\n        this.classifies = [];\r\n    }\r\n\r\n    setClassifyKey = (key: string) => {\r\n        this.classifyKey = key;\r\n    }\r\n}\r\n\r\nconst classifyListStore = new ClassifyListStore();\r\nexport default classifyListStore;","import {action, makeObservable, observable} from \"mobx\";\r\nimport designerStarter from \"../../DesignerStarter\";\r\nimport {BaseInfoType} from \"../../DesignerType\";\r\n\r\n/**\r\n * 设计器左侧列表组件的状态管理类。\r\n */\r\nclass CompListStore {\r\n    constructor() {\r\n        makeObservable(this, {\r\n            compKey: observable,\r\n            visible: observable,\r\n            setVisible: action,\r\n            setCompKey: action,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 组件基础信息数组。设计器左侧组件列表的展示过滤依赖于此数组。\r\n     * 该数组会在设计器加载时进行初始化，后续不再修改。若其他。 场景或组件需要。 操作该数组的数据。 应该操作他的备份。 而不是直接操作该数组。\r\n     */\r\n    compInfoArr: Array<BaseInfoType> = [];\r\n    /**\r\n     * 组件搜索关键字，左侧组件列表根据关键字过滤与组件，使会用到该属性。\r\n     */\r\n    compKey: string = '';\r\n    /**\r\n     * 组件列表可见性。\r\n     */\r\n    visible: boolean = false;\r\n\r\n    doInit = () => {\r\n        const comps: Array<any> = [];\r\n        const {customComponentInfoMap}: any = designerStarter;\r\n        if (customComponentInfoMap) {\r\n            Object.keys(customComponentInfoMap).forEach(key => {\r\n                let baseInfo = customComponentInfoMap[key].getBaseInfo();\r\n                if (baseInfo.compKey !== 'LcBg') comps.push(baseInfo);\r\n            });\r\n        }\r\n        this.compInfoArr = comps;\r\n    }\r\n\r\n    setVisible = (visible: boolean) => this.visible = visible;\r\n\r\n    setCompKey = (key: string) => this.compKey = key;\r\n}\r\n\r\nconst compListStore = new CompListStore();\r\nexport default compListStore;","import React, {Component, MouseEvent} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport '../classify-list/ClassifyList.less';\r\nimport classifyListStore from \"./ClassifyListStore\";\r\nimport compListStore from \"../../float-configs/comp-list/CompListStore\";\r\n\r\nclass ClassifyList extends Component {\r\n\r\n    constructor(props: {}) {\r\n        super(props);\r\n        const {doInit} = classifyListStore;\r\n        doInit && doInit();\r\n    }\r\n\r\n    changeClassifyKey = (e: MouseEvent<HTMLDivElement>) => {\r\n        const {setClassifyKey} = classifyListStore;\r\n        const {setVisible, visible} = compListStore;\r\n        setClassifyKey(e.currentTarget.id);\r\n        if (!visible)\r\n            setVisible && setVisible(true);\r\n    }\r\n\r\n    buildClassifyList = () => {\r\n        const {classifies} = classifyListStore;\r\n        let classifyArr = [];\r\n        for (let i = 0; i < classifies.length; i++) {\r\n            const {icon: Icon, name, classify} = classifies[i];\r\n            classifyArr.push(\r\n                <div key={i + ''} className={'sort-item'} id={classify} onClick={this.changeClassifyKey}>\r\n                    <div className={'sort-item-icon'}><img style={{width: 20}} src={Icon} alt={'all'}/></div>\r\n                    <span className={'sort-item-content'}>{name}</span>\r\n                </div>\r\n            )\r\n        }\r\n        return classifyArr;\r\n    }\r\n\r\n    render() {\r\n        const classifyListDom = this.buildClassifyList();\r\n        return (\r\n            <div className={'lc-charts-sort'} style={{overflowY: 'scroll'}}>\r\n                {classifyListDom}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ClassifyList);","import React, {Component} from 'react';\r\nimport ClassifyList from \"./classify-list/ClassifyList\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nclass DesignerLeft extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <ClassifyList/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DesignerLeft);","import React, {Component} from 'react';\r\nimport './MenuList.less';\r\nimport {MenuInfo} from \"./MenuType\";\r\nimport rightStore from \"./RightStore\";\r\nimport {observer} from \"mobx-react\";\r\n\r\ninterface LcConfigMenusProps {\r\n    onChange?: (menu: string) => void;\r\n}\r\n\r\nclass MenuList extends Component<LcConfigMenusProps | any> {\r\n\r\n    menuChange = (e: any) => {\r\n        const {setActiveMenu, setContentVisible} = rightStore;\r\n        setActiveMenu && setActiveMenu(e.currentTarget.id);\r\n        setContentVisible && setContentVisible(true);\r\n    }\r\n\r\n    buildMenuList = () => {\r\n        const {menus} = rightStore;\r\n        return menus.map((item: MenuInfo) => {\r\n            const Icon: any = item.icon;\r\n            return (\r\n                <div className={'menu-item'} key={item.key} id={item.key} onClick={this.menuChange}>\r\n                    <div className={'item-icon'}><Icon/></div>\r\n                    <div className={'item-content'}>{item.name}</div>\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'lc-config-menu'}>\r\n                <div className={'menu-list'}>\r\n                    {this.buildMenuList()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(MenuList);","import React, {Component, Suspense} from 'react';\r\nimport {LineOutlined} from \"@ant-design/icons\";\r\nimport rightStore from \"./RightStore\";\r\nimport designerStarter from \"../DesignerStarter\";\r\nimport {observer} from \"mobx-react\";\r\nimport './ConfigContent.less';\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport {AbstractCustomComponentDefinition} from \"../../framework/core/AbstractCustomComponentDefinition\";\r\nimport {ConfigType} from \"./ConfigType\";\r\n\r\nclass ConfigContent extends Component {\r\n\r\n    buildConfigContent = () => {\r\n        const {compInstances} = designerStore;\r\n        let {activeMenu, activeElem} = rightStore;\r\n        let {customComponentInfoMap} = designerStarter;\r\n        let abstractConfigObj: AbstractCustomComponentDefinition = customComponentInfoMap[activeElem.type + '']\r\n        let configMapping = abstractConfigObj.getMenuToConfigContentMap();\r\n        const ConfigComp: React.ComponentType<ConfigType> = configMapping![activeMenu];\r\n        const instance = compInstances[activeElem.id + ''];\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <ConfigComp instance={instance}/>\r\n            </Suspense>\r\n        )\r\n\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setContentVisible} = rightStore;\r\n        setContentVisible && setContentVisible(false);\r\n    }\r\n\r\n    render() {\r\n        const {activeMenu, menus} = rightStore;\r\n        let activeMenuName = '';\r\n        for (let i = 0; i < menus.length; i++) {\r\n            if (menus[i].key === activeMenu) {\r\n                activeMenuName = menus[i].name;\r\n                break;\r\n            }\r\n        }\r\n        return (\r\n            <div className={'lc-config-panel'}>\r\n                <div className={'lc-panel-top'}>\r\n                    <div className={'panel-title'}>\r\n                        <span>{activeMenuName}</span></div>\r\n                    <div className={'panel-operate'} onClick={this.onClose}><LineOutlined/></div>\r\n                </div>\r\n                <div className={'lc-panel-content'}>\r\n                    {this.buildConfigContent()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ConfigContent);","import React, {Component} from 'react';\r\nimport MenuList from \"./MenuList\";\r\nimport ConfigContent from \"./ConfigContent\";\r\nimport rightStore from \"./RightStore\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nclass Right extends Component {\r\n\r\n    render() {\r\n        const {visible} = rightStore;\r\n        return (\r\n            <>\r\n                <MenuList/>\r\n                {visible && <ConfigContent/>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Right);","import React, {Component} from 'react';\r\nimport './HotKeyDes.less';\r\n\r\nclass HotKeyDes extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'lc-hotkey-des'} style={{color: 'white'}}>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + S</code></div>\r\n                    <div className={'hotkey-des'}>保存项目</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + V</code></div>\r\n                    <div className={'hotkey-des'}>复制元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + L</code></div>\r\n                    <div className={'hotkey-des'}>锁定元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + up-arrow(方向上键)</code></div>\r\n                    <div className={'hotkey-des'}>元素置顶</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + down-arrow(方向下键)</code></div>\r\n                    <div className={'hotkey-des'}>元素置底</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Delete</code></div>\r\n                    <div className={'hotkey-des'}>删除元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Alt + wheel(鼠标滑轮)</code></div>\r\n                    <div className={'hotkey-des'}>缩放画布</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>长按鼠标右键</code></div>\r\n                    <div className={'hotkey-des'}>拖拽画布</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default HotKeyDes;","export default __webpack_public_path__ + \"static/media/keyboard-icon.1ed11794.svg\";","export default __webpack_public_path__ + \"static/media/layers-icon.aabb7495.svg\";","import React, {Component} from 'react';\r\nimport './Footer.less';\r\nimport eventOperateStore from \"../operate-provider/EventOperateStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport Dialog from \"../../lib/lc-dialog/Dialog\";\r\nimport HotKeyDes from \"./HotKeyDes\";\r\nimport layerListStore from \"../float-configs/layer-list/LayerListStore\";\r\nimport keyboardIcon from './keyboard-icon.svg';\r\nimport layerIcon from './layers-icon.svg';\r\n\r\nclass Footer extends Component {\r\n\r\n    state = {\r\n        showHotKeyDes: false\r\n    }\r\n\r\n    toggleHotKeyDes = () => {\r\n        const {showHotKeyDes} = this.state;\r\n        this.setState({\r\n            showHotKeyDes: !showHotKeyDes\r\n        })\r\n    }\r\n\r\n    toggleLayerList = () => {\r\n        const {setVisible, visible} = layerListStore;\r\n        setVisible && setVisible(!visible);\r\n    }\r\n\r\n    render() {\r\n        const {scale} = eventOperateStore;\r\n        const {layoutConfigs, projectConfig: {name, state}} = designerStore;\r\n        let stateStr = '';\r\n        switch (state) {\r\n            case '0':\r\n                stateStr = '草稿';\r\n                break;\r\n            case '1':\r\n                stateStr = '发布';\r\n                break;\r\n            case '2':\r\n                stateStr = '封存';\r\n                break;\r\n        }\r\n        return (\r\n            <div className={'lc-designer-footer'}>\r\n                <div className={'footer-left'}>\r\n                    <div className={'footer-item'} onClick={this.toggleHotKeyDes}>\r\n                        <img width={16} alt={'快捷键'}\r\n                             src={keyboardIcon}/>\r\n                        &nbsp;\r\n                        <span style={{position: 'relative', top: 2}}>快捷键</span>\r\n                    </div>\r\n                    <div className={'footer-item'} onClick={this.toggleLayerList}>\r\n                        <img width={16} alt={'图层'} src={layerIcon}/>\r\n                        &nbsp;\r\n                        <span style={{position: 'relative', top: 2}}>图层</span>\r\n                    </div>\r\n                </div>\r\n                <div className={'footer-right'}>\r\n                    <div className={'right-info-item'}>缩放 : {(scale * 100).toFixed(0)}%</div>\r\n                    <div className={'right-info-item'}>当前组件数 : {Object.keys(layoutConfigs).length}</div>\r\n                    <div className={'right-info-item'}>项目 : {name}</div>\r\n                    <div className={'right-info-item'}>状态 : {stateStr}</div>\r\n                </div>\r\n                <Dialog title={'快捷键说明'} visible={this.state.showHotKeyDes} onClose={this.toggleHotKeyDes}>\r\n                    <HotKeyDes/>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Footer);","import AbstractDrag from \"./AbstractDrag\";\r\n\r\nexport interface DragCoordinate {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\nexport default class CommonDragger extends AbstractDrag {\r\n\r\n    protected position: { x: number, y: number } = {x: 0, y: 0}; // 第一个点坐标\r\n\r\n    constructor(target: any, dragTarget: any, initPos?: DragCoordinate) {\r\n        super();\r\n        this.target = target;\r\n        this.dragTarget = dragTarget;\r\n        this.registerDragger();\r\n        if (initPos) this.position = initPos;\r\n    }\r\n\r\n    protected onDragEnd = (): void => {\r\n        this.dragTarget.addEventListener('pointerup', (e: any) => {\r\n            if (e.button === 0) {\r\n                this.dragTarget.releasePointerCapture(e.pointerId);\r\n                this.dragTarget.removeEventListener('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected onDragMove = (e: any): void => {\r\n        this.position.x += e.movementX;\r\n        this.position.y += e.movementY;\r\n        this.target.style.transform = 'translate(' + this.position.x + 'px, ' + this.position.y + 'px)';\r\n    }\r\n\r\n    protected onDragStart = (): void => {\r\n        this.dragTarget.addEventListener('pointerdown', (e: any) => {\r\n            if (e.button === 0) {\r\n                this.dragTarget.setPointerCapture(e.pointerId);\r\n                this.dragTarget.addEventListener('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n}","import React, {Component} from 'react';\r\nimport {LineOutlined} from \"@ant-design/icons\";\r\nimport CommonDragger from \"../../operate-provider/drag/CommonDragger\";\r\nimport './FloatPanel.less';\r\n\r\nexport interface FloatPanelProps {\r\n    title?: string;\r\n    initPosition?: { x: number, y: number };\r\n    width?: number;\r\n    height?: number;\r\n    onClose?: () => void;\r\n    className?: string;\r\n}\r\n\r\n/**\r\n * 浮动面板容器，提供浮动面板的拖拽功能\r\n */\r\nclass FloatPanel extends Component<FloatPanelProps> {\r\n\r\n    panelRef: any = null;\r\n    dragTargetRef: any = null;\r\n\r\n    componentDidMount() {\r\n        const {initPosition = {x: 0, y: 0}} = this.props;\r\n        if (this.dragTargetRef && this.panelRef)\r\n            new CommonDragger(this.panelRef, this.dragTargetRef, initPosition);\r\n    }\r\n\r\n    onClose = () => {\r\n        const {onClose} = this.props;\r\n        onClose && onClose();\r\n    }\r\n\r\n    render() {\r\n        const {initPosition = {x: 0, y: 0}, title, className} = this.props;\r\n        return (\r\n            <div className={`float-panel ${className}`}\r\n                 style={{transform: `translate(${initPosition.x}px, ${initPosition.y}px)`}}\r\n                 ref={ref => this.panelRef = ref}>\r\n                <div className={'panel-title'}>\r\n                    <div className={'title-left'}>{title}</div>\r\n                    <div ref={ref => this.dragTargetRef = ref} className={'title-drag-target'}\r\n                         style={{width: '50%', height: '100%'}}>\r\n                    </div>\r\n                    <div className={'title-right'} onClick={this.onClose}><span><LineOutlined/></span></div>\r\n                </div>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FloatPanel;","import React, {Component} from 'react';\r\nimport {Input} from \"antd\";\r\nimport compListStore from \"./CompListStore\";\r\nimport classifyListStore from \"../../left/classify-list/ClassifyListStore\";\r\nimport './CompList.less';\r\nimport {observer} from \"mobx-react\";\r\nimport designerStarter from \"../../DesignerStarter\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {idGenerate} from \"../../../utils/IdGenerate\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\nimport eventOperateStore from \"../../operate-provider/EventOperateStore\";\r\nimport FloatPanel from \"../common/FloatPanel\";\r\nimport {BaseInfoType} from \"../../DesignerType\";\r\n\r\nclass CompList extends Component {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        const {doInit} = compListStore;\r\n        doInit && doInit();\r\n    }\r\n\r\n    addItem = (compKey: string, name: string) => {\r\n        const {addItem} = designerStore;\r\n        let {maxLevel, setMaxLevel} = eventOperateStore;\r\n        let movableItem: MovableItemType = {\r\n            name: name,\r\n            type: compKey,\r\n            width: 320,\r\n            height: 200,\r\n            position: [0, 0],\r\n            id: idGenerate.generateId() + '',\r\n            locked: false,\r\n            hide: false,\r\n            order: ++maxLevel,\r\n        }\r\n        setMaxLevel && setMaxLevel(maxLevel);\r\n        addItem && addItem(movableItem);\r\n    }\r\n\r\n    getChartDom = () => {\r\n        let chartDom = [];\r\n        let {classifyKey} = classifyListStore\r\n        let {compInfoArr, compKey} = compListStore;\r\n        if (classifyKey !== 'all') {\r\n            compInfoArr = compInfoArr.filter((item: BaseInfoType) => {\r\n                return item.typeKey === classifyKey;\r\n            })\r\n        }\r\n        if (compKey !== '') {\r\n            compInfoArr = compInfoArr.filter((item: BaseInfoType) => {\r\n                return item.compName.indexOf(compKey) >= 0;\r\n            })\r\n        }\r\n        for (let i = 0; i < compInfoArr.length; i++) {\r\n            let compInfo: any = compInfoArr[i];\r\n            const {compName, compKey} = compInfo;\r\n            const {customComponentInfoMap} = designerStarter;\r\n            let lcCompInit: any = customComponentInfoMap[compKey];\r\n            let chartImg = lcCompInit.getChartImg();\r\n            chartDom.push(\r\n                <div key={i + ''} className={'list-item droppable-element'}>\r\n                    <div className={'item-header'} ref={'drag-target'}>\r\n                        <div className={'item-name'}>{compName}</div>\r\n                        <div className={'item-type'}>Antd</div>\r\n                    </div>\r\n                    <div className={'item-content'} onDoubleClick={() => this.addItem(compKey, compName)}>\r\n                        <img src={chartImg} alt={'组件预览图'}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        return chartDom;\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setVisible} = compListStore;\r\n        setVisible && setVisible(false);\r\n    }\r\n\r\n    searchChart = (e: any) => {\r\n        const {setCompKey} = compListStore;\r\n        setCompKey && setCompKey(e.currentTarget.value);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <FloatPanel className={'comp-list'} title={'组件列表'} onClose={this.onClose}\r\n                        initPosition={{x: 60, y: -window.innerHeight + 50}}>\r\n                <div className={'list-search'}>\r\n                    <Input placeholder=\"搜索组件\" onPressEnter={this.searchChart}\r\n                           style={{width: '100%'}}/>\r\n                </div>\r\n                <div className={'list-items'}>\r\n                    {this.getChartDom()}\r\n                </div>\r\n            </FloatPanel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(CompList);","export default __webpack_public_path__ + \"static/media/lock.11cf90eb.svg\";","export default __webpack_public_path__ + \"static/media/preview-close.40634e66.svg\";","export default __webpack_public_path__ + \"static/media/preview-open.fe6af5a2.svg\";","export default __webpack_public_path__ + \"static/media/unlock.a58cef96.svg\";","import React, {MouseEvent} from 'react';\r\nimport './LayerItem.less';\r\nimport lockImg from './icon/lock.svg';\r\nimport previewClose from './icon/preview-close.svg';\r\nimport previewOpen from './icon/preview-open.svg';\r\nimport unlockImg from './icon/unlock.svg';\r\nimport layerListStore from \"./LayerListStore\";\r\n\r\nexport interface LayerItemDataProps {\r\n    compId?: string;\r\n    name?: string;\r\n    lock?: boolean;\r\n    hide?: boolean;\r\n    selected?: boolean;\r\n}\r\n\r\nclass LayerItem extends React.PureComponent<LayerItemDataProps> {\r\n\r\n    state = {\r\n        selected: false,\r\n        lock: false,\r\n        hide: false,\r\n        compId: '',\r\n        name: ''\r\n    }\r\n\r\n    constructor(props: LayerItemDataProps) {\r\n        super(props);\r\n        const {selected, lock, hide, compId, name} = props;\r\n        this.state = {\r\n            selected: selected || false,\r\n            lock: lock || false,\r\n            hide: hide || false,\r\n            compId: compId || '',\r\n            name: name || ''\r\n        }\r\n    }\r\n\r\n    toggleLock = () => {\r\n        const {lockChange} = layerListStore;\r\n        lockChange && lockChange(this.state.compId, !this.state.lock);\r\n    }\r\n\r\n    toggleHide = () => {\r\n        const {hideChange} = layerListStore;\r\n        hideChange && hideChange(this.state.compId, !this.state.hide);\r\n    }\r\n\r\n    onSelected = (event: MouseEvent<HTMLDivElement>) => {\r\n        const {selectedChange} = layerListStore;\r\n        selectedChange && selectedChange({...this.state, ...{selected: true}}, event);\r\n    }\r\n\r\n    render() {\r\n        const {name, lock, hide, selected = false} = this.state || {};\r\n        return (\r\n            <div className={`layer-item ${selected ? \"layer-item-selected\" : \"\"}`}\r\n                 onClick={this.onSelected}>\r\n                <div className={'layer-item-name'}>{name}</div>\r\n                <div className={'layer-item-operators'}>\r\n                    <div className={'layer-item-operator'}>\r\n                        <span onClick={this.toggleHide}>\r\n                            <img src={hide ? previewClose : previewOpen} alt={hide ? '显示' : '隐藏'}\r\n                                 style={{width: 14}}/>\r\n                        </span>\r\n                    </div>\r\n                    <div className={'layer-item-operator'}>\r\n                        <span onClick={this.toggleLock}>\r\n                            <img src={lock ? lockImg : unlockImg} alt={lock ? '锁定' : '解锁'}/>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LayerItem;","import AbstractComponent, {OperateType, UpdateOptions,} from \"../../../framework/core/AbstractComponent\";\r\nimport ComponentUtil from \"../../../utils/ComponentUtil\";\r\nimport LayerItem, {LayerItemDataProps} from \"./LayerItem\";\r\nimport {merge} from \"../../../utils/ObjectUtil\";\r\n\r\nexport default class LayerComponent extends AbstractComponent<LayerItem, LayerItemDataProps> {\r\n\r\n    async create(container: HTMLElement, config: LayerItemDataProps): Promise<this> {\r\n        this.config = config;\r\n        if (!this.instance)\r\n            ComponentUtil.createAndRender<LayerItem, LayerItemDataProps>(container, LayerItem, config).then((instance) => {\r\n                this.instance = instance;\r\n            });\r\n        return this;\r\n    }\r\n\r\n    destroy(): void {\r\n    }\r\n\r\n    getConfig(): LayerItemDataProps | null {\r\n        return this.config;\r\n    }\r\n\r\n    update(config: LayerItemDataProps, upOp?: UpdateOptions): void {\r\n        this.config = merge(this.config, config) as LayerItemDataProps;\r\n        upOp = upOp || {reRender: true, operateType: OperateType.OPTIONS};\r\n        if (upOp.reRender)\r\n            this.instance?.setState({...this.config})\r\n    }\r\n\r\n\r\n}\r\n","import React, {Component} from 'react';\r\nimport LayerComponent from \"./LayerComponent\";\r\nimport layerListStore from \"./LayerListStore\";\r\nimport {LayerItemDataProps} from \"./LayerItem\";\r\n\r\nexport interface LayerContainerProps {\r\n    item: LayerItemDataProps;\r\n}\r\n\r\nclass LayerContainer extends Component<LayerContainerProps> {\r\n\r\n    layerContainerRef: HTMLDivElement | null = null;\r\n\r\n    componentDidMount() {\r\n        const {layerInstanceMap} = layerListStore;\r\n        const {item} = this.props as LayerContainerProps;\r\n        new LayerComponent().create(this.layerContainerRef!, item).then(r => {\r\n            layerInstanceMap[item.compId!] = r;\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {item} = this.props as LayerContainerProps;\r\n        return (\r\n            <div id={item.compId + ''} className={'layer-item-container'}\r\n                 ref={ref => this.layerContainerRef = ref}/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LayerContainer;","import React, {Component, KeyboardEvent} from 'react';\r\nimport './LayerList.less';\r\nimport {Input} from \"antd\";\r\nimport layerListStore from \"./LayerListStore\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {LayerItemDataProps} from \"./LayerItem\";\r\nimport {observer} from \"mobx-react\";\r\nimport FloatPanel from \"../common/FloatPanel\";\r\nimport eventOperateStore from \"../../operate-provider/EventOperateStore\";\r\nimport eventManager from \"../../operate-provider/core/EventManager\";\r\nimport LayerContainer from \"./LayerContainer\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\n\r\n//todo 该组件的重新渲染逻辑要重点优化\r\nclass LayerList extends Component {\r\n\r\n    componentDidMount() {\r\n        eventManager.register(\"click\", this.cancelSelected);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventManager.unregister(\"click\", this.cancelSelected);\r\n    }\r\n\r\n    //todo: 想想怎么优化\r\n    cancelSelected = (e: PointerEvent) => {\r\n        const layerListDom = document.querySelector(\".layer-list\");\r\n        if (!layerListDom || !e.target) return;\r\n        if (layerListDom.contains(e.target as Node) && !(e.target as HTMLElement).classList.contains(\"layer-item\")) {\r\n            const {setTargetIds, setTargets} = eventOperateStore;\r\n            setTargetIds([]);\r\n            setTargets([]);\r\n        }\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setVisible} = layerListStore;\r\n        setVisible && setVisible(false);\r\n    }\r\n\r\n    searchLayer = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        const {setContent} = layerListStore;\r\n        const content = (e.target as HTMLInputElement).value;\r\n        // if (content === '') return;\r\n        setContent && setContent(content);\r\n    }\r\n\r\n\r\n    buildLayerList = () => {\r\n        const {layoutConfigs} = designerStore;\r\n        const {targetIds} = eventOperateStore;\r\n        const {searchContent} = layerListStore;\r\n        return Object.values(layoutConfigs)\r\n            .filter((item: MovableItemType) => item.name?.includes(searchContent))\r\n            .sort((a: MovableItemType, b: MovableItemType) => b.order! - a.order!)\r\n            .map((item: MovableItemType, index) => {\r\n                let _props: LayerItemDataProps = {\r\n                    name: item.name,\r\n                    lock: item.locked,\r\n                    hide: item.hide,\r\n                    compId: item.id,\r\n                    selected: targetIds.includes(item.id!)\r\n                }\r\n                return <LayerContainer key={item.id} item={_props}/>\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <FloatPanel title={'图层'} onClose={this.onClose} initPosition={{x: 250, y: -window.innerHeight + 50}}\r\n                        className={'layer-list'}>\r\n                <div className={'list-search'}>\r\n                    <Input placeholder=\"搜索图层\" onPressEnter={this.searchLayer}\r\n                           style={{width: '100%'}}/>\r\n                </div>\r\n                <div className={'layer-items'}>\r\n                    {this.buildLayerList()}\r\n                </div>\r\n            </FloatPanel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(LayerList);","import React, {Component} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport CompList from \"./comp-list/CompList\";\r\nimport compListStore from \"./comp-list/CompListStore\";\r\nimport layerListStore from \"./layer-list/LayerListStore\";\r\nimport LayerList from \"./layer-list/LayerList\";\r\n\r\nclass FloatConfigs extends Component {\r\n    render() {\r\n        const {visible: compListVisible} = compListStore;\r\n        const {visible: layerListVisible} = layerListStore;\r\n        return (\r\n            <>\r\n                {compListVisible && <CompList/>}\r\n                {layerListVisible && <LayerList/>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(FloatConfigs);","import React, {Component} from 'react';\r\nimport DesignerCanvas from \"./canvas/DesignerCanvas\";\r\nimport DesignerHeader from \"./header/DesignerHeader\";\r\nimport LcHeader from \"./structure/LcHeader\";\r\nimport LcBody from \"./structure/LcBody\";\r\nimport LcLeft from \"./structure/LcLeft\";\r\nimport LcContent from \"./structure/LcContent\";\r\nimport LcRight from \"./structure/LcRight\";\r\nimport LcStructure from \"./structure/LcStructure\";\r\nimport LcFoot from \"./structure/LcFoot\";\r\nimport DesignerLeft from \"./left\";\r\nimport Right from \"./right\";\r\nimport Footer from \"./footer/Footer\";\r\nimport {loadDesigner} from \"./LoadDesigner\";\r\nimport {registerEventOnDesignerLoaded} from \"./RegisterEvent\";\r\nimport FloatConfigs from \"./float-configs/FloatConfigs\";\r\n\r\nclass Designer extends Component<any> {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        //加载设计器\r\n        loadDesigner();\r\n    }\r\n\r\n    componentDidMount() {\r\n        //注册设计器加载完成事件\r\n        registerEventOnDesignerLoaded();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <LcStructure>\r\n                <LcHeader>\r\n                    <DesignerHeader/>\r\n                </LcHeader>\r\n                <LcBody>\r\n                    <LcLeft><DesignerLeft/></LcLeft>\r\n                    <LcContent><DesignerCanvas/></LcContent>\r\n                    <LcRight><Right/></LcRight>\r\n                </LcBody>\r\n                <LcFoot>\r\n                    <Footer/>\r\n                </LcFoot>\r\n                <FloatConfigs/>\r\n            </LcStructure>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Designer;","import contextMenuStore from \"./operate-provider/right-click-menu/ContextMenuStore\";\r\nimport eventOperateStore from \"./operate-provider/EventOperateStore\";\r\nimport eventManager from \"./operate-provider/core/EventManager\";\r\nimport {KMMap} from \"./operate-provider/keyboard-mouse/KeyboardMouse\";\r\n\r\nexport function registerEventOnDesignerLoaded() {\r\n    const {setPosition, updateVisible} = contextMenuStore;\r\n    const {setUnLockedId} = eventOperateStore;\r\n    eventManager.register('click', (e: any) => {\r\n        const {visible, updateVisible} = contextMenuStore;\r\n        if (visible && e.button === 0) {\r\n            //这里添加异步处理的原因：必须要在操作菜单执行点击事件执行之后才能卸载dom元素，不然操作菜单的点击事件会失效。\r\n            setTimeout(() => {\r\n                updateVisible(false);\r\n            });\r\n        }\r\n    });\r\n    eventManager.register('contextmenu', (event: any) => {\r\n        event.preventDefault();\r\n        const {mouseDownTime, mouseUpTime} = contextMenuStore;\r\n        let targetArr = ['lc-comp-item', 'moveable-area'];\r\n        if (targetArr.some((item: string) => event.target.classList.contains(item)) && mouseUpTime - mouseDownTime < 200) {\r\n            updateVisible && updateVisible(true);\r\n            setPosition([event.clientX, event.clientY]);\r\n            setUnLockedId(event.target.id);\r\n        } else {\r\n            updateVisible && updateVisible(false);\r\n        }\r\n    });\r\n    eventManager.register('pointerdown', (e: PointerEvent) => {\r\n        if (e.button === 0) {\r\n            KMMap.leftClick = true;\r\n        } else if (e.button === 2)\r\n            KMMap.rightClick = true;\r\n        const {setMouseDownTime} = contextMenuStore;\r\n        setMouseDownTime(Date.now());\r\n    });\r\n    eventManager.register('pointerup', (e: PointerEvent) => {\r\n        if (e.button === 0)\r\n            KMMap.leftClick = false;\r\n        else if (e.button === 2)\r\n            KMMap.rightClick = false;\r\n        const {setMouseUpTime} = contextMenuStore;\r\n        setMouseUpTime(Date.now());\r\n        const {setPointerTarget} = eventOperateStore;\r\n        setPointerTarget(e.target);\r\n    });\r\n}"],"sourceRoot":""}