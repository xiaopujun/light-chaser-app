{"version":3,"sources":["comps/lc/background/DesignerBackground.tsx","framework/core/ComponentContainer.tsx","designer/left/classify-list/ClassifyType.ts","designer/structure/LcHeader.tsx","designer/structure/LcBody.tsx","designer/structure/LcLeft.tsx","designer/structure/LcContent.tsx","designer/structure/LcRight.tsx","designer/structure/LcStructure.tsx","designer/structure/LcFoot.tsx","icon/icon-all.svg","icon/icon-bar.svg","icon/icon-column.svg","icon/icon-area.svg","icon/icon-pie.svg","icon/icon-scatter.svg","icon/icon-line.svg","icon/icon-loading.svg","icon/icon-flowers.svg","icon/icon-optimize.svg","icon/icon-points.svg","designer/left/classify-list/ClassifyListStore.ts","designer/float-configs/comp-list/CompListStore.ts","designer/left/classify-list/ClassifyList.tsx","designer/left/index.tsx","designer/right/MenuList.tsx","designer/right/ConfigContent.tsx","designer/right/index.tsx","designer/footer/HotKeyDes.tsx","designer/footer/keyboard-icon.svg","designer/footer/layers-icon.svg","designer/footer/Footer.tsx","designer/operate-provider/drag/AbstractDrag.ts","designer/operate-provider/drag/CommonDragger.ts","designer/float-configs/common/FloatPanel.tsx","designer/float-configs/comp-list/CompList.tsx","designer/operate-provider/core/EventManager.ts","designer/float-configs/layer-list/icon/lock.svg","designer/float-configs/layer-list/icon/preview-close.svg","designer/float-configs/layer-list/icon/preview-open.svg","designer/float-configs/layer-list/icon/unlock.svg","designer/float-configs/layer-list/LayerItem.tsx","designer/float-configs/layer-list/LayerComponent.ts","designer/float-configs/layer-list/LayerContainer.tsx","designer/float-configs/layer-list/LayerList.tsx","designer/float-configs/FloatConfigs.tsx","designer/operate-provider/right-click-menu/ContextMenuStore.ts","designer/operate-provider/hot-key/KeyboardMouse.ts","designer/header/DesignerHeader.tsx","designer/operate-provider/drag/CanvasDragger.ts","designer/operate-provider/DragScaleProvider.tsx","lib/lc-ruler/DesignerRuler.tsx","designer/operate-provider/DesignerContainer.tsx","lib/lc-movable/GroupMovable.tsx","utils/RenderUtil.ts","designer/operate-provider/undo-redo/core/AbstractRollback.ts","designer/operate-provider/undo-redo/core/DragRollbackImpl.ts","designer/operate-provider/undo-redo/core/ResizeRollbackImpl.ts","designer/operate-provider/undo-redo/core/AddRollbackImpl.ts","designer/operate-provider/undo-redo/core/DelRollbackImpl.ts","designer/operate-provider/undo-redo/core/StyleRollbackImpl.ts","designer/operate-provider/undo-redo/core/HideRollbackImpl.ts","designer/operate-provider/undo-redo/core/LockRollbackImpl.ts","designer/operate-provider/undo-redo/core/OrderRollbackImpl.ts","designer/operate-provider/undo-redo/core/index.ts","designer/operate-provider/hot-key/HotKey.tsx","designer/operate-provider/hot-key/HotKeyImpl.ts","designer/operate-provider/right-click-menu/ContextMenu.tsx","designer/operate-provider/scale/Scaler.ts","designer/operate-provider/hot-key/HotKeyConfig.ts","designer/canvas/DesignerCanvas.tsx","designer/Designer.tsx"],"names":["DesignerBackground","props","onClick","e","getBgConfigProps","bgConfig","state","config","width","height","bgMode","bgColor","bgImg","bgImgSize","length","bgImgPosition","bgImgPos","bgConfigProps","BackgroundMode","NONE","PICTURE","bgImgUrl","bgImgRepeat","single","radialGradient","linearGradient","bgColorMode","BackgroundColorMode","SINGLE","color","LINEAR_GRADIENT","compInstances","designerStore","elemConfigs","componentDefine","EditorDesignerLoader","getInstance","customComponentInfoMap","getInitConfig","AbstractBackgroundImpl","background","className","id","onDoubleClick","this","style","children","Component","ComponentContainer","ref","mode","parseUrlParams","action","layout","historyRecordOperateProxy","doAdd","fallback","type","locked","hide","transform","position","display","pointerEvents","React","PureComponent","ClassifyEnum","LcHeader","LcBody","LcLeft","LcContent","LcRight","LcStructure","LcFoot","classifyListStore","classifies","classifyKey","doInit","icon","icon_all","name","classify","ALL","icon_points","BASE","icon_optimize","ORNAMENTAL","icon_bar","BAR","icon_column","COLUMN","icon_line","LINE","icon_area","AREA","icon_pie","PIE","icon_loading","PROGRESS","icon_scatter","SCATTER","icon_flowers","ROSE","doClear","setClassifyKey","key","makeAutoObservable","compListStore","compInfoArr","compKey","visible","comps","Object","keys","forEach","baseInfo","getBaseInfo","push","setVisible","setCompKey","makeObservable","observable","ClassifyList","changeClassifyKey","currentTarget","buildClassifyList","classifyArr","i","Icon","src","alt","classifyListDom","overflowY","observer","DesignerLeft","MenuList","menuChange","setActiveMenu","rightStore","setContentVisible","buildMenuList","menus","map","item","ConfigContent","createProxy","instance","Proxy","get","target","prop","originalMethod","apply","thisArg","argumentsList","newValue","oldValue","ObjectUtil","getOriginValue","doStyleUpd","buildConfigContent","activeMenu","activeElem","ConfigComp","getMenuToConfigContentMap","Loading","onClose","activeMenuName","LineOutlined","Right","HotKeyDes","Footer","showHotKeyDes","toggleHotKeyDes","setState","toggleLayerList","layerListStore","layoutConfigs","projectConfig","size","footerStore","coordinate","scale","stateStr","keyboardIcon","top","layerIcon","parseInt","toFixed","Dialog","title","AbstractDrag","dragTarget","x","y","onDragStart","onDragEnd","CommonDragger","initPos","addEventListener","button","releasePointerCapture","pointerId","removeEventListener","onDragMove","movementX","movementY","setPointerCapture","registerDragger","FloatPanel","panelRef","dragTargetRef","initPosition","CompList","addItem","maxLevel","eventOperateStore","setMaxLevel","setAddRecordCompId","movableItem","idGenerate","generateId","order","getChartDom","chartDom","filter","typeKey","compName","indexOf","compInfo","chartImg","getChartImg","searchChart","value","window","innerHeight","UnderLineInput","placeholder","onChange","containStyle","inputStyle","padding","EventManager","events","handler","index","splice","args","eventManager","LayerItem","selected","lock","compId","toggleLock","lockChange","toggleHide","hideChange","onSelected","event","selectedChange","itemClass","previewClose","previewOpen","lockImg","unlockImg","LayerComponent","container","a","ComponentUtil","createAndRender","then","upOp","merge","reRender","operateType","OperateType","OPTIONS","AbstractComponent","LayerContainer","layerContainerRef","layerInstanceMap","create","r","LayerList","cancelSelected","layerListDom","document","querySelector","contains","classList","setTargets","searchLayer","setContent","content","buildLayerList","targetIds","searchContent","commandMode","startsWith","substring","values","trim","includes","sort","b","_props","register","unregister","FloatConfigs","compListVisible","layerListVisible","contextMenuStore","mouseDownTime","mouseUpTime","updateVisible","setPosition","setMouseDownTime","time","setMouseUpTime","KMMap","leftClick","rightClick","middleClick","ProjectHdItemImpl","lazy","CanvasHdConfigImpl","ThemeHdItemImpl","Header","buildHeaderList","items","headerItemInstances","canvasVisible","headerStore","projectVisible","themeVisible","CanvasDragger","console","log","DragScaleProvider","scaleCore","error","clientX","clientY","destroy","Error","dragger","providerRef","canvasConfig","overflow","innerWidth","backgroundColor","offsetX","offsetY","DesignerRuler","wheelTimerId","pointerMoveTimerId","render","unit","baseOffset","_scrollPosX","_scrollPosY","rulerX","mousePosX","scrollPosX","startPosX","rulerY","mousePosY","scrollPosY","startPosY","ofX","ofY","ratio","Math","floor","clearTimeout","setTimeout","scroll","textAlign","fontSize","left","scrollPos","zoom","lineColor","textColor","segment","negativeRuler","textOffset","DesignerContainer","outline","GroupMovable","movableRef","updateLayout","setCoordinate","backoff","setBackoff","lastEvent","beforeTranslate","data","offsetWidth","offsetHeight","dataset","doDrag","onDragGroupEnd","targets","setGroupCoordinate","groupCoordinate","ev","posChange","minX","minY","onResizeEnd","translate","drag","direction","doResize","setSize","onResizeGroupEnd","dist","groupWidth","groupHeight","onResizeGroup","onResize","onResizeStart","onDrag","onDragGroup","onResizeGroupStart","setMovableRef","readonly","selectorRef","rasterize","dragStep","resizeStep","draggable","resizable","keepRatio","throttleDrag","throttleResize","onClickGroup","current","clickTarget","inputEvent","inputTarget","RenderUtil","fn","delay","callback","now","Date","prev","AbstractRollback","DragRollbackImpl","record","nextRecordData","next","ids","getElementById","request","prevRecordData","dragRollbackImpl","ResizeRollbackImpl","nextResizeData","prevResizeData","resizeRollbackImpl","AddRollbackImpl","layoutConfig","nextAddData","delItem","delIds","addRollbackImpl","DelRollbackImpl","prevDelData","elemConfig","delRollbackImpl","StyleRollbackImpl","update","styleRollbackImpl","HideRollbackImpl","hideRollbackImpl","LockRollbackImpl","lockRollbackImpl","OrderRollBackImpl","orderRollBackImpl","undoRedoMap","Map","set","HistoryType","DRAG","RESIZE","ADD","DEL","STYLE","HIDE","LOCK","ORDER","TriggerType","doCopy","newIds","copyItem","newId","doLock","toBeUpdate","doLockUpd","doUnLock","toUpdate","toTop","doOrderUpd","toBottom","minLevel","setMinLevel","doDelete","doHide","doHideUpd","ContextMenu","menuList","LockOutlined","EyeInvisibleOutlined","CopyOutlined","VerticalAlignTopOutlined","VerticalAlignBottomOutlined","DeleteOutlined","menuListDom","menuItem","shieldKeyList","HotKey","handlerMapping","currHotKey","existHandlerKey","doHandler","hotKey","triggerType","COILED","pointerTarget","enforcementCap","keyDown","toLowerCase","some","join","preventDefault","keyUp","wheel","onBlur","onblur","scaleCanvas","origin","getHotKeyConfig","compute","deltaY","emit","setScale","getElementsByClassName","compIds","compArr","Array","from","comp","calculateGroupCoordinate","throttle","saveType","SaveType","LOCAL","abstractOperatorMap","doCreateOrUpdate","cloneDeep","getData","SERVER","alert","message","warn","historyOperator","undo","forward","redo","yPos","xPos","DesignerCanvas","backgroundRef","designerRef","updateActive","activeConfig","isEqual","generateElement","GroupSelectable","Designer","load","clickHandler","contextMenuHandler","pointerDownHandler","pointerUpHandler","clickEmit","contextMenuEmit","pointerDownEmit","pointerMoveEmit","pointerUpEmit","loaded","setPointerTarget"],"mappings":"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","file":"static/js/15.714b7ef7.chunk.js","sourcesContent":["import React, {Component, MouseEvent} from 'react';\r\nimport {BackgroundColorMode, BackgroundMode} from \"../../../designer/DesignerType\";\r\nimport AbstractBackgroundImpl, {AbstractBackgroundImplProps, BackgroundConfigType} from \"./AbstractBackgroundImpl\";\r\nimport designerStore from \"../../../designer/store/DesignerStore\";\r\nimport EditorDesignerLoader from \"../../../designer/loader/EditorDesignerLoader\";\r\n\r\ninterface LcDesignerBackgroundProps {\r\n    onClick?: (e: MouseEvent<HTMLDivElement>) => void;\r\n    config?: BackgroundConfigType;\r\n}\r\n\r\n/**\r\n * 设计器画布背景\r\n */\r\nclass DesignerBackground extends Component<LcDesignerBackgroundProps> {\r\n\r\n    constructor(props: LcDesignerBackgroundProps) {\r\n        super(props);\r\n        const {compInstances, elemConfigs} = designerStore;\r\n        // const {customComponentInfoMap} = designerStarter;\r\n        let config: AbstractBackgroundImplProps | null = null;\r\n        if ('80cc666f' in elemConfigs!)\r\n            config = elemConfigs['80cc666f'];\r\n        else {\r\n            const componentDefine = EditorDesignerLoader.getInstance().customComponentInfoMap['LcBg'];\r\n            if (componentDefine)\r\n                config = componentDefine.getInitConfig();\r\n        }\r\n        compInstances['80cc666f'] = new AbstractBackgroundImpl(this, config!);\r\n        this.state = {config: config?.background}\r\n        // delete elemConfigs!['80cc666f'];\r\n    }\r\n\r\n    onClick = (e: MouseEvent<HTMLDivElement>) => {\r\n        const {onClick} = this.props;\r\n        onClick && onClick(e);\r\n    }\r\n\r\n    getBgConfigProps = () => {\r\n        // const bgConfig: BackgroundConfigType = this.props.config!!;\r\n        const {config: bgConfig} = this.state as any;\r\n        const {width, height, bgMode, bgColor, bgImg} = bgConfig;\r\n        let bgImgSize = '100% 100%';\r\n        if (bgImg.bgImgSize && bgImg.bgImgSize.length === 2)\r\n            bgImgSize = `${bgConfig.bgImg.bgImgSize[0]}px ${bgImg.bgImgSize[1]}px`;\r\n        let bgImgPosition = '0 0';\r\n        if (bgImg.bgImgPos && bgImg.bgImgPos.length === 2)\r\n            bgImgPosition = `${bgImg.bgImgPos[0]}px ${bgImg.bgImgPos[1]}px`;\r\n        if (bgConfig) {\r\n            let bgConfigProps: any = {height: height, width: width}\r\n            if (bgMode + '' === BackgroundMode.NONE)\r\n                bgConfigProps['backgroundColor'] = '#000000';\r\n            else if (bgMode + '' === BackgroundMode.PICTURE) {\r\n                if (bgImg.bgImgUrl && bgImg.bgImgUrl !== '') {\r\n                    bgConfigProps['backgroundImage'] = `url(${bgImg.bgImgUrl})`;\r\n                    bgConfigProps['backgroundSize'] = bgImgSize;\r\n                    bgConfigProps['backgroundPosition'] = bgImgPosition;\r\n                    bgConfigProps['backgroundRepeat'] = bgImg?.bgImgRepeat;\r\n                } else\r\n                    bgConfigProps['backgroundColor'] = '#000000';\r\n            } else {\r\n                const {single, radialGradient, linearGradient, bgColorMode} = bgColor;\r\n                if (bgConfig?.bgColor.bgColorMode + '' === BackgroundColorMode.SINGLE)\r\n                    bgConfigProps['backgroundColor'] = single.color;\r\n                else if (bgColorMode === BackgroundColorMode.LINEAR_GRADIENT)\r\n                    bgConfigProps['background'] = linearGradient.color;\r\n                else\r\n                    bgConfigProps['background'] = radialGradient.color;\r\n            }\r\n            return bgConfigProps;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'lc-background'}\r\n                 id={'80cc666f'}\r\n                 data-type={'LcBg'}\r\n                 onDoubleClick={this.onClick}\r\n                 style={this.getBgConfigProps()}>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerBackground;","import React, {Suspense} from \"react\";\r\nimport {MovableItemType} from \"../../lib/lc-movable/types\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport {parseUrlParams} from \"../../utils/URLUtil\";\r\nimport historyRecordOperateProxy from \"../../designer/operate-provider/undo-redo/HistoryRecordOperateProxy\";\r\n\r\nexport interface ComponentContainerProps {\r\n    layout: MovableItemType;\r\n}\r\n\r\nclass ComponentContainer extends React.PureComponent<ComponentContainerProps> {\r\n\r\n    private ref: HTMLDivElement | null = null;\r\n\r\n    private mode: string = parseUrlParams()?.action || 'edit';\r\n\r\n    componentDidMount(): void {\r\n        //通过ref创建组件，并将组件实例方法Map中。后续通过Map匹配到具体实例，\r\n        //调用实例的对象方法进行组件的更新操作\r\n        const {layout} = this.props;\r\n        historyRecordOperateProxy.doAdd(this.ref, layout);\r\n    }\r\n\r\n    render() {\r\n        const {layout} = this.props;\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <div\r\n                    id={layout.id}\r\n                    data-type={layout.type}\r\n                    data-locked={layout.locked}\r\n                    data-hide={layout.hide}\r\n                    key={layout.id + ''}\r\n                    style={{\r\n                        width: layout.width,\r\n                        height: layout.height,\r\n                        transform: `translate(${layout.position![0]}px, ${layout.position![1]}px)`,\r\n                        position: 'absolute',\r\n                        display: layout.hide ? 'none' : 'block',\r\n                    }} className={'lc-comp-item'}>\r\n                    <div ref={(ref) => this.ref = ref} style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        //todo 要优化\r\n                        pointerEvents: `${this.mode === 'view' ? 'auto' : 'none'}`,\r\n                        position: 'relative'\r\n                    }}/>\r\n                </div>\r\n            </Suspense>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default ComponentContainer;","export enum ClassifyEnum {\r\n    //所有\r\n    ALL = 'all',\r\n    //基础\r\n    BASE = 'base',\r\n    //装饰\r\n    ORNAMENTAL = 'ornamental',\r\n    //条形图\r\n    BAR = 'bar',\r\n    //柱状图\r\n    COLUMN = 'column',\r\n    //折线图\r\n    LINE = 'line',\r\n    //面积图\r\n    AREA = 'area',\r\n    //饼图\r\n    PIE = 'pie',\r\n    //进度图\r\n    PROGRESS = 'progress',\r\n    //散点图\r\n    SCATTER = 'scatter',\r\n    //雷达图\r\n    RADAR = 'radar',\r\n    //玫瑰图\r\n    ROSE = 'rose',\r\n    //词云图\r\n    WORD_CLOUD = 'word_cloud',\r\n    //直方图\r\n    HISTOGRAM = 'histogram',\r\n    //旭日图\r\n    SUNBURST = 'sunburst',\r\n    //矩阵图\r\n    TREEMAP = 'treemap',\r\n\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nclass LcHeader extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-header'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcHeader;","import React, {Component} from 'react';\r\n\r\nclass LcBody extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcBody;","import React, {Component} from 'react';\r\n\r\nclass LcLeft extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body-left'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcLeft;","import React, {Component} from 'react';\r\n\r\nclass LcContent extends Component {\r\n    render() {\r\n        return (\r\n            <div id={'structureContent'} className={'structure-body-content'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcContent;","import React, {Component} from 'react';\r\n\r\nclass LcRight extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body-right'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcRight;","import React, {Component} from 'react';\r\nimport './structure.less';\r\n\r\nclass LcStructure extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'lc-designer-structure'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcStructure;","import React, {Component} from 'react';\r\n\r\nclass LcFoot extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-foot'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcFoot;","export default __webpack_public_path__ + \"static/media/icon-all.fe79e4fd.svg\";","export default __webpack_public_path__ + \"static/media/icon-bar.dfbc87b2.svg\";","export default __webpack_public_path__ + \"static/media/icon-column.ae79292f.svg\";","export default __webpack_public_path__ + \"static/media/icon-area.f3992c44.svg\";","export default __webpack_public_path__ + \"static/media/icon-pie.4d05a7b6.svg\";","export default __webpack_public_path__ + \"static/media/icon-scatter.778bce01.svg\";","export default __webpack_public_path__ + \"static/media/icon-line.b79af542.svg\";","export default __webpack_public_path__ + \"static/media/icon-loading.9d197f5f.svg\";","export default __webpack_public_path__ + \"static/media/icon-flowers.442a19b5.svg\";","export default __webpack_public_path__ + \"static/media/icon-optimize.9b17ea95.svg\";","export default __webpack_public_path__ + \"static/media/icon-points.7fb541f7.svg\";","import {makeAutoObservable} from \"mobx\";\r\nimport {ClassifyEnum} from \"./ClassifyType\";\r\nimport icon_all from '../../../icon/icon-all.svg';\r\nimport icon_bar from '../../../icon/icon-bar.svg';\r\nimport icon_column from '../../../icon/icon-column.svg';\r\nimport icon_area from '../../../icon/icon-area.svg';\r\nimport icon_pie from '../../../icon/icon-pie.svg';\r\nimport icon_scatter from '../../../icon/icon-scatter.svg';\r\nimport icon_line from '../../../icon/icon-line.svg';\r\nimport icon_loading from '../../../icon/icon-loading.svg';\r\nimport icon_flowers from '../../../icon/icon-flowers.svg';\r\nimport icon_optimize from '../../../icon/icon-optimize.svg';\r\nimport icon_points from '../../../icon/icon-points.svg';\r\n\r\nconst getClassifyItemInfo = () => {\r\n    return [\r\n        {\r\n            icon: icon_all,\r\n            name: \"全部\",\r\n            classify: ClassifyEnum.ALL,\r\n        },\r\n        {\r\n            icon: icon_points,\r\n            name: \"基础\",\r\n            classify: ClassifyEnum.BASE,\r\n        },\r\n        {\r\n            icon: icon_optimize,\r\n            name: \"装饰\",\r\n            classify: ClassifyEnum.ORNAMENTAL,\r\n        },\r\n        {\r\n            icon: icon_bar,\r\n            name: \"条形图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_column,\r\n            name: \"柱状图\",\r\n            classify: ClassifyEnum.COLUMN,\r\n        },\r\n        {\r\n            icon: icon_line,\r\n            name: \"折线图\",\r\n            classify: ClassifyEnum.LINE,\r\n        },\r\n        {\r\n            icon: icon_area,\r\n            name: \"面积图\",\r\n            classify: ClassifyEnum.AREA,\r\n        },\r\n        {\r\n            icon: icon_pie,\r\n            name: \"饼图\",\r\n            classify: ClassifyEnum.PIE,\r\n        },\r\n        {\r\n            icon: icon_loading,\r\n            name: \"进度图\",\r\n            classify: ClassifyEnum.PROGRESS,\r\n        },\r\n        {\r\n            icon: icon_scatter,\r\n            name: \"散点图\",\r\n            classify: ClassifyEnum.SCATTER,\r\n        },\r\n        {\r\n            icon: icon_flowers,\r\n            name: \"玫瑰图\",\r\n            classify: ClassifyEnum.ROSE,\r\n        },\r\n        // {\r\n        //     icon: icon_radar,\r\n        //     name: \"雷达图\",\r\n        //     classify: ClassifyEnum.RADAR,\r\n        // },\r\n        // {\r\n        //     icon: icon_word_cloud,\r\n        //     name: \"词云图\",\r\n        //     classify: ClassifyEnum.WORD_CLOUD,\r\n        // },\r\n        // {\r\n        //     icon: icon_histogram,\r\n        //     name: \"直方图\",\r\n        //     classify: ClassifyEnum.HISTOGRAM,\r\n        // },\r\n        // {\r\n        //     icon: icon_sun,\r\n        //     name: \"旭日图\",\r\n        //     classify: ClassifyEnum.SUNBURST,\r\n        // },\r\n        // {\r\n        //     icon: icon_rectangle,\r\n        //     name: \"矩形树图\",\r\n        //     classify: ClassifyEnum.TREEMAP,\r\n        // },\r\n    ]\r\n}\r\n\r\n/**\r\n * 左侧分类列表store\r\n */\r\nclass ClassifyListStore {\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    /**\r\n     * 分类列表\r\n     */\r\n    classifies: Array<any> = [];\r\n    /**\r\n     * 分类搜索关键字\r\n     */\r\n    classifyKey: string = 'all';\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    doInit = () => {\r\n        this.classifies = getClassifyItemInfo();\r\n    }\r\n\r\n    /**\r\n     * 清空store\r\n     */\r\n    doClear = () => {\r\n        this.classifies = [];\r\n    }\r\n\r\n    setClassifyKey = (key: string) => {\r\n        this.classifyKey = key;\r\n    }\r\n}\r\n\r\nconst classifyListStore = new ClassifyListStore();\r\nexport default classifyListStore;","import {action, makeObservable, observable} from \"mobx\";\r\nimport {BaseInfoType} from \"../../DesignerType\";\r\nimport EditorDesignerLoader from \"../../loader/EditorDesignerLoader\";\r\n\r\n/**\r\n * 设计器左侧列表组件的状态管理类。\r\n */\r\nclass CompListStore {\r\n    constructor() {\r\n        makeObservable(this, {\r\n            compKey: observable,\r\n            visible: observable,\r\n            setVisible: action,\r\n            setCompKey: action,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 组件基础信息数组。设计器左侧组件列表的展示过滤依赖于此数组。\r\n     * 该数组会在设计器加载时进行初始化，后续不再修改。若其他。 场景或组件需要。 操作该数组的数据。 应该操作他的备份。 而不是直接操作该数组。\r\n     */\r\n    compInfoArr: Array<BaseInfoType> = [];\r\n    /**\r\n     * 组件搜索关键字，左侧组件列表根据关键字过滤与组件，使会用到该属性。\r\n     */\r\n    compKey: string = '';\r\n    /**\r\n     * 组件列表可见性。\r\n     */\r\n    visible: boolean = false;\r\n\r\n    doInit = () => {\r\n        const comps: Array<any> = [];\r\n        const {customComponentInfoMap} = EditorDesignerLoader.getInstance();\r\n        if (customComponentInfoMap) {\r\n            Object.keys(customComponentInfoMap).forEach(key => {\r\n                let baseInfo = customComponentInfoMap[key].getBaseInfo();\r\n                if (baseInfo.compKey !== 'LcBg') comps.push(baseInfo);\r\n            });\r\n        }\r\n        this.compInfoArr = comps;\r\n    }\r\n\r\n    setVisible = (visible: boolean) => this.visible = visible;\r\n\r\n    setCompKey = (key: string) => this.compKey = key;\r\n}\r\n\r\nconst compListStore = new CompListStore();\r\nexport default compListStore;","import React, {Component, MouseEvent} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport '../classify-list/ClassifyList.less';\r\nimport classifyListStore from \"./ClassifyListStore\";\r\nimport compListStore from \"../../float-configs/comp-list/CompListStore\";\r\n\r\nclass ClassifyList extends Component {\r\n\r\n    constructor(props: {}) {\r\n        super(props);\r\n        const {doInit} = classifyListStore;\r\n        doInit && doInit();\r\n    }\r\n\r\n    changeClassifyKey = (e: MouseEvent<HTMLDivElement>) => {\r\n        const {setClassifyKey} = classifyListStore;\r\n        const {setVisible, visible} = compListStore;\r\n        setClassifyKey(e.currentTarget.id);\r\n        if (!visible)\r\n            setVisible && setVisible(true);\r\n    }\r\n\r\n    buildClassifyList = () => {\r\n        const {classifies} = classifyListStore;\r\n        let classifyArr = [];\r\n        for (let i = 0; i < classifies.length; i++) {\r\n            const {icon: Icon, name, classify} = classifies[i];\r\n            classifyArr.push(\r\n                <div key={i + ''} className={'sort-item'} id={classify} onClick={this.changeClassifyKey}>\r\n                    <div className={'sort-item-icon'}><img style={{width: 20}} src={Icon} alt={'all'}/></div>\r\n                    <span className={'sort-item-content'}>{name}</span>\r\n                </div>\r\n            )\r\n        }\r\n        return classifyArr;\r\n    }\r\n\r\n    render() {\r\n        const classifyListDom = this.buildClassifyList();\r\n        return (\r\n            <div className={'lc-charts-sort'} style={{overflowY: 'scroll'}}>\r\n                {classifyListDom}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ClassifyList);","import React, {Component} from 'react';\r\nimport ClassifyList from \"./classify-list/ClassifyList\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nclass DesignerLeft extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <ClassifyList/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DesignerLeft);","import React, {Component} from 'react';\r\nimport './MenuList.less';\r\nimport {MenuInfo} from \"./MenuType\";\r\nimport rightStore from \"./RightStore\";\r\nimport {observer} from \"mobx-react\";\r\n\r\ninterface LcConfigMenusProps {\r\n    onChange?: (menu: string) => void;\r\n}\r\n\r\nclass MenuList extends Component<LcConfigMenusProps | any> {\r\n\r\n    menuChange = (e: any) => {\r\n        const {setActiveMenu, setContentVisible} = rightStore;\r\n        setActiveMenu && setActiveMenu(e.currentTarget.id);\r\n        setContentVisible && setContentVisible(true);\r\n    }\r\n\r\n    buildMenuList = () => {\r\n        const {menus} = rightStore;\r\n        return menus.map((item: MenuInfo) => {\r\n            const Icon: any = item.icon;\r\n            return (\r\n                <div className={'menu-item'} key={item.key} id={item.key} onClick={this.menuChange}>\r\n                    <div className={'item-icon'}><Icon/></div>\r\n                    <div className={'item-content'}>{item.name}</div>\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'lc-config-menu'}>\r\n                <div className={'menu-list'}>\r\n                    {this.buildMenuList()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(MenuList);","import React, {Component, Suspense} from 'react';\r\nimport {LineOutlined} from \"@ant-design/icons\";\r\nimport rightStore from \"./RightStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport './ConfigContent.less';\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport {AbstractCustomComponentDefinition} from \"../../framework/core/AbstractCustomComponentDefinition\";\r\nimport {ConfigType} from \"./ConfigType\";\r\nimport EditorDesignerLoader from \"../loader/EditorDesignerLoader\";\r\nimport AbstractDesignerComponent from \"../../framework/core/AbstractDesignerComponent\";\r\nimport ObjectUtil from \"../../utils/ObjectUtil\";\r\nimport historyRecordOperateProxy from \"../operate-provider/undo-redo/HistoryRecordOperateProxy\";\r\n\r\nclass ConfigContent extends Component {\r\n\r\n    createProxy = (instance: AbstractDesignerComponent) => {\r\n        return new Proxy(instance, {\r\n            get(target, prop) {\r\n                const originalMethod = target[prop as keyof AbstractDesignerComponent];\r\n                if (typeof originalMethod === 'function' && originalMethod.name === \"update\") {\r\n                    return new Proxy(originalMethod, {\r\n                        apply(target, thisArg, argumentsList) {\r\n                            const newValue = argumentsList[0];\r\n                            const oldValue = ObjectUtil.getOriginValue(thisArg.config, argumentsList[0]);\r\n                            historyRecordOperateProxy.doStyleUpd(newValue, oldValue);\r\n                            return target.apply(thisArg, argumentsList);\r\n                        }\r\n                    });\r\n                }\r\n                return originalMethod;\r\n            }\r\n        });\r\n    }\r\n\r\n    buildConfigContent = () => {\r\n        const {compInstances} = designerStore;\r\n        let {activeMenu, activeElem} = rightStore;\r\n        let abstractConfigObj: AbstractCustomComponentDefinition = EditorDesignerLoader.getInstance().customComponentInfoMap[activeElem.type + '']\r\n        let configMapping = abstractConfigObj.getMenuToConfigContentMap();\r\n        const ConfigComp: React.ComponentType<ConfigType> = configMapping![activeMenu];\r\n        //使用动态代理对象，监听属性变化\r\n        const instance = this.createProxy(compInstances[activeElem.id + '']);\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <ConfigComp instance={instance}/>\r\n            </Suspense>\r\n        )\r\n\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setContentVisible} = rightStore;\r\n        setContentVisible && setContentVisible(false);\r\n    }\r\n\r\n    render() {\r\n        const {activeMenu, menus} = rightStore;\r\n        let activeMenuName = '';\r\n        for (let i = 0; i < menus.length; i++) {\r\n            if (menus[i].key === activeMenu) {\r\n                activeMenuName = menus[i].name;\r\n                break;\r\n            }\r\n        }\r\n        return (\r\n            <div className={'lc-config-panel'}>\r\n                <div className={'lc-panel-top'}>\r\n                    <div className={'panel-title'}>\r\n                        <span>{activeMenuName}</span></div>\r\n                    <div className={'panel-operate'} onClick={this.onClose}><LineOutlined/></div>\r\n                </div>\r\n                <div className={'lc-panel-content'}>\r\n                    {this.buildConfigContent()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ConfigContent);","import React, {Component} from 'react';\r\nimport MenuList from \"./MenuList\";\r\nimport ConfigContent from \"./ConfigContent\";\r\nimport rightStore from \"./RightStore\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nclass Right extends Component {\r\n\r\n    render() {\r\n        const {visible} = rightStore;\r\n        return (\r\n            <>\r\n                <MenuList/>\r\n                {visible && <ConfigContent/>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Right);","import React, {Component} from 'react';\r\nimport './HotKeyDes.less';\r\n\r\nclass HotKeyDes extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'lc-hotkey-des'} style={{color: 'white'}}>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + S</code></div>\r\n                    <div className={'hotkey-des'}>保存项目</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + V</code></div>\r\n                    <div className={'hotkey-des'}>复制元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + L</code></div>\r\n                    <div className={'hotkey-des'}>锁定元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + up-arrow(方向上键)</code></div>\r\n                    <div className={'hotkey-des'}>元素置顶</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + down-arrow(方向下键)</code></div>\r\n                    <div className={'hotkey-des'}>元素置底</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Delete</code></div>\r\n                    <div className={'hotkey-des'}>删除元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Alt + wheel(鼠标滑轮)</code></div>\r\n                    <div className={'hotkey-des'}>缩放画布</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>长按鼠标右键</code></div>\r\n                    <div className={'hotkey-des'}>拖拽画布</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default HotKeyDes;","export default __webpack_public_path__ + \"static/media/keyboard-icon.1ed11794.svg\";","export default __webpack_public_path__ + \"static/media/layers-icon.aabb7495.svg\";","import React, {Component} from 'react';\r\nimport './Footer.less';\r\nimport {observer} from \"mobx-react\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport Dialog from \"../../lib/lc-dialog/Dialog\";\r\nimport HotKeyDes from \"./HotKeyDes\";\r\nimport layerListStore from \"../float-configs/layer-list/LayerListStore\";\r\nimport keyboardIcon from './keyboard-icon.svg';\r\nimport layerIcon from './layers-icon.svg';\r\nimport footerStore from \"./FooterStore\";\r\n\r\nclass Footer extends Component {\r\n\r\n    state = {\r\n        showHotKeyDes: false\r\n    }\r\n\r\n    toggleHotKeyDes = () => {\r\n        const {showHotKeyDes} = this.state;\r\n        this.setState({\r\n            showHotKeyDes: !showHotKeyDes\r\n        })\r\n    }\r\n\r\n    toggleLayerList = () => {\r\n        const {setVisible, visible} = layerListStore;\r\n        setVisible && setVisible(!visible);\r\n    }\r\n\r\n    render() {\r\n        const {layoutConfigs, projectConfig: {name, state}} = designerStore;\r\n        const {size, coordinate, scale} = footerStore;\r\n        let stateStr = '';\r\n        switch (state) {\r\n            case '0':\r\n                stateStr = '草稿';\r\n                break;\r\n            case '1':\r\n                stateStr = '发布';\r\n                break;\r\n            case '2':\r\n                stateStr = '封存';\r\n                break;\r\n        }\r\n        return (\r\n            <div className={'lc-designer-footer'}>\r\n                <div className={'footer-left'}>\r\n                    <div className={'footer-item'} onClick={this.toggleHotKeyDes}>\r\n                        <img width={16} alt={'快捷键'}\r\n                             src={keyboardIcon}/>\r\n                        &nbsp;\r\n                        <span style={{position: 'relative', top: 2}}>快捷键</span>\r\n                    </div>\r\n                    <div className={'footer-item'} onClick={this.toggleLayerList}>\r\n                        <img width={16} alt={'图层'} src={layerIcon}/>\r\n                        &nbsp;\r\n                        <span style={{position: 'relative', top: 2}}>图层</span>\r\n                    </div>\r\n                </div>\r\n                <div className={'footer-right'}>\r\n                    <div className={'right-info-item'}>\r\n                        {`尺寸 (${parseInt(size[0] + '')} , ${parseInt(size[1] + '')})`}\r\n                    </div>\r\n                    <div className={'right-info-item'}>\r\n                        {`坐标 (${parseInt(coordinate[0] + '')} , ${parseInt(coordinate[1] + '')})`}\r\n                    </div>\r\n                    <div className={'right-info-item'}>缩放 : {(scale * 100).toFixed(0)}%</div>\r\n                    <div className={'right-info-item'}>当前组件数 : {Object.keys(layoutConfigs).length}</div>\r\n                    <div className={'right-info-item'}>项目 : {name}</div>\r\n                    <div className={'right-info-item'}>状态 : {stateStr}</div>\r\n                </div>\r\n                <Dialog title={'快捷键说明'} visible={this.state.showHotKeyDes} onClose={this.toggleHotKeyDes}>\r\n                    <HotKeyDes/>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Footer);","abstract class AbstractDrag {\r\n    //被拖拽的目标\r\n    protected target: any = null;\r\n    //触发拖拽的目标元素\r\n    protected dragTarget: any = null;\r\n    //拖拽的起始位置\r\n    protected position: { x: number, y: number } = {x: 0, y: 0};\r\n\r\n    public registerDragger(): void {\r\n        this.onDragStart(this.target);\r\n        this.onDragEnd(this.target);\r\n    }\r\n\r\n    protected abstract onDragStart(e: any): void;\r\n\r\n    protected abstract onDragMove(e: any): void;\r\n\r\n    protected abstract onDragEnd(e: any): void;\r\n}\r\n\r\nexport default AbstractDrag;","import AbstractDrag from \"./AbstractDrag\";\r\n\r\nexport interface DragCoordinate {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\nexport default class CommonDragger extends AbstractDrag {\r\n\r\n    protected position: { x: number, y: number } = {x: 0, y: 0}; // 第一个点坐标\r\n\r\n    constructor(target: any, dragTarget: any, initPos?: DragCoordinate) {\r\n        super();\r\n        this.target = target;\r\n        this.dragTarget = dragTarget;\r\n        this.registerDragger();\r\n        if (initPos) this.position = initPos;\r\n    }\r\n\r\n    protected onDragEnd = (): void => {\r\n        this.dragTarget.addEventListener('pointerup', (e: any) => {\r\n            if (e.button === 0) {\r\n                this.dragTarget.releasePointerCapture(e.pointerId);\r\n                this.dragTarget.removeEventListener('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected onDragMove = (e: any): void => {\r\n        this.position.x += e.movementX;\r\n        this.position.y += e.movementY;\r\n        this.target.style.transform = 'translate(' + this.position.x + 'px, ' + this.position.y + 'px)';\r\n    }\r\n\r\n    protected onDragStart = (): void => {\r\n        this.dragTarget.addEventListener('pointerdown', (e: any) => {\r\n            if (e.button === 0) {\r\n                this.dragTarget.setPointerCapture(e.pointerId);\r\n                this.dragTarget.addEventListener('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n}","import React, {Component} from 'react';\r\nimport {LineOutlined} from \"@ant-design/icons\";\r\nimport CommonDragger from \"../../operate-provider/drag/CommonDragger\";\r\nimport './FloatPanel.less';\r\n\r\nexport interface FloatPanelProps {\r\n    title?: string;\r\n    initPosition?: { x: number, y: number };\r\n    width?: number;\r\n    height?: number;\r\n    onClose?: () => void;\r\n    className?: string;\r\n}\r\n\r\n/**\r\n * 浮动面板容器，提供浮动面板的拖拽功能\r\n */\r\nclass FloatPanel extends Component<FloatPanelProps> {\r\n\r\n    panelRef: any = null;\r\n    dragTargetRef: any = null;\r\n\r\n    componentDidMount() {\r\n        const {initPosition = {x: 0, y: 0}} = this.props;\r\n        if (this.dragTargetRef && this.panelRef)\r\n            new CommonDragger(this.panelRef, this.dragTargetRef, initPosition);\r\n    }\r\n\r\n    onClose = () => {\r\n        const {onClose} = this.props;\r\n        onClose && onClose();\r\n    }\r\n\r\n    render() {\r\n        const {initPosition = {x: 0, y: 0}, title, className, width} = this.props;\r\n        return (\r\n            <div className={`float-panel ${className}`}\r\n                 style={{transform: `translate(${initPosition.x}px, ${initPosition.y}px)`, width}}\r\n                 ref={ref => this.panelRef = ref}>\r\n                <div className={'panel-title'}>\r\n                    <div className={'title-left'}>{title}</div>\r\n                    <div ref={ref => this.dragTargetRef = ref} className={'title-drag-target'}\r\n                         style={{width: '50%', height: '100%'}}>\r\n                    </div>\r\n                    <div className={'title-right'} onClick={this.onClose}><span><LineOutlined/></span></div>\r\n                </div>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FloatPanel;","import React, {Component} from 'react';\r\nimport compListStore from \"./CompListStore\";\r\nimport classifyListStore from \"../../left/classify-list/ClassifyListStore\";\r\nimport './CompList.less';\r\nimport {observer} from \"mobx-react\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {idGenerate} from \"../../../utils/IdGenerate\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\nimport eventOperateStore from \"../../operate-provider/EventOperateStore\";\r\nimport FloatPanel from \"../common/FloatPanel\";\r\nimport {BaseInfoType} from \"../../DesignerType\";\r\nimport EditorDesignerLoader from \"../../loader/EditorDesignerLoader\";\r\nimport UnderLineInput from \"../../../lib/lc-input/UnderLineInput\";\r\n\r\nclass CompList extends Component {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        const {doInit} = compListStore;\r\n        doInit && doInit();\r\n    }\r\n\r\n    addItem = (compKey: string, name: string) => {\r\n        const {addItem} = designerStore;\r\n        let {maxLevel, setMaxLevel, setAddRecordCompId} = eventOperateStore;\r\n        let movableItem: MovableItemType = {\r\n            name: name,\r\n            type: compKey,\r\n            width: 320,\r\n            height: 200,\r\n            position: [0, 0],\r\n            id: idGenerate.generateId(),\r\n            locked: false,\r\n            hide: false,\r\n            order: ++maxLevel,\r\n        }\r\n        setAddRecordCompId(movableItem.id!)\r\n        setMaxLevel && setMaxLevel(maxLevel);\r\n        addItem && addItem(movableItem);\r\n    }\r\n\r\n    getChartDom = () => {\r\n        let chartDom = [];\r\n        let {classifyKey} = classifyListStore\r\n        let {compInfoArr, compKey} = compListStore;\r\n        if (classifyKey !== 'all') {\r\n            compInfoArr = compInfoArr.filter((item: BaseInfoType) => {\r\n                return item.typeKey === classifyKey;\r\n            })\r\n        }\r\n        if (compKey !== '') {\r\n            compInfoArr = compInfoArr.filter((item: BaseInfoType) => {\r\n                return item.compName.indexOf(compKey) >= 0;\r\n            })\r\n        }\r\n        for (let i = 0; i < compInfoArr.length; i++) {\r\n            let compInfo: any = compInfoArr[i];\r\n            const {compName, compKey} = compInfo;\r\n            let lcCompInit: any = EditorDesignerLoader.getInstance().customComponentInfoMap[compKey];\r\n            let chartImg = lcCompInit.getChartImg();\r\n            chartDom.push(\r\n                <div key={i + ''} className={'list-item droppable-element'}>\r\n                    <div className={'item-header'} ref={'drag-target'}>\r\n                        <div className={'item-name'}>{compName}</div>\r\n                        <div className={'item-type'}>Antd</div>\r\n                    </div>\r\n                    <div className={'item-content'} onDoubleClick={() => this.addItem(compKey, compName)}>\r\n                        <img src={chartImg} alt={'组件预览图'}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        return chartDom;\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setVisible} = compListStore;\r\n        setVisible && setVisible(false);\r\n    }\r\n\r\n    searchChart = (e: any) => {\r\n        const {setCompKey} = compListStore;\r\n        setCompKey && setCompKey(e.currentTarget.value);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <FloatPanel className={'comp-list'} title={'组件列表'} onClose={this.onClose}\r\n                        initPosition={{x: 60, y: -window.innerHeight + 50}} width={190}>\r\n                <div className={'list-search'}>\r\n                    <UnderLineInput placeholder=\"搜索图层\" onChange={this.searchChart} containStyle={{height: 40}}\r\n                                    inputStyle={{height: 40, padding: '0 10px'}}/>\r\n                </div>\r\n                <div className={'list-items'}>\r\n                    {this.getChartDom()}\r\n                </div>\r\n            </FloatPanel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(CompList);","class EventManager {\r\n    events: any = {};\r\n\r\n    register(type: string, handler: Function) {\r\n        if (!this.events[type])\r\n            this.events[type] = [];\r\n        this.events[type].push(handler);\r\n    }\r\n\r\n    unregister(type: string, handler?: Function) {\r\n        if (!this.events[type])\r\n            return;\r\n\r\n        const index = this.events[type].indexOf(handler);\r\n        if (index > -1)\r\n            this.events[type].splice(index, 1);\r\n\r\n    }\r\n\r\n    emit(type: string, ...args: any[]) {\r\n        if (!this.events[type])\r\n            return;\r\n        this.events[type].forEach((handler: Function) => {\r\n            handler(...args);\r\n        });\r\n    }\r\n}\r\n\r\nconst eventManager = new EventManager();\r\nexport default eventManager;","export default __webpack_public_path__ + \"static/media/lock.11cf90eb.svg\";","export default __webpack_public_path__ + \"static/media/preview-close.40634e66.svg\";","export default __webpack_public_path__ + \"static/media/preview-open.fe6af5a2.svg\";","export default __webpack_public_path__ + \"static/media/unlock.a58cef96.svg\";","import React, {MouseEvent} from 'react';\r\nimport './LayerItem.less';\r\nimport lockImg from './icon/lock.svg';\r\nimport previewClose from './icon/preview-close.svg';\r\nimport previewOpen from './icon/preview-open.svg';\r\nimport unlockImg from './icon/unlock.svg';\r\nimport layerListStore from \"./LayerListStore\";\r\n\r\nexport interface LayerItemDataProps {\r\n    compId?: string;\r\n    name?: string;\r\n    lock?: boolean;\r\n    hide?: boolean;\r\n    selected?: boolean;\r\n}\r\n\r\nclass LayerItem extends React.PureComponent<LayerItemDataProps> {\r\n\r\n    state = {\r\n        selected: false,\r\n        lock: false,\r\n        hide: false,\r\n        compId: '',\r\n        name: ''\r\n    }\r\n\r\n    constructor(props: LayerItemDataProps) {\r\n        super(props);\r\n        const {selected, lock, hide, compId, name} = props;\r\n        this.state = {\r\n            selected: selected || false,\r\n            lock: lock || false,\r\n            hide: hide || false,\r\n            compId: compId || '',\r\n            name: name || ''\r\n        }\r\n    }\r\n\r\n    toggleLock = () => {\r\n        const {lockChange} = layerListStore;\r\n        lockChange && lockChange(this.state.compId, !this.state.lock);\r\n    }\r\n\r\n    toggleHide = () => {\r\n        const {hideChange} = layerListStore;\r\n        hideChange && hideChange(this.state.compId, !this.state.hide);\r\n    }\r\n\r\n    onSelected = (event: MouseEvent<HTMLDivElement>) => {\r\n        const {selectedChange} = layerListStore;\r\n        selectedChange && selectedChange({...this.state, ...{selected: true}}, event);\r\n    }\r\n\r\n    render() {\r\n        const {name, lock, hide, selected = false} = this.state || {};\r\n        const itemClass = `layer-item ${selected ? \"layer-item-selected\" : hide ? \"layer-item-hide\" : lock ? \"layer-item-lock\" : \"\"}`;\r\n        return (\r\n            <div className={itemClass}\r\n                 onClick={this.onSelected}>\r\n                <div className={'layer-item-name'}>{name}</div>\r\n                <div className={'layer-item-operators'}>\r\n                    <div className={'layer-item-operator'}>\r\n                        <span onClick={this.toggleHide}>\r\n                            <img src={hide ? previewClose : previewOpen} alt={hide ? '显示' : '隐藏'}\r\n                                 style={{width: 14}}/>\r\n                        </span>\r\n                    </div>\r\n                    <div className={'layer-item-operator'}>\r\n                        <span onClick={this.toggleLock}>\r\n                            <img src={lock ? lockImg : unlockImg} alt={lock ? '锁定' : '解锁'}/>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LayerItem;","import AbstractComponent, {OperateType, UpdateOptions,} from \"../../../framework/core/AbstractComponent\";\r\nimport ComponentUtil from \"../../../utils/ComponentUtil\";\r\nimport LayerItem, {LayerItemDataProps} from \"./LayerItem\";\r\nimport ObjectUtil from \"../../../utils/ObjectUtil\";\r\n\r\nexport default class LayerComponent extends AbstractComponent<LayerItem, LayerItemDataProps> {\r\n\r\n    async create(container: HTMLElement, config: LayerItemDataProps): Promise<this> {\r\n        this.config = config;\r\n        if (!this.instance)\r\n            ComponentUtil.createAndRender<LayerItem, LayerItemDataProps>(container, LayerItem, config).then((instance) => {\r\n                this.instance = instance;\r\n            });\r\n        return this;\r\n    }\r\n\r\n    destroy(): void {\r\n    }\r\n\r\n    getConfig(): LayerItemDataProps | null {\r\n        return this.config;\r\n    }\r\n\r\n    update(config: LayerItemDataProps, upOp?: UpdateOptions): void {\r\n        this.config = ObjectUtil.merge(this.config, config) as LayerItemDataProps;\r\n        upOp = upOp || {reRender: true, operateType: OperateType.OPTIONS};\r\n        if (upOp.reRender)\r\n            this.instance?.setState({...this.config})\r\n    }\r\n\r\n\r\n}\r\n","import React, {Component} from 'react';\r\nimport LayerComponent from \"./LayerComponent\";\r\nimport layerListStore from \"./LayerListStore\";\r\nimport {LayerItemDataProps} from \"./LayerItem\";\r\n\r\nexport interface LayerContainerProps {\r\n    item: LayerItemDataProps;\r\n}\r\n\r\nclass LayerContainer extends Component<LayerContainerProps> {\r\n\r\n    layerContainerRef: HTMLDivElement | null = null;\r\n\r\n    componentDidMount() {\r\n        const {layerInstanceMap} = layerListStore;\r\n        const {item} = this.props as LayerContainerProps;\r\n        new LayerComponent().create(this.layerContainerRef!, item).then(r => {\r\n            layerInstanceMap[item.compId!] = r;\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {item} = this.props as LayerContainerProps;\r\n        return (\r\n            <div id={item.compId + ''} className={'layer-item-container'}\r\n                 ref={ref => this.layerContainerRef = ref}/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LayerContainer;","import React, {ChangeEvent, Component} from 'react';\r\nimport './LayerList.less';\r\nimport layerListStore from \"./LayerListStore\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {LayerItemDataProps} from \"./LayerItem\";\r\nimport {observer} from \"mobx-react\";\r\nimport FloatPanel from \"../common/FloatPanel\";\r\nimport eventOperateStore from \"../../operate-provider/EventOperateStore\";\r\nimport eventManager from \"../../operate-provider/core/EventManager\";\r\nimport LayerContainer from \"./LayerContainer\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\nimport UnderLineInput from \"../../../lib/lc-input/UnderLineInput\";\r\n\r\n//todo 该组件的重新渲染逻辑要重点优化\r\nclass LayerList extends Component {\r\n\r\n    componentDidMount() {\r\n        eventManager.register(\"click\", this.cancelSelected);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventManager.unregister(\"click\", this.cancelSelected);\r\n    }\r\n\r\n    //todo: 想想怎么优化\r\n    cancelSelected = (e: PointerEvent) => {\r\n        const layerListDom = document.querySelector(\".layer-list\");\r\n        if (!layerListDom || !e.target) return;\r\n        if (layerListDom.contains(e.target as Node) && !(e.target as HTMLElement).classList.contains(\"layer-item\")) {\r\n            const {/*setTargetIds,*/ setTargets} = eventOperateStore;\r\n            // setTargetIds([]);\r\n            setTargets([]);\r\n        }\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setVisible} = layerListStore;\r\n        setVisible && setVisible(false);\r\n    }\r\n\r\n    searchLayer = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const {setContent} = layerListStore;\r\n        const content = (e.target as HTMLInputElement).value;\r\n        setContent && setContent(content);\r\n    }\r\n\r\n\r\n    buildLayerList = () => {\r\n        const {layoutConfigs} = designerStore;\r\n        const {targetIds} = eventOperateStore;\r\n        let {searchContent} = layerListStore;\r\n        //判断是否是命令模式\r\n        const commandMode = searchContent.startsWith(\":\");\r\n        if (commandMode) searchContent = searchContent.substring(1);\r\n        return Object.values(layoutConfigs)\r\n            .filter((item: MovableItemType) => {\r\n                if (commandMode) {\r\n                    //使用命令模式过滤\r\n                    if (searchContent.trim() === \"hide\")\r\n                        return item.hide;\r\n                    else if (searchContent.trim() === \"lock\")\r\n                        return item.locked;\r\n                } else\r\n                    return item.name?.includes(searchContent);\r\n            })\r\n            .sort((a: MovableItemType, b: MovableItemType) => b.order! - a.order!)\r\n            .map((item: MovableItemType) => {\r\n                let _props: LayerItemDataProps = {\r\n                    name: item.name,\r\n                    lock: item.locked,\r\n                    hide: item.hide,\r\n                    compId: item.id,\r\n                    selected: targetIds.includes(item.id!)\r\n                }\r\n                return <LayerContainer key={item.id} item={_props}/>\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <FloatPanel title={'图层'} onClose={this.onClose} initPosition={{x: 250, y: -window.innerHeight + 50}}\r\n                        className={'layer-list'}>\r\n                <div className={'list-search'}>\r\n                    <UnderLineInput placeholder=\"搜索图层\" onChange={this.searchLayer} containStyle={{height: 40}}\r\n                                    inputStyle={{height: 40, padding: '0 10px'}}/>\r\n                </div>\r\n                <div className={'layer-items'}>\r\n                    {this.buildLayerList()}\r\n                </div>\r\n            </FloatPanel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(LayerList);","import React, {Component} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport CompList from \"./comp-list/CompList\";\r\nimport compListStore from \"./comp-list/CompListStore\";\r\nimport layerListStore from \"./layer-list/LayerListStore\";\r\nimport LayerList from \"./layer-list/LayerList\";\r\n\r\nclass FloatConfigs extends Component {\r\n    render() {\r\n        const {visible: compListVisible} = compListStore;\r\n        const {visible: layerListVisible} = layerListStore;\r\n        return (\r\n            <>\r\n                {compListVisible && <CompList/>}\r\n                {layerListVisible && <LayerList/>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(FloatConfigs);","import {action, makeObservable, observable} from \"mobx\";\r\n\r\n/**\r\n * 右键操作菜单的状态管理类。\r\n */\r\nclass ContextMenuStore {\r\n    constructor() {\r\n        makeObservable(this, {\r\n            visible: observable,\r\n            position: observable,\r\n            updateVisible: action,\r\n            setPosition: action,\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 右键菜单显示状态\r\n     */\r\n    visible = false;\r\n    /**\r\n     * 右键菜单位置\r\n     */\r\n    position = [0, 0];\r\n    /**\r\n     * 鼠标按下时间，用于优化。 右键菜单的操作体验。由于长按右键是拖拽整个画布的操作。 在长时间按住右键后。\r\n     * 右键菜单也会显示。为了避免这种情况。 需要在鼠标抬起时。 判断鼠标按下到抬起的时间。如果时间小于200ms则不显示右键菜单。\r\n     */\r\n    mouseDownTime = 0;\r\n    /**\r\n     * 鼠标抬起时间\r\n     */\r\n    mouseUpTime = 0;\r\n\r\n    updateVisible = (visible: boolean) => this.visible = visible;\r\n\r\n    setPosition = (position: number[]) => this.position = position;\r\n\r\n    setMouseDownTime = (time: any) => this.mouseDownTime = time;\r\n\r\n    setMouseUpTime = (time: any) => this.mouseUpTime = time;\r\n\r\n}\r\n\r\nconst contextMenuStore = new ContextMenuStore();\r\nexport default contextMenuStore;","export const KMMap = {\r\n    leftClick: false,\r\n    rightClick: false,\r\n    middleClick: false,\r\n}","import React, {Component, ReactElement, Suspense} from 'react';\r\nimport './DesignerHeader.less';\r\nimport headerStore from \"./HeaderStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport EditorDesignerLoader from \"../loader/EditorDesignerLoader\";\r\n\r\nconst ProjectHdItemImpl = React.lazy(() => import('./items/project/ProjectHdItemImpl'));\r\nconst CanvasHdConfigImpl = React.lazy(() => import('./items/canvas/CanvasHdConfigImpl'));\r\nconst ThemeHdItemImpl = React.lazy(() => import('./items/theme/ThemeHdItemImpl'));\r\n\r\nclass Header extends Component<any> {\r\n\r\n    buildHeaderList = (): Array<ReactElement> => {\r\n        let items: Array<ReactElement> = [];\r\n        const {headerItemInstances} = EditorDesignerLoader.getInstance();\r\n        for (let i = 0; i < headerItemInstances.length; i++) {\r\n            const {icon: Icon, name, onClick} = headerItemInstances[i];\r\n            items.push(\r\n                <div key={i + ''} className={'right-item'} onClick={onClick}>\r\n                    <span className={'item-span'}><Icon/>&nbsp;{name}</span>\r\n                </div>\r\n            );\r\n        }\r\n        return items;\r\n    }\r\n\r\n    render() {\r\n        const {canvasVisible, projectVisible, themeVisible} = headerStore;\r\n        const items = this.buildHeaderList();\r\n        return (\r\n            <div className={'designer-header'}>\r\n                <div className={'header-left'}>\r\n                    <div className={'header-title'}>L C</div>\r\n                </div>\r\n                <div className={'header-right'}>\r\n                    {items}\r\n                </div>\r\n                {/*todo 想办法让这两个组件不要在这里写死*/}\r\n                {canvasVisible && <Suspense fallback={<Loading/>}><CanvasHdConfigImpl/></Suspense>}\r\n                {projectVisible && <Suspense fallback={<Loading/>}><ProjectHdItemImpl/></Suspense>}\r\n                {themeVisible && <Suspense fallback={<Loading/>}><ThemeHdItemImpl/></Suspense>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Header);\r\n","import AbstractDrag from \"./AbstractDrag\";\r\nimport eventManager from \"../core/EventManager\";\r\nimport {KMMap} from \"../hot-key/KeyboardMouse\";\r\nimport scaleCore from \"../scale/ScaleCore\";\r\nimport DragScaleProvider from \"../DragScaleProvider\";\r\n\r\nclass CanvasDragger extends AbstractDrag {\r\n\r\n    constructor(target: any, initPosition?: { x: number, y: number }) {\r\n        super();\r\n        if (!target)\r\n            throw new Error(\"target is null, cannot drag\");\r\n        this.target = target;\r\n        DragScaleProvider.x = initPosition ? initPosition.x : 0;\r\n        DragScaleProvider.y = initPosition ? initPosition.y : 0;\r\n        this.registerDragger();\r\n    }\r\n\r\n    protected onDragEnd = (): void => {\r\n        eventManager.register('pointerup', (e: any) => {\r\n            if (e.button === 2) {\r\n                try {\r\n                    this.target.releasePointerCapture(e.pointerId);\r\n                } catch (e) {\r\n                    console.log(e);\r\n                }\r\n                eventManager.unregister('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected onDragMove = (e: any): void => {\r\n        if (KMMap.rightClick) {\r\n            DragScaleProvider.x += e.movementX;\r\n            DragScaleProvider.y += e.movementY;\r\n            const {scale} = scaleCore;\r\n            //更新画布位置\r\n            this.target.style.transform = 'translate3d(' + DragScaleProvider.x + 'px, ' + DragScaleProvider.y + 'px, 0) scale(' + scale + ')';\r\n        }\r\n    }\r\n\r\n    protected onDragStart = (): void => {\r\n        eventManager.register('pointerdown', (e: any) => {\r\n            if (e.button === 2) {\r\n                try {\r\n                    this.target.setPointerCapture(e.pointerId);\r\n                } catch (error) {\r\n                    this.target.releasePointerCapture(e.pointerId);\r\n                }\r\n                this.position = {x: e.clientX, y: e.clientY};\r\n                eventManager.register('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    destroy = () => {\r\n        eventManager.unregister('pointerdown');\r\n        eventManager.unregister('pointermove');\r\n        eventManager.unregister('pointerup');\r\n    }\r\n\r\n}\r\n\r\nexport default CanvasDragger;","import React, {Component} from 'react';\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport CanvasDragger from \"./drag/CanvasDragger\";\r\n\r\n\r\nclass DragScaleProvider extends Component {\r\n\r\n    //画布x坐标（画布拖拽缩放共用）\r\n    public static x: number = 0;\r\n    //画布y坐标（画布拖拽缩放共用）\r\n    public static y: number = 0;\r\n    //画布x偏移量（相对于屏幕）\r\n    public static offsetX: number = 80;\r\n    //画布y偏移量（相对于屏幕）\r\n    public static offsetY: number = 70;\r\n    //画布拖拽缩放容器dom元素引用（画布拖拽缩放共用）\r\n    public static providerRef: HTMLDivElement | null = null;\r\n\r\n    dragger: CanvasDragger | null = null;\r\n\r\n    componentDidMount() {\r\n        //初始化画布位置\r\n        DragScaleProvider.providerRef!.style.transform = 'translate3d(' + DragScaleProvider.x + 'px, ' + DragScaleProvider.y + 'px, 0) scale(1)';\r\n        //初始化画布拖拽器\r\n        this.dragger = new CanvasDragger(DragScaleProvider.providerRef);\r\n        //缩放由快捷键触发（不在此处注册）\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.dragger)\r\n            this.dragger.destroy();\r\n    }\r\n\r\n    render() {\r\n        const {canvasConfig} = designerStore!;\r\n        return (\r\n            <div style={{\r\n                overflow: \"hidden\",\r\n                height: window.innerHeight - 90,\r\n                width: window.innerWidth - 95,\r\n                backgroundColor: '#434343'\r\n            }}>\r\n                <div ref={ref => DragScaleProvider.providerRef = ref}\r\n                     className={'lc-drag-scale-provider'}\r\n                     style={{width: canvasConfig?.width, height: canvasConfig?.height}}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DragScaleProvider);\r\n","import React, {Component} from 'react';\r\nimport Ruler, {RulerProps} from \"@scena/react-ruler\";\r\nimport {KMMap} from \"../../designer/operate-provider/hot-key/KeyboardMouse\";\r\nimport eventManager from \"../../designer/operate-provider/core/EventManager\";\r\nimport scaleCore from \"../../designer/operate-provider/scale/ScaleCore\";\r\n\r\ninterface DesignerRulerProps {\r\n    offsetX?: number;\r\n    offsetY?: number;\r\n}\r\n\r\n/**\r\n * 缩放计算公式：\r\n * 设现有条件：\r\n * 1) 当前鼠标位置：P\r\n * 2) 当前缩放倍数：S1\r\n * 3) 最新缩放倍数：S2\r\n * 4) 标尺起始位置：St\r\n * 5) 标尺渲染起始位置：scrollPos\r\n * 则：scrollPos = P-[(P-St)/(S2/S1)]\r\n *\r\n * 鼠标移动计算公式：\r\n * 设现有条件：\r\n * 1) 鼠标按下时在当前屏幕分辨路下的真实鼠标位置：mosP\r\n * 2) 标尺当前的起始位置：startP\r\n * 3) 鼠标本次移动的距离：mouOffset\r\n * 4) 标尺当前的缩放系数：scale\r\n * 5) 在当前缩放系数下，鼠标对应的标尺位置：rulerP\r\n *\r\n * 则鼠标指针在当前缩放系数下的位置为：rulerP = startP + (mouOffset / scale)\r\n * 鼠标移动后的标尺起始位置为：scrollPos = startP + (mouOffset / scale)\r\n */\r\nclass DesignerRuler extends Component<RulerProps & DesignerRulerProps> {\r\n\r\n    wheelTimerId: any = null;\r\n    pointerMoveTimerId: any = null;\r\n\r\n    state = {\r\n        render: 0\r\n    }\r\n\r\n    unit = 50;\r\n\r\n    baseOffset = 20;\r\n    _scrollPosX = 0;\r\n    _scrollPosY = 0;\r\n\r\n    rulerX: any = null;\r\n    offsetX = 0;\r\n    mousePosX = 0;\r\n    scrollPosX = 0;\r\n    startPosX = 0;\r\n\r\n    rulerY: any = null;\r\n    offsetY = 0;\r\n    mousePosY = 0;\r\n    scrollPosY = 0;\r\n    startPosY = 0;\r\n\r\n    componentDidMount() {\r\n        const {offsetX: ofX = 0, offsetY: ofY = 0} = this.props;\r\n        eventManager.register('wheel', () => {\r\n            this.startPosX = this.mousePosX - ((this.mousePosX - this.startPosX) / scaleCore.ratio);\r\n            this.scrollPosX = this.startPosX;\r\n            this.startPosY = this.mousePosY - ((this.mousePosY - this.startPosY) / scaleCore.ratio);\r\n            this.scrollPosY = this.startPosY;\r\n            this.unit = Math.floor(50 / scaleCore.scale);\r\n            clearTimeout(this.wheelTimerId);\r\n            this.wheelTimerId = setTimeout(() => {\r\n                this.setState({render: this.state.render + 1})\r\n            }, 400);\r\n        });\r\n\r\n        eventManager.register('pointermove', (e: any) => {\r\n            const {scale} = scaleCore;\r\n            this.mousePosX = this.startPosX + ((e.clientX - this.baseOffset - ofX) / scale);\r\n            this.mousePosY = this.startPosY + ((e.clientY - this.baseOffset - ofY) / scale);\r\n            if (KMMap.rightClick) {\r\n                this.offsetX = this.offsetX - e.movementX;\r\n                this._scrollPosX = this.startPosX + (this.offsetX / scale)\r\n                this.offsetY = this.offsetY - e.movementY;\r\n                this._scrollPosY = this.startPosY + (this.offsetY / scale)\r\n\r\n                clearTimeout(this.pointerMoveTimerId);\r\n                this.pointerMoveTimerId = setTimeout(() => {\r\n                    this.rulerX && this.rulerX.scroll(this._scrollPosX);\r\n                    this.rulerY && this.rulerY.scroll(this._scrollPosY);\r\n                }, 400);\r\n            }\r\n        });\r\n\r\n        eventManager.register('pointerdown', (e: PointerEvent) => {\r\n            if (e.button === 2) {\r\n                this.offsetX = 0;\r\n                this.offsetY = 0;\r\n            }\r\n        });\r\n\r\n        eventManager.register('pointerup', (e: PointerEvent) => {\r\n            if (e.button === 2) {\r\n                this.offsetX = 0;\r\n                this.offsetY = 0;\r\n                this.scrollPosX = this._scrollPosX;\r\n                this.startPosX = this._scrollPosX;\r\n                this.scrollPosY = this._scrollPosY;\r\n                this.startPosY = this._scrollPosY;\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventManager.unregister('wheel');\r\n        eventManager.unregister('pointermove');\r\n        eventManager.unregister('pointerdown');\r\n        eventManager.unregister('pointerup');\r\n        clearTimeout(this.wheelTimerId);\r\n        clearTimeout(this.pointerMoveTimerId);\r\n    }\r\n\r\n\r\n    render() {\r\n        const {scale} = scaleCore;\r\n        return (\r\n            <div className={'lc-ruler'} style={{position: 'relative'}}>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    width: 20,\r\n                    height: 20,\r\n                    color: '#838383',\r\n                    textAlign: 'center',\r\n                    fontSize: 12,\r\n                    top: -1\r\n                }}>px\r\n                </div>\r\n                <div className={'lc-ruler-horizontal'}\r\n                     style={{\r\n                         height: this.baseOffset,\r\n                         width: `calc(100% - ${this.baseOffset}px)`,\r\n                         position: 'relative',\r\n                         left: this.baseOffset\r\n                     }}>\r\n                    <Ruler ref={ref => this.rulerX = ref}\r\n                           scrollPos={this.scrollPosX}\r\n                           zoom={scale}\r\n                           lineColor={'#444b4d'}\r\n                           textColor={'#a6a6a6'}\r\n                           segment={2}\r\n                           negativeRuler={true}\r\n                           textOffset={[0, 10]}\r\n                           backgroundColor={'#090f1d'}\r\n                           unit={this.unit}/>\r\n                </div>\r\n                <div className={'lc-ruler-vertical'}\r\n                     style={{\r\n                         width: this.baseOffset,\r\n                         height: window.innerHeight - this.baseOffset - 90,\r\n                         position: 'relative',\r\n                         overflow: 'hidden'\r\n                     }}>\r\n                    <Ruler ref={ref => this.rulerY = ref}\r\n                           type={'vertical'}\r\n                           scrollPos={this.scrollPosY}\r\n                           lineColor={'#444b4d'}\r\n                           textColor={'#a6a6a6'}\r\n                           zoom={scale}\r\n                           segment={2}\r\n                           negativeRuler={true}\r\n                           textOffset={[10, 0]}\r\n                           backgroundColor={'#090f1d'}\r\n                           unit={this.unit}/>\r\n                </div>\r\n                <div className={'lc-ruler-content'} style={{\r\n                    position: 'absolute',\r\n                    top: this.baseOffset,\r\n                    left: this.baseOffset,\r\n                }}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerRuler;","import React, {Component} from 'react';\r\n\r\nclass DesignerContainer extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div style={{outline: 'none'}} className={'lc-event-container'}>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerContainer;","import * as React from \"react\";\r\nimport Moveable, {\r\n    OnDrag,\r\n    OnDragEnd,\r\n    OnDragGroup,\r\n    OnDragGroupEnd,\r\n    OnDragStart,\r\n    OnResize,\r\n    OnResizeEnd,\r\n    OnResizeGroup,\r\n    OnResizeGroupEnd,\r\n    OnResizeGroupStart,\r\n    OnResizeStart\r\n} from \"react-moveable\";\r\nimport {observer} from \"mobx-react\";\r\nimport eventOperateStore from \"../../designer/operate-provider/EventOperateStore\";\r\nimport designerStore from \"../../designer/store/DesignerStore\";\r\nimport {MovableItemType} from \"./types\";\r\nimport footerStore from \"../../designer/footer/FooterStore\";\r\nimport historyRecordOperateProxy from \"../../designer/operate-provider/undo-redo/HistoryRecordOperateProxy\";\r\n\r\ninterface GroupMovableProps {\r\n    readonly?: boolean;\r\n}\r\n\r\nclass GroupMovable extends React.Component<GroupMovableProps> {\r\n    movableRef = React.createRef<Moveable>();\r\n\r\n    constructor(props: GroupMovableProps) {\r\n        super(props);\r\n        this.state = {\r\n            targets: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {setMovableRef} = eventOperateStore;\r\n        setMovableRef(this.movableRef);\r\n    }\r\n\r\n    onDragStart = (e: OnDragStart) => {\r\n        const {target} = e;\r\n        const {layoutConfigs} = designerStore;\r\n        const {locked} = layoutConfigs[target.id];\r\n        if (locked) return false;\r\n    }\r\n\r\n    onDragEnd = (e: OnDragEnd) => {\r\n        const {updateLayout} = designerStore;\r\n        const {setCoordinate} = footerStore;\r\n        let {backoff, setBackoff} = eventOperateStore;\r\n        const {lastEvent, target} = e;\r\n        if (lastEvent) {\r\n            const {beforeTranslate} = lastEvent;\r\n            const data: MovableItemType[] = [\r\n                {\r\n                    id: target.id,\r\n                    width: (target as HTMLDivElement).offsetWidth,\r\n                    height: (target as HTMLDivElement).offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [beforeTranslate[0], beforeTranslate[1]]\r\n                }\r\n            ];\r\n            //更新组件位置信息\r\n            if (backoff) {\r\n                updateLayout(data, false);\r\n                setBackoff(false);\r\n            } else\r\n                historyRecordOperateProxy.doDrag(data)\r\n            //更新footer组件中的坐标信息\r\n            setCoordinate([beforeTranslate[0], beforeTranslate[1]])\r\n        }\r\n    }\r\n\r\n    onDragGroupEnd = (e: OnDragGroupEnd) => {\r\n        const {targets} = e;\r\n        //通过第一个元素来判断。 框选的所有组件是否处于锁定状态，处于锁定状态，则不允许拖拽和缩放。\r\n        const {updateLayout, layoutConfigs} = designerStore;\r\n        const firstLock = layoutConfigs[targets[0].id].locked;\r\n        if (firstLock) return false;\r\n\r\n        let {backoff, setBackoff, setGroupCoordinate, groupCoordinate} = eventOperateStore;\r\n        let data: MovableItemType[] = [];\r\n        e.events.forEach((ev: any) => {\r\n            const {target, lastEvent} = ev;\r\n            if (lastEvent) {\r\n                const {beforeTranslate} = lastEvent;\r\n                data.push({\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [beforeTranslate[0], beforeTranslate[1]]\r\n                })\r\n            }\r\n        })\r\n        //计算多选组件时的坐标信息\r\n        const posChange = e?.lastEvent?.beforeTranslate || [0, 0]\r\n        const minX = groupCoordinate.minX + posChange[0];\r\n        const minY = groupCoordinate.minY + posChange[1];\r\n        setGroupCoordinate({minX, minY})\r\n        //更新组件位置信息并记录操作\r\n        if (data.length > 0) {\r\n            if (backoff) {\r\n                updateLayout(data, false);\r\n                setBackoff(false);\r\n            } else\r\n                historyRecordOperateProxy.doDrag(data)\r\n        }\r\n        //更新footer组件中的最表信息\r\n        const {setCoordinate} = footerStore;\r\n        setCoordinate([minX, minY])\r\n    }\r\n\r\n    onResizeEnd = (e: OnResizeEnd) => {\r\n        const {updateLayout} = designerStore;\r\n        let {backoff, setBackoff} = eventOperateStore;\r\n        const {target, lastEvent} = e;\r\n        if (lastEvent) {\r\n            const {width, height, drag: {translate}, direction} = lastEvent;\r\n            const data: MovableItemType[] = [\r\n                {\r\n                    id: target.id,\r\n                    width: width,\r\n                    height: height,\r\n                    type: target.dataset.type,\r\n                    position: [translate[0], translate[1]]\r\n                }\r\n            ];\r\n            //更新组件尺寸信息\r\n            if (backoff) {\r\n                updateLayout(data, false);\r\n                setBackoff(false);\r\n            } else\r\n                historyRecordOperateProxy.doResize(data, direction)\r\n            //更新footer组件中的尺寸和坐标信息\r\n            const {setCoordinate, setSize} = footerStore;\r\n            setCoordinate([translate[0], translate[1]])\r\n            setSize([width, height])\r\n        }\r\n    }\r\n\r\n    onResizeGroupEnd = (e: OnResizeGroupEnd) => {\r\n        const {updateLayout} = designerStore;\r\n        let {backoff, setBackoff} = eventOperateStore;\r\n        let data: MovableItemType[] = [];\r\n        e.events.forEach((ev: any) => {\r\n            const {target, lastEvent} = ev;\r\n            if (lastEvent) {\r\n                const {drag: {translate}} = lastEvent;\r\n                data.push({\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [translate[0], translate[1]]\r\n                })\r\n            }\r\n        })\r\n        if (!e.lastEvent) return;\r\n        const {dist, direction} = e.lastEvent;\r\n        //更新组件尺寸和坐标信息\r\n        if (data.length > 0) {\r\n            if (backoff) {\r\n                updateLayout(data, false);\r\n                setBackoff(false);\r\n            } else\r\n                historyRecordOperateProxy.doResize(data, direction)\r\n\r\n            //组件多选情况下，重新计算多选组件的尺寸和坐标信息\r\n            const {setGroupCoordinate, groupCoordinate} = eventOperateStore;\r\n            const {setCoordinate, setSize} = footerStore;\r\n            if (direction[0] === -1 || direction[1] === -1) {\r\n                //缩放元素左侧或上侧，此时需要同时改变坐标\r\n                setGroupCoordinate({\r\n                    minX: groupCoordinate.minX! - dist[0],\r\n                    minY: groupCoordinate.minY! - dist[1],\r\n                    groupWidth: groupCoordinate.groupWidth + dist[0],\r\n                    groupHeight: groupCoordinate.groupHeight + dist[1],\r\n                })\r\n                setCoordinate([groupCoordinate.minX!, groupCoordinate.minY!])\r\n            } else {\r\n                setGroupCoordinate({\r\n                    groupWidth: groupCoordinate.groupWidth + dist[0],\r\n                    groupHeight: groupCoordinate.groupHeight + dist[1],\r\n                })\r\n            }\r\n            setSize([groupCoordinate.groupWidth!, groupCoordinate.groupHeight!])\r\n        }\r\n    }\r\n\r\n    onResizeGroup = (e: OnResizeGroup) => {\r\n        e.events.forEach((ev: OnResize) => {\r\n            ev.target.style.width = `${ev.width}px`;\r\n            ev.target.style.height = `${ev.height}px`;\r\n            ev.target.style.transform = ev.drag.transform;\r\n        })\r\n    }\r\n\r\n    onResize = (e: OnResize) => {\r\n        const {target, width, height, drag} = e;\r\n        target.style.width = `${width}px`;\r\n        target.style.height = `${height}px`;\r\n        target.style.transform = `translate(${drag.beforeTranslate[0]}px, ${drag.beforeTranslate[1]}px)`;\r\n    }\r\n\r\n    onResizeStart = (e: OnResizeStart) => {\r\n        const {target} = e;\r\n        const {layoutConfigs} = designerStore;\r\n        const {locked} = layoutConfigs[target.id];\r\n        if (locked) return false;\r\n    }\r\n\r\n    onDrag = (e: OnDrag) => {\r\n        const {target, beforeTranslate} = e;\r\n        target.style.transform = `translate(${beforeTranslate[0]}px, ${beforeTranslate[1]}px)`;\r\n    }\r\n\r\n    onDragGroup = (e: OnDragGroup) => {\r\n        const {targets} = e;\r\n        const {layoutConfigs} = designerStore;\r\n        //通过第一个元素来判断。 框选的所有组件是否处于锁定状态，处于锁定状态，则不允许拖拽和缩放。\r\n        const firstLock = layoutConfigs[targets[0].id].locked;\r\n        if (firstLock)\r\n            return false;\r\n        else\r\n            e.events.forEach(ev => ev.target.style.transform = ev.transform)\r\n    }\r\n\r\n    onResizeGroupStart = (e: OnResizeGroupStart) => {\r\n        const {targets} = e;\r\n        const {layoutConfigs} = designerStore;\r\n        const firstLock = layoutConfigs[targets[0].id].locked;\r\n        if (firstLock) return false;\r\n    }\r\n\r\n    render() {\r\n        const {readonly = false} = this.props;\r\n        const {selectorRef, targets} = eventOperateStore;\r\n        const {canvasConfig: {rasterize, dragStep, resizeStep}} = designerStore;\r\n        return (\r\n            <>\r\n                {this.props.children}\r\n                <Moveable ref={this.movableRef}\r\n                          target={targets}\r\n                          draggable={!readonly}\r\n                          resizable={!readonly}\r\n                          keepRatio={false}\r\n                          throttleDrag={rasterize ? dragStep : 1}\r\n                          throttleResize={rasterize ? resizeStep : 1}\r\n                          onClickGroup={e => (selectorRef.current as any)?.clickTarget(e.inputEvent, e.inputTarget)}\r\n                          onDrag={this.onDrag}\r\n                          onDragStart={this.onDragStart}\r\n                          onDragEnd={this.onDragEnd}\r\n                          onDragGroup={this.onDragGroup}\r\n                          onDragGroupEnd={this.onDragGroupEnd}\r\n                          onResizeStart={this.onResizeStart}\r\n                          onResize={this.onResize}\r\n                          onResizeEnd={this.onResizeEnd}\r\n                          onResizeGroupStart={this.onResizeGroupStart}\r\n                          onResizeGroup={this.onResizeGroup}\r\n                          onResizeGroupEnd={this.onResizeGroupEnd}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(GroupMovable);","export default class RenderUtil {\r\n    private static prev: number = 0;\r\n\r\n    public static throttle(fn: Function, delay: number, callback?: Function) {\r\n\r\n        return function (...args: any) {\r\n            const now = Date.now();\r\n            if (now - RenderUtil.prev > delay) {\r\n                fn(...args);\r\n                RenderUtil.prev = now;\r\n            } else {\r\n                callback && callback(...args);\r\n            }\r\n        };\r\n    }\r\n}\r\n","import {HistoryRecordType} from \"../HistoryType\";\r\n\r\n/**\r\n * 撤销回滚抽象接口定义\r\n */\r\nexport default abstract class AbstractRollback {\r\n    /**\r\n     * 撤销\r\n     */\r\n    public abstract undo(record: HistoryRecordType): void;\r\n\r\n    /**\r\n     * 重做\r\n     */\r\n    public abstract redo(record: HistoryRecordType): void;\r\n}","import AbstractRollback from \"./AbstractRollback\";\r\nimport eventOperateStore from \"../../EventOperateStore\";\r\nimport {DragDataType, HistoryRecordType} from \"../HistoryType\";\r\n\r\nexport class DragRollbackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {movableRef, setBackoff, setTargets} = eventOperateStore;\r\n        const {next} = record!;\r\n        let nextRecordData = next! as DragDataType;\r\n        //选中目标元素\r\n        const targets: HTMLElement[] = [];\r\n        nextRecordData.ids.forEach((id) => targets.push(document.getElementById(id)!));\r\n        setTargets(targets);\r\n        setBackoff(true);\r\n        //执行反向操作\r\n        movableRef?.current?.request(\"draggable\", {\r\n            x: nextRecordData!.x,\r\n            y: nextRecordData!.y,\r\n        }, true);\r\n\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {movableRef, setBackoff, setTargets} = eventOperateStore;\r\n        const {prev} = record!;\r\n        let prevRecordData = prev! as DragDataType;\r\n        //选中目标元素\r\n        const targets: HTMLElement[] = [];\r\n        prevRecordData.ids.forEach((id) => targets.push(document.getElementById(id)!));\r\n        setTargets(targets);\r\n        setBackoff(true);\r\n        //执行反向操作\r\n        movableRef?.current?.request(\"draggable\", {\r\n            x: prevRecordData!.x,\r\n            y: prevRecordData!.y,\r\n        }, true);\r\n    }\r\n\r\n}\r\n\r\nconst dragRollbackImpl = new DragRollbackImpl();\r\nexport default dragRollbackImpl;","import AbstractRollback from \"./AbstractRollback\";\r\nimport eventOperateStore from \"../../EventOperateStore\";\r\nimport {HistoryRecordType, ResizeDataType} from \"../HistoryType\";\r\n\r\nexport class ResizeRollbackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {movableRef, setBackoff, setTargets} = eventOperateStore;\r\n        const {next} = record!;\r\n        let nextResizeData = next! as ResizeDataType;\r\n        //选中目标元素\r\n        const targets: HTMLElement[] = [];\r\n        nextResizeData.ids.forEach((id) => targets.push(document.getElementById(id)!));\r\n        setTargets(targets);\r\n        setBackoff(true);\r\n        //执行反向操作\r\n        movableRef?.current?.request(\"resizable\", {\r\n            offsetWidth: nextResizeData!.width,\r\n            offsetHeight: nextResizeData!.height,\r\n            direction: nextResizeData!.direction,\r\n        }, true);\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {movableRef, setBackoff, setTargets} = eventOperateStore;\r\n        const {prev} = record!;\r\n        let prevResizeData = prev! as ResizeDataType;\r\n        //选中目标元素\r\n        const targets: HTMLElement[] = [];\r\n        prevResizeData.ids.forEach((id) => targets.push(document.getElementById(id)!));\r\n        setTargets(targets);\r\n        setBackoff(true);\r\n        //执行反向操作\r\n        movableRef?.current?.request(\"resizable\", {\r\n            offsetWidth: prevResizeData!.width,\r\n            offsetHeight: prevResizeData!.height,\r\n            direction: prevResizeData!.direction,\r\n        }, true);\r\n    }\r\n\r\n}\r\n\r\nconst resizeRollbackImpl = new ResizeRollbackImpl();\r\nexport default resizeRollbackImpl;","import AbstractRollback from \"./AbstractRollback\";\r\nimport eventOperateStore from \"../../EventOperateStore\";\r\nimport {AddDataType, HistoryRecordType} from \"../HistoryType\";\r\nimport designerStore from \"../../../store/DesignerStore\";\r\n\r\nexport class AddRollbackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {next} = record!;\r\n        //执行正向操作添加元素\r\n        const {addItem} = designerStore;\r\n        (next as AddDataType[]).forEach((item) => addItem(item.data.layoutConfig));\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {setTargets} = eventOperateStore;\r\n        const {next} = record!;\r\n        let nextAddData = next! as AddDataType[];\r\n        //执行反向操作删除元素\r\n        const {delItem} = designerStore;\r\n        const delIds: string[] = [];\r\n        nextAddData.forEach((item) => delIds.push(item.id));\r\n        delItem(delIds);\r\n        //清空框选状态,避免空框选\r\n        setTargets([]);\r\n    }\r\n\r\n}\r\n\r\nconst addRollbackImpl = new AddRollbackImpl();\r\nexport default addRollbackImpl;","import AbstractRollback from \"./AbstractRollback\";\r\nimport eventOperateStore from \"../../EventOperateStore\";\r\nimport {DelDataType, HistoryRecordType} from \"../HistoryType\";\r\nimport designerStore from \"../../../store/DesignerStore\";\r\n\r\nexport class DelRollbackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {prev} = record!;\r\n        //执行正向操作删除元素\r\n        const {delItem} = designerStore;\r\n        const delIds: string[] = [];\r\n        (prev as DelDataType[]).forEach((item) => delIds.push(item.id));\r\n        delItem(delIds);\r\n        const {setTargets} = eventOperateStore;\r\n        //清空框选状态,避免空框选\r\n        setTargets([]);\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {setTargets} = eventOperateStore;\r\n        const {prev} = record!;\r\n        let prevDelData = prev! as DelDataType[];\r\n        //执行反向操作添加元素\r\n        const {addItem, elemConfigs} = designerStore;\r\n        const targets: HTMLElement[] = [];\r\n        prevDelData.forEach((item) => {\r\n            addItem(item.data.layoutConfig)\r\n            elemConfigs![item.id] = item.data.elemConfig;\r\n            targets.push(document.getElementById(item.id)!);\r\n        });\r\n        //选中目标元素\r\n        setTargets(targets);\r\n    }\r\n\r\n}\r\n\r\nconst delRollbackImpl = new DelRollbackImpl();\r\nexport default delRollbackImpl;","import AbstractRollback from \"./AbstractRollback\";\r\nimport {HistoryRecordType, StyleDataType} from \"../HistoryType\";\r\nimport designerStore from \"../../../store/DesignerStore\";\r\nimport rightStore from \"../../../right/RightStore\";\r\n\r\nexport class StyleRollbackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        const {next} = record;\r\n        if (next) {\r\n            const {id, data} = next as StyleDataType;\r\n            const {compInstances} = designerStore;\r\n            const instance = compInstances[id];\r\n            if (instance)\r\n                instance.update(data)\r\n            const {visible, setContentVisible} = rightStore;\r\n            //回滚时，若配置项开启，则关闭\r\n            if (visible) {\r\n                setContentVisible(false)\r\n                setTimeout(() => {\r\n                    setContentVisible(true)\r\n                }, 1)\r\n            }\r\n        }\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        const {prev} = record;\r\n        if (prev) {\r\n            const {id, data} = prev as StyleDataType;\r\n            const {compInstances} = designerStore;\r\n            const instance = compInstances[id];\r\n            if (instance)\r\n                instance.update(data)\r\n            const {visible, setContentVisible} = rightStore;\r\n            //回滚时，若配置项开启，则关闭\r\n            if (visible) {\r\n                setContentVisible(false)\r\n                setTimeout(() => {\r\n                    setContentVisible(true)\r\n                }, 1)\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst styleRollbackImpl = new StyleRollbackImpl();\r\nexport default styleRollbackImpl;","import AbstractRollback from \"./AbstractRollback\";\r\nimport {HideDataType, HistoryRecordType} from \"../HistoryType\";\r\nimport designerStore from \"../../../store/DesignerStore\";\r\nimport layerListStore from \"../../../float-configs/layer-list/LayerListStore\";\r\n\r\n/**\r\n * hide, lock, order的撤销与回滚操作实现\r\n */\r\nexport class HideRollbackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {next} = record;\r\n        const {updateLayout} = designerStore;\r\n        if (next)\r\n            updateLayout(next as HideDataType[]);\r\n        const {visible, layerInstanceMap} = layerListStore;\r\n        if (visible) {\r\n            //图层列表若显示，则需要更新图层列表的组件状态\r\n            (next as HideDataType[])?.forEach((item) => {\r\n                const {id, hide} = item;\r\n                layerInstanceMap[id].update({hide});\r\n            })\r\n        }\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        if (!record) return;\r\n        const {prev} = record;\r\n        const {updateLayout} = designerStore;\r\n        if (prev)\r\n            updateLayout(prev as HideDataType[]);\r\n        const {visible, layerInstanceMap} = layerListStore;\r\n        if (visible) {\r\n            //图层列表若显示，则需要更新图层列表的组件状态\r\n            (prev as HideDataType[])?.forEach((item) => {\r\n                const {id, hide} = item;\r\n                layerInstanceMap[id].update({hide});\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst hideRollbackImpl = new HideRollbackImpl();\r\nexport default hideRollbackImpl;","import AbstractRollback from \"./AbstractRollback\";\r\nimport {HistoryRecordType, LockDataType} from \"../HistoryType\";\r\nimport designerStore from \"../../../store/DesignerStore\";\r\nimport layerListStore from \"../../../float-configs/layer-list/LayerListStore\";\r\n\r\n/**\r\n * hide, lock, order的撤销与回滚操作实现\r\n */\r\nexport class LockRollbackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        const {next} = record;\r\n        const {updateLayout} = designerStore;\r\n        if (next)\r\n            updateLayout(next as LockDataType[]);\r\n        const {visible, layerInstanceMap} = layerListStore;\r\n        if (visible) {\r\n            //图层列表若显示，则需要更新图层列表的组件状态\r\n            (next as LockDataType[])?.forEach((item) => {\r\n                const {id, lock} = item;\r\n                layerInstanceMap[id].update({lock});\r\n            })\r\n        }\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        const {prev} = record;\r\n        const {updateLayout} = designerStore;\r\n        if (prev)\r\n            updateLayout(prev as LockDataType[]);\r\n        const {visible, layerInstanceMap} = layerListStore;\r\n        if (visible) {\r\n            //图层列表若显示，则需要更新图层列表的组件状态\r\n            (prev as LockDataType[])?.forEach((item) => {\r\n                const {id, lock} = item;\r\n                layerInstanceMap[id].update({lock});\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst lockRollbackImpl = new LockRollbackImpl();\r\nexport default lockRollbackImpl;","import AbstractRollback from \"./AbstractRollback\";\r\nimport {HistoryRecordType, OrderDataType} from \"../HistoryType\";\r\nimport designerStore from \"../../../store/DesignerStore\";\r\n\r\n/**\r\n * hide, lock, order的撤销与回滚操作实现\r\n */\r\nexport class OrderRollBackImpl extends AbstractRollback {\r\n    redo(record: HistoryRecordType): void {\r\n        const {next} = record;\r\n        const {updateLayout} = designerStore;\r\n        if (next) updateLayout(next as OrderDataType[]);\r\n    }\r\n\r\n    undo(record: HistoryRecordType): void {\r\n        const {prev} = record;\r\n        const {updateLayout} = designerStore;\r\n        if (prev) updateLayout(prev as OrderDataType[]);\r\n    }\r\n\r\n}\r\n\r\nconst orderRollBackImpl = new OrderRollBackImpl();\r\nexport default orderRollBackImpl;","import {HistoryType} from \"../HistoryType\";\r\nimport AbstractRollback from \"./AbstractRollback\";\r\nimport dragRollbackImpl from \"./DragRollbackImpl\";\r\nimport resizeRollbackImpl from \"./ResizeRollbackImpl\";\r\nimport addRollbackImpl from \"./AddRollbackImpl\";\r\nimport delRollbackImpl from \"./DelRollbackImpl\";\r\nimport styleRollbackImpl from \"./StyleRollbackImpl\";\r\nimport hideRollbackImpl from \"./HideRollbackImpl\";\r\nimport lockRollbackImpl from \"./LockRollbackImpl\";\r\nimport orderRollBackImpl from \"./OrderRollbackImpl\";\r\n\r\nconst undoRedoMap = new Map<HistoryType, AbstractRollback>();\r\nundoRedoMap.set(HistoryType.DRAG, dragRollbackImpl);\r\nundoRedoMap.set(HistoryType.RESIZE, resizeRollbackImpl);\r\nundoRedoMap.set(HistoryType.ADD, addRollbackImpl);\r\nundoRedoMap.set(HistoryType.DEL, delRollbackImpl);\r\nundoRedoMap.set(HistoryType.STYLE, styleRollbackImpl);\r\nundoRedoMap.set(HistoryType.HIDE, hideRollbackImpl);\r\nundoRedoMap.set(HistoryType.LOCK, lockRollbackImpl);\r\nundoRedoMap.set(HistoryType.ORDER, orderRollBackImpl);\r\n\r\nexport default undoRedoMap;","import {Component} from 'react';\r\nimport eventOperateStore from \"../EventOperateStore\";\r\n\r\nexport enum TriggerType {\r\n    SINGLE,\r\n    COILED\r\n}\r\n\r\nexport interface HotKeyConfigType {\r\n    [key: string]: {\r\n        handler: Function,\r\n        target?: any,\r\n        triggerType?: TriggerType\r\n    }\r\n}\r\n\r\ninterface HotKeyProps {\r\n    handlerMapping: HotKeyConfigType;\r\n}\r\n\r\n//需要屏蔽浏览器默认快捷键效果的快捷键列表\r\nconst shieldKeyList = ['control + s', 'alt', 'control + l', 'control + shift + l', 'control + h']\r\n\r\nclass HotKey extends Component<HotKeyProps> {\r\n\r\n    handlerMapping: HotKeyConfigType = {}\r\n    currHotKey: string[] = [];\r\n    existHandlerKey: string = \"\";\r\n\r\n    constructor(props: HotKeyProps) {\r\n        super(props);\r\n        this.handlerMapping = props.handlerMapping;\r\n    }\r\n\r\n    /**\r\n     * 从快捷键配置管理映射表中匹配对应的快捷键处理函数并执行。\r\n     * @param e 鼠标事件对象\r\n     * @param hotKey 当前按下的快捷键\r\n     */\r\n    doHandler = (e: any, hotKey: string) => {\r\n        const {handler, triggerType = TriggerType.SINGLE} = this.handlerMapping[hotKey] || {};\r\n        if (handler) {\r\n            if ((triggerType === TriggerType.SINGLE && this.existHandlerKey !== hotKey) || triggerType === TriggerType.COILED) {\r\n                const {pointerTarget} = eventOperateStore;\r\n                //todo 需要优化快捷键的执行范围\r\n                const enforcementCap = document.querySelector('.lc-ruler-content');\r\n                if (enforcementCap && (enforcementCap.contains(pointerTarget) || (pointerTarget && pointerTarget.classList.contains('layer-item')))) {\r\n                    handler(e);\r\n                    this.existHandlerKey = hotKey;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    keyDown = (e: any) => {\r\n        const key = e.key.toLowerCase();\r\n        if (!this.currHotKey.some(item => item === key))\r\n            this.currHotKey.push(key);\r\n        let hotKey = this.currHotKey.join(' + ');\r\n        if (shieldKeyList.some(item => item === hotKey))\r\n            e.preventDefault();\r\n        this.doHandler(e, hotKey);\r\n    };\r\n\r\n    keyUp = (e: any) => {\r\n        const key = e.key.toLowerCase();\r\n        if (this.currHotKey.some(item => item === key)) {\r\n            this.currHotKey = this.currHotKey.filter(item => item !== key);\r\n            this.existHandlerKey = '';\r\n        }\r\n    }\r\n\r\n    wheel = (e: any) => {\r\n        let hotKey = this.currHotKey.join(' + ') + ' + wheel';\r\n        const {handler, target} = this.handlerMapping[hotKey] || {};\r\n        if (handler) {\r\n            if (target && !target.contains(e.target))\r\n                return;\r\n            handler(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 失去焦点时清空当前热键（一般是切换屏幕）\r\n     */\r\n    onBlur = () => {\r\n        this.currHotKey = [];\r\n        this.existHandlerKey = '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.keyDown);\r\n        document.addEventListener('keyup', this.keyUp);\r\n        document.addEventListener('wheel', this.wheel);\r\n        window.onblur = this.onBlur;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.keyDown);\r\n        document.removeEventListener('keyup', this.keyUp);\r\n        document.removeEventListener('wheel', this.wheel);\r\n        window.onblur = null;\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default HotKey;","import eventOperateStore from \"../EventOperateStore\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\nimport RenderUtil from \"../../../utils/RenderUtil\";\r\nimport {SaveType} from \"../../DesignerType\";\r\nimport {cloneDeep} from \"lodash\";\r\nimport {message} from \"antd\";\r\nimport EditorDesignerLoader from \"../../loader/EditorDesignerLoader\";\r\nimport {historyOperator} from \"../undo-redo/HistoryOperator\";\r\nimport historyRecordOperateProxy from \"../undo-redo/HistoryRecordOperateProxy\";\r\nimport undoRedoMap from \"../undo-redo/core\";\r\n\r\nexport const selectAll = () => {\r\n    let comps = document.getElementsByClassName('lc-comp-item');\r\n    let compIds: string[] = [];\r\n    let compArr: any[] = [];\r\n    //权限时排除已锁定和隐藏的组件\r\n    comps && Array.from(comps).forEach((comp: any) => {\r\n        const {locked, hide} = comp.dataset;\r\n        if (locked !== 'true' && hide !== 'true') {\r\n            compArr.push(comp);\r\n            compIds.push(comp.id);\r\n        }\r\n    });\r\n    const {setTargets, /*setTargetIds,*/ calculateGroupCoordinate} = eventOperateStore;\r\n    setTargets(compArr);\r\n    // setTargetIds(compIds);\r\n\r\n    //计算组件多选时的左上角坐标\r\n    if (compArr.length > 1)\r\n        calculateGroupCoordinate(compArr);\r\n}\r\n\r\nexport const doCopy = () => {\r\n    console.log('doCopy')\r\n    const {targetIds, /*setTargetIds,*/ setTargets} = eventOperateStore;\r\n    console.log('targetIds', targetIds)\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {copyItem} = designerStore;\r\n    let newIds = copyItem(targetIds);\r\n    let targets: any = [];\r\n    //延迟10毫秒，等待dom元素渲染完毕后再获取。\r\n    setTimeout(() => {\r\n        for (const newId of newIds) {\r\n            targets.push(document.getElementById(newId));\r\n        }\r\n        targets.filter((item: any) => item !== null);\r\n        setTargets(targets);\r\n        // setTargetIds(newIds);\r\n    }, 10);\r\n}\r\n\r\nexport const doLock = () => {\r\n    const {targetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {layoutConfigs} = designerStore;\r\n    let toBeUpdate = [];\r\n    for (const targetId of targetIds) {\r\n        let item = layoutConfigs[targetId];\r\n        toBeUpdate.push({...item, locked: true})\r\n    }\r\n    historyRecordOperateProxy.doLockUpd(toBeUpdate);\r\n    //操作完毕之后，清空已被选择的元素。\r\n    setTargets([]);\r\n}\r\n\r\nexport const doUnLock = () => {\r\n    const {setTargets, targets} = eventOperateStore;\r\n    if (!targets || targets.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toUpdate: MovableItemType[] = [];\r\n    (targets as HTMLElement[]).filter(target => {\r\n        //过滤出被锁定的组件\r\n        return target.dataset.locked === 'true';\r\n    }).forEach((target) => {\r\n        let item = layoutConfigs[target.id];\r\n        toUpdate.push({...item, locked: false})\r\n    })\r\n    updateLayout(toUpdate)\r\n    historyRecordOperateProxy.doLockUpd(toUpdate);\r\n    setTargets([]);\r\n}\r\n\r\nexport const toTop = () => {\r\n    let {maxLevel, setMaxLevel, targetIds, /*setTargetIds*/} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, order: ++maxLevel});\r\n    });\r\n    setMaxLevel(maxLevel)\r\n    // setTargetIds([]);\r\n    historyRecordOperateProxy.doOrderUpd(toBeUpdate);\r\n}\r\n\r\nexport const toBottom = () => {\r\n    let {minLevel, setMinLevel, targetIds, /*setTargetIds*/} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, order: --minLevel});\r\n    });\r\n    setMinLevel(minLevel)\r\n    // setTargetIds([]);\r\n    historyRecordOperateProxy.doOrderUpd(toBeUpdate);\r\n}\r\n\r\nexport const doDelete = () => {\r\n    historyRecordOperateProxy.doDelete();\r\n}\r\n\r\nexport const doSave = () => {\r\n    RenderUtil.throttle(() => {\r\n        let {projectConfig: {saveType}} = designerStore;\r\n        if (saveType === SaveType.LOCAL) {\r\n            const {projectConfig: {saveType = SaveType.LOCAL}} = designerStore;\r\n            EditorDesignerLoader.getInstance().abstractOperatorMap[saveType].doCreateOrUpdate(cloneDeep(designerStore.getData()));\r\n        } else if (saveType === SaveType.SERVER) {\r\n            alert(\"server save\");\r\n        }\r\n    }, 5000, () => {\r\n        message.warn('保存过于频繁，请稍后再试！')\r\n    })();\r\n\r\n}\r\n\r\nexport const doHide = () => {\r\n    const {targetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, hide: true});\r\n    });\r\n    historyRecordOperateProxy.doHideUpd(toBeUpdate);\r\n    setTargets([]);\r\n}\r\n\r\n/*************************快捷键控制移动组件的位置*************************/\r\n\r\nexport const doMoveUp = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let yPos = layoutConfigs[id].position![1] - dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n    } else {\r\n        const yPos = groupCoordinate?.minY! - dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n    }\r\n}\r\n\r\nexport const doMoveDown = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let yPos = layoutConfigs[id].position![1] + dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n    } else {\r\n        const yPos = groupCoordinate?.minY! + dragStep;\r\n        movableRef?.current?.request(\"draggable\", {y: yPos}, true);\r\n    }\r\n}\r\n\r\nexport const doMoveLeft = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let xPos = layoutConfigs[id].position![0];\r\n        movableRef?.current?.request(\"draggable\", {x: xPos - dragStep}, true);\r\n    } else {\r\n        const xPos = groupCoordinate?.minX! - dragStep;\r\n        movableRef?.current?.request(\"draggable\", {x: xPos}, true);\r\n    }\r\n}\r\n\r\nexport const doMoveRight = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {dragStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        let xPos = layoutConfigs[id].position![0];\r\n        movableRef?.current?.request(\"draggable\", {x: xPos + dragStep}, true);\r\n    } else {\r\n        const xPos = groupCoordinate?.minX! + dragStep;\r\n        movableRef?.current?.request(\"draggable\", {x: xPos}, true);\r\n    }\r\n}\r\n\r\n/*************************快捷键控制缩放组件尺寸*************************/\r\n\r\n/**\r\n * 以底部为基准向上扩大\r\n */\r\nexport const doBaseBottomEnlargeUp = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let height;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        height = layoutConfigs[id].height! + resizeStep;\r\n    } else {\r\n        height = groupCoordinate.groupHeight! + resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetHeight: height, direction: [1, -1]}, true);\r\n}\r\n\r\n/**\r\n * 以顶部为基准向下扩大\r\n */\r\nexport const doBaseUpEnlargeDown = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let height;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        height = layoutConfigs[id].height! + resizeStep;\r\n    } else {\r\n        height = groupCoordinate.groupHeight! + resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetHeight: height, direction: [1, 1]}, true);\r\n}\r\n\r\n/**\r\n * 以右边为基准向左扩大\r\n */\r\nexport const doBaseRightEnlargeLeft = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let width;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        width = layoutConfigs[id].width! + resizeStep;\r\n    } else {\r\n        width = groupCoordinate.groupWidth! + resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetWidth: width, direction: [-1, 1]}, true);\r\n}\r\n\r\n/**\r\n * 以左边为基准向右扩大\r\n */\r\nexport const doBaseLeftEnlargeRight = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let width;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        width = layoutConfigs[id].width! + resizeStep;\r\n    } else {\r\n        width = groupCoordinate.groupWidth! + resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetWidth: width, direction: [1, 1]}, true);\r\n}\r\n\r\n\r\n/**\r\n * 以底部为基准向上缩小\r\n */\r\nexport const doBaseBottomDecreaseUp = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let height;\r\n    if (targets.length === 1) {\r\n        height = layoutConfigs[targets[0].id].height! - resizeStep;\r\n    } else {\r\n        height = groupCoordinate.groupHeight! - resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetHeight: height, direction: [1, -1]}, true);\r\n}\r\n\r\n/**\r\n * 以顶部为基准向下缩小\r\n */\r\nexport const doBaseUpDecreaseDown = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let height;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        height = layoutConfigs[id].height! - resizeStep;\r\n    } else {\r\n        height = groupCoordinate.groupHeight! - resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetHeight: height, direction: [1, 1]}, true);\r\n}\r\n\r\n/**\r\n * 以右边为基准向左缩小\r\n */\r\nexport const doBaseRightDecreaseLeft = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let width;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        width = layoutConfigs[id].width! - resizeStep;\r\n    } else {\r\n        width = groupCoordinate.groupWidth! - resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetWidth: width, direction: [-1, 1]}, true);\r\n}\r\n\r\n/**\r\n * 以左边为基准向右缩小\r\n */\r\nexport const doBaseLeftDecreaseRight = () => {\r\n    const {targets, movableRef, groupCoordinate} = eventOperateStore;\r\n    const {layoutConfigs, canvasConfig: {resizeStep = 1}} = designerStore;\r\n    if (!targets || targets.length === 0) return;\r\n    let width;\r\n    if (targets.length === 1) {\r\n        let id = targets[0].id;\r\n        width = layoutConfigs[id].width! - resizeStep;\r\n    } else {\r\n        width = groupCoordinate.groupWidth! - resizeStep;\r\n    }\r\n    movableRef?.current?.request(\"resizable\", {offsetWidth: width, direction: [1, 1]}, true);\r\n}\r\n\r\n\r\n/**\r\n * 撤销\r\n */\r\nexport const undo = () => {\r\n    let record = historyOperator.backoff();\r\n    if (!record) return;\r\n    const {type} = record!;\r\n    undoRedoMap.get(type)?.undo(record!);\r\n}\r\n\r\n/**\r\n * 重做\r\n */\r\nexport const redo = () => {\r\n    let record = historyOperator.forward();\r\n    if (!record) return;\r\n    const {type} = record!;\r\n    undoRedoMap.get(type)?.redo(record!);\r\n}","import React, {Component} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport contextMenuStore from \"./ContextMenuStore\";\r\nimport './OperateMenu.less';\r\nimport {\r\n    CopyOutlined,\r\n    DeleteOutlined,\r\n    EyeInvisibleOutlined,\r\n    LockOutlined,\r\n    VerticalAlignBottomOutlined,\r\n    VerticalAlignTopOutlined\r\n} from \"@ant-design/icons\";\r\nimport {doCopy, doDelete, doHide, doLock, doUnLock, toBottom, toTop} from \"../hot-key/HotKeyImpl\";\r\n\r\nclass ContextMenu extends Component {\r\n\r\n    menuList = [\r\n        {\r\n            name: '锁定',\r\n            icon: LockOutlined,\r\n            onClick: doLock,\r\n        },\r\n        {\r\n            name: '解锁',\r\n            icon: LockOutlined,\r\n            onClick: doUnLock,\r\n        },\r\n        {\r\n            name: '隐藏',\r\n            icon: EyeInvisibleOutlined,\r\n            onClick: doHide,\r\n        },\r\n        {\r\n            name: '复制',\r\n            icon: CopyOutlined,\r\n            onClick: doCopy,\r\n        },\r\n        {\r\n            name: '置顶',\r\n            icon: VerticalAlignTopOutlined,\r\n            onClick: toTop,\r\n        },\r\n        {\r\n            name: '置底',\r\n            icon: VerticalAlignBottomOutlined,\r\n            onClick: toBottom,\r\n        },\r\n        {\r\n            name: '删除',\r\n            icon: DeleteOutlined,\r\n            onClick: doDelete,\r\n        },\r\n    ]\r\n\r\n    render() {\r\n        const {visible, position = [0, 0]} = contextMenuStore;\r\n        let menuListDom = [];\r\n        for (let i = 0; i < this.menuList.length; i++) {\r\n            let menuItem = this.menuList[i];\r\n            let Icon = menuItem.icon;\r\n            menuListDom.push(\r\n                <div key={i + ''} className={'menu-item'} onClick={menuItem.onClick}>\r\n                    <label><Icon/></label>\r\n                    <span>{menuItem.name}</span>\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <>\r\n                {visible &&\r\n                <div className={'lc-right-menu'} style={{\r\n                    position: 'fixed',\r\n                    top: position[1],\r\n                    left: position[0]\r\n                }}>\r\n                    {menuListDom}\r\n                </div>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ContextMenu);","import designerStore from \"../../store/DesignerStore\";\r\nimport scaleCore from \"./ScaleCore\";\r\nimport eventManager from \"../core/EventManager\";\r\nimport {KMMap} from \"../hot-key/KeyboardMouse\";\r\nimport footerStore from \"../../footer/FooterStore\";\r\nimport DragScaleProvider from \"../DragScaleProvider\";\r\n\r\nexport const doScale = (e: any) => {\r\n    //如果仍处于拖拽过程中，则不进行缩放\r\n    if (KMMap.rightClick) return;\r\n    //计算缩放比例\r\n    scaleCore.compute(e.deltaY > 0 ? 0 : 1);\r\n    //缩放画布\r\n    scaleCanvas(e);\r\n    //缩放标尺\r\n    eventManager.emit('wheel', e);\r\n    //更新缩放比例显示信息\r\n    const {setScale} = footerStore;\r\n    setScale(scaleCore.scale);\r\n}\r\n\r\nexport const scaleCanvas = (e: any) => {\r\n    let {canvasConfig: {width = 1920, height = 1080}} = designerStore;\r\n    const origin = {\r\n        x: (scaleCore.ratio - 1) * width * 0.5,\r\n        y: (scaleCore.ratio - 1) * height * 0.5\r\n    };\r\n    // 计算偏移量\r\n    DragScaleProvider.x -= (scaleCore.ratio - 1) * (e.clientX - DragScaleProvider.offsetX - DragScaleProvider.x) - origin.x;\r\n    DragScaleProvider.y -= (scaleCore.ratio - 1) * (e.clientY - DragScaleProvider.offsetY - DragScaleProvider.y) - origin.y;\r\n    DragScaleProvider.providerRef!.style.transform = 'translate3d(' + DragScaleProvider.x + 'px, ' + DragScaleProvider.y + 'px, 0) scale(' + scaleCore.scale + ')';\r\n}","import {HotKeyConfigType, TriggerType} from \"./HotKey\";\r\nimport {doScale} from \"../scale/Scaler\";\r\nimport {\r\n    doCopy,\r\n    doDelete,\r\n    doLock,\r\n    doMoveDown,\r\n    doMoveLeft,\r\n    doMoveRight,\r\n    doMoveUp,\r\n    doBaseUpEnlargeDown,\r\n    doBaseRightEnlargeLeft,\r\n    doBaseLeftEnlargeRight,\r\n    doBaseBottomEnlargeUp,\r\n    doSave,\r\n    selectAll,\r\n    toBottom,\r\n    toTop,\r\n    doBaseBottomDecreaseUp,\r\n    doBaseUpDecreaseDown,\r\n    doBaseRightDecreaseLeft,\r\n    doBaseLeftDecreaseRight,\r\n    undo,\r\n    redo,\r\n    doUnLock,\r\n    doHide\r\n} from \"./HotKeyImpl\";\r\n\r\nexport const getHotKeyConfig: HotKeyConfigType = {\r\n    'alt + wheel': {\r\n        handler: doScale,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + a': {\r\n        handler: selectAll,\r\n    },\r\n    'control + v': {\r\n        handler: doCopy,\r\n    },\r\n    'control + l': {\r\n        handler: doLock,\r\n    },\r\n    'control + shift + l': {\r\n        handler: doUnLock,\r\n    },\r\n    'control + h': {\r\n        handler: doHide,\r\n    },\r\n    'control + arrowup': {\r\n        handler: toTop,\r\n    },\r\n    'control + arrowdown': {\r\n        handler: toBottom,\r\n    },\r\n    'control + s': {\r\n        handler: doSave,\r\n    },\r\n    'delete': {\r\n        handler: doDelete,\r\n    },\r\n    'control + z': {\r\n        handler: undo,\r\n    },\r\n    'control + shift + z': {\r\n        handler: redo,\r\n    },\r\n    'arrowup': {\r\n        handler: doMoveUp,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'arrowdown': {\r\n        handler: doMoveDown,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'arrowleft': {\r\n        handler: doMoveLeft,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'arrowright': {\r\n        handler: doMoveRight,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + shift + arrowup': {\r\n        handler: doBaseBottomEnlargeUp,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + shift + arrowdown': {\r\n        handler: doBaseUpEnlargeDown,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + shift + arrowleft': {\r\n        handler: doBaseRightEnlargeLeft,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + shift + arrowright': {\r\n        handler: doBaseLeftEnlargeRight,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + alt + arrowup': {\r\n        handler: doBaseBottomDecreaseUp,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + alt + arrowdown': {\r\n        handler: doBaseUpDecreaseDown,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + alt + arrowleft': {\r\n        handler: doBaseRightDecreaseLeft,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n    'control + alt + arrowright': {\r\n        handler: doBaseLeftDecreaseRight,\r\n        triggerType: TriggerType.COILED,\r\n    },\r\n}","import React, {MouseEvent, PureComponent} from 'react';\r\nimport DragScaleProvider from \"../operate-provider/DragScaleProvider\";\r\nimport {observer} from \"mobx-react\";\r\nimport designerStore, {DesignerStore} from \"../store/DesignerStore\";\r\nimport DesignerBackground from \"../../comps/lc/background/DesignerBackground\";\r\nimport rightStore from \"../right/RightStore\";\r\nimport DesignerRuler from \"../../lib/lc-ruler/DesignerRuler\";\r\nimport DesignerContainer from \"../operate-provider/DesignerContainer\";\r\nimport GroupMovable from \"../../lib/lc-movable/GroupMovable\";\r\nimport GroupSelectable from \"../../lib/lc-movable/GroupSelectable\";\r\nimport LcRightMenu from \"../operate-provider/right-click-menu/ContextMenu\";\r\nimport {MovableItemType} from \"../../lib/lc-movable/types\";\r\nimport HotKey from \"../operate-provider/hot-key/HotKey\";\r\nimport {getHotKeyConfig} from \"../operate-provider/hot-key/HotKeyConfig\";\r\nimport ComponentContainer from \"../../framework/core/ComponentContainer\";\r\nimport {isEqual} from \"lodash\";\r\n\r\n/**\r\n * 设计器画布\r\n */\r\nclass DesignerCanvas extends PureComponent<DesignerStore | any> {\r\n\r\n    backgroundRef: DesignerBackground | null = null;\r\n\r\n    state = {\r\n        designerRef: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({designerRef: document.querySelector('.lc-ruler-content')});\r\n    }\r\n\r\n    updateActive = (e: MouseEvent<HTMLDivElement>) => {\r\n        let {id, dataset: {type}} = e.target as HTMLDivElement;\r\n        const {activeConfig, activeElem} = rightStore;\r\n        if (isEqual(activeElem, {id, type})) return;\r\n        activeConfig(id, type!);\r\n    }\r\n\r\n    /**\r\n     * 元素生成\r\n     */\r\n    generateElement = () => {\r\n        let {layoutConfigs} = designerStore!;\r\n        const sortLayout = Object.values(layoutConfigs).sort((a: MovableItemType, b: MovableItemType) => a.order! - b.order!);\r\n        return sortLayout.map((item: MovableItemType) => {\r\n            return <ComponentContainer layout={item} key={item.id}/>\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <DesignerContainer>\r\n                    <GroupSelectable>\r\n                        <DesignerRuler offsetX={60} offsetY={50}>\r\n                            <DragScaleProvider>\r\n                                <GroupMovable>\r\n                                    <DesignerBackground onClick={this.updateActive}\r\n                                                        ref={ref => this.backgroundRef = ref}>\r\n                                        {this.generateElement()}\r\n                                    </DesignerBackground>\r\n                                </GroupMovable>\r\n                            </DragScaleProvider>\r\n\r\n                        </DesignerRuler>\r\n                    </GroupSelectable>\r\n                </DesignerContainer>\r\n                <LcRightMenu/>\r\n                <HotKey handlerMapping={getHotKeyConfig}/>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DesignerCanvas);\r\n\r\n","import React, {Component} from 'react';\r\nimport LcHeader from \"./structure/LcHeader\";\r\nimport LcBody from \"./structure/LcBody\";\r\nimport LcLeft from \"./structure/LcLeft\";\r\nimport LcContent from \"./structure/LcContent\";\r\nimport LcRight from \"./structure/LcRight\";\r\nimport LcStructure from \"./structure/LcStructure\";\r\nimport LcFoot from \"./structure/LcFoot\";\r\nimport DesignerLeft from \"./left\";\r\nimport Right from \"./right\";\r\nimport Footer from \"./footer/Footer\";\r\nimport FloatConfigs from \"./float-configs/FloatConfigs\";\r\nimport contextMenuStore from \"./operate-provider/right-click-menu/ContextMenuStore\";\r\nimport eventOperateStore from \"./operate-provider/EventOperateStore\";\r\nimport eventManager from \"./operate-provider/core/EventManager\";\r\nimport {KMMap} from \"./operate-provider/hot-key/KeyboardMouse\";\r\nimport EditorDesignerLoader from \"./loader/EditorDesignerLoader\";\r\nimport designerStore from \"./store/DesignerStore\";\r\nimport Loading from \"../lib/loading/Loading\";\r\nimport DesignerHeader from \"./header/DesignerHeader\";\r\nimport DesignerCanvas from \"./canvas/DesignerCanvas\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nclass Designer extends Component {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        //加载设计器\r\n        EditorDesignerLoader.getInstance().load();\r\n    }\r\n\r\n    componentDidMount() {\r\n        //加载事件到事件管理器\r\n        registerEventToManager();\r\n        //绑定事件到dom元素\r\n        bindEventToDom();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        //卸载事件管理器中的事件\r\n        unRegisterEventToManager();\r\n        //卸载dom元素上的事件\r\n        unbindEventToDom();\r\n    }\r\n\r\n    render() {\r\n        const {loaded} = designerStore;\r\n        if (!loaded)\r\n            return <Loading/>;\r\n        return (\r\n            <LcStructure>\r\n                <LcHeader>\r\n                    <DesignerHeader/>\r\n                </LcHeader>\r\n                <LcBody>\r\n                    <LcLeft><DesignerLeft/></LcLeft>\r\n                    <LcContent><DesignerCanvas/></LcContent>\r\n                    <LcRight><Right/></LcRight>\r\n                </LcBody>\r\n                <LcFoot>\r\n                    <Footer/>\r\n                </LcFoot>\r\n                <FloatConfigs/>\r\n            </LcStructure>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Designer);\r\n\r\n/**\r\n * 注册事件到事件管理器\r\n */\r\nfunction registerEventToManager() {\r\n    eventManager.register('click', clickHandler);\r\n    eventManager.register('contextmenu', contextMenuHandler);\r\n    eventManager.register('pointerdown', pointerDownHandler);\r\n    eventManager.register('pointerup', pointerUpHandler);\r\n}\r\n\r\n/**\r\n * 卸载事件管理器中的事件\r\n */\r\nfunction unRegisterEventToManager() {\r\n    eventManager.unregister('click', clickHandler);\r\n    eventManager.unregister('contextmenu', contextMenuHandler);\r\n    eventManager.unregister('pointerdown', pointerDownHandler);\r\n    eventManager.unregister('pointerup', pointerUpHandler);\r\n}\r\n\r\n/**\r\n * 绑定事件到dom元素\r\n */\r\nfunction bindEventToDom() {\r\n    document.addEventListener(\"click\", clickEmit);\r\n    document.addEventListener(\"contextmenu\", contextMenuEmit);\r\n    document.addEventListener(\"pointerdown\", pointerDownEmit);\r\n    document.addEventListener(\"pointermove\", pointerMoveEmit);\r\n    document.addEventListener(\"pointerup\", pointerUpEmit);\r\n}\r\n\r\n/**\r\n * 卸载dom元素上的事件\r\n */\r\nfunction unbindEventToDom() {\r\n    document.removeEventListener(\"click\", clickEmit);\r\n    document.removeEventListener(\"contextmenu\", contextMenuEmit);\r\n    document.removeEventListener(\"pointerdown\", pointerDownEmit);\r\n    document.removeEventListener(\"pointermove\", pointerMoveEmit);\r\n    document.removeEventListener(\"pointerup\", pointerUpEmit);\r\n}\r\n\r\n/*****************事件分发*****************/\r\nconst clickEmit = (event: any) => eventManager.emit('click', event);\r\nconst contextMenuEmit = (event: any) => eventManager.emit('contextmenu', event);\r\nconst pointerDownEmit = (event: any) => eventManager.emit('pointerdown', event);\r\nconst pointerMoveEmit = (event: any) => eventManager.emit('pointermove', event);\r\nconst pointerUpEmit = (event: any) => eventManager.emit('pointerup', event);\r\n\r\n\r\n/*****************事件处理*****************/\r\nconst clickHandler = (event: any) => {\r\n    const {visible, updateVisible} = contextMenuStore;\r\n    if (visible && event.button === 0) {\r\n        //这里添加异步处理的原因：必须要在操作菜单执行点击事件执行之后才能卸载dom元素，不然操作菜单的点击事件会失效。\r\n        setTimeout(() => {\r\n            updateVisible(false);\r\n        });\r\n    }\r\n}\r\n\r\nconst contextMenuHandler = (event: any) => {\r\n    event.preventDefault();\r\n    const {mouseDownTime, mouseUpTime, setPosition, updateVisible} = contextMenuStore;\r\n    let targetArr = ['lc-comp-item', 'moveable-area'];\r\n    if (targetArr.some((item: string) => event.target.classList.contains(item)) && mouseUpTime - mouseDownTime < 200) {\r\n        updateVisible && updateVisible(true);\r\n        setPosition([event.clientX, event.clientY]);\r\n    } else {\r\n        updateVisible && updateVisible(false);\r\n    }\r\n}\r\n\r\nconst pointerDownHandler = (event: any) => {\r\n    if (event.button === 0) {\r\n        KMMap.leftClick = true;\r\n    } else if (event.button === 2)\r\n        KMMap.rightClick = true;\r\n    const {setMouseDownTime} = contextMenuStore;\r\n    setMouseDownTime(Date.now());\r\n}\r\n\r\nconst pointerUpHandler = (event: any) => {\r\n    if (event.button === 0)\r\n        KMMap.leftClick = false;\r\n    else if (event.button === 2)\r\n        KMMap.rightClick = false;\r\n    const {setMouseUpTime} = contextMenuStore;\r\n    setMouseUpTime(Date.now());\r\n    const {setPointerTarget} = eventOperateStore;\r\n    setPointerTarget(event.target);\r\n}"],"sourceRoot":""}