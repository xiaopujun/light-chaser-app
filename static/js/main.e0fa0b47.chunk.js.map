{"version":3,"sources":["lib/loading/Loading.tsx","designer/operate-provider/undo-redo/HistoryQueue.ts","test/DemoMain.tsx","App.tsx","index.tsx"],"names":["Loading","this","props","width","height","style","backgroundColor","background","color","display","justifyContent","alignItems","fontSize","fontWeight","tip","Component","HistoryQueue","capacity","elements","front","rear","size","back","backAll","circulate","backCount","Array","item","console","log","elem","MyComponent","count","historyQueue","onClick","enqueue","backoff","forward","React","LightChaserList","lazy","Designer","DesignerView","App","fallback","path","component","DemoMain","designerRouter","ReactDOM","render","ref","document","getElementById"],"mappings":"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","file":"static/js/main.e0fa0b47.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {Spin} from \"antd\";\r\n\r\ninterface LoadingProps {\r\n    width?: string | number;\r\n    height?: string | number;\r\n}\r\n\r\nclass Loading extends Component<LoadingProps> {\r\n    render() {\r\n        const {width = '100%', height = '100%'} = this.props;\r\n        const style = {\r\n            width,\r\n            height,\r\n            backgroundColor: '#4b6cb7',\r\n            background: 'linear-gradient(to right, #182848, #1a2848)',\r\n            color: '#1db3ff',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            fontSize: '20px',\r\n            fontWeight: '300'\r\n        }\r\n        return (\r\n            <div style={style}>\r\n                <Spin tip={'loading...'}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Loading;","export default class HistoryQueue<T> {\r\n    //容量\r\n    private readonly capacity: number;\r\n    //元素数组\r\n    private readonly elements: T[];\r\n    //队首指针\r\n    private front: number;\r\n    //队尾指针\r\n    private rear: number;\r\n    //队列大小\r\n    private size: number;\r\n    //回退指针\r\n    private back: number;\r\n    //是否已经回退所有\r\n    private backAll: boolean;\r\n    //队列是否已经出现循环\r\n    private circulate: boolean = false;\r\n    //回退次数\r\n    private backCount: number = 0;\r\n\r\n    constructor(capacity: number = 10) {\r\n        this.capacity = capacity;\r\n        this.elements = new Array(capacity);\r\n        this.front = 0;\r\n        this.rear = -1;\r\n        this.size = 0;\r\n        this.back = this.rear;\r\n        this.backAll = false;\r\n    }\r\n\r\n    /**\r\n     * 入队\r\n     * @param item\r\n     */\r\n    enqueue(item: T): void {\r\n        // 队列已满，移动 front 指针来丢弃最早的元素, 如果插入前backAll为true，说明已经回退过所有元素，此时不需要移动front指针\r\n        if (this.size === this.capacity && !this.backAll) {\r\n            this.circulate = true;\r\n            this.front = (this.front + 1) % this.capacity;\r\n        }\r\n        //是否执行过回退操作？\r\n        if (this.back !== this.rear) {\r\n            this.rear = (this.back + 1) % this.capacity;\r\n            this.elements[this.rear] = item;\r\n            this.size -= this.backCount;\r\n            this.backCount = 0;\r\n        } else {\r\n            this.rear = (this.rear + 1) % this.capacity;\r\n            this.elements[this.rear] = item;\r\n        }\r\n        if (this.size < this.capacity)\r\n            this.size++;\r\n        this.back = this.rear;\r\n        this.backAll = false;\r\n        console.log('插入', this.elements, 'front', this.front, 'rear', this.rear, 'back', this.back, 'backAll', this.backAll, 'size', this.size)\r\n    }\r\n\r\n    /**\r\n     * 获取队首元素\r\n     */\r\n    getFront(): T | null {\r\n        if (this.size === 0)\r\n            return null;\r\n        return this.elements[this.front];\r\n    }\r\n\r\n    /**\r\n     * 获取队尾元素\r\n     */\r\n    getRear(): T | null {\r\n        if (this.size === 0)\r\n            return null;\r\n        return this.elements[this.rear];\r\n    }\r\n\r\n\r\n    /**\r\n     * 回退\r\n     */\r\n    backoff(): T | null {\r\n        if (this.size === 0)\r\n            return null;\r\n        //如果已经退回到最后一个元素（退无可退了）则直接返回队首元素\r\n        if (this.backAll) {\r\n            console.log('回退到底了', this.elements, 'front', this.front, 'rear', this.rear, 'back', this.back, 'backAll', this.backAll)\r\n            return null;\r\n        }\r\n        if (this.back === this.front)\r\n            this.backAll = true;\r\n        //先取出当前退回指针所指向的元素，然后将退回指针前移一位\r\n        const elem = this.elements[this.back];\r\n        this.back = (this.back - 1 + this.capacity) % this.capacity;\r\n        this.backCount++;\r\n        console.log('回退', elem, 'front', this.front, 'rear', this.rear, 'back', this.back, 'size', this.size, 'backAll', this.backAll)\r\n        return elem;\r\n    }\r\n\r\n    /**\r\n     * 前进\r\n     */\r\n    forward(): T | null {\r\n        if (this.size === 0)\r\n            return null;\r\n        if (this.back === this.rear) {\r\n            console.log('已经前进到最后一个元素', this.elements, 'front', this.front, 'rear', this.rear, 'back', this.back, 'size', this.size)\r\n            return null;\r\n        }\r\n        this.back = (this.back + 1) % this.capacity;\r\n        console.log('前进', this.elements[this.back], 'front', this.front, 'rear', this.rear, 'back', this.back, 'size', this.size)\r\n        if (this.backAll)\r\n            this.backAll = false;\r\n        return this.elements[this.back];\r\n    }\r\n\r\n    /**\r\n     * 获取当前退回指针所指向的元素\r\n     */\r\n    getBackPointElem(): T | null {\r\n        return this.elements[this.back];\r\n    }\r\n\r\n    /**\r\n     * 是否为空\r\n     */\r\n    isEmpty(): boolean {\r\n        return this.size === 0;\r\n    }\r\n\r\n    /**\r\n     * 是否已满\r\n     */\r\n    isFull(): boolean {\r\n        return this.size === this.capacity;\r\n    }\r\n\r\n    /**\r\n     * 获取当前队列元素个数\r\n     */\r\n    getSize(): number {\r\n        return this.size;\r\n    }\r\n\r\n    getBack(): number {\r\n        return this.back;\r\n    }\r\n\r\n    getCirculate(): boolean {\r\n        return this.circulate;\r\n    }\r\n}\r\n","import React from 'react';\r\nimport HistoryQueue from \"../designer/operate-provider/undo-redo/HistoryQueue\";\r\n\r\nclass MyComponent extends React.Component {\r\n\r\n    count: number = 0;\r\n\r\n    render() {\r\n        let historyQueue = new HistoryQueue<number>(3);\r\n        return (\r\n            <div>\r\n                <button onClick={() => historyQueue.enqueue(++this.count)}>添加元素</button>\r\n                <button onClick={() => historyQueue.backoff()}>回退</button>\r\n                <button onClick={() => historyQueue.forward()}>前进</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default MyComponent;\r\n","import React, {Component, lazy, Suspense} from 'react';\r\nimport 'antd/dist/antd.min.css';\r\nimport './App.less';\r\nimport {Route, Switch} from \"react-router-dom\";\r\nimport Loading from \"./lib/loading/Loading\";\r\nimport DemoMain from \"./test/DemoMain\";\r\n\r\nconst LightChaserList = lazy(() => import('./list/LightChaserList'));\r\nconst Designer = lazy(() => import('./designer/Designer'));\r\nconst DesignerView = lazy(() => import('./designer/view/DesignerView'));\r\n\r\nclass App extends Component<any> {\r\n    render() {\r\n        return (\r\n            <>\r\n                <Suspense fallback={<Loading/>}>\r\n                    <Switch>\r\n                        <Route path={'/designer'} component={Designer}/>\r\n                        <Route path={'/view'} component={DesignerView}/>\r\n                        <Route path={'/test'} component={DemoMain}/>\r\n                        <Route path={'/'} component={LightChaserList}/>\r\n                    </Switch>\r\n                </Suspense>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {HashRouter} from \"react-router-dom\";\r\n\r\nexport let designerRouter: any = null;\r\n\r\nReactDOM.render(\r\n    <HashRouter ref={ref => designerRouter = ref}>\r\n        <App/>\r\n    </HashRouter>,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}