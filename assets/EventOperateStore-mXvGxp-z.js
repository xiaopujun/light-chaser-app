var Ve=Object.defineProperty;var ze=(n,r,e)=>r in n?Ve(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var R=(n,r,e)=>(ze(n,typeof r!="symbol"?r+"":r,e),e);import{m as makeObservable,a as observable,b as action,o as observer,r as runInAction,t as toJS}from"./mobxreact.esm-Bs6BHgzT.js";import{l as lodashExports,O as ObjectUtil}from"./ObjectUtil-dSQYWY1O.js";import{r as reactExports,R as React,ao as createRoot,j as jsxRuntimeExports,ap as getDefaultExportFromCjs,_ as __vitePreload,e as ReactDOM,g as globalMessage,aq as commonjsGlobal,ar as message}from"./index-AnGvN2i1.js";import{A as AntdIcon,_ as _objectSpread2}from"./AntdIcon-PoCzGYsr.js";import{M as MonacoEditor}from"./MonacoEditor-UjgAnvCY.js";import{L as LCGUI,a as LCGUIUtil}from"./LCGUI-myOdFqK5.js";import Accordion from"./Accordion-ssKtHro7.js";import Radio from"./Radio-y-H3t4-e.js";import{e as ColorPicker}from"./ColorPicker-IzKjYEBO.js";import{CardPanel}from"./CardPanel-pAVw3vrc.js";import Input from"./Input-o-bDlRtT.js";import{U as UIContainer}from"./UIContainer-rjd2PosK.js";import{Grid}from"./Grid-T7Ta9Pvg.js";import Button from"./Button-MoQkZLqZ.js";const Shape$1=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase$1},get Circle(){return Circle$2},get Ellipse(){return Ellipse$1},get Image(){return ImageShape},get Line(){return Line$3},get Marker(){return Marker$1},get Path(){return Path$2},get Polygon(){return Polygon$2},get Polyline(){return PolyLine},get Rect(){return Rect$2},get Text(){return Text$1}},Symbol.toStringTag,{value:"Module"})),Shape=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase},get Circle(){return Circle$1},get Dom(){return Dom},get Ellipse(){return Ellipse},get Image(){return Image$1},get Line(){return Line$2},get Marker(){return Marker},get Path(){return Path$1},get Polygon(){return Polygon$1},get Polyline(){return Polyline},get Rect(){return Rect$1},get Text(){return Text}},Symbol.toStringTag,{value:"Module"}));var AppstoreAddOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"};const AppstoreAddOutlinedSvg=AppstoreAddOutlined$2;var AppstoreAddOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:AppstoreAddOutlinedSvg}))};AppstoreAddOutlined.displayName="AppstoreAddOutlined";const AppstoreAddOutlined$1=reactExports.forwardRef(AppstoreAddOutlined);var AppstoreFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zM464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z"}}]},name:"appstore",theme:"filled"};const AppstoreFilledSvg=AppstoreFilled$2;var AppstoreFilled=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:AppstoreFilledSvg}))};AppstoreFilled.displayName="AppstoreFilled";const AppstoreFilled$1=reactExports.forwardRef(AppstoreFilled);var AppstoreOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};const AppstoreOutlinedSvg=AppstoreOutlined$2;var AppstoreOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:AppstoreOutlinedSvg}))};AppstoreOutlined.displayName="AppstoreOutlined";const AppstoreOutlined$1=reactExports.forwardRef(AppstoreOutlined);var BlockOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M856 376H648V168c0-8.8-7.2-16-16-16H168c-8.8 0-16 7.2-16 16v464c0 8.8 7.2 16 16 16h208v208c0 8.8 7.2 16 16 16h464c8.8 0 16-7.2 16-16V392c0-8.8-7.2-16-16-16zm-480 16v188H220V220h360v156H392c-8.8 0-16 7.2-16 16zm204 52v136H444V444h136zm224 360H444V648h188c8.8 0 16-7.2 16-16V444h156v360z"}}]},name:"block",theme:"outlined"};const BlockOutlinedSvg=BlockOutlined$2;var BlockOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:BlockOutlinedSvg}))};BlockOutlined.displayName="BlockOutlined";const BlockOutlined$1=reactExports.forwardRef(BlockOutlined);var BranchesOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};const BranchesOutlinedSvg=BranchesOutlined$2;var BranchesOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:BranchesOutlinedSvg}))};BranchesOutlined.displayName="BranchesOutlined";const BranchesOutlined$1=reactExports.forwardRef(BranchesOutlined);var CodeSandboxOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M709.6 210l.4-.2h.2L512 96 313.9 209.8h-.2l.7.3L151.5 304v416L512 928l360.5-208V304l-162.9-94zM482.7 843.6L339.6 761V621.4L210 547.8V372.9l272.7 157.3v313.4zM238.2 321.5l134.7-77.8 138.9 79.7 139.1-79.9 135.2 78-273.9 158-274-158zM814 548.3l-128.8 73.1v139.1l-143.9 83V530.4L814 373.1v175.2z"}}]},name:"code-sandbox",theme:"outlined"};const CodeSandboxOutlinedSvg=CodeSandboxOutlined$2;var CodeSandboxOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:CodeSandboxOutlinedSvg}))};CodeSandboxOutlined.displayName="CodeSandboxOutlined";const CodeSandboxOutlined$1=reactExports.forwardRef(CodeSandboxOutlined);var DatabaseFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v224h704V96c0-17.7-14.3-32-32-32zM288 232c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zM160 928c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V704H160v224zm128-136c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zM160 640h704V384H160v256zm128-168c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40z"}}]},name:"database",theme:"filled"};const DatabaseFilledSvg=DatabaseFilled$2;var DatabaseFilled=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:DatabaseFilledSvg}))};DatabaseFilled.displayName="DatabaseFilled";const DatabaseFilled$1=reactExports.forwardRef(DatabaseFilled);var DeploymentUnitOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"};const DeploymentUnitOutlinedSvg=DeploymentUnitOutlined$2;var DeploymentUnitOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:DeploymentUnitOutlinedSvg}))};DeploymentUnitOutlined.displayName="DeploymentUnitOutlined";const DeploymentUnitOutlined$1=reactExports.forwardRef(DeploymentUnitOutlined);var EnvironmentOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"};const EnvironmentOutlinedSvg=EnvironmentOutlined$2;var EnvironmentOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:EnvironmentOutlinedSvg}))};EnvironmentOutlined.displayName="EnvironmentOutlined";const EnvironmentOutlined$1=reactExports.forwardRef(EnvironmentOutlined);var FontSizeOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"}}]},name:"font-size",theme:"outlined"};const FontSizeOutlinedSvg=FontSizeOutlined$2;var FontSizeOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:FontSizeOutlinedSvg}))};FontSizeOutlined.displayName="FontSizeOutlined";const FontSizeOutlined$1=reactExports.forwardRef(FontSizeOutlined);var FormatPainterOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M840 192h-56v-72c0-13.3-10.7-24-24-24H168c-13.3 0-24 10.7-24 24v272c0 13.3 10.7 24 24 24h592c13.3 0 24-10.7 24-24V256h32v200H465c-22.1 0-40 17.9-40 40v136h-44c-4.4 0-8 3.6-8 8v228c0 .6.1 1.3.2 1.9A83.99 83.99 0 00457 960c46.4 0 84-37.6 84-84 0-2.1-.1-4.1-.2-6.1.1-.6.2-1.2.2-1.9V640c0-4.4-3.6-8-8-8h-44V520h351c22.1 0 40-17.9 40-40V232c0-22.1-17.9-40-40-40zM720 352H208V160h512v192zM477 876c0 11-9 20-20 20s-20-9-20-20V696h40v180z"}}]},name:"format-painter",theme:"outlined"};const FormatPainterOutlinedSvg=FormatPainterOutlined$2;var FormatPainterOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:FormatPainterOutlinedSvg}))};FormatPainterOutlined.displayName="FormatPainterOutlined";const FormatPainterOutlined$1=reactExports.forwardRef(FormatPainterOutlined);var FunctionOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M841 370c3-3.3 2.7-8.3-.6-11.3a8.24 8.24 0 00-5.3-2.1h-72.6c-2.4 0-4.6 1-6.1 2.8L633.5 504.6a7.96 7.96 0 01-13.4-1.9l-63.5-141.3a7.9 7.9 0 00-7.3-4.7H380.7l.9-4.7 8-42.3c10.5-55.4 38-81.4 85.8-81.4 18.6 0 35.5 1.7 48.8 4.7l14.1-66.8c-22.6-4.7-35.2-6.1-54.9-6.1-103.3 0-156.4 44.3-175.9 147.3l-9.4 49.4h-97.6c-3.8 0-7.1 2.7-7.8 6.4L181.9 415a8.07 8.07 0 007.8 9.7H284l-89 429.9a8.07 8.07 0 007.8 9.7H269c3.8 0 7.1-2.7 7.8-6.4l89.7-433.1h135.8l68.2 139.1c1.4 2.9 1 6.4-1.2 8.8l-180.6 203c-2.9 3.3-2.6 8.4.7 11.3 1.5 1.3 3.4 2 5.3 2h72.7c2.4 0 4.6-1 6.1-2.8l123.7-146.7c2.8-3.4 7.9-3.8 11.3-1 .9.8 1.6 1.7 2.1 2.8L676.4 784c1.3 2.8 4.1 4.7 7.3 4.7h64.6a8.02 8.02 0 007.2-11.5l-95.2-198.9c-1.4-2.9-.9-6.4 1.3-8.8L841 370z"}}]},name:"function",theme:"outlined"};const FunctionOutlinedSvg=FunctionOutlined$2;var FunctionOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:FunctionOutlinedSvg}))};FunctionOutlined.displayName="FunctionOutlined";const FunctionOutlined$1=reactExports.forwardRef(FunctionOutlined);var GoldOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M342 472h342c.4 0 .9 0 1.3-.1 4.4-.7 7.3-4.8 6.6-9.2l-40.2-248c-.6-3.9-4-6.7-7.9-6.7H382.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8zm91.2-196h159.5l20.7 128h-201l20.8-128zm2.5 282.7c-.6-3.9-4-6.7-7.9-6.7H166.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8h342c.4 0 .9 0 1.3-.1 4.4-.7 7.3-4.8 6.6-9.2l-40.2-248zM196.5 748l20.7-128h159.5l20.7 128H196.5zm709.4 58.7l-40.2-248c-.6-3.9-4-6.7-7.9-6.7H596.2c-3.9 0-7.3 2.8-7.9 6.7l-40.2 248c-.1.4-.1.9-.1 1.3 0 4.4 3.6 8 8 8h342c.4 0 .9 0 1.3-.1 4.3-.7 7.3-4.8 6.6-9.2zM626.5 748l20.7-128h159.5l20.7 128H626.5z"}}]},name:"gold",theme:"outlined"};const GoldOutlinedSvg=GoldOutlined$2;var GoldOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:GoldOutlinedSvg}))};GoldOutlined.displayName="GoldOutlined";const GoldOutlined$1=reactExports.forwardRef(GoldOutlined);var HighlightFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2z"}}]},name:"highlight",theme:"filled"};const HighlightFilledSvg=HighlightFilled$2;var HighlightFilled=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:HighlightFilledSvg}))};HighlightFilled.displayName="HighlightFilled";const HighlightFilled$1=reactExports.forwardRef(HighlightFilled);var InfoCircleOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};const InfoCircleOutlinedSvg=InfoCircleOutlined$2;var InfoCircleOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:InfoCircleOutlinedSvg}))};InfoCircleOutlined.displayName="InfoCircleOutlined";const InfoCircleOutlined$1=reactExports.forwardRef(InfoCircleOutlined);var InteractionFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM726 585.7c0 55.3-44.7 100.1-99.7 100.1H420.6v53.4c0 5.7-6.5 8.8-10.9 5.3l-109.1-85.7c-3.5-2.7-3.5-8 0-10.7l109.1-85.7c4.4-3.5 10.9-.3 10.9 5.3v53.4h205.7c19.6 0 35.5-16 35.5-35.6v-78.9c0-3.7 3-6.8 6.8-6.8h50.7c3.7 0 6.8 3 6.8 6.8v79.1zm-2.6-209.9l-109.1 85.7c-4.4 3.5-10.9.3-10.9-5.3v-53.4H397.7c-19.6 0-35.5 16-35.5 35.6v78.9c0 3.7-3 6.8-6.8 6.8h-50.7c-3.7 0-6.8-3-6.8-6.8v-78.9c0-55.3 44.7-100.1 99.7-100.1h205.7v-53.4c0-5.7 6.5-8.8 10.9-5.3l109.1 85.7c3.6 2.5 3.6 7.8.1 10.5z"}}]},name:"interaction",theme:"filled"};const InteractionFilledSvg=InteractionFilled$2;var InteractionFilled=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:InteractionFilledSvg}))};InteractionFilled.displayName="InteractionFilled";const InteractionFilled$1=reactExports.forwardRef(InteractionFilled);var LineOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 476H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"line",theme:"outlined"};const LineOutlinedSvg=LineOutlined$2;var LineOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:LineOutlinedSvg}))};LineOutlined.displayName="LineOutlined";const LineOutlined$1=reactExports.forwardRef(LineOutlined);var PieChartOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"};const PieChartOutlinedSvg=PieChartOutlined$2;var PieChartOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:PieChartOutlinedSvg}))};PieChartOutlined.displayName="PieChartOutlined";const PieChartOutlined$1=reactExports.forwardRef(PieChartOutlined);var SkinFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7a37.93 37.93 0 00-37-29.3H154a44 44 0 00-44 44v252a44 44 0 0044 44h75v388a44 44 0 0044 44h478a44 44 0 0044-44V466h75a44 44 0 0044-44V170a44 44 0 00-44-44z"}}]},name:"skin",theme:"filled"};const SkinFilledSvg=SkinFilled$2;var SkinFilled=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:SkinFilledSvg}))};SkinFilled.displayName="SkinFilled";const SkinFilled$1=reactExports.forwardRef(SkinFilled);var UngroupOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M736 550H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208 130c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zM736 266H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208-194c39.8 0 72-32.2 72-72s-32.2-72-72-72-72 32.2-72 72 32.2 72 72 72zm0-96c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0 656c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}}]},name:"ungroup",theme:"outlined"};const UngroupOutlinedSvg=UngroupOutlined$2;var UngroupOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:UngroupOutlinedSvg}))};UngroupOutlined.displayName="UngroupOutlined";const UngroupOutlined$1=reactExports.forwardRef(UngroupOutlined);var VideoCameraOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"};const VideoCameraOutlinedSvg=VideoCameraOutlined$2;var VideoCameraOutlined=function(r,e){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},r),{},{ref:e,icon:VideoCameraOutlinedSvg}))};VideoCameraOutlined.displayName="VideoCameraOutlined";const VideoCameraOutlined$1=reactExports.forwardRef(VideoCameraOutlined);class DesignerLeftStore{constructor(){R(this,"menus",[{icon:BlockOutlined$1,name:"图层",key:"layer-list"},{icon:AppstoreAddOutlined$1,name:"组件库",key:"components"},{icon:UngroupOutlined$1,name:"资源库",key:"source-list"}]);R(this,"menu","");R(this,"setMenu",r=>this.menu=r);R(this,"designerLeftRef",null);R(this,"setDesignerLeftRef",r=>this.designerLeftRef=r);makeObservable(this,{menu:observable,setMenu:action})}}const designerLeftStore=new DesignerLeftStore;var SaveType=(n=>(n.LOCAL="0",n.SERVER="1",n))(SaveType||{}),DesignerMode=(n=>(n.EDIT="0",n.VIEW="1",n))(DesignerMode||{}),ProjectState=(n=>(n.DRAFT="0",n.PUBLISH="1",n.SEALED="2",n))(ProjectState||{}),OperateType=(n=>(n[n.DRAG=0]="DRAG",n[n.RESIZE=1]="RESIZE",n[n.ADD=2]="ADD",n[n.DEL=3]="DEL",n[n.UPD_STYLE=4]="UPD_STYLE",n[n.HIDE=5]="HIDE",n[n.ORDER=6]="ORDER",n[n.LOCK=7]="LOCK",n[n.UPDATE_LAYER=8]="UPDATE_LAYER",n))(OperateType||{});class HistoryQueue{constructor(r=10){R(this,"capacity");R(this,"elements");R(this,"front");R(this,"rear");R(this,"size");R(this,"back");R(this,"backAll");R(this,"circulate",!1);R(this,"backCount",0);this.capacity=r,this.elements=new Array(r),this.front=0,this.rear=-1,this.size=0,this.back=this.rear,this.backAll=!1}enqueue(r){this.size===this.capacity&&!this.backAll&&(this.circulate=!0,this.front=(this.front+1)%this.capacity),this.back!==this.rear?(this.rear=(this.back+1)%this.capacity,this.elements[this.rear]=r,this.size-=this.backCount,this.backCount=0):(this.rear=(this.rear+1)%this.capacity,this.elements[this.rear]=r),this.size<this.capacity&&this.size++,this.back=this.rear,this.backAll=!1}getFront(){return this.size===0?null:this.elements[this.front]}getRear(){return this.size===0?null:this.elements[this.rear]}backoff(){if(this.size===0||this.backAll)return null;this.back===this.front&&(this.backAll=!0);const r=this.elements[this.back];return this.back=(this.back-1+this.capacity)%this.capacity,this.backCount++,r}forward(){return this.size===0||this.back===this.rear?null:(this.back=(this.back+1)%this.capacity,this.backAll&&(this.backAll=!1),this.elements[this.back])}getBackPointElem(){return this.elements[this.back]}isEmpty(){return this.size===0}isFull(){return this.size===this.capacity}getSize(){return this.size}getBack(){return this.back}getCirculate(){return this.circulate}}class HistoryOperator{constructor(){R(this,"queue",new HistoryQueue(50))}put(r){this.queue.enqueue(r)}backoff(){return this.queue.backoff()}forward(){return this.queue.forward()}}const historyOperator=new HistoryOperator;class AbstractController{constructor(){R(this,"instance",null);R(this,"config",null);R(this,"container",null)}destroy(){this.instance=null,this.config=null,this.container=null}}class HttpUtil{static async sendHttpRequest(r,e,a,o){const s={method:e.toUpperCase(),headers:a};if(e.toUpperCase()==="POST")s.headers["Content-Type"]="application/json",s.body=JSON.stringify(o);else if(e.toUpperCase()==="GET"){const c=new URLSearchParams(o).toString();r+=`?${c}`}return await(await fetch(r,s)).json()}}class AbstractDesignerController extends AbstractController{constructor(){super(...arguments);R(this,"interval",null);R(this,"lastReqState",!0);R(this,"reConnect",!1);R(this,"errMsgDom",null)}changeData(e){}registerEvent(){}loadComponentData(){const{data:e}=this.config;if(!e)return;const{sourceType:a}=e;switch(a){case"static":break;case"api":const{url:o,method:s,params:l,header:c,frequency:u=5}=e==null?void 0:e.apiData;this.interval=setInterval(()=>{HttpUtil.sendHttpRequest(o,s,c,l).then(f=>{var d;f&&(this.lastReqState||(this.lastReqState=!0,(d=this.errMsgDom)==null||d.remove(),this.errMsgDom=null,this.changeData(f)),this.changeData(f))}).catch(()=>{this.lastReqState=!1,this.errMsgDom||(this.errMsgDom=document.createElement("div"),this.errMsgDom.classList.add("view-error-message"),this.errMsgDom.innerText="数据加载失败...",this.container.appendChild(this.errMsgDom))})},u*1e3);break}}updateTheme(e){}}var AnchorPointType=(n=>(n[n.INPUT=0]="INPUT",n[n.OUTPUT=1]="OUTPUT",n))(AnchorPointType||{});class AbstractBPNodeController extends AbstractController{constructor(r){super(),r&&(this.config=r)}}class ComponentUtil{static async createAndRender(r,e,a){if(!r)throw new Error("create react node failed, container is null");return await new Promise(o=>{try{createRoot(r).render(React.createElement(e,{ref:s=>o(s),...a}))}catch(s){console.error("create react node failed ",s),o(null)}})}}const nodeIconMap=new Map;nodeIconMap.set("CodeSandboxOutlined",CodeSandboxOutlined$1);nodeIconMap.set("BranchesOutlined",BranchesOutlined$1);nodeIconMap.set("FunctionOutlined",FunctionOutlined$1);class BPNode extends React.PureComponent{render(){const{icon:r,name:e,input:a=[],output:o=[],titleBgColor:s="#247057"}=this.props,l=[...o,...a],c=nodeIconMap.get(r)||CodeSandboxOutlined$1;return jsxRuntimeExports.jsxs("div",{className:"bp-node",children:[jsxRuntimeExports.jsxs("div",{className:"bp-node-header",style:{backgroundColor:s},children:[jsxRuntimeExports.jsxs("div",{className:"bp-node-icon",children:[jsxRuntimeExports.jsx(c,{})," "]}),jsxRuntimeExports.jsx("div",{className:"bp-node-title",children:e})]}),jsxRuntimeExports.jsx("div",{className:"bp-node-body",children:l.map((u,f)=>{const{id:d,name:g,type:v}=u;return jsxRuntimeExports.jsxs("div",{className:`bp-node-ap ${v===AnchorPointType.INPUT?"node-ap-input":"node-ap-output"}`,children:[jsxRuntimeExports.jsx("div",{className:"bp-node-ap-circle",children:jsxRuntimeExports.jsx("span",{id:d,className:`ap-circle ${v===AnchorPointType.INPUT?"ap-circle-input":"ap-circle-output"}`})}),jsxRuntimeExports.jsx("div",{className:"bg-node-ap-label",children:g})]},f)})})]})}}class BPLayerNodeController extends AbstractBPNodeController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BPNode,e)}execute(r,e,a){const{nodeId:o,apId:s,anchorType:l}=r;if(l===AnchorPointType.INPUT){const{compController:c,layerConfigs:u}=designerStore$1,f=c[o];if(!f)return;const{type:d}=u[o],{definitionMap:g}=DesignerLoaderFactory.getLoader(),p=g[d].getActionList().find(y=>y.id===s);if(!p)return;p.handler(f,a)}}getConfig(){return this.config}update(r,e){}getNodeInfo(r){const{layerConfigs:e}=designerStore$1,a=e[r],{definitionMap:o}=DesignerLoaderFactory.getLoader(),s=o[a.type].getEventList().map(c=>({id:r+":"+c.id+":"+AnchorPointType.OUTPUT,name:c.name,type:AnchorPointType.OUTPUT})),l=o[a.type].getActionList().map(c=>({id:r+":"+c.id+":"+AnchorPointType.INPUT,name:c.name,type:AnchorPointType.INPUT}));return{id:r,name:a.name,icon:"CodeSandboxOutlined",type:"layer-node",titleBgColor:"#247057",input:l,output:s}}getConfigComponent(){return null}}const ConditionNodeConfig=n=>{const{controller:r}=n,a=(r==null?void 0:r.getConfig()).handler||`function handler(data) { 
 
 }`,o=lodashExports.debounce(s=>{s&&(r==null||r.update({handler:s}))},500);return jsxRuntimeExports.jsx("div",{className:"condition-node-config",children:jsxRuntimeExports.jsx(MonacoEditor,{value:a,onChange:o,height:400,language:"javascript"})})};class BPConditionNodeController extends AbstractBPNodeController{constructor(){super(...arguments);R(this,"handler",null)}async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BPNode,e)}execute(executeInfo,executor,params){var r;const{nodeId,anchorType}=executeInfo;if(anchorType===1)return;if(!this.handler){if(!((r=this.config)!=null&&r.handler))return;try{this.handler=eval(`(${this.config.handler})`)}catch(e){console.error("解析条件函数错误，请检查你写条件判断函数");return}}const result=this.handler(params);if(result){const e=nodeId+":satisfy:"+AnchorPointType.OUTPUT;executor.execute(e,executor,params)}else{const e=nodeId+":unSatisfy:"+AnchorPointType.OUTPUT;executor.execute(e,executor,params)}}getConfig(){return this.config}update(r,e){this.config=ObjectUtil.merge(this.config,r)}getNodeInfo(r){return{id:r,name:"条件判断",titleBgColor:"#247ba6",type:"condition-node",icon:"BranchesOutlined",input:[{id:r+":judge:"+AnchorPointType.INPUT,name:"判断",type:AnchorPointType.INPUT}],output:[{id:r+":satisfy:"+AnchorPointType.OUTPUT,name:"满足",type:AnchorPointType.OUTPUT},{id:r+":unSatisfy:"+AnchorPointType.OUTPUT,name:"不满足",type:AnchorPointType.OUTPUT}]}}getConfigComponent(){return ConditionNodeConfig}}const LogicalProcessNodeConfig=n=>{const{controller:r}=n,a=(r==null?void 0:r.getConfig()).handler||`function handle(data) { 
 
 }`,o=lodashExports.debounce(s=>{s&&(r==null||r.update({handler:s}))},500);return jsxRuntimeExports.jsx("div",{className:"logical-process-node-config",children:jsxRuntimeExports.jsx(MonacoEditor,{value:a,onChange:o,height:400,language:"javascript"})})};class BPLogicalProcessNodeController extends AbstractBPNodeController{constructor(){super(...arguments);R(this,"handler",null)}async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BPNode,e)}execute(executeInfo,executor,params){var r;const{nodeId}=executeInfo;if(!this.handler){if(!((r=this.config)!=null&&r.handler))return;try{this.handler=eval(`(${this.config.handler})`)}catch(e){console.error("解析条件函数错误，请检查你写条件判断函数");return}}const newParams=this.handler(params)||params,apId=nodeId+":afterExecute:"+AnchorPointType.OUTPUT;executor.execute(apId,executor,newParams)}getConfig(){return this.config}update(r,e){this.config=ObjectUtil.merge(this.config,r)}getNodeInfo(r){return{id:r,name:"逻辑处理",titleBgColor:"#a62469",type:"logical-process-node",icon:"FunctionOutlined",input:[{id:r+":execute:"+AnchorPointType.INPUT,name:"执行",type:AnchorPointType.INPUT}],output:[{id:r+":afterExecute:"+AnchorPointType.OUTPUT,name:"执行后",type:AnchorPointType.OUTPUT}]}}getConfigComponent(){return LogicalProcessNodeConfig}}const bpNodeControllerMap=new Map;bpNodeControllerMap.set("layer-node",BPLayerNodeController);bpNodeControllerMap.set("condition-node",BPConditionNodeController);bpNodeControllerMap.set("logical-process-node",BPLogicalProcessNodeController);class BPStore{constructor(){R(this,"bpAPMap",{});R(this,"bpLines",{});R(this,"bpAPLineMap",{});R(this,"bpNodeLayoutMap",{});R(this,"bpNodeControllerInsMap",{});R(this,"bpNodeConfigMap",{});R(this,"selectedNodes",[]);R(this,"selectedLines",[]);R(this,"bpMovableRef",null);R(this,"bpSelectRef",null);R(this,"upCtx",null);R(this,"downCtx",null);R(this,"nodeContainerRef",null);R(this,"bpDragContentRef",null);R(this,"canvasOffset",{x:320,y:50});R(this,"canvasTranslate",{x:0,y:0});R(this,"canvasScale",1);R(this,"setBpDragContentRef",r=>this.bpDragContentRef=r);R(this,"setBpNodeControllerInsMap",r=>{this.bpNodeControllerInsMap=r});R(this,"getAllNodeConfig",()=>{if(!this.bpNodeLayoutMap)return{};const r=Object.keys(this.bpNodeLayoutMap);if(Object.keys(this.bpNodeControllerInsMap).length>0){const e={};return r.forEach(a=>{e[a]=this.bpNodeControllerInsMap[a].getConfig()}),e}else return this.bpNodeConfigMap});R(this,"setBpNodeLayoutMap",r=>{this.bpNodeLayoutMap=r});R(this,"setBpNodeConfigMap",r=>{this.bpNodeConfigMap=r});R(this,"addBPNodeLayout",r=>{this.bpNodeLayoutMap[r.id]=r});R(this,"updBpNodeLayout",r=>{const e=this.bpNodeLayoutMap[r.id];e&&ObjectUtil.merge(e,r)});R(this,"setSelectedLines",r=>{this.selectedLines=r});R(this,"addAPLineMap",(r,e)=>{this.bpAPLineMap[r]||(this.bpAPLineMap[r]=[]),this.bpAPLineMap[r].push(e)});R(this,"delAPLineMap",(r,e)=>{if(this.bpAPLineMap[r]){const a=this.bpAPLineMap[r].indexOf(e);a!==-1&&this.bpAPLineMap[r].splice(a,1),this.bpAPLineMap[r].length===0&&delete this.bpAPLineMap[r]}});R(this,"delAPMap",(r,e)=>{if(this.bpAPMap[r]){const a=this.bpAPMap[r].indexOf(e);a!==-1&&this.bpAPMap[r].splice(a,1),this.bpAPMap[r].length===0&&delete this.bpAPMap[r]}});R(this,"updLinePos",r=>{const e=this.bpLines[r.id];e&&(e.startPoint=r.startPoint,e.endPoint=r.endPoint)});R(this,"setAPLineMap",r=>{this.bpAPLineMap=r});R(this,"setAPMap",r=>{this.bpAPMap=r});R(this,"setLines",r=>{this.bpLines=r});R(this,"addAPMap",(r,e)=>{this.bpAPMap[r]||(this.bpAPMap[r]=[]),this.bpAPMap[r].push(e)});R(this,"addLine",r=>{this.bpLines[r.id]=r});R(this,"setCanvasScale",r=>{this.canvasScale=r});R(this,"setCanvasTranslate",r=>{r&&(this.canvasTranslate=r)});R(this,"setSelectedNodes",r=>{this.selectedNodes=r});R(this,"setBpMovableRef",r=>{this.bpMovableRef=r});R(this,"setBpSelectRef",r=>{this.bpSelectRef=r});R(this,"setUpCtx",r=>{this.upCtx=r});R(this,"setDownCtx",r=>{this.downCtx=r});R(this,"setNodeContainerRef",r=>{this.nodeContainerRef=r});R(this,"delNode",r=>{!r||r.length===0||(r.forEach(e=>{let a=this.bpNodeControllerInsMap[e];if(!a){const o=Object.values(this.bpNodeLayoutMap);Object.keys(this.bpNodeControllerInsMap).length===0&&o.length!==0&&o.forEach(s=>{const l=bpNodeControllerMap.get(s.type),c=this.bpNodeConfigMap[s.id];l&&(this.bpNodeControllerInsMap[s.id]=new l(c))}),a=this.bpNodeControllerInsMap[e]}if(a){const o=a.getConfig();[...o.input,...o.output].forEach(l=>{const{id:c}=l;if(c in this.bpAPMap&&delete this.bpAPMap[c],c in this.bpAPLineMap){const u=this.bpAPLineMap[c];this.delLine([...u]),delete this.bpAPLineMap[c]}})}delete this.bpNodeConfigMap[e],delete this.bpNodeLayoutMap[e],delete this.bpNodeControllerInsMap[e]}),this.setSelectedNodes([]))});R(this,"delLine",r=>{!r||r.length===0||(r.forEach(e=>{const a=this.bpLines[e];a&&this.delAPMap(a.startAnchorId,a.endAnchorId),delete this.bpLines[e],this.delAPLineMap(a.startAnchorId,e),this.delAPLineMap(a.endAnchorId,e)}),this.setSelectedLines([]))});makeObservable(this,{selectedNodes:observable,bpNodeLayoutMap:observable,canvasScale:observable,setSelectedNodes:action,addBPNodeLayout:action,updBpNodeLayout:action,setCanvasScale:action})}}const bpStore=new BPStore;class BPExecutor{constructor(){R(this,"executeCount",0)}static triggerComponentEvent(r,e,a){const o=r+":"+e+":"+AnchorPointType.OUTPUT,s=new BPExecutor;s.execute(o,s,a)}execute(r,e,a){if(e.executeCount>1e3){console.warn("蓝图单条路径执行次数超过1000，请检查是否出现死循环逻辑！");return}if(e.executeCount++,!r||r===""||r.split(":").length!==3)return;const{bpAPMap:s}=bpStore,l=s[r];l&&l.forEach(c=>{const[u,f,d]=c.split(":"),{bpNodeControllerInsMap:g}=bpStore,v=g[u];v&&v.execute({nodeId:u,apId:f,anchorType:parseInt(d)},e,a)})}}class AntdBaseDesignerController extends AbstractDesignerController{constructor(){super(...arguments);R(this,"interval",null);R(this,"lastReqState",!0);R(this,"reConnect",!1)}changeData(e){var a,o,s;(o=(a=this.config)==null?void 0:a.style)!=null&&o.data&&(this.config.style.data=e),(s=this.instance)==null||s.changeData(e)}registerEvent(){var a,o,s,l,c,u,f;const e=(o=(a=this.config)==null?void 0:a.base)==null?void 0:o.id;(s=this.instance)==null||s.on("plot:click",(...d)=>{BPExecutor.triggerComponentEvent(e,"globalClick",{msg:"这是测试参数"})}),(l=this.instance)==null||l.on("element:click",(...d)=>{BPExecutor.triggerComponentEvent(e,"elementClick",{msg:"这是测试参数"})}),(c=this.instance)==null||c.on("legend-item:click",(...d)=>{BPExecutor.triggerComponentEvent(e,"legendClick",{msg:"这是测试参数"})}),(u=this.instance)==null||u.on("legend-item-name:click",(...d)=>{BPExecutor.triggerComponentEvent(e,"elementNameClick",{msg:"这是测试参数"})}),(f=this.instance)==null||f.on("axis-label:click",(...d)=>{BPExecutor.triggerComponentEvent(e,"axisLabelClick",{msg:"这是测试参数"})})}commonCreate(e,a,o){var s,l;this.config=o,this.container=e,this.instance=new a(e,(s=this.config)==null?void 0:s.style),(l=this.instance)==null||l.render(),this.registerEvent()}commonUpdate(e,a,o){var s,l;this.config=ObjectUtil.merge(this.config,e),o=o||{reRender:!0},o.reRender&&((l=this.instance)==null||l.update((s=this.config)==null?void 0:s.style))}}const __vite_glob_0_0=Object.freeze(Object.defineProperty({__proto__:null,AntdBaseDesignerController},Symbol.toStringTag,{value:"Module"}));class AbstractDefinition{getEventList(){return[{id:"loaded",name:"组件加载完成时"}]}getActionList(){return[{name:"显示",id:"show",handler:r=>{r.container.style.display="block"}},{name:"隐藏",id:"hide",handler:r=>{r.container.style.display="none"}},{name:"更新组件配置",id:"updateConfig",handler:(r,e)=>{r.update(e)}}]}getCategorize(){return null}getSubCategorize(){return null}}class AntdCommonDefinition extends AbstractDefinition{getEventList(){const r=super.getEventList();return r.push({id:"dataChange",name:"数据变更时"},{id:"globalClick",name:"点击整个组件时"},{id:"elementClick",name:"点击图形元素时"},{id:"legendClick",name:"点击图例时"},{id:"elementNameClick",name:"点击图例名称时"},{id:"axisLabelClick",name:"点击坐标文字时"}),r}getActionList(){return super.getActionList()}}const __vite_glob_0_1=Object.freeze(Object.defineProperty({__proto__:null,AntdCommonDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonUtil{static getDataFieldOptions(r){var s;const e=r.getConfig(),a=(s=e==null?void 0:e.data)==null?void 0:s.staticData,o=[];if(a&&a.length>=1){const l=a[0];Object.keys(l).forEach(c=>o.push({label:c,value:c}))}return o}}const __vite_glob_0_2=Object.freeze(Object.defineProperty({__proto__:null,default:AntdCommonUtil},Symbol.toStringTag,{value:"Module"})),getDefaultMenuList=()=>[{icon:AppstoreFilled$1,name:"基础",key:"base"},{icon:HighlightFilled$1,name:"样式",key:"style"},{icon:DatabaseFilled$1,name:"数据",key:"data"},{icon:InteractionFilled$1,name:"映射",key:"mapping"},{icon:SkinFilled$1,name:"主题",key:"theme"}];var extendStatics$7=function(n,r){return extendStatics$7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])},extendStatics$7(n,r)};function __extends$7(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");extendStatics$7(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var __assign$8=function(){return __assign$8=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$8.apply(this,arguments)};function __rest$1(n,r){var e={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&r.indexOf(a)<0&&(e[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)r.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(e[a[o]]=n[a[o]]);return e}function __awaiter(n,r,e,a){function o(s){return s instanceof e?s:new e(function(l){l(s)})}return new(e||(e=Promise))(function(s,l){function c(d){try{f(a.next(d))}catch(g){l(g)}}function u(d){try{f(a.throw(d))}catch(g){l(g)}}function f(d){d.done?s(d.value):o(d.value).then(c,u)}f((a=a.apply(n,r||[])).next())})}function __generator(n,r){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,o,s,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(d){return u([f,d])}}function u(f){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(e=0)),e;)try{if(a=1,o&&(s=f[0]&2?o.return:f[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,f[1])).done)return s;switch(o=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,o=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){e.label=f[1];break}if(f[0]===6&&e.label<s[1]){e.label=s[1],s=f;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(f);break}s[2]&&e.ops.pop(),e.trys.pop();continue}f=r.call(n,e)}catch(d){f=[6,d],o=0}finally{a=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function __values(n){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&n[r],a=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(n,r){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var a=e.call(n),o,s=[],l;try{for(;(r===void 0||r-- >0)&&!(o=a.next()).done;)s.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(l)throw l.error}}return s}function __spreadArrays$3(){for(var n=0,r=0,e=arguments.length;r<e;r++)n+=arguments[r].length;for(var a=Array(n),o=0,r=0;r<e;r++)for(var s=arguments[r],l=0,c=s.length;l<c;l++,o++)a[o]=s[l];return a}function __spreadArray$2(n,r,e){if(e||arguments.length===2)for(var a=0,o=r.length,s;a<o;a++)(s||!(a in r))&&(s||(s=Array.prototype.slice.call(r,0,a)),s[a]=r[a]);return n.concat(s||Array.prototype.slice.call(r))}typeof SuppressedError=="function"&&SuppressedError;var isArrayLike=function(n){return n!==null&&typeof n!="function"&&isFinite(n.length)},contains=function(n,r){return isArrayLike(n)?n.indexOf(r)>-1:!1},filter=function(n,r){if(!isArrayLike(n))return n;for(var e=[],a=0;a<n.length;a++){var o=n[a];r(o,a)&&e.push(o)}return e},difference=function(n,r){return r===void 0&&(r=[]),filter(n,function(e){return!contains(r,e)})},toString$3={}.toString,isType$1=function(n,r){return toString$3.call(n)==="[object "+r+"]"};const isFunction$1=function(n){return isType$1(n,"Function")};var isNil=function(n){return n==null};const isArray$4=function(n){return Array.isArray?Array.isArray(n):isType$1(n,"Array")},isObject$1=function(n){var r=typeof n;return n!==null&&r==="object"||r==="function"};function each$1(n,r){if(n){var e;if(isArray$4(n))for(var a=0,o=n.length;a<o&&(e=r(n[a],a),e!==!1);a++);else if(isObject$1(n)){for(var s in n)if(n.hasOwnProperty(s)&&(e=r(n[s],s),e===!1))break}}}var keys=Object.keys?function(n){return Object.keys(n)}:function(n){var r=[];return each$1(n,function(e,a){isFunction$1(n)&&a==="prototype"||r.push(a)}),r};function isMatch(n,r){var e=keys(r),a=e.length;if(isNil(n))return!a;for(var o=0;o<a;o+=1){var s=e[o];if(r[s]!==n[s]||!(s in n))return!1}return!0}var isObjectLike$1=function(n){return typeof n=="object"&&n!==null},isPlainObject$1=function(n){if(!isObjectLike$1(n)||!isType$1(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;for(var r=n;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r};function find$2(n,r){if(!isArray$4(n))return null;var e;if(isFunction$1(r)&&(e=r),isPlainObject$1(r)&&(e=function(o){return isMatch(o,r)}),e){for(var a=0;a<n.length;a+=1)if(e(n[a]))return n[a]}return null}function findIndex$1(n,r,e){e===void 0&&(e=0);for(var a=e;a<n.length;a++)if(r(n[a],a))return a;return-1}var firstValue=function(n,r){for(var e=null,a=0;a<n.length;a++){var o=n[a],s=o[r];if(!isNil(s)){isArray$4(s)?e=s[0]:e=s;break}}return e},flatten=function(n){if(!isArray$4(n))return[];for(var r=[],e=0;e<n.length;e++)r=r.concat(n[e]);return r};const max$2=function(n){if(isArray$4(n))return n.reduce(function(r,e){return Math.max(r,e)},n[0])},min$2=function(n){if(isArray$4(n))return n.reduce(function(r,e){return Math.min(r,e)},n[0])};var getRange=function(n){var r=n.filter(function(l){return!isNaN(l)});if(!r.length)return{min:0,max:0};if(isArray$4(n[0])){for(var e=[],a=0;a<n.length;a++)e=e.concat(n[a]);r=e}var o=max$2(r),s=min$2(r);return{min:s,max:o}},splice=Array.prototype.splice,pullAt=function n(r,e){if(!isArrayLike(r))return[];for(var a=r?e.length:0,o=a-1;a--;){var s=void 0,l=e[a];(a===o||l!==s)&&(s=l,splice.call(r,l,1))}return r},reduce=function(n,r,e){if(!isArray$4(n)&&!isPlainObject$1(n))return n;var a=e;return each$1(n,function(o,s){a=r(a,o,s)}),a},remove=function(n,r){var e=[];if(!isArrayLike(n))return e;for(var a=-1,o=[],s=n.length;++a<s;){var l=n[a];r(l,a,n)&&(e.push(l),o.push(a))}return pullAt(n,o),e};const isString$1=function(n){return isType$1(n,"String")};function sortBy(n,r){var e;if(isFunction$1(r))e=function(o,s){return r(o)-r(s)};else{var a=[];isString$1(r)?a.push(r):isArray$4(r)&&(a=r),e=function(o,s){for(var l=0;l<a.length;l+=1){var c=a[l];if(o[c]>s[c])return 1;if(o[c]<s[c])return-1}return 0}}return n.sort(e),n}function uniq$2(n,r){r===void 0&&(r=new Map);var e=[];if(Array.isArray(n))for(var a=0,o=n.length;a<o;a++){var s=n[a];r.has(s)||(e.push(s),r.set(s,!0))}return e}const valuesOfKey=function(n,r){for(var e=[],a={},o=0;o<n.length;o++){var s=n[o],l=s[r];if(!isNil(l)){isArray$4(l)||(l=[l]);for(var c=0;c<l.length;c++){var u=l[c];a[u]||(e.push(u),a[u]=!0)}}}return e};function head(n){if(isArrayLike(n))return n[0]}function last(n){if(isArrayLike(n)){var r=n;return r[r.length-1]}}var every=function(n,r){for(var e=0;e<n.length;e++)if(!r(n[e],e))return!1;return!0},some=function(n,r){for(var e=0;e<n.length;e++)if(r(n[e],e))return!0;return!1},hasOwnProperty$2=Object.prototype.hasOwnProperty;function groupBy(n,r){if(!r||!isArray$4(n))return{};for(var e={},a=isFunction$1(r)?r:function(c){return c[r]},o,s=0;s<n.length;s++){var l=n[s];o=a(l),hasOwnProperty$2.call(e,o)?e[o].push(l):e[o]=[l]}return e}function groupToMap(n,r){if(!r)return{0:n};if(!isFunction$1(r)){var e=isArray$4(r)?r:r.replace(/\s+/g,"").split("*");r=function(a){for(var o="_",s=0,l=e.length;s<l;s++)o+=a[e[s]]&&a[e[s]].toString();return o}}return groupBy(n,r)}const group$1=function(n,r){if(!r)return[n];var e=groupToMap(n,r),a=[];for(var o in e)a.push(e[o]);return a};var clamp=function(n,r,e){return n<r?r:n>e?e:n},fixedBase=function(n,r){var e=r.toString(),a=e.indexOf(".");if(a===-1)return Math.round(n);var o=e.substr(a+1).length;return o>20&&(o=20),parseFloat(n.toFixed(o))},isNumber$2=function(n){return isType$1(n,"Number")},PRECISION=1e-5;function isNumberEqual$1(n,r,e){return e===void 0&&(e=PRECISION),Math.abs(n-r)<e}const maxBy=function(n,r){if(isArray$4(n)){for(var e,a=-1/0,o=0;o<n.length;o++){var s=n[o],l=isFunction$1(r)?r(s):s[r];l>a&&(e=s,a=l)}return e}},minBy=function(n,r){if(isArray$4(n)){for(var e,a=1/0,o=0;o<n.length;o++){var s=n[o],l=isFunction$1(r)?r(s):s[r];l<a&&(e=s,a=l)}return e}};var mod$1=function(n,r){return(n%r+r)%r},RADIAN=Math.PI/180,toRadian=function(n){return RADIAN*n};const has=function(n,r){return n.hasOwnProperty(r)};var values=Object.values?function(n){return Object.values(n)}:function(n){var r=[];return each$1(n,function(e,a){isFunction$1(n)&&a==="prototype"||r.push(e)}),r};const toString$2=function(n){return isNil(n)?"":n.toString()};var lowerCase=function(n){return toString$2(n).toLowerCase()};function substitute(n,r){return!n||!r?n:n.replace(/\\?\{([^{}]+)\}/g,function(e,a){return e.charAt(0)==="\\"?e.slice(1):r[a]===void 0?"":r[a]})}var upperFirst=function(n){var r=toString$2(n);return r.charAt(0).toUpperCase()+r.substring(1)},toString$1={}.toString,getType=function(n){return toString$1.call(n).replace(/^\[object /,"").replace(/]$/,"")},isBoolean=function(n){return isType$1(n,"Boolean")},isDate=function(n){return isType$1(n,"Date")},isNull=function(n){return n===null},objectProto=Object.prototype,isPrototype=function(n){var r=n&&n.constructor,e=typeof r=="function"&&r.prototype||objectProto;return n===e},isUndefined$1=function(n){return n===void 0},isElement=function(n){return n instanceof Element||n instanceof HTMLDocument};function requestAnimationFrame$2(n){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return r(n)}function cancelAnimationFrame$2(n){var r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;r(n)}function _mix(n,r){for(var e in r)r.hasOwnProperty(e)&&e!=="constructor"&&r[e]!==void 0&&(n[e]=r[e])}function mix(n,r,e,a){return r&&_mix(n,r),e&&_mix(n,e),a&&_mix(n,a),n}var clone=function(n){if(typeof n!="object"||n===null)return n;var r;if(isArray$4(n)){r=[];for(var e=0,a=n.length;e<a;e++)typeof n[e]=="object"&&n[e]!=null?r[e]=clone(n[e]):r[e]=n[e]}else{r={};for(var o in n)typeof n[o]=="object"&&n[o]!=null?r[o]=clone(n[o]):r[o]=n[o]}return r};function debounce$1(n,r,e){var a;return function(){var o=this,s=arguments,l=function(){a=null,e||n.apply(o,s)},c=e&&!a;clearTimeout(a),a=setTimeout(l,r),c&&n.apply(o,s)}}const memoize=function(n,r){if(!isFunction$1(n))throw new TypeError("Expected a function");var e=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=r?r.apply(this,a):a[0],l=e.cache;if(l.has(s))return l.get(s);var c=n.apply(this,a);return l.set(s,c),c};return e.cache=new Map,e};var MAX_MIX_LEVEL$1=5;function _deepMix(n,r,e,a){e=e||0,a=a||MAX_MIX_LEVEL$1;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s!==null&&isPlainObject$1(s)?(isPlainObject$1(n[o])||(n[o]={}),e<a?_deepMix(n[o],s,e+1,a):n[o]=r[o]):isArray$4(s)?(n[o]=[],n[o]=n[o].concat(s)):s!==void 0&&(n[o]=s)}}var deepMix=function(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var a=0;a<r.length;a+=1)_deepMix(n,r[a]);return n},indexOf=function(n,r){if(!isArrayLike(n))return-1;var e=Array.prototype.indexOf;if(e)return e.call(n,r);for(var a=-1,o=0;o<n.length;o++)if(n[o]===r){a=o;break}return a},hasOwnProperty$1=Object.prototype.hasOwnProperty;function isEmpty(n){if(isNil(n))return!0;if(isArrayLike(n))return!n.length;var r=getType(n);if(r==="Map"||r==="Set")return!n.size;if(isPrototype(n))return!Object.keys(n).length;for(var e in n)if(hasOwnProperty$1.call(n,e))return!1;return!0}var isEqual$1=function(n,r){if(n===r)return!0;if(!n||!r||isString$1(n)||isString$1(r))return!1;if(isArrayLike(n)||isArrayLike(r)){if(n.length!==r.length)return!1;for(var e=!0,a=0;a<n.length&&(e=isEqual$1(n[a],r[a]),!!e);a++);return e}if(isObjectLike$1(n)||isObjectLike$1(r)){var o=Object.keys(n),s=Object.keys(r);if(o.length!==s.length)return!1;for(var e=!0,a=0;a<o.length&&(e=isEqual$1(n[o[a]],r[o[a]]),!!e);a++);return e}return!1},map$2=function(n,r){if(!isArrayLike(n))return n;for(var e=[],a=0;a<n.length;a++){var o=n[a];e.push(r(o,a))}return e},identity=function(n){return n};const mapValues=function(n,r){r===void 0&&(r=identity);var e={};return isObject$1(n)&&!isNil(n)&&Object.keys(n).forEach(function(a){e[a]=r(n[a],a)}),e},get=function(n,r,e){for(var a=0,o=isString$1(r)?r.split("."):r;n&&a<o.length;)n=n[o[a++]];return n===void 0||a<o.length?e:n},set=function(n,r,e){var a=n,o=isString$1(r)?r.split("."):r;return o.forEach(function(s,l){l<o.length-1?(isObject$1(a[s])||(a[s]=isNumber$2(o[l+1])?[]:{}),a=a[s]):a[s]=e}),n};var hasOwnProperty=Object.prototype.hasOwnProperty;const pick$1=function(n,r){if(n===null||!isPlainObject$1(n))return{};var e={};return each$1(r,function(a){hasOwnProperty.call(n,a)&&(e[a]=n[a])}),e},omit$1=function(n,r){return reduce(n,function(e,a,o){return r.includes(o)||(e[o]=a),e},{})},throttle$1=function(n,r,e){var a,o,s,l,c=0;e||(e={});var u=function(){c=e.leading===!1?0:Date.now(),a=null,l=n.apply(o,s),a||(o=s=null)},f=function(){var d=Date.now();!c&&e.leading===!1&&(c=d);var g=r-(d-c);return o=this,s=arguments,g<=0||g>r?(a&&(clearTimeout(a),a=null),c=d,l=n.apply(o,s),a||(o=s=null)):!a&&e.trailing!==!1&&(a=setTimeout(u,g)),l};return f.cancel=function(){clearTimeout(a),c=0,a=o=s=null},f},toArray=function(n){return isArrayLike(n)?Array.prototype.slice.call(n):[]};var map$1={};const uniqueId=function(n){return n=n||"g",map$1[n]?map$1[n]+=1:map$1[n]=1,n+map$1[n]},noop=function(){};function size(n){return isNil(n)?0:isArrayLike(n)?n.length:Object.keys(n).length}var ctx$2;const measureTextWidth$1=memoize(function(n,r){r===void 0&&(r={});var e=r.fontSize,a=r.fontFamily,o=r.fontWeight,s=r.fontStyle,l=r.fontVariant;return ctx$2||(ctx$2=document.createElement("canvas").getContext("2d")),ctx$2.font=[s,l,o,e+"px",a].join(" "),ctx$2.measureText(isString$1(n)?n:"").width},function(n,r){return r===void 0&&(r={}),__spreadArrays$3([n],values(r)).join("")}),getEllipsisText$1=function(n,r,e,a){a===void 0&&(a="...");var o=16,s=measureTextWidth$1(a,e),l=isString$1(n)?n:toString$2(n),c=r,u=[],f,d;if(measureTextWidth$1(n,e)<=r)return n;for(;f=l.substr(0,o),d=measureTextWidth$1(f,e),!(d+s>c&&d>c);)if(u.push(f),c-=d,l=l.substr(o),!l)return u.join("");for(;f=l.substr(0,1),d=measureTextWidth$1(f,e),!(d+s>c);)if(u.push(f),c-=d,l=l.substr(1),!l)return u.join("");return""+u.join("")+a};var default_1=function(){function n(){this.map={}}return n.prototype.has=function(r){return this.map[r]!==void 0},n.prototype.get=function(r,e){var a=this.map[r];return a===void 0?e:a},n.prototype.set=function(r,e){this.map[r]=e},n.prototype.clear=function(){this.map={}},n.prototype.delete=function(r){delete this.map[r]},n.prototype.size=function(){return Object.keys(this.map).length},n}(),LAYER;(function(n){n.FORE="fore",n.MID="mid",n.BG="bg"})(LAYER||(LAYER={}));var DIRECTION;(function(n){n.TOP="top",n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.RIGHT="right",n.RIGHT_TOP="right-top",n.RIGHT_BOTTOM="right-bottom",n.LEFT="left",n.LEFT_TOP="left-top",n.LEFT_BOTTOM="left-bottom",n.BOTTOM="bottom",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n.RADIUS="radius",n.CIRCLE="circle",n.NONE="none"})(DIRECTION||(DIRECTION={}));var COMPONENT_TYPE;(function(n){n.AXIS="axis",n.GRID="grid",n.LEGEND="legend",n.TOOLTIP="tooltip",n.ANNOTATION="annotation",n.SLIDER="slider",n.SCROLLBAR="scrollbar",n.OTHER="other"})(COMPONENT_TYPE||(COMPONENT_TYPE={}));var GROUP_Z_INDEX={FORE:3,MID:2,BG:1},VIEW_LIFE_CIRCLE;(function(n){n.BEFORE_RENDER="beforerender",n.AFTER_RENDER="afterrender",n.BEFORE_PAINT="beforepaint",n.AFTER_PAINT="afterpaint",n.BEFORE_CHANGE_DATA="beforechangedata",n.AFTER_CHANGE_DATA="afterchangedata",n.BEFORE_CLEAR="beforeclear",n.AFTER_CLEAR="afterclear",n.BEFORE_DESTROY="beforedestroy",n.BEFORE_CHANGE_SIZE="beforechangesize",n.AFTER_CHANGE_SIZE="afterchangesize"})(VIEW_LIFE_CIRCLE||(VIEW_LIFE_CIRCLE={}));var GEOMETRY_LIFE_CIRCLE;(function(n){n.BEFORE_DRAW_ANIMATE="beforeanimate",n.AFTER_DRAW_ANIMATE="afteranimate",n.BEFORE_RENDER_LABEL="beforerenderlabel",n.AFTER_RENDER_LABEL="afterrenderlabel"})(GEOMETRY_LIFE_CIRCLE||(GEOMETRY_LIFE_CIRCLE={}));var PLOT_EVENTS;(function(n){n.MOUSE_ENTER="plot:mouseenter",n.MOUSE_DOWN="plot:mousedown",n.MOUSE_MOVE="plot:mousemove",n.MOUSE_UP="plot:mouseup",n.MOUSE_LEAVE="plot:mouseleave",n.TOUCH_START="plot:touchstart",n.TOUCH_MOVE="plot:touchmove",n.TOUCH_END="plot:touchend",n.TOUCH_CANCEL="plot:touchcancel",n.CLICK="plot:click",n.DBLCLICK="plot:dblclick",n.CONTEXTMENU="plot:contextmenu",n.LEAVE="plot:leave",n.ENTER="plot:enter"})(PLOT_EVENTS||(PLOT_EVENTS={}));var ELEMENT_STATE;(function(n){n.ACTIVE="active",n.INACTIVE="inactive",n.SELECTED="selected",n.DEFAULT="default"})(ELEMENT_STATE||(ELEMENT_STATE={}));var GROUP_ATTRS=["color","shape","size"],FIELD_ORIGIN="_origin",MIN_CHART_WIDTH=1,MIN_CHART_HEIGHT=1,COMPONENT_MAX_VIEW_PERCENTAGE=.25,ENGINES={};function getEngine(n){var r=ENGINES[n];if(!r)throw new Error("G engine '".concat(n,"' is not exist, please register it at first."));return r}function registerEngine(n,r){ENGINES[n]=r}function addEventListener(n,r,e){if(n){if(typeof n.addEventListener=="function")return n.addEventListener(r,e,!1),{remove:function(){n.removeEventListener(r,e,!1)}};if(typeof n.attachEvent=="function")return n.attachEvent("on"+r,e),{remove:function(){n.detachEvent("on"+r,e)}}}}var TABLE,TABLE_TR,FRAGMENT_REG,CONTAINERS;function initConstants(){TABLE=document.createElement("table"),TABLE_TR=document.createElement("tr"),FRAGMENT_REG=/^\s*<(\w+|!)[^>]*>/,CONTAINERS={tr:document.createElement("tbody"),tbody:TABLE,thead:TABLE,tfoot:TABLE,td:TABLE_TR,th:TABLE_TR,"*":document.createElement("div")}}function createDom$1(n){TABLE||initConstants();var r=FRAGMENT_REG.test(n)&&RegExp.$1;(!r||!(r in CONTAINERS))&&(r="*");var e=CONTAINERS[r];n=typeof n=="string"?n.replace(/(^\s*)|(\s*$)/g,""):n,e.innerHTML=""+n;var a=e.childNodes[0];return a&&e.contains(a)&&e.removeChild(a),a}function getStyle$1(n,r,e){var a;try{a=window.getComputedStyle?window.getComputedStyle(n,null)[r]:n.style[r]}catch{}finally{a=a===void 0?e:a}return a}function getHeight$1(n,r){var e=getStyle$1(n,"height",r);return e==="auto"&&(e=n.offsetHeight),parseFloat(e)}function getOuterHeight(n,r){var e=getHeight$1(n,r),a=parseFloat(getStyle$1(n,"borderTopWidth"))||0,o=parseFloat(getStyle$1(n,"paddingTop"))||0,s=parseFloat(getStyle$1(n,"paddingBottom"))||0,l=parseFloat(getStyle$1(n,"borderBottomWidth"))||0,c=parseFloat(getStyle$1(n,"marginTop"))||0,u=parseFloat(getStyle$1(n,"marginBottom"))||0;return e+a+l+o+s+c+u}function getHeight(n,r){var e=getStyle$1(n,"width",r);return e==="auto"&&(e=n.offsetWidth),parseFloat(e)}function getOuterWidth(n,r){var e=getHeight(n,r),a=parseFloat(getStyle$1(n,"borderLeftWidth"))||0,o=parseFloat(getStyle$1(n,"paddingLeft"))||0,s=parseFloat(getStyle$1(n,"paddingRight"))||0,l=parseFloat(getStyle$1(n,"borderRightWidth"))||0,c=parseFloat(getStyle$1(n,"marginRight"))||0,u=parseFloat(getStyle$1(n,"marginLeft"))||0;return e+a+l+o+s+u+c}function modifyCSS(n,r){if(n)for(var e in r)r.hasOwnProperty(e)&&(n.style[e]=r[e]);return n}function getElementSize(n){var r=getComputedStyle(n);return{width:(n.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10),height:(n.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)}}function isNumber$1(n){return typeof n=="number"&&!isNaN(n)}function getChartSize(n,r,e,a){var o=e,s=a;if(r){var l=getElementSize(n);o=l.width?l.width:o,s=l.height?l.height:s}return{width:Math.max(isNumber$1(o)?o:MIN_CHART_WIDTH,MIN_CHART_WIDTH),height:Math.max(isNumber$1(s)?s:MIN_CHART_HEIGHT,MIN_CHART_HEIGHT)}}function removeDom(n){var r=n.parentNode;r&&r.removeChild(n)}var WILDCARD$1="*",EventEmitter$2=function(){function n(){this._events={}}return n.prototype.on=function(r,e,a){return this._events[r]||(this._events[r]=[]),this._events[r].push({callback:e,once:!!a}),this},n.prototype.once=function(r,e){return this.on(r,e,!0)},n.prototype.emit=function(r){for(var e=this,a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];var s=this._events[r]||[],l=this._events[WILDCARD$1]||[],c=function(u){for(var f=u.length,d=0;d<f;d++)if(u[d]){var g=u[d],v=g.callback,p=g.once;p&&(u.splice(d,1),u.length===0&&delete e._events[r],f--,d--),v.apply(e,a)}};c(s),c(l)},n.prototype.off=function(r,e){if(!r)this._events={};else if(!e)delete this._events[r];else{for(var a=this._events[r]||[],o=a.length,s=0;s<o;s++)a[s].callback===e&&(a.splice(s,1),o--,s--);a.length===0&&delete this._events[r]}return this},n.prototype.getEvents=function(){return this._events},n}(),Base$1=function(n){__extends$7(r,n);function r(e){var a=n.call(this)||this;a.destroyed=!1;var o=e.visible,s=o===void 0?!0:o;return a.visible=s,a}return r.prototype.show=function(){var e=this.visible;e||this.changeVisible(!0)},r.prototype.hide=function(){var e=this.visible;e&&this.changeVisible(!1)},r.prototype.destroy=function(){this.off(),this.destroyed=!0},r.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},r}(EventEmitter$2),SPACES$2=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND$2=new RegExp("([a-z])["+SPACES$2+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES$2+"]*,?["+SPACES$2+"]*)+)","ig"),PATH_VALUES$2=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES$2+"]*,?["+SPACES$2+"]*","ig"),parsePathString$2=function(n){if(!n)return null;if(isArray$4(n))return n;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(n).replace(PATH_COMMAND$2,function(a,o,s){var l=[],c=o.toLowerCase();if(s.replace(PATH_VALUES$2,function(u,f){f&&l.push(+f)}),c==="m"&&l.length>2&&(e.push([o].concat(l.splice(0,2))),c="l",o=o==="m"?"l":"L"),c==="o"&&l.length===1&&e.push([o,l[0]]),c==="r")e.push([o].concat(l));else for(;l.length>=r[c]&&(e.push([o].concat(l.splice(0,r[c]))),!!r[c]););return n}),e},catmullRomToBezier=function(n,r){for(var e=[],a=0,o=n.length;o-2*!r>a;a+=2){var s=[{x:+n[a-2],y:+n[a-1]},{x:+n[a],y:+n[a+1]},{x:+n[a+2],y:+n[a+3]},{x:+n[a+4],y:+n[a+5]}];r?a?o-4===a?s[3]={x:+n[0],y:+n[1]}:o-2===a&&(s[2]={x:+n[0],y:+n[1]},s[3]={x:+n[2],y:+n[3]}):s[0]={x:+n[o-2],y:+n[o-1]}:o-4===a?s[3]=s[2]:a||(s[0]={x:+n[a],y:+n[a+1]}),e.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return e},ellipsePath=function(n,r,e,a,o){var s=[];if(o===null&&a===null&&(a=e),n=+n,r=+r,e=+e,a=+a,o!==null){var l=Math.PI/180,c=n+e*Math.cos(-a*l),u=n+e*Math.cos(-o*l),f=r+e*Math.sin(-a*l),d=r+e*Math.sin(-o*l);s=[["M",c,f],["A",e,e,0,+(o-a>180),0,u,d]]}else s=[["M",n,r],["m",0,-a],["a",e,a,0,1,1,0,2*a],["a",e,a,0,1,1,0,-2*a],["z"]];return s},pathToAbsolute$1=function(n){if(n=parsePathString$2(n),!n||!n.length)return[["M",0,0]];var r=[],e=0,a=0,o=0,s=0,l=0,c,u;n[0][0]==="M"&&(e=+n[0][1],a=+n[0][2],o=e,s=a,l++,r[0]=["M",e,a]);for(var f=n.length===3&&n[0][0]==="M"&&n[1][0].toUpperCase()==="R"&&n[2][0].toUpperCase()==="Z",d=void 0,g=void 0,v=l,p=n.length;v<p;v++){if(r.push(d=[]),g=n[v],c=g[0],c!==c.toUpperCase())switch(d[0]=c.toUpperCase(),d[0]){case"A":d[1]=g[1],d[2]=g[2],d[3]=g[3],d[4]=g[4],d[5]=g[5],d[6]=+g[6]+e,d[7]=+g[7]+a;break;case"V":d[1]=+g[1]+a;break;case"H":d[1]=+g[1]+e;break;case"R":u=[e,a].concat(g.slice(1));for(var y=2,m=u.length;y<m;y++)u[y]=+u[y]+e,u[++y]=+u[y]+a;r.pop(),r=r.concat(catmullRomToBezier(u,f));break;case"O":r.pop(),u=ellipsePath(e,a,g[1],g[2]),u.push(u[0]),r=r.concat(u);break;case"U":r.pop(),r=r.concat(ellipsePath(e,a,g[1],g[2],g[3])),d=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+g[1]+e,s=+g[2]+a;break;default:for(var y=1,m=g.length;y<m;y++)d[y]=+g[y]+(y%2?e:a)}else if(c==="R")u=[e,a].concat(g.slice(1)),r.pop(),r=r.concat(catmullRomToBezier(u,f)),d=["R"].concat(g.slice(-2));else if(c==="O")r.pop(),u=ellipsePath(e,a,g[1],g[2]),u.push(u[0]),r=r.concat(u);else if(c==="U")r.pop(),r=r.concat(ellipsePath(e,a,g[1],g[2],g[3])),d=["U"].concat(r[r.length-1].slice(-2));else for(var x=0,A=g.length;x<A;x++)d[x]=g[x];if(c=c.toUpperCase(),c!=="O")switch(d[0]){case"Z":e=+o,a=+s;break;case"H":e=d[1];break;case"V":a=d[1];break;case"M":o=d[d.length-2],s=d[d.length-1];break;default:e=d[d.length-2],a=d[d.length-1]}}return r},l2c=function(n,r,e,a){return[n,r,e,a,e,a]},q2c=function(n,r,e,a,o,s){var l=.3333333333333333,c=2/3;return[l*n+c*e,l*r+c*a,l*o+c*e,l*s+c*a,o,s]},a2c=function(n,r,e,a,o,s,l,c,u,f){e===a&&(e+=1);var d=Math.PI*120/180,g=Math.PI/180*(+o||0),v=[],p,y,m,x,A,_=function(ot,st,ut){var ft=ot*Math.cos(ut)-st*Math.sin(ut),gt=ot*Math.sin(ut)+st*Math.cos(ut);return{x:ft,y:gt}};if(f)y=f[0],m=f[1],x=f[2],A=f[3];else{p=_(n,r,-g),n=p.x,r=p.y,p=_(c,u,-g),c=p.x,u=p.y,n===c&&r===u&&(c+=1,u+=1);var b=(n-c)/2,S=(r-u)/2,C=b*b/(e*e)+S*S/(a*a);C>1&&(C=Math.sqrt(C),e=C*e,a=C*a);var E=e*e,T=a*a,w=(s===l?-1:1)*Math.sqrt(Math.abs((E*T-E*S*S-T*b*b)/(E*S*S+T*b*b)));x=w*e*S/a+(n+c)/2,A=w*-a*b/e+(r+u)/2,y=Math.asin(((r-A)/a).toFixed(9)),m=Math.asin(((u-A)/a).toFixed(9)),y=n<x?Math.PI-y:y,m=c<x?Math.PI-m:m,y<0&&(y=Math.PI*2+y),m<0&&(m=Math.PI*2+m),l&&y>m&&(y=y-Math.PI*2),!l&&m>y&&(m=m-Math.PI*2)}var L=m-y;if(Math.abs(L)>d){var M=m,O=c,P=u;m=y+d*(l&&m>y?1:-1),c=x+e*Math.cos(m),u=A+a*Math.sin(m),v=a2c(c,u,e,a,o,0,l,O,P,[m,M,x,A])}L=m-y;var N=Math.cos(y),G=Math.sin(y),Y=Math.cos(m),F=Math.sin(m),z=Math.tan(L/4),W=4/3*e*z,j=4/3*a*z,U=[n,r],X=[n+W*G,r-j*N],tt=[c+W*F,u-j*Y],rt=[c,u];if(X[0]=2*U[0]-X[0],X[1]=2*U[1]-X[1],f)return[X,tt,rt].concat(v);v=[X,tt,rt].concat(v).join().split(",");for(var J=[],et=0,it=v.length;et<it;et++)J[et]=et%2?_(v[et-1],v[et],g).y:_(v[et],v[et+1],g).x;return J},pathToCurve=function(n,r){var e=pathToAbsolute$1(n),a=r&&pathToAbsolute$1(r),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],c=[],u="",f="",d,g=function(b,S,C){var E,T;if(!b)return["C",S.x,S.y,S.x,S.y,S.x,S.y];switch(!(b[0]in{T:1,Q:1})&&(S.qx=S.qy=null),b[0]){case"M":S.X=b[1],S.Y=b[2];break;case"A":b=["C"].concat(a2c.apply(0,[S.x,S.y].concat(b.slice(1))));break;case"S":C==="C"||C==="S"?(E=S.x*2-S.bx,T=S.y*2-S.by):(E=S.x,T=S.y),b=["C",E,T].concat(b.slice(1));break;case"T":C==="Q"||C==="T"?(S.qx=S.x*2-S.qx,S.qy=S.y*2-S.qy):(S.qx=S.x,S.qy=S.y),b=["C"].concat(q2c(S.x,S.y,S.qx,S.qy,b[1],b[2]));break;case"Q":S.qx=b[1],S.qy=b[2],b=["C"].concat(q2c(S.x,S.y,b[1],b[2],b[3],b[4]));break;case"L":b=["C"].concat(l2c(S.x,S.y,b[1],b[2]));break;case"H":b=["C"].concat(l2c(S.x,S.y,b[1],S.y));break;case"V":b=["C"].concat(l2c(S.x,S.y,S.x,b[1]));break;case"Z":b=["C"].concat(l2c(S.x,S.y,S.X,S.Y));break}return b},v=function(b,S){if(b[S].length>7){b[S].shift();for(var C=b[S];C.length;)l[S]="A",a&&(c[S]="A"),b.splice(S++,0,["C"].concat(C.splice(0,6)));b.splice(S,1),d=Math.max(e.length,a&&a.length||0)}},p=function(b,S,C,E,T){b&&S&&b[T][0]==="M"&&S[T][0]!=="M"&&(S.splice(T,0,["M",E.x,E.y]),C.bx=0,C.by=0,C.x=b[T][1],C.y=b[T][2],d=Math.max(e.length,a&&a.length||0))};d=Math.max(e.length,a&&a.length||0);for(var y=0;y<d;y++){e[y]&&(u=e[y][0]),u!=="C"&&(l[y]=u,y&&(f=l[y-1])),e[y]=g(e[y],o,f),l[y]!=="A"&&u==="C"&&(l[y]="C"),v(e,y),a&&(a[y]&&(u=a[y][0]),u!=="C"&&(c[y]=u,y&&(f=c[y-1])),a[y]=g(a[y],s,f),c[y]!=="A"&&u==="C"&&(c[y]="C"),v(a,y)),p(e,a,o,s,y),p(a,e,s,o,y);var m=e[y],x=a&&a[y],A=m.length,_=a&&x.length;o.x=m[A-2],o.y=m[A-1],o.bx=parseFloat(m[A-4])||o.x,o.by=parseFloat(m[A-3])||o.y,s.bx=a&&(parseFloat(x[_-4])||s.x),s.by=a&&(parseFloat(x[_-3])||s.y),s.x=a&&x[_-2],s.y=a&&x[_-1]}return a?[e,a]:e},p2s=/,?([a-z]),?/gi,parsePathArray=function(n){return n.join(",").replace(p2s,"$1")},base3=function(n,r,e,a,o){var s=-3*r+9*e-9*a+3*o,l=n*s+6*r-12*e+6*a;return n*l-3*r+3*e},bezlen=function(n,r,e,a,o,s,l,c,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,d=12,g=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],v=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,y=0;y<d;y++){var m=f*g[y]+f,x=base3(m,n,e,o,l),A=base3(m,r,a,s,c),_=x*x+A*A;p+=v[y]*Math.sqrt(_)}return f*p},curveDim=function(n,r,e,a,o,s,l,c){for(var u=[],f=[[],[]],d,g,v,p,y=0;y<2;++y){if(y===0?(g=6*n-12*e+6*o,d=-3*n+9*e-9*o+3*l,v=3*e-3*n):(g=6*r-12*a+6*s,d=-3*r+9*a-9*s+3*c,v=3*a-3*r),Math.abs(d)<1e-12){if(Math.abs(g)<1e-12)continue;p=-v/g,p>0&&p<1&&u.push(p);continue}var m=g*g-4*v*d,x=Math.sqrt(m);if(!(m<0)){var A=(-g+x)/(2*d);A>0&&A<1&&u.push(A);var _=(-g-x)/(2*d);_>0&&_<1&&u.push(_)}}for(var b=u.length,S=b,C;b--;)p=u[b],C=1-p,f[0][b]=C*C*C*n+3*C*C*p*e+3*C*p*p*o+p*p*p*l,f[1][b]=C*C*C*r+3*C*C*p*a+3*C*p*p*s+p*p*p*c;return f[0][S]=n,f[1][S]=r,f[0][S+1]=l,f[1][S+1]=c,f[0].length=f[1].length=S+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},intersect$1=function(n,r,e,a,o,s,l,c){if(!(Math.max(n,e)<Math.min(o,l)||Math.min(n,e)>Math.max(o,l)||Math.max(r,a)<Math.min(s,c)||Math.min(r,a)>Math.max(s,c))){var u=(n*a-r*e)*(o-l)-(n-e)*(o*c-s*l),f=(n*a-r*e)*(s-c)-(r-a)*(o*c-s*l),d=(n-e)*(s-c)-(r-a)*(o-l);if(d){var g=u/d,v=f/d,p=+g.toFixed(2),y=+v.toFixed(2);if(!(p<+Math.min(n,e).toFixed(2)||p>+Math.max(n,e).toFixed(2)||p<+Math.min(o,l).toFixed(2)||p>+Math.max(o,l).toFixed(2)||y<+Math.min(r,a).toFixed(2)||y>+Math.max(r,a).toFixed(2)||y<+Math.min(s,c).toFixed(2)||y>+Math.max(s,c).toFixed(2)))return{x:g,y:v}}}},isPointInsideBBox=function(n,r,e){return r>=n.x&&r<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},rectPath=function(n,r,e,a,o){if(o)return[["M",+n+ +o,r],["l",e-o*2,0],["a",o,o,0,0,1,o,o],["l",0,a-o*2],["a",o,o,0,0,1,-o,o],["l",o*2-e,0],["a",o,o,0,0,1,-o,-o],["l",0,o*2-a],["a",o,o,0,0,1,o,-o],["z"]];var s=[["M",n,r],["l",e,0],["l",0,a],["l",-e,0],["z"]];return s.parsePathArray=parsePathArray,s},box=function(n,r,e,a){return n===null&&(n=r=e=a=0),r===null&&(r=n.y,e=n.width,a=n.height,n=n.x),{x:n,y:r,width:e,w:e,height:a,h:a,x2:n+e,y2:r+a,cx:n+e/2,cy:r+a/2,r1:Math.min(e,a)/2,r2:Math.max(e,a)/2,r0:Math.sqrt(e*e+a*a)/2,path:rectPath(n,r,e,a),vb:[n,r,e,a].join(" ")}},isBBoxIntersect=function(n,r){return n=box(n),r=box(r),isPointInsideBBox(r,n.x,n.y)||isPointInsideBBox(r,n.x2,n.y)||isPointInsideBBox(r,n.x,n.y2)||isPointInsideBBox(r,n.x2,n.y2)||isPointInsideBBox(n,r.x,r.y)||isPointInsideBBox(n,r.x2,r.y)||isPointInsideBBox(n,r.x,r.y2)||isPointInsideBBox(n,r.x2,r.y2)||(n.x<r.x2&&n.x>r.x||r.x<n.x2&&r.x>n.x)&&(n.y<r.y2&&n.y>r.y||r.y<n.y2&&r.y>n.y)},bezierBBox=function(n,r,e,a,o,s,l,c){isArray$4(n)||(n=[n,r,e,a,o,s,l,c]);var u=curveDim.apply(null,n);return box(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},findDotsAtSegment=function(n,r,e,a,o,s,l,c,u){var f=1-u,d=Math.pow(f,3),g=Math.pow(f,2),v=u*u,p=v*u,y=d*n+g*3*u*e+f*3*u*u*o+p*l,m=d*r+g*3*u*a+f*3*u*u*s+p*c,x=n+2*u*(e-n)+v*(o-2*e+n),A=r+2*u*(a-r)+v*(s-2*a+r),_=e+2*u*(o-e)+v*(l-2*o+e),b=a+2*u*(s-a)+v*(c-2*s+a),S=f*n+u*e,C=f*r+u*a,E=f*o+u*l,T=f*s+u*c,w=90-Math.atan2(x-_,A-b)*180/Math.PI;return{x:y,y:m,m:{x,y:A},n:{x:_,y:b},start:{x:S,y:C},end:{x:E,y:T},alpha:w}},interHelper=function(n,r,e){var a=bezierBBox(n),o=bezierBBox(r);if(!isBBoxIntersect(a,o))return e?0:[];for(var s=bezlen.apply(0,n),l=bezlen.apply(0,r),c=~~(s/8),u=~~(l/8),f=[],d=[],g={},v=e?0:[],p=0;p<c+1;p++){var y=findDotsAtSegment.apply(0,n.concat(p/c));f.push({x:y.x,y:y.y,t:p/c})}for(var p=0;p<u+1;p++){var y=findDotsAtSegment.apply(0,r.concat(p/u));d.push({x:y.x,y:y.y,t:p/u})}for(var p=0;p<c;p++)for(var m=0;m<u;m++){var x=f[p],A=f[p+1],_=d[m],b=d[m+1],S=Math.abs(A.x-x.x)<.001?"y":"x",C=Math.abs(b.x-_.x)<.001?"y":"x",E=intersect$1(x.x,x.y,A.x,A.y,_.x,_.y,b.x,b.y);if(E){if(g[E.x.toFixed(4)]===E.y.toFixed(4))continue;g[E.x.toFixed(4)]=E.y.toFixed(4);var T=x.t+Math.abs((E[S]-x[S])/(A[S]-x[S]))*(A.t-x.t),w=_.t+Math.abs((E[C]-_[C])/(b[C]-_[C]))*(b.t-_.t);T>=0&&T<=1&&w>=0&&w<=1&&(e?v+=1:v.push({x:E.x,y:E.y,t1:T,t2:w}))}}return v},interPathHelper=function(n,r,e){n=pathToCurve(n),r=pathToCurve(r);for(var a,o,s,l,c,u,f,d,g,v,p=e?0:[],y=0,m=n.length;y<m;y++){var x=n[y];if(x[0]==="M")a=c=x[1],o=u=x[2];else{x[0]==="C"?(g=[a,o].concat(x.slice(1)),a=g[6],o=g[7]):(g=[a,o,a,o,c,u,c,u],a=c,o=u);for(var A=0,_=r.length;A<_;A++){var b=r[A];if(b[0]==="M")s=f=b[1],l=d=b[2];else{b[0]==="C"?(v=[s,l].concat(b.slice(1)),s=v[6],l=v[7]):(v=[s,l,s,l,f,d,f,d],s=f,l=d);var S=interHelper(g,v,e);if(e)p+=S;else{for(var C=0,E=S.length;C<E;C++)S[C].segment1=y,S[C].segment2=A,S[C].bez1=g,S[C].bez2=v;p=p.concat(S)}}}}}return p},intersection=function(n,r){return interPathHelper(n,r)};function decasteljau(n,r){var e=[],a=[];function o(s,l){if(s.length===1)e.push(s[0]),a.push(s[0]);else{for(var c=[],u=0;u<s.length-1;u++)u===0&&e.push(s[0]),u===s.length-2&&a.push(s[u+1]),c[u]=[(1-l)*s[u][0]+l*s[u+1][0],(1-l)*s[u][1]+l*s[u+1][1]];o(c,l)}}return n.length&&o(n,r),{left:e,right:a.reverse()}}function splitCurve(n,r,e){var a=[[n[1],n[2]]];e=e||2;var o=[];r[0]==="A"?(a.push(r[6]),a.push(r[7])):r[0]==="C"?(a.push([r[1],r[2]]),a.push([r[3],r[4]]),a.push([r[5],r[6]])):r[0]==="S"||r[0]==="Q"?(a.push([r[1],r[2]]),a.push([r[3],r[4]])):a.push([r[1],r[2]]);for(var s=a,l=1/e,c=0;c<e-1;c++){var u=l/(1-l*c),f=decasteljau(s,u);o.push(f.left),s=f.right}o.push(s);var d=o.map(function(g){var v=[];return g.length===4&&(v.push("C"),v=v.concat(g[2])),g.length>=3&&(g.length===3&&v.push("Q"),v=v.concat(g[1])),g.length===2&&v.push("L"),v=v.concat(g[g.length-1]),v});return d}var splitSegment=function(n,r,e){if(e===1)return[[].concat(n)];var a=[];if(r[0]==="L"||r[0]==="C"||r[0]==="Q")a=a.concat(splitCurve(n,r,e));else{var o=[].concat(n);o[0]==="M"&&(o[0]="L");for(var s=0;s<=e-1;s++)a.push(o)}return a},fillPath=function(n,r){if(n.length===1)return n;var e=n.length-1,a=r.length-1,o=e/a,s=[];if(n.length===1&&n[0][0]==="M"){for(var l=0;l<a-e;l++)n.push(n[0]);return n}for(var l=0;l<a;l++){var c=Math.floor(o*l);s[c]=(s[c]||0)+1}var u=s.reduce(function(f,d,g){return g===e?f.concat(n[e]):f.concat(splitSegment(n[g],n[g+1],d))},[]);return u.unshift(n[0]),(r[a]==="Z"||r[a]==="z")&&u.push("Z"),u},isEqual=function(n,r){if(n.length!==r.length)return!1;var e=!0;return each$1(n,function(a,o){if(a!==r[o])return e=!1,!1}),e};function getMinDiff(n,r,e){var a=null,o=e;return r<o&&(o=r,a="add"),n<o&&(o=n,a="del"),{type:a,min:o}}var levenshteinDistance=function(n,r){var e=n.length,a=r.length,o,s,l=0;if(e===0||a===0)return null;for(var c=[],u=0;u<=e;u++)c[u]=[],c[u][0]={min:u};for(var f=0;f<=a;f++)c[0][f]={min:f};for(var u=1;u<=e;u++){o=n[u-1];for(var f=1;f<=a;f++){s=r[f-1],isEqual(o,s)?l=0:l=1;var d=c[u-1][f].min+1,g=c[u][f-1].min+1,v=c[u-1][f-1].min+l;c[u][f]=getMinDiff(d,g,v)}}return c},fillPathByDiff=function(n,r){var e=levenshteinDistance(n,r),a=n.length,o=r.length,s=[],l=1,c=1;if(e[a][o].min!==a){for(var u=1;u<=a;u++){var f=e[u][u].min;c=u;for(var d=l;d<=o;d++)e[u][d].min<f&&(f=e[u][d].min,c=d);l=c,e[u][l].type&&s.push({index:u-1,type:e[u][l].type})}for(var u=s.length-1;u>=0;u--)l=s[u].index,s[u].type==="add"?n.splice(l,0,[].concat(n[l])):n.splice(l,1)}a=n.length;var g=o-a;if(a<o)for(var u=0;u<g;u++)n[a-1][0]==="z"||n[a-1][0]==="Z"?n.splice(a-2,0,n[a-2]):n.push(n[a-1]),a+=1;return n};function _splitPoints(n,r,e){for(var a=[].concat(n),o,s=1/(e+1),l=_getSegmentPoints(r)[0],c=1;c<=e;c++)s*=c,o=Math.floor(n.length*s),o===0?a.unshift([l[0]*s+n[o][0]*(1-s),l[1]*s+n[o][1]*(1-s)]):a.splice(o,0,[l[0]*s+n[o][0]*(1-s),l[1]*s+n[o][1]*(1-s)]);return a}function _getSegmentPoints(n){var r=[];switch(n[0]){case"M":r.push([n[1],n[2]]);break;case"L":r.push([n[1],n[2]]);break;case"A":r.push([n[6],n[7]]);break;case"Q":r.push([n[3],n[4]]),r.push([n[1],n[2]]);break;case"T":r.push([n[1],n[2]]);break;case"C":r.push([n[5],n[6]]),r.push([n[1],n[2]]),r.push([n[3],n[4]]);break;case"S":r.push([n[3],n[4]]),r.push([n[1],n[2]]);break;case"H":r.push([n[1],n[1]]);break;case"V":r.push([n[1],n[1]]);break}return r}var formatPath=function(n,r){if(n.length<=1)return n;for(var e,a=0;a<r.length;a++)if(n[a][0]!==r[a][0])switch(e=_getSegmentPoints(n[a]),r[a][0]){case"M":n[a]=["M"].concat(e[0]);break;case"L":n[a]=["L"].concat(e[0]);break;case"A":n[a]=[].concat(r[a]),n[a][6]=e[0][0],n[a][7]=e[0][1];break;case"Q":if(e.length<2)if(a>0)e=_splitPoints(e,n[a-1],1);else{n[a]=r[a];break}n[a]=["Q"].concat(e.reduce(function(o,s){return o.concat(s)},[]));break;case"T":n[a]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(a>0)e=_splitPoints(e,n[a-1],2);else{n[a]=r[a];break}n[a]=["C"].concat(e.reduce(function(o,s){return o.concat(s)},[]));break;case"S":if(e.length<2)if(a>0)e=_splitPoints(e,n[a-1],1);else{n[a]=r[a];break}n[a]=["S"].concat(e.reduce(function(o,s){return o.concat(s)},[]));break;default:n[a]=r[a]}return n};const PathUtil$1=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier,fillPath,fillPathByDiff,formatPath,intersection,parsePathArray,parsePathString:parsePathString$2,pathToAbsolute:pathToAbsolute$1,pathToCurve,rectPath},Symbol.toStringTag,{value:"Module"}));var GraphEvent=function(){function n(r,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=r,this.name=r,this.originalEvent=e,this.timeStamp=e.timeStamp}return n.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n.prototype.toString=function(){var r=this.type;return"[Event (type="+r+")]"},n.prototype.save=function(){},n.prototype.restore=function(){},n}();function removeFromArray(n,r){var e=n.indexOf(r);e!==-1&&n.splice(e,1)}var isBrowser=typeof window<"u"&&typeof window.document<"u";function isParent(n,r){if(n.isCanvas())return!0;for(var e=r.getParent(),a=!1;e;){if(e===n){a=!0;break}e=e.getParent()}return a}function isAllowCapture(n){return n.cfg.visible&&n.cfg.capture}var Base=function(n){__extends$7(r,n);function r(e){var a=n.call(this)||this;a.destroyed=!1;var o=a.getDefaultCfg();return a.cfg=mix(o,e),a}return r.prototype.getDefaultCfg=function(){return{}},r.prototype.get=function(e){return this.cfg[e]},r.prototype.set=function(e,a){this.cfg[e]=a},r.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},r}(EventEmitter$2),__spreadArray$1=function(n,r,e){if(e||arguments.length===2)for(var a=0,o=r.length,s;a<o;a++)(s||!(a in r))&&(s||(s=Array.prototype.slice.call(r,0,a)),s[a]=r[a]);return n.concat(s||Array.prototype.slice.call(r))},BrowserInfo=function(){function n(r,e,a){this.name=r,this.version=e,this.os=a,this.type="browser"}return n}(),NodeInfo=function(){function n(r){this.version=r,this.type="node",this.name="node",this.os=process.platform}return n}(),SearchBotDeviceInfo=function(){function n(r,e,a,o){this.name=r,this.version=e,this.os=a,this.bot=o,this.type="bot-device"}return n}(),BotInfo=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),ReactNativeInfo=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(n){return n?parseUserAgent(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(n){return n!==""&&userAgentRules.reduce(function(r,e){var a=e[0],o=e[1];if(r)return r;var s=o.exec(n);return!!s&&[a,s]},!1)}function parseUserAgent(n){var r=matchUserAgent(n);if(!r)return null;var e=r[0],a=r[1];if(e==="searchbot")return new BotInfo;var o=a[1]&&a[1].split(".").join("_").split("_").slice(0,3);o?o.length<REQUIRED_VERSION_PARTS&&(o=__spreadArray$1(__spreadArray$1([],o,!0),createVersionParts(REQUIRED_VERSION_PARTS-o.length),!0)):o=[];var s=o.join("."),l=detectOS(n),c=SEARCHBOT_OS_REGEX.exec(n);return c&&c[1]?new SearchBotDeviceInfo(e,s,l,c[1]):new BrowserInfo(e,s,l)}function detectOS(n){for(var r=0,e=operatingSystemRules.length;r<e;r++){var a=operatingSystemRules[r],o=a[0],s=a[1],l=s.exec(n);if(l)return o}return null}function getNodeVersion(){var n=typeof process<"u"&&process.version;return n?new NodeInfo(process.version.slice(1)):null}function createVersionParts(n){for(var r=[],e=0;e<n;e++)r.push("0");return r}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,r=arguments.length;r--;)n+=arguments[r]*arguments[r];return Math.sqrt(n)});function invert$2(n,r){var e=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],u=r[6],f=r[7],d=r[8],g=d*l-c*f,v=-d*s+c*u,p=f*s-l*u,y=e*g+a*v+o*p;return y?(y=1/y,n[0]=g*y,n[1]=(-d*a+o*f)*y,n[2]=(c*a-o*l)*y,n[3]=v*y,n[4]=(d*e-o*u)*y,n[5]=(-c*e+o*s)*y,n[6]=p*y,n[7]=(-f*e+a*u)*y,n[8]=(l*e-a*s)*y,n):null}function multiply$1(n,r,e){var a=r[0],o=r[1],s=r[2],l=r[3],c=r[4],u=r[5],f=r[6],d=r[7],g=r[8],v=e[0],p=e[1],y=e[2],m=e[3],x=e[4],A=e[5],_=e[6],b=e[7],S=e[8];return n[0]=v*a+p*l+y*f,n[1]=v*o+p*c+y*d,n[2]=v*s+p*u+y*g,n[3]=m*a+x*l+A*f,n[4]=m*o+x*c+A*d,n[5]=m*s+x*u+A*g,n[6]=_*a+b*l+S*f,n[7]=_*o+b*c+S*d,n[8]=_*s+b*u+S*g,n}function fromTranslation$1(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=r[0],n[7]=r[1],n[8]=1,n}function fromRotation(n,r){var e=Math.sin(r),a=Math.cos(r);return n[0]=a,n[1]=e,n[2]=0,n[3]=-e,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function fromScaling(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=r[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function create$1(){var n=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function transformMat3$1(n,r,e){var a=r[0],o=r[1],s=r[2];return n[0]=a*e[0]+o*e[3]+s*e[6],n[1]=a*e[1]+o*e[4]+s*e[7],n[2]=a*e[2]+o*e[5]+s*e[8],n}(function(){var n=create$1();return function(r,e,a,o,s,l){var c,u;for(e||(e=3),a||(a=0),o?u=Math.min(o*e+a,r.length):u=r.length,c=a;c<u;c+=e)n[0]=r[c],n[1]=r[c+1],n[2]=r[c+2],s(n,n,l),r[c]=n[0],r[c+1]=n[1],r[c+2]=n[2];return r}})();function create(){var n=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0),n}function add$1(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n}function subtract(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n}function min$1(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n}function max$1(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n}function scale$3(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n}function distance$6(n,r){var e=r[0]-n[0],a=r[1]-n[1];return Math.hypot(e,a)}function length(n){var r=n[0],e=n[1];return Math.hypot(r,e)}function normalize(n,r){var e=r[0],a=r[1],o=e*e+a*a;return o>0&&(o=1/Math.sqrt(o)),n[0]=r[0]*o,n[1]=r[1]*o,n}function dot$3(n,r){return n[0]*r[0]+n[1]*r[1]}function transformMat3(n,r,e){var a=r[0],o=r[1];return n[0]=e[0]*a+e[3]*o+e[6],n[1]=e[1]*a+e[4]*o+e[7],n}function angle$1(n,r){var e=n[0],a=n[1],o=r[0],s=r[1],l=Math.sqrt(e*e+a*a)*Math.sqrt(o*o+s*s),c=l&&(e*o+a*s)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function exactEquals(n,r){return n[0]===r[0]&&n[1]===r[1]}var sub=subtract;(function(){var n=create();return function(r,e,a,o,s,l){var c,u;for(e||(e=2),a||(a=0),o?u=Math.min(o*e+a,r.length):u=r.length,c=a;c<u;c+=e)n[0]=r[c],n[1]=r[c+1],s(n,n,l),r[c]=n[0],r[c+1]=n[1];return r}})();function leftTranslate(n,r,e){var a=[0,0,0,0,0,0,0,0,0];return fromTranslation$1(a,e),multiply$1(n,a,r)}function leftRotate(n,r,e){var a=[0,0,0,0,0,0,0,0,0];return fromRotation(a,e),multiply$1(n,a,r)}function leftScale(n,r,e){var a=[0,0,0,0,0,0,0,0,0];return fromScaling(a,e),multiply$1(n,a,r)}function leftMultiply(n,r,e){return multiply$1(n,e,r)}function transform$6(n,r){for(var e=n?[].concat(n):[1,0,0,0,1,0,0,0,1],a=0,o=r.length;a<o;a++){var s=r[a];switch(s[0]){case"t":leftTranslate(e,e,[s[1],s[2]]);break;case"s":leftScale(e,e,[s[1],s[2]]);break;case"r":leftRotate(e,e,s[1]);break;case"m":leftMultiply(e,e,s[1]);break}}return e}function direction(n,r){return n[0]*r[1]-r[0]*n[1]}function angleTo(n,r,e){var a=angle$1(n,r),o=direction(n,r)>=0;return e?o?Math.PI*2-a:a:o?a:Math.PI*2-a}function multiplyMatrix(n,r){var e=[],a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],f=n[6],d=n[7],g=n[8],v=r[0],p=r[1],y=r[2],m=r[3],x=r[4],A=r[5],_=r[6],b=r[7],S=r[8];return e[0]=v*a+p*l+y*f,e[1]=v*o+p*c+y*d,e[2]=v*s+p*u+y*g,e[3]=m*a+x*l+A*f,e[4]=m*o+x*c+A*d,e[5]=m*s+x*u+A*g,e[6]=_*a+b*l+S*f,e[7]=_*o+b*c+S*d,e[8]=_*s+b*u+S*g,e}function multiplyVec2$1(n,r){var e=[],a=r[0],o=r[1];return e[0]=n[0]*a+n[3]*o+n[6],e[1]=n[1]*a+n[4]*o+n[7],e}function invert$1(n){var r=[],e=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],d=n[8],g=d*l-c*f,v=-d*s+c*u,p=f*s-l*u,y=e*g+a*v+o*p;return y?(y=1/y,r[0]=g*y,r[1]=(-d*a+o*f)*y,r[2]=(c*a-o*l)*y,r[3]=v*y,r[4]=(d*e-o*u)*y,r[5]=(-c*e+o*s)*y,r[6]=p*y,r[7]=(-f*e+a*u)*y,r[8]=(l*e-a*s)*y,r):null}var transform$5=transform$6,MATRIX="matrix",CLONE_CFGS=["zIndex","capture","visible","type"],RESERVED_PORPS=["repeat"],DELEGATION_SPLIT=":",WILDCARD="*";function _cloneArrayAttr(n){for(var r=[],e=0;e<n.length;e++)isArray$4(n[e])?r.push([].concat(n[e])):r.push(n[e]);return r}function getFormatFromAttrs(n,r){var e={},a=r.attrs;for(var o in n)e[o]=a[o];return e}function getFormatToAttrs(n,r){var e={},a=r.attr();return each$1(n,function(o,s){RESERVED_PORPS.indexOf(s)===-1&&!isEqual$1(a[s],o)&&(e[s]=o)}),e}function checkExistedAttrs(n,r){if(r.onFrame)return n;var e=r.startTime,a=r.delay,o=r.duration,s=Object.prototype.hasOwnProperty;return each$1(n,function(l){e+a<l.startTime+l.delay+l.duration&&o>l.delay&&each$1(r.toAttrs,function(c,u){s.call(l.toAttrs,u)&&(delete l.toAttrs[u],delete l.fromAttrs[u])})}),n}var Element$2=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.attrs={};var o=a.getDefaultAttrs();return mix(o,e.attrs),a.attrs=o,a.initAttrs(o),a.initAnimate(),a}return r.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},r.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},r.prototype.onCanvasChange=function(e){},r.prototype.initAttrs=function(e){},r.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},r.prototype.isGroup=function(){return!1},r.prototype.getParent=function(){return this.get("parent")},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.attr=function(){for(var e,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=a[0],l=a[1];if(!s)return this.attrs;if(isObject$1(s)){for(var c in s)this.setAttr(c,s[c]);return this.afterAttrsChange(s),this}return a.length===2?(this.setAttr(s,l),this.afterAttrsChange((e={},e[s]=l,e)),this):this.attrs[s]},r.prototype.isClipped=function(e,a){var o=this.getClip();return o&&!o.isHit(e,a)},r.prototype.setAttr=function(e,a){var o=this.attrs[e];o!==a&&(this.attrs[e]=a,this.onAttrChange(e,a,o))},r.prototype.onAttrChange=function(e,a,o){e==="matrix"&&this.set("totalMatrix",null)},r.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var a=this.cfg.applyTo;a&&a.onCanvasChange("clip")}else this.onCanvasChange("attr")},r.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},r.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},r.prototype.setZIndex=function(e){this.set("zIndex",e);var a=this.getParent();return a&&a.sort(),this},r.prototype.toFront=function(){var e=this.getParent();if(e){var a=e.getChildren();this.get("el");var o=a.indexOf(this);a.splice(o,1),a.push(this),this.onCanvasChange("zIndex")}},r.prototype.toBack=function(){var e=this.getParent();if(e){var a=e.getChildren();this.get("el");var o=a.indexOf(this);a.splice(o,1),a.unshift(this),this.onCanvasChange("zIndex")}},r.prototype.remove=function(e){e===void 0&&(e=!0);var a=this.getParent();a?(removeFromArray(a.getChildren(),this),a.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},r.prototype.resetMatrix=function(){this.attr(MATRIX,this.getDefaultMatrix()),this.onCanvasChange("matrix")},r.prototype.getMatrix=function(){return this.attr(MATRIX)},r.prototype.setMatrix=function(e){this.attr(MATRIX,e),this.onCanvasChange("matrix")},r.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var a=this.attr("matrix"),o=this.cfg.parentMatrix;o&&a?e=multiplyMatrix(o,a):e=a||o,this.set("totalMatrix",e)}return e},r.prototype.applyMatrix=function(e){var a=this.attr("matrix"),o=null;e&&a?o=multiplyMatrix(e,a):o=a||e,this.set("totalMatrix",o),this.set("parentMatrix",e)},r.prototype.getDefaultMatrix=function(){return null},r.prototype.applyToMatrix=function(e){var a=this.attr("matrix");return a?multiplyVec2$1(a,e):e},r.prototype.invertFromMatrix=function(e){var a=this.attr("matrix");if(a){var o=invert$1(a);if(o)return multiplyVec2$1(o,e)}return e},r.prototype.setClip=function(e){var a=this.getCanvas(),o=null;if(e){var s=this.getShapeBase(),l=upperFirst(e.type),c=s[l];c&&(o=new c({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:a}))}return this.set("clipShape",o),this.onCanvasChange("clip"),o},r.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},r.prototype.clone=function(){var e=this,a=this.attrs,o={};each$1(a,function(c,u){isArray$4(a[u])?o[u]=_cloneArrayAttr(a[u]):o[u]=a[u]});var s=this.constructor,l=new s({attrs:o});return each$1(CLONE_CFGS,function(c){l.set(c,e.get(c))}),l},r.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},n.prototype.destroy.call(this))},r.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},r.prototype.animate=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var o=this.get("timeline");o||(o=this.get("canvas").get("timeline"),this.set("timeline",o));var s=this.get("animations")||[];o.timer||o.initTimer();var l=e[0],c=e[1],u=e[2],f=u===void 0?"easeLinear":u,d=e[3],g=d===void 0?noop:d,v=e[4],p=v===void 0?0:v,y,m,x,A,_;isFunction$1(l)?(y=l,l={}):isObject$1(l)&&l.onFrame&&(y=l.onFrame,m=l.repeat),isObject$1(c)?(_=c,c=_.duration,f=_.easing||"easeLinear",p=_.delay||0,m=_.repeat||m||!1,g=_.callback||noop,x=_.pauseCallback||noop,A=_.resumeCallback||noop):(isNumber$2(g)&&(p=g,g=null),isFunction$1(f)?(g=f,f="easeLinear"):f=f||"easeLinear");var b=getFormatToAttrs(l,this),S={fromAttrs:getFormatFromAttrs(b,this),toAttrs:b,duration:c,easing:f,repeat:m,callback:g,pauseCallback:x,resumeCallback:A,delay:p,startTime:o.getTime(),id:uniqueId(),onFrame:y,pathFormatted:!1};s.length>0?s=checkExistedAttrs(s,S):o.addAnimator(this),s.push(S),this.set("animations",s),this.set("_pause",{isPaused:!1})}},r.prototype.stopAnimate=function(e){var a=this;e===void 0&&(e=!0);var o=this.get("animations");each$1(o,function(s){e&&(s.onFrame?a.attr(s.onFrame(1)):a.attr(s.toAttrs)),s.callback&&s.callback()}),this.set("animating",!1),this.set("animations",[])},r.prototype.pauseAnimate=function(){var e=this.get("timeline"),a=this.get("animations"),o=e.getTime();return each$1(a,function(s){s._paused=!0,s._pauseTime=o,s.pauseCallback&&s.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:o}),this},r.prototype.resumeAnimate=function(){var e=this.get("timeline"),a=e.getTime(),o=this.get("animations"),s=this.get("_pause").pauseTime;return each$1(o,function(l){l.startTime=l.startTime+(a-s),l._paused=!1,l._pauseTime=null,l.resumeCallback&&l.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",o),this},r.prototype.emitDelegation=function(e,a){var o=this,s=a.propagationPath;this.getEvents();var l;e==="mouseenter"?l=a.fromShape:e==="mouseleave"&&(l=a.toShape);for(var c=function(g){var v=s[g],p=v.get("name");if(p){if((v.isGroup()||v.isCanvas&&v.isCanvas())&&l&&isParent(v,l))return"break";isArray$4(p)?each$1(p,function(y){o.emitDelegateEvent(v,y,a)}):u.emitDelegateEvent(v,p,a)}},u=this,f=0;f<s.length;f++){var d=c(f);if(d==="break")break}},r.prototype.emitDelegateEvent=function(e,a,o){var s=this.getEvents(),l=a+DELEGATION_SPLIT+o.type;(s[l]||s[WILDCARD])&&(o.name=l,o.currentTarget=e,o.delegateTarget=this,o.delegateObject=e.get("delegateObject"),this.emit(l,o))},r.prototype.translate=function(e,a){e===void 0&&(e=0),a===void 0&&(a=0);var o=this.getMatrix(),s=transform$5(o,[["t",e,a]]);return this.setMatrix(s),this},r.prototype.move=function(e,a){var o=this.attr("x")||0,s=this.attr("y")||0;return this.translate(e-o,a-s),this},r.prototype.moveTo=function(e,a){return this.move(e,a)},r.prototype.scale=function(e,a){var o=this.getMatrix(),s=transform$5(o,[["s",e,a||e]]);return this.setMatrix(s),this},r.prototype.rotate=function(e){var a=this.getMatrix(),o=transform$5(a,[["r",e]]);return this.setMatrix(o),this},r.prototype.rotateAtStart=function(e){var a=this.attr(),o=a.x,s=a.y,l=this.getMatrix(),c=transform$5(l,[["t",-o,-s],["r",e],["t",o,s]]);return this.setMatrix(c),this},r.prototype.rotateAtPoint=function(e,a,o){var s=this.getMatrix(),l=transform$5(s,[["t",-e,-a],["r",o],["t",e,a]]);return this.setMatrix(l),this},r}(Base),SHAPE_MAP={},INDEX="_INDEX";function setCanvas(n,r){if(n.set("canvas",r),n.isGroup()){var e=n.get("children");e.length&&e.forEach(function(a){setCanvas(a,r)})}}function setTimeline(n,r){if(n.set("timeline",r),n.isGroup()){var e=n.get("children");e.length&&e.forEach(function(a){setTimeline(a,r)})}}function removeChild(n,r,e){e===void 0&&(e=!0),e?r.destroy():(r.set("parent",null),r.set("canvas",null)),removeFromArray(n.getChildren(),r)}function getComparer(n){return function(r,e){var a=n(r,e);return a===0?r[INDEX]-e[INDEX]:a}}var Container=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.isCanvas=function(){return!1},r.prototype.getBBox=function(){var e=1/0,a=-1/0,o=1/0,s=-1/0,l=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});l.length>0?each$1(l,function(u){var f=u.getBBox(),d=f.minX,g=f.maxX,v=f.minY,p=f.maxY;d<e&&(e=d),g>a&&(a=g),v<o&&(o=v),p>s&&(s=p)}):(e=0,a=0,o=0,s=0);var c={x:e,y:o,minX:e,minY:o,maxX:a,maxY:s,width:a-e,height:s-o};return c},r.prototype.getCanvasBBox=function(){var e=1/0,a=-1/0,o=1/0,s=-1/0,l=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});l.length>0?each$1(l,function(u){var f=u.getCanvasBBox(),d=f.minX,g=f.maxX,v=f.minY,p=f.maxY;d<e&&(e=d),g>a&&(a=g),v<o&&(o=v),p>s&&(s=p)}):(e=0,a=0,o=0,s=0);var c={x:e,y:o,minX:e,minY:o,maxX:a,maxY:s,width:a-e,height:s-o};return c},r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return e.children=[],e},r.prototype.onAttrChange=function(e,a,o){if(n.prototype.onAttrChange.call(this,e,a,o),e==="matrix"){var s=this.getTotalMatrix();this._applyChildrenMarix(s)}},r.prototype.applyMatrix=function(e){var a=this.getTotalMatrix();n.prototype.applyMatrix.call(this,e);var o=this.getTotalMatrix();o!==a&&this._applyChildrenMarix(o)},r.prototype._applyChildrenMarix=function(e){var a=this.getChildren();each$1(a,function(o){o.applyMatrix(e)})},r.prototype.addShape=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var o=e[0],s=e[1];isObject$1(o)?s=o:s.type=o;var l=SHAPE_MAP[s.type];l||(l=upperFirst(s.type),SHAPE_MAP[s.type]=l);var c=this.getShapeBase(),u=new c[l](s);return this.add(u),u},r.prototype.addGroup=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var o=e[0],s=e[1],l;if(isFunction$1(o))s?l=new o(s):l=new o({parent:this});else{var c=o||{},u=this.getGroupBase();l=new u(c)}return this.add(l),l},r.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},r.prototype.getShape=function(e,a,o){if(!isAllowCapture(this))return null;var s=this.getChildren(),l;if(this.isCanvas())l=this._findShape(s,e,a,o);else{var c=[e,a,1];c=this.invertFromMatrix(c),this.isClipped(c[0],c[1])||(l=this._findShape(s,c[0],c[1],o))}return l},r.prototype._findShape=function(e,a,o,s){for(var l=null,c=e.length-1;c>=0;c--){var u=e[c];if(isAllowCapture(u)&&(u.isGroup()?l=u.getShape(a,o,s):u.isHit(a,o)&&(l=u)),l)break}return l},r.prototype.add=function(e){var a=this.getCanvas(),o=this.getChildren(),s=this.get("timeline"),l=e.getParent();l&&removeChild(l,e,!1),e.set("parent",this),a&&setCanvas(e,a),s&&setTimeline(e,s),o.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},r.prototype._applyElementMatrix=function(e){var a=this.getTotalMatrix();a&&e.applyMatrix(a)},r.prototype.getChildren=function(){return this.get("children")},r.prototype.sort=function(){var e=this.getChildren();each$1(e,function(a,o){return a[INDEX]=o,a}),e.sort(getComparer(function(a,o){return a.get("zIndex")-o.get("zIndex")})),this.onCanvasChange("sort")},r.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),a=e.length-1;a>=0;a--)e[a].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},r.prototype.destroy=function(){this.get("destroyed")||(this.clear(),n.prototype.destroy.call(this))},r.prototype.getFirst=function(){return this.getChildByIndex(0)},r.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},r.prototype.getChildByIndex=function(e){var a=this.getChildren();return a[e]},r.prototype.getCount=function(){var e=this.getChildren();return e.length},r.prototype.contain=function(e){var a=this.getChildren();return a.indexOf(e)>-1},r.prototype.removeChild=function(e,a){a===void 0&&(a=!0),this.contain(e)&&e.remove(a)},r.prototype.findAll=function(e){var a=[],o=this.getChildren();return each$1(o,function(s){e(s)&&a.push(s),s.isGroup()&&(a=a.concat(s.findAll(e)))}),a},r.prototype.find=function(e){var a=null,o=this.getChildren();return each$1(o,function(s){if(e(s)?a=s:s.isGroup()&&(a=s.find(e)),a)return!1}),a},r.prototype.findById=function(e){return this.find(function(a){return a.get("id")===e})},r.prototype.findByClassName=function(e){return this.find(function(a){return a.get("className")===e})},r.prototype.findAllByName=function(e){return this.findAll(function(a){return a.get("name")===e})},r}(Element$2),frame=0,timeout=0,interval$1=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function now$1(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(n,r,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?now$1():+e)+(r==null?0:+r),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=n,this._time=e,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(n,r,e){var a=new Timer;return a.restart(n,r,e),a}function timerFlush(){now$1(),++frame;for(var n=taskHead,r;n;)(r=clockNow-n._time)>=0&&n._call.call(null,r),n=n._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var n=clock.now(),r=n-clockLast;r>pokeDelay&&(clockSkew-=r,clockLast=n)}function nap(){for(var n,r=taskHead,e,a=1/0;r;)r._call?(a>r._time&&(a=r._time),n=r,r=r._next):(e=r._next,r._next=null,r=n?n._next=e:taskHead=e);taskTail=n,sleep(a)}function sleep(n){if(!frame){timeout&&(timeout=clearTimeout(timeout));var r=n-clockNow;r>24?(n<1/0&&(timeout=setTimeout(wake,n-clock.now()-clockSkew)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast=clock.now(),interval$1=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function define(n,r,e){n.prototype=r.prototype=e,e.constructor=n}function extend(n,r){var e=Object.create(n.prototype);for(var a in r)e[a]=r[a];return e}function Color$1(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color$1,color$1,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(n){var r,e;return n=(n+"").trim().toLowerCase(),(r=reHex.exec(n))?(e=r[1].length,r=parseInt(r[1],16),e===6?rgbn(r):e===3?new Rgb(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?rgba(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?rgba(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=reRgbInteger.exec(n))?new Rgb(r[1],r[2],r[3],1):(r=reRgbPercent.exec(n))?new Rgb(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=reRgbaInteger.exec(n))?rgba(r[1],r[2],r[3],r[4]):(r=reRgbaPercent.exec(n))?rgba(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=reHslPercent.exec(n))?hsla(r[1],r[2]/100,r[3]/100,1):(r=reHslaPercent.exec(n))?hsla(r[1],r[2]/100,r[3]/100,r[4]):named.hasOwnProperty(n)?rgbn(named[n]):n==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(n,r,e,a){return a<=0&&(n=r=e=NaN),new Rgb(n,r,e,a)}function rgbConvert(n){return n instanceof Color$1||(n=color$1(n)),n?(n=n.rgb(),new Rgb(n.r,n.g,n.b,n.opacity)):new Rgb}function rgb$1(n,r,e,a){return arguments.length===1?rgbConvert(n):new Rgb(n,r,e,a??1)}function Rgb(n,r,e,a){this.r=+n,this.g=+r,this.b=+e,this.opacity=+a}define(Rgb,rgb$1,extend(Color$1,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const n=clampa(this.opacity);return`${n===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${n===1?")":`, ${n})`}`}function clampa(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function clampi(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function hex(n){return n=clampi(n),(n<16?"0":"")+n.toString(16)}function hsla(n,r,e,a){return a<=0?n=r=e=NaN:e<=0||e>=1?n=r=NaN:r<=0&&(n=NaN),new Hsl(n,r,e,a)}function hslConvert(n){if(n instanceof Hsl)return new Hsl(n.h,n.s,n.l,n.opacity);if(n instanceof Color$1||(n=color$1(n)),!n)return new Hsl;if(n instanceof Hsl)return n;n=n.rgb();var r=n.r/255,e=n.g/255,a=n.b/255,o=Math.min(r,e,a),s=Math.max(r,e,a),l=NaN,c=s-o,u=(s+o)/2;return c?(r===s?l=(e-a)/c+(e<a)*6:e===s?l=(a-r)/c+2:l=(r-e)/c+4,c/=u<.5?s+o:2-s-o,l*=60):c=u>0&&u<1?0:l,new Hsl(l,c,u,n.opacity)}function hsl(n,r,e,a){return arguments.length===1?hslConvert(n):new Hsl(n,r,e,a??1)}function Hsl(n,r,e,a){this.h=+n,this.s=+r,this.l=+e,this.opacity=+a}define(Hsl,hsl,extend(Color$1,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,r=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,a=e+(e<.5?e:1-e)*r,o=2*e-a;return new Rgb(hsl2rgb(n>=240?n-240:n+120,o,a),hsl2rgb(n,o,a),hsl2rgb(n<120?n+240:n-120,o,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=clampa(this.opacity);return`${n===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${n===1?")":`, ${n})`}`}}));function clamph(n){return n=(n||0)%360,n<0?n+360:n}function clampt(n){return Math.max(0,Math.min(1,n||0))}function hsl2rgb(n,r,e){return(n<60?r+(e-r)*n/60:n<180?e:n<240?r+(e-r)*(240-n)/60:r)*255}const constant$3=n=>()=>n;function linear$3(n,r){return function(e){return n+e*r}}function exponential$1(n,r,e){return n=Math.pow(n,e),r=Math.pow(r,e)-n,e=1/e,function(a){return Math.pow(n+a*r,e)}}function gamma(n){return(n=+n)==1?nogamma:function(r,e){return e-r?exponential$1(r,e,n):constant$3(isNaN(r)?e:r)}}function nogamma(n,r){var e=r-n;return e?linear$3(n,e):constant$3(isNaN(n)?r:n)}const rgb=function n(r){var e=gamma(r);function a(o,s){var l=e((o=rgb$1(o)).r,(s=rgb$1(s)).r),c=e(o.g,s.g),u=e(o.b,s.b),f=nogamma(o.opacity,s.opacity);return function(d){return o.r=l(d),o.g=c(d),o.b=u(d),o.opacity=f(d),o+""}}return a.gamma=n,a}(1);function numberArray(n,r){r||(r=[]);var e=n?Math.min(r.length,n.length):0,a=r.slice(),o;return function(s){for(o=0;o<e;++o)a[o]=n[o]*(1-s)+r[o]*s;return a}}function isNumberArray(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function interpolateArray(n,r){return(isNumberArray(r)?numberArray:genericArray)(n,r)}function genericArray(n,r){var e=r?r.length:0,a=n?Math.min(e,n.length):0,o=new Array(a),s=new Array(e),l;for(l=0;l<a;++l)o[l]=interpolate(n[l],r[l]);for(;l<e;++l)s[l]=r[l];return function(c){for(l=0;l<a;++l)s[l]=o[l](c);return s}}function date(n,r){var e=new Date;return n=+n,r=+r,function(a){return e.setTime(n*(1-a)+r*a),e}}function number(n,r){return n=+n,r=+r,function(e){return n*(1-e)+r*e}}function object$1(n,r){var e={},a={},o;(n===null||typeof n!="object")&&(n={}),(r===null||typeof r!="object")&&(r={});for(o in r)o in n?e[o]=interpolate(n[o],r[o]):a[o]=r[o];return function(s){for(o in e)a[o]=e[o](s);return a}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(n){return function(){return n}}function one(n){return function(r){return n(r)+""}}function string(n,r){var e=reA.lastIndex=reB.lastIndex=0,a,o,s,l=-1,c=[],u=[];for(n=n+"",r=r+"";(a=reA.exec(n))&&(o=reB.exec(r));)(s=o.index)>e&&(s=r.slice(e,s),c[l]?c[l]+=s:c[++l]=s),(a=a[0])===(o=o[0])?c[l]?c[l]+=o:c[++l]=o:(c[++l]=null,u.push({i:l,x:number(a,o)})),e=reB.lastIndex;return e<r.length&&(s=r.slice(e),c[l]?c[l]+=s:c[++l]=s),c.length<2?u[0]?one(u[0].x):zero(r):(r=u.length,function(f){for(var d=0,g;d<r;++d)c[(g=u[d]).i]=g.x(f);return c.join("")})}function interpolate(n,r){var e=typeof r,a;return r==null||e==="boolean"?constant$3(r):(e==="number"?number:e==="string"?(a=color$1(r))?(r=a,rgb):string:r instanceof color$1?rgb:r instanceof Date?date:isNumberArray(r)?numberArray:Array.isArray(r)?genericArray:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?object$1:number)(n,r)}function linear$2(n){return+n}function quadIn(n){return n*n}function quadOut(n){return n*(2-n)}function quadInOut(n){return((n*=2)<=1?n*n:--n*(2-n)+1)/2}function cubicIn(n){return n*n*n}function cubicOut(n){return--n*n*n+1}function cubicInOut(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var exponent=3,polyIn=function n(r){r=+r;function e(a){return Math.pow(a,r)}return e.exponent=n,e}(exponent),polyOut=function n(r){r=+r;function e(a){return 1-Math.pow(1-a,r)}return e.exponent=n,e}(exponent),polyInOut=function n(r){r=+r;function e(a){return((a*=2)<=1?Math.pow(a,r):2-Math.pow(2-a,r))/2}return e.exponent=n,e}(exponent),pi=Math.PI,halfPi=pi/2;function sinIn(n){return+n==1?1:1-Math.cos(n*halfPi)}function sinOut(n){return Math.sin(n*halfPi)}function sinInOut(n){return(1-Math.cos(pi*n))/2}function tpmt(n){return(Math.pow(2,-10*n)-.0009765625)*1.0009775171065494}function expIn(n){return tpmt(1-+n)}function expOut(n){return 1-tpmt(n)}function expInOut(n){return((n*=2)<=1?tpmt(1-n):2-tpmt(n-1))/2}function circleIn(n){return 1-Math.sqrt(1-n*n)}function circleOut(n){return Math.sqrt(1- --n*n)}function circleInOut(n){return((n*=2)<=1?1-Math.sqrt(1-n*n):Math.sqrt(1-(n-=2)*n)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(n){return 1-bounceOut(1-n)}function bounceOut(n){return(n=+n)<b1?b0*n*n:n<b3?b0*(n-=b2)*n+b4:n<b6?b0*(n-=b5)*n+b7:b0*(n-=b8)*n+b9}function bounceInOut(n){return((n*=2)<=1?1-bounceOut(1-n):bounceOut(n-1)+1)/2}var overshoot=1.70158,backIn=function n(r){r=+r;function e(a){return(a=+a)*a*(r*(a-1)+a)}return e.overshoot=n,e}(overshoot),backOut=function n(r){r=+r;function e(a){return--a*a*((a+1)*r+a)+1}return e.overshoot=n,e}(overshoot),backInOut=function n(r){r=+r;function e(a){return((a*=2)<1?a*a*((r+1)*a-r):(a-=2)*a*((r+1)*a+r)+2)/2}return e.overshoot=n,e}(overshoot),tau=2*Math.PI,amplitude=1,period=.3,elasticIn=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=tau);function o(s){return r*tpmt(- --s)*Math.sin((a-s)/e)}return o.amplitude=function(s){return n(s,e*tau)},o.period=function(s){return n(r,s)},o}(amplitude,period),elasticOut=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=tau);function o(s){return 1-r*tpmt(s=+s)*Math.sin((s+a)/e)}return o.amplitude=function(s){return n(s,e*tau)},o.period=function(s){return n(r,s)},o}(amplitude,period),elasticInOut=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=tau);function o(s){return((s=s*2-1)<0?r*tpmt(-s)*Math.sin((a-s)/e):2-r*tpmt(s)*Math.sin((a+s)/e))/2}return o.amplitude=function(s){return n(s,e*tau)},o.period=function(s){return n(r,s)},o}(amplitude,period);const d3Ease=Object.freeze(Object.defineProperty({__proto__:null,easeBack:backInOut,easeBackIn:backIn,easeBackInOut:backInOut,easeBackOut:backOut,easeBounce:bounceOut,easeBounceIn:bounceIn,easeBounceInOut:bounceInOut,easeBounceOut:bounceOut,easeCircle:circleInOut,easeCircleIn:circleIn,easeCircleInOut:circleInOut,easeCircleOut:circleOut,easeCubic:cubicInOut,easeCubicIn:cubicIn,easeCubicInOut:cubicInOut,easeCubicOut:cubicOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticInOut:elasticInOut,easeElasticOut:elasticOut,easeExp:expInOut,easeExpIn:expIn,easeExpInOut:expInOut,easeExpOut:expOut,easeLinear:linear$2,easePoly:polyInOut,easePolyIn:polyIn,easePolyInOut:polyInOut,easePolyOut:polyOut,easeQuad:quadInOut,easeQuadIn:quadIn,easeQuadInOut:quadInOut,easeQuadOut:quadOut,easeSin:sinInOut,easeSinIn:sinIn,easeSinInOut:sinInOut,easeSinOut:sinOut},Symbol.toStringTag,{value:"Module"}));var EASING_MAP={};function getEasing(n){return EASING_MAP[n.toLowerCase()]||d3Ease[n]}function registerEasing(n,r){EASING_MAP[n.toLowerCase()]=r}var isColorProp=function(n){return["fill","stroke","fillStyle","strokeStyle"].includes(n)},isGradientColor$1=function(n){return/^[r,R,L,l]{1}[\s]*\(/.test(n)},IDENTITY_MATRIX=[1,0,0,0,1,0,0,0,1];function _update(n,r,e){var a={},o=r.fromAttrs,s=r.toAttrs;if(!n.destroyed){var l;for(var c in s)if(!isEqual$1(o[c],s[c]))if(c==="path"){var u=s[c],f=o[c];u.length>f.length?(u=parsePathString$2(s[c]),f=parsePathString$2(o[c]),f=fillPathByDiff(f,u),f=formatPath(f,u),r.fromAttrs.path=f,r.toAttrs.path=u):r.pathFormatted||(u=parsePathString$2(s[c]),f=parsePathString$2(o[c]),f=formatPath(f,u),r.fromAttrs.path=f,r.toAttrs.path=u,r.pathFormatted=!0),a[c]=[];for(var d=0;d<u.length;d++){for(var g=u[d],v=f[d],p=[],y=0;y<g.length;y++)isNumber$2(g[y])&&v&&isNumber$2(v[y])?(l=interpolate(v[y],g[y]),p.push(l(e))):p.push(g[y]);a[c].push(p)}}else if(c==="matrix"){var m=interpolateArray(o[c]||IDENTITY_MATRIX,s[c]||IDENTITY_MATRIX),x=m(e);a[c]=x}else isColorProp(c)&&isGradientColor$1(s[c])?a[c]=s[c]:isFunction$1(s[c])||(l=interpolate(o[c],s[c]),a[c]=l(e));n.attr(a)}}function update(n,r,e){var a=r.startTime,o=r.delay;if(e<a+o||r._paused)return!1;var s,l=r.duration,c=r.easing,u=getEasing(c);if(e=e-a-r.delay,r.repeat)s=e%l/l,s=u(s);else if(s=e/l,s<1)s=u(s);else return r.onFrame?n.attr(r.onFrame(1)):n.attr(r.toAttrs),!0;if(r.onFrame){var f=r.onFrame(s);n.attr(f)}else _update(n,r,s);return!1}var Timeline=function(){function n(r){this.animators=[],this.current=0,this.timer=null,this.canvas=r}return n.prototype.initTimer=function(){var r=this,e=!1,a,o,s;this.timer=timer(function(l){if(r.current=l,r.animators.length>0){for(var c=r.animators.length-1;c>=0;c--){if(a=r.animators[c],a.destroyed){r.removeAnimator(c);continue}if(!a.isAnimatePaused()){o=a.get("animations");for(var u=o.length-1;u>=0;u--)s=o[u],e=update(a,s,l),e&&(o.splice(u,1),e=!1,s.callback&&s.callback())}o.length===0&&r.removeAnimator(c)}var f=r.canvas.get("autoDraw");f||r.canvas.draw()}})},n.prototype.addAnimator=function(r){this.animators.push(r)},n.prototype.removeAnimator=function(r){this.animators.splice(r,1)},n.prototype.isAnimating=function(){return!!this.animators.length},n.prototype.stop=function(){this.timer&&this.timer.stop()},n.prototype.stopAllAnimations=function(r){r===void 0&&(r=!0),this.animators.forEach(function(e){e.stopAnimate(r)}),this.animators=[],this.canvas.draw()},n.prototype.getTime=function(){return this.current},n}(),CLICK_OFFSET=40,LEFT_BTN_CODE=0,EVENTS$3=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function emitTargetEvent(n,r,e){e.name=r,e.target=n,e.currentTarget=n,e.delegateTarget=n,n.emit(r,e)}function bubbleEvent(n,r,e){if(e.bubbles){var a=void 0,o=!1;if(r==="mouseenter"?(a=e.fromShape,o=!0):r==="mouseleave"&&(o=!0,a=e.toShape),n.isCanvas()&&o)return;if(a&&isParent(n,a)){e.bubbles=!1;return}e.name=r,e.currentTarget=n,e.delegateTarget=n,n.emit(r,e)}}var EventController=function(){function n(r){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(a){var o=a.type;e._triggerEvent(o,a)},this._onDocumentMove=function(a){var o=e.canvas,s=o.get("el");if(s!==a.target&&(e.dragging||e.currentShape)){var l=e._getPointInfo(a);e.dragging&&e._emitEvent("drag",a,l,e.draggingShape)}},this._onDocumentMouseUp=function(a){var o=e.canvas,s=o.get("el");if(s!==a.target&&e.dragging){var l=e._getPointInfo(a);e.draggingShape&&e._emitEvent("drop",a,l,null),e._emitEvent("dragend",a,l,e.draggingShape),e._afterDrag(e.draggingShape,l,a)}},this.canvas=r.canvas}return n.prototype.init=function(){this._bindEvents()},n.prototype._bindEvents=function(){var r=this,e=this.canvas.get("el");each$1(EVENTS$3,function(a){e.addEventListener(a,r._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},n.prototype._clearEvents=function(){var r=this,e=this.canvas.get("el");each$1(EVENTS$3,function(a){e.removeEventListener(a,r._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},n.prototype._getEventObj=function(r,e,a,o,s,l){var c=new GraphEvent(r,e);return c.fromShape=s,c.toShape=l,c.x=a.x,c.y=a.y,c.clientX=a.clientX,c.clientY=a.clientY,c.propagationPath.push(o),c},n.prototype._getShape=function(r,e){return this.canvas.getShape(r.x,r.y,e)},n.prototype._getPointInfo=function(r){var e=this.canvas,a=e.getClientByEvent(r),o=e.getPointByEvent(r);return{x:o.x,y:o.y,clientX:a.x,clientY:a.y}},n.prototype._triggerEvent=function(r,e){var a=this._getPointInfo(e),o=this._getShape(a,e),s=this["_on"+r],l=!1;if(s)s.call(this,a,o,e);else{var c=this.currentShape;r==="mouseenter"||r==="dragenter"||r==="mouseover"?(this._emitEvent(r,e,a,null,null,o),o&&this._emitEvent(r,e,a,o,null,o),r==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,a,null)):r==="mouseleave"||r==="dragleave"||r==="mouseout"?(l=!0,c&&this._emitEvent(r,e,a,c,c,null),this._emitEvent(r,e,a,null,c,null),r==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,a,null)):this._emitEvent(r,e,a,o,null,null)}if(l||(this.currentShape=o),o&&!o.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=o.attr("cursor")||u.get("cursor")}},n.prototype._onmousedown=function(r,e,a){a.button===LEFT_BTN_CODE&&(this.mousedownShape=e,this.mousedownPoint=r,this.mousedownTimeStamp=a.timeStamp),this._emitEvent("mousedown",a,r,e,null,null)},n.prototype._emitMouseoverEvents=function(r,e,a,o){var s=this.canvas.get("el");a!==o&&(a&&(this._emitEvent("mouseout",r,e,a,a,o),this._emitEvent("mouseleave",r,e,a,a,o),(!o||o.get("destroyed"))&&(s.style.cursor=this.canvas.get("cursor"))),o&&(this._emitEvent("mouseover",r,e,o,a,o),this._emitEvent("mouseenter",r,e,o,a,o)))},n.prototype._emitDragoverEvents=function(r,e,a,o,s){o?(o!==a&&(a&&this._emitEvent("dragleave",r,e,a,a,o),this._emitEvent("dragenter",r,e,o,a,o)),s||this._emitEvent("dragover",r,e,o)):a&&this._emitEvent("dragleave",r,e,a,a,o),s&&this._emitEvent("dragover",r,e,o)},n.prototype._afterDrag=function(r,e,a){r&&(r.set("capture",!0),this.draggingShape=null),this.dragging=!1;var o=this._getShape(e,a);o!==r&&this._emitMouseoverEvents(a,e,r,o),this.currentShape=o},n.prototype._onmouseup=function(r,e,a){if(a.button===LEFT_BTN_CODE){var o=this.draggingShape;this.dragging?(o&&this._emitEvent("drop",a,r,e),this._emitEvent("dragend",a,r,o),this._afterDrag(o,r,a)):(this._emitEvent("mouseup",a,r,e),e===this.mousedownShape&&this._emitEvent("click",a,r,e),this.mousedownShape=null,this.mousedownPoint=null)}},n.prototype._ondragover=function(r,e,a){a.preventDefault();var o=this.currentShape;this._emitDragoverEvents(a,r,o,e,!0)},n.prototype._onmousemove=function(r,e,a){var o=this.canvas,s=this.currentShape,l=this.draggingShape;if(this.dragging)l&&this._emitDragoverEvents(a,r,s,e,!1),this._emitEvent("drag",a,r,l);else{var c=this.mousedownPoint;if(c){var u=this.mousedownShape,f=a.timeStamp,d=f-this.mousedownTimeStamp,g=c.clientX-r.clientX,v=c.clientY-r.clientY,p=g*g+v*v;d>120||p>CLICK_OFFSET?u&&u.get("draggable")?(l=this.mousedownShape,l.set("capture",!1),this.draggingShape=l,this.dragging=!0,this._emitEvent("dragstart",a,r,l),this.mousedownShape=null,this.mousedownPoint=null):!u&&o.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",a,r,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(a,r,s,e),this._emitEvent("mousemove",a,r,e)):(this._emitMouseoverEvents(a,r,s,e),this._emitEvent("mousemove",a,r,e))}else this._emitMouseoverEvents(a,r,s,e),this._emitEvent("mousemove",a,r,e)}},n.prototype._emitEvent=function(r,e,a,o,s,l){var c=this._getEventObj(r,e,a,o,s,l);if(o){c.shape=o,emitTargetEvent(o,r,c);for(var u=o.getParent();u;)u.emitDelegation(r,c),c.propagationStopped||bubbleEvent(u,r,c),c.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;emitTargetEvent(f,r,c)}},n.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},n}(),PX_SUFFIX="px",browser=detect(),isFirefox=browser&&browser.name==="firefox",Canvas$2=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.initContainer(),a.initDom(),a.initEvents(),a.initTimeline(),a}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},r.prototype.initContainer=function(){var e=this.get("container");isString$1(e)&&(e=document.getElementById(e),this.set("container",e))},r.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var a=this.get("container");a.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},r.prototype.initEvents=function(){var e=new EventController({canvas:this});e.init(),this.set("eventController",e)},r.prototype.initTimeline=function(){var e=new Timeline(this);this.set("timeline",e)},r.prototype.setDOMSize=function(e,a){var o=this.get("el");isBrowser&&(o.style.width=e+PX_SUFFIX,o.style.height=a+PX_SUFFIX)},r.prototype.changeSize=function(e,a){this.setDOMSize(e,a),this.set("width",e),this.set("height",a),this.onCanvasChange("changeSize")},r.prototype.getRenderer=function(){return this.get("renderer")},r.prototype.getCursor=function(){return this.get("cursor")},r.prototype.setCursor=function(e){this.set("cursor",e);var a=this.get("el");isBrowser&&a&&(a.style.cursor=e)},r.prototype.getPointByEvent=function(e){var a=this.get("supportCSSTransform");if(a){if(isFirefox&&!isNil(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!isNil(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var o=this.getClientByEvent(e),s=o.x,l=o.y;return this.getPointByClient(s,l)},r.prototype.getClientByEvent=function(e){var a=e;return e.touches&&(e.type==="touchend"?a=e.changedTouches[0]:a=e.touches[0]),{x:a.clientX,y:a.clientY}},r.prototype.getPointByClient=function(e,a){var o=this.get("el"),s=o.getBoundingClientRect();return{x:e-s.left,y:a-s.top}},r.prototype.getClientByPoint=function(e,a){var o=this.get("el"),s=o.getBoundingClientRect();return{x:e+s.left,y:a+s.top}},r.prototype.draw=function(){},r.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},r.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},r.prototype.isCanvas=function(){return!0},r.prototype.getParent=function(){return null},r.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),n.prototype.destroy.call(this))},r}(Container),AbstractGroup=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.isGroup=function(){return!0},r.prototype.isEntityGroup=function(){return!1},r.prototype.clone=function(){for(var e=n.prototype.clone.call(this),a=this.getChildren(),o=0;o<a.length;o++){var s=a[o];e.add(s.clone())}return e},r}(Container),AbstractShape=function(n){__extends$7(r,n);function r(e){return n.call(this,e)||this}return r.prototype._isInBBox=function(e,a){var o=this.getBBox();return o.minX<=e&&o.maxX>=e&&o.minY<=a&&o.maxY>=a},r.prototype.afterAttrsChange=function(e){n.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},r.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},r.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},r.prototype.applyMatrix=function(e){n.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},r.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),a=this.getTotalMatrix(),o=e.minX,s=e.minY,l=e.maxX,c=e.maxY;if(a){var u=multiplyVec2$1(a,[e.minX,e.minY]),f=multiplyVec2$1(a,[e.maxX,e.minY]),d=multiplyVec2$1(a,[e.minX,e.maxY]),g=multiplyVec2$1(a,[e.maxX,e.maxY]);o=Math.min(u[0],f[0],d[0],g[0]),l=Math.max(u[0],f[0],d[0],g[0]),s=Math.min(u[1],f[1],d[1],g[1]),c=Math.max(u[1],f[1],d[1],g[1])}var v=this.attrs;if(v.shadowColor){var p=v.shadowBlur,y=p===void 0?0:p,m=v.shadowOffsetX,x=m===void 0?0:m,A=v.shadowOffsetY,_=A===void 0?0:A,b=o-y+x,S=l+y+x,C=s-y+_,E=c+y+_;o=Math.min(o,b),l=Math.max(l,S),s=Math.min(s,C),c=Math.max(c,E)}return{x:o,y:s,minX:o,minY:s,maxX:l,maxY:c,width:l-o,height:c-s}},r.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},r.prototype.isClipShape=function(){return this.get("isClipShape")},r.prototype.isInShape=function(e,a){return!1},r.prototype.isOnlyHitBox=function(){return!1},r.prototype.isHit=function(e,a){var o=this.get("startArrowShape"),s=this.get("endArrowShape"),l=[e,a,1];l=this.invertFromMatrix(l);var c=l[0],u=l[1],f=this._isInBBox(c,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(c,u)&&(this.isInShape(c,u)||o&&o.isHit(c,u)||s&&s.isHit(c,u)))},r}(Element$2),cache$1=new Map;function register(n,r){cache$1.set(n,r)}function getMethod(n){return cache$1.get(n)}function rect$1(n){var r=n.attr(),e=r.x,a=r.y,o=r.width,s=r.height;return{x:e,y:a,width:o,height:s}}function circle$1(n){var r=n.attr(),e=r.x,a=r.y,o=r.r;return{x:e-o,y:a-o,width:o*2,height:o*2}}function distance$5(n,r,e,a){var o=n-e,s=r-a;return Math.sqrt(o*o+s*s)}function isNumberEqual(n,r){return Math.abs(n-r)<.001}function getBBoxByArray(n,r){var e=min$2(n),a=min$2(r),o=max$2(n),s=max$2(r);return{x:e,y:a,width:o-e,height:s-a}}function piMod(n){return(n+Math.PI*2)%(Math.PI*2)}const LineUtil={box:function(n,r,e,a){return getBBoxByArray([n,e],[r,a])},length:function(n,r,e,a){return distance$5(n,r,e,a)},pointAt:function(n,r,e,a,o){return{x:(1-o)*n+o*e,y:(1-o)*r+o*a}},pointDistance:function(n,r,e,a,o,s){var l=(e-n)*(o-n)+(a-r)*(s-r);if(l<0)return distance$5(n,r,o,s);var c=(e-n)*(e-n)+(a-r)*(a-r);return l>c?distance$5(e,a,o,s):this.pointToLine(n,r,e,a,o,s)},pointToLine:function(n,r,e,a,o,s){var l=[e-n,a-r];if(exactEquals(l,[0,0]))return Math.sqrt((o-n)*(o-n)+(s-r)*(s-r));var c=[-l[1],l[0]];normalize(c,c);var u=[o-n,s-r];return Math.abs(dot$3(u,c))},tangentAngle:function(n,r,e,a){return Math.atan2(a-r,e-n)}};var EPSILON=1e-4;function nearestPoint(n,r,e,a,o,s){var l,c=1/0,u=[e,a],f=20;s&&s>200&&(f=s/10);for(var d=1/f,g=d/10,v=0;v<=f;v++){var p=v*d,y=[o.apply(null,n.concat([p])),o.apply(null,r.concat([p]))],m=distance$5(u[0],u[1],y[0],y[1]);m<c&&(l=p,c=m)}if(l===0)return{x:n[0],y:r[0]};if(l===1){var x=n.length;return{x:n[x-1],y:r[x-1]}}c=1/0;for(var v=0;v<32&&!(g<EPSILON);v++){var A=l-g,_=l+g,y=[o.apply(null,n.concat([A])),o.apply(null,r.concat([A]))],m=distance$5(u[0],u[1],y[0],y[1]);if(A>=0&&m<c)l=A,c=m;else{var b=[o.apply(null,n.concat([_])),o.apply(null,r.concat([_]))],S=distance$5(u[0],u[1],b[0],b[1]);_<=1&&S<c?(l=_,c=S):g*=.5}}return{x:o.apply(null,n.concat([l])),y:o.apply(null,r.concat([l]))}}function snapLength(n,r){for(var e=0,a=n.length,o=0;o<a;o++){var s=n[o],l=r[o],c=n[(o+1)%a],u=r[(o+1)%a];e+=distance$5(s,l,c,u)}return e/2}function quadraticAt(n,r,e,a){var o=1-a;return o*o*n+2*a*o*r+a*a*e}function extrema$1(n,r,e){var a=n+e-2*r;if(isNumberEqual(a,0))return[.5];var o=(n-r)/a;return o<=1&&o>=0?[o]:[]}function derivativeAt$1(n,r,e,a){return 2*(1-a)*(r-n)+2*a*(e-r)}function divideQuadratic(n,r,e,a,o,s,l){var c=quadraticAt(n,e,o,l),u=quadraticAt(r,a,s,l),f=LineUtil.pointAt(n,r,e,a,l),d=LineUtil.pointAt(e,a,o,s,l);return[[n,r,f.x,f.y,c,u],[c,u,d.x,d.y,o,s]]}function quadraticLength(n,r,e,a,o,s,l){if(l===0)return(distance$5(n,r,e,a)+distance$5(e,a,o,s)+distance$5(n,r,o,s))/2;var c=divideQuadratic(n,r,e,a,o,s,.5),u=c[0],f=c[1];return u.push(l-1),f.push(l-1),quadraticLength.apply(null,u)+quadraticLength.apply(null,f)}const QuadUtil={box:function(n,r,e,a,o,s){var l=extrema$1(n,e,o)[0],c=extrema$1(r,a,s)[0],u=[n,o],f=[r,s];return l!==void 0&&u.push(quadraticAt(n,e,o,l)),c!==void 0&&f.push(quadraticAt(r,a,s,c)),getBBoxByArray(u,f)},length:function(n,r,e,a,o,s){return quadraticLength(n,r,e,a,o,s,3)},nearestPoint:function(n,r,e,a,o,s,l,c){return nearestPoint([n,e,o],[r,a,s],l,c,quadraticAt)},pointDistance:function(n,r,e,a,o,s,l,c){var u=this.nearestPoint(n,r,e,a,o,s,l,c);return distance$5(u.x,u.y,l,c)},interpolationAt:quadraticAt,pointAt:function(n,r,e,a,o,s,l){return{x:quadraticAt(n,e,o,l),y:quadraticAt(r,a,s,l)}},divide:function(n,r,e,a,o,s,l){return divideQuadratic(n,r,e,a,o,s,l)},tangentAngle:function(n,r,e,a,o,s,l){var c=derivativeAt$1(n,e,o,l),u=derivativeAt$1(r,a,s,l),f=Math.atan2(u,c);return piMod(f)}};function cubicAt(n,r,e,a,o){var s=1-o;return s*s*s*n+3*r*o*s*s+3*e*o*o*s+a*o*o*o}function derivativeAt(n,r,e,a,o){var s=1-o;return 3*(s*s*(r-n)+2*s*o*(e-r)+o*o*(a-e))}function extrema(n,r,e,a){var o=-3*n+9*r-9*e+3*a,s=6*n-12*r+6*e,l=3*r-3*n,c=[],u,f,d;if(isNumberEqual(o,0))isNumberEqual(s,0)||(u=-l/s,u>=0&&u<=1&&c.push(u));else{var g=s*s-4*o*l;isNumberEqual(g,0)?c.push(-s/(2*o)):g>0&&(d=Math.sqrt(g),u=(-s+d)/(2*o),f=(-s-d)/(2*o),u>=0&&u<=1&&c.push(u),f>=0&&f<=1&&c.push(f))}return c}function divideCubic(n,r,e,a,o,s,l,c,u){var f=cubicAt(n,e,o,l,u),d=cubicAt(r,a,s,c,u),g=LineUtil.pointAt(n,r,e,a,u),v=LineUtil.pointAt(e,a,o,s,u),p=LineUtil.pointAt(o,s,l,c,u),y=LineUtil.pointAt(g.x,g.y,v.x,v.y,u),m=LineUtil.pointAt(v.x,v.y,p.x,p.y,u);return[[n,r,g.x,g.y,y.x,y.y,f,d],[f,d,m.x,m.y,p.x,p.y,l,c]]}function cubicLength(n,r,e,a,o,s,l,c,u){if(u===0)return snapLength([n,e,o,l],[r,a,s,c]);var f=divideCubic(n,r,e,a,o,s,l,c,.5),d=f[0],g=f[1];return d.push(u-1),g.push(u-1),cubicLength.apply(null,d)+cubicLength.apply(null,g)}const CubicUtil={extrema,box:function(n,r,e,a,o,s,l,c){for(var u=[n,l],f=[r,c],d=extrema(n,e,o,l),g=extrema(r,a,s,c),v=0;v<d.length;v++)u.push(cubicAt(n,e,o,l,d[v]));for(var v=0;v<g.length;v++)f.push(cubicAt(r,a,s,c,g[v]));return getBBoxByArray(u,f)},length:function(n,r,e,a,o,s,l,c){return cubicLength(n,r,e,a,o,s,l,c,3)},nearestPoint:function(n,r,e,a,o,s,l,c,u,f,d){return nearestPoint([n,e,o,l],[r,a,s,c],u,f,cubicAt,d)},pointDistance:function(n,r,e,a,o,s,l,c,u,f,d){var g=this.nearestPoint(n,r,e,a,o,s,l,c,u,f,d);return distance$5(g.x,g.y,u,f)},interpolationAt:cubicAt,pointAt:function(n,r,e,a,o,s,l,c,u){return{x:cubicAt(n,e,o,l,u),y:cubicAt(r,a,s,c,u)}},divide:function(n,r,e,a,o,s,l,c,u){return divideCubic(n,r,e,a,o,s,l,c,u)},tangentAngle:function(n,r,e,a,o,s,l,c,u){var f=derivativeAt(n,e,o,l,u),d=derivativeAt(r,a,s,c,u);return piMod(Math.atan2(d,f))}};function copysign(n,r){var e=Math.abs(n);return r>0?e:e*-1}const ellipse$1={box:function(n,r,e,a){return{x:n-e,y:r-a,width:e*2,height:a*2}},length:function(n,r,e,a){return Math.PI*(3*(e+a)-Math.sqrt((3*e+a)*(e+3*a)))},nearestPoint:function(n,r,e,a,o,s){var l=e,c=a;if(l===0||c===0)return{x:n,y:r};for(var u=o-n,f=s-r,d=Math.abs(u),g=Math.abs(f),v=l*l,p=c*c,y=Math.PI/4,m,x,A=0;A<4;A++){m=l*Math.cos(y),x=c*Math.sin(y);var _=(v-p)*Math.pow(Math.cos(y),3)/l,b=(p-v)*Math.pow(Math.sin(y),3)/c,S=m-_,C=x-b,E=d-_,T=g-b,w=Math.hypot(C,S),L=Math.hypot(T,E),M=w*Math.asin((S*T-C*E)/(w*L)),O=M/Math.sqrt(v+p-m*m-x*x);y+=O,y=Math.min(Math.PI/2,Math.max(0,y))}return{x:n+copysign(m,u),y:r+copysign(x,f)}},pointDistance:function(n,r,e,a,o,s){var l=this.nearestPoint(n,r,e,a,o,s);return distance$5(l.x,l.y,o,s)},pointAt:function(n,r,e,a,o){var s=2*Math.PI*o;return{x:n+e*Math.cos(s),y:r+a*Math.sin(s)}},tangentAngle:function(n,r,e,a,o){var s=2*Math.PI*o,l=Math.atan2(a*Math.cos(s),-e*Math.sin(s));return piMod(l)}};function derivativeXAt(n,r,e,a,o,s,l,c){return-1*e*Math.cos(o)*Math.sin(c)-a*Math.sin(o)*Math.cos(c)}function derivativeYAt(n,r,e,a,o,s,l,c){return-1*e*Math.sin(o)*Math.sin(c)+a*Math.cos(o)*Math.cos(c)}function xExtrema(n,r,e){return Math.atan(-r/n*Math.tan(e))}function yExtrema(n,r,e){return Math.atan(r/(n*Math.tan(e)))}function xAt(n,r,e,a,o,s){return e*Math.cos(o)*Math.cos(s)-a*Math.sin(o)*Math.sin(s)+n}function yAt(n,r,e,a,o,s){return e*Math.sin(o)*Math.cos(s)+a*Math.cos(o)*Math.sin(s)+r}function getAngle$2(n,r,e,a){var o=Math.atan2(a*n,e*r);return(o+Math.PI*2)%(Math.PI*2)}function getPoint(n,r,e){return{x:n*Math.cos(e),y:r*Math.sin(e)}}function rotate$2(n,r,e){var a=Math.cos(e),o=Math.sin(e);return[n*a-r*o,n*o+r*a]}const EllipseArcUtil={box:function(n,r,e,a,o,s,l){for(var c=xExtrema(e,a,o),u=1/0,f=-1/0,d=[s,l],g=-Math.PI*2;g<=Math.PI*2;g+=Math.PI){var v=c+g;s<l?s<v&&v<l&&d.push(v):l<v&&v<s&&d.push(v)}for(var g=0;g<d.length;g++){var p=xAt(n,r,e,a,o,d[g]);p<u&&(u=p),p>f&&(f=p)}for(var y=yExtrema(e,a,o),m=1/0,x=-1/0,A=[s,l],g=-Math.PI*2;g<=Math.PI*2;g+=Math.PI){var _=y+g;s<l?s<_&&_<l&&A.push(_):l<_&&_<s&&A.push(_)}for(var g=0;g<A.length;g++){var b=yAt(n,r,e,a,o,A[g]);b<m&&(m=b),b>x&&(x=b)}return{x:u,y:m,width:f-u,height:x-m}},length:function(n,r,e,a,o,s,l){},nearestPoint:function(n,r,e,a,o,s,l,c,u){var f=rotate$2(c-n,u-r,-o),d=f[0],g=f[1],v=ellipse$1.nearestPoint(0,0,e,a,d,g),p=getAngle$2(e,a,v.x,v.y);p<s?v=getPoint(e,a,s):p>l&&(v=getPoint(e,a,l));var y=rotate$2(v.x,v.y,o);return{x:y[0]+n,y:y[1]+r}},pointDistance:function(n,r,e,a,o,s,l,c,u){var f=this.nearestPoint(n,r,e,a,c,u);return distance$5(f.x,f.y,c,u)},pointAt:function(n,r,e,a,o,s,l,c){var u=(l-s)*c+s;return{x:xAt(n,r,e,a,o,u),y:yAt(n,r,e,a,o,u)}},tangentAngle:function(n,r,e,a,o,s,l,c){var u=(l-s)*c+s,f=derivativeXAt(n,r,e,a,o,s,l,u),d=derivativeYAt(n,r,e,a,o,s,l,u);return piMod(Math.atan2(d,f))}};function analyzePoints(n){for(var r=0,e=[],a=0;a<n.length-1;a++){var o=n[a],s=n[a+1],l=distance$5(o[0],o[1],s[0],s[1]),c={from:o,to:s,length:l};e.push(c),r+=l}return{segments:e,totalLength:r}}function lengthOfSegment(n){if(n.length<2)return 0;for(var r=0,e=0;e<n.length-1;e++){var a=n[e],o=n[e+1];r+=distance$5(a[0],a[1],o[0],o[1])}return r}function pointAtSegments(n,r){if(r>1||r<0||n.length<2)return null;var e=analyzePoints(n),a=e.segments,o=e.totalLength;if(o===0)return{x:n[0][0],y:n[0][1]};for(var s=0,l=null,c=0;c<a.length;c++){var u=a[c],f=u.from,d=u.to,g=u.length/o;if(r>=s&&r<=s+g){var v=(r-s)/g;l=LineUtil.pointAt(f[0],f[1],d[0],d[1],v);break}s+=g}return l}function angleAtSegments(n,r){if(r>1||r<0||n.length<2)return 0;for(var e=analyzePoints(n),a=e.segments,o=e.totalLength,s=0,l=0,c=0;c<a.length;c++){var u=a[c],f=u.from,d=u.to,g=u.length/o;if(r>=s&&r<=s+g){l=Math.atan2(d[1]-f[1],d[0]-f[0]);break}s+=g}return l}function distanceAtSegment(n,r,e){for(var a=1/0,o=0;o<n.length-1;o++){var s=n[o],l=n[o+1],c=LineUtil.pointDistance(s[0],s[1],l[0],l[1],r,e);c<a&&(a=c)}return a}const PolylineUtil={box:function(n){for(var r=[],e=[],a=0;a<n.length;a++){var o=n[a];r.push(o[0]),e.push(o[1])}return getBBoxByArray(r,e)},length:function(n){return lengthOfSegment(n)},pointAt:function(n,r){return pointAtSegments(n,r)},pointDistance:function(n,r,e){return distanceAtSegment(n,r,e)},tangentAngle:function(n,r){return angleAtSegments(n,r)}};function mergeBBox(n,r){return!n||!r?n||r:{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}}function mergeArrowBBox(n,r){var e=n.get("startArrowShape"),a=n.get("endArrowShape"),o=null,s=null;return e&&(o=e.getCanvasBBox(),r=mergeBBox(r,o)),a&&(s=a.getCanvasBBox(),r=mergeBBox(r,s)),r}function polyline(n){for(var r=n.attr(),e=r.points,a=[],o=[],s=0;s<e.length;s++){var l=e[s];a.push(l[0]),o.push(l[1])}var c=getBBoxByArray(a,o),u=c.x,f=c.y,d=c.width,g=c.height,v={minX:u,minY:f,maxX:u+d,maxY:f+g};return v=mergeArrowBBox(n,v),{x:v.minX,y:v.minY,width:v.maxX-v.minX,height:v.maxY-v.minY}}function polygon$1(n){for(var r=n.attr(),e=r.points,a=[],o=[],s=0;s<e.length;s++){var l=e[s];a.push(l[0]),o.push(l[1])}return getBBoxByArray(a,o)}var offScreenCtx=null;function getOffScreenContext(){if(!offScreenCtx){var n=document.createElement("canvas");n.width=1,n.height=1,offScreenCtx=n.getContext("2d")}return offScreenCtx}function getTextHeight(n,r,e){var a=1;if(isString$1(n)&&(a=n.split(`
`).length),a>1){var o=getLineSpaceing(r,e);return r*a+o*(a-1)}return r}function getLineSpaceing(n,r){return r?r-n:n*.14}function getTextWidth(n,r){var e=getOffScreenContext(),a=0;if(isNil(n)||n==="")return a;if(e.save(),e.font=r,isString$1(n)&&n.includes(`
`)){var o=n.split(`
`);each$1(o,function(s){var l=e.measureText(s).width;a<l&&(a=l)})}else a=e.measureText(n).width;return e.restore(),a}function assembleFont(n){var r=n.fontSize,e=n.fontFamily,a=n.fontWeight,o=n.fontStyle,s=n.fontVariant;return[o,s,a,r+"px",e].join(" ").trim()}function text(n){var r=n.attr(),e=r.x,a=r.y,o=r.text,s=r.fontSize,l=r.lineHeight,c=r.font;c||(c=assembleFont(r));var u=getTextWidth(o,c),f;if(!u)f={x:e,y:a,width:0,height:0};else{var d=r.textAlign,g=r.textBaseline,v=getTextHeight(o,s,l),p={x:e,y:a-v};d&&(d==="end"||d==="right"?p.x-=u:d==="center"&&(p.x-=u/2)),g&&(g==="top"?p.y+=v:g==="middle"&&(p.y+=v/2)),f={x:p.x,y:p.y,width:u,height:v}}return f}var regexTags=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,regexDot=/[^\s\,]+/ig;function parsePath(n){var r=n||[];if(isArray$4(r))return r;if(isString$1(r))return r=r.match(regexTags),each$1(r,function(e,a){if(e=e.match(regexDot),e[0].length>1){var o=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=o}each$1(e,function(s,l){isNaN(s)||(e[l]=+s)}),r[a]=e}),r}function smoothBezier$2(n,r,e,a){var o=[],s=!!a,l,c,u,f,d,g,v;if(s){u=a[0],f=a[1];for(var p=0,y=n.length;p<y;p+=1){var m=n[p];u=min$1([0,0],u,m),f=max$1([0,0],f,m)}}for(var p=0,x=n.length;p<x;p+=1){var m=n[p];if(p===0&&!e)v=m;else if(p===x-1&&!e)g=m,o.push(v),o.push(g);else{var A=[p?p-1:x-1,p-1][e?0:1];l=n[A],c=n[e?(p+1)%x:p+1];var _=[0,0];_=sub(_,c,l),_=scale$3(_,_,r);var b=distance$6(m,l),S=distance$6(m,c),C=b+S;C!==0&&(b/=C,S/=C);var E=scale$3([0,0],_,-b),T=scale$3([0,0],_,S);g=add$1([0,0],m,E),d=add$1([0,0],m,T),d=min$1([0,0],d,max$1([0,0],c,m)),d=max$1([0,0],d,min$1([0,0],c,m)),E=sub([0,0],d,m),E=scale$3([0,0],E,-b/S),g=add$1([0,0],m,E),g=min$1([0,0],g,max$1([0,0],l,m)),g=max$1([0,0],g,min$1([0,0],l,m)),T=sub([0,0],m,g),T=scale$3([0,0],T,S/b),d=add$1([0,0],m,T),s&&(g=max$1([0,0],g,u),g=min$1([0,0],g,f),d=max$1([0,0],d,u),d=min$1([0,0],d,f)),o.push(v),o.push(g),v=d}}return e&&o.push(o.shift()),o}function catmullRom2Bezier(n,r,e){r===void 0&&(r=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var a=!!r,o=[],s=0,l=n.length;s<l;s+=2)o.push([n[s],n[s+1]]);for(var c=smoothBezier$2(o,.4,a,e),u=o.length,f=[],d,g,v,s=0;s<u-1;s+=1)d=c[s*2],g=c[s*2+1],v=o[s+1],f.push(["C",d[0],d[1],g[0],g[1],v[0],v[1]]);return a&&(d=c[u],g=c[u+1],v=o[0],f.push(["C",d[0],d[1],g[0],g[1],v[0],v[1]])),f}var SPACES$1=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND$1=new RegExp("([a-z])["+SPACES$1+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES$1+"]*,?["+SPACES$1+"]*)+)","ig"),PATH_VALUES$1=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES$1+"]*,?["+SPACES$1+"]*","ig");function parsePathString$1(n){if(!n)return null;if(isArray$4(n))return n;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(n).replace(PATH_COMMAND$1,function(a,o,s){var l=[],c=o.toLowerCase();if(s.replace(PATH_VALUES$1,function(u,f){f&&l.push(+f)}),c==="m"&&l.length>2&&(e.push([o].concat(l.splice(0,2))),c="l",o=o==="m"?"l":"L"),c==="o"&&l.length===1&&e.push([o,l[0]]),c==="r")e.push([o].concat(l));else for(;l.length>=r[c]&&(e.push([o].concat(l.splice(0,r[c]))),!!r[c]););return""}),e}var REGEX_MD=/[a-z]/;function toSymmetry$1(n,r){return[r[0]+(r[0]-n[0]),r[1]+(r[1]-n[1])]}function pathToAbsolute(n){var r=parsePathString$1(n);if(!r||!r.length)return[["M",0,0]];for(var e=!1,a=0;a<r.length;a++){var o=r[a][0];if(REGEX_MD.test(o)||["V","H","T","S"].indexOf(o)>=0){e=!0;break}}if(!e)return r;var s=[],l=0,c=0,u=0,f=0,d=0,g=r[0];(g[0]==="M"||g[0]==="m")&&(l=+g[1],c=+g[2],u=l,f=c,d++,s[0]=["M",l,c]);for(var a=d,v=r.length;a<v;a++){var p=r[a],y=s[a-1],m=[],o=p[0],x=o.toUpperCase();if(o!==x)switch(m[0]=x,x){case"A":m[1]=p[1],m[2]=p[2],m[3]=p[3],m[4]=p[4],m[5]=p[5],m[6]=+p[6]+l,m[7]=+p[7]+c;break;case"V":m[1]=+p[1]+c;break;case"H":m[1]=+p[1]+l;break;case"M":u=+p[1]+l,f=+p[2]+c,m[1]=u,m[2]=f;break;default:for(var A=1,_=p.length;A<_;A++)m[A]=+p[A]+(A%2?l:c)}else m=r[a];switch(x){case"Z":l=+u,c=+f;break;case"H":l=m[1],m=["L",l,c];break;case"V":c=m[1],m=["L",l,c];break;case"T":l=m[1],c=m[2];var b=toSymmetry$1([y[1],y[2]],[y[3],y[4]]);m=["Q",b[0],b[1],l,c];break;case"S":l=m[m.length-2],c=m[m.length-1];var S=y.length,C=toSymmetry$1([y[S-4],y[S-3]],[y[S-2],y[S-1]]);m=["C",C[0],C[1],m[1],m[2],l,c];break;case"M":u=m[m.length-2],f=m[m.length-1];break;default:l=m[m.length-2],c=m[m.length-1]}s.push(m)}return s}function vMag$1(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function vRatio$1(n,r){return vMag$1(n)*vMag$1(r)?(n[0]*r[0]+n[1]*r[1])/(vMag$1(n)*vMag$1(r)):1}function vAngle$1(n,r){return(n[0]*r[1]<n[1]*r[0]?-1:1)*Math.acos(vRatio$1(n,r))}function isSamePoint$2(n,r){return n[0]===r[0]&&n[1]===r[1]}function getArcParams$1(n,r){var e=r[1],a=r[2],o=mod$1(toRadian(r[3]),Math.PI*2),s=r[4],l=r[5],c=n[0],u=n[1],f=r[6],d=r[7],g=Math.cos(o)*(c-f)/2+Math.sin(o)*(u-d)/2,v=-1*Math.sin(o)*(c-f)/2+Math.cos(o)*(u-d)/2,p=g*g/(e*e)+v*v/(a*a);p>1&&(e*=Math.sqrt(p),a*=Math.sqrt(p));var y=e*e*(v*v)+a*a*(g*g),m=y?Math.sqrt((e*e*(a*a)-y)/y):1;s===l&&(m*=-1),isNaN(m)&&(m=0);var x=a?m*e*v/a:0,A=e?m*-a*g/e:0,_=(c+f)/2+Math.cos(o)*x-Math.sin(o)*A,b=(u+d)/2+Math.sin(o)*x+Math.cos(o)*A,S=[(g-x)/e,(v-A)/a],C=[(-1*g-x)/e,(-1*v-A)/a],E=vAngle$1([1,0],S),T=vAngle$1(S,C);return vRatio$1(S,C)<=-1&&(T=Math.PI),vRatio$1(S,C)>=1&&(T=0),l===0&&T>0&&(T=T-2*Math.PI),l===1&&T<0&&(T=T+2*Math.PI),{cx:_,cy:b,rx:isSamePoint$2(n,[f,d])?0:e,ry:isSamePoint$2(n,[f,d])?0:a,startAngle:E,endAngle:E+T,xRotation:o,arcFlag:s,sweepFlag:l}}function toSymmetry(n,r){return[r[0]+(r[0]-n[0]),r[1]+(r[1]-n[1])]}function getSegments(n){n=parsePath(n);for(var r=[],e=null,a=null,o=null,s=0,l=n.length,c=0;c<l;c++){var u=n[c];a=n[c+1];var f=u[0],d={command:f,prePoint:e,params:u,startTangent:null,endTangent:null};switch(f){case"M":o=[u[1],u[2]],s=c;break;case"A":var g=getArcParams$1(e,u);d.arcParams=g;break}if(f==="Z")e=o,a=n[s+1];else{var v=u.length;e=[u[v-2],u[v-1]]}a&&a[0]==="Z"&&(a=n[s],r[s]&&(r[s].prePoint=e)),d.currentPoint=e,r[s]&&isSamePoint$2(e,r[s].currentPoint)&&(r[s].prePoint=d.prePoint);var p=a?[a[a.length-2],a[a.length-1]]:null;d.nextPoint=p;var y=d.prePoint;if(["L","H","V"].includes(f))d.startTangent=[y[0]-e[0],y[1]-e[1]],d.endTangent=[e[0]-y[0],e[1]-y[1]];else if(f==="Q"){var m=[u[1],u[2]];d.startTangent=[y[0]-m[0],y[1]-m[1]],d.endTangent=[e[0]-m[0],e[1]-m[1]]}else if(f==="T"){var x=r[c-1],m=toSymmetry(x.currentPoint,y);x.command==="Q"?(d.command="Q",d.startTangent=[y[0]-m[0],y[1]-m[1]],d.endTangent=[e[0]-m[0],e[1]-m[1]]):(d.command="TL",d.startTangent=[y[0]-e[0],y[1]-e[1]],d.endTangent=[e[0]-y[0],e[1]-y[1]])}else if(f==="C"){var A=[u[1],u[2]],_=[u[3],u[4]];d.startTangent=[y[0]-A[0],y[1]-A[1]],d.endTangent=[e[0]-_[0],e[1]-_[1]],d.startTangent[0]===0&&d.startTangent[1]===0&&(d.startTangent=[A[0]-_[0],A[1]-_[1]]),d.endTangent[0]===0&&d.endTangent[1]===0&&(d.endTangent=[_[0]-A[0],_[1]-A[1]])}else if(f==="S"){var x=r[c-1],A=toSymmetry(x.currentPoint,y),_=[u[1],u[2]];x.command==="C"?(d.command="C",d.startTangent=[y[0]-A[0],y[1]-A[1]],d.endTangent=[e[0]-_[0],e[1]-_[1]]):(d.command="SQ",d.startTangent=[y[0]-_[0],y[1]-_[1]],d.endTangent=[e[0]-_[0],e[1]-_[1]])}else if(f==="A"){var b=.001,S=d.arcParams||{},C=S.cx,E=C===void 0?0:C,T=S.cy,w=T===void 0?0:T,L=S.rx,M=L===void 0?0:L,O=S.ry,P=O===void 0?0:O,N=S.sweepFlag,G=N===void 0?0:N,Y=S.startAngle,F=Y===void 0?0:Y,z=S.endAngle,W=z===void 0?0:z;G===0&&(b*=-1);var j=M*Math.cos(F-b)+E,U=P*Math.sin(F-b)+w;d.startTangent=[j-o[0],U-o[1]];var X=M*Math.cos(F+W+b)+E,tt=P*Math.sin(F+W-b)+w;d.endTangent=[y[0]-X,y[1]-tt]}r.push(d)}return r}var isBetween$2=function(n,r,e){return n>=r&&n<=e};function getLineIntersect(n,r,e,a){var o=.001,s={x:e.x-n.x,y:e.y-n.y},l={x:r.x-n.x,y:r.y-n.y},c={x:a.x-e.x,y:a.y-e.y},u=l.x*c.y-l.y*c.x,f=u*u,d=l.x*l.x+l.y*l.y,g=c.x*c.x+c.y*c.y,v=null;if(f>o*d*g){var p=(s.x*c.y-s.y*c.x)/u,y=(s.x*l.y-s.y*l.x)/u;isBetween$2(p,0,1)&&isBetween$2(y,0,1)&&(v={x:n.x+p*l.x,y:n.y+p*l.y})}return v}var tolerance$1=1e-6;function dcmp$1(n){return Math.abs(n)<tolerance$1?0:n<0?-1:1}function onSegment$1(n,r,e){return(e[0]-n[0])*(r[1]-n[1])===(r[0]-n[0])*(e[1]-n[1])&&Math.min(n[0],r[0])<=e[0]&&e[0]<=Math.max(n[0],r[0])&&Math.min(n[1],r[1])<=e[1]&&e[1]<=Math.max(n[1],r[1])}function isInPolygon$1(n,r,e){var a=!1,o=n.length;if(o<=2)return!1;for(var s=0;s<o;s++){var l=n[s],c=n[(s+1)%o];if(onSegment$1(l,c,[r,e]))return!0;dcmp$1(l[1]-e)>0!=dcmp$1(c[1]-e)>0&&dcmp$1(r-(e-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(a=!a)}return a}function parseToLines(n){for(var r=[],e=n.length,a=0;a<e-1;a++){var o=n[a],s=n[a+1];r.push({from:{x:o[0],y:o[1]},to:{x:s[0],y:s[1]}})}if(r.length>1){var l=n[0],c=n[e-1];r.push({from:{x:c[0],y:c[1]},to:{x:l[0],y:l[1]}})}return r}function lineIntersectPolygon(n,r){var e=!1;return each$1(n,function(a){if(getLineIntersect(a.from,a.to,r.from,r.to))return e=!0,!1}),e}function getBBox(n){var r=n.map(function(a){return a[0]}),e=n.map(function(a){return a[1]});return{minX:Math.min.apply(null,r),maxX:Math.max.apply(null,r),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}function intersectBBox$1(n,r){return!(r.minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)}function isPolygonsIntersect(n,r){if(n.length<2||r.length<2)return!1;var e=getBBox(n),a=getBBox(r);if(!intersectBBox$1(e,a))return!1;var o=!1;if(each$1(r,function(u){if(isInPolygon$1(n,u[0],u[1]))return o=!0,!1}),o||(each$1(n,function(u){if(isInPolygon$1(r,u[0],u[1]))return o=!0,!1}),o))return!0;var s=parseToLines(n),l=parseToLines(r),c=!1;return each$1(l,function(u){if(lineIntersectPolygon(s,u))return c=!0,!1}),c}function getPathBox(n,r){for(var e=[],a=[],o=[],s=0;s<n.length;s++){var l=n[s],c=l.currentPoint,u=l.params,f=l.prePoint,d=void 0;switch(l.command){case"Q":d=QuadUtil.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":d=CubicUtil.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var g=l.arcParams;d=EllipseArcUtil.box(g.cx,g.cy,g.rx,g.ry,g.xRotation,g.startAngle,g.endAngle);break;default:e.push(c[0]),a.push(c[1]);break}d&&(l.box=d,e.push(d.x,d.x+d.width),a.push(d.y,d.y+d.height)),r&&(l.command==="L"||l.command==="M")&&l.prePoint&&l.nextPoint&&o.push(l)}e=e.filter(function(A){return!Number.isNaN(A)&&A!==1/0&&A!==-1/0}),a=a.filter(function(A){return!Number.isNaN(A)&&A!==1/0&&A!==-1/0});var v=min$2(e),p=min$2(a),y=max$2(e),m=max$2(a);if(o.length===0)return{x:v,y:p,width:y-v,height:m-p};for(var s=0;s<o.length;s++){var l=o[s],c=l.currentPoint,x=void 0;c[0]===v?(x=getExtraFromSegmentWithAngle(l,r),v=v-x.xExtra):c[0]===y&&(x=getExtraFromSegmentWithAngle(l,r),y=y+x.xExtra),c[1]===p?(x=getExtraFromSegmentWithAngle(l,r),p=p-x.yExtra):c[1]===m&&(x=getExtraFromSegmentWithAngle(l,r),m=m+x.yExtra)}return{x:v,y:p,width:y-v,height:m-p}}function getExtraFromSegmentWithAngle(n,r){var e=n.prePoint,a=n.currentPoint,o=n.nextPoint,s=Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2),l=Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2),c=Math.pow(e[0]-o[0],2)+Math.pow(e[1]-o[1],2),u=Math.acos((s+l-c)/(2*Math.sqrt(s)*Math.sqrt(l)));if(!u||Math.sin(u)===0||isNumberEqual$1(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(o[1]-a[1],o[0]-a[0])),d=Math.abs(Math.atan2(o[0]-a[0],o[1]-a[1]));f=f>Math.PI/2?Math.PI-f:f,d=d>Math.PI/2?Math.PI-d:d;var g={xExtra:Math.cos(u/2-f)*(r/2*(1/Math.sin(u/2)))-r/2||0,yExtra:Math.cos(d-u/2)*(r/2*(1/Math.sin(u/2)))-r/2||0};return g}function path(n){var r=n.attr(),e=r.path,a=r.stroke,o=a?r.lineWidth:0,s=n.get("segments")||getSegments(e),l=getPathBox(s,o),c=l.x,u=l.y,f=l.width,d=l.height,g={minX:c,minY:u,maxX:c+f,maxY:u+d};return g=mergeArrowBBox(n,g),{x:g.minX,y:g.minY,width:g.maxX-g.minX,height:g.maxY-g.minY}}function line$1(n){var r=n.attr(),e=r.x1,a=r.y1,o=r.x2,s=r.y2,l=Math.min(e,o),c=Math.max(e,o),u=Math.min(a,s),f=Math.max(a,s),d={minX:l,maxX:c,minY:u,maxY:f};return d=mergeArrowBBox(n,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function ellipse(n){var r=n.attr(),e=r.x,a=r.y,o=r.rx,s=r.ry;return{x:e-o,y:a-s,width:o*2,height:s*2}}register("rect",rect$1);register("image",rect$1);register("circle",circle$1);register("marker",circle$1);register("polyline",polyline);register("polygon",polygon$1);register("text",text);register("path",path);register("line",line$1);register("ellipse",ellipse);var DEFAULT_Y=0,MARGIN_RATIO=1/2,DODGE_RATIO=1/2,GAP=.05,Adjust=function(){function n(r){var e=r.xField,a=r.yField,o=r.adjustNames,s=o===void 0?["x","y"]:o,l=r.dimValuesMap;this.adjustNames=s,this.xField=e,this.yField=a,this.dimValuesMap=l}return n.prototype.isAdjust=function(r){return this.adjustNames.indexOf(r)>=0},n.prototype.getAdjustRange=function(r,e,a){var o=this.yField,s=a.indexOf(e),l=a.length,c,u;return!o&&this.isAdjust("y")?(c=0,u=1):l>1?(c=a[s===0?0:s-1],u=a[s===l-1?l-1:s+1],s!==0?c+=(e-c)/2:c-=(u-e)/2,s!==l-1?u-=(u-e)/2:u+=(e-a[l-2])/2):(c=e===0?0:e-.5,u=e===0?1:e+.5),{pre:c,next:u}},n.prototype.adjustData=function(r,e){var a=this,o=this.getDimValues(e);each$1(r,function(s,l){each$1(o,function(c,u){a.adjustDim(u,c,s,l)})})},n.prototype.groupData=function(r,e){return each$1(r,function(a){a[e]===void 0&&(a[e]=DEFAULT_Y)}),groupBy(r,e)},n.prototype.adjustDim=function(r,e,a,o){},n.prototype.getDimValues=function(r){var e=this,a=e.xField,o=e.yField,s=mix({},this.dimValuesMap),l=[];if(a&&this.isAdjust("x")&&l.push(a),o&&this.isAdjust("y")&&l.push(o),l.forEach(function(u){s&&s[u]||(s[u]=valuesOfKey(r,u).sort(function(f,d){return f-d}))}),!o&&this.isAdjust("y")){var c="y";s[c]=[DEFAULT_Y,1]}return s},n}(),ADJUST_MAP={},getAdjust=function(n){return ADJUST_MAP[n.toLowerCase()]},registerAdjust=function(n,r){if(getAdjust(n))throw new Error("Adjust type '"+n+"' existed.");ADJUST_MAP[n.toLowerCase()]=r};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$6=function(n,r){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)a.hasOwnProperty(o)&&(e[o]=a[o])},extendStatics$6(n,r)};function __extends$6(n,r){extendStatics$6(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var __assign$7=function(){return __assign$7=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$7.apply(this,arguments)},Dodge=function(n){__extends$6(r,n);function r(e){var a=n.call(this,e)||this;a.cacheMap={},a.adjustDataArray=[],a.mergeData=[];var o=e.marginRatio,s=o===void 0?MARGIN_RATIO:o,l=e.dodgeRatio,c=l===void 0?DODGE_RATIO:l,u=e.dodgeBy,f=e.intervalPadding,d=e.dodgePadding,g=e.xDimensionLength,v=e.groupNum,p=e.defaultSize,y=e.maxColumnWidth,m=e.minColumnWidth,x=e.columnWidthRatio,A=e.customOffset;return a.marginRatio=s,a.dodgeRatio=c,a.dodgeBy=u,a.intervalPadding=f,a.dodgePadding=d,a.xDimensionLegenth=g,a.groupNum=v,a.defaultSize=p,a.maxColumnWidth=y,a.minColumnWidth=m,a.columnWidthRatio=x,a.customOffset=A,a}return r.prototype.process=function(e){var a=clone(e),o=flatten(a),s=this.dodgeBy,l=s?group$1(o,s):a;return this.cacheMap={},this.adjustDataArray=l,this.mergeData=o,this.adjustData(l,o),this.adjustDataArray=[],this.mergeData=[],a},r.prototype.adjustDim=function(e,a,o,s){var l=this,c=this.customOffset,u=this.getDistribution(e),f=this.groupData(o,e);return each$1(f,function(d,g){var v;a.length===1?v={pre:a[0]-1,next:a[0]+1}:v=l.getAdjustRange(e,parseFloat(g),a),each$1(d,function(p){var y=p[e],m=u[y],x=m.indexOf(s);if(isNil(c))p[e]=l.getDodgeOffset(v,x,m.length);else{var A=v.pre,_=v.next;p[e]=isFunction$1(c)?c(p,v):(A+_)/2+c}})}),[]},r.prototype.getDodgeOffset=function(e,a,o){var s=this,l=s.dodgeRatio,c=s.marginRatio,u=s.intervalPadding,f=s.dodgePadding,d=e.pre,g=e.next,v=g-d,p;if(!isNil(u)&&isNil(f)&&u>=0){var y=this.getIntervalOnlyOffset(o,a);p=d+y}else if(!isNil(f)&&isNil(u)&&f>=0){var y=this.getDodgeOnlyOffset(o,a);p=d+y}else if(!isNil(u)&&!isNil(f)&&u>=0&&f>=0){var y=this.getIntervalAndDodgeOffset(o,a);p=d+y}else{var m=v*l/o,x=c*m,y=1/2*(v-o*m-(o-1)*x)+((a+1)*m+a*x)-1/2*m-1/2*v;p=(d+g)/2+y}return p},r.prototype.getIntervalOnlyOffset=function(e,a){var o=this,s=o.defaultSize,l=o.intervalPadding,c=o.xDimensionLegenth,u=o.groupNum,f=o.dodgeRatio,d=o.maxColumnWidth,g=o.minColumnWidth,v=o.columnWidthRatio,p=l/c,y=(1-(u-1)*p)/u*f/(e-1),m=((1-p*(u-1))/u-y*(e-1))/e;if(m=isNil(v)?m:1/u/e*v,!isNil(d)){var x=d/c;m=Math.min(m,x)}if(!isNil(g)){var A=g/c;m=Math.max(m,A)}m=s?s/c:m,y=((1-(u-1)*p)/u-e*m)/(e-1);var _=((1/2+a)*m+a*y+1/2*p)*u-p/2;return _},r.prototype.getDodgeOnlyOffset=function(e,a){var o=this,s=o.defaultSize,l=o.dodgePadding,c=o.xDimensionLegenth,u=o.groupNum,f=o.marginRatio,d=o.maxColumnWidth,g=o.minColumnWidth,v=o.columnWidthRatio,p=l/c,y=1*f/(u-1),m=((1-y*(u-1))/u-p*(e-1))/e;if(m=v?1/u/e*v:m,!isNil(d)){var x=d/c;m=Math.min(m,x)}if(!isNil(g)){var A=g/c;m=Math.max(m,A)}m=s?s/c:m,y=(1-(m*e+p*(e-1))*u)/(u-1);var _=((1/2+a)*m+a*p+1/2*y)*u-y/2;return _},r.prototype.getIntervalAndDodgeOffset=function(e,a){var o=this,s=o.intervalPadding,l=o.dodgePadding,c=o.xDimensionLegenth,u=o.groupNum,f=s/c,d=l/c,g=((1-f*(u-1))/u-d*(e-1))/e,v=((1/2+a)*g+a*d+1/2*f)*u-f/2;return v},r.prototype.getDistribution=function(e){var a=this.adjustDataArray,o=this.cacheMap,s=o[e];return s||(s={},each$1(a,function(l,c){var u=valuesOfKey(l,e);u.length||u.push(0),each$1(u,function(f){s[f]||(s[f]=[]),s[f].push(c)})}),o[e]=s),s},r}(Adjust);function randomNumber(n,r){return(r-n)*Math.random()+n}var Jitter=function(n){__extends$6(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.process=function(e){var a=clone(e),o=flatten(a);return this.adjustData(a,o),a},r.prototype.adjustDim=function(e,a,o){var s=this,l=this.groupData(o,e);return each$1(l,function(c,u){return s.adjustGroup(c,e,parseFloat(u),a)})},r.prototype.getAdjustOffset=function(e){var a=e.pre,o=e.next,s=(o-a)*GAP;return randomNumber(a+s,o-s)},r.prototype.adjustGroup=function(e,a,o,s){var l=this,c=this.getAdjustRange(a,o,s);return each$1(e,function(u){u[a]=l.getAdjustOffset(c)}),e},r}(Adjust),Cache=default_1,Stack=function(n){__extends$6(r,n);function r(e){var a=n.call(this,e)||this,o=e.adjustNames,s=o===void 0?["y"]:o,l=e.height,c=l===void 0?NaN:l,u=e.size,f=u===void 0?10:u,d=e.reverseOrder,g=d===void 0?!1:d;return a.adjustNames=s,a.height=c,a.size=f,a.reverseOrder=g,a}return r.prototype.process=function(e){var a=this,o=a.yField,s=a.reverseOrder,l=o?this.processStack(e):this.processOneDimStack(e);return s?this.reverse(l):l},r.prototype.reverse=function(e){return e.slice(0).reverse()},r.prototype.processStack=function(e){var a=this,o=a.xField,s=a.yField,l=a.reverseOrder,c=l?this.reverse(e):e,u=new Cache,f=new Cache;return c.map(function(d){return d.map(function(g){var v,p=get(g,o,0),y=get(g,[s]),m=p.toString();if(y=isArray$4(y)?y[1]:y,!isNil(y)){var x=y>=0?u:f;x.has(m)||x.set(m,0);var A=x.get(m),_=y+A;return x.set(m,_),__assign$7(__assign$7({},g),(v={},v[s]=[A,_],v))}return g})})},r.prototype.processOneDimStack=function(e){var a=this,o=this,s=o.xField,l=o.height,c=o.reverseOrder,u="y",f=c?this.reverse(e):e,d=new Cache;return f.map(function(g){return g.map(function(v){var p,y=a.size,m=v[s],x=y*2/l;d.has(m)||d.set(m,x/2);var A=d.get(m);return d.set(m,A+x),__assign$7(__assign$7({},v),(p={},p[u]=A,p))})})},r}(Adjust),Symmetric=function(n){__extends$6(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.process=function(e){var a=flatten(e),o=this,s=o.xField,l=o.yField,c=this.getXValuesMaxMap(a),u=Math.max.apply(Math,Object.keys(c).map(function(f){return c[f]}));return map$2(e,function(f){return map$2(f,function(d){var g,v,p=d[l],y=d[s];if(isArray$4(p)){var m=(u-c[y])/2;return __assign$7(__assign$7({},d),(g={},g[l]=map$2(p,function(A){return m+A}),g))}var x=(u-p)/2;return __assign$7(__assign$7({},d),(v={},v[l]=[x,p+x],v))})})},r.prototype.getXValuesMaxMap=function(e){var a=this,o=this,s=o.xField,l=o.yField,c=groupBy(e,function(u){return u[s]});return mapValues(c,function(u){return a.getDimMaxValue(u,l)})},r.prototype.getDimMaxValue=function(e,a){var o=map$2(e,function(l){return get(l,a,[])}),s=flatten(o);return Math.max.apply(Math,s)},r}(Adjust);registerAdjust("Dodge",Dodge);registerAdjust("Jitter",Jitter);registerAdjust("Stack",Stack);registerAdjust("Symmetric",Symmetric);var toScaleString=function(n,r){return isString$1(r)?r:n.invert(n.scale(r))},Attribute=function(){function n(r){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(r)}return n.prototype.mapping=function(){for(var r=this,e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var o=e.map(function(s,l){return r._toOriginParam(s,r.scales[l])});return this.callback.apply(this,o)},n.prototype.getLinearValue=function(r){var e=this.values.length-1,a=Math.floor(e*r),o=e*r-a,s=this.values[a],l=a===e?s:this.values[a+1];return s+(l-s)*o},n.prototype.getNames=function(){for(var r=this.scales,e=this.names,a=Math.min(r.length,e.length),o=[],s=0;s<a;s+=1)o.push(e[s]);return o},n.prototype.getFields=function(){return this.scales.map(function(r){return r.field})},n.prototype.getScale=function(r){return this.scales[this.names.indexOf(r)]},n.prototype.defaultCallback=function(){for(var r=this,e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return e.length===0?this.values:e.map(function(o,s){var l=r.scales[s];return l.type==="identity"?l.values[0]:r._getAttributeValue(l,o)})},n.prototype._parseCfg=function(r){var e=this,a=r.type,o=a===void 0?"base":a,s=r.names,l=s===void 0?[]:s,c=r.scales,u=c===void 0?[]:c,f=r.values,d=f===void 0?[]:f,g=r.callback;this.type=o,this.scales=u,this.values=d,this.names=l,this.callback=function(){for(var v=[],p=0;p<arguments.length;p++)v[p]=arguments[p];if(g){var y=g.apply(void 0,v);if(!isNil(y))return[y]}return e.defaultCallback.apply(e,v)}},n.prototype._getAttributeValue=function(r,e){if(r.isCategory&&!this.linear){var a=r.translate(e);return this.values[a%this.values.length]}var o=r.scale(e);return this.getLinearValue(o)},n.prototype._toOriginParam=function(r,e){return e.isLinear?r:isArray$4(r)?r.map(function(a){return toScaleString(e,a)}):toScaleString(e,r)},n}(),RGB_REG=/rgba?\(([\s.,0-9]+)\)/,regexLG$2=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG$2=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexColorStop$2=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,isGradientColor=function(n){return/^[r,R,L,l]{1}[\s]*\(/.test(n)},createTmp=function(){var n=document.createElement("i");return n.title="Web Colour Picker",n.style.display="none",document.body.appendChild(n),n},getValue=function(n,r,e,a){return n[a]+(r[a]-n[a])*e};function arr2rgb(n){return"#"+toHex(n[0])+toHex(n[1])+toHex(n[2])}var rgb2arr=function(n){return[parseInt(n.substr(1,2),16),parseInt(n.substr(3,2),16),parseInt(n.substr(5,2),16)]},toHex=function(n){var r=Math.round(n).toString(16);return r.length===1?"0"+r:r},calColor=function(n,r){var e=isNaN(Number(r))||r<0?0:r>1?1:Number(r),a=n.length-1,o=Math.floor(a*e),s=a*e-o,l=n[o],c=o===a?l:n[o+1];return arr2rgb([getValue(l,c,s,0),getValue(l,c,s,1),getValue(l,c,s,2)])},iEl,toRGB=function(n){if(n[0]==="#"&&n.length===7)return n;iEl||(iEl=createTmp()),iEl.style.color=n;var r=document.defaultView.getComputedStyle(iEl,"").getPropertyValue("color"),e=RGB_REG.exec(r),a=e[1].split(/\s*,\s*/).map(function(o){return Number(o)});return r=arr2rgb(a),r},gradient=function(n){var r=isString$1(n)?n.split("-"):n,e=map$2(r,function(a){return rgb2arr(a.indexOf("#")===-1?toRGB(a):a)});return function(a){return calColor(e,a)}},toCSSGradient=function(n){if(isGradientColor(n)){var r,e=void 0;if(n[0]==="l"){var a=regexLG$2.exec(n),o=+a[1]+90;e=a[2],r="linear-gradient("+o+"deg, "}else if(n[0]==="r"){r="radial-gradient(";var a=regexRG$2.exec(n);e=a[4]}var s=e.match(regexColorStop$2);return each$1(s,function(l,c){var u=l.split(":");r+=u[1]+" "+u[0]*100+"%",c!==s.length-1&&(r+=", ")}),r+=")",r}return n};const colorUtil={rgb2arr,gradient,toRGB:memoize(toRGB),toCSSGradient};var Color=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.type="color",a.names=["color"],isString$1(a.values)&&(a.linear=!0),a.gradient=colorUtil.gradient(a.values),a}return r.prototype.getLinearValue=function(e){return this.gradient(e)},r}(Attribute),Opacity=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.type="opacity",a.names=["opacity"],a}return r}(Attribute),Position=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.names=["x","y"],a.type="position",a}return r.prototype.mapping=function(e,a){var o=this.scales,s=o[0],l=o[1];return isNil(e)||isNil(a)?[]:[isArray$4(e)?e.map(function(c){return s.scale(c)}):s.scale(e),isArray$4(a)?a.map(function(c){return l.scale(c)}):l.scale(a)]},r}(Attribute),Shape$2=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.type="shape",a.names=["shape"],a}return r.prototype.getLinearValue=function(e){var a=Math.round((this.values.length-1)*e);return this.values[a]},r}(Attribute),Size=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.type="size",a.names=["size"],a}return r}(Attribute),methodCache={};function getTickMethod(n){return methodCache[n]}function registerTickMethod(n,r){methodCache[n]=r}var Scale=function(){function n(r){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=r,this.initCfg(),this.init()}return n.prototype.translate=function(r){return r},n.prototype.change=function(r){mix(this.__cfg__,r),this.init()},n.prototype.clone=function(){return this.constructor(this.__cfg__)},n.prototype.getTicks=function(){var r=this;return map$2(this.ticks,function(e,a){return isObject$1(e)?e:{text:r.getText(e,a),tickValue:e,value:r.scale(e)}})},n.prototype.getText=function(r,e){var a=this.formatter,o=a?a(r,e):r;return isNil(o)||!isFunction$1(o.toString)?"":o.toString()},n.prototype.getConfig=function(r){return this.__cfg__[r]},n.prototype.init=function(){mix(this,this.__cfg__),this.setDomain(),isEmpty(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},n.prototype.initCfg=function(){},n.prototype.setDomain=function(){},n.prototype.calculateTicks=function(){var r=this.tickMethod,e=[];if(isString$1(r)){var a=getTickMethod(r);if(!a)throw new Error("There is no method to to calculate ticks!");e=a(this)}else isFunction$1(r)&&(e=r(this));return e},n.prototype.rangeMin=function(){return this.range[0]},n.prototype.rangeMax=function(){return this.range[1]},n.prototype.calcPercent=function(r,e,a){return isNumber$2(r)?(r-e)/(a-e):NaN},n.prototype.calcValue=function(r,e,a){return e+r*(a-e)},n}(),Category$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return r.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},r.prototype.translate=function(e){this.buildIndexMap();var a=this.translateIndexMap.get(e);return a===void 0&&(a=isNumber$2(e)?e:NaN),a},r.prototype.scale=function(e){var a=this.translate(e),o=this.calcPercent(a,this.min,this.max);return this.calcValue(o,this.rangeMin(),this.rangeMax())},r.prototype.invert=function(e){var a=this.max-this.min,o=this.calcPercent(e,this.rangeMin(),this.rangeMax()),s=Math.round(a*o)+this.min;return s<this.min||s>this.max?NaN:this.values[s]},r.prototype.getText=function(e){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];var s=e;return isNumber$2(e)&&!this.values.includes(e)&&(s=this.values[s]),n.prototype.getText.apply(this,__spreadArrays$3([s],a))},r.prototype.initCfg=function(){this.tickMethod="cat"},r.prototype.setDomain=function(){if(isNil(this.getConfig("min"))&&(this.min=0),isNil(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},r}(Scale),token=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,twoDigitsOptional="\\d\\d?",twoDigits="\\d\\d",threeDigits="\\d{3}",fourDigits="\\d{4}",word="[^\\s]+",literal=/\[([^]*?)\]/gm;function shorten(n,r){for(var e=[],a=0,o=n.length;a<o;a++)e.push(n[a].substr(0,r));return e}var monthUpdate=function(n){return function(r,e){var a=e[n].map(function(s){return s.toLowerCase()}),o=a.indexOf(r.toLowerCase());return o>-1?o:null}};function assign(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var a=0,o=r;a<o.length;a++){var s=o[a];for(var l in s)n[l]=s[l]}return n}var dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort=shorten(monthNames,3),dayNamesShort=shorten(dayNames,3),defaultI18n={dayNamesShort,dayNames,monthNamesShort,monthNames,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][n%10>3?0:(n-n%10!==10?1:0)*n%10]}},globalI18n=assign({},defaultI18n),setGlobalDateI18n=function(n){return globalI18n=assign(globalI18n,n)},regexEscape=function(n){return n.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},pad=function(n,r){for(r===void 0&&(r=2),n=String(n);n.length<r;)n="0"+n;return n},formatFlags={D:function(n){return String(n.getDate())},DD:function(n){return pad(n.getDate())},Do:function(n,r){return r.DoFn(n.getDate())},d:function(n){return String(n.getDay())},dd:function(n){return pad(n.getDay())},ddd:function(n,r){return r.dayNamesShort[n.getDay()]},dddd:function(n,r){return r.dayNames[n.getDay()]},M:function(n){return String(n.getMonth()+1)},MM:function(n){return pad(n.getMonth()+1)},MMM:function(n,r){return r.monthNamesShort[n.getMonth()]},MMMM:function(n,r){return r.monthNames[n.getMonth()]},YY:function(n){return pad(String(n.getFullYear()),4).substr(2)},YYYY:function(n){return pad(n.getFullYear(),4)},h:function(n){return String(n.getHours()%12||12)},hh:function(n){return pad(n.getHours()%12||12)},H:function(n){return String(n.getHours())},HH:function(n){return pad(n.getHours())},m:function(n){return String(n.getMinutes())},mm:function(n){return pad(n.getMinutes())},s:function(n){return String(n.getSeconds())},ss:function(n){return pad(n.getSeconds())},S:function(n){return String(Math.round(n.getMilliseconds()/100))},SS:function(n){return pad(Math.round(n.getMilliseconds()/10),2)},SSS:function(n){return pad(n.getMilliseconds(),3)},a:function(n,r){return n.getHours()<12?r.amPm[0]:r.amPm[1]},A:function(n,r){return n.getHours()<12?r.amPm[0].toUpperCase():r.amPm[1].toUpperCase()},ZZ:function(n){var r=n.getTimezoneOffset();return(r>0?"-":"+")+pad(Math.floor(Math.abs(r)/60)*100+Math.abs(r)%60,4)},Z:function(n){var r=n.getTimezoneOffset();return(r>0?"-":"+")+pad(Math.floor(Math.abs(r)/60),2)+":"+pad(Math.abs(r)%60,2)}},monthParse=function(n){return+n-1},emptyDigits=[null,twoDigitsOptional],emptyWord=[null,word],amPm=["isPm",word,function(n,r){var e=n.toLowerCase();return e===r.amPm[0]?0:e===r.amPm[1]?1:null}],timezoneOffset=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(n){var r=(n+"").match(/([+-]|\d\d)/gi);if(r){var e=+r[1]*60+parseInt(r[2],10);return r[0]==="+"?e:-e}return 0}],parseFlags={D:["day",twoDigitsOptional],DD:["day",twoDigits],Do:["day",twoDigitsOptional+word,function(n){return parseInt(n,10)}],M:["month",twoDigitsOptional,monthParse],MM:["month",twoDigits,monthParse],YY:["year",twoDigits,function(n){var r=new Date,e=+(""+r.getFullYear()).substr(0,2);return+(""+(+n>68?e-1:e)+n)}],h:["hour",twoDigitsOptional,void 0,"isPm"],hh:["hour",twoDigits,void 0,"isPm"],H:["hour",twoDigitsOptional],HH:["hour",twoDigits],m:["minute",twoDigitsOptional],mm:["minute",twoDigits],s:["second",twoDigitsOptional],ss:["second",twoDigits],YYYY:["year",fourDigits],S:["millisecond","\\d",function(n){return+n*100}],SS:["millisecond",twoDigits,function(n){return+n*10}],SSS:["millisecond",threeDigits],d:emptyDigits,dd:emptyDigits,ddd:emptyWord,dddd:emptyWord,MMM:["month",word,monthUpdate("monthNamesShort")],MMMM:["month",word,monthUpdate("monthNames")],a:amPm,A:amPm,ZZ:timezoneOffset,Z:timezoneOffset},globalMasks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},setGlobalDateMasks=function(n){return assign(globalMasks,n)},format=function(n,r,e){if(r===void 0&&(r=globalMasks.default),e===void 0&&(e={}),typeof n=="number"&&(n=new Date(n)),Object.prototype.toString.call(n)!=="[object Date]"||isNaN(n.getTime()))throw new Error("Invalid Date pass to format");r=globalMasks[r]||r;var a=[];r=r.replace(literal,function(s,l){return a.push(l),"@@@"});var o=assign(assign({},globalI18n),e);return r=r.replace(token,function(s){return formatFlags[s](n,o)}),r.replace(/@@@/g,function(){return a.shift()})};function parse$1(n,r,e){if(e===void 0&&(e={}),typeof r!="string")throw new Error("Invalid format in fecha parse");if(r=globalMasks[r]||r,n.length>1e3)return null;var a=new Date,o={year:a.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],l=[],c=r.replace(literal,function(S,C){return l.push(regexEscape(C)),"@@@"}),u={},f={};c=regexEscape(c).replace(token,function(S){var C=parseFlags[S],E=C[0],T=C[1],w=C[3];if(u[E])throw new Error("Invalid format. "+E+" specified twice in format");return u[E]=!0,w&&(f[w]=!0),s.push(C),"("+T+")"}),Object.keys(f).forEach(function(S){if(!u[S])throw new Error("Invalid format. "+S+" is required in specified format")}),c=c.replace(/@@@/g,function(){return l.shift()});var d=n.match(new RegExp(c,"i"));if(!d)return null;for(var g=assign(assign({},globalI18n),e),v=1;v<d.length;v++){var p=s[v-1],y=p[0],m=p[2],x=m?m(d[v],g):+d[v];if(x==null)return null;o[y]=x}o.isPm===1&&o.hour!=null&&+o.hour!=12?o.hour=+o.hour+12:o.isPm===0&&+o.hour==12&&(o.hour=0);var A;if(o.timezoneOffset==null){A=new Date(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond);for(var _=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],v=0,b=_.length;v<b;v++)if(u[_[v][0]]&&o[_[v][0]]!==A[_[v][1]]())return null}else if(A=new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute-o.timezoneOffset,o.second,o.millisecond)),o.month>11||o.month<0||o.day>31||o.day<1||o.hour>23||o.hour<0||o.minute>59||o.minute<0||o.second>59||o.second<0)return null;return A}var fecha={format,parse:parse$1,defaultI18n,setGlobalDateI18n,setGlobalDateMasks};const fecha1=Object.freeze(Object.defineProperty({__proto__:null,assign,default:fecha,defaultI18n,format,parse:parse$1,setGlobalDateI18n,setGlobalDateMasks},Symbol.toStringTag,{value:"Module"}));function bisector(n){return function(r,e,a,o){for(var s=isNil(a)?0:a,l=isNil(o)?r.length:o;s<l;){var c=s+l>>>1;n(r[c])>e?l=c:s=c+1}return s}}var FORMAT_METHOD="format";function timeFormat(n,r){var e=fecha1[FORMAT_METHOD]||fecha[FORMAT_METHOD];return e(n,r)}function toTimeStamp(n){return isString$1(n)&&(n.indexOf("T")>0?n=new Date(n).getTime():n=new Date(n.replace(/-/gi,"/")).getTime()),isDate(n)&&(n=n.getTime()),n}var SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,MONTH=DAY*31,YEAR=DAY*365,intervals=[["HH:mm:ss",SECOND],["HH:mm:ss",SECOND*10],["HH:mm:ss",SECOND*30],["HH:mm",MINUTE],["HH:mm",MINUTE*10],["HH:mm",MINUTE*30],["HH",HOUR],["HH",HOUR*6],["HH",HOUR*12],["YYYY-MM-DD",DAY],["YYYY-MM-DD",DAY*4],["YYYY-WW",DAY*7],["YYYY-MM",MONTH],["YYYY-MM",MONTH*4],["YYYY-MM",MONTH*6],["YYYY",DAY*380]];function getTickInterval(n,r,e){var a=(r-n)/e,o=bisector(function(l){return l[1]})(intervals,a)-1,s=intervals[o];return o<0?s=intervals[0]:o>=intervals.length&&(s=last(intervals)),s}var TimeCat=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="timeCat",e}return r.prototype.translate=function(e){e=toTimeStamp(e);var a=this.values.indexOf(e);return a===-1&&(isNumber$2(e)&&e<this.values.length?a=e:a=NaN),a},r.prototype.getText=function(e,a){var o=this.translate(e);if(o>-1){var s=this.values[o],l=this.formatter;return s=l?l(s,a):timeFormat(s,this.mask),s}return e},r.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},r.prototype.setDomain=function(){var e=this.values;each$1(e,function(a,o){e[o]=toTimeStamp(a)}),e.sort(function(a,o){return a-o}),n.prototype.setDomain.call(this)},r}(Category$1),Continuous=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.isContinuous=!0,e}return r.prototype.scale=function(e){if(isNil(e))return NaN;var a=this.rangeMin(),o=this.rangeMax(),s=this.max,l=this.min;if(s===l)return a;var c=this.getScalePercent(e);return a+c*(o-a)},r.prototype.init=function(){n.prototype.init.call(this);var e=this.ticks,a=head(e),o=last(e);a<this.min&&(this.min=a),o>this.max&&(this.max=o),isNil(this.minLimit)||(this.min=a),isNil(this.maxLimit)||(this.max=o)},r.prototype.setDomain=function(){var e=getRange(this.values),a=e.min,o=e.max;isNil(this.min)&&(this.min=a),isNil(this.max)&&(this.max=o),this.min>this.max&&(this.min=a,this.max=o)},r.prototype.calculateTicks=function(){var e=this,a=n.prototype.calculateTicks.call(this);return this.nice||(a=filter(a,function(o){return o>=e.min&&o<=e.max})),a},r.prototype.getScalePercent=function(e){var a=this.max,o=this.min;return(e-o)/(a-o)},r.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},r}(Scale),Linear=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return r.prototype.invert=function(e){var a=this.getInvertPercent(e);return this.min+a*(this.max-this.min)},r.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},r}(Continuous);function calBase(n,r){var e=Math.E,a;return r>=0?a=Math.pow(e,Math.log(r)/n):a=Math.pow(e,Math.log(-r)/n)*-1,a}function log$1(n,r){return n===1?1:Math.log(r)/Math.log(n)}function getLogPositiveMin(n,r,e){isNil(e)&&(e=Math.max.apply(null,n));var a=e;return each$1(n,function(o){o>0&&o<a&&(a=o)}),a===e&&(a=e/r),a>1&&(a=1),a}var Log=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="log",e}return r.prototype.invert=function(e){var a=this.base,o=log$1(a,this.max),s=this.rangeMin(),l=this.rangeMax()-s,c,u=this.positiveMin;if(u){if(e===0)return 0;c=log$1(a,u/a);var f=1/(o-c)*l;if(e<f)return e/f*u}else c=log$1(a,this.min);var d=(e-s)/l,g=d*(o-c)+c;return Math.pow(a,g)},r.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},r.prototype.setDomain=function(){n.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=getLogPositiveMin(this.values,this.base,this.max))},r.prototype.getScalePercent=function(e){var a=this.max,o=this.min;if(a===o||e<=0)return 0;var s=this.base,l=this.positiveMin;l&&(o=l*1/s);var c;return e<l?c=e/l/(log$1(s,a)-log$1(s,o)):c=(log$1(s,e)-log$1(s,o))/(log$1(s,a)-log$1(s,o)),c},r}(Continuous),Pow=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="pow",e}return r.prototype.invert=function(e){var a=this.getInvertPercent(e),o=this.exponent,s=calBase(o,this.max),l=calBase(o,this.min),c=a*(s-l)+l,u=c>=0?1:-1;return Math.pow(c,o)*u},r.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},r.prototype.getScalePercent=function(e){var a=this.max,o=this.min;if(a===o)return 0;var s=this.exponent,l=(calBase(s,e)-calBase(s,o))/(calBase(s,a)-calBase(s,o));return l},r}(Continuous),Time=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="time",e}return r.prototype.getText=function(e,a){var o=this.translate(e),s=this.formatter;return s?s(o,a):timeFormat(o,this.mask)},r.prototype.scale=function(e){var a=e;return(isString$1(a)||isDate(a))&&(a=this.translate(a)),n.prototype.scale.call(this,a)},r.prototype.translate=function(e){return toTimeStamp(e)},r.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},r.prototype.setDomain=function(){var e=this.values,a=this.getConfig("min"),o=this.getConfig("max");if((!isNil(a)||!isNumber$2(a))&&(this.min=this.translate(this.min)),(!isNil(o)||!isNumber$2(o))&&(this.max=this.translate(this.max)),e&&e.length){var s=[],l=1/0,c=l,u=0;each$1(e,function(f){var d=toTimeStamp(f);if(isNaN(d))throw new TypeError("Invalid Time: "+f+" in time scale!");l>d?(c=l,l=d):c>d&&(c=d),u<d&&(u=d),s.push(d)}),e.length>1&&(this.minTickInterval=c-l),isNil(a)&&(this.min=l),isNil(o)&&(this.max=u)}},r}(Linear),Quantize=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="quantize",e}return r.prototype.invert=function(e){var a=this.ticks,o=a.length,s=this.getInvertPercent(e),l=Math.floor(s*(o-1));if(l>=o-1)return last(a);if(l<0)return head(a);var c=a[l],u=a[l+1],f=l/(o-1),d=(l+1)/(o-1);return c+(s-f)/(d-f)*(u-c)},r.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},r.prototype.calculateTicks=function(){var e=n.prototype.calculateTicks.call(this);return this.nice||(last(e)!==this.max&&e.push(this.max),head(e)!==this.min&&e.unshift(this.min)),e},r.prototype.getScalePercent=function(e){var a=this.ticks;if(e<head(a))return 0;if(e>last(a))return 1;var o=0;return each$1(a,function(s,l){if(e>=s)o=l;else return!1}),o/(a.length-1)},r}(Continuous),Quantile=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="quantile",e}return r.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},r}(Quantize),map={};function getClass(n){return map[n]}function registerClass(n,r){if(getClass(n))throw new Error("type '"+n+"' existed.");map[n]=r}var Identity=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return r.prototype.calculateTicks=function(){return this.values},r.prototype.scale=function(e){return this.values[0]!==e&&isNumber$2(e)?e:this.range[0]},r.prototype.invert=function(e){var a=this.range;return e<a[0]||e>a[1]?NaN:this.values[0]},r}(Scale);function calculateCatTicks(n){var r=n.values,e=n.tickInterval,a=n.tickCount,o=n.showLast;if(isNumber$2(e)){var s=filter(r,function(y,m){return m%e===0}),l=last(r);return o&&last(s)!==l&&s.push(l),s}var c=r.length,u=n.min,f=n.max;if(isNil(u)&&(u=0),isNil(f)&&(f=r.length-1),!isNumber$2(a)||a>=c)return r.slice(u,f+1);if(a<=0||f<=0)return[];for(var d=a===1?c:Math.floor(c/(a-1)),g=[],v=u,p=0;p<a&&!(v>=f);p++)v=Math.min(u+p*d,f),p===a-1&&o?g.push(r[f]):g.push(r[v]);return g}function d3Linear(n){var r=n.min,e=n.max,a=n.nice,o=n.tickCount,s=new D3Linear;return s.domain([r,e]),a&&s.nice(o),s.ticks(o)}var DEFAULT_COUNT=5,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),D3Linear=function(){function n(){this._domain=[0,1]}return n.prototype.domain=function(r){return r?(this._domain=Array.from(r,Number),this):this._domain.slice()},n.prototype.nice=function(r){var e,a;r===void 0&&(r=DEFAULT_COUNT);var o=this._domain.slice(),s=0,l=this._domain.length-1,c=this._domain[s],u=this._domain[l],f;return u<c&&(e=[u,c],c=e[0],u=e[1],a=[l,s],s=a[0],l=a[1]),f=tickIncrement(c,u,r),f>0?(c=Math.floor(c/f)*f,u=Math.ceil(u/f)*f,f=tickIncrement(c,u,r)):f<0&&(c=Math.ceil(c*f)/f,u=Math.floor(u*f)/f,f=tickIncrement(c,u,r)),f>0?(o[s]=Math.floor(c/f)*f,o[l]=Math.ceil(u/f)*f,this.domain(o)):f<0&&(o[s]=Math.ceil(c*f)/f,o[l]=Math.floor(u*f)/f,this.domain(o)),this},n.prototype.ticks=function(r){return r===void 0&&(r=DEFAULT_COUNT),d3ArrayTicks(this._domain[0],this._domain[this._domain.length-1],r||DEFAULT_COUNT)},n}();function d3ArrayTicks(n,r,e){var a,o=-1,s,l,c;if(r=+r,n=+n,e=+e,n===r&&e>0)return[n];if((a=r<n)&&(s=n,n=r,r=s),(c=tickIncrement(n,r,e))===0||!isFinite(c))return[];if(c>0)for(n=Math.ceil(n/c),r=Math.floor(r/c),l=new Array(s=Math.ceil(r-n+1));++o<s;)l[o]=(n+o)*c;else for(n=Math.floor(n*c),r=Math.ceil(r*c),l=new Array(s=Math.ceil(n-r+1));++o<s;)l[o]=(n-o)/c;return a&&l.reverse(),l}function tickIncrement(n,r,e){var a=(r-n)/Math.max(0,e),o=Math.floor(Math.log(a)/Math.LN10),s=a/Math.pow(10,o);return o>=0?(s>=e10?10:s>=e5?5:s>=e2?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(s>=e10?10:s>=e5?5:s>=e2?2:1)}function snapMultiple(n,r,e){var a;return e==="ceil"?a=Math.ceil(n/r):e==="floor"?a=Math.floor(n/r):a=Math.round(n/r),a*r}function intervalTicks(n,r,e){var a=snapMultiple(n,e,"floor"),o=snapMultiple(r,e,"ceil");a=fixedBase(a,e),o=fixedBase(o,e);for(var s=[],l=Math.max((o-a)/(Math.pow(2,12)-1),e),c=a;c<=o;c=c+l){var u=fixedBase(c,l);s.push(u)}return{min:a,max:o,ticks:s}}function strictLimit(n,r,e){var a,o=n.minLimit,s=n.maxLimit,l=n.min,c=n.max,u=n.tickCount,f=u===void 0?5:u,d=isNil(o)?isNil(r)?l:r:o,g=isNil(s)?isNil(e)?c:e:s;if(d>g&&(a=[d,g],g=a[0],d=a[1]),f<=2)return[d,g];for(var v=(g-d)/(f-1),p=[],y=0;y<f;y++)p.push(d+v*y);return p}function d3LinearTickMethod(n){var r=n.min,e=n.max,a=n.tickInterval,o=n.minLimit,s=n.maxLimit,l=d3Linear(n);return!isNil(o)||!isNil(s)?strictLimit(n,head(l),last(l)):a?intervalTicks(r,e,a).ticks:l}function prettyNumber(n){return Math.abs(n)<1e-15?n:parseFloat(n.toFixed(15))}var DEFAULT_Q=[1,5,2,2.5,4,3],eps=Number.EPSILON*100;function mod(n,r){return(n%r+r)%r}function round(n){return Math.round(n*1e12)/1e12}function simplicity(n,r,e,a,o,s){var l=size(r),c=indexOf(r,n),u=0,f=mod(a,s);return(f<eps||s-f<eps)&&a<=0&&o>=0&&(u=1),1-c/(l-1)-e+u}function simplicityMax(n,r,e){var a=size(r),o=indexOf(r,n),s=1;return 1-o/(a-1)-e+s}function density(n,r,e,a,o,s){var l=(n-1)/(s-o),c=(r-1)/(Math.max(s,a)-Math.min(e,o));return 2-Math.max(l/c,c/l)}function densityMax(n,r){return n>=r?2-(n-1)/(r-1):1}function coverage(n,r,e,a){var o=r-n;return 1-.5*(Math.pow(r-a,2)+Math.pow(n-e,2))/Math.pow(.1*o,2)}function coverageMax(n,r,e){var a=r-n;if(e>a){var o=(e-a)/2;return 1-Math.pow(o,2)/Math.pow(.1*a,2)}return 1}function legibility(){return 1}function extended(n,r,e,a,o,s){e===void 0&&(e=5),a===void 0&&(a=!0),o===void 0&&(o=DEFAULT_Q),s===void 0&&(s=[.25,.2,.5,.05]);var l=e<0?0:Math.round(e);if(Number.isNaN(n)||Number.isNaN(r)||typeof n!="number"||typeof r!="number"||!l)return{min:0,max:0,ticks:[]};if(r-n<1e-15||l===1)return{min:n,max:r,ticks:[n]};if(r-n>1e148){var c=e||5,u=(r-n)/c;return{min:n,max:r,ticks:Array(c).fill(null).map(function(X,tt){return prettyNumber(n+u*tt)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},d=1;d<1/0;){for(var g=0;g<o.length;g+=1){var v=o[g],p=simplicityMax(v,o,d);if(s[0]*p+s[1]+s[2]+s[3]<f.score){d=1/0;break}for(var y=2;y<1/0;){var m=densityMax(y,l);if(s[0]*p+s[1]+s[2]*m+s[3]<f.score)break;for(var x=(r-n)/(y+1)/d/v,A=Math.ceil(Math.log10(x));A<1/0;){var _=d*v*Math.pow(10,A),b=coverageMax(n,r,_*(y-1));if(s[0]*p+s[1]*b+s[2]*m+s[3]<f.score)break;var S=Math.floor(r/_)*d-(y-1)*d,C=Math.ceil(n/_)*d;if(S<=C)for(var c=C-S,E=0;E<=c;E+=1){var T=S+E,w=T*(_/d),L=w+_*(y-1),M=_,O=simplicity(v,o,d,w,L,M),P=coverage(n,r,w,L),N=density(y,l,n,r,w,L),G=legibility(),Y=s[0]*O+s[1]*P+s[2]*N+s[3]*G;Y>f.score&&(!a||w<=n&&L>=r)&&(f.lmin=w,f.lmax=L,f.lstep=M,f.score=Y)}A+=1}y+=1}}d+=1}var F=prettyNumber(f.lmax),z=prettyNumber(f.lmin),W=prettyNumber(f.lstep),j=Math.floor(round((F-z)/W))+1,U=new Array(j);U[0]=prettyNumber(z);for(var g=1;g<j;g++)U[g]=prettyNumber(U[g-1]+W);return{min:Math.min(n,head(U)),max:Math.max(r,last(U)),ticks:U}}function linear$1(n){var r=n.min,e=n.max,a=n.tickCount,o=n.nice,s=n.tickInterval,l=n.minLimit,c=n.maxLimit,u=extended(r,e,a,o).ticks;return!isNil(l)||!isNil(c)?strictLimit(n,head(u),last(u)):s?intervalTicks(r,e,s).ticks:u}function calculateLogTicks(n){var r=n.base,e=n.tickCount,a=n.min,o=n.max,s=n.values,l,c=log$1(r,o);if(a>0)l=Math.floor(log$1(r,a));else{var u=getLogPositiveMin(s,r,o);l=Math.floor(log$1(r,u))}for(var f=c-l,d=Math.ceil(f/e),g=[],v=l;v<c+d;v=v+d)g.push(Math.pow(r,v));return a<=0&&g.unshift(0),g}function pretty(n,r,e){if(e===void 0&&(e=5),n===r)return{max:r,min:n,ticks:[n]};var a=e<0?0:Math.round(e);if(a===0)return{max:r,min:n,ticks:[]};var o=1.5,s=.5+1.5*o,l=r-n,c=l/a,u=Math.pow(10,Math.floor(Math.log10(c))),f=u;2*u-c<o*(c-f)&&(f=2*u,5*u-c<s*(c-f)&&(f=5*u,10*u-c<o*(c-f)&&(f=10*u)));for(var d=Math.ceil(r/f),g=Math.floor(n/f),v=Math.max(d*f,r),p=Math.min(g*f,n),y=Math.floor((v-p)/f)+1,m=new Array(y),x=0;x<y;x++)m[x]=prettyNumber(p+x*f);return{min:p,max:v,ticks:m}}function calculatePowTicks(n){var r=n.exponent,e=n.tickCount,a=Math.ceil(calBase(r,n.max)),o=Math.floor(calBase(r,n.min)),s=pretty(o,a,e).ticks;return s.map(function(l){var c=l>=0?1:-1;return Math.pow(l,r)*c})}function quantileSorted$1(n,r){var e=n.length*r;return r===1?n[n.length-1]:r===0?n[0]:e%1!==0?n[Math.ceil(e)-1]:n.length%2===0?(n[e-1]+n[e])/2:n[e]}function calculateTicks(n){var r=n.tickCount,e=n.values;if(!e||!e.length)return[];for(var a=e.slice().sort(function(c,u){return c-u}),o=[],s=0;s<r;s++){var l=s/(r-1);o.push(quantileSorted$1(a,l))}return o}function linearPretty(n){var r=n.min,e=n.max,a=n.tickCount,o=n.tickInterval,s=n.minLimit,l=n.maxLimit,c=pretty(r,e,a).ticks;return!isNil(s)||!isNil(l)?strictLimit(n,head(c),last(c)):o?intervalTicks(r,e,o).ticks:c}function calculateTimeTicks(n){var r=n.min,e=n.max,a=n.minTickInterval,o=n.tickInterval,s=n.tickCount;if(o)s=Math.ceil((e-r)/o);else{o=getTickInterval(r,e,s)[1];var l=(e-r)/o,c=l/s;c>1&&(o=o*Math.ceil(c)),a&&o<a&&(o=a)}o=Math.max(Math.floor((e-r)/(Math.pow(2,12)-1)),o);for(var u=[],f=r;f<e+o;f+=o)u.push(f);return u}function timeCat(n){var r=calculateCatTicks(__assign$8({showLast:!0},n));return r}function getYear(n){return new Date(n).getFullYear()}function createYear(n){return new Date(n,0,1).getTime()}function getMonth(n){return new Date(n).getMonth()}function diffMonth(n,r){var e=getYear(n),a=getYear(r),o=getMonth(n),s=getMonth(r);return(a-e)*12+(s-o)%12}function creatMonth(n,r){return new Date(n,r,1).getTime()}function diffDay(n,r){return Math.ceil((r-n)/DAY)}function diffHour(n,r){return Math.ceil((r-n)/HOUR)}function diffMinus(n,r){return Math.ceil((r-n)/(60*1e3))}function timePretty(n){var r=n.min,e=n.max,a=n.minTickInterval,o=n.tickCount,s=n.tickInterval,l=[];s||(s=(e-r)/o,a&&s<a&&(s=a)),s=Math.max(Math.floor((e-r)/(Math.pow(2,12)-1)),s);var c=getYear(r);if(s>YEAR)for(var u=getYear(e),f=Math.ceil(s/YEAR),d=c;d<=u+f;d=d+f)l.push(createYear(d));else if(s>MONTH)for(var g=Math.ceil(s/MONTH),v=getMonth(r),p=diffMonth(r,e),d=0;d<=p+g;d=d+g)l.push(creatMonth(c,d+v));else if(s>DAY)for(var y=new Date(r),m=y.getFullYear(),x=y.getMonth(),A=y.getDate(),_=Math.ceil(s/DAY),b=diffDay(r,e),d=0;d<b+_;d=d+_)l.push(new Date(m,x,A+d).getTime());else if(s>HOUR)for(var y=new Date(r),m=y.getFullYear(),x=y.getMonth(),_=y.getDate(),S=y.getHours(),C=Math.ceil(s/HOUR),E=diffHour(r,e),d=0;d<=E+C;d=d+C)l.push(new Date(m,x,_,S+d).getTime());else if(s>MINUTE)for(var T=diffMinus(r,e),w=Math.ceil(s/MINUTE),d=0;d<=T+w;d=d+w)l.push(r+d*MINUTE);else{var L=s;L<SECOND&&(L=SECOND);for(var M=Math.floor(r/SECOND)*SECOND,O=Math.ceil((e-r)/SECOND),P=Math.ceil(L/SECOND),d=0;d<O+P;d=d+P)l.push(M+d*SECOND)}return l.length>=512&&console.warn("Notice: current ticks length("+l.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+s+") is too small, increase the value to solve the problem!"),l}registerTickMethod("cat",calculateCatTicks);registerTickMethod("time-cat",timeCat);registerTickMethod("wilkinson-extended",linear$1);registerTickMethod("r-pretty",linearPretty);registerTickMethod("time",calculateTimeTicks);registerTickMethod("time-pretty",timePretty);registerTickMethod("log",calculateLogTicks);registerTickMethod("pow",calculatePowTicks);registerTickMethod("quantile",calculateTicks);registerTickMethod("d3-linear",d3LinearTickMethod);registerClass("cat",Category$1);registerClass("category",Category$1);registerClass("identity",Identity);registerClass("linear",Linear);registerClass("log",Log);registerClass("pow",Pow);registerClass("time",Time);registerClass("timeCat",TimeCat);registerClass("quantize",Quantize);registerClass("quantile",Quantile);var ATTRIBUTE_MAP={},getAttribute=function(n){return ATTRIBUTE_MAP[n.toLowerCase()]},registerAttribute=function(n,r){if(getAttribute(n))throw new Error("Attribute type '".concat(n,"' existed."));ATTRIBUTE_MAP[n.toLowerCase()]=r};registerAttribute("Color",Color);registerAttribute("Opacity",Opacity);registerAttribute("Position",Position);registerAttribute("Shape",Shape$2);registerAttribute("Size",Size);var Coordinate=function(){function n(r){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=r.start,a=r.end,o=r.matrix,s=o===void 0?[1,0,0,0,1,0,0,0,1]:o,l=r.isTransposed,c=l===void 0?!1:l;this.start=e,this.end=a,this.matrix=s,this.originalMatrix=__spreadArray$2([],s),this.isTransposed=c}return n.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},n.prototype.update=function(r){mix(this,r),this.initial()},n.prototype.convertDim=function(r,e){var a,o=this[e],s=o.start,l=o.end;return this.isReflect(e)&&(a=[l,s],s=a[0],l=a[1]),s+r*(l-s)},n.prototype.invertDim=function(r,e){var a,o=this[e],s=o.start,l=o.end;return this.isReflect(e)&&(a=[l,s],s=a[0],l=a[1]),(r-s)/(l-s)},n.prototype.applyMatrix=function(r,e,a){a===void 0&&(a=0);var o=this.matrix,s=[r,e,a];return transformMat3$1(s,s,o),s},n.prototype.invertMatrix=function(r,e,a){a===void 0&&(a=0);var o=this.matrix,s=invert$2([0,0,0,0,0,0,0,0,0],o),l=[r,e,a];return s&&transformMat3$1(l,l,s),l},n.prototype.convert=function(r){var e=this.convertPoint(r),a=e.x,o=e.y,s=this.applyMatrix(a,o,1);return{x:s[0],y:s[1]}},n.prototype.invert=function(r){var e=this.invertMatrix(r.x,r.y,1);return this.invertPoint({x:e[0],y:e[1]})},n.prototype.rotate=function(r){var e=this.matrix,a=this.center;return leftTranslate(e,e,[-a.x,-a.y]),leftRotate(e,e,r),leftTranslate(e,e,[a.x,a.y]),this},n.prototype.reflect=function(r){return r==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},n.prototype.scale=function(r,e){var a=this.matrix,o=this.center;return leftTranslate(a,a,[-o.x,-o.y]),leftScale(a,a,[r,e]),leftTranslate(a,a,[o.x,o.y]),this},n.prototype.translate=function(r,e){var a=this.matrix;return leftTranslate(a,a,[r,e]),this},n.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},n.prototype.getCenter=function(){return this.center},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRadius=function(){return this.radius},n.prototype.isReflect=function(r){return r==="x"?this.isReflectX:this.isReflectY},n.prototype.resetMatrix=function(r){this.matrix=r||__spreadArray$2([],this.originalMatrix)},n}(),Cartesian=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.isRect=!0,a.type="cartesian",a.initial(),a}return r.prototype.initial=function(){n.prototype.initial.call(this);var e=this.start,a=this.end;this.x={start:e.x,end:a.x},this.y={start:e.y,end:a.y}},r.prototype.convertPoint=function(e){var a,o=e.x,s=e.y;return this.isTransposed&&(a=[s,o],o=a[0],s=a[1]),{x:this.convertDim(o,"x"),y:this.convertDim(s,"y")}},r.prototype.invertPoint=function(e){var a,o=this.invertDim(e.x,"x"),s=this.invertDim(e.y,"y");return this.isTransposed&&(a=[s,o],o=a[0],s=a[1]),{x:o,y:s}},r}(Coordinate),Helix=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.isHelix=!0,a.type="helix";var o=e.startAngle,s=o===void 0?1.25*Math.PI:o,l=e.endAngle,c=l===void 0?7.25*Math.PI:l,u=e.innerRadius,f=u===void 0?0:u,d=e.radius;return a.startAngle=s,a.endAngle=c,a.innerRadius=f,a.radius=d,a.initial(),a}return r.prototype.initial=function(){n.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,a=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(a=a*this.radius),this.d=Math.floor(a*(1-this.innerRadius)/e),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*a,end:this.innerRadius*a+this.d*.99}},r.prototype.convertPoint=function(e){var a,o=e.x,s=e.y;this.isTransposed&&(a=[s,o],o=a[0],s=a[1]);var l=this.convertDim(o,"x"),c=this.a*l,u=this.convertDim(s,"y");return{x:this.center.x+Math.cos(l)*(c+u),y:this.center.y+Math.sin(l)*(c+u)}},r.prototype.invertPoint=function(e){var a,o=this.d+this.y.start,s=subtract([0,0],[e.x,e.y],[this.center.x,this.center.y]),l=angleTo(s,[1,0],!0),c=l*this.a;length(s)<c&&(c=length(s));var u=Math.floor((length(s)-c)/o);l=2*u*Math.PI+l;var f=this.a*l,d=length(s)-f;d=isNumberEqual$1(d,0)?0:d;var g=this.invertDim(l,"x"),v=this.invertDim(d,"y");return g=isNumberEqual$1(g,0)?0:g,v=isNumberEqual$1(v,0)?0:v,this.isTransposed&&(a=[v,g],g=a[0],v=a[1]),{x:g,y:v}},r}(Coordinate),Polar=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.isPolar=!0,a.type="polar";var o=e.startAngle,s=o===void 0?-Math.PI/2:o,l=e.endAngle,c=l===void 0?Math.PI*3/2:l,u=e.innerRadius,f=u===void 0?0:u,d=e.radius;return a.startAngle=s,a.endAngle=c,a.innerRadius=f,a.radius=d,a.initial(),a}return r.prototype.initial=function(){for(n.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var e=this.getOneBox(),a=e.maxX-e.minX,o=e.maxY-e.minY,s=Math.abs(e.minX)/a,l=Math.abs(e.minY)/o,c;this.height/o>this.width/a?(c=this.width/a,this.circleCenter={x:this.center.x-(.5-s)*this.width,y:this.center.y-(.5-l)*c*o}):(c=this.height/o,this.circleCenter={x:this.center.x-(.5-s)*c*a,y:this.center.y-(.5-l)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=c*this.radius:(this.radius<=0||this.radius>c)&&(this.polarRadius=c):this.polarRadius=c,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},r.prototype.getRadius=function(){return this.polarRadius},r.prototype.convertPoint=function(e){var a,o=this.getCenter(),s=e.x,l=e.y;return this.isTransposed&&(a=[l,s],s=a[0],l=a[1]),s=this.convertDim(s,"x"),l=this.convertDim(l,"y"),{x:o.x+Math.cos(s)*l,y:o.y+Math.sin(s)*l}},r.prototype.invertPoint=function(e){var a,o=this.getCenter(),s=[e.x-o.x,e.y-o.y],l=this,c=l.startAngle,u=l.endAngle;this.isReflect("x")&&(a=[u,c],c=a[0],u=a[1]);var f=[1,0,0,0,1,0,0,0,1];leftRotate(f,f,c);var d=[1,0,0];transformMat3$1(d,d,f);var g=[d[0],d[1]],v=angleTo(g,s,u<c);isNumberEqual$1(v,Math.PI*2)&&(v=0);var p=length(s),y=v/(u-c);y=u-c>0?y:-y;var m=this.invertDim(p,"y"),x={x:0,y:0};return x.x=this.isTransposed?m:y,x.y=this.isTransposed?y:m,x},r.prototype.getCenter=function(){return this.circleCenter},r.prototype.getOneBox=function(){var e=this.startAngle,a=this.endAngle;if(Math.abs(a-e)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var o=[0,Math.cos(e),Math.cos(a)],s=[0,Math.sin(e),Math.sin(a)],l=Math.min(e,a);l<Math.max(e,a);l+=Math.PI/18)o.push(Math.cos(l)),s.push(Math.sin(l));return{minX:Math.min.apply(Math,o),maxX:Math.max.apply(Math,o),minY:Math.min.apply(Math,s),maxY:Math.max.apply(Math,s)}},r}(Coordinate),COORDINATE_MAP={},getCoordinate=function(n){return COORDINATE_MAP[n.toLowerCase()]},registerCoordinate=function(n,r){COORDINATE_MAP[n.toLowerCase()]=r};registerCoordinate("rect",Cartesian);registerCoordinate("cartesian",Cartesian);registerCoordinate("polar",Polar);registerCoordinate("helix",Helix);function propagationDelegate(n,r,e){var a=new GraphEvent(r,e);a.target=n,a.propagationPath.push(n),n.emitDelegation(r,a);for(var o=n.getParent();o;)o.emitDelegation(r,a),a.propagationPath.push(o),o=o.getParent()}var identityMatrix=[1,0,0,0,1,0,0,0,1];function getMatrixByAngle(n,r,e){if(e===void 0&&(e=identityMatrix),!r)return null;var a=transform$6(e,[["t",-n.x,-n.y],["r",r],["t",n.x,n.y]]);return a}function getMatrixByTranslate(n,r){return!n.x&&!n.y?null:transform$6(r||identityMatrix,[["t",n.x,n.y]])}function getAngleByMatrix(n){var r=[1,0,0],e=[0,0,0];return transformMat3$1(e,r,n),Math.atan2(e[1],e[0])}function multiplyVec2(n,r){var e=[0,0];return transformMat3(e,r,n),e}function applyMatrix2BBox(n,r){var e=multiplyVec2(n,[r.minX,r.minY]),a=multiplyVec2(n,[r.maxX,r.minY]),o=multiplyVec2(n,[r.minX,r.maxY]),s=multiplyVec2(n,[r.maxX,r.maxY]),l=Math.min(e[0],a[0],o[0],s[0]),c=Math.max(e[0],a[0],o[0],s[0]),u=Math.min(e[1],a[1],o[1],s[1]),f=Math.max(e[1],a[1],o[1],s[1]);return{x:l,y:u,minX:l,minY:u,maxX:c,maxY:f,width:c-l,height:f-u}}function applyRotate(n,r,e,a){if(r){var o=getMatrixByAngle({x:e,y:a},r,n.getMatrix());n.setMatrix(o)}}function applyTranslate(n,r,e){var a=getMatrixByTranslate({x:r,y:e});n.attr("matrix",a)}function formatPadding(n){var r=0,e=0,a=0,o=0;return isNumber$2(n)?r=e=a=o=n:isArray$4(n)&&(r=n[0],a=isNil(n[1])?n[0]:n[1],o=isNil(n[2])?n[0]:n[2],e=isNil(n[3])?a:n[3]),[r,a,o,e]}function clearDom(n){for(var r=n.childNodes,e=r.length,a=e-1;a>=0;a--)n.removeChild(r[a])}function hasClass$1(n,r){return!!n.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function regionToBBox(n){var r=n.start,e=n.end,a=Math.min(r.x,e.x),o=Math.min(r.y,e.y),s=Math.max(r.x,e.x),l=Math.max(r.y,e.y);return{x:a,y:o,minX:a,minY:o,maxX:s,maxY:l,width:s-a,height:l-o}}function pointsToBBox(n){var r=n.map(function(c){return c.x}),e=n.map(function(c){return c.y}),a=Math.min.apply(Math,r),o=Math.min.apply(Math,e),s=Math.max.apply(Math,r),l=Math.max.apply(Math,e);return{x:a,y:o,minX:a,minY:o,maxX:s,maxY:l,width:s-a,height:l-o}}function createBBox(n,r,e,a){var o=n+e,s=r+a;return{x:n,y:r,width:e,height:a,minX:n,minY:r,maxX:isNaN(o)?0:o,maxY:isNaN(s)?0:s}}function getValueByPercent(n,r,e){return(1-e)*n+r*e}function getCirclePoint(n,r,e){return{x:n.x+Math.cos(e)*r,y:n.y+Math.sin(e)*r}}function distance$4(n,r){var e=r.x-n.x,a=r.y-n.y;return Math.sqrt(e*e+a*a)}var near=function(n,r,e){return e===void 0&&(e=Math.pow(Number.EPSILON,.5)),[n,r].includes(1/0)?Math.abs(n)===Math.abs(r):Math.abs(n-r)<e};function intersectBBox(n,r){var e=Math.max(n.minX,r.minX),a=Math.max(n.minY,r.minY),o=Math.min(n.maxX,r.maxX),s=Math.min(n.maxY,r.maxY);return createBBox(e,a,o-e,s-a)}function getBBoxWithClip(n){var r=n.getClip(),e=r&&r.getBBox(),a;if(!n.isGroup())a=n.getBBox();else{var o=1/0,s=-1/0,l=1/0,c=-1/0,u=n.getChildren();u.length>0?each$1(u,function(f){if(f.get("visible")){if(f.isGroup()&&f.get("children").length===0)return!0;var d=getBBoxWithClip(f),g=f.applyToMatrix([d.minX,d.minY,1]),v=f.applyToMatrix([d.minX,d.maxY,1]),p=f.applyToMatrix([d.maxX,d.minY,1]),y=f.applyToMatrix([d.maxX,d.maxY,1]),m=Math.min(g[0],v[0],p[0],y[0]),x=Math.max(g[0],v[0],p[0],y[0]),A=Math.min(g[1],v[1],p[1],y[1]),_=Math.max(g[1],v[1],p[1],y[1]);m<o&&(o=m),x>s&&(s=x),A<l&&(l=A),_>c&&(c=_)}}):(o=0,s=0,l=0,c=0),a=createBBox(o,l,s-o,c-l)}return e?intersectBBox(a,e):a}function updateClip(n,r){if(!(!n.getClip()&&!r.getClip())){var e=r.getClip();if(!e){n.setClip(null);return}var a={type:e.get("type"),attrs:e.attr()};n.setClip(a)}}function toPx(n){return n+"px"}function getTextPoint(n,r,e,a){var o=distance$4(n,r),s=a/o,l=0;return e==="start"?l=0-s:e==="end"&&(l=1+s),{x:getValueByPercent(n.x,r.x,l),y:getValueByPercent(n.y,r.y,l)}}var LOCATION_FIELD_MAP={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},Component=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.initCfg(),a}return r.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},r.prototype.clear=function(){},r.prototype.update=function(e){var a=this,o=this.get("defaultCfg")||{};each$1(e,function(s,l){var c=a.get(l),u=s;c!==s&&(isObject$1(s)&&o[l]&&(u=deepMix({},o[l],s)),a.set(l,u))}),this.updateInner(e),this.afterUpdate(e)},r.prototype.updateInner=function(e){},r.prototype.afterUpdate=function(e){has(e,"visible")&&(e.visible?this.show():this.hide()),has(e,"capture")&&this.setCapture(e.capture)},r.prototype.getLayoutBBox=function(){return this.getBBox()},r.prototype.getLocationType=function(){return this.get("locationType")},r.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},r.prototype.setOffset=function(e,a){this.update({offsetX:e,offsetY:a})},r.prototype.setLocation=function(e){var a=__assign$8({},e);this.update(a)},r.prototype.getLocation=function(){var e=this,a={},o=this.get("locationType"),s=LOCATION_FIELD_MAP[o];return each$1(s,function(l){a[l]=e.get(l)}),a},r.prototype.isList=function(){return!1},r.prototype.isSlider=function(){return!1},r.prototype.init=function(){},r.prototype.initCfg=function(){var e=this,a=this.get("defaultCfg");each$1(a,function(o,s){var l=e.get(s);if(isObject$1(l)){var c=deepMix({},o,l);e.set(s,c)}})},r}(Base),STATUS_UPDATE="update_status",COPY_PROPERTIES=["visible","tip","delegateObject"],COPY_PROPERTIES_EXCLUDES=["container","group","shapesMap","isRegister","isUpdating","destroyed"],GroupComponent=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},r.prototype.remove=function(){this.clear();var e=this.get("group");e.remove()},r.prototype.clear=function(){var e=this.get("group");e.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},r.prototype.getChildComponentById=function(e){var a=this.getElementById(e),o=a&&a.get("component");return o},r.prototype.getElementById=function(e){return this.get("shapesMap")[e]},r.prototype.getElementByLocalId=function(e){var a=this.getElementId(e);return this.getElementById(a)},r.prototype.getElementsByName=function(e){var a=[];return each$1(this.get("shapesMap"),function(o){o.get("name")===e&&a.push(o)}),a},r.prototype.getContainer=function(){return this.get("container")},r.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},r.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var a=this.get("group");this.updateElements(e,a),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},r.prototype.show=function(){var e=this.get("group");e.show(),this.set("visible",!0)},r.prototype.hide=function(){var e=this.get("group");e.hide(),this.set("visible",!1)},r.prototype.setCapture=function(e){var a=this.get("group");a.set("capture",e),this.set("capture",e)},r.prototype.destroy=function(){this.removeEvent(),this.remove(),n.prototype.destroy.call(this)},r.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},r.prototype.getLayoutBBox=function(){var e=this.get("group"),a=this.getInnerLayoutBBox(),o=e.getTotalMatrix();return o&&(a=applyMatrix2BBox(o,a)),a},r.prototype.on=function(e,a,o){var s=this.get("group");return s.on(e,a,o),this},r.prototype.off=function(e,a){var o=this.get("group");return o&&o.off(e,a),this},r.prototype.emit=function(e,a){var o=this.get("group");o.emit(e,a)},r.prototype.init=function(){n.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},r.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},r.prototype.delegateEmit=function(e,a){var o=this.get("group");a.target=o,o.emit(e,a),propagationDelegate(o,e,a)},r.prototype.createOffScreenGroup=function(){var e=this.get("group"),a=e.getGroupBase(),o=new a({delegateObject:this.getDelegateObject()});return o},r.prototype.applyOffset=function(){var e=this.get("offsetX"),a=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:a})},r.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},r.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",getBBoxWithClip(e)),e},r.prototype.addGroup=function(e,a){this.appendDelegateObject(e,a);var o=e.addGroup(a);return this.get("isRegister")&&this.registerElement(o),o},r.prototype.addShape=function(e,a){this.appendDelegateObject(e,a);var o=e.addShape(a);return this.get("isRegister")&&this.registerElement(o),o},r.prototype.addComponent=function(e,a){var o=a.id,s=a.component,l=__rest$1(a,["id","component"]),c=new s(__assign$8(__assign$8({},l),{id:o,container:e,updateAutoRender:this.get("updateAutoRender")}));return c.init(),c.render(),this.get("isRegister")&&this.registerElement(c.get("group")),c},r.prototype.initEvent=function(){},r.prototype.removeEvent=function(){var e=this.get("group");e.off()},r.prototype.getElementId=function(e){var a=this.get("id"),o=this.get("name");return a+"-"+o+"-"+e},r.prototype.registerElement=function(e){var a=e.get("id");this.get("shapesMap")[a]=e},r.prototype.unregisterElement=function(e){var a=e.get("id");delete this.get("shapesMap")[a]},r.prototype.moveElementTo=function(e,a){var o=getMatrixByTranslate(a);e.attr("matrix",o)},r.prototype.addAnimation=function(e,a,o){var s=a.attr("opacity");isNil(s)&&(s=1),a.attr("opacity",0),a.animate({opacity:s},o)},r.prototype.removeAnimation=function(e,a,o){a.animate({opacity:0},o)},r.prototype.updateAnimation=function(e,a,o,s){a.animate(o,s)},r.prototype.updateElements=function(e,a){var o=this,s=this.get("animate"),l=this.get("animateOption"),c=e.getChildren().slice(0),u;each$1(c,function(f){var d=f.get("id"),g=o.getElementById(d),v=f.get("name");if(g)if(f.get("isComponent")){var p=f.get("component"),y=g.get("component"),m=pick$1(p.cfg,difference(keys(p.cfg),COPY_PROPERTIES_EXCLUDES));y.update(m),g.set(STATUS_UPDATE,"update")}else{var x=o.getReplaceAttrs(g,f);s&&l.update?o.updateAnimation(v,g,x,l.update):g.attr(x),f.isGroup()&&o.updateElements(f,g),each$1(COPY_PROPERTIES,function(S){g.set(S,f.get(S))}),updateClip(g,f),u=g,g.set(STATUS_UPDATE,"update")}else{a.add(f);var A=a.getChildren();if(A.splice(A.length-1,1),u){var _=A.indexOf(u);A.splice(_+1,0,f)}else A.unshift(f);if(o.registerElement(f),f.set(STATUS_UPDATE,"add"),f.get("isComponent")){var p=f.get("component");p.set("container",a)}else f.isGroup()&&o.registerNewGroup(f);if(u=f,s){var b=o.get("isInit")?l.appear:l.enter;b&&o.addAnimation(v,f,b)}}})},r.prototype.clearUpdateStatus=function(e){var a=e.getChildren();each$1(a,function(o){o.set(STATUS_UPDATE,null)})},r.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},r.prototype.getDelegateObject=function(){var e,a=this.get("name"),o=(e={},e[a]=this,e.component=this,e);return o},r.prototype.appendDelegateObject=function(e,a){var o=e.get("delegateObject");a.delegateObject||(a.delegateObject={}),mix(a.delegateObject,o)},r.prototype.getReplaceAttrs=function(e,a){var o=e.attr(),s=a.attr();return each$1(o,function(l,c){s[c]===void 0&&(s[c]=void 0)}),s},r.prototype.registerNewGroup=function(e){var a=this,o=e.getChildren();each$1(o,function(s){a.registerElement(s),s.set(STATUS_UPDATE,"add"),s.isGroup()&&a.registerNewGroup(s)})},r.prototype.deleteElements=function(){var e=this,a=this.get("shapesMap"),o=[];each$1(a,function(c,u){!c.get(STATUS_UPDATE)||c.destroyed?o.push([u,c]):c.set(STATUS_UPDATE,null)});var s=this.get("animate"),l=this.get("animateOption");each$1(o,function(c){var u=c[0],f=c[1];if(!f.destroyed){var d=f.get("name");if(s&&l.leave){var g=mix({callback:function(){e.removeElement(f)}},l.leave);e.removeAnimation(d,f,g)}else e.removeElement(f)}delete a[u]})},r.prototype.removeElement=function(e){if(e.get("isGroup")){var a=e.get("component");a&&a.destroy()}e.remove()},r}(Component),ELLIPSIS_CODE$1="…";function strLen(n){for(var r=0,e=0;e<n.length;e++)r+=charAtLength(n,e);return r}function charAtLength(n,r){return n.charCodeAt(r)>0&&n.charCodeAt(r)<128?1:2}function ellipsisString(n,r,e){e===void 0&&(e="tail");var a=n.length,o="";if(e==="tail"){for(var s=0,l=0;s<r;){var c=charAtLength(n,l);if(s+c<=r)o+=n[l],s+=charAtLength(n,l),l++;else break}o+=ELLIPSIS_CODE$1}else if(e==="head"){for(var s=0,l=a-1;s<r;){var c=charAtLength(n,l);if(s+c<=r)o+=n[l],s+=charAtLength(n,l),l--;else break}o=ELLIPSIS_CODE$1+o}else{for(var u="",f="",s=0,d=0,g=a-1;s<r;){var v=charAtLength(n,d),p=!1;v+s<=r&&(u+=n[d],d++,s+=v,p=!0);var y=charAtLength(n,g);if(y+s<=r&&(f=n[g]+f,s+=y,g--,p=!0),!p)break}o=u+ELLIPSIS_CODE$1+f}return o}var ELLIPSIS_CODE="…",ELLIPSIS_CODE_LENGTH=2,OPTIMIZE_THRESHOLD=400;function getMaxLabelWidthOptimized(n){for(var r=n.map(function(u){var f=u.attr("text");return isNil(f)?"":""+f}),e=0,a=0,o=0;o<r.length;o+=1){for(var s=0,l=0;l<=r[o].length;l+=1){var c=r[o].charCodeAt(l);c>=19968&&c<=40869?s+=2:s+=1}s>e&&(e=s,a=o)}return n[a].getBBox().width}function getMaxLabelWidth(n){if(n.length>OPTIMIZE_THRESHOLD)return getMaxLabelWidthOptimized(n);var r=0;return each$1(n,function(e){var a=e.getBBox(),o=a.width;r<o&&(r=o)}),r}function getLabelLength(n,r){var e=r.getCanvasBBox();return n?e.width:e.height}function ellipsisLabel(n,r,e,a){var o;a===void 0&&(a="tail");var s=(o=r.attr("text"))!==null&&o!==void 0?o:"";if(a==="tail"){var l=pick$1(r.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),c=getEllipsisText$1(s,e,l,"…");return s!==c?(r.attr("text",c),r.set("tip",s),!0):(r.set("tip",null),!1)}var u=getLabelLength(n,r),f=strLen(s),d=!1;if(e<u){var g=Math.floor(e/u*f)-ELLIPSIS_CODE_LENGTH,v=void 0;g>=0?v=ellipsisString(s,g,a):v=ELLIPSIS_CODE,v&&(r.attr("text",v),d=!0)}return d?r.set("tip",s):r.set("tip",null),d}function renderTag$1(n,r){var e=r.x,a=r.y,o=r.content,s=r.style,l=r.id,c=r.name,u=r.rotate,f=r.maxLength,d=r.autoEllipsis,g=r.isVertical,v=r.ellipsisPosition,p=r.background,y=n.addGroup({id:l+"-group",name:c+"-group",attrs:{x:e,y:a}}),m=y.addShape({type:"text",id:l,name:c,attrs:__assign$8({x:0,y:0,text:o},s)}),x=formatPadding(get(p,"padding",0));if(f&&d){var A=f-(x[1]+x[3]);ellipsisLabel(!g,m,A,v)}if(p){var _=get(p,"style",{}),b=m.getCanvasBBox(),S=b.minX,C=b.minY,E=b.width,T=b.height,w=y.addShape("rect",{id:l+"-bg",name:l+"-bg",attrs:__assign$8({x:S-x[3],y:C-x[0],width:E+x[1]+x[3],height:T+x[0]+x[2]},_)});w.toBack()}applyTranslate(y,e,a),applyRotate(y,u,e,a)}const Theme={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"};var LineAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Theme.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Theme.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Theme.lineColor,lineWidth:1}}}})},r.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},r.prototype.renderLine=function(e){var a=this.get("start"),o=this.get("end"),s=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:__assign$8({x1:a.x,y1:a.y,x2:o.x,y2:o.y},s)})},r.prototype.getLabelPoint=function(e,a,o){var s;return o==="start"?s=0:o==="center"?s=.5:isString$1(o)&&o.indexOf("%")!==-1?s=parseInt(o,10)/100:isNumber$2(o)?s=o:s=1,(s>1||s<0)&&(s=1),{x:getValueByPercent(e.x,a.x,s),y:getValueByPercent(e.y,a.y,s)}},r.prototype.renderLabel=function(e){var a=this.get("text"),o=this.get("start"),s=this.get("end"),l=a.position,c=a.content,u=a.style,f=a.offsetX,d=a.offsetY,g=a.autoRotate,v=a.maxLength,p=a.autoEllipsis,y=a.ellipsisPosition,m=a.background,x=a.isVertical,A=x===void 0?!1:x,_=this.getLabelPoint(o,s,l),b=_.x+f,S=_.y+d,C={id:this.getElementId("line-text"),name:"annotation-line-text",x:b,y:S,content:c,style:u,maxLength:v,autoEllipsis:p,ellipsisPosition:y,background:m,isVertical:A};if(g){var E=[s.x-o.x,s.y-o.y];C.rotate=Math.atan2(E[1],E[0])}renderTag$1(e,C)},r}(GroupComponent),TextAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Theme.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Theme.fontFamily}}})},r.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},r.prototype.renderInner=function(e){var a=this.getLocation(),o=a.x,s=a.y,l=this.get("content"),c=this.get("style"),u=this.getElementId("text"),f=this.get("name")+"-text",d=this.get("maxLength"),g=this.get("autoEllipsis"),v=this.get("isVertical"),p=this.get("ellipsisPosition"),y=this.get("background"),m=this.get("rotate"),x={id:u,name:f,x:o,y:s,content:l,style:c,maxLength:d,autoEllipsis:g,isVertical:v,ellipsisPosition:p,background:y,rotate:m};renderTag$1(e,x)},r.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var a=this.getLocation(),o=a.x,s=a.y,l=this.get("rotate");applyTranslate(e,o,s),applyRotate(e,l,o,s)}},r}(GroupComponent),ArcAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},r.prototype.renderInner=function(e){this.renderArc(e)},r.prototype.getArcPath=function(){var e=this.getLocation(),a=e.center,o=e.radius,s=e.startAngle,l=e.endAngle,c=getCirclePoint(a,o,s),u=getCirclePoint(a,o,l),f=l-s>Math.PI?1:0,d=[["M",c.x,c.y]];if(l-s===Math.PI*2){var g=getCirclePoint(a,o,s+Math.PI);d.push(["A",o,o,0,f,1,g.x,g.y]),d.push(["A",o,o,0,f,1,u.x,u.y])}else d.push(["A",o,o,0,f,1,u.x,u.y]);return d},r.prototype.renderArc=function(e){var a=this.getArcPath(),o=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:__assign$8({path:a},o)})},r}(GroupComponent),RegionAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Theme.regionColor,opacity:.4}}})},r.prototype.renderInner=function(e){this.renderRegion(e)},r.prototype.renderRegion=function(e){var a=this.get("start"),o=this.get("end"),s=this.get("style"),l=regionToBBox({start:a,end:o});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:__assign$8({x:l.x,y:l.y,width:l.width,height:l.height},s)})},r}(GroupComponent),ImageAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},r.prototype.renderInner=function(e){this.renderImage(e)},r.prototype.getImageAttrs=function(){var e=this.get("start"),a=this.get("end"),o=this.get("style"),s=regionToBBox({start:e,end:a}),l=this.get("src");return __assign$8({x:s.x,y:s.y,img:l,width:s.width,height:s.height},o)},r.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},r}(GroupComponent),DataMarkerAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Theme.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Theme.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Theme.fontFamily}}}})},r.prototype.renderInner=function(e){get(this.get("line"),"display")&&this.renderLine(e),get(this.get("text"),"display")&&this.renderText(e),get(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},r.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},r.prototype.renderPoint=function(e){var a=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:a})},r.prototype.renderLine=function(e){var a=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:a})},r.prototype.renderText=function(e){var a=this.getShapeAttrs().text,o=a.x,s=a.y,l=a.text,c=__rest$1(a,["x","y","text"]),u=this.get("text"),f=u.background,d=u.maxLength,g=u.autoEllipsis,v=u.isVertival,p=u.ellipsisPosition,y={x:o,y:s,id:this.getElementId("text"),name:"annotation-text",content:l,style:c,background:f,maxLength:d,autoEllipsis:g,isVertival:v,ellipsisPosition:p};renderTag$1(e,y)},r.prototype.autoAdjust=function(e){var a=this.get("direction"),o=this.get("x"),s=this.get("y"),l=get(this.get("line"),"length",0),c=this.get("coordinateBBox"),u=e.getBBox(),f=u.minX,d=u.maxX,g=u.minY,v=u.maxY,p=e.findById(this.getElementId("text-group")),y=e.findById(this.getElementId("text")),m=e.findById(this.getElementId("line"));if(c&&p){var x=p.attr("x"),A=p.attr("y"),_=y.getCanvasBBox(),b=_.width,S=_.height,C=0,E=0;if(o+f<=c.minX)if(a==="leftward")C=1;else{var T=c.minX-(o+f);x=p.attr("x")+T}else if(o+d>=c.maxX)if(a==="rightward")C=-1;else{var T=o+d-c.maxX;x=p.attr("x")-T}if(C&&(m&&m.attr("path",[["M",0,0],["L",l*C,0]]),x=(l+2+b)*C),s+g<=c.minY)if(a==="upward")E=1;else{var T=c.minY-(s+g);A=p.attr("y")+T}else if(s+v>=c.maxY)if(a==="downward")E=-1;else{var T=s+v-c.maxY;A=p.attr("y")-T}E&&(m&&m.attr("path",[["M",0,0],["L",0,l*E]]),A=(l+2+S)*E),(x!==p.attr("x")||A!==p.attr("y"))&&applyTranslate(p,x,A)}},r.prototype.getShapeAttrs=function(){var e=get(this.get("line"),"display"),a=get(this.get("point"),"style",{}),o=get(this.get("line"),"style",{}),s=get(this.get("text"),"style",{}),l=this.get("direction"),c=e?get(this.get("line"),"length",0):0,u=0,f=0,d="top",g="start";switch(l){case"upward":f=-1,d="bottom";break;case"downward":f=1,d="top";break;case"leftward":u=-1,g="end";break;case"rightward":u=1,g="start";break}return{point:__assign$8({x:0,y:0},a),line:__assign$8({path:[["M",0,0],["L",c*u,c*f]]},o),text:__assign$8({x:(c+2)*u,y:(c+2)*f,text:get(this.get("text"),"content",""),textBaseline:d,textAlign:g},s)}},r}(GroupComponent),DataRegionAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Theme.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Theme.textColor,fontFamily:Theme.fontFamily}}}})},r.prototype.renderInner=function(e){var a=get(this.get("region"),"style",{});get(this.get("text"),"style",{});var o=this.get("lineLength")||0,s=this.get("points");if(s.length){var l=pointsToBBox(s),c=[];c.push(["M",s[0].x,l.minY-o]),s.forEach(function(f){c.push(["L",f.x,f.y])}),c.push(["L",s[s.length-1].x,s[s.length-1].y-o]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:__assign$8({path:c},a)});var u=__assign$8({id:this.getElementId("text"),name:"annotation-text",x:(l.minX+l.maxX)/2,y:l.minY-o},this.get("text"));renderTag$1(e,u)}},r}(GroupComponent),RegionFilterAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},r.prototype.renderInner=function(e){var a=this,o=this.get("start"),s=this.get("end"),l=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});each$1(this.get("shapes"),function(u,f){var d=u.get("type"),g=clone(u.attr());a.adjustShapeAttrs(g),a.addShape(l,{id:a.getElementId("shape-"+d+"-"+f),capture:!1,type:d,attrs:g})});var c=regionToBBox({start:o,end:s});l.setClip({type:"rect",attrs:{x:c.minX,y:c.minY,width:c.width,height:c.height}})},r.prototype.adjustShapeAttrs=function(e){var a=this.get("color");e.fill&&(e.fill=e.fillStyle=a),e.stroke=e.strokeStyle=a},r}(GroupComponent),ShapeAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"shape",draw:noop})},r.prototype.renderInner=function(e){var a=this.get("render");isFunction$1(a)&&a(e)},r}(GroupComponent),HtmlComponent=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},r.prototype.getContainer=function(){return this.get("container")},r.prototype.show=function(){var e=this.get("container");e.style.display="",this.set("visible",!0)},r.prototype.hide=function(){var e=this.get("container");e.style.display="none",this.set("visible",!1)},r.prototype.setCapture=function(e){var a=this.getContainer(),o=e?"auto":"none";a.style.pointerEvents=o,this.set("capture",e)},r.prototype.getBBox=function(){var e=this.getContainer(),a=parseFloat(e.style.left)||0,o=parseFloat(e.style.top)||0;return createBBox(a,o,e.clientWidth,e.clientHeight)},r.prototype.clear=function(){var e=this.get("container");clearDom(e)},r.prototype.destroy=function(){this.removeEvent(),this.removeDom(),n.prototype.destroy.call(this)},r.prototype.init=function(){n.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},r.prototype.initCapture=function(){this.setCapture(this.get("capture"))},r.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},r.prototype.initDom=function(){},r.prototype.initContainer=function(){var e=this.get("container");if(isNil(e)){e=this.createDom();var a=this.get("parent");isString$1(a)&&(a=document.getElementById(a),this.set("parent",a)),a.appendChild(e),this.get("containerId")&&e.setAttribute("id",this.get("containerId")),this.set("container",e)}else isString$1(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},r.prototype.resetStyles=function(){var e=this.get("domStyles"),a=this.get("defaultStyles");e?e=deepMix({},a,e):e=a,this.set("domStyles",e)},r.prototype.applyStyles=function(){var e=this.get("domStyles");if(e){var a=this.getContainer();this.applyChildrenStyles(a,e);var o=this.get("containerClassName");if(o&&hasClass$1(a,o)){var s=e[o];modifyCSS(a,s)}}},r.prototype.applyChildrenStyles=function(e,a){each$1(a,function(o,s){var l=e.getElementsByClassName(s);each$1(l,function(c){modifyCSS(c,o)})})},r.prototype.applyStyle=function(e,a){var o=this.get("domStyles");modifyCSS(a,o[e])},r.prototype.createDom=function(){var e=this.get("containerTpl");return createDom$1(e)},r.prototype.initEvent=function(){},r.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},r.prototype.removeEvent=function(){},r.prototype.updateInner=function(e){has(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},r.prototype.resetPosition=function(){},r}(Component),HtmlAnnotation=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},r.prototype.render=function(){var e=this.getContainer(),a=this.get("html");clearDom(e);var o=isFunction$1(a)?a(e):a;if(isElement(o))e.appendChild(o);else if(isString$1(o)||isNumber$2(o)){var s=createDom$1(""+o);s&&e.appendChild(s)}this.resetPosition()},r.prototype.resetPosition=function(){var e=this.getContainer(),a=this.getLocation(),o=a.x,s=a.y,l=this.get("alignX"),c=this.get("alignY"),u=this.get("offsetX"),f=this.get("offsetY"),d=getOuterWidth(e),g=getOuterHeight(e),v={x:o,y:s};l==="middle"?v.x-=Math.round(d/2):l==="right"&&(v.x-=Math.round(d)),c==="middle"?v.y-=Math.round(g/2):c==="bottom"&&(v.y-=Math.round(g)),u&&(v.x+=u),f&&(v.y+=f),modifyCSS(e,{position:"absolute",left:v.x+"px",top:v.y+"px",zIndex:this.get("zIndex")})},r}(HtmlComponent);const AnnotationComponent=Object.freeze(Object.defineProperty({__proto__:null,Arc:ArcAnnotation,DataMarker:DataMarkerAnnotation,DataRegion:DataRegionAnnotation,Html:HtmlAnnotation,Image:ImageAnnotation,Line:LineAnnotation,Region:RegionAnnotation,RegionFilter:RegionFilterAnnotation,Shape:ShapeAnnotation,Text:TextAnnotation},Symbol.toStringTag,{value:"Module"}));function getStatesStyle(n,r,e){var a=r+"Style",o=null;return each$1(e,function(s,l){n[l]&&s[a]&&(o||(o={}),mix(o,s[a]))}),o}var AxisBase=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Theme.lineColor}},tickLine:{style:{lineWidth:1,stroke:Theme.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Theme.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Theme.textColor,fontFamily:Theme.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Theme.textColor,textBaseline:"middle",fontFamily:Theme.fontFamily,textAlign:"center"},iconStyle:{fill:Theme.descriptionIconFill,stroke:Theme.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Theme.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},r.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},r.prototype.isList=function(){return!0},r.prototype.getItems=function(){return this.get("ticks")},r.prototype.setItems=function(e){this.update({ticks:e})},r.prototype.updateItem=function(e,a){mix(e,a),this.clear(),this.render()},r.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},r.prototype.setItemState=function(e,a,o){e[a]=o,this.updateTickStates(e)},r.prototype.hasState=function(e,a){return!!e[a]},r.prototype.getItemStates=function(e){var a=this.get("tickStates"),o=[];return each$1(a,function(s,l){e[l]&&o.push(l)}),o},r.prototype.clearItemsState=function(e){var a=this,o=this.getItemsByState(e);each$1(o,function(s){a.setItemState(s,e,!1)})},r.prototype.getItemsByState=function(e){var a=this,o=this.getItems();return filter(o,function(s){return a.hasState(s,e)})},r.prototype.getSidePoint=function(e,a){var o=this,s=o.getSideVector(a,e);return{x:e.x+s[0],y:e.y+s[1]}},r.prototype.getTextAnchor=function(e){var a;return isNumberEqual$1(e[0],0)?a="center":e[0]>0?a="start":e[0]<0&&(a="end"),a},r.prototype.getTextBaseline=function(e){var a;return isNumberEqual$1(e[1],0)?a="middle":e[1]>0?a="top":e[1]<0&&(a="bottom"),a},r.prototype.processOverlap=function(e){},r.prototype.drawLine=function(e){var a=this.getLinePath(),o=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:mix({path:a},o.style)})},r.prototype.getTickLineItems=function(e){var a=this,o=[],s=this.get("tickLine"),l=s.alignTick,c=s.length,u=1,f=e.length;return f>=2&&(u=e[1].value-e[0].value),each$1(e,function(d){var g=d.point;l||(g=a.getTickPoint(d.value-u/2));var v=a.getSidePoint(g,c);o.push({startPoint:g,tickValue:d.value,endPoint:v,tickId:d.id,id:"tickline-"+d.id})}),o},r.prototype.getSubTickLineItems=function(e){var a=[],o=this.get("subTickLine"),s=o.count,l=e.length;if(l>=2)for(var c=0;c<l-1;c++)for(var u=e[c],f=e[c+1],d=0;d<s;d++){var g=(d+1)/(s+1),v=(1-g)*u.tickValue+g*f.tickValue,p=this.getTickPoint(v),y=this.getSidePoint(p,o.length);a.push({startPoint:p,endPoint:y,tickValue:v,id:"sub-"+u.id+"-"+d})}return a},r.prototype.getTickLineAttrs=function(e,a,o,s){var l=this.get(a).style,c={points:[e.startPoint,e.endPoint]},u=get(this.get("theme"),["tickLine","style"],{});l=isFunction$1(l)?mix({},u,l(c,o,s)):l;var f=e.startPoint,d=e.endPoint;return __assign$8({x1:f.x,y1:f.y,x2:d.x,y2:d.y},l)},r.prototype.drawTick=function(e,a,o,s,l){this.addShape(a,{type:"line",id:this.getElementId(e.id),name:"axis-"+o,attrs:this.getTickLineAttrs(e,o,s,l)})},r.prototype.drawTickLines=function(e){var a=this,o=this.get("ticks"),s=this.get("subTickLine"),l=this.getTickLineItems(o),c=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),u=this.get("tickLine");if(each$1(l,function(d,g){if(u.displayWithLabel){var v=a.getElementId("label-"+d.tickId);e.findById(v)&&a.drawTick(d,c,"tickLine",g,l)}else a.drawTick(d,c,"tickLine",g,l)}),s){var f=this.getSubTickLineItems(l);each$1(f,function(d,g){a.drawTick(d,c,"subTickLine",g,f)})}},r.prototype.processTicks=function(){var e=this,a=this.get("ticks");each$1(a,function(o){o.point=e.getTickPoint(o.value),isNil(o.id)&&(o.id=o.name)})},r.prototype.drawTicks=function(e){var a=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e);var o=this.get("ticks");each$1(o,function(s){a.applyTickStates(s,e)})},r.prototype.optimizeTicks=function(){var e=this.get("optimize"),a=this.get("ticks");if(e&&e.enable&&e.threshold>0){var o=size(a);if(o>e.threshold){var s=Math.ceil(o/e.threshold),l=a.filter(function(c,u){return u%s===0});this.set("ticks",l),this.set("originalTicks",a)}}},r.prototype.getLabelAttrs=function(e,a,o){var s=this.get("label"),l=s.offset,c=s.offsetX,u=s.offsetY,f=s.rotate,d=s.formatter,g=this.getSidePoint(e.point,l),v=this.getSideVector(l,g),p=d?d(e.name,e,a):e.name,y=s.style;y=isFunction$1(y)?get(this.get("theme"),["label","style"],{}):y;var m=mix({x:g.x+c,y:g.y+u,text:p,textAlign:this.getTextAnchor(v),textBaseline:this.getTextBaseline(v)},y);return f&&(m.matrix=getMatrixByAngle(g,f)),m},r.prototype.drawLabels=function(e){var a=this,o=this.get("ticks"),s=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});each$1(o,function(v,p){a.addShape(s,{type:"text",name:"axis-label",id:a.getElementId("label-"+v.id),attrs:a.getLabelAttrs(v,p,o),delegateObject:{tick:v,item:v,index:p}})}),this.processOverlap(s);var l=s.getChildren(),c=get(this.get("theme"),["label","style"],{}),u=this.get("label"),f=u.style,d=u.formatter;if(isFunction$1(f)){var g=l.map(function(v){return get(v.get("delegateObject"),"tick")});each$1(l,function(v,p){var y=v.get("delegateObject").tick,m=d?d(y.name,y,p):y.name,x=mix({},c,f(m,p,g));v.attr(x)})}},r.prototype.getTitleAttrs=function(){var e=this.get("title"),a=e.style,o=e.position,s=e.offset,l=e.spacing,c=l===void 0?0:l,u=e.autoRotate,f=a.fontSize,d=.5;o==="start"?d=0:o==="end"&&(d=1);var g=this.getTickPoint(d),v=this.getSidePoint(g,s||c+f/2),p=mix({x:v.x,y:v.y,text:e.text},a),y=e.rotate,m=y;if(isNil(y)&&u){var x=this.getAxisVector(g),A=[1,0];m=angleTo(x,A,!0)}if(m){var _=getMatrixByAngle(v,m);p.matrix=_}return p},r.prototype.drawTitle=function(e){var a,o=this.getTitleAttrs(),s=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:o});!((a=this.get("title"))===null||a===void 0)&&a.description&&this.drawDescriptionIcon(e,s,o.matrix)},r.prototype.drawDescriptionIcon=function(e,a,o){var s=this.addGroup(e,{name:"axis-description",id:this.getElementById("description")}),l=a.getBBox(),c=l.maxX,u=l.maxY,f=l.height,d=this.get("title").iconStyle,g=4,v=f/2,p=v/6,y=c+g,m=u-f/2,x=[y+v,m-v],A=x[0],_=x[1],b=[A+v,_+v],S=b[0],C=b[1],E=[A,C+v],T=E[0],w=E[1],L=[y,_+v],M=L[0],O=L[1],P=[y+v,m-f/4],N=P[0],G=P[1],Y=[N,G+p],F=Y[0],z=Y[1],W=[F,z+p],j=W[0],U=W[1],X=[j,U+v*3/4],tt=X[0],rt=X[1];this.addShape(s,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:__assign$8({path:[["M",A,_],["A",v,v,0,0,1,S,C],["A",v,v,0,0,1,T,w],["A",v,v,0,0,1,M,O],["A",v,v,0,0,1,A,_],["M",N,G],["L",F,z],["M",j,U],["L",tt,rt]],lineWidth:p,matrix:o},d)}),this.addShape(s,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:y,y:m-f/2,width:f,height:f,stroke:"#000",fill:"#000",opacity:0,matrix:o,cursor:"pointer"}})},r.prototype.applyTickStates=function(e,a){var o=this.getItemStates(e);if(o.length){var s=this.get("tickStates"),l=this.getElementId("label-"+e.id),c=a.findById(l);if(c){var u=getStatesStyle(e,"label",s);u&&c.attr(u)}var f=this.getElementId("tickline-"+e.id),d=a.findById(f);if(d){var g=getStatesStyle(e,"tickLine",s);g&&d.attr(g)}}},r.prototype.updateTickStates=function(e){var a=this.getItemStates(e),o=this.get("tickStates"),s=this.get("label"),l=this.getElementByLocalId("label-"+e.id),c=this.get("tickLine"),u=this.getElementByLocalId("tickline-"+e.id);if(a.length){if(l){var f=getStatesStyle(e,"label",o);f&&l.attr(f)}if(u){var d=getStatesStyle(e,"tickLine",o);d&&u.attr(d)}}else l&&l.attr(s.style),u&&u.attr(c.style)},r}(GroupComponent);function ellipseLabels(n,r,e,a){var o=r.getChildren(),s=!1;return each$1(o,function(l){var c=ellipsisLabel(n,l,e,a);s=s||c}),s}function getDefault$2(){return ellipsisTail}function ellipsisHead(n,r,e){return ellipseLabels(n,r,e,"head")}function ellipsisTail(n,r,e){return ellipseLabels(n,r,e,"tail")}function ellipsisMiddle(n,r,e){return ellipseLabels(n,r,e,"middle")}const autoEllipsis=Object.freeze(Object.defineProperty({__proto__:null,ellipsisHead,ellipsisMiddle,ellipsisTail,getDefault:getDefault$2},Symbol.toStringTag,{value:"Module"}));function isRotate(n){var r=n.attr("matrix");return r&&r[0]!==1}function getRotateAngle(n){var r=isRotate(n)?getAngleByMatrix(n.attr("matrix")):0;return r%360}function isOverlap(n,r,e,a){var o=!1,s=getRotateAngle(r),l=Math.abs(n?e.attr("y")-r.attr("y"):e.attr("x")-r.attr("x")),c=(n?e.attr("y")>r.attr("y"):e.attr("x")>r.attr("x"))?r.getBBox():e.getBBox();if(n){var u=Math.abs(Math.cos(s));near(u,0,Math.PI/180)?o=c.width+a>l:o=c.height/u+a>l}else{var u=Math.abs(Math.sin(s));near(u,0,Math.PI/180)?o=c.width+a>l:o=c.height/u+a>l}return o}function reserveOne(n,r,e,a){var o=(a==null?void 0:a.minGap)||0,s=r.getChildren().slice().filter(function(p){return p.get("visible")});if(!s.length)return!1;var l=!1;e&&s.reverse();for(var c=s.length,u=s[0],f=u,d=1;d<c;d++){var g=s[d];g.getBBox();var v=isOverlap(n,f,g,o);v?(g.hide(),l=!0):f=g}return l}function parityHide(n,r,e){var a=(e==null?void 0:e.minGap)||0,o=r.getChildren().slice();if(o.length<2)return!1;var s=!1,l=o[0],c=l.getBBox(),u=o[1],f=o.length,d=getRotateAngle(l),g=Math.abs(n?u.attr("y")-l.attr("y"):u.attr("x")-l.attr("x")),v=0;if(n){var p=Math.abs(Math.cos(d));if(near(p,0,Math.PI/180)){var y=getMaxLabelWidth(o);v=(y+a)/g}else v=(c.height/p+a)/g}else{var p=Math.abs(Math.sin(d));if(near(p,0,Math.PI/180)){var y=getMaxLabelWidth(o);v=(y+a)/g}else v=(c.height/p+a)/g}if(v>1){v=Math.ceil(v);for(var m=0;m<f;m++)m%v!==0&&(o[m].hide(),s=!0)}return s}function getDefault$1(){return equidistance}function reserveFirst(n,r,e,a){return reserveOne(n,r,!1,a)}function reserveLast(n,r,e,a){return reserveOne(n,r,!0,a)}function reserveBoth(n,r,e,a){var o=(a==null?void 0:a.minGap)||0,s=r.getChildren().slice();if(s.length<=2)return!1;for(var l=!1,c=s.length,u=s[0],f=s[c-1],d=u,g=1;g<c-1;g++){var v=s[g];v.getBBox();var p=isOverlap(n,d,v,o);p?(v.hide(),l=!0):d=v}var y=isOverlap(n,d,f,o);return y&&(d.hide(),l=!0),l}function equidistance(n,r,e,a){var o=parityHide(n,r,a);return reserveOne(n,r,!1)&&(o=!0),o}function equidistanceWithReverseBoth(n,r,e,a){var o=r.getChildren().slice(),s=parityHide(n,r,a);if(o.length>2){var l=o[0],c=o[o.length-1];l.get("visible")||(l.show(),reserveOne(n,r,!1,a)&&(s=!0)),c.get("visible")||(c.show(),reserveOne(n,r,!0,a)&&(s=!0))}return s}const autoHide=Object.freeze(Object.defineProperty({__proto__:null,equidistance,equidistanceWithReverseBoth,getDefault:getDefault$1,reserveBoth,reserveFirst,reserveLast},Symbol.toStringTag,{value:"Module"}));function setLabelsAngle(n,r){each$1(n,function(e){var a=e.attr("x"),o=e.attr("y"),s=getMatrixByAngle({x:a,y:o},r);e.attr("matrix",s)})}function labelRotate(n,r,e,a){var o=r.getChildren();if(!o.length||!n&&o.length<2)return!1;var s=getMaxLabelWidth(o),l=!1;if(n)l=!!e&&s>e;else{var c=Math.abs(o[1].attr("x")-o[0].attr("x"));l=s>c}if(l){var u=a(e,s);setLabelsAngle(o,u)}return l}function getDefault(){return fixedAngle}function fixedAngle(n,r,e,a){return labelRotate(n,r,e,function(){return isNumber$2(a)?a:n?Theme.verticalAxisRotate:Theme.horizontalAxisRotate})}function unfixedAngle(n,r,e){return labelRotate(n,r,e,function(a,o){if(!a)return n?Theme.verticalAxisRotate:Theme.horizontalAxisRotate;if(n)return-Math.acos(a/o);var s=0;return a>o?s=Math.PI/4:(s=Math.asin(a/o),s>Math.PI/4&&(s=Math.PI/4)),s})}const autoRotate=Object.freeze(Object.defineProperty({__proto__:null,fixedAngle,getDefault,unfixedAngle},Symbol.toStringTag,{value:"Module"})),OverlapUtil=Object.freeze(Object.defineProperty({__proto__:null,autoEllipsis,autoHide,autoRotate},Symbol.toStringTag,{value:"Module"}));var Line$5=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{type:"line",locationType:"region",start:null,end:null})},r.prototype.getLinePath=function(){var e=this.get("start"),a=this.get("end"),o=[];return o.push(["M",e.x,e.y]),o.push(["L",a.x,a.y]),o},r.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),a=this.get("end"),o=n.prototype.getInnerLayoutBBox.call(this),s=Math.min(e.x,a.x,o.x),l=Math.min(e.y,a.y,o.y),c=Math.max(e.x,a.x,o.maxX),u=Math.max(e.y,a.y,o.maxY);return{x:s,y:l,minX:s,minY:l,maxX:c,maxY:u,width:c-s,height:u-l}},r.prototype.isVertical=function(){var e=this.get("start"),a=this.get("end");return isNumberEqual$1(e.x,a.x)},r.prototype.isHorizontal=function(){var e=this.get("start"),a=this.get("end");return isNumberEqual$1(e.y,a.y)},r.prototype.getTickPoint=function(e){var a=this,o=a.get("start"),s=a.get("end"),l=s.x-o.x,c=s.y-o.y;return{x:o.x+l*e,y:o.y+c*e}},r.prototype.getSideVector=function(e){var a=this.getAxisVector(),o=normalize([0,0],a),s=this.get("verticalFactor"),l=[o[1],o[0]*-1];return scale$3([0,0],l,e*s)},r.prototype.getAxisVector=function(){var e=this.get("start"),a=this.get("end");return[a.x-e.x,a.y-e.y]},r.prototype.processOverlap=function(e){var a=this,o=this.isVertical(),s=this.isHorizontal();if(!(!o&&!s)){var l=this.get("label"),c=this.get("title"),u=this.get("verticalLimitLength"),f=l.offset,d=u,g=0,v=0;c&&(g=c.style.fontSize,v=c.spacing),d&&(d=d-f-v-g);var p=this.get("overlapOrder");if(each$1(p,function(x){l[x]&&a.canProcessOverlap(x)&&a.autoProcessOverlap(x,l[x],e,d)}),c&&isNil(c.offset)){var y=e.getCanvasBBox(),m=o?y.width:y.height;c.offset=f+m+v+g/2}}},r.prototype.canProcessOverlap=function(e){var a=this.get("label");return e==="autoRotate"?isNil(a.rotate):!0},r.prototype.autoProcessOverlap=function(e,a,o,s){var l=this,c=this.isVertical(),u=!1,f=OverlapUtil[e];if(a===!0)this.get("label"),u=f.getDefault()(c,o,s);else if(isFunction$1(a))u=a(c,o,s);else if(isObject$1(a)){var d=a;f[d.type]&&(u=f[d.type](c,o,s,d.cfg))}else f[a]&&(u=f[a](c,o,s));if(e==="autoRotate"){if(u){var g=o.getChildren(),v=this.get("verticalFactor");each$1(g,function(y){var m=y.attr("textAlign");if(m==="center"){var x=v>0?"end":"start";y.attr("textAlign",x)}})}}else if(e==="autoHide"){var p=o.getChildren().slice(0);each$1(p,function(y){y.get("visible")||(l.get("isRegister")&&l.unregisterElement(y),y.remove())})}},r}(AxisBase),Circle$4=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},r.prototype.getLinePath=function(){var e=this.get("center"),a=e.x,o=e.y,s=this.get("radius"),l=s,c=this.get("startAngle"),u=this.get("endAngle"),f=[];if(Math.abs(u-c)===Math.PI*2)f=[["M",a,o-l],["A",s,l,0,1,1,a,o+l],["A",s,l,0,1,1,a,o-l],["Z"]];else{var d=this.getCirclePoint(c),g=this.getCirclePoint(u),v=Math.abs(u-c)>Math.PI?1:0,p=c>u?0:1;f=[["M",a,o],["L",d.x,d.y],["A",s,l,0,v,p,g.x,g.y],["L",a,o]]}return f},r.prototype.getTickPoint=function(e){var a=this.get("startAngle"),o=this.get("endAngle"),s=a+(o-a)*e;return this.getCirclePoint(s)},r.prototype.getSideVector=function(e,a){var o=this.get("center"),s=[a.x-o.x,a.y-o.y],l=this.get("verticalFactor"),c=length(s);return scale$3(s,s,l*e/c),s},r.prototype.getAxisVector=function(e){var a=this.get("center"),o=[e.x-a.x,e.y-a.y];return[o[1],-1*o[0]]},r.prototype.getCirclePoint=function(e,a){var o=this.get("center");return a=a||this.get("radius"),{x:o.x+Math.cos(e)*a,y:o.y+Math.sin(e)*a}},r.prototype.canProcessOverlap=function(e){var a=this.get("label");return e==="autoRotate"?isNil(a.rotate):!0},r.prototype.processOverlap=function(e){var a=this,o=this.get("label"),s=this.get("title"),l=this.get("verticalLimitLength"),c=o.offset,u=l,f=0,d=0;s&&(f=s.style.fontSize,d=s.spacing),u&&(u=u-c-d-f);var g=this.get("overlapOrder");if(each$1(g,function(p){o[p]&&a.canProcessOverlap(p)&&a.autoProcessOverlap(p,o[p],e,u)}),s&&isNil(s.offset)){var v=e.getCanvasBBox().height;s.offset=c+v+d+f/2}},r.prototype.autoProcessOverlap=function(e,a,o,s){var l=this,c=!1,u=OverlapUtil[e];if(s>0)if(a===!0)c=u.getDefault()(!1,o,s);else if(isFunction$1(a))c=a(!1,o,s);else if(isObject$1(a)){var f=a;u[f.type]&&(c=u[f.type](!1,o,s,f.cfg))}else u[a]&&(c=u[a](!1,o,s));if(e==="autoRotate"){if(c){var d=o.getChildren(),g=this.get("verticalFactor");each$1(d,function(p){var y=p.attr("textAlign");if(y==="center"){var m=g>0?"end":"start";p.attr("textAlign",m)}})}}else if(e==="autoHide"){var v=o.getChildren().slice(0);each$1(v,function(p){p.get("visible")||(l.get("isRegister")&&l.unregisterElement(p),p.remove())})}},r}(AxisBase),CrosshairBase=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Theme.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Theme.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Theme.fontFamily}},textBackground:{padding:5,style:{stroke:Theme.lineColor}}}})},r.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},r.prototype.renderText=function(e){var a=this.get("text"),o=a.style,s=a.autoRotate,l=a.content;if(!isNil(l)){var c=this.getTextPoint(),u=null;if(s){var f=this.getRotateAngle();u=getMatrixByAngle(c,f)}this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:__assign$8(__assign$8(__assign$8({},c),{text:l,matrix:u}),o)})}},r.prototype.renderLine=function(e){var a=this.getLinePath(),o=this.get("line"),s=o.style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:__assign$8({path:a},s)})},r.prototype.renderBackground=function(e){var a=this.getElementId("text"),o=e.findById(a),s=this.get("textBackground");if(s&&o){var l=o.getBBox(),c=formatPadding(s.padding),u=s.style,f=this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:__assign$8({x:l.x-c[3],y:l.y-c[0],width:l.width+c[1]+c[3],height:l.height+c[0]+c[2],matrix:o.attr("matrix")},u)});f.toBack()}},r}(GroupComponent),LineCrosshair$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{type:"line",locationType:"region",start:null,end:null})},r.prototype.getRotateAngle=function(){var e=this.getLocation(),a=e.start,o=e.end,s=this.get("text").position,l=Math.atan2(o.y-a.y,o.x-a.x),c=s==="start"?l-Math.PI/2:l+Math.PI/2;return c},r.prototype.getTextPoint=function(){var e=this.getLocation(),a=e.start,o=e.end,s=this.get("text"),l=s.position,c=s.offset;return getTextPoint(a,o,l,c)},r.prototype.getLinePath=function(){var e=this.getLocation(),a=e.start,o=e.end;return[["M",a.x,a.y],["L",o.x,o.y]]},r}(CrosshairBase),LineCrosshair=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},r.prototype.getRotateAngle=function(){var e=this.getLocation(),a=e.startAngle,o=e.endAngle,s=this.get("text").position,l=s==="start"?a+Math.PI/2:o-Math.PI/2;return l},r.prototype.getTextPoint=function(){var e=this.get("text"),a=e.position,o=e.offset,s=this.getLocation(),l=s.center,c=s.radius,u=s.startAngle,f=s.endAngle,d=a==="start"?u:f,g=this.getRotateAngle()-Math.PI,v=getCirclePoint(l,c,d),p=Math.cos(g)*o,y=Math.sin(g)*o;return{x:v.x+p,y:v.y+y}},r.prototype.getLinePath=function(){var e=this.getLocation(),a=e.center,o=e.radius,s=e.startAngle,l=e.endAngle,c=null;if(l-s===Math.PI*2){var u=a.x,f=a.y;c=[["M",u,f-o],["A",o,o,0,1,1,u,f+o],["A",o,o,0,1,1,u,f-o],["Z"]]}else{var d=getCirclePoint(a,o,s),g=getCirclePoint(a,o,l),v=Math.abs(l-s)>Math.PI?1:0,p=s>l?0:1;c=[["M",d.x,d.y],["A",o,o,0,v,p,g.x,g.y]]}return c},r}(CrosshairBase),CONTAINER_CLASS$1="g2-crosshair",CROSSHAIR_LINE=CONTAINER_CLASS$1+"-line",CROSSHAIR_TEXT=CONTAINER_CLASS$1+"-text",_a$4;const HtmlTheme=(_a$4={},_a$4[""+CONTAINER_CLASS$1]={position:"relative"},_a$4[""+CROSSHAIR_LINE]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},_a$4[""+CROSSHAIR_TEXT]={position:"absolute",color:Theme.textColor,fontFamily:Theme.fontFamily},_a$4);var HtmlCrosshair=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+CONTAINER_CLASS$1+'"></div>',crosshairTpl:'<div class="'+CROSSHAIR_LINE+'"></div>',textTpl:'<span class="'+CROSSHAIR_TEXT+'">{content}</span>',domStyles:null,containerClassName:CONTAINER_CLASS$1,defaultStyles:HtmlTheme,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},r.prototype.render=function(){this.resetText(),this.resetPosition()},r.prototype.initCrossHair=function(){var e=this.getContainer(),a=this.get("crosshairTpl"),o=createDom$1(a);e.appendChild(o),this.applyStyle(CROSSHAIR_LINE,o),this.set("crosshairEl",o)},r.prototype.getTextPoint=function(){var e=this.getLocation(),a=e.start,o=e.end,s=this.get("text"),l=s.position,c=s.offset;return getTextPoint(a,o,l,c)},r.prototype.resetText=function(){var e=this.get("text"),a=this.get("textEl");if(e){var o=e.content;if(!a){var s=this.getContainer(),l=substitute(this.get("textTpl"),e);a=createDom$1(l),s.appendChild(a),this.applyStyle(CROSSHAIR_TEXT,a),this.set("textEl",a)}a.innerHTML=o}else a&&a.remove()},r.prototype.isVertical=function(e,a){return e.x===a.x},r.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var a=this.get("start"),o=this.get("end"),s=Math.min(a.x,o.x),l=Math.min(a.y,o.y);this.isVertical(a,o)?modifyCSS(e,{width:"1px",height:toPx(Math.abs(o.y-a.y))}):modifyCSS(e,{height:"1px",width:toPx(Math.abs(o.x-a.x))}),modifyCSS(e,{top:toPx(l),left:toPx(s)}),this.alignText()},r.prototype.alignText=function(){var e=this.get("textEl");if(e){var a=this.get("text").align,o=e.clientWidth,s=this.getTextPoint();switch(a){case"center":s.x=s.x-o/2;break;case"right":s.x=s.x-o}modifyCSS(e,{top:toPx(s.y),left:toPx(s.x)})}},r.prototype.updateInner=function(e){has(e,"text")&&this.resetText(),n.prototype.updateInner.call(this,e)},r}(HtmlComponent);const Crosshair=Object.freeze(Object.defineProperty({__proto__:null,Base:CrosshairBase,Circle:LineCrosshair,Html:HtmlCrosshair,Line:LineCrosshair$1},Symbol.toStringTag,{value:"Module"}));var GridBase=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Theme.lineColor}}}})},r.prototype.getLineType=function(){var e=this.get("line")||this.get("defaultCfg").line;return e.type},r.prototype.renderInner=function(e){this.drawGrid(e)},r.prototype.getAlternatePath=function(e,a){var o=this.getGridPath(e),s=a.slice(0).reverse(),l=this.getGridPath(s,!0),c=this.get("closed");return c?o=o.concat(l):(l[0][0]="L",o=o.concat(l),o.push(["Z"])),o},r.prototype.getPathStyle=function(){return this.get("line").style},r.prototype.drawGrid=function(e){var a=this,o=this.get("line"),s=this.get("items"),l=this.get("alternateColor"),c=null;each$1(s,function(u,f){var d=u.id||f;if(o){var g=a.getPathStyle();g=isFunction$1(g)?g(u,f,s):g;var v=a.getElementId("line-"+d),p=a.getGridPath(u.points);a.addShape(e,{type:"path",name:"grid-line",id:v,attrs:mix({path:p},g)})}if(l&&f>0){var y=a.getElementId("region-"+d),m=f%2===0;if(isString$1(l))m&&a.drawAlternateRegion(y,e,c.points,u.points,l);else{var x=m?l[1]:l[0];a.drawAlternateRegion(y,e,c.points,u.points,x)}}c=u})},r.prototype.drawAlternateRegion=function(e,a,o,s,l){var c=this.getAlternatePath(o,s);this.addShape(a,{type:"path",id:e,name:"grid-region",attrs:{path:c,fill:l}})},r}(GroupComponent);function distance$3(n,r,e,a){var o=e-n,s=a-r;return Math.sqrt(o*o+s*s)}var Circle$3=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{type:"circle",center:null,closed:!0})},r.prototype.getGridPath=function(e,a){var o=this.getLineType(),s=this.get("closed"),l=[];if(e.length)if(o==="circle"){var c=this.get("center"),u=e[0],f=distance$3(c.x,c.y,u.x,u.y),d=a?0:1;s?(l.push(["M",c.x,c.y-f]),l.push(["A",f,f,0,0,d,c.x,c.y+f]),l.push(["A",f,f,0,0,d,c.x,c.y-f]),l.push(["Z"])):each$1(e,function(g,v){v===0?l.push(["M",g.x,g.y]):l.push(["A",f,f,0,0,d,g.x,g.y])})}else each$1(e,function(g,v){v===0?l.push(["M",g.x,g.y]):l.push(["L",g.x,g.y])}),s&&l.push(["Z"]);return l},r}(GridBase),Line$4=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{type:"line"})},r.prototype.getGridPath=function(e){var a=[];return each$1(e,function(o,s){s===0?a.push(["M",o.x,o.y]):a.push(["L",o.x,o.y])}),a},r}(GridBase),LegendBase=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},r.prototype.getLayoutBBox=function(){var e=n.prototype.getLayoutBBox.call(this),a=this.get("maxWidth"),o=this.get("maxHeight"),s=e.width,l=e.height;return a&&(s=Math.min(s,a)),o&&(l=Math.min(l,o)),createBBox(e.minX,e.minY,s,l)},r.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},r.prototype.resetLocation=function(){var e=this.get("x"),a=this.get("y"),o=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+o,y:a+s})},r.prototype.applyOffset=function(){this.resetLocation()},r.prototype.getDrawPoint=function(){return this.get("currentPoint")},r.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},r.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},r.prototype.drawBackground=function(e){var a=this.get("background"),o=e.getBBox(),s=formatPadding(a.padding),l=__assign$8({x:0,y:0,width:o.width+s[1]+s[3],height:o.height+s[0]+s[2]},a.style),c=this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:l});c.toBack()},r.prototype.drawTitle=function(e){var a=this.get("currentPoint"),o=this.get("title"),s=o.spacing,l=o.style,c=o.text,u=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:__assign$8({text:c,x:a.x,y:a.y},l)}),f=u.getBBox();this.set("currentPoint",{x:a.x,y:f.maxY+s})},r.prototype.resetDraw=function(){var e=this.get("background"),a={x:0,y:0};if(e){var o=formatPadding(e.padding);a.x=o[3],a.y=o[0]}this.set("currentPoint",a)},r}(GroupComponent),DEFAULT_PAGE_NAVIGATOR={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},textStyle={fill:Theme.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Theme.fontFamily,fontWeight:"normal",lineHeight:12},RIGHT_ARROW_NAME="navigation-arrow-right",LEFT_ARROW_NAME="navigation-arrow-left",ROTATE_MAP={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},Category=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var a=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var o=e.getCurrentNavigationMatrix();e.get("animate")?a.animate({matrix:o},100):a.attr({matrix:o})}},e.onNavigationAfter=function(){var a=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var o=e.getCurrentNavigationMatrix();e.get("animate")?a.animate({matrix:o},100):a.attr({matrix:o})}},e}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Theme.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Theme.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:DEFAULT_PAGE_NAVIGATOR,itemName:{spacing:16,style:textStyle},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:textStyle,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Theme.uncheckedColor},markerStyle:{fill:Theme.uncheckedColor,stroke:Theme.uncheckedColor}},inactive:{nameStyle:{fill:Theme.uncheckedColor},markerStyle:{opacity:.2}}}}})},r.prototype.isList=function(){return!0},r.prototype.getItems=function(){return this.get("items")},r.prototype.setItems=function(e){this.update({items:e})},r.prototype.updateItem=function(e,a){mix(e,a),this.clear(),this.render()},r.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},r.prototype.setItemState=function(e,a,o){e[a]=o;var s=this.getElementByLocalId("item-"+e.id);if(s){var l=this.getItems(),c=l.indexOf(e),u=this.createOffScreenGroup(),f=this.drawItem(e,c,this.getItemHeight(),u);this.updateElements(f,s),this.clearUpdateStatus(s)}},r.prototype.hasState=function(e,a){return!!e[a]},r.prototype.getItemStates=function(e){var a=this.get("itemStates"),o=[];return each$1(a,function(s,l){e[l]&&o.push(l)}),o},r.prototype.clearItemsState=function(e){var a=this,o=this.getItemsByState(e);each$1(o,function(s){a.setItemState(s,e,!1)})},r.prototype.getItemsByState=function(e){var a=this,o=this.getItems();return filter(o,function(s){return a.hasState(s,e)})},r.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},r.prototype.processItems=function(){var e=this.get("items");each$1(e,function(a){a.id||(a.id=a.name)})},r.prototype.drawItems=function(e){var a=this,o=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),s=this.addGroup(o,{id:this.getElementId("item-group"),name:"legend-item-group"}),l=this.getItemHeight(),c=this.get("itemWidth"),u=this.get("itemSpacing"),f=this.get("itemMarginBottom"),d=this.get("currentPoint"),g=d.x,v=d.y,p=this.get("layout"),y=this.get("items"),m=!1,x=0,A=this.get("maxWidth"),_=this.get("maxHeight");each$1(y,function(b,S){var C=a.drawItem(b,S,l,s),E=C.getBBox(),T=c||E.width;T>x&&(x=T),p==="horizontal"?(A&&A<d.x+T-g&&(m=!0,d.x=g,d.y+=l+f),a.moveElementTo(C,d),d.x+=T+u):(_&&_<d.y+l+f-v&&(m=!0,d.x+=x+u,d.y=v,x=0),a.moveElementTo(C,d),d.y+=l+f)}),m&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=g,this.startY=v,this.adjustNavigation(e,s))},r.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var a=(this.get("itemName")||{}).style;if(isFunction$1(a)){var o=this.getItems();o.forEach(function(s,l){var c=__assign$8(__assign$8({},textStyle),a(s,l,o)).fontSize;e<c&&(e=c)})}else a&&(e=a.fontSize)}return e},r.prototype.drawMarker=function(e,a,o,s){var l=__assign$8(__assign$8(__assign$8({x:0,y:s/2},a.style),{symbol:get(o.marker,"symbol","circle")}),get(o.marker,"style",{})),c=this.addShape(e,{type:"marker",id:this.getElementId("item-"+o.id+"-marker"),name:"legend-item-marker",attrs:l}),u=c.getBBox();c.attr("x",u.width/2);var f=c.attr(),d=f.stroke,g=f.fill;return d&&c.set("isStroke",!0),g&&c.set("isFill",!0),c},r.prototype.drawItemText=function(e,a,o,s,l,c,u){var f=o.formatter,d=o.style,g=__assign$8(__assign$8({x:c,y:l/2,text:f?f(s[a],s,u):s[a]},textStyle),isFunction$1(d)?d(s,u,this.getItems()):d);return this.addShape(e,{type:"text",id:this.getElementId("item-"+s.id+"-"+a),name:"legend-item-"+a,attrs:g})},r.prototype.drawRadio=function(e,a,o,s,l){var c,u,f=a.style||{},d=(c=f.r)!==null&&c!==void 0?c:s/2,g=d*3.6/8,v=[l+d,s/2-d],p=v[0],y=v[1],m=[p+d,y+d],x=m[0],A=m[1],_=[p,A+d],b=_[0],S=_[1],C=[l,y+d],E=C[0],T=C[1],w=o.showRadio,L=__assign$8(__assign$8({path:[["M",p,y],["A",d,d,0,0,1,x,A],["L",x-g,A],["L",x,A],["A",d,d,0,0,1,b,S],["L",b,S-g],["L",b,S],["A",d,d,0,0,1,E,T],["L",E+g,T],["L",E,T],["A",d,d,0,0,1,p,y],["L",p,y+g]],stroke:"#000000",fill:"#ffffff"},f),{opacity:w?(u=f==null?void 0:f.opacity)!==null&&u!==void 0?u:.45:0}),M=this.addShape(e,{type:"path",id:this.getElementId("item-"+o.id+"-radio"),name:"legend-item-radio",attrs:L});return M.set("tip",a.tip),M},r.prototype.drawItem=function(e,a,o,s){var l="item-"+e.id,c=this.addGroup(s,{name:"legend-item-container",id:this.getElementId("item-container-"+l),delegateObject:{item:e,index:a}}),u=this.addGroup(c,{name:"legend-item",id:this.getElementId(l),delegateObject:{item:e,index:a}}),f=this.get("marker"),d=this.get("itemName"),g=this.get("itemValue"),v=this.get("itemBackground"),p=this.get("radio"),y=this.getLimitItemWidth(),m=0;if(f){var x=this.drawMarker(u,f,e,o),A=f.spacing,_=get(e,["marker","spacing"]);isNumber$2(_)&&(A=_),m=x.getBBox().maxX+A}if(d){var b=this.drawItemText(u,"name",d,e,o,m,a);y&&ellipsisLabel(!0,b,clamp(y-m,0,y)),m=b.getBBox().maxX+d.spacing}if(g){var S=this.drawItemText(u,"value",g,e,o,m,a);y&&(g.alignRight?(S.attr({textAlign:"right",x:y}),ellipsisLabel(!0,S,clamp(y-m,0,y),"head")):ellipsisLabel(!0,S,clamp(y-m,0,y))),m=S.getBBox().maxX+g.spacing}if(p&&this.drawRadio(u,p,e,o,m),v){var C=u.getBBox(),E=this.addShape(u,{type:"rect",name:"legend-item-background",id:this.getElementId(l+"-background"),attrs:__assign$8({x:0,y:0,width:C.width,height:o},v.style)});E.toBack()}return this.applyItemStates(e,u),u},r.prototype.adjustNavigation=function(e,a){var o=this,s=this.startX,l=this.startY,c=this.get("layout"),u=a.findAll(function(P){return P.get("name")==="legend-item"}),f=this.get("maxWidth"),d=this.get("maxHeight"),g=this.get("itemWidth"),v=this.get("itemSpacing"),p=this.getItemHeight(),y=deepMix({},DEFAULT_PAGE_NAVIGATOR,this.get("pageNavigator")),m=this.drawNavigation(e,c,"00/00",y),x=m.getBBox(),A={x:s,y:l},_=1,b=0,S=0,C=0,E=this.get("itemMarginBottom");function T(P,N){var G=P.getBBox(),Y=g||G.width,F=N.x+Y+v+x.width;return F>f}if(c==="horizontal"){var w=this.get("maxRow")||1,L=p+(w===1?0:E),M=f-v-x.width-x.minX;this.pageHeight=L*w,this.pageWidth=M,each$1(u,function(P){var N=P.getBBox(),G=g||N.width;(b&&b<A.x+G+v||T(P,A))&&(_===1&&(b=A.x+v,o.moveElementTo(m,{x:M,y:A.y+p/2-x.height/2-x.minY})),_+=1,A.x=s,A.y+=L),o.moveElementTo(P,A),P.getParent().setClip({type:"rect",attrs:{x:A.x,y:A.y,width:G+v,height:p}}),A.x+=G+v})}else{each$1(u,function(P){var N=P.getBBox();N.width>S&&(S=N.width)}),C=S,S+=v,f&&(S=Math.min(f,S),C=Math.min(f,C)),this.pageWidth=S,this.pageHeight=d-Math.max(x.height,p+E);var O=Math.floor(this.pageHeight/(p+E));each$1(u,function(P,N){N!==0&&N%O===0&&(_+=1,A.x+=S,A.y=l),o.moveElementTo(P,A),P.getParent().setClip({type:"rect",attrs:{x:A.x,y:A.y,width:S,height:p}}),A.y+=p+E}),this.totalPagesCnt=_,this.moveElementTo(m,{x:s+C/2-x.width/2-x.minX,y:d-x.height-x.minY})}this.pageHeight&&this.pageWidth&&a.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),c==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(_/this.get("maxRow")):this.totalPagesCnt=_,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(m),a.attr("matrix",this.getCurrentNavigationMatrix())},r.prototype.drawNavigation=function(e,a,o,s){var l={x:0,y:0},c=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),u=get(s.marker,"style",{}),f=u.size,d=f===void 0?12:f,g=__rest$1(u,["size"]),v=this.drawArrow(c,l,LEFT_ARROW_NAME,a==="horizontal"?"up":"left",d,g);v.on("click",this.onNavigationBack);var p=v.getBBox();l.x+=p.width+2;var y=this.addShape(c,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:__assign$8({x:l.x,y:l.y+d/2,text:o,textBaseline:"middle"},get(s.text,"style"))}),m=y.getBBox();l.x+=m.width+2;var x=this.drawArrow(c,l,RIGHT_ARROW_NAME,a==="horizontal"?"down":"right",d,g);return x.on("click",this.onNavigationAfter),c},r.prototype.updateNavigation=function(e){var a=deepMix({},DEFAULT_PAGE_NAVIGATOR,this.get("pageNavigator")),o=a.marker.style,s=o.fill,l=o.opacity,c=o.inactiveFill,u=o.inactiveOpacity,f=this.currentPageIndex+"/"+this.totalPagesCnt,d=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),g=e?e.findById(this.getElementId(LEFT_ARROW_NAME)):this.getElementByLocalId(LEFT_ARROW_NAME),v=e?e.findById(this.getElementId(RIGHT_ARROW_NAME)):this.getElementByLocalId(RIGHT_ARROW_NAME);d.attr("text",f),g.attr("opacity",this.currentPageIndex===1?u:l),g.attr("fill",this.currentPageIndex===1?c:s),g.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),v.attr("opacity",this.currentPageIndex===this.totalPagesCnt?u:l),v.attr("fill",this.currentPageIndex===this.totalPagesCnt?c:s),v.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var p=g.getBBox().maxX+2;d.attr("x",p),p+=d.getBBox().width+2,this.updateArrowPath(v,{x:p,y:0})},r.prototype.drawArrow=function(e,a,o,s,l,c){var u=a.x,f=a.y,d=this.addShape(e,{type:"path",id:this.getElementId(o),name:o,attrs:__assign$8({size:l,direction:s,path:[["M",u+l/2,f],["L",u,f+l],["L",u+l,f+l],["Z"]],cursor:"pointer"},c)});return d.attr("matrix",getMatrixByAngle({x:u+l/2,y:f+l/2},ROTATE_MAP[s])),d},r.prototype.updateArrowPath=function(e,a){var o=a.x,s=a.y,l=e.attr(),c=l.size,u=l.direction,f=getMatrixByAngle({x:o+c/2,y:s+c/2},ROTATE_MAP[u]);e.attr("path",[["M",o+c/2,s],["L",o,s+c],["L",o+c,s+c],["Z"]]),e.attr("matrix",f)},r.prototype.getCurrentNavigationMatrix=function(){var e=this,a=e.currentPageIndex,o=e.pageWidth,s=e.pageHeight,l=this.get("layout"),c=l==="horizontal"?{x:0,y:s*(1-a)}:{x:o*(1-a),y:0};return getMatrixByTranslate(c)},r.prototype.applyItemStates=function(e,a){var o=this.getItemStates(e),s=o.length>0;if(s){var l=a.getChildren(),c=this.get("itemStates");each$1(l,function(u){var f=u.get("name"),d=f.split("-")[2],g=getStatesStyle(e,d,c);g&&(u.attr(g),d==="marker"&&!(u.get("isStroke")&&u.get("isFill"))&&(u.get("isStroke")&&u.attr("fill",null),u.get("isFill")&&u.attr("stroke",null)))})}},r.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),a=this.get("maxItemWidth");return a?e&&(a=e<=a?e:a):e&&(a=e),a},r}(LegendBase),HANDLER_HEIGHT_RATIO=1.4,HANDLER_TRIANGLE_RATIO=.4,ContinueLegend=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Theme.textColor,textBaseline:"middle",fontFamily:Theme.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Theme.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},r.prototype.isSlider=function(){return!0},r.prototype.getValue=function(){return this.getCurrentValue()},r.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},r.prototype.setRange=function(e,a){this.update({min:e,max:a})},r.prototype.setValue=function(e){var a=this.getValue();this.set("value",e);var o=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(o),this.delegateEmit("valuechanged",{originValue:a,value:e})},r.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},r.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},r.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},r.prototype.bindHandlersEvent=function(e){var a=this;e.on("legend-handler-min:drag",function(o){var s=a.getValueByCanvasPoint(o.x,o.y),l=a.getCurrentValue(),c=l[1];c<s&&(c=s),a.setValue([s,c])}),e.on("legend-handler-max:drag",function(o){var s=a.getValueByCanvasPoint(o.x,o.y),l=a.getCurrentValue(),c=l[0];c>s&&(c=s),a.setValue([c,s])})},r.prototype.bindRailEvent=function(e){},r.prototype.bindTrackEvent=function(e){var a=this,o=null;e.on("legend-track:dragstart",function(s){o={x:s.x,y:s.y}}),e.on("legend-track:drag",function(s){if(o){var l=a.getValueByCanvasPoint(o.x,o.y),c=a.getValueByCanvasPoint(s.x,s.y),u=a.getCurrentValue(),f=u[1]-u[0],d=a.getRange(),g=c-l;g<0?u[0]+g>d.min?a.setValue([u[0]+g,u[1]+g]):a.setValue([d.min,d.min+f]):g>0&&(g>0&&u[1]+g<d.max?a.setValue([u[0]+g,u[1]+g]):a.setValue([d.max-f,d.max])),o={x:s.x,y:s.y}}}),e.on("legend-track:dragend",function(s){o=null})},r.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},r.prototype.drawLabel=function(e,a){var o=this.get("label"),s=o.style,l=o.align,c=o.formatter,u=this.get(e),f=this.getLabelAlignAttrs(e,l),d="label-"+e;this.addShape(a,{type:"text",id:this.getElementId(d),name:"legend-label-"+e,attrs:__assign$8(__assign$8({x:0,y:0,text:isFunction$1(c)?c(u):u},s),f)})},r.prototype.getLabelAlignAttrs=function(e,a){var o=this.isVertical(),s="center",l="middle";return o?(s="start",a!=="rail"?e==="min"?l="top":l="bottom":l="top"):a!=="rail"?(l="top",e==="min"?s="start":s="end"):(s="start",l="middle"),{textAlign:s,textBaseline:l}},r.prototype.getRailPath=function(e,a,o,s){var l=this.get("rail"),c=l.size,u=l.defaultLength,f=l.type,d=this.isVertical(),g=u,v=o,p=s;v||(v=d?c:g),p||(p=d?g:c);var y=[];return f==="color"?(y.push(["M",e,a]),y.push(["L",e+v,a]),y.push(["L",e+v,a+p]),y.push(["L",e,a+p]),y.push(["Z"])):(y.push(["M",e+v,a]),y.push(["L",e+v,a+p]),y.push(["L",e,a+p]),y.push(["Z"])),y},r.prototype.drawRail=function(e){var a=this.get("rail"),o=a.style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:__assign$8({path:this.getRailPath(0,0)},o)})},r.prototype.getTrackColor=function(e){var a=e.length;if(!a)return null;if(a===1)return e[0];var o;this.isVertical()?o="l(90)":o="l(0)";for(var s=0;s<a;s++){var l=s/(a-1);o+=" "+l+":"+e[s]}return o},r.prototype.getTrackPath=function(e){var a=this.getRailShape(e),o=a.attr("path");return clone(o)},r.prototype.getClipTrackAttrs=function(e){var a=this.getCurrentValue(),o=a[0],s=a[1],l=this.getRailBBox(e),c=this.getPointByValue(o,e),u=this.getPointByValue(s,e),f=this.isVertical(),d,g,v,p;return f?(d=l.minX,g=c.y,v=l.width,p=u.y-c.y):(d=c.x,g=l.minY,v=u.x-c.x,p=l.height),{x:d,y:g,width:v,height:p}},r.prototype.getTrackAttrs=function(e){var a=this.get("track"),o=this.get("colors"),s=this.getTrackPath(e);return mix({path:s,fill:this.getTrackColor(o)},a.style)},r.prototype.resetTrackClip=function(e){var a=e||this.get("group"),o=this.getElementId("track"),s=a.findById(o),l=s.getClip(),c=this.getClipTrackAttrs(e);l?l.attr(c):s.setClip({type:"rect",attrs:c})},r.prototype.resetTrack=function(e){var a=this.getElementId("track"),o=e.findById(a),s=this.getTrackAttrs(e);o?o.attr(s):this.addShape(e,{type:"path",id:a,draggable:this.get("slidable"),name:"legend-track",attrs:s})},r.prototype.getPointByValue=function(e,a){var o=this.getRange(),s=o.min,l=o.max,c=(e-s)/(l-s),u=this.getRailBBox(a),f=this.isVertical(),d={x:0,y:0};return f?(d.x=u.minX+u.width/2,d.y=getValueByPercent(u.minY,u.maxY,c)):(d.x=getValueByPercent(u.minX,u.maxX,c),d.y=u.minY+u.height/2),d},r.prototype.getRailShape=function(e){var a=e||this.get("group");return a.findById(this.getElementId("rail"))},r.prototype.getRailBBox=function(e){var a=this.getRailShape(e),o=a.getBBox();return o},r.prototype.getRailCanvasBBox=function(){var e=this.get("group"),a=e.findById(this.getElementId("rail")),o=a.getCanvasBBox();return o},r.prototype.isVertical=function(){return this.get("layout")==="vertical"},r.prototype.getValueByCanvasPoint=function(e,a){var o=this.getRange(),s=o.min,l=o.max,c=this.getRailCanvasBBox(),u=this.isVertical(),f=this.get("step"),d;u?d=(a-c.minY)/c.height:d=(e-c.minX)/c.width;var g=getValueByPercent(s,l,d);if(f){var v=Math.round((g-s)/f);g=s+v*f}return g>l&&(g=l),g<s&&(g=s),g},r.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var a=this.get("values");return a?[Math.max(Math.min.apply(Math,__spreadArrays$3(a,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,__spreadArrays$3(a,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},r.prototype.resetHandlers=function(e){var a=this.getCurrentValue(),o=a[0],s=a[1];this.resetHandler(e,"min",o),this.resetHandler(e,"max",s)},r.prototype.getHandlerPath=function(e,a){var o=this.isVertical(),s=[],l=e.size,c=a.x,u=a.y,f=l*HANDLER_HEIGHT_RATIO,d=l/2,g=l/6;if(o){var v=c+f*HANDLER_TRIANGLE_RATIO;s.push(["M",c,u]),s.push(["L",v,u+d]),s.push(["L",c+f,u+d]),s.push(["L",c+f,u-d]),s.push(["L",v,u-d]),s.push(["Z"]),s.push(["M",v,u+g]),s.push(["L",c+f-2,u+g]),s.push(["M",v,u-g]),s.push(["L",c+f-2,u-g])}else{var p=u+f*HANDLER_TRIANGLE_RATIO;s.push(["M",c,u]),s.push(["L",c-d,p]),s.push(["L",c-d,u+f]),s.push(["L",c+d,u+f]),s.push(["L",c+d,p]),s.push(["Z"]),s.push(["M",c-g,p]),s.push(["L",c-g,u+f-2]),s.push(["M",c+g,p]),s.push(["L",c+g,u+f-2])}return s},r.prototype.resetHandler=function(e,a,o){var s=this.getPointByValue(o,e),l=this.get("handler"),c=this.getHandlerPath(l,s),u=this.getElementId("handler-"+a),f=e.findById(u),d=this.isVertical();f?f.attr("path",c):this.addShape(e,{type:"path",name:"legend-handler-"+a,draggable:!0,id:u,attrs:__assign$8(__assign$8({path:c},l.style),{cursor:d?"ns-resize":"ew-resize"})})},r.prototype.fixedElements=function(e){var a=e.findById(this.getElementId("rail")),o=e.findById(this.getElementId("label-min")),s=e.findById(this.getElementId("label-max")),l=this.getDrawPoint();this.isVertical()?this.fixedVertail(o,s,a,l):this.fixedHorizontal(o,s,a,l)},r.prototype.fitRailLength=function(e,a,o,s){var l=this.isVertical(),c=l?"height":"width",u=this.get("label"),f=u.align,d=u.spacing,g=this.get("max"+upperFirst(c));if(g){var v=f==="rail"?o[c]+e[c]+a[c]+d*2:o[c],p=v-g;p>0&&this.changeRailLength(s,c,o[c]-p)}},r.prototype.changeRailLength=function(e,a,o){var s=e.getBBox(),l;a==="height"?l=this.getRailPath(s.x,s.y,s.width,o):l=this.getRailPath(s.x,s.y,o,s.height),e.attr("path",l)},r.prototype.changeRailPosition=function(e,a,o){var s=e.getBBox(),l=this.getRailPath(a,o,s.width,s.height);e.attr("path",l)},r.prototype.fixedHorizontal=function(e,a,o,s){var l=this.get("label"),c=l.align,u=l.spacing,f=o.getBBox(),d=e.getBBox(),g=a.getBBox(),v=f.height;this.fitRailLength(d,g,f,o),f=o.getBBox(),c==="rail"?(e.attr({x:s.x,y:s.y+v/2}),this.changeRailPosition(o,s.x+d.width+u,s.y),a.attr({x:s.x+d.width+f.width+u*2,y:s.y+v/2})):c==="top"?(e.attr({x:s.x,y:s.y}),a.attr({x:s.x+f.width,y:s.y}),this.changeRailPosition(o,s.x,s.y+d.height+u)):(this.changeRailPosition(o,s.x,s.y),e.attr({x:s.x,y:s.y+f.height+u}),a.attr({x:s.x+f.width,y:s.y+f.height+u}))},r.prototype.fixedVertail=function(e,a,o,s){var l=this.get("label"),c=l.align,u=l.spacing,f=o.getBBox(),d=e.getBBox(),g=a.getBBox();if(this.fitRailLength(d,g,f,o),f=o.getBBox(),c==="rail")e.attr({x:s.x,y:s.y}),this.changeRailPosition(o,s.x,s.y+d.height+u),a.attr({x:s.x,y:s.y+d.height+f.height+u*2});else if(c==="right")e.attr({x:s.x+f.width+u,y:s.y}),this.changeRailPosition(o,s.x,s.y),a.attr({x:s.x+f.width+u,y:s.y+f.height});else{var v=Math.max(d.width,g.width);e.attr({x:s.x,y:s.y}),this.changeRailPosition(o,s.x+v+u,s.y),a.attr({x:s.x,y:s.y+f.height})}},r}(LegendBase),CONTAINER_CLASS="g2-tooltip",TITLE_CLASS="g2-tooltip-title",LIST_CLASS="g2-tooltip-list",LIST_ITEM_CLASS="g2-tooltip-list-item",MARKER_CLASS="g2-tooltip-marker",VALUE_CLASS="g2-tooltip-value",NAME_CLASS="g2-tooltip-name",CROSSHAIR_X="g2-tooltip-crosshair-x",CROSSHAIR_Y="g2-tooltip-crosshair-y";const CssConst=Object.freeze(Object.defineProperty({__proto__:null,CONTAINER_CLASS,CROSSHAIR_X,CROSSHAIR_Y,LIST_CLASS,LIST_ITEM_CLASS,MARKER_CLASS,NAME_CLASS,TITLE_CLASS,VALUE_CLASS},Symbol.toStringTag,{value:"Module"}));var _a$3;const TooltipTheme=(_a$3={},_a$3[""+CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Theme.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},_a$3[""+TITLE_CLASS]={marginBottom:"4px"},_a$3[""+LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},_a$3[""+LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},_a$3[""+MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},_a$3[""+VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},_a$3[""+CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},_a$3[""+CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},_a$3);function getOutSides(n,r,e,a,o){var s={left:n<o.x,right:n+e>o.x+o.width,top:r<o.y,bottom:r+a>o.y+o.height};return s}function getPointByPosition(n,r,e,a,o,s){var l=n,c=r;switch(s){case"left":l=n-a-e,c=r-o/2;break;case"right":l=n+e,c=r-o/2;break;case"top":l=n-a/2,c=r-o-e;break;case"bottom":l=n-a/2,c=r+e;break;default:l=n+e,c=r-o-e;break}return{x:l,y:c}}function getAlignPoint(n,r,e,a,o,s,l){var c=getPointByPosition(n,r,e,a,o,s);if(l){var u=getOutSides(c.x,c.y,a,o,l);s==="auto"?(u.right&&(c.x=Math.max(0,n-a-e)),u.top&&(c.y=Math.max(0,r-o-e))):s==="top"||s==="bottom"?(u.left&&(c.x=l.x),u.right&&(c.x=l.x+l.width-a),s==="top"&&u.top&&(c.y=r+e),s==="bottom"&&u.bottom&&(c.y=r-o-e)):(u.top&&(c.y=l.y),u.bottom&&(c.y=l.y+l.height-o),s==="left"&&u.left&&(c.x=n+e),s==="right"&&u.right&&(c.x=n-a-e))}return c}function hasOneKey(n,r){var e=!1;return each$1(r,function(a){if(has(n,a))return e=!0,!1}),e}var Tooltip$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+CONTAINER_CLASS+'"><div class="'+TITLE_CLASS+'"></div><ul class="'+LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+NAME_CLASS+`">{name}</span>:
          <span class="`+VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:TooltipTheme})},r.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},r.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},r.prototype.show=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!0),modifyCSS(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},r.prototype.hide=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!1),modifyCSS(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},r.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},r.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},r.prototype.setCrossHairsVisible=function(e){var a=e?"":"none",o=this.get("xCrosshairDom"),s=this.get("yCrosshairDom");o&&modifyCSS(o,{display:a}),s&&modifyCSS(s,{display:a})},r.prototype.initContainer=function(){if(n.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var e=this.getHtmlContentNode();this.get("parent").appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()}},r.prototype.updateInner=function(e){this.get("customContent")?this.renderCustomContent():(hasOneKey(e,["title","showTitle"])&&this.resetTitle(),has(e,"items")&&this.renderItems()),n.prototype.updateInner.call(this,e)},r.prototype.initDom=function(){this.cacheDoms()},r.prototype.removeDom=function(){n.prototype.removeDom.call(this),this.clearCrosshairs()},r.prototype.resetPosition=function(){var e=this.get("x"),a=this.get("y"),o=this.get("offset"),s=this.getOffset(),l=s.offsetX,c=s.offsetY,u=this.get("position"),f=this.get("region"),d=this.getContainer(),g=this.getBBox(),v=g.width,p=g.height,y;f&&(y=regionToBBox(f));var m=getAlignPoint(e,a,o,v,p,u,y);modifyCSS(d,{left:toPx(m.x+l),top:toPx(m.y+c)}),this.resetCrosshairs()},r.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),a=this.get("parent"),o=this.get("container");o&&o.parentNode===a?a.replaceChild(e,o):a.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},r.prototype.getHtmlContentNode=function(){var e,a=this.get("customContent");if(a){var o=a(this.get("title"),this.get("items"));isElement(o)?e=o:e=createDom$1(o)}return e},r.prototype.cacheDoms=function(){var e=this.getContainer(),a=e.getElementsByClassName(TITLE_CLASS)[0],o=e.getElementsByClassName(LIST_CLASS)[0];this.set("titleDom",a),this.set("listDom",o)},r.prototype.resetTitle=function(){var e=this.get("title"),a=this.get("showTitle");a&&e?this.setTitle(e):this.setTitle("")},r.prototype.setTitle=function(e){var a=this.get("titleDom");a&&(a.innerText=e)},r.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),a=this.get("crosshairs");if(!e||!a)this.clearCrosshairs();else{var o=regionToBBox(e),s=this.get("xCrosshairDom"),l=this.get("yCrosshairDom");a==="x"?(this.resetCrosshair("x",o),l&&(l.remove(),this.set("yCrosshairDom",null))):a==="y"?(this.resetCrosshair("y",o),s&&(s.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",o),this.resetCrosshair("y",o)),this.setCrossHairsVisible(this.get("visible"))}},r.prototype.resetCrosshair=function(e,a){var o=this.checkCrosshair(e),s=this.get(e);e==="x"?modifyCSS(o,{left:toPx(s),top:toPx(a.y),height:toPx(a.height)}):modifyCSS(o,{top:toPx(s),left:toPx(a.x),width:toPx(a.width)})},r.prototype.checkCrosshair=function(e){var a=e+"CrosshairDom",o=e+"CrosshairTpl",s="CROSSHAIR_"+e.toUpperCase(),l=CssConst[s],c=this.get(a),u=this.get("parent");return c||(c=createDom$1(this.get(o)),this.applyStyle(l,c),u.appendChild(c),this.set(a,c)),c},r.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),a=this.get("itemTpl"),o=this.get("listDom");o&&(each$1(e,function(s){var l=colorUtil.toCSSGradient(s.color),c=__assign$8(__assign$8({},s),{color:l}),u=substitute(a,c),f=createDom$1(u);o.appendChild(f)}),this.applyChildrenStyles(o,this.get("domStyles")))},r.prototype.clearItemDoms=function(){this.get("listDom")&&clearDom(this.get("listDom"))},r.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),a=this.get("yCrosshairDom");e&&e.remove(),a&&a.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},r}(HtmlComponent),BACKGROUND_STYLE$1={opacity:0},LINE_STYLE={stroke:"#C5C5C5",strokeOpacity:.85},AREA_STYLE={fill:"#CACED4",opacity:.85};function pointsToPath(n){return map$2(n,function(r,e){var a=e===0?"M":"L",o=r[0],s=r[1];return[a,o,s]})}function getLinePath$1(n){return pointsToPath(n)}function getSmoothLinePath(n){if(n.length<=2)return getLinePath$1(n);var r=[];each$1(n,function(l){isEqual$1(l,r.slice(r.length-2))||r.push(l[0],l[1])});var e=catmullRom2Bezier(r,!1),a=head(n),o=a[0],s=a[1];return e.unshift(["M",o,s]),e}function dataToPath(n,r,e,a){a===void 0&&(a=!0);var o=new Linear({values:n}),s=new Category$1({values:map$2(n,function(c,u){return u})}),l=map$2(n,function(c,u){return[s.scale(u)*r,e-o.scale(c)*e]});return a?getSmoothLinePath(l):getLinePath$1(l)}function getAreaLineY(n,r){var e=new Linear({values:n}),a=e.max<0?e.max:Math.max(0,e.min);return r-e.scale(a)*r}function linePathToAreaPath(n,r,e,a){var o=__spreadArrays$3(n),s=getAreaLineY(a,e);return o.push(["L",r,s]),o.push(["L",0,s]),o.push(["Z"]),o}var Trend=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:BACKGROUND_STYLE$1,lineStyle:LINE_STYLE,areaStyle:AREA_STYLE})},r.prototype.renderInner=function(e){var a=this.cfg,o=a.width,s=a.height,l=a.data,c=a.smooth,u=a.isArea,f=a.backgroundStyle,d=a.lineStyle,g=a.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:__assign$8({x:0,y:0,width:o,height:s},f)});var v=dataToPath(l,o,s,c);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:__assign$8({path:v},d)}),u){var p=linePathToAreaPath(v,o,s,l);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:__assign$8({path:p},g)})}},r.prototype.applyOffset=function(){var e=this.cfg,a=e.x,o=e.y;this.moveElementTo(this.get("group"),{x:a,y:o})},r}(GroupComponent),DEFAULT_HANDLER_STYLE={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Handler=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"handler",x:0,y:0,width:10,height:24,style:DEFAULT_HANDLER_STYLE})},r.prototype.renderInner=function(e){var a=this.cfg,o=a.width,s=a.height,l=a.style,c=l.fill,u=l.stroke,f=l.radius,d=l.opacity,g=l.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:o,height:s,fill:c,stroke:u,radius:f,opacity:d,cursor:g}});var v=1/3*o,p=2/3*o,y=1/4*s,m=3/4*s;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:v,y1:y,x2:v,y2:m,stroke:u,cursor:g}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:p,y1:y,x2:p,y2:m,stroke:u,cursor:g}})},r.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},r.prototype.initEvent=function(){this.bindEvents()},r.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",function(){var a=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",a),e.draw()}),this.get("group").on("mouseleave",function(){var a=e.get("style").fill;e.getElementByLocalId("background").attr("fill",a),e.draw()})},r.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},r}(GroupComponent),BACKGROUND_STYLE={fill:"#416180",opacity:.05},FOREGROUND_STYLE={fill:"#5B8FF9",opacity:.15,cursor:"move"},DEFAULT_HANDLER_WIDTH=10,HANDLER_STYLE={width:DEFAULT_HANDLER_WIDTH,height:24},TEXT_STYLE={textBaseline:"middle",fill:"#000",opacity:.45},SLIDER_CHANGE="sliderchange",Slider$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.onMouseDown=function(a){return function(o){e.currentTarget=a;var s=o.originalEvent;s.stopPropagation(),s.preventDefault(),e.prevX=get(s,"touches.0.pageX",s.pageX),e.prevY=get(s,"touches.0.pageY",s.pageY);var l=e.getContainerDOM();l.addEventListener("mousemove",e.onMouseMove),l.addEventListener("mouseup",e.onMouseUp),l.addEventListener("mouseleave",e.onMouseUp),l.addEventListener("touchmove",e.onMouseMove),l.addEventListener("touchend",e.onMouseUp),l.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(a){var o=e.cfg.width,s=[e.get("start"),e.get("end")];a.stopPropagation(),a.preventDefault();var l=get(a,"touches.0.pageX",a.pageX),c=get(a,"touches.0.pageY",a.pageY),u=l-e.prevX,f=e.adjustOffsetRange(u/o);e.updateStartEnd(f),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=l,e.prevY=c,e.draw(),e.emit(SLIDER_CHANGE,[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:s,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var a=e.getContainerDOM();a&&(a.removeEventListener("mousemove",e.onMouseMove),a.removeEventListener("mouseup",e.onMouseUp),a.removeEventListener("mouseleave",e.onMouseUp),a.removeEventListener("touchmove",e.onMouseMove),a.removeEventListener("touchend",e.onMouseUp),a.removeEventListener("touchcancel",e.onMouseUp))},e}return r.prototype.setRange=function(e,a){this.set("minLimit",e),this.set("maxLimit",a);var o=this.get("start"),s=this.get("end"),l=clamp(o,e,a),c=clamp(s,e,a);!this.get("isInit")&&(o!==l||s!==c)&&this.setValue([l,c])},r.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},r.prototype.setValue=function(e){var a=this.getRange();if(isArray$4(e)&&e.length===2){var o=[this.get("start"),this.get("end")];this.update({start:clamp(e[0],a.min,a.max),end:clamp(e[1],a.min,a.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:o,value:e})}},r.prototype.getValue=function(){return[this.get("start"),this.get("end")]},r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:BACKGROUND_STYLE,foregroundStyle:FOREGROUND_STYLE,handlerStyle:HANDLER_STYLE,textStyle:TEXT_STYLE}})},r.prototype.update=function(e){var a=e.start,o=e.end,s=__assign$8({},e);isNil(a)||(s.start=clamp(a,0,1)),isNil(o)||(s.end=clamp(o,0,1)),n.prototype.update.call(this,s),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},r.prototype.init=function(){this.set("start",clamp(this.get("start"),0,1)),this.set("end",clamp(this.get("end"),0,1)),n.prototype.init.call(this)},r.prototype.render=function(){n.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},r.prototype.renderInner=function(e){var a=this.cfg;a.start,a.end;var o=a.width,s=a.height,l=a.trendCfg,c=l===void 0?{}:l,u=a.minText,f=a.maxText,d=a.backgroundStyle,g=d===void 0?{}:d,v=a.foregroundStyle,p=v===void 0?{}:v,y=a.textStyle,m=y===void 0?{}:y,x=deepMix({},DEFAULT_HANDLER_STYLE,this.cfg.handlerStyle);size(get(c,"data"))&&(this.trend=this.addComponent(e,__assign$8({component:Trend,id:this.getElementId("trend"),x:0,y:0,width:o,height:s},c))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:__assign$8({x:0,y:0,width:o,height:s},g)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:__assign$8({y:s/2,textAlign:"right",text:u,silent:!1},m)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:__assign$8({y:s/2,textAlign:"left",text:f,silent:!1},m)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:__assign$8({y:0,height:s},p)});var A=get(x,"width",DEFAULT_HANDLER_WIDTH),_=get(x,"height",24);this.minHandler=this.addComponent(e,{component:Handler,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(s-_)/2,width:A,height:_,cursor:"ew-resize",style:x}),this.maxHandler=this.addComponent(e,{component:Handler,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(s-_)/2,width:A,height:_,cursor:"ew-resize",style:x})},r.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},r.prototype.initEvent=function(){this.bindEvents()},r.prototype.updateUI=function(e,a,o){var s=this.cfg,l=s.start,c=s.end,u=s.width,f=s.minText,d=s.maxText,g=s.handlerStyle,v=s.height,p=l*u,y=c*u;this.trend&&(this.trend.update({width:u,height:v}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",p),e.attr("width",y-p);var m=get(g,"width",DEFAULT_HANDLER_WIDTH);a.attr("text",f),o.attr("text",d);var x=this._dodgeText([p,y],a,o),A=x[0],_=x[1];this.minHandler&&(this.minHandler.update({x:p-m/2}),this.get("updateAutoRender")||this.minHandler.render()),each$1(A,function(b,S){return a.attr(S,b)}),this.maxHandler&&(this.maxHandler.update({x:y-m/2}),this.get("updateAutoRender")||this.maxHandler.render()),each$1(_,function(b,S){return o.attr(S,b)})},r.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var a=e.findById(this.getElementId("foreground"));a.on("mousedown",this.onMouseDown("foreground")),a.on("touchstart",this.onMouseDown("foreground"))},r.prototype.adjustOffsetRange=function(e){var a=this.cfg,o=a.start,s=a.end;switch(this.currentTarget){case"minHandler":{var l=0-o,c=1-o;return Math.min(c,Math.max(l,e))}case"maxHandler":{var l=0-s,c=1-s;return Math.min(c,Math.max(l,e))}case"foreground":{var l=0-o,c=1-s;return Math.min(c,Math.max(l,e))}}},r.prototype.updateStartEnd=function(e){var a=this.cfg,o=a.start,s=a.end;switch(this.currentTarget){case"minHandler":o+=e;break;case"maxHandler":s+=e;break;case"foreground":o+=e,s+=e;break}this.set("start",o),this.set("end",s)},r.prototype._dodgeText=function(e,a,o){var s,l,c=this.cfg,u=c.handlerStyle,f=c.width,d=2,g=get(u,"width",DEFAULT_HANDLER_WIDTH),v=e[0],p=e[1],y=!1;v>p&&(s=[p,v],v=s[0],p=s[1],l=[o,a],a=l[0],o=l[1],y=!0);var m=a.getBBox(),x=o.getBBox(),A=m.width>v-d?{x:v+g/2+d,textAlign:"left"}:{x:v-g/2-d,textAlign:"right"},_=x.width>f-p-d?{x:p-g/2-d,textAlign:"right"}:{x:p+g/2+d,textAlign:"left"};return y?[_,A]:[A,_]},r.prototype.draw=function(){var e=this.get("container"),a=e&&e.get("canvas");a&&a.draw()},r.prototype.getContainerDOM=function(){var e=this.get("container"),a=e&&e.get("canvas");return a&&a.get("container")},r}(GroupComponent),DEFAULT_STYLE={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},DEFAULT_THEME={default:DEFAULT_STYLE,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Scrollbar$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.clearEvents=noop,e.onStartEvent=function(a){return function(o){e.isMobile=a,o.originalEvent.preventDefault();var s=a?get(o.originalEvent,"touches.0.clientX"):o.clientX,l=a?get(o.originalEvent,"touches.0.clientY"):o.clientY;e.startPos=e.cfg.isHorizontal?s:l,e.bindLaterEvent()}},e.bindLaterEvent=function(){var a=e.getContainerDOM(),o=[];e.isMobile?o=[addEventListener(a,"touchmove",e.onMouseMove),addEventListener(a,"touchend",e.onMouseUp),addEventListener(a,"touchcancel",e.onMouseUp)]:o=[addEventListener(a,"mousemove",e.onMouseMove),addEventListener(a,"mouseup",e.onMouseUp),addEventListener(a,"mouseleave",e.onMouseUp)],e.clearEvents=function(){o.forEach(function(s){s.remove()})}},e.onMouseMove=function(a){var o=e.cfg,s=o.isHorizontal,l=o.thumbOffset;a.preventDefault();var c=e.isMobile?get(a,"touches.0.clientX"):a.clientX,u=e.isMobile?get(a,"touches.0.clientY"):a.clientY,f=s?c:u,d=f-e.startPos;e.startPos=f,e.updateThumbOffset(l+d)},e.onMouseUp=function(a){a.preventDefault(),e.clearEvents()},e.onTrackClick=function(a){var o=e.cfg,s=o.isHorizontal,l=o.x,c=o.y,u=o.thumbLen,f=e.getContainerDOM(),d=f.getBoundingClientRect(),g=a.clientX,v=a.clientY,p=s?g-d.left-l-u/2:v-d.top-c-u/2,y=e.validateRange(p);e.updateThumbOffset(y)},e.onThumbMouseOver=function(){var a=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",a),e.draw()},e.onThumbMouseOut=function(){var a=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",a),e.draw()},e}return r.prototype.setRange=function(e,a){this.set("minLimit",e),this.set("maxLimit",a);var o=this.getValue(),s=clamp(o,e,a);o!==s&&!this.get("isInit")&&this.setValue(s)},r.prototype.getRange=function(){var e=this.get("minLimit")||0,a=this.get("maxLimit")||1;return{min:e,max:a}},r.prototype.setValue=function(e){var a=this.getRange(),o=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*clamp(e,a.min,a.max)}),this.delegateEmit("valuechange",{originalValue:o,value:this.getValue()})},r.prototype.getValue=function(){return clamp(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return __assign$8(__assign$8({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:DEFAULT_THEME})},r.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},r.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},r.prototype.initEvent=function(){this.bindEvents()},r.prototype.renderTrackShape=function(e){var a=this.cfg,o=a.trackLen,s=a.theme,l=s===void 0?{default:{}}:s,c=deepMix({},DEFAULT_THEME,l).default,u=c.lineCap,f=c.trackColor,d=c.size,g=get(this.cfg,"size",d),v=this.get("isHorizontal")?{x1:0+g/2,y1:g/2,x2:o-g/2,y2:g/2,lineWidth:g,stroke:f,lineCap:u}:{x1:g/2,y1:0+g/2,x2:g/2,y2:o-g/2,lineWidth:g,stroke:f,lineCap:u};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:v})},r.prototype.renderThumbShape=function(e){var a=this.cfg,o=a.thumbOffset,s=a.thumbLen,l=a.theme,c=deepMix({},DEFAULT_THEME,l).default,u=c.size,f=c.lineCap,d=c.thumbColor,g=get(this.cfg,"size",u),v=this.get("isHorizontal")?{x1:o+g/2,y1:g/2,x2:o+s-g/2,y2:g/2,lineWidth:g,stroke:d,lineCap:f,cursor:"default"}:{x1:g/2,y1:o+g/2,x2:g/2,y2:o+s-g/2,lineWidth:g,stroke:d,lineCap:f,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:v})},r.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp);var a=e.findById(this.getElementId("track"));a.on("click",this.onTrackClick);var o=e.findById(this.getElementId("thumb"));o.on("mouseover",this.onThumbMouseOver),o.on("mouseout",this.onThumbMouseOut)},r.prototype.getContainerDOM=function(){var e=this.get("container"),a=e&&e.get("canvas");return a&&a.get("container")},r.prototype.validateRange=function(e){var a=this.cfg,o=a.thumbLen,s=a.trackLen,l=e;return e+o>s?l=s-o:e+o<o&&(l=0),l},r.prototype.draw=function(){var e=this.get("container"),a=e&&e.get("canvas");a&&a.draw()},r.prototype.updateThumbOffset=function(e){var a=this.cfg,o=a.thumbOffset,s=a.isHorizontal,l=a.thumbLen,c=a.size,u=this.validateRange(e);if(u!==o){var f=this.getElementByLocalId("thumb");s?f.attr({x1:u+c/2,x2:u+l-c/2}):f.attr({y1:u+c/2,y2:u+l-c/2}),this.emitOffsetChange(u)}},r.prototype.emitOffsetChange=function(e){var a=this.cfg,o=a.thumbOffset,s=a.trackLen,l=a.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:clamp(e/(s-l),0,1)}),this.delegateEmit("valuechange",{originalValue:o,value:e})},r}(GroupComponent),LineAxis=Line$5,CircleAxis=Circle$4,LineGrid=Line$4,CircleGrid=Circle$3,CategoryLegend=Category,ContinuousLegend=ContinueLegend,HtmlTooltip=Tooltip$1;function getPointsBox(n){if(isEmpty(n))return null;var r=n[0].x,e=n[0].x,a=n[0].y,o=n[0].y;return each$1(n,function(s){r=r>s.x?s.x:r,e=e<s.x?s.x:e,a=a>s.y?s.y:a,o=o<s.y?s.y:o}),{minX:r,maxX:e,minY:a,maxY:o,centerX:(r+e)/2,centerY:(a+o)/2}}function uniqueValues(n){return Array.from(new Set(n)).length===1}function mid(n){return(min$2(n)+max$2(n))/2}function polarToCartesian(n,r,e,a){return{x:n+e*Math.cos(a),y:r+e*Math.sin(a)}}function getSectorPath(n,r,e,a,o,s){s===void 0&&(s=0);var l=polarToCartesian(n,r,e,a),c=polarToCartesian(n,r,e,o),u=polarToCartesian(n,r,s,a),f=polarToCartesian(n,r,s,o);if(o-a===Math.PI*2){var d=polarToCartesian(n,r,e,a+Math.PI),g=polarToCartesian(n,r,s,a+Math.PI),v=[["M",l.x,l.y],["A",e,e,0,1,1,d.x,d.y],["A",e,e,0,1,1,c.x,c.y],["M",u.x,u.y]];return s&&(v.push(["A",s,s,0,1,0,g.x,g.y]),v.push(["A",s,s,0,1,0,f.x,f.y])),v.push(["M",l.x,l.y]),v.push(["Z"]),v}var p=o-a<=Math.PI?0:1,y=[["M",l.x,l.y],["A",e,e,0,p,1,c.x,c.y],["L",f.x,f.y]];return s&&y.push(["A",s,s,0,p,0,u.x,u.y]),y.push(["L",l.x,l.y]),y.push(["Z"]),y}function getArcPath(n,r,e,a,o){var s=polarToCartesian(n,r,e,a),l=polarToCartesian(n,r,e,o);if(isNumberEqual$1(o-a,Math.PI*2)){var c=polarToCartesian(n,r,e,a+Math.PI);return[["M",s.x,s.y],["A",e,e,0,1,1,c.x,c.y],["A",e,e,0,1,1,s.x,s.y],["A",e,e,0,1,0,c.x,c.y],["A",e,e,0,1,0,s.x,s.y],["Z"]]}var u=o-a<=Math.PI?0:1;return[["M",s.x,s.y],["A",e,e,0,u,1,l.x,l.y]]}function getAngle$1(n,r){var e=n.points,a=getPointsBox(e),o,s,l=r.startAngle,c=r.endAngle,u=c-l;return r.isTransposed?(o=a.maxY*u,s=a.minY*u):(o=a.maxX*u,s=a.minX*u),o+=l,s+=l,{startAngle:s,endAngle:o}}function getPolygonCentroid(n,r){if(isNumber$2(n)&&isNumber$2(r))return[n,r];if(n=n,r=r,uniqueValues(n)||uniqueValues(r))return[mid(n),mid(r)];for(var e=-1,a=0,o=0,s,l=n.length-1,c,u=0;++e<n.length;)s=l,l=e,u+=c=n[s]*r[l]-n[l]*r[s],a+=(n[s]+n[l])*c,o+=(r[s]+r[l])*c;return u*=3,[a/u,o/u]}function getReplaceAttrs(n,r){var e=n.attr(),a=r.attr();return each$1(e,function(o,s){a[s]===void 0&&(a[s]=void 0)}),a}function isBetween$1(n,r,e){var a=Math.min(r,e),o=Math.max(r,e);return n>=a&&n<=o}function padEnd(n,r,e){if(isString$1(n))return n.padEnd(r,e);if(isArray$4(n)){var a=n.length;if(a<r)for(var o=r-a,s=0;s<o;s++)n.push(e)}return n}function omit(n,r){return typeof n=="object"&&r.forEach(function(e){delete n[e]}),n}function uniq$1(n,r,e){var a,o;r===void 0&&(r=[]),e===void 0&&(e=new Map);try{for(var s=__values(n),l=s.next();!l.done;l=s.next()){var c=l.value;e.has(c)||(r.push(c),e.set(c,!0))}}catch(u){a={error:u}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}return r}var BBox=function(){function n(r,e,a,o){r===void 0&&(r=0),e===void 0&&(e=0),a===void 0&&(a=0),o===void 0&&(o=0),this.x=r,this.y=e,this.height=o,this.width=a}return n.fromRange=function(r,e,a,o){return new n(r,e,a-r,o-e)},n.fromObject=function(r){return new n(r.minX,r.minY,r.width,r.height)},Object.defineProperty(n.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(r){return this.x===r.x&&this.y===r.y&&this.width===r.width&&this.height===r.height},n.prototype.contains=function(r){return r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.add=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var a=this.clone();return each$1(r,function(o){a.x=Math.min(o.x,a.x),a.y=Math.min(o.y,a.y),a.width=Math.max(o.maxX,a.maxX)-a.x,a.height=Math.max(o.maxY,a.maxY)-a.y}),a},n.prototype.merge=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var a=this.clone();return each$1(r,function(o){a.x=Math.max(o.x,a.x),a.y=Math.max(o.y,a.y),a.width=Math.min(o.maxX,a.maxX)-a.x,a.height=Math.min(o.maxY,a.maxY)-a.y}),a},n.prototype.cut=function(r,e){var a=r.width,o=r.height;switch(e){case DIRECTION.TOP:case DIRECTION.TOP_LEFT:case DIRECTION.TOP_RIGHT:return n.fromRange(this.minX,this.minY+o,this.maxX,this.maxY);case DIRECTION.RIGHT:case DIRECTION.RIGHT_TOP:case DIRECTION.RIGHT_BOTTOM:return n.fromRange(this.minX,this.minY,this.maxX-a,this.maxY);case DIRECTION.BOTTOM:case DIRECTION.BOTTOM_LEFT:case DIRECTION.BOTTOM_RIGHT:return n.fromRange(this.minX,this.minY,this.maxX,this.maxY-o);case DIRECTION.LEFT:case DIRECTION.LEFT_TOP:case DIRECTION.LEFT_BOTTOM:return n.fromRange(this.minX+a,this.minY,this.maxX,this.maxY);default:return this}},n.prototype.shrink=function(r){var e=__read(r,4),a=e[0],o=e[1],s=e[2],l=e[3];return new n(this.x+l,this.y+a,this.width-l-o,this.height-a-s)},n.prototype.expand=function(r){var e=__read(r,4),a=e[0],o=e[1],s=e[2],l=e[3];return new n(this.x-l,this.y-a,this.width+l+o,this.height+a+s)},n.prototype.exceed=function(r){return[Math.max(-this.minY+r.minY,0),Math.max(this.maxX-r.maxX,0),Math.max(this.maxY-r.maxY,0),Math.max(-this.minX+r.minX,0)]},n.prototype.collide=function(r){return this.minX<r.maxX&&this.maxX>r.minX&&this.minY<r.maxY&&this.maxY>r.minY},n.prototype.size=function(){return this.width*this.height},n.prototype.isPointIn=function(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY},n}();function toPoints(n){return[[n.minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}function getXDimensionLength(n){if(n.isPolar&&!n.isTransposed)return(n.endAngle-n.startAngle)*n.getRadius();var r=n.convert({x:0,y:0}),e=n.convert({x:1,y:0});return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function isFullCircle(n){if(n.isPolar){var r=n.startAngle,e=n.endAngle;return e-r===Math.PI*2}return!1}function getDistanceToCenter(n,r){var e=n.getCenter();return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function isPointInCoordinate(n,r){var e=!1;if(n)if(n.type==="theta"){var a=n.start,o=n.end;e=isBetween$1(r.x,a.x,o.x)&&isBetween$1(r.y,a.y,o.y)}else{var s=n.invert(r);e=isBetween$1(s.x,0,1)&&isBetween$1(s.y,0,1)}return e}function getAngleByPoint(n,r){var e=n.getCenter();return Math.atan2(r.y-e.y,r.x-e.x)}function getCoordinateClipCfg(n,r){r===void 0&&(r=0);var e=n.start,a=n.end,o=n.getWidth(),s=n.getHeight();if(n.isPolar){var l=n.startAngle,c=n.endAngle,u=n.getCenter(),f=n.getRadius();return{type:"path",startState:{path:getSectorPath(u.x,u.y,f+r,l,l)},endState:function(g){var v=(c-l)*g+l,p=getSectorPath(u.x,u.y,f+r,l,v);return{path:p}},attrs:{path:getSectorPath(u.x,u.y,f+r,l,c)}}}var d;return n.isTransposed?d={height:s+r*2}:d={width:o+r*2},{type:"rect",startState:{x:e.x-r,y:a.y-r,width:n.isTransposed?o+r*2:0,height:n.isTransposed?0:s+r*2},endState:d,attrs:{x:e.x-r,y:a.y-r,width:o+r*2,height:s+r*2}}}function getCoordinateBBox(n,r){r===void 0&&(r=0);var e=n.start,a=n.end,o=n.getWidth(),s=n.getHeight(),l=Math.min(e.x,a.x),c=Math.min(e.y,a.y);return BBox.fromRange(l-r,c-r,l+o+r,c+s+r)}var dateRegex=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function getDefaultType(n){var r="linear";return dateRegex.test(n)?r="timeCat":isString$1(n)&&(r="cat"),r}function inferScaleType(n,r,e,a){return r===void 0&&(r={}),r.type?r.type:n.type!=="identity"&&GROUP_ATTRS.includes(e)&&["interval"].includes(a)||n.isCategory?"cat":n.type}function createScaleByField(n,r,e){var a=r||[];if(isNumber$2(n)||isNil(firstValue(a,n))&&isEmpty(e)){var o=getClass("identity");return new o({field:n.toString(),values:[n]})}var s=valuesOfKey(a,n),l=get(e,"type",getDefaultType(s[0])),c=getClass(l);return new c(__assign$8({field:n,values:s},e))}function syncScale(n,r){if(n.type!=="identity"&&r.type!=="identity"){var e={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);n.change(e)}}function getName(n){return n.alias||n.field}function getDefaultCategoryScaleRange(n,r,e){var a=n.values,o=a.length,s;if(o===1)s=[.5,1];else{var l=1,c=0;isFullCircle(r)?r.isTransposed?(l=get(e,"widthRatio.multiplePie",1/1.3),c=1/o*l,s=[c/2,1-c/2]):s=[0,1-1/o]:(c=1/o/2,s=[c,1-c])}return s}function getMaxScale(n){var r=n.values.filter(function(e){return!isNil(e)&&!isNaN(e)});return Math.max.apply(Math,__spreadArray$2(__spreadArray$2([],__read(r),!1),[isNil(n.max)?-1/0:n.max],!1))}function getLineAxisRelativeRegion(n){var r,e;switch(n){case DIRECTION.TOP:r={x:0,y:1},e={x:1,y:1};break;case DIRECTION.RIGHT:r={x:1,y:0},e={x:1,y:1};break;case DIRECTION.BOTTOM:r={x:0,y:0},e={x:1,y:0};break;case DIRECTION.LEFT:r={x:0,y:0},e={x:0,y:1};break;default:r=e={x:0,y:0}}return{start:r,end:e}}function getCircleAxisRelativeRegion(n){var r,e;return n.isTransposed?(r={x:0,y:0},e={x:1,y:0}):(r={x:0,y:0},e={x:0,y:1}),{start:r,end:e}}function getAxisRegion(n,r){var e={start:{x:0,y:0},end:{x:0,y:0}};n.isRect?e=getLineAxisRelativeRegion(r):n.isPolar&&(e=getCircleAxisRelativeRegion(n));var a=e.start,o=e.end;return{start:n.convert(a),end:n.convert(o)}}function isVertical(n){var r=n.start,e=n.end;return r.x===e.x}function getAxisFactorByRegion(n,r){var e=n.start,a=n.end,o=isVertical(n);return o?(e.y-a.y)*(r.x-e.x)>0?1:-1:(a.x-e.x)*(e.y-r.y)>0?-1:1}function getAxisThemeCfg(n,r){var e=get(n,["components","axis"],{});return deepMix({},get(e,["common"],{}),deepMix({},get(e,[r],{})))}function getAxisTitleOptions(n,r,e){var a=get(n,["components","axis"],{});return deepMix({},get(a,["common","title"],{}),deepMix({},get(a,[r,"title"],{})),e)}function getCircleAxisCenterRadius(n){var r=n.x,e=n.y,a=n.circleCenter,o=e.start>e.end,s=n.isTransposed?n.convert({x:o?0:1,y:0}):n.convert({x:0,y:o?0:1}),l=[s.x-a.x,s.y-a.y],c=[1,0],u=s.y>a.y?angle$1(l,c):angle$1(l,c)*-1,f=u+(r.end-r.start),d=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return{center:a,radius:d,startAngle:u,endAngle:f}}function getAxisOption(n,r){return isBoolean(n)?n===!1?!1:{}:get(n,[r])}function getAxisDirection(n,r){return get(n,"position",r)}function getAxisTitleText(n,r){return get(r,["title","text"],getName(n))}var Facet=function(){function n(r,e){this.destroyed=!1,this.facets=[],this.view=r,this.cfg=deepMix({},this.getDefaultCfg(),e)}return n.prototype.init=function(){this.container||(this.container=this.createContainer());var r=this.view.getData();this.facets=this.generateFacets(r)},n.prototype.render=function(){this.renderViews()},n.prototype.update=function(){},n.prototype.clear=function(){this.clearFacetViews()},n.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},n.prototype.facetToView=function(r){var e=r.region,a=r.data,o=r.padding,s=o===void 0?this.cfg.padding:o,l=this.view.createView({region:e,padding:s});l.data(a||[]),r.view=l,this.beforeEachView(l,r);var c=this.cfg.eachView;return c&&c(l,r),this.afterEachView(l,r),l},n.prototype.createContainer=function(){var r=this.view.getLayer(LAYER.FORE);return r.addGroup()},n.prototype.renderViews=function(){this.createFacetViews()},n.prototype.createFacetViews=function(){var r=this;return this.facets.map(function(e){return r.facetToView(e)})},n.prototype.clearFacetViews=function(){var r=this;each$1(this.facets,function(e){e.view&&(r.view.removeView(e.view),e.view=void 0)})},n.prototype.parseSpacing=function(){var r=this.view.viewBBox,e=r.width,a=r.height,o=this.cfg.spacing;return o.map(function(s,l){return isNumber$2(s)?s/(l===0?e:a):parseFloat(s)/100})},n.prototype.getFieldValues=function(r,e){var a=[],o={};return each$1(r,function(s){var l=s[e];!isNil(l)&&!o[l]&&(a.push(l),o[l]=!0)}),a},n.prototype.getRegion=function(r,e,a,o){var s=__read(this.parseSpacing(),2),l=s[0],c=s[1],u=(1+l)/(e===0?1:e)-l,f=(1+c)/(r===0?1:r)-c,d={x:(u+l)*a,y:(f+c)*o},g={x:d.x+u,y:d.y+f};return{start:d,end:g}},n.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},n.prototype.getDefaultTitleCfg=function(){var r=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:r}}},n.prototype.processAxis=function(r,e){var a=r.getOptions(),o=a.coordinate,s=r.geometries,l=get(o,"type","rect");if(l==="rect"&&s.length){isNil(a.axes)&&(a.axes={});var c=a.axes,u=__read(s[0].getXYFields(),2),f=u[0],d=u[1],g=getAxisOption(c,f),v=getAxisOption(c,d);g!==!1&&(a.axes[f]=this.getXAxisOption(f,c,g,e)),v!==!1&&(a.axes[d]=this.getYAxisOption(d,c,v,e))}},n.prototype.getFacetDataFilter=function(r){return function(e){return every(r,function(a){var o=a.field,s=a.value;return!isNil(s)&&o?e[o]===s:!0})}},n}(),Facets={},getFacet=function(n){return Facets[lowerCase(n)]},registerFacet=function(n,r){Facets[lowerCase(n)]=r},Action=function(){function n(r,e){this.context=r,this.cfg=e,r.addAction(this)}return n.prototype.applyCfg=function(r){mix(this,r)},n.prototype.init=function(){this.applyCfg(this.cfg)},n.prototype.destroy=function(){this.context.removeAction(this),this.context=null},n}(),CallbackAction=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.execute=function(){this.callback&&this.callback(this.context)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.callback=null},r}(Action),ActionCache={};function createAction(n,r){var e=ActionCache[n],a=null;if(e){var o=e.ActionClass,s=e.cfg;a=new o(r,s),a.name=n,a.init()}return a}function getActionClass(n){var r=ActionCache[n];return get(r,"ActionClass")}function registerAction(n,r,e){ActionCache[n]={ActionClass:r,cfg:e}}function createCallbackAction(n,r){var e=new CallbackAction(r);return e.callback=n,e.name="callback",e}function _points2path(n,r){var e=[];if(n.length){e.push(["M",n[0].x,n[0].y]);for(var a=1,o=n.length;a<o;a+=1){var s=n[a];e.push(["L",s.x,s.y])}r&&e.push(["Z"])}return e}function _convertArr(n,r){for(var e=[n[0]],a=1,o=n.length;a<o;a=a+2){var s=r.convert({x:n[a],y:n[a+1]});e.push(s.x,s.y)}return e}function _convertArcPath(n,r){var e=r.isTransposed,a=n[1],o=n[6],s=n[7],l=r.convert({x:o,y:s}),c=e?0:1;return["A",a,a,0,0,c,l.x,l.y]}function _convertPolarPath(n,r,e){var a=e.isTransposed,o=e.startAngle,s=e.endAngle,l=n[0].toLowerCase()==="a"?{x:n[6],y:n[7]}:{x:n[1],y:n[2]},c={x:r[1],y:r[2]},u=[],f=a?"y":"x",d=Math.abs(c[f]-l[f])*(s-o),g=c[f]>=l[f]?1:0,v=d>Math.PI?1:0,p=e.convert(c),y=getDistanceToCenter(e,p);if(y>=.5)if(d===Math.PI*2){var m={x:(c.x+l.x)/2,y:(c.y+l.y)/2},x=e.convert(m);u.push(["A",y,y,0,v,g,x.x,x.y]),u.push(["A",y,y,0,v,g,p.x,p.y])}else u.push(["A",y,y,0,v,g,p.x,p.y]);return u}function _filterFullCirleLine(n){each$1(n,function(r,e){var a=r;if(a[0].toLowerCase()==="a"){var o=n[e-1],s=n[e+1];s&&s[0].toLowerCase()==="a"?o&&o[0].toLowerCase()==="l"&&(o[0]="M"):o&&o[0].toLowerCase()==="a"&&s&&s[0].toLowerCase()==="l"&&(s[0]="M")}})}var smoothBezier$1=function(n,r,e,a){var o,s=[],l=!!a,c,u,f,d,g,v,p;if(l){o=__read(a,2),f=o[0],d=o[1];for(var y=0,m=n.length;y<m;y++){var x=n[y];f=min$1([0,0],f,x),d=max$1([0,0],d,x)}}for(var y=0,A=n.length;y<A;y++){var x=n[y];if(y===0&&!e)p=x;else if(y===A-1&&!e)v=x,s.push(p),s.push(v);else{c=n[e?y?y-1:A-1:y-1],u=n[e?(y+1)%A:y+1];var _=[0,0];_=sub(_,u,c),_=scale$3(_,_,r);var b=distance$6(x,c),S=distance$6(x,u),C=b+S;C!==0&&(b/=C,S/=C);var E=scale$3([0,0],_,-b),T=scale$3([0,0],_,S);v=add$1([0,0],x,E),g=add$1([0,0],x,T),g=min$1([0,0],g,max$1([0,0],u,x)),g=max$1([0,0],g,min$1([0,0],u,x)),E=sub([0,0],g,x),E=scale$3([0,0],E,-b/S),v=add$1([0,0],x,E),v=min$1([0,0],v,max$1([0,0],c,x)),v=max$1([0,0],v,min$1([0,0],c,x)),T=sub([0,0],x,v),T=scale$3([0,0],T,S/b),g=add$1([0,0],x,T),l&&(v=max$1([0,0],v,f),v=min$1([0,0],v,d),g=max$1([0,0],g,f),g=min$1([0,0],g,d)),s.push(p),s.push(v),p=g}}return e&&s.push(s.shift()),s};function catmullRom2bezier$1(n,r,e){for(var a=!!r,o=[],s=0,l=n.length;s<l;s+=2)o.push([n[s],n[s+1]]);for(var c=smoothBezier$1(o,.4,a,e),u=o.length,f=[],d,g,v,s=0;s<u-1;s++)d=c[s*2],g=c[s*2+1],v=o[s+1],f.push(["C",d[0],d[1],g[0],g[1],v[0],v[1]]);return a&&(d=c[u],g=c[u+1],v=o[0],f.push(["C",d[0],d[1],g[0],g[1],v[0],v[1]])),f}function getLinePath(n,r){return _points2path(n,r)}function getSplinePath$1(n,r,e){var a=[],o=n[0],s=null;if(n.length<=2)return getLinePath(n,r);for(var l=0,c=n.length;l<c;l++){var u=n[l];(!s||!(s.x===u.x&&s.y===u.y))&&(a.push(u.x),a.push(u.y),s=u)}var f=e||[[0,0],[1,1]],d=catmullRom2bezier$1(a,r,f);return d.unshift(["M",o.x,o.y]),d}function convertNormalPath(n,r){var e=[];return each$1(r,function(a){var o=a[0];switch(o.toLowerCase()){case"m":case"l":case"c":e.push(_convertArr(a,n));break;case"a":e.push(_convertArcPath(a,n));break;case"z":default:e.push(a);break}}),e}function convertPolarPath(n,r){var e=[],a,o,s,l;return each$1(r,function(c,u){var f=c[0];switch(f.toLowerCase()){case"m":case"c":case"q":e.push(_convertArr(c,n));break;case"l":a=r[u-1],o=c,s=n.isTransposed,l=s?a[a.length-2]===o[1]:a[a.length-1]===o[2],l?e=e.concat(_convertPolarPath(a,o,n)):e.push(_convertArr(c,n));break;case"a":e.push(_convertArcPath(c,n));break;case"z":default:e.push(c);break}}),_filterFullCirleLine(e),e}function getMaskBBox(n,r){var e=n.event,a=e.target;return getMaskBBoxByShape(a,r)}function isValidMaskBBox(n,r){var e=n.getCanvasBBox(),a=e.width,o=e.height;return a>0&&o>0&&(a>=r||o>=r)}function getMaskBBoxByShape(n,r){var e=n.getCanvasBBox();return isValidMaskBBox(n,r)?e:null}function getMultiMaskBBoxList(n,r){var e=n.event.maskShapes;return e.map(function(a){return getMaskBBoxByShape(a,r)}).filter(function(a){return!!a})}function getMaskPath$2(n,r){var e=n.event,a=e.target;return getMaskPathByMaskShape(a,r)}function getMaskPathByMaskShape(n,r){return isValidMaskBBox(n,r)?n.attr("path"):null}function getMultiMaskPathList(n,r){var e=n.event.maskShapes;return e.map(function(a){return getMaskPathByMaskShape(a,r)})}function getCurrentElement$1(n){var r=n.event,e,a=r.target;return a&&(e=a.get("element")),e}function getDelegationObject(n){var r=n.event,e=r.target,a;return e&&(a=e.get("delegateObject")),a}function isElementChange(n){var r=n.event.gEvent;return!(r&&r.fromShape&&r.toShape&&r.fromShape.get("element")===r.toShape.get("element"))}function isList(n){return n&&n.component&&n.component.isList()}function isSlider(n){return n&&n.component&&n.component.isSlider()}function isMask(n){var r=n.event,e=r.target;return e&&(e==null?void 0:e.get("name"))==="mask"||isMultipleMask(n)}function isMultipleMask(n){var r;return((r=n.event.target)===null||r===void 0?void 0:r.get("name"))==="multi-mask"}function getMaskedElements(n,r){var e=n.event.target;if(isMultipleMask(n))return getMultiMaskedElements(n,r);if(e.get("type")==="path"){var a=getMaskPath$2(n,r);return a?getElementsByPath(n.view,a):void 0}var o=getMaskBBox(n,r);return o?getIntersectElements(n.view,o):null}function getMultiMaskedElements(n,r){var e=n.event.target;if(e.get("type")==="path"){var a=getMultiMaskPathList(n,r);return a.length>0?a.flatMap(function(s){return getElementsByPath(n.view,s)}):null}var o=getMultiMaskBBoxList(n,r);return o.length>0?o.flatMap(function(s){return getIntersectElements(n.view,s)}):null}function getSiblingMaskElements(n,r,e){if(isMultipleMask(n))return getSiblingMultiMaskedElements(n,r,e);var a=getMaskBBox(n,e);return a?getSiblingMaskElementsByBBox(a,n,r):null}function getSiblingMaskElementsByBBox(n,r,e){var a=r.view,o=getSiblingPoint(a,e,{x:n.x,y:n.y}),s=getSiblingPoint(a,e,{x:n.maxX,y:n.maxY}),l={minX:o.x,minY:o.y,maxX:s.x,maxY:s.y};return getIntersectElements(e,l)}function getSiblingMultiMaskedElements(n,r,e){var a=getMultiMaskBBoxList(n,e);return a.length>0?a.flatMap(function(o){return getSiblingMaskElementsByBBox(o,n,r)}):null}function getElements(n){var r=n.geometries,e=[];return each$1(r,function(a){var o=a.elements;e=e.concat(o)}),n.views&&n.views.length&&each$1(n.views,function(a){e=e.concat(getElements(a))}),e}function getElementsByField(n,r,e){var a=getElements(n);return a.filter(function(o){return getElementValue$1(o,r)===e})}function getElementsByState(n,r){var e=n.geometries,a=[];return each$1(e,function(o){var s=o.getElementsBy(function(l){return l.hasState(r)});a=a.concat(s)}),a}function getElementValue$1(n,r){var e=n.getModel(),a=e.data,o;return isArray$4(a)?o=a[0][r]:o=a[r],o}function intersectRect$1(n,r){return!(r.minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)}function getIntersectElements(n,r){var e=getElements(n),a=[];return each$1(e,function(o){var s=o.shape,l=s.getCanvasBBox();intersectRect$1(r,l)&&a.push(o)}),a}function pathToPoints(n){var r=[];return each$1(n,function(e){var a=e[0];if(a!=="A")for(var o=1;o<e.length;o=o+2)r.push([e[o],e[o+1]]);else{var s=e.length;r.push([e[s-2],e[s-1]])}}),r}function getElementsByPath(n,r){var e=getElements(n),a=pathToPoints(r),o=e.filter(function(s){var l=s.shape,c;if(l.get("type")==="path")c=pathToPoints(l.attr("path"));else{var u=l.getCanvasBBox();c=toPoints(u)}return isPolygonsIntersect(a,c)});return o}function getComponents(n){return n.getComponents().map(function(r){return r.component})}function distance$2(n,r){var e=r.x-n.x,a=r.y-n.y;return Math.sqrt(e*e+a*a)}function getSpline(n,r){if(n.length<=2)return getLinePath(n,!1);var e=n[0],a=[];each$1(n,function(s){a.push(s.x),a.push(s.y)});var o=catmullRom2bezier$1(a,r,null);return o.unshift(["M",e.x,e.y]),o}function isInBox(n,r){return n.x<=r.x&&n.maxX>=r.x&&n.y<=r.y&&n.maxY>r.y}function getSilbings(n){var r=n.parent,e=null;return r&&(e=r.views.filter(function(a){return a!==n})),e}function point2Normalize(n,r){var e=n.getCoordinate();return e.invert(r)}function getSiblingPoint(n,r,e){var a=point2Normalize(n,e);return r.getCoordinate().convert(a)}function isInRecords(n,r,e,a){var o=!1;return each$1(n,function(s){if(s[e]===r[e]&&s[a]===r[a])return o=!0,!1}),o}function getScaleByField(n,r){var e=n.getScaleByField(r);return!e&&n.views&&each$1(n.views,function(a){if(e=getScaleByField(a,r),e)return!1}),e}var Context=function(){function n(r){this.actions=[],this.event=null,this.cacheMap={},this.view=r}return n.prototype.cache=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length===1)return this.cacheMap[r[0]];r.length===2&&(this.cacheMap[r[0]]=r[1])},n.prototype.getAction=function(r){return this.actions.find(function(e){return e.name===r})},n.prototype.addAction=function(r){this.actions.push(r)},n.prototype.removeAction=function(r){var e=this.actions,a=this.actions.indexOf(r);a>=0&&e.splice(a,1)},n.prototype.getCurrentPoint=function(){var r=this.event;if(r)if(r.target instanceof HTMLElement){var e=this.view.getCanvas(),a=e.getPointByClient(r.clientX,r.clientY);return a}else return{x:r.x,y:r.y};return null},n.prototype.getCurrentShape=function(){return get(this.event,["gEvent","shape"])},n.prototype.isInPlot=function(){var r=this.getCurrentPoint();return r?this.view.isPointInPlot(r):!1},n.prototype.isInShape=function(r){var e=this.getCurrentShape();return e?e.get("name")===r:!1},n.prototype.isInComponent=function(r){var e=getComponents(this.view),a=this.getCurrentPoint();return a?!!e.find(function(o){var s=o.getBBox();return r?o.get("name")===r&&isInBox(s,a):isInBox(s,a)}):!1},n.prototype.destroy=function(){each$1(this.actions.slice(),function(r){r.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},n}(),Interaction=function(){function n(r,e){this.view=r,this.cfg=e}return n.prototype.init=function(){this.initEvents()},n.prototype.initEvents=function(){},n.prototype.clearEvents=function(){},n.prototype.destroy=function(){this.clearEvents()},n}();function parseAction(n,r,e){var a=n.split(":"),o=a[0],s=r.getAction(o)||createAction(o,r);if(!s)throw new Error("There is no action named ".concat(o));var l=a[1];return{action:s,methodName:l,arg:e}}function executeAction(n){var r=n.action,e=n.methodName,a=n.arg;if(r[e])r[e](a);else throw new Error("Action(".concat(r.name,") doesn't have a method called ").concat(e))}var STEP_NAMES={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},GrammarInteraction=function(n){__extends$7(r,n);function r(e,a){var o=n.call(this,e,a)||this;return o.callbackCaches={},o.emitCaches={},o.steps=a,o}return r.prototype.init=function(){this.initContext(),n.prototype.init.call(this)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},r.prototype.initEvents=function(){var e=this;each$1(this.steps,function(a,o){each$1(a,function(s){var l=e.getActionCallback(o,s);l&&e.bindEvent(s.trigger,l)})})},r.prototype.clearEvents=function(){var e=this;each$1(this.steps,function(a,o){each$1(a,function(s){var l=e.getActionCallback(o,s);l&&e.offEvent(s.trigger,l)})})},r.prototype.initContext=function(){var e=this.view,a=new Context(e);this.context=a;var o=this.steps;each$1(o,function(s){each$1(s,function(l){if(isFunction$1(l.action))l.actionObject={action:createCallbackAction(l.action,a),methodName:"execute"};else if(isString$1(l.action))l.actionObject=parseAction(l.action,a,l.arg);else if(isArray$4(l.action)){var c=l.action,u=isArray$4(l.arg)?l.arg:[l.arg];l.actionObject=[],each$1(c,function(f,d){l.actionObject.push(parseAction(f,a,u[d]))})}})})},r.prototype.isAllowStep=function(e){var a=this.currentStepName,o=this.steps;if(a===e||e===STEP_NAMES.SHOW_ENABLE)return!0;if(e===STEP_NAMES.PROCESSING)return a===STEP_NAMES.START;if(e===STEP_NAMES.START)return a!==STEP_NAMES.PROCESSING;if(e===STEP_NAMES.END)return a===STEP_NAMES.PROCESSING||a===STEP_NAMES.START;if(e===STEP_NAMES.ROLLBACK){if(o[STEP_NAMES.END])return a===STEP_NAMES.END;if(a===STEP_NAMES.START)return!0}return!1},r.prototype.isAllowExecute=function(e,a){if(this.isAllowStep(e)){var o=this.getKey(e,a);return a.once&&this.emitCaches[o]?!1:a.isEnable?a.isEnable(this.context):!0}return!1},r.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},r.prototype.afterExecute=function(e,a){e!==STEP_NAMES.SHOW_ENABLE&&this.currentStepName!==e&&this.enterStep(e);var o=this.getKey(e,a);this.emitCaches[o]=!0},r.prototype.getKey=function(e,a){return e+a.trigger+a.action},r.prototype.getActionCallback=function(e,a){var o=this,s=this.context,l=this.callbackCaches,c=a.actionObject;if(a.action&&c){var u=this.getKey(e,a);if(!l[u]){var f=function(d){s.event=d,o.isAllowExecute(e,a)?(isArray$4(c)?each$1(c,function(g){s.event=d,executeAction(g)}):(s.event=d,executeAction(c)),o.afterExecute(e,a),a.callback&&(s.event=d,a.callback(s))):s.event=null};a.debounce?l[u]=debounce$1(f,a.debounce.wait,a.debounce.immediate):a.throttle?l[u]=throttle$1(f,a.throttle.wait,{leading:a.throttle.leading,trailing:a.throttle.trailing}):l[u]=f}return l[u]}return null},r.prototype.bindEvent=function(e,a){var o=e.split(":");o[0]==="window"?window.addEventListener(o[1],a):o[0]==="document"?document.addEventListener(o[1],a):this.view.on(e,a)},r.prototype.offEvent=function(e,a){var o=e.split(":");o[0]==="window"?window.removeEventListener(o[1],a):o[0]==="document"?document.removeEventListener(o[1],a):this.view.off(e,a)},r}(Interaction),Interactions={};function getInteraction(n){return Interactions[lowerCase(n)]}function registerInteraction(n,r){Interactions[lowerCase(n)]=r}function createInteraction(n,r,e){var a=getInteraction(n);if(!a)return null;if(isPlainObject$1(a)){var o=mix(clone(a),e);return new GrammarInteraction(r,o)}else{var s=a;return new s(r,e)}}function createAxisStyles(n){return{title:{autoRotate:!0,position:"center",spacing:n.axisTitleSpacing,style:{fill:n.axisTitleTextFillColor,fontSize:n.axisTitleTextFontSize,lineHeight:n.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:n.fontFamily},iconStyle:{fill:n.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:n.axisLabelOffset,style:{fill:n.axisLabelFillColor,fontSize:n.axisLabelFontSize,lineHeight:n.axisLabelLineHeight,fontFamily:n.fontFamily}},line:{style:{lineWidth:n.axisLineBorder,stroke:n.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:n.axisGridBorderColor,lineWidth:n.axisGridBorder,lineDash:n.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:n.axisTickLineBorder,stroke:n.axisTickLineBorderColor},alignTick:!0,length:n.axisTickLineLength},subTickLine:null,animate:!0}}function createLegendStyles(n){return{title:null,marker:{symbol:"circle",spacing:n.legendMarkerSpacing,style:{r:n.legendCircleMarkerSize,fill:n.legendMarkerColor}},itemName:{spacing:5,style:{fill:n.legendItemNameFillColor,fontFamily:n.fontFamily,fontSize:n.legendItemNameFontSize,lineHeight:n.legendItemNameLineHeight,fontWeight:n.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:n.legendPageNavigatorMarkerSize,inactiveFill:n.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:n.legendPageNavigatorMarkerInactiveFillOpacity,fill:n.legendPageNavigatorMarkerFillColor,opacity:n.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:n.legendPageNavigatorTextFillColor,fontSize:n.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:n.legendItemSpacing,itemMarginBottom:n.legendItemMarginBottom,padding:n.legendPadding}}function createThemeByStyleSheet(n){var r,e={point:{default:{fill:n.pointFillColor,r:n.pointSize,stroke:n.pointBorderColor,lineWidth:n.pointBorder,fillOpacity:n.pointFillOpacity},active:{stroke:n.pointActiveBorderColor,lineWidth:n.pointActiveBorder},selected:{stroke:n.pointSelectedBorderColor,lineWidth:n.pointSelectedBorder},inactive:{fillOpacity:n.pointInactiveFillOpacity,strokeOpacity:n.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:n.hollowPointFillColor,lineWidth:n.hollowPointBorder,stroke:n.hollowPointBorderColor,strokeOpacity:n.hollowPointBorderOpacity,r:n.hollowPointSize},active:{stroke:n.hollowPointActiveBorderColor,strokeOpacity:n.hollowPointActiveBorderOpacity},selected:{lineWidth:n.hollowPointSelectedBorder,stroke:n.hollowPointSelectedBorderColor,strokeOpacity:n.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:n.hollowPointInactiveBorderOpacity}},area:{default:{fill:n.areaFillColor,fillOpacity:n.areaFillOpacity,stroke:null},active:{fillOpacity:n.areaActiveFillOpacity},selected:{fillOpacity:n.areaSelectedFillOpacity},inactive:{fillOpacity:n.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:n.hollowAreaBorderColor,lineWidth:n.hollowAreaBorder,strokeOpacity:n.hollowAreaBorderOpacity},active:{fill:null,lineWidth:n.hollowAreaActiveBorder},selected:{fill:null,lineWidth:n.hollowAreaSelectedBorder},inactive:{strokeOpacity:n.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:n.intervalFillColor,fillOpacity:n.intervalFillOpacity},active:{stroke:n.intervalActiveBorderColor,lineWidth:n.intervalActiveBorder},selected:{stroke:n.intervalSelectedBorderColor,lineWidth:n.intervalSelectedBorder},inactive:{fillOpacity:n.intervalInactiveFillOpacity,strokeOpacity:n.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:n.hollowIntervalFillColor,stroke:n.hollowIntervalBorderColor,lineWidth:n.hollowIntervalBorder,strokeOpacity:n.hollowIntervalBorderOpacity},active:{stroke:n.hollowIntervalActiveBorderColor,lineWidth:n.hollowIntervalActiveBorder,strokeOpacity:n.hollowIntervalActiveBorderOpacity},selected:{stroke:n.hollowIntervalSelectedBorderColor,lineWidth:n.hollowIntervalSelectedBorder,strokeOpacity:n.hollowIntervalSelectedBorderOpacity},inactive:{stroke:n.hollowIntervalInactiveBorderColor,lineWidth:n.hollowIntervalInactiveBorder,strokeOpacity:n.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:n.lineBorderColor,lineWidth:n.lineBorder,strokeOpacity:n.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:n.lineActiveBorder},selected:{lineWidth:n.lineSelectedBorder},inactive:{strokeOpacity:n.lineInactiveBorderOpacity}}},a=createAxisStyles(n),o=createLegendStyles(n);return{background:n.backgroundColor,defaultColor:n.brandColor,subColor:n.subColor,semanticRed:n.paletteSemanticRed,semanticGreen:n.paletteSemanticGreen,padding:"auto",fontFamily:n.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:n.paletteQualitative10,colors20:n.paletteQualitative20,sequenceColors:n.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:function(s){var l=s.geometry.coordinate;if(l.isPolar&&l.isTransposed){var c=getAngle$1(s.getModel(),l),u=c.startAngle,f=c.endAngle,d=(u+f)/2,g=7.5,v=g*Math.cos(d),p=g*Math.sin(d);return{matrix:transform$6(null,[["t",v,p]])}}return e.interval.selected}}},"hollow-rect":{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},line:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},tick:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},funnel:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}},pyramid:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},line:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},dot:{default:{style:__assign$8(__assign$8({},e.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:__assign$8(__assign$8({},e.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:__assign$8(__assign$8({},e.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:__assign$8(__assign$8({},e.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:__assign$8(__assign$8({},e.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:__assign$8(__assign$8({},e.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:__assign$8(__assign$8({},e.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:__assign$8(__assign$8({},e.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hvh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},polygon:{polygon:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},point:{circle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},square:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},bowtie:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},diamond:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},hexagon:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},triangle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"triangle-down":{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"hollow-circle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-square":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-bowtie":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-diamond":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-hexagon":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle-down":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},cross:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},tick:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},plus:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},hyphen:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},line:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}}},area:{area:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},smooth:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},line:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"smooth-line":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}},schema:{candle:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},box:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}}},edge:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},arc:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},violin:{violin:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hollow:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"hollow-smooth":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}}},components:{axis:{common:a,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:deepMix({},a.grid,{line:{type:"line"}})},radius:{title:null,grid:deepMix({},a.grid,{line:{type:"circle"}})}},legend:{common:o,right:{layout:"vertical",padding:n.legendVerticalPadding},left:{layout:"vertical",padding:n.legendVerticalPadding},top:{layout:"horizontal",padding:n.legendHorizontalPadding},bottom:{layout:"horizontal",padding:n.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:n.sliderRailHeight,defaultLength:n.sliderRailWidth,style:{fill:n.sliderRailFillColor,stroke:n.sliderRailBorderColor,lineWidth:n.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:n.sliderLabelTextFillColor,fontSize:n.sliderLabelTextFontSize,lineHeight:n.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:n.fontFamily}},handler:{size:n.sliderHandlerWidth,style:{fill:n.sliderHandlerFillColor,stroke:n.sliderHandlerBorderColor}},slidable:!0,padding:o.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:n.tooltipCrosshairsBorderColor,lineWidth:n.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(r={},r["".concat(CONTAINER_CLASS)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:n.tooltipContainerFillColor,opacity:n.tooltipContainerFillOpacity,boxShadow:n.tooltipContainerShadow,borderRadius:"".concat(n.tooltipContainerBorderRadius,"px"),color:n.tooltipTextFillColor,fontSize:"".concat(n.tooltipTextFontSize,"px"),fontFamily:n.fontFamily,lineHeight:"".concat(n.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},r["".concat(TITLE_CLASS)]={marginBottom:"12px",marginTop:"12px"},r["".concat(LIST_CLASS)]={margin:0,listStyleType:"none",padding:0},r["".concat(LIST_ITEM_CLASS)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},r["".concat(MARKER_CLASS)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},r["".concat(VALUE_CLASS)]={display:"inline-block",float:"right",marginLeft:"30px"},r)},annotation:{arc:{style:{stroke:n.annotationArcBorderColor,lineWidth:n.annotationArcBorder},animate:!0},line:{style:{stroke:n.annotationLineBorderColor,lineDash:n.annotationLineDash,lineWidth:n.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,textAlign:"start",fontFamily:n.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:n.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:n.annotationRegionBorder,stroke:n.annotationRegionBorderColor,fill:n.annotationRegionFillColor,fillOpacity:n.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:n.brandColor,lineWidth:2}},line:{style:{stroke:n.annotationLineBorderColor,lineWidth:n.annotationLineBorder},length:n.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,fontFamily:n.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:n.annotationRegionFillColor,fillOpacity:n.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,fontFamily:n.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:n.cSliderBackgroundFillColor,opacity:n.cSliderBackgroundFillOpacity},foregroundStyle:{fill:n.cSliderForegroundFillColor,opacity:n.cSliderForegroundFillOpacity},handlerStyle:{width:n.cSliderHandlerWidth,height:n.cSliderHandlerHeight,fill:n.cSliderHandlerFillColor,opacity:n.cSliderHandlerFillOpacity,stroke:n.cSliderHandlerBorderColor,lineWidth:n.cSliderHandlerBorder,radius:n.cSliderHandlerBorderRadius,highLightFill:n.cSliderHandlerHighlightFillColor},textStyle:{fill:n.cSliderTextFillColor,opacity:n.cSliderTextFillOpacity,fontSize:n.cSliderTextFontSize,lineHeight:n.cSliderTextLineHeight,fontWeight:n.cSliderTextFontWeight,stroke:n.cSliderTextBorderColor,lineWidth:n.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:n.scrollbarTrackFillColor,thumbColor:n.scrollbarThumbFillColor}},hover:{style:{thumbColor:n.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:n.labelFillColor,fontSize:n.labelFontSize,fontFamily:n.fontFamily,stroke:n.labelBorderColor,lineWidth:n.labelBorder},fillColorDark:n.labelFillColorDark,fillColorLight:n.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:n.innerLabelFillColor,fontSize:n.innerLabelFontSize,fontFamily:n.fontFamily,stroke:n.innerLabelBorderColor,lineWidth:n.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:n.overflowLabelFillColor,fontSize:n.overflowLabelFontSize,fontFamily:n.fontFamily,stroke:n.overflowLabelBorderColor,lineWidth:n.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:n.labelLineBorder}},autoRotate:!0}}}var BLACK_COLORS$1={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},WHITE_COLORS$1={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},QUALITATIVE_10$1=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],QUALITATIVE_20$1=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],SINGLE_SEQUENCE$1=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],createLightStyleSheet=function(n){n===void 0&&(n={});var r=n.paletteQualitative10,e=r===void 0?QUALITATIVE_10$1:r,a=n.paletteQualitative20,o=a===void 0?QUALITATIVE_20$1:a,s=n.brandColor,l=s===void 0?e[0]:s,c={backgroundColor:"transparent",brandColor:l,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:e,paletteQualitative20:o,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:SINGLE_SEQUENCE$1,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:BLACK_COLORS$1[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:BLACK_COLORS$1[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:WHITE_COLORS$1[85],axisTickLineBorderColor:BLACK_COLORS$1[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:BLACK_COLORS$1[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:BLACK_COLORS$1[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:BLACK_COLORS$1[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:BLACK_COLORS$1[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:l,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:BLACK_COLORS$1[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:BLACK_COLORS$1[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:BLACK_COLORS$1[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:BLACK_COLORS$1[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:BLACK_COLORS$1[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:BLACK_COLORS$1[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:BLACK_COLORS$1[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:BLACK_COLORS$1[25],annotationArcBorderColor:BLACK_COLORS$1[15],annotationArcBorder:1,annotationLineBorderColor:BLACK_COLORS$1[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:BLACK_COLORS$1[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:BLACK_COLORS$1[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:BLACK_COLORS$1[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:BLACK_COLORS$1[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:BLACK_COLORS$1[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:WHITE_COLORS$1[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:BLACK_COLORS$1[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:WHITE_COLORS$1[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:BLACK_COLORS$1[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:l,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:WHITE_COLORS$1[100],pointBorderOpacity:1,pointActiveBorderColor:BLACK_COLORS$1[100],pointSelectedBorder:2,pointSelectedBorderColor:BLACK_COLORS$1[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:l,hollowPointBorderOpacity:.95,hollowPointFillColor:WHITE_COLORS$1[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:BLACK_COLORS$1[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:BLACK_COLORS$1[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:l,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:l,areaFillOpacity:.25,areaActiveFillColor:l,areaActiveFillOpacity:.5,areaSelectedFillColor:l,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:l,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:BLACK_COLORS$1[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:BLACK_COLORS$1[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:l,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:BLACK_COLORS$1[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:BLACK_COLORS$1[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:l,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:WHITE_COLORS$1[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:BLACK_COLORS$1[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:BLACK_COLORS$1[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return __assign$8(__assign$8({},c),n)};createLightStyleSheet();function createTheme(n){var r=n.styleSheet,e=r===void 0?{}:r,a=__rest$1(n,["styleSheet"]),o=createLightStyleSheet(e);return deepMix({},createThemeByStyleSheet(o),a)}var defaultTheme=createTheme({}),Themes={default:defaultTheme};function getTheme(n){return get(Themes,lowerCase(n),Themes.default)}function registerTheme(n,r){Themes[lowerCase(n)]=createTheme(r)}function snapEqual(n,r,e){var a=e.translate(n),o=e.translate(r);return isNumberEqual$1(a,o)}function getXValueByPoint(n,r){var e=r.coordinate,a=r.getXScale(),o=a.range,s=o[o.length-1],l=o[0],c=e.invert(n),u=c.x;return e.isPolar&&u>(1+s)/2&&(u=l),a.translate(a.invert(u))}function filterYValue(n,r,e){var a=e.coordinate,o=e.getYScale(),s=o.field,l=a.invert(r),c=o.invert(l.y),u=find$2(n,function(f){var d=f[FIELD_ORIGIN];return d[s][0]<=c&&d[s][1]>=c});return u||n[n.length-1]}var getXDistance=memoize(function(n){if(n.isCategory)return 1;for(var r=n.values,e=r.length,a=n.translate(r[0]),o=a,s=0;s<e;s++){var l=r[s],c=n.translate(l);c<a&&(a=c),c>o&&(o=c)}return(o-a)/(e-1)});function getTooltipTitle(n,r,e){var a=r.getAttribute("position"),o=a.getFields(),s=r.scales,l=isFunction$1(e)||!e?o[0]:e,c=s[l],u=c?c.getText(n[l]):n[l]||l;return isFunction$1(e)?e(u,n):u}function getAttributesForLegend(n){var r=values(n.attributes);return filter(r,function(e){return contains(GROUP_ATTRS,e.type)})}function getTooltipValueScale(n){var r,e,a=getAttributesForLegend(n),o;try{for(var s=__values(a),l=s.next();!l.done;l=s.next()){var c=l.value,u=c.getScale(c.type);if(u&&u.isLinear){var f=get(n.scaleDefs,u.field),d=inferScaleType(u,f,c.type,n.type);if(d!=="cat"){o=u;break}}}}catch(p){r={error:p}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(r)throw r.error}}var g=n.getXScale(),v=n.getYScale();return o||v||g}function getTooltipValue(n,r){var e=r.field,a=n[e];if(isArray$4(a)){var o=a.map(function(s){return r.getText(s)});return o.join("-")}return r.getText(a)}function getTooltipName(n,r){var e,a=r.getGroupScales();if(a.length&&(e=a[0]),e){var o=e.field;return e.getText(n[o])}var s=getTooltipValueScale(r);return getName(s)}function findDataByPoint(n,r,e){if(r.length===0)return null;var a=e.type,o=e.getXScale(),s=e.getYScale(),l=o.field,c=s.field,u=null;if(a==="heatmap"||a==="point"){for(var f=e.coordinate,d=f.invert(n),g=o.invert(d.x),v=s.invert(d.y),p=1/0,y=0;y<r.length;y++){var m=r[y],x=m[FIELD_ORIGIN],A=Math.pow(x[l]-g,2)+Math.pow(x[c]-v,2);A<p&&(p=A,u=m)}return u}var _=r[0],b=r[r.length-1],S=getXValueByPoint(n,e),C=_[FIELD_ORIGIN][l],E=_[FIELD_ORIGIN][c],T=b[FIELD_ORIGIN][l],w=s.isLinear&&isArray$4(E);if(isArray$4(C)){for(var y=0;y<r.length;y++){var L=r[y],x=L[FIELD_ORIGIN];if(o.translate(x[l][0])<=S&&o.translate(x[l][1])>=S)if(w)isArray$4(u)||(u=[]),u.push(L);else{u=L;break}}isArray$4(u)&&(u=filterYValue(u,n,e))}else{var M=void 0;if(!o.isLinear&&o.type!=="timeCat"){for(var y=0;y<r.length;y++){var L=r[y],x=L[FIELD_ORIGIN];if(snapEqual(x[l],S,o))if(w)isArray$4(u)||(u=[]),u.push(L);else{u=L;break}else o.translate(x[l])<=S&&(b=L,M=r[y+1])}isArray$4(u)&&(u=filterYValue(u,n,e))}else{if((S>o.translate(T)||S<o.translate(C))&&(S>o.max||S<o.min))return null;for(var O=0,P=r.length-1,N=void 0;O<=P;){N=Math.floor((O+P)/2);var G=r[N][FIELD_ORIGIN][l];if(snapEqual(G,S,o))return r[N];o.translate(G)<=o.translate(S)?(O=N+1,b=r[N],M=r[N+1]):(P===0&&(b=r[0]),P=N-1)}}b&&M&&Math.abs(o.translate(b[FIELD_ORIGIN][l])-S)>Math.abs(o.translate(M[FIELD_ORIGIN][l])-S)&&(b=M)}var Y=getXDistance(e.getXScale());return!u&&Math.abs(o.translate(b[FIELD_ORIGIN][l])-S)<=Y/2&&(u=b),u}function getTooltipItems(n,r,e,a){var o,s;e===void 0&&(e=""),a===void 0&&(a=!1);var l=n[FIELD_ORIGIN],c=getTooltipTitle(l,r,e),u=r.tooltipOption,f=r.theme.defaultColor,d=[],g,v;function p(L,M){if(a||!isNil(M)&&M!==""){var O={title:c,data:l,mappingData:n,name:L,value:M,color:n.color||f,marker:!0};d.push(O)}}if(isObject$1(u)){var y=u.fields,m=u.callback;if(m){var x=y.map(function(L){return n[FIELD_ORIGIN][L]}),A=m.apply(void 0,__spreadArray$2([],__read(x),!1)),_=__assign$8({data:n[FIELD_ORIGIN],mappingData:n,title:c,color:n.color||f,marker:!0},A);d.push(_)}else{var b=r.scales;try{for(var S=__values(y),C=S.next();!C.done;C=S.next()){var E=C.value;if(!isNil(l[E])){var T=b[E];g=getName(T),v=T.getText(l[E]),p(g,v)}}}catch(L){o={error:L}}finally{try{C&&!C.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}}}else{var w=getTooltipValueScale(r);v=getTooltipValue(l,w),g=getTooltipName(l,r),p(g,v)}return d}function getTooltipItemsByFindData(n,r,e,a){var o,s,l=a.showNil,c=[],u=n.dataArray;if(!isEmpty(u)){n.sort(u);try{for(var f=__values(u),d=f.next();!d.done;d=f.next()){var g=d.value,v=findDataByPoint(r,g,n);if(v){var p=n.getElementId(v),y=n.elementsMap[p];if(n.type==="heatmap"||y.visible){var m=getTooltipItems(v,n,e,l);m.length&&c.push(m)}}}}catch(x){o={error:x}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}return c}function getTooltipItemsByHitShape(n,r,e,a){var o=a.showNil,s=[],l=n.container,c=l.getShape(r.x,r.y);if(c&&c.get("visible")&&c.get("origin")){var u=c.get("origin").mappingData,f=getTooltipItems(u,n,e,o);f.length&&s.push(f)}return s}function findItemsFromView(n,r,e){var a,o,s=[],l=n.geometries,c=e.shared,u=e.title,f=e.reversed;try{for(var d=__values(l),g=d.next();!g.done;g=d.next()){var v=g.value;if(v.visible&&v.tooltipOption!==!1){var p=v.type,y=void 0;["point","edge","polygon"].includes(p)?y=getTooltipItemsByHitShape(v,r,u,e):["area","line","path","heatmap"].includes(p)||c!==!1?y=getTooltipItemsByFindData(v,r,u,e):y=getTooltipItemsByHitShape(v,r,u,e),y.length&&(f&&y.reverse(),s.push(y))}}}catch(m){a={error:m}}finally{try{g&&!g.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}return s}function findItemsFromViewRecurisive(n,r,e){var a,o,s=findItemsFromView(n,r,e);try{for(var l=__values(n.views),c=l.next();!c.done;c=l.next()){var u=c.value;s=s.concat(findItemsFromView(u,r,e))}}catch(f){a={error:f}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}return s}function isAutoPadding(n){return!isNumber$2(n)&&!isArray$4(n)}function parsePadding(n){n===void 0&&(n=0);var r=isArray$4(n)?n:[n];switch(r.length){case 0:r=[0,0,0,0];break;case 1:r=new Array(4).fill(r[0]);break;case 2:r=__spreadArray$2(__spreadArray$2([],__read(r),!1),__read(r),!1);break;case 3:r=__spreadArray$2(__spreadArray$2([],__read(r),!1),[r[1]],!1);break;default:r=r.slice(0,4);break}return r}var LOAD_COMPONENT_CONTROLLERS={};function registerComponentController(n,r){LOAD_COMPONENT_CONTROLLERS[n]=r}function getComponentControllerNames(){return Object.keys(LOAD_COMPONENT_CONTROLLERS)}function getComponentController(n){return LOAD_COMPONENT_CONTROLLERS[n]}var CoordinateController=function(){function n(r){this.option=this.wrapperOption(r)}return n.prototype.update=function(r){return this.option=this.wrapperOption(r),this},n.prototype.hasAction=function(r){var e=this.option.actions;return some(e,function(a){return a[0]===r})},n.prototype.create=function(r,e){var a=this.option,o=a.type,s=a.cfg,l=o==="theta",c=__assign$8({start:r,end:e},s),u=getCoordinate(l?"polar":o);return this.coordinate=new u(c),this.coordinate.type=o,l&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},n.prototype.adjust=function(r,e){return this.coordinate.update({start:r,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},n.prototype.rotate=function(r){return this.option.actions.push(["rotate",r]),this},n.prototype.reflect=function(r){return this.option.actions.push(["reflect",r]),this},n.prototype.scale=function(r,e){return this.option.actions.push(["scale",r,e]),this},n.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},n.prototype.getOption=function(){return this.option},n.prototype.getCoordinate=function(){return this.coordinate},n.prototype.wrapperOption=function(r){return __assign$8({type:"rect",actions:[],cfg:{}},r)},n.prototype.execActions=function(r){var e=this,a=this.option.actions;each$1(a,function(o){var s,l=__read(o),c=l[0],u=l.slice(1),f=isNil(r)?!0:r.includes(c);f&&(s=e.coordinate)[c].apply(s,__spreadArray$2([],__read(u),!1))})},n}(),Event=function(){function n(r,e,a){this.view=r,this.gEvent=e,this.data=a,this.type=e.type}return n.fromData=function(r,e,a){return new n(r,new GraphEvent(e,{}),a)},Object.defineProperty(n.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},n.prototype.clone=function(){return new n(this.view,this.gEvent,this.data)},n}();function defaultLayout(n){var r=n.getController("axis"),e=n.getController("legend"),a=n.getController("annotation"),o=n.getController("slider"),s=n.getController("scrollbar");[r,o,s,e,a].forEach(function(l){l&&l.layout()})}var ScalePool=function(){function n(){this.scales=new Map,this.syncScales=new Map}return n.prototype.createScale=function(r,e,a,o){var s=a,l=this.getScaleMeta(o);if(e.length===0&&l){var c=l.scale,u={type:c.type};c.isCategory&&(u.values=c.values),s=deepMix(u,l.scaleDef,a)}var f=createScaleByField(r,e,s);return this.cacheScale(f,a,o),f},n.prototype.sync=function(r,e){var a=this;this.syncScales.forEach(function(o,s){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,u=[];each$1(o,function(f){var d=a.getScale(f);c=isNumber$2(d.max)?Math.max(c,d.max):c,l=isNumber$2(d.min)?Math.min(l,d.min):l,each$1(d.values,function(g){u.includes(g)||u.push(g)})}),each$1(o,function(f){var d=a.getScale(f);if(d.isContinuous)d.change({min:l,max:c,values:u});else if(d.isCategory){var g=d.range,v=a.getScaleMeta(f);u&&!get(v,["scaleDef","range"])&&(g=getDefaultCategoryScaleRange(deepMix({},d,{values:u}),r,e)),d.change({values:u,range:g})}})})},n.prototype.cacheScale=function(r,e,a){var o=this.getScaleMeta(a);o&&o.scale.type===r.type?(syncScale(o.scale,r),o.scaleDef=e):(o={key:a,scale:r,scaleDef:e},this.scales.set(a,o));var s=this.getSyncKey(o);if(o.syncKey=s,this.removeFromSyncScales(a),s){var l=this.syncScales.get(s);l||(l=[],this.syncScales.set(s,l)),l.push(a)}},n.prototype.getScale=function(r){var e=this.getScaleMeta(r);if(!e){var a=last(r.split("-")),o=this.syncScales.get(a);o&&o.length&&(e=this.getScaleMeta(o[0]))}return e&&e.scale},n.prototype.deleteScale=function(r){var e=this.getScaleMeta(r);if(e){var a=e.syncKey,o=this.syncScales.get(a);if(o&&o.length){var s=o.indexOf(r);s!==-1&&o.splice(s,1)}}this.scales.delete(r)},n.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},n.prototype.removeFromSyncScales=function(r){var e=this;this.syncScales.forEach(function(a,o){var s=a.indexOf(r);if(s!==-1)return a.splice(s,1),a.length===0&&e.syncScales.delete(o),!1})},n.prototype.getSyncKey=function(r){var e=r.scale,a=r.scaleDef,o=e.field,s=get(a,["sync"]);return s===!0?o:s===!1?void 0:s},n.prototype.getScaleMeta=function(r){return this.scales.get(r)},n}(),PaddingCal=function(){function n(r,e,a,o){r===void 0&&(r=0),e===void 0&&(e=0),a===void 0&&(a=0),o===void 0&&(o=0),this.top=r,this.right=e,this.bottom=a,this.left=o}return n.instance=function(r,e,a,o){return r===void 0&&(r=0),e===void 0&&(e=0),a===void 0&&(a=0),o===void 0&&(o=0),new n(r,e,a,o)},n.prototype.max=function(r){var e=__read(r,4),a=e[0],o=e[1],s=e[2],l=e[3];return this.top=Math.max(this.top,a),this.right=Math.max(this.right,o),this.bottom=Math.max(this.bottom,s),this.left=Math.max(this.left,l),this},n.prototype.shrink=function(r){var e=__read(r,4),a=e[0],o=e[1],s=e[2],l=e[3];return this.top+=a,this.right+=o,this.bottom+=s,this.left+=l,this},n.prototype.inc=function(r,e){var a=r.width,o=r.height;switch(e){case DIRECTION.TOP:case DIRECTION.TOP_LEFT:case DIRECTION.TOP_RIGHT:this.top+=o;break;case DIRECTION.RIGHT:case DIRECTION.RIGHT_TOP:case DIRECTION.RIGHT_BOTTOM:this.right+=a;break;case DIRECTION.BOTTOM:case DIRECTION.BOTTOM_LEFT:case DIRECTION.BOTTOM_RIGHT:this.bottom+=o;break;case DIRECTION.LEFT:case DIRECTION.LEFT_TOP:case DIRECTION.LEFT_BOTTOM:this.left+=a;break}return this},n.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},n.prototype.clone=function(){return new(n.bind.apply(n,__spreadArray$2([void 0],__read(this.getPadding()),!1)))},n}();function calculatePadding(n){var r=n.padding;if(!isAutoPadding(r))return new(PaddingCal.bind.apply(PaddingCal,__spreadArray$2([void 0],__read(parsePadding(r)),!1)));var e=n.viewBBox,a=new PaddingCal,o=[],s=[],l=[];return each$1(n.getComponents(),function(c){var u=c.type;u===COMPONENT_TYPE.AXIS?o.push(c):[COMPONENT_TYPE.LEGEND,COMPONENT_TYPE.SLIDER,COMPONENT_TYPE.SCROLLBAR].includes(u)?s.push(c):u!==COMPONENT_TYPE.GRID&&u!==COMPONENT_TYPE.TOOLTIP&&l.push(c)}),each$1(o,function(c){var u=c.component,f=u.getLayoutBBox(),d=new BBox(f.x,f.y,f.width,f.height),g=d.exceed(e);a.max(g)}),each$1(s,function(c){var u=c.component,f=c.direction,d=u.getLayoutBBox(),g=u.get("padding"),v=new BBox(d.x,d.y,d.width,d.height).expand(g);a.inc(v,f)}),each$1(l,function(c){var u=c.component,f=c.direction,d=u.getLayoutBBox(),g=new BBox(d.x,d.y,d.width,d.height);a.inc(g,f)}),a}function defaultSyncViewPadding(n,r,e){var a=e.instance();r.forEach(function(o){o.autoPadding=a.max(o.autoPadding.getPadding())})}var View=function(n){__extends$7(r,n);function r(e){var a=n.call(this,{visible:e.visible})||this;a.views=[],a.geometries=[],a.controllers=[],a.interactions={},a.limitInPlot=!1,a.options={data:[],animate:!0},a.usedControllers=getComponentControllerNames(),a.scalePool=new ScalePool,a.layoutFunc=defaultLayout,a.isPreMouseInPlot=!1,a.isDataChanged=!1,a.isCoordinateChanged=!1,a.createdScaleKeys=new Map,a.onCanvasEvent=function(b){var S=b.name;if(!S.includes(":")){var C=a.createViewEvent(b);a.doPlotEvent(C),a.emit(S,C)}},a.onDelegateEvents=function(b){var S=b.name;if(S.includes(":")){var C=a.createViewEvent(b);a.emit(S,C)}};var o=e.id,s=o===void 0?uniqueId("view"):o,l=e.parent,c=e.canvas,u=e.backgroundGroup,f=e.middleGroup,d=e.foregroundGroup,g=e.region,v=g===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:g,p=e.padding,y=e.appendPadding,m=e.theme,x=e.options,A=e.limitInPlot,_=e.syncViewPadding;return a.parent=l,a.canvas=c,a.backgroundGroup=u,a.middleGroup=f,a.foregroundGroup=d,a.region=v,a.padding=p,a.appendPadding=y,a.options=__assign$8(__assign$8({},a.options),x),a.limitInPlot=A,a.id=s,a.syncViewPadding=_,a.themeObject=isObject$1(m)?deepMix({},getTheme("default"),createTheme(m)):getTheme(m),a.init(),a}return r.prototype.setLayout=function(e){this.layoutFunc=e},r.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},r.prototype.render=function(e,a){e===void 0&&(e=!1),this.emit(VIEW_LIFE_CIRCLE.BEFORE_RENDER,Event.fromData(this,VIEW_LIFE_CIRCLE.BEFORE_RENDER,a)),this.paint(e),this.emit(VIEW_LIFE_CIRCLE.AFTER_RENDER,Event.fromData(this,VIEW_LIFE_CIRCLE.AFTER_RENDER,a)),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var e=this;this.emit(VIEW_LIFE_CIRCLE.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var a=this.geometries,o=0;o<a.length;o++)a[o].clear(),a[o].container.remove(!0),a[o].labelsContainer.remove(!0);this.geometries=[];for(var s=this.controllers,o=0;o<s.length;o++)s[o].name==="annotation"?s[o].clear(!0):s[o].clear();this.createdScaleKeys.forEach(function(c,u){e.getRootView().scalePool.deleteScale(u)}),this.createdScaleKeys.clear();for(var l=this.views,o=0;o<l.length;o++)l[o].clear();this.emit(VIEW_LIFE_CIRCLE.AFTER_CLEAR)},r.prototype.destroy=function(){this.emit(VIEW_LIFE_CIRCLE.BEFORE_DESTROY);var e=this.interactions;each$1(e,function(c){c&&c.destroy()}),this.clear();for(var a=this.controllers,o=0,s=a.length;o<s;o++){var l=a[o];l.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),n.prototype.destroy.call(this)},r.prototype.changeVisible=function(e){n.prototype.changeVisible.call(this,e);for(var a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.changeVisible(e)}for(var c=this.controllers,o=0,s=c.length;o<s;o++){var u=c[o];u.changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},r.prototype.data=function(e){return set(this.options,"data",e),this.isDataChanged=!0,this},r.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},r.prototype.filter=function(e,a){return isFunction$1(a)?(set(this.options,["filters",e],a),this):(!a&&get(this.options,["filters",e])&&delete this.options.filters[e],this)},r.prototype.axis=function(e,a){return isBoolean(e)?set(this.options,["axes"],e):set(this.options,["axes",e],a),this},r.prototype.legend=function(e,a){return isBoolean(e)?set(this.options,["legends"],e):isString$1(e)?(set(this.options,["legends",e],a),isPlainObject$1(a)&&(a!=null&&a.selected)&&set(this.options,["filters",e],function(o){var s;return(s=a==null?void 0:a.selected[o])!==null&&s!==void 0?s:!0})):set(this.options,["legends"],e),this},r.prototype.scale=function(e,a){var o=this;return isString$1(e)?set(this.options,["scales",e],a):isObject$1(e)&&each$1(e,function(s,l){set(o.options,["scales",l],s)}),this},r.prototype.tooltip=function(e){return set(this.options,"tooltip",e),this},r.prototype.annotation=function(){return this.getController("annotation")},r.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},r.prototype.coordinate=function(e,a){return isString$1(e)?set(this.options,"coordinate",{type:e,cfg:a}):set(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},r.prototype.coord=function(e,a){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,a)},r.prototype.facet=function(e,a){this.facetInstance&&this.facetInstance.destroy();var o=getFacet(e);if(!o)throw new Error("facet '".concat(e,"' is not exist!"));return this.facetInstance=new o(this,__assign$8(__assign$8({},a),{type:e})),this},r.prototype.animate=function(e){return set(this.options,"animate",e),this},r.prototype.updateOptions=function(e){return this.clear(),mix(this.options,e),this.views.forEach(function(a){return a.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},r.prototype.option=function(e,a){if(r.prototype[e])throw new Error(`Can't use built in variable name "`.concat(e,'", please change another one.'));return set(this.options,e,a),this},r.prototype.theme=function(e){return this.themeObject=isObject$1(e)?deepMix({},this.themeObject,createTheme(e)):getTheme(e),this},r.prototype.interaction=function(e,a){var o=this.interactions[e];o&&o.destroy();var s=createInteraction(e,this,a);return s&&(s.init(),this.interactions[e]=s),this},r.prototype.removeInteraction=function(e){var a=this.interactions[e];a&&(a.destroy(),this.interactions[e]=void 0)},r.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var a=this.views,o=0,s=a.length;o<s;o++){var l=a[o];l.changeData(e)}this.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},r.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var a={data:this.options.data,scales:clone(this.options.scales),axes:clone(this.options.axes),coordinate:clone(this.coordinateController.getOption()),tooltip:clone(this.options.tooltip),legends:clone(this.options.legends),animate:this.options.animate,visible:this.visible},o=new r(__assign$8(__assign$8({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:GROUP_Z_INDEX.BG}),middleGroup:this.middleGroup.addGroup({zIndex:GROUP_Z_INDEX.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:GROUP_Z_INDEX.FORE}),theme:this.themeObject,padding:this.padding},e),{options:__assign$8(__assign$8({},a),get(e,"options",{}))}));return this.views.push(o),o},r.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},r.prototype.removeView=function(e){var a=remove(this.views,function(o){return o===e})[0];return a&&a.destroy(),a},r.prototype.getCoordinate=function(){return this.coordinateInstance},r.prototype.getTheme=function(){return this.themeObject},r.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},r.prototype.getYScales=function(){var e={},a=[];return this.geometries.forEach(function(o){var s=o.getYScale(),l=s.field;e[l]||(e[l]=!0,a.push(s))}),a},r.prototype.getScalesByDim=function(e){for(var a=this.geometries,o={},s=0,l=a.length;s<l;s++){var c=a[s],u=e==="x"?c.getXScale():c.getYScale();u&&!o[u.field]&&(o[u.field]=u)}return o},r.prototype.getScale=function(e,a){var o=a||this.getScaleKey(e);return this.getRootView().scalePool.getScale(o)},r.prototype.getScaleByField=function(e,a){return this.getScale(e,a)},r.prototype.getOptions=function(){return this.options},r.prototype.getData=function(){return this.filteredData},r.prototype.getOriginalData=function(){return this.options.data},r.prototype.getPadding=function(){return this.autoPadding.getPadding()},r.prototype.getGeometries=function(){return this.geometries},r.prototype.getElements=function(){return reduce(this.geometries,function(e,a){return e.concat(a.getElements())},[])},r.prototype.getElementsBy=function(e){return this.getElements().filter(function(a){return e(a)})},r.prototype.getLayer=function(e){return e===LAYER.BG?this.backgroundGroup:e===LAYER.MID?this.middleGroup:e===LAYER.FORE?this.foregroundGroup:this.foregroundGroup},r.prototype.isPointInPlot=function(e){return isPointInCoordinate(this.getCoordinate(),e)},r.prototype.getLegendAttributes=function(){return flatten(this.geometries.map(function(e){return e.getGroupAttributes()}))},r.prototype.getGroupScales=function(){var e=this.geometries.map(function(a){return a.getGroupScales()});return uniq$1(flatten(e))},r.prototype.getCanvas=function(){return this.getRootView().canvas},r.prototype.getRootView=function(){for(var e=this;;){if(e.parent){e=e.parent;continue}break}return e},r.prototype.getXY=function(e){var a=this.getCoordinate(),o=this.getScalesByDim("x"),s=this.getScalesByDim("y"),l,c;if(each$1(e,function(u,f){o[f]&&(l=o[f].scale(u)),s[f]&&(c=s[f].scale(u))}),!isNil(l)&&!isNil(c))return a.convert({x:l,y:c})},r.prototype.getController=function(e){return find$2(this.controllers,function(a){return a.name===e})},r.prototype.showTooltip=function(e){var a=this.getController("tooltip");return a&&a.showTooltip(e),this},r.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},r.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},r.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},r.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},r.prototype.getTooltipItems=function(e){var a=this.getController("tooltip");return a?a.getTooltipItems(e):[]},r.prototype.getSnapRecords=function(e){for(var a=this.geometries,o=[],s=0,l=a.length;s<l;s++){var c=a[s],u=c.dataArray;c.sort(u);for(var f=void 0,d=0,g=u.length;d<g;d++){var v=u[d];f=findDataByPoint(e,v,c),f&&o.push(f)}}for(var p=this.views,s=0,l=p.length;s<l;s++){var y=p[s],m=y.getSnapRecords(e);o=o.concat(m)}return o},r.prototype.getComponents=function(){for(var e=[],a=this.controllers,o=0,s=a.length;o<s;o++){var l=a[o];e=e.concat(l.getComponents())}return e},r.prototype.filterData=function(e){var a=this.options.filters;return size(a)===0?e:filter(e,function(o,s){var l=Object.keys(a);return l.every(function(c){var u=a[c];return u(o[c],o,s)})})},r.prototype.filterFieldData=function(e,a){var o=this.options.filters,s=get(o,e);return isUndefined$1(s)?a:a.filter(function(l,c){return s(l[e],l,c)})},r.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),a=e.start,o=e.end,s=this.coordinateBBox.bl,l=this.coordinateBBox.tr;if(isEqual$1(a,s)&&isEqual$1(o,l)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(s,l)},r.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(VIEW_LIFE_CIRCLE.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(VIEW_LIFE_CIRCLE.AFTER_PAINT),this.isDataChanged=!1},r.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=get(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var a=this.viewBBox,o=a.x,s=a.y,l=a.width,c=a.height;this.backgroundStyleRectShape.attr({fill:e,x:o,y:s,width:l,height:c})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},r.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=calculatePadding(this).shrink(parsePadding(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var a=this.controllers.find(function(u){return u.name==="tooltip"});a.update();for(var o=this.views,s=0,l=o.length;s<l;s++){var c=o[s];c.renderPaddingRecursive(e)}},r.prototype.renderLayoutRecursive=function(e){var a=this.syncViewPadding===!0?defaultSyncViewPadding:isFunction$1(this.syncViewPadding)?this.syncViewPadding:void 0;a&&(a(this,this.views,PaddingCal),this.views.forEach(function(u){u.coordinateBBox=u.viewBBox.shrink(u.autoPadding.getPadding()),u.adjustCoordinate()})),this.doLayout();for(var o=this.views,s=0,l=o.length;s<l;s++){var c=o[s];c.renderLayoutRecursive(e)}},r.prototype.renderPaintRecursive=function(e){var a=this.middleGroup;if(this.limitInPlot){var o=getCoordinateClipCfg(this.coordinateInstance),s=o.type,l=o.attrs;a.setClip({type:s,attrs:l})}else a.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var c=this.views,u=0,f=c.length;u<f;u++){var d=c[u];d.renderPaintRecursive(e)}},r.prototype.createScale=function(e,a,o,s){var l=get(this.options.scales,[e]),c=__assign$8(__assign$8({},l),o);return this.parent?this.parent.createScale(e,a,c,s):this.scalePool.createScale(e,a,c,s)},r.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var a=this.views,o=0,s=a.length;o<s;o++){var l=a[o];l.renderDataRecursive(e)}},r.prototype.calculateViewBBox=function(){var e,a,o,s;if(this.parent){var l=this.parent.coordinateBBox;e=l.x,a=l.y,o=l.width,s=l.height}else e=0,a=0,o=this.canvas.get("width"),s=this.canvas.get("height");var c=this.region,u=c.start,f=c.end,d=new BBox(e+o*u.x,a+s*u.y,o*(f.x-u.x),s*(f.y-u.y));(!this.viewBBox||!this.viewBBox.isEqual(d))&&(this.viewBBox=new BBox(e+o*u.x,a+s*u.y,o*(f.x-u.x),s*(f.y-u.y))),this.coordinateBBox=this.viewBBox},r.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},r.prototype.initComponentController=function(){for(var e=this.usedControllers,a=0,o=e.length;a<o;a++){var s=e[a],l=getComponentController(s);l&&this.controllers.push(new l(this))}},r.prototype.createViewEvent=function(e){var a=e.shape,o=e.name,s=a?a.get("origin"):null,l=new Event(this,e,s);return l.type=o,l},r.prototype.doPlotEvent=function(e){var a=e.type,o=e.x,s=e.y,l={x:o,y:s},c=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(c.includes(a)){var u=this.isPointInPlot(l),f=e.clone();if(u){var d="plot:".concat(a);f.type=d,this.emit(d,f),(a==="mouseleave"||a==="touchend")&&(this.isPreMouseInPlot=!1)}a==="mousemove"||a==="touchmove"?(this.isPreMouseInPlot&&!u?(a==="mousemove"&&(f.type=PLOT_EVENTS.MOUSE_LEAVE,this.emit(PLOT_EVENTS.MOUSE_LEAVE,f)),f.type=PLOT_EVENTS.LEAVE,this.emit(PLOT_EVENTS.LEAVE,f)):!this.isPreMouseInPlot&&u&&(a==="mousemove"&&(f.type=PLOT_EVENTS.MOUSE_ENTER,this.emit(PLOT_EVENTS.MOUSE_ENTER,f)),f.type=PLOT_EVENTS.ENTER,this.emit(PLOT_EVENTS.ENTER,f)),this.isPreMouseInPlot=u):(a==="mouseleave"||a==="touchend")&&this.isPreMouseInPlot&&(a==="mouseleave"&&(f.type=PLOT_EVENTS.MOUSE_LEAVE,this.emit(PLOT_EVENTS.MOUSE_LEAVE,f)),f.type=PLOT_EVENTS.LEAVE,this.emit(PLOT_EVENTS.LEAVE,f),this.isPreMouseInPlot=!1)}},r.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},r.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var a=this.getCoordinate(),o=get(this.options,"scales",{}),s=this.geometries,l=0,c=s.length;l<c;l++){var u=s[l];u.scales=this.getGeometryScales();var f={coordinate:a,scaleDefs:o,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?u.update(f):u.init(f)}this.adjustScales()},r.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),a=this.getGroupedFields(),o=this.getOptions(),s=o.data,l=o.scales,c=l===void 0?{}:l,u=this.filteredData,f=0,d=e.length;f<d;f++){var g=e[f],v=c[g],p=this.getScaleKey(g);this.createScale(g,a.includes(g)?s:u,v,p),this.createdScaleKeys.set(p,!0)}},r.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},r.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),a={},o=0;o<e.length;o++){var s=e[o];a[s]=this.getScaleByField(s)}return a},r.prototype.getScaleFields=function(){for(var e=[],a=new Map,o=this.geometries,s=0;s<o.length;s++){var l=o[s],c=l.getScaleFields();uniq$1(c,e,a)}return e},r.prototype.getGroupedFields=function(){for(var e=[],a=new Map,o=this.geometries,s=0;s<o.length;s++){var l=o[s],c=l.getGroupFields();uniq$1(c,e,a)}return e},r.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},r.prototype.adjustCategoryScaleRange=function(){var e=this,a=__spreadArray$2([this.getXScale()],__read(this.getYScales()),!1).filter(function(l){return!!l}),o=this.getCoordinate(),s=this.options.scales;each$1(a,function(l){var c=l.field,u=l.values,f=l.isCategory,d=l.isIdentity;(f||d)&&u&&!get(s,[c,"range"])&&(l.range=getDefaultCategoryScaleRange(l,o,e.theme))})},r.prototype.initComponents=function(e){for(var a=this.controllers,o=0;o<a.length;o++){var s=a[o];e?s.update():(s.clear(),s.render())}},r.prototype.doLayout=function(){this.layoutFunc(this)},r.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,a=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,a)},r.prototype.paintGeometries=function(e){for(var a=this.options.animate,o=this.getCoordinate(),s={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},l=this.geometries,c=0;c<l.length;c++){var u=l[c];u.coordinate=o,u.canvasRegion=s,a||u.animate(!1),u.paint(e)}},r.prototype.renderComponents=function(e){for(var a=this.getComponents(),o=0;o<a.length;o++){var s=a[o];s.component.render()}},r.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},r.prototype.initOptions=function(){var e=this,a=this.options,o=a.geometries,s=o===void 0?[]:o,l=a.interactions,c=l===void 0?[]:l,u=a.views,f=u===void 0?[]:u,d=a.annotations,g=d===void 0?[]:d,v=a.coordinate,p=a.events,y=a.facets;this.coordinateController?v&&this.coordinateController.update(v):this.coordinateController=new CoordinateController(v);for(var m=0;m<s.length;m++){var x=s[m];this.createGeometry(x)}for(var A=0;A<c.length;A++){var _=c[A],b=_.type,S=_.cfg;this.interaction(b,S)}for(var C=0;C<f.length;C++){var E=f[C];this.createView(E)}for(var T=this.getController("annotation"),w=0;w<g.length;w++){var L=g[w];T.annotation(L)}p&&each$1(p,function(M,O){e.on(O,M)}),y&&each$1(y,function(M){var O=M.type,P=__rest$1(M,["type"]);e.facet(O,P)})},r.prototype.createGeometry=function(e){var a=e.type,o=e.cfg,s=o===void 0?{}:o;if(this[a]){var l=this[a](s);each$1(e,function(c,u){isFunction$1(l[u])&&l[u](c)})}},r.prototype.getScaleKey=function(e){return"".concat(this.id,"-").concat(e)},r}(Base$1);function registerGeometry(n,r){View.prototype[n.toLowerCase()]=function(e){e===void 0&&(e={});var a=__assign$8({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),o=new r(a);return this.geometries.push(o),o}}var Chart=function(n){__extends$7(r,n);function r(e){var a=this,o=e.container,s=e.width,l=e.height,c=e.autoFit,u=c===void 0?!1:c,f=e.padding,d=e.appendPadding,g=e.renderer,v=g===void 0?"canvas":g,p=e.pixelRatio,y=e.localRefresh,m=y===void 0?!0:y,x=e.visible,A=x===void 0?!0:x,_=e.supportCSSTransform,b=_===void 0?!1:_,S=e.defaultInteractions,C=S===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:S,E=e.options,T=e.limitInPlot,w=e.theme,L=e.syncViewPadding,M=isString$1(o)?document.getElementById(o):o,O=createDom$1('<div style="position:relative;"></div>');M.appendChild(O);var P=getChartSize(M,u,s,l),N=getEngine(v),G=new N.Canvas(__assign$8({container:O,pixelRatio:p,localRefresh:m,supportCSSTransform:b},P));return a=n.call(this,{parent:null,canvas:G,backgroundGroup:G.addGroup({zIndex:GROUP_Z_INDEX.BG}),middleGroup:G.addGroup({zIndex:GROUP_Z_INDEX.MID}),foregroundGroup:G.addGroup({zIndex:GROUP_Z_INDEX.FORE}),padding:f,appendPadding:d,visible:A,options:E,limitInPlot:T,theme:w,syncViewPadding:L})||this,a.onResize=debounce$1(function(){a.forceFit()},300),a.ele=M,a.canvas=G,a.width=P.width,a.height=P.height,a.autoFit=u,a.localRefresh=m,a.renderer=v,a.wrapperElement=O,a.updateCanvasStyle(),a.bindAutoFit(),a.initDefaultInteractions(C),a}return r.prototype.initDefaultInteractions=function(e){var a=this;each$1(e,function(o){a.interaction(o)})},r.prototype.aria=function(e){var a="aria-label";e===!1?this.ele.removeAttribute(a):this.ele.setAttribute(a,e.label)},r.prototype.changeSize=function(e,a){return this.width===e&&this.height===a?this:(this.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE),this.width=e,this.height=a,this.canvas.changeSize(e,a),this.render(!0),this.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_SIZE),this)},r.prototype.clear=function(){n.prototype.clear.call(this),this.aria(!1)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),removeDom(this.wrapperElement),this.wrapperElement=null},r.prototype.changeVisible=function(e){return n.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},r.prototype.forceFit=function(){if(!this.destroyed){var e=getChartSize(this.ele,!0,this.width,this.height),a=e.width,o=e.height;this.changeSize(a,o)}},r.prototype.updateCanvasStyle=function(){modifyCSS(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},r.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},r.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},r}(View),Controller=function(){function n(r){this.visible=!0,this.components=[],this.view=r}return n.prototype.clear=function(r){each$1(this.components,function(e){e.component.destroy()}),this.components=[]},n.prototype.destroy=function(){this.clear()},n.prototype.getComponents=function(){return this.components},n.prototype.changeVisible=function(r){this.visible!==r&&(this.components.forEach(function(e){r?e.component.show():e.component.hide()}),this.visible=r)},n}();function uniq(n){for(var r=[],e=function(o){var s=n[o],l=find$2(r,function(c){return c.color===s.color&&c.name===s.name&&c.value===s.value&&c.title===s.title});l||r.push(s)},a=0;a<n.length;a++)e(a);return r}var Tooltip=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.isLocked=!1,e}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.isVisible=function(){var e=this.view.getOptions().tooltip;return e!==!1},r.prototype.render=function(){},r.prototype.showTooltip=function(e){if(this.point=e,!!this.isVisible()){var a=this.view,o=this.getTooltipItems(e);if(!o.length){this.hideTooltip();return}var s=this.getTitle(o),l={x:o[0].x,y:o[0].y};a.emit("tooltip:show",Event.fromData(a,"tooltip:show",__assign$8({items:o,title:s},e)));var c=this.getTooltipCfg(),u=c.follow,f=c.showMarkers,d=c.showCrosshairs,g=c.showContent,v=c.marker,p=this.items,y=this.title;if(!isEqual$1(y,s)||!isEqual$1(p,o)?(a.emit("tooltip:change",Event.fromData(a,"tooltip:change",__assign$8({items:o,title:s},e))),(isFunction$1(g)?g(o):g)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(mix({},c,{items:this.getItemsAfterProcess(o),title:s},u?e:{})),this.tooltip.show()),f&&this.renderTooltipMarkers(o,v)):(this.tooltip&&u&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=o,this.title=s,d){var m=get(c,["crosshairs","follow"],!1);this.renderCrosshairs(m?e:l,c)}}},r.prototype.hideTooltip=function(){var e=this.getTooltipCfg().follow;if(!e){this.point=null;return}var a=this.tooltipMarkersGroup;a&&a.hide();var o=this.xCrosshair,s=this.yCrosshair;o&&o.hide(),s&&s.hide();var l=this.tooltip;l&&l.hide(),this.view.emit("tooltip:hide",Event.fromData(this.view,"tooltip:hide",{})),this.point=null},r.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},r.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},r.prototype.isTooltipLocked=function(){return this.isLocked},r.prototype.clear=function(){var e=this,a=e.tooltip,o=e.xCrosshair,s=e.yCrosshair,l=e.tooltipMarkersGroup;a&&(a.hide(),a.clear()),o&&o.clear(),s&&s.clear(),l&&l.clear(),a!=null&&a.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},r.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},r.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},r.prototype.changeVisible=function(e){if(this.visible!==e){var a=this,o=a.tooltip,s=a.tooltipMarkersGroup,l=a.xCrosshair,c=a.yCrosshair;e?(o&&o.show(),s&&s.show(),l&&l.show(),c&&c.show()):(o&&o.hide(),s&&s.hide(),l&&l.hide(),c&&c.hide()),this.visible=e}},r.prototype.getTooltipItems=function(e){var a,o,s,l,c,u,f=this.findItemsFromView(this.view,e);if(f.length){f=flatten(f);try{for(var d=__values(f),g=d.next();!g.done;g=d.next()){var v=g.value;try{for(var p=(s=void 0,__values(v)),y=p.next();!y.done;y=p.next()){var m=y.value,x=m.mappingData,A=x.x,_=x.y;m.x=isArray$4(A)?A[A.length-1]:A,m.y=isArray$4(_)?_[_.length-1]:_}}catch(M){s={error:M}}finally{try{y&&!y.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(M){a={error:M}}finally{try{g&&!g.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}var b=this.getTooltipCfg().shared;if(b===!1&&f.length>1){var S=f[0],C=Math.abs(e.y-S[0].y);try{for(var E=__values(f),T=E.next();!T.done;T=E.next()){var w=T.value,L=Math.abs(e.y-w[0].y);L<=C&&(S=w,C=L)}}catch(M){c={error:M}}finally{try{T&&!T.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}f=[S]}return uniq(flatten(f))}return[]},r.prototype.layout=function(){},r.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},r.prototype.isCursorEntered=function(e){if(this.tooltip){var a=this.tooltip.getContainer(),o=this.tooltip.get("capture");if(a&&o){var s=a.getBoundingClientRect(),l=s.x,c=s.y,u=s.width,f=s.height;return new BBox(l,c,u,f).isPointIn(e)}}return!1},r.prototype.getTooltipCfg=function(){var e=this.view,a=e.getOptions().tooltip,o=this.processCustomContent(a),s=e.getTheme(),l=get(s,["components","tooltip"],{}),c=get(o,"enterable",l.enterable);return deepMix({},l,o,{capture:!!(c||this.isLocked)})},r.prototype.processCustomContent=function(e){if(isBoolean(e)||!get(e,"customContent"))return e;var a=e.customContent,o=function(s,l){var c=a(s,l)||"";return isString$1(c)?'<div class="g2-tooltip">'+c+"</div>":c};return __assign$8(__assign$8({},e),{customContent:o})},r.prototype.getTitle=function(e){var a=e[0].title||e[0].name;return this.title=a,a},r.prototype.renderTooltip=function(){var e=this.view.getCanvas(),a={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},o=this.getTooltipCfg(),s=new HtmlTooltip(__assign$8(__assign$8({parent:e.get("el").parentNode,region:a},o),{visible:!1,crosshairs:null}));s.init(),this.tooltip=s},r.prototype.renderTooltipMarkers=function(e,a){var o,s,l=this.getTooltipMarkersGroup(),c=this.view.getRootView(),u=c.limitInPlot;try{for(var f=__values(e),d=f.next();!d.done;d=f.next()){var g=d.value,v=g.x,p=g.y;if(u||l!=null&&l.getClip()){var y=getCoordinateClipCfg(c.getCoordinate()),m=y.type,x=y.attrs;l==null||l.setClip({type:m,attrs:x})}else l==null||l.setClip(void 0);var A=this.view.getTheme(),_=get(A,["components","tooltip","marker"],{}),b=__assign$8(__assign$8({fill:g.color,symbol:"circle",shadowColor:g.color},isFunction$1(a)?__assign$8(__assign$8({},_),a(g)):a),{x:v,y:p});l.addShape("marker",{attrs:b})}}catch(S){o={error:S}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}},r.prototype.renderCrosshairs=function(e,a){var o=get(a,["crosshairs","type"],"x");o==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,a)):o==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,a)):o==="xy"&&(this.renderXCrosshairs(e,a),this.renderYCrosshairs(e,a))},r.prototype.renderXCrosshairs=function(e,a){var o=this.getViewWithGeometry(this.view).getCoordinate(),s,l;if(o.isRect)o.isTransposed?(s={x:o.start.x,y:e.y},l={x:o.end.x,y:e.y}):(s={x:e.x,y:o.end.y},l={x:e.x,y:o.start.y});else{var c=getAngleByPoint(o,e),u=o.getCenter(),f=o.getRadius();l=polarToCartesian(u.x,u.y,f,c),s=u}var d=deepMix({start:s,end:l,container:this.getTooltipCrosshairsGroup()},get(a,"crosshairs",{}),this.getCrosshairsText("x",e,a));delete d.type;var g=this.xCrosshair;g?g.update(d):(g=new LineCrosshair$1(d),g.init()),g.render(),g.show(),this.xCrosshair=g},r.prototype.renderYCrosshairs=function(e,a){var o=this.getViewWithGeometry(this.view).getCoordinate(),s,l;if(o.isRect){var c=void 0,u=void 0;o.isTransposed?(c={x:e.x,y:o.end.y},u={x:e.x,y:o.start.y}):(c={x:o.start.x,y:e.y},u={x:o.end.x,y:e.y}),s={start:c,end:u},l="Line"}else s={center:o.getCenter(),radius:getDistanceToCenter(o,e),startAngle:o.startAngle,endAngle:o.endAngle},l="Circle";s=deepMix({container:this.getTooltipCrosshairsGroup()},s,get(a,"crosshairs",{}),this.getCrosshairsText("y",e,a)),delete s.type;var f=this.yCrosshair;f?o.isRect&&f.get("type")==="circle"||!o.isRect&&f.get("type")==="line"?(f=new Crosshair[l](s),f.init()):f.update(s):(f=new Crosshair[l](s),f.init()),f.render(),f.show(),this.yCrosshair=f},r.prototype.getCrosshairsText=function(e,a,o){var s=get(o,["crosshairs","text"]),l=get(o,["crosshairs","follow"]),c=this.items;if(s){var u=this.getViewWithGeometry(this.view),f=c[0],d=u.getXScale(),g=u.getYScales()[0],v=void 0,p=void 0;if(l){var y=this.view.getCoordinate().invert(a);v=d.invert(y.x),p=g.invert(y.y)}else v=f.data[d.field],p=f.data[g.field];var m=e==="x"?v:p;return isFunction$1(s)?s=s(e,m,c,a):s.content=m,{text:s}}},r.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},r.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):(e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),e.toFront(),this.tooltipMarkersGroup=e),e},r.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||(e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),e.toBack(),this.tooltipCrosshairsGroup=e),e},r.prototype.findItemsFromView=function(e,a){var o,s;if(e.getOptions().tooltip===!1)return[];var l=this.getTooltipCfg(),c=findItemsFromView(e,a,l);try{for(var u=__values(e.views),f=u.next();!f.done;f=u.next()){var d=f.value;c=c.concat(this.findItemsFromView(d,a))}}catch(g){o={error:g}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return c},r.prototype.getViewWithGeometry=function(e){var a=this;return e.geometries.length?e:find$2(e.views,function(o){return a.getViewWithGeometry(o)})},r.prototype.getItemsAfterProcess=function(e){var a=this.getTooltipCfg().customItems,o=a||function(s){return s};return o(e)},r}(Controller),ANIMATIONS_MAP={};function getAnimation(n){return ANIMATIONS_MAP[n.toLowerCase()]}function registerAnimation(n,r){ANIMATIONS_MAP[n.toLowerCase()]=r}var DEFAULT_ANIMATE_CFG={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},GEOMETRY_ANIMATE_CFG={interval:function(n){return{enter:{animation:n.isRect?n.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:n.isPolar&&n.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},GEOMETRY_GROUP_APPEAR_ANIMATION={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(n){var r;return n.isRect?r=n.isTransposed?"grow-in-x":"grow-in-y":(r="grow-in-xy",n.isPolar&&n.isTransposed&&(r="wave-in")),{animation:r}},schema:function(n){var r;return n.isRect?r=n.isTransposed?"grow-in-x":"grow-in-y":r="grow-in-xy",{animation:r}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function parseAnimateConfig(n,r){return{delay:isFunction$1(n.delay)?n.delay(r):n.delay,easing:isFunction$1(n.easing)?n.easing(r):n.easing,duration:isFunction$1(n.duration)?n.duration(r):n.duration,callback:n.callback,repeat:n.repeat}}function getDefaultAnimateCfg(n,r,e){var a=GEOMETRY_ANIMATE_CFG[n];return a&&(isFunction$1(a)&&(a=a(r)),a=deepMix({},DEFAULT_ANIMATE_CFG,a),e)?a[e]:a}function doAnimate(n,r,e){var a=get(n.get("origin"),"data",FIELD_ORIGIN),o=r.animation,s=parseAnimateConfig(r,a);if(o){var l=getAnimation(o);l&&l(n,s,e)}else n.animate(e.toAttrs,s)}function doGroupAppearAnimate(n,r,e,a,o){if(GEOMETRY_GROUP_APPEAR_ANIMATION[e]){var s=GEOMETRY_GROUP_APPEAR_ANIMATION[e](a),l=getAnimation(get(s,"animation",""));if(l){var c=__assign$8(__assign$8(__assign$8({},DEFAULT_ANIMATE_CFG.appear),s),r);n.stopAnimate(),l(n,c,{coordinate:a,minYPoint:o,toAttrs:null})}}}var BACKGROUND_SHAPE="element-background",Element$1=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.labelShape=[],a.states=[];var o=e.shapeFactory,s=e.container,l=e.offscreenGroup,c=e.elementIndex,u=e.visible,f=u===void 0?!0:u;return a.shapeFactory=o,a.container=s,a.offscreenGroup=l,a.visible=f,a.elementIndex=c,a}return r.prototype.draw=function(e,a){a===void 0&&(a=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,a),this.visible===!1&&this.changeVisible(!1)},r.prototype.update=function(e){var a=this,o=a.shapeFactory,s=a.shape;if(s){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(s,e);var l=this.getOffscreenGroup(),c=o.drawShape(this.shapeType,e,l);c.cfg.data=this.data,c.cfg.origin=e,c.cfg.element=this,this.syncShapeStyle(s,c,this.getStates(),this.getAnimateCfg("update"))}},r.prototype.destroy=function(){var e=this,a=e.shapeFactory,o=e.shape;if(o){var s=this.getAnimateCfg("leave");s?doAnimate(o,s,{coordinate:a.coordinate,toAttrs:__assign$8({},o.attr())}):o.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,n.prototype.destroy.call(this)},r.prototype.changeVisible=function(e){n.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(a){a.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(a){a.hide()}))},r.prototype.setState=function(e,a){var o=this,s=o.states,l=o.shapeFactory,c=o.model,u=o.shape,f=o.shapeType,d=s.indexOf(e);if(a){if(d>-1)return;s.push(e),(e==="active"||e==="selected")&&(u==null||u.toFront())}else{if(d===-1)return;if(s.splice(d,1),e==="active"||e==="selected"){var g=this.geometry,v=g.sortZIndex,p=g.zIndexReversed,y=p?this.geometry.elements.length-this.elementIndex:this.elementIndex;v?u.setZIndex(y):u.set("zIndex",y)}}var m=l.drawShape(f,c,this.getOffscreenGroup());s.length?this.syncShapeStyle(u,m,s,null):this.syncShapeStyle(u,m,["reset"],null),m.remove(!0);var x={state:e,stateStatus:a,element:this,target:this.container};this.container.emit("statechange",x),propagationDelegate(this.shape,"statechange",x)},r.prototype.clearStates=function(){var e=this,a=this.states;each$1(a,function(o){e.setState(o,!1)}),this.states=[]},r.prototype.hasState=function(e){return this.states.includes(e)},r.prototype.getStates=function(){return this.states},r.prototype.getData=function(){return this.data},r.prototype.getModel=function(){return this.model},r.prototype.getBBox=function(){var e=this,a=e.shape,o=e.labelShape,s={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return a&&(s=a.getCanvasBBox()),o&&o.forEach(function(l){var c=l.getCanvasBBox();s.x=Math.min(c.x,s.x),s.y=Math.min(c.y,s.y),s.minX=Math.min(c.minX,s.minX),s.minY=Math.min(c.minY,s.minY),s.maxX=Math.max(c.maxX,s.maxX),s.maxY=Math.max(c.maxY,s.maxY)}),s.width=s.maxX-s.minX,s.height=s.maxY-s.minY,s},r.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,a=e.shapeType,o=e.geometry,s=e.shapeFactory,l=o.stateOption,c=s.defaultShapeType,u=s.theme[a]||s.theme[c];this.statesStyle=deepMix({},u,l)}return this.statesStyle},r.prototype.getStateStyle=function(e,a){var o=this.getStatesStyle(),s=get(o,[e,"style"],{}),l=s[a]||s;return isFunction$1(l)?l(this):l},r.prototype.getAnimateCfg=function(e){var a=this,o=this.animate;if(o){var s=o[e];return s&&__assign$8(__assign$8({},s),{callback:function(){var l;isFunction$1(s.callback)&&s.callback(),(l=a.geometry)===null||l===void 0||l.emit(GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE)}})}return null},r.prototype.drawShape=function(e,a){var o;a===void 0&&(a=!1);var s=this,l=s.shapeFactory,c=s.container,u=s.shapeType;if(this.shape=l.drawShape(u,e,c),this.shape){this.setShapeInfo(this.shape,e);var f=this.shape.cfg.name;f?isString$1(f)&&(this.shape.cfg.name=["element",f]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var d=a?"enter":"appear",g=this.getAnimateCfg(d);g&&((o=this.geometry)===null||o===void 0||o.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE),doAnimate(this.shape,g,{coordinate:l.coordinate,toAttrs:__assign$8({},this.shape.attr())}))}},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},r.prototype.setShapeInfo=function(e,a){var o=this;if(e.cfg.origin=a,e.cfg.element=this,e.isGroup()){var s=e.get("children");s.forEach(function(l){o.setShapeInfo(l,a)})}},r.prototype.syncShapeStyle=function(e,a,o,s,l){var c=this,u;if(o===void 0&&(o=[]),l===void 0&&(l=0),!(!e||!a)){var f=e.get("clipShape"),d=a.get("clipShape");if(this.syncShapeStyle(f,d,o,s),e.isGroup())for(var g=e.get("children"),v=a.get("children"),p=0;p<g.length;p++)this.syncShapeStyle(g[p],v[p],o,s,l+p);else{if(!isEmpty(o)&&!isEqual$1(o,["reset"])){var y=e.get("name");isArray$4(y)&&(y=y[1]),each$1(o,function(x){if(a.get("name")!==BACKGROUND_SHAPE){var A=c.getStateStyle(x,y||l);a.attr(A)}})}var m=getReplaceAttrs(e,a);this.animate?s?((u=this.geometry)===null||u===void 0||u.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE),doAnimate(e,s,{coordinate:this.shapeFactory.coordinate,toAttrs:m,shapeModel:this.model})):isEmpty(o)?e.attr(m):(e.stopAnimate(),e.animate(m,{duration:300})):e.attr(m)}}},r.prototype.getShapeType=function(e){var a=get(e,"shape");return isArray$4(a)?a[0]:a},r}(Base$1),GEOMETRY_LABELS_MAP={},GEOMETRY_LABELS_LAYOUT_MAP={};function getGeometryLabel(n){return GEOMETRY_LABELS_MAP[n.toLowerCase()]}function registerGeometryLabel(n,r){GEOMETRY_LABELS_MAP[n.toLowerCase()]=r}function getGeometryLabelLayout(n){return GEOMETRY_LABELS_LAYOUT_MAP[n.toLowerCase()]}function registerGeometryLabelLayout(n,r){GEOMETRY_LABELS_LAYOUT_MAP[n.toLowerCase()]=r}var ShapeFactoryBase={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(n,r){var e=this.getShape(n);return e.getPoints?e.getPoints(r):this.getDefaultPoints(r)},getShape:function(n){var r=this[n]||this[this.defaultShapeType];return r.coordinate=this.coordinate,r},getDefaultPoints:function(){return[]},getDefaultStyle:function(n){return get(n,[this.defaultShapeType,"default","style"],{})},getMarker:function(n,r){var e=this.getShape(n);if(!e.getMarker){var a=this.defaultShapeType;e=this.getShape(a)}var o=this.theme,s=get(o,[n,"default"],{}),l=e.getMarker(r);return deepMix({},s,l)},drawShape:function(n,r,e){var a=this.getShape(n);return a.draw(r,e)}},ShapeBase$2={coordinate:null,parsePath:function(n){var r=this.coordinate,e=parsePathString$1(n);return r.isPolar?e=convertPolarPath(r,e):e=convertNormalPath(r,e),e},parsePoint:function(n){var r=this.coordinate;return r.convert(n)},parsePoints:function(n){var r=this.coordinate;return n.map(function(e){return r.convert(e)})},draw:function(n,r){}},ShapeFactoryMap={};function registerShapeFactory(n,r){var e=upperFirst(n),a=__assign$8(__assign$8(__assign$8({},ShapeFactoryBase),r),{geometryType:n});return ShapeFactoryMap[e]=a,a}function registerShape(n,r,e){var a=upperFirst(n),o=ShapeFactoryMap[a],s=__assign$8(__assign$8({},ShapeBase$2),e);return o[r]=s,s}function getShapeFactory(n){var r=upperFirst(n);return ShapeFactoryMap[r]}function group(n,r,e){var a,o;if(e===void 0&&(e={}),!r)return[n];var s=groupToMap(n,r),l=[];if(r.length===1&&e[r[0]]){var c=e[r[0]];try{for(var u=__values(c),f=u.next();!f.done;f=u.next()){var d=f.value,g=s["_".concat(d)];g&&l.push(g)}}catch(y){a={error:y}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}}else for(var v in s)if(s.hasOwnProperty(v)){var p=s[v];l.push(p)}return l}function isModelChange(n,r){return some(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(e){return!isEqual$1(n[e],r[e])})}function parseFields(n){return isArray$4(n)?n:n.split("*")}function diff$2(n,r){for(var e=[],a=[],o=[],s=new Map,l=0;l<r.length;l++){var c=r[l];n[c]?a.push(c):e.push(c),s.set(c,!0)}return Object.keys(n).forEach(function(u){s.has(u)||o.push(u)}),{added:e,updated:a,removed:o}}var Geometry=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.type="base",a.attributes={},a.elements=[],a.elementsMap={},a.animateOption=!0,a.attributeOption={},a.lastElementsMap={},a.generatePoints=!1,a.beforeMappingData=null,a.adjusts={},a.idFields=[],a.hasSorted=!1,a.isCoordinateChanged=!1;var o=e.container,s=e.labelsContainer,l=e.coordinate,c=e.data,u=e.sortable,f=u===void 0?!1:u,d=e.visible,g=d===void 0?!0:d,v=e.theme,p=e.scales,y=p===void 0?{}:p,m=e.scaleDefs,x=m===void 0?{}:m,A=e.intervalPadding,_=e.dodgePadding,b=e.maxColumnWidth,S=e.minColumnWidth,C=e.columnWidthRatio,E=e.roseWidthRatio,T=e.multiplePieWidthRatio,w=e.zIndexReversed,L=e.sortZIndex,M=e.useDeferredLabel;return a.container=o,a.labelsContainer=s,a.coordinate=l,a.data=c,a.sortable=f,a.visible=g,a.userTheme=v,a.scales=y,a.scaleDefs=x,a.intervalPadding=A,a.dodgePadding=_,a.maxColumnWidth=b,a.minColumnWidth=S,a.columnWidthRatio=C,a.roseWidthRatio=E,a.multiplePieWidthRatio=T,a.zIndexReversed=w,a.sortZIndex=L,a.useDeferredLabel=M?typeof M=="number"?M:1/0:null,a}return r.prototype.position=function(e){var a=e;isPlainObject$1(e)||(a={fields:parseFields(e)});var o=get(a,"fields");return o.length===1&&(o.unshift("1"),set(a,"fields",o)),set(this.attributeOption,"position",a),this},r.prototype.color=function(e,a){return this.createAttrOption("color",e,a),this},r.prototype.shape=function(e,a){return this.createAttrOption("shape",e,a),this},r.prototype.size=function(e,a){return this.createAttrOption("size",e,a),this},r.prototype.adjust=function(e){var a=e;return(isString$1(e)||isPlainObject$1(e))&&(a=[e]),each$1(a,function(o,s){isObject$1(o)||(a[s]={type:o})}),this.adjustOption=a,this},r.prototype.style=function(e,a){if(isString$1(e)){var o=parseFields(e);this.styleOption={fields:o,callback:a}}else{var s=e,o=s.fields,l=s.callback,c=s.cfg;o||l||c?this.styleOption=e:this.styleOption={cfg:e}}return this},r.prototype.tooltip=function(e,a){if(isString$1(e)){var o=parseFields(e);this.tooltipOption={fields:o,callback:a}}else this.tooltipOption=e;return this},r.prototype.animate=function(e){return this.animateOption=e,this},r.prototype.label=function(e,a,o){if(isString$1(e)){var s={},l=parseFields(e);s.fields=l,isFunction$1(a)?s.callback=a:isPlainObject$1(a)&&(s.cfg=a),o&&(s.cfg=o),this.labelOption=s}else this.labelOption=e;return this},r.prototype.state=function(e){return this.stateOption=e,this},r.prototype.customInfo=function(e){return this.customOption=e,this},r.prototype.init=function(e){e===void 0&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},r.prototype.update=function(e){e===void 0&&(e={});var a=e.data,o=e.isDataChanged,s=e.isCoordinateChanged,l=this,c=l.attributeOption,u=l.lastAttributeOption;isEqual$1(c,u)?a&&(o||!isEqual$1(a,this.data))?(this.setCfg(e),this.initAttributes(),this.processData(a)):this.setCfg(e):this.init(e),this.adjustScale(),this.isCoordinateChanged=s},r.prototype.paint=function(e){var a=this;e===void 0&&(e=!1),this.animateOption&&(this.animateOption=deepMix({},getDefaultAnimateCfg(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var o=this.getOffscreenGroup();o.clear();var s=this.beforeMappingData,l=this.beforeMapping(s);this.dataArray=new Array(l.length);for(var c=0;c<l.length;c++){var u=l[c];this.dataArray[c]=this.mapping(u)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var f=this.container,d=this.type,g=this.coordinate,v=get(this.animateOption,"appear"),p=this.getYScale(),y=g.convert({x:0,y:p.scale(this.getYMinValue())});doGroupAppearAnimate(f,v,d,g,y)}if(this.labelOption){var m=this.useDeferredLabel,x=(function(){return a.renderLabels(flatten(a.dataArray),e)}).bind(this);if(typeof m=="number"){var A=typeof m=="number"&&m!==1/0?m:0;if(!window.requestIdleCallback)setTimeout(x,A);else{var _=A&&A!==1/0?{timeout:A}:void 0;window.requestIdleCallback(x,_)}}else x()}this.lastAttributeOption=__assign$8({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var e=this,a=e.container,o=e.geometryLabel,s=e.offscreenGroup;a&&a.clear(),o&&o.clear(),s&&s.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},r.prototype.destroy=function(){this.clear();var e=this.container;e.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,n.prototype.destroy.call(this)},r.prototype.getGroupScales=function(){return this.groupScales},r.prototype.getAttribute=function(e){return this.attributes[e]},r.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},r.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},r.prototype.getGroupAttributes=function(){var e=[];return each$1(this.attributes,function(a){GROUP_ATTRS.includes(a.type)&&e.push(a)}),e},r.prototype.getDefaultValue=function(e){var a,o=this.getAttribute(e);return o&&isEmpty(o.scales)&&(a=o.values[0]),a},r.prototype.getAttributeValues=function(e,a){for(var o=[],s=e.scales,l=0,c=s.length;l<c;l++){var u=s[l],f=u.field;u.isIdentity?o.push(u.values):o.push(a[f])}return e.mapping.apply(e,__spreadArray$2([],__read(o),!1))},r.prototype.getAdjust=function(e){return this.adjusts[e]},r.prototype.getCoordinate=function(){return this.coordinate},r.prototype.getData=function(){return this.data},r.prototype.getShapeMarker=function(e,a){var o=this.getShapeFactory();return o.getMarker(e,a)},r.prototype.getElementsBy=function(e){return this.elements.filter(function(a){return e(a)})},r.prototype.getElements=function(){return this.elements},r.prototype.getElementId=function(e){e=isArray$4(e)?e[0]:e;var a=e[FIELD_ORIGIN];if(this.idFields.length){for(var o=a[this.idFields[0]],s=1;s<this.idFields.length;s++)o+="-"+a[this.idFields[s]];return o}var l=this.type,c=this.getXScale(),u=this.getYScale(),f=c.field||"x",d=u.field||"y",g=a[d],v;c.type==="identity"?v=c.values[0]:v=a[f];var p;l==="interval"||l==="schema"?p="".concat(v):l==="line"||l==="area"||l==="path"?p=l:p="".concat(v,"-").concat(g);for(var y=this.groupScales,s=0,m=y.length;s<m;s++){var x=y[s],A=x.field;p="".concat(p,"-").concat(a[A])}var _=this.getAdjust("dodge");if(_){var b=_.dodgeBy;b&&(p="".concat(p,"-").concat(a[b]))}return this.getAdjust("jitter")&&(p="".concat(p,"-").concat(e.x,"-").concat(e.y)),p},r.prototype.getScaleFields=function(){var e=[],a=new Map,o=this,s=o.attributeOption,l=o.labelOption,c=o.tooltipOption;for(var u in s)if(s.hasOwnProperty(u)){var f=s[u];f.fields?uniq$1(f.fields,e,a):f.values&&uniq$1(f.values,e,a)}return l&&l.fields&&uniq$1(l.fields,e,a),isObject$1(c)&&c.fields&&uniq$1(c.fields,e,a),e},r.prototype.changeVisible=function(e){n.prototype.changeVisible.call(this,e);for(var a=this.elements,o=0,s=a.length;o<s;o++){var l=a[o];l.changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},r.prototype.getFields=function(){var e=new Map,a=[];return Object.values(this.attributeOption).forEach(function(o){var s=(o==null?void 0:o.fields)||[];s.forEach(function(l){e.has(l)||a.push(l),e.set(l,!0)})},[]),a},r.prototype.getGroupFields=function(){for(var e=[],a=new Map,o=0,s=GROUP_ATTRS.length;o<s;o++){var l=GROUP_ATTRS[o],c=this.attributeOption[l];c&&c.fields&&uniq$1(c.fields,e,a)}return e},r.prototype.getXYFields=function(){var e=__read(this.attributeOption.position.fields,2),a=e[0],o=e[1];return[a,o]},r.prototype.getXField=function(){return get(this.getXYFields(),[0])},r.prototype.getYField=function(){return get(this.getXYFields(),[1])},r.prototype.getShapes=function(){return this.elements.map(function(e){return e.shape})},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},r.prototype.sort=function(e){if(!this.hasSorted)for(var a=this.getXScale(),o=a.field,s=0;s<e.length;s++){var l=e[s];l.sort(function(c,u){return a.translate(c[FIELD_ORIGIN][o])-a.translate(u[FIELD_ORIGIN][o])})}this.hasSorted=!0},r.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},r.prototype.getShapeFactory=function(){var e=this.shapeType;if(getShapeFactory(e))return this.shapeFactory||(this.shapeFactory=clone(getShapeFactory(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},r.prototype.createShapePointsCfg=function(e){var a=this.getXScale(),o=this.getYScale(),s=this.normalizeValues(e[a.field],a),l;return o?l=this.normalizeValues(e[o.field],o):l=e.y?e.y:.1,{x:s,y:l,y0:o?o.scale(this.getYMinValue()):void 0}},r.prototype.createElement=function(e,a,o){o===void 0&&(o=!1);var s=this.container,l=this.getDrawCfg(e),c=this.getShapeFactory(),u=new Element$1({shapeFactory:c,container:s,offscreenGroup:this.getOffscreenGroup(),elementIndex:a});return u.animate=this.animateOption,u.geometry=this,u.draw(l,o),u},r.prototype.getDrawCfg=function(e){var a=e[FIELD_ORIGIN],o={mappingData:e,data:a,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},s=e.shape;!s&&this.getShapeFactory()&&(s=this.getShapeFactory().defaultShapeType),o.shape=s;var l=this.theme.geometries[this.shapeType];o.defaultStyle=get(l,[s,"default"],{}).style,!o.defaultStyle&&this.getShapeFactory()&&(o.defaultStyle=this.getShapeFactory().getDefaultStyle(l));var c=this.styleOption;return c&&(o.style=this.getStyleCfg(c,a)),this.generatePoints&&(o.points=e.points,o.nextPoints=e.nextPoints),o},r.prototype.updateElements=function(e,a){var o,s,l,c,u,f;a===void 0&&(a=!1);for(var d=new Map,g=[],v=new Map,p=0,y=0;y<e.length;y++)for(var m=e[y],x=0;x<m.length;x++){var A=m[x],_=this.getElementId(A),b=d.has(_)?"".concat(_,"-").concat(y,"-").concat(x):_;g.push(b),d.set(b,A),v.set(b,p),p++}this.elements=new Array(p);var S=diff$2(this.lastElementsMap,g),C=S.added,E=S.updated,T=S.removed;try{for(var w=__values(C),L=w.next();!L.done;L=w.next()){var _=L.value,A=d.get(_),y=v.get(_),M=this.createElement(A,y,a);this.elements[y]=M,this.elementsMap[_]=M,M.shape&&M.shape.set("zIndex",this.zIndexReversed?this.elements.length-y:y)}}catch(z){o={error:z}}finally{try{L&&!L.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}try{for(var O=__values(E),P=O.next();!P.done;P=O.next()){var _=P.value,M=this.lastElementsMap[_],A=d.get(_),N=this.getDrawCfg(A),G=M.getModel(),y=v.get(_);(this.isCoordinateChanged||isModelChange(N,G))&&(M.animate=this.animateOption,M.update(N)),this.elements[y]=M,this.elementsMap[_]=M,M.shape&&M.shape.set("zIndex",this.zIndexReversed?this.elements.length-y:y)}}catch(z){l={error:z}}finally{try{P&&!P.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}this.container&&this.container.sort();try{for(var Y=__values(T),F=Y.next();!F.done;F=Y.next()){var _=F.value,M=this.lastElementsMap[_];M.animate=this.animateOption,M.destroy()}}catch(z){u={error:z}}finally{try{F&&!F.done&&(f=Y.return)&&f.call(Y)}finally{if(u)throw u.error}}},r.prototype.getLabelType=function(){var e=this,a=e.labelOption,o=e.coordinate,s=e.type,l=o.type,c=o.isTransposed,u=get(a,["cfg","type"]);return u||(l==="polar"?u=c?"pie":"polar":l==="theta"?u="pie":s==="interval"||s==="polygon"?u="interval":u="base"),u},r.prototype.getYMinValue=function(){var e=this.getYScale(),a=e.min,o=e.max,s;return a>=0?s=a:o<=0?s=o:s=0,s},r.prototype.createAttrOption=function(e,a,o){if(isNil(a)||isObject$1(a))isObject$1(a)&&isEqual$1(Object.keys(a),["values"])?set(this.attributeOption,e,{fields:a.values}):set(this.attributeOption,e,a);else{var s={};isNumber$2(a)?s.values=[a]:s.fields=parseFields(a),o&&(isFunction$1(o)?s.callback=o:s.values=o),set(this.attributeOption,e,s)}},r.prototype.initAttributes=function(){var e=this,a=this,o=a.attributes,s=a.attributeOption,l=a.theme,c=a.shapeType;this.groupScales=[];var u={},f=function(v){if(s.hasOwnProperty(v)){var p=s[v];if(!p)return{value:void 0};var y=__assign$8({},p),m=y.callback,x=y.values,A=y.fields,_=A===void 0?[]:A,b=_.map(function(C){var E=e.scales[C];if(!u[C]&&GROUP_ATTRS.includes(v)){var T=inferScaleType(E,get(e.scaleDefs,C),v,e.type);T==="cat"&&(e.groupScales.push(E),u[C]=!0)}return E});y.scales=b,v!=="position"&&b.length===1&&b[0].type==="identity"?y.values=b[0].values:!m&&!x&&(v==="size"?y.values=l.sizes:v==="shape"?y.values=l.shapes[c]||[]:v==="color"&&(b.length?y.values=b[0].values.length<=10?l.colors10:l.colors20:y.values=l.colors10));var S=getAttribute(v);o[v]=new S(y)}};for(var d in s){var g=f(d);if(typeof g=="object")return g.value}},r.prototype.processData=function(e){var a,o;this.hasSorted=!1;for(var s=this.getAttribute("position").scales,l=s.filter(function(T){return T.isCategory}),c=this.groupData(e),u=[],f=0,d=c.length;f<d;f++){for(var g=c[f],v=[],p=0,y=g.length;p<y;p++){var m=g[p],x={};for(var A in m)x[A]=m[A];x[FIELD_ORIGIN]=m;try{for(var _=(a=void 0,__values(l)),b=_.next();!b.done;b=_.next()){var S=b.value,C=S.field;x[C]=S.translate(x[C])}}catch(T){a={error:T}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}v.push(x)}u.push(v)}var E=this.adjustData(u);return this.beforeMappingData=E,E},r.prototype.adjustData=function(e){var a=this.adjustOption,o=this,s=o.intervalPadding,l=o.dodgePadding,c=o.theme,u=this.maxColumnWidth||c.maxColumnWidth,f=this.minColumnWidth||c.minColumnWidth,d=this.columnWidthRatio||c.columnWidthRatio,g=e;if(a){var v=this.getXScale(),p=this.getYScale(),y=v.field,m=p?p.field:null,x=getXDimensionLength(this.coordinate),A=v.values.length,_=this.getAttribute("size"),b=void 0;_&&(b=_.values[0]);for(var S=0,C=a.length;S<C;S++){var E=a[S],T=__assign$8({xField:y,yField:m,intervalPadding:s,dodgePadding:l,xDimensionLength:x,groupNum:A,defaultSize:b,maxColumnWidth:u,minColumnWidth:f,columnWidthRatio:d},E),w=E.type;if(w==="dodge"){var L=[];if(v.isCategory||v.type==="identity")L.push("x");else if(!p)L.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");T.adjustNames=L,T.dodgeRatio=d}else if(w==="stack"){var M=this.coordinate;if(!p){T.height=M.getHeight();var O=this.getDefaultValue("size")||3;T.size=O}!M.isTransposed&&isNil(T.reverseOrder)&&(T.reverseOrder=!0)}var P=getAdjust(w);T.dimValuesMap={},v&&v.values&&(T.dimValuesMap[v.field]=v.values.map(function(G){return v.translate(G)}));var N=new P(T);g=N.process(g),this.adjusts[w]=N}}return g},r.prototype.groupData=function(e){for(var a=this.getGroupScales(),o=this.scaleDefs,s={},l=[],c=0;c<a.length;c++){var u=a[c],f=u.field;l.push(f),get(o,[f,"values"])&&(s[f]=o[f].values)}return group(e,l,s)},r.prototype.updateStackRange=function(e,a){for(var o=flatten(a),s=e.field,l=e.min,c=e.max,u=0;u<o.length;u++){var f=o[u],d=Math.min.apply(null,f[s]),g=Math.max.apply(null,f[s]);d<l&&(l=d),g>c&&(c=g)}var v=this.scaleDefs,p={};l<e.min&&!get(v,[s,"min"])&&(p.min=l),c>e.max&&!get(v,[s,"max"])&&(p.max=c),e.change(p)},r.prototype.beforeMapping=function(e){var a=e;if(this.sortable&&this.sort(a),this.generatePoints)for(var o=0,s=a.length;o<s;o++){var l=a[o];this.generateShapePoints(l);var c=a[o+1];c&&(this.generateShapePoints(c),l[0].nextPoints=c[0].points)}return a},r.prototype.generateShapePoints=function(e){for(var a=this.getShapeFactory(),o=this.getAttribute("shape"),s=0;s<e.length;s++){var l=e[s],c=this.createShapePointsCfg(l),u=o?this.getAttributeValues(o,l):null,f=a.getShapePoints(u,c);l.points=f}},r.prototype.normalizeValues=function(e,a){var o=[];if(isArray$4(e))for(var s=0;s<e.length;s++){var l=e[s];o.push(a.scale(l))}else o=a.scale(e);return o},r.prototype.mapping=function(e){for(var a=this.attributes,o=[],s=0;s<e.length;s++){var l=e[s],c={_origin:l[FIELD_ORIGIN],points:l.points,nextPoints:l.nextPoints};for(var u in a)if(a.hasOwnProperty(u)){var f=a[u],d=f.names,g=this.getAttributeValues(f,l);if(d.length>1)for(var v=0;v<g.length;v+=1){var p=g[v],y=d[v];c[y]=isArray$4(p)&&p.length===1?p[0]:p}else c[d[0]]=g.length===1?g[0]:g}this.convertPoint(c),o.push(c)}return o},r.prototype.convertPoint=function(e){var a=e.x,o=e.y,s,l,c,u=this.coordinate;if(isArray$4(a)&&isArray$4(o)){s=[],l=[];for(var f=0,d=0,g=a.length,v=o.length;f<g&&d<v;f+=1,d+=1)c=u.convert({x:a[f],y:o[d]}),s.push(c.x),l.push(c.y)}else if(isArray$4(o)){l=[];for(var p=0;p<o.length;p++){var y=o[p];c=u.convert({x:a,y}),s&&s!==c.x?(isArray$4(s)||(s=[s]),s.push(c.x)):s=c.x,l.push(c.y)}}else if(isArray$4(a)){s=[];for(var p=0;p<a.length;p++){var m=a[p];c=u.convert({x:m,y:o}),l&&l!==c.y?(isArray$4(l)||(l=[l]),l.push(c.y)):l=c.y,s.push(c.x)}}else{var x=u.convert({x:a,y:o});s=x.x,l=x.y}e.x=s,e.y=l},r.prototype.getStyleCfg=function(e,a){var o=e.fields,s=o===void 0?[]:o,l=e.callback,c=e.cfg;if(c)return c;var u=s.map(function(f){return a[f]});return l.apply(void 0,__spreadArray$2([],__read(u),!1))},r.prototype.setCfg=function(e){var a=this,o=e.coordinate,s=e.data,l=e.theme,c=e.scaleDefs;o&&(this.coordinate=o),s&&(this.data=s),c&&(this.scaleDefs=c,this.idFields=[],each$1(c,function(u,f){u&&u.key&&a.idFields.push(f)})),l&&(this.theme=this.userTheme?deepMix({},l,this.userTheme):l)},r.prototype.renderLabels=function(e,a){return a===void 0&&(a=!1),__awaiter(this,void 0,void 0,function(){var o,s,l,c,u,f,d,g,v,p,y,m,x=this;return __generator(this,function(A){switch(A.label){case 0:return o=this.geometryLabel,this.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_RENDER_LABEL),o||(s=this.getLabelType(),l=getGeometryLabel(s),o=new l(this),this.geometryLabel=o),[4,o.render(e,a)];case 1:A.sent(),c=o.labelsRenderer.shapesMap,u=new Map,each$1(c,function(_,b){for(var S=_.getChildren()||[],C=0;C<S.length;C++){var E=S[C],T=x.elementsMap[E.get("elementId")||b.split(" ")[0]];if(T){E.cfg.name=["element","label"],E.cfg.element=T;var w=u.get(T)||new Set;w.add(_),u.set(T,w)}}});try{for(f=__values(u.entries()),d=f.next();!d.done;d=f.next())g=__read(d.value,2),v=g[0],p=g[1],v.labelShape=__spreadArray$2([],__read(p),!1)}catch(_){y={error:_}}finally{try{d&&!d.done&&(m=f.return)&&m.call(f)}finally{if(y)throw y.error}}return this.emit(GEOMETRY_LIFE_CIRCLE.AFTER_RENDER_LABEL),[2]}})})},r.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(get(this.animateOption,"appear")===void 0||get(this.animateOption,"appear")&&get(this.animateOption,["appear","animation"])===void 0)},r}(Base$1),transform$4=transform$6;function translate(n,r,e){var a=transform$4(n.getMatrix(),[["t",r,e]]);n.setMatrix(a)}function getRotateMatrix(n,r){var e=n.attr(),a=e.x,o=e.y,s=transform$4(n.getMatrix(),[["t",-a,-o],["r",r],["t",a,o]]);return s}function rotate$1(n,r){var e=getRotateMatrix(n,r);n.setMatrix(e)}function zoom(n,r){var e=n.getBBox(),a=(e.minX+e.maxX)/2,o=(e.minY+e.maxY)/2;n.applyToMatrix([a,o,1]);var s=transform$4(n.getMatrix(),[["t",-a,-o],["s",r,r],["t",a,o]]);n.setMatrix(s)}function findLabelTextShape(n){return n.find(function(r){return r.get("type")==="text"})}function getLabelBackgroundInfo(n,r,e){e===void 0&&(e=[0,0,0,0]);var a=n&&n.getChildren()[0];if(a){var o=a.clone();r!=null&&r.rotate&&rotate$1(o,-r.rotate);var s=o.getCanvasBBox(),l=s.x,c=s.y,u=s.width,f=s.height;o.destroy();var d=e;return isNil(d)?d=[2,2,2,2]:isNumber$2(d)&&(d=new Array(4).fill(d)),{x:l-d[3],y:c-d[0],width:u+d[1]+d[3],height:f+d[0]+d[2],rotation:(r==null?void 0:r.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function getOverlapArea$2(n,r,e){e===void 0&&(e=0);var a=Math.max(0,Math.min(n.x+n.width+e,r.x+r.width+e)-Math.max(n.x-e,r.x-e)),o=Math.max(0,Math.min(n.y+n.height+e,r.y+r.height+e)-Math.max(n.y-e,r.y-e));return a*o}function checkShapeOverlap$2(n,r){var e=n.getBBox();return some(r,function(a){var o=a.getBBox();return getOverlapArea$2(e,o,2)>0})}function updateLabel(n,r,e){var a=e.data,o=e.origin,s=e.animateCfg,l=e.coordinate,c=get(s,"update");n.set("data",a),n.set("origin",o),n.set("animateCfg",s),n.set("coordinate",l),n.set("visible",r.get("visible")),(n.getChildren()||[]).forEach(function(u,f){var d=r.getChildByIndex(f);if(!d)n.removeChild(u),u.remove(!0);else{u.set("data",a),u.set("origin",o),u.set("animateCfg",s),u.set("coordinate",l);var g=getReplaceAttrs(u,d);c?doAnimate(u,c,{toAttrs:g,coordinate:l}):u.attr(g),d.isGroup()&&updateLabel(u,d,e)}}),each$1(r.getChildren(),function(u,f){f>=n.getCount()&&(u.destroyed||n.add(u))})}var Labels=function(){function n(r){this.shapesMap={};var e=r.layout,a=r.container;this.layout=e,this.container=a}return n.prototype.render=function(r,e,a){return a===void 0&&(a=!1),__awaiter(this,void 0,void 0,function(){var o,s,l,c,u,f,d,g,v=this;return __generator(this,function(p){switch(p.label){case 0:if(o={},s=this.createOffscreenGroup(),!r.length)return[3,2];try{for(l=__values(r),c=l.next();!c.done;c=l.next())u=c.value,u&&(o[u.id]=this.renderLabel(u,s))}catch(y){d={error:y}}finally{try{c&&!c.done&&(g=l.return)&&g.call(l)}finally{if(d)throw d.error}}return[4,this.doLayout(r,e,o)];case 1:p.sent(),this.renderLabelLine(r,o),this.renderLabelBackground(r,o),this.adjustLabel(r,o),p.label=2;case 2:return f=this.shapesMap,each$1(o,function(y,m){if(y.destroyed)delete o[m];else{if(f[m]){var x=y.get("data"),A=y.get("origin"),_=y.get("coordinate"),b=y.get("animateCfg"),S=f[m];updateLabel(S,o[m],{data:x,origin:A,animateCfg:b,coordinate:_}),o[m]=S}else{if(v.container.destroyed)return;v.container.add(y);var C=get(y.get("animateCfg"),a?"enter":"appear");C&&doAnimate(y,C,{toAttrs:__assign$8({},y.attr()),coordinate:y.get("coordinate")})}delete f[m]}}),each$1(f,function(y){var m=get(y.get("animateCfg"),"leave");m?doAnimate(y,m,{toAttrs:null,coordinate:y.get("coordinate")}):y.remove(!0)}),this.shapesMap=o,s.destroy(),[2]}})})},n.prototype.clear=function(){this.container.clear(),this.shapesMap={}},n.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},n.prototype.renderLabel=function(r,e){var a=r.id,o=r.elementId,s=r.data,l=r.mappingData,c=r.coordinate,u=r.animate,f=r.content,d=r.capture,g={id:a,elementId:o,capture:d,data:s,origin:__assign$8(__assign$8({},l),{data:l[FIELD_ORIGIN]}),coordinate:c},v=e.addGroup(__assign$8({name:"label",animateCfg:this.animate===!1||u===null||u===!1?!1:deepMix({},this.animate,u)},g)),p;if(f.isGroup&&f.isGroup()||f.isShape&&f.isShape()){var y=f.getCanvasBBox(),m=y.width,x=y.height,A=get(r,"textAlign","left"),_=r.x,b=r.y-x/2;A==="center"?_=_-m/2:(A==="right"||A==="end")&&(_=_-m),translate(f,_,b),p=f,v.add(f)}else{var S=get(r,["style","fill"]);p=v.addShape("text",__assign$8({attrs:__assign$8(__assign$8({x:r.x,y:r.y,textAlign:r.textAlign,textBaseline:get(r,"textBaseline","middle"),text:r.content},r.style),{fill:isNull(S)?r.color:S})},g))}return r.rotate&&rotate$1(p,r.rotate),v},n.prototype.doLayout=function(r,e,a){return __awaiter(this,void 0,void 0,function(){var o,s=this;return __generator(this,function(l){switch(l.label){case 0:return this.layout?(o=isArray$4(this.layout)?this.layout:[this.layout],[4,Promise.all(o.map(function(c){var u=getGeometryLabelLayout(get(c,"type",""));if(u){var f=[],d=[];return each$1(a,function(g,v){f.push(g),d.push(e[g.get("elementId")])}),u(r,f,d,s.region,c.cfg)}}))]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},n.prototype.renderLabelLine=function(r,e){each$1(r,function(a){var o=get(a,"coordinate");if(!(!a||!o)){var s=o.getCenter(),l=o.getRadius();if(a.labelLine){var c=get(a,"labelLine",{}),u=a.id,f=c.path;if(!f){var d=polarToCartesian(s.x,s.y,l,a.angle);f=[["M",d.x,d.y],["L",a.x,a.y]]}var g=e[u];g.destroyed||g.addShape("path",{capture:!1,attrs:__assign$8({path:f,stroke:a.color?a.color:get(a,["style","fill"],"#000"),fill:null},c.style),id:u,origin:a.mappingData,data:a.data,coordinate:a.coordinate})}}})},n.prototype.renderLabelBackground=function(r,e){each$1(r,function(a){var o=get(a,"coordinate"),s=get(a,"background");if(!(!s||!o)){var l=a.id,c=e[l];if(!c.destroyed){var u=c.getChildren()[0];if(u){var f=getLabelBackgroundInfo(c,a,s.padding),d=f.rotation,g=__rest$1(f,["rotation"]),v=c.addShape("rect",{attrs:__assign$8(__assign$8({},g),s.style||{}),id:l,origin:a.mappingData,data:a.data,coordinate:a.coordinate});if(v.setZIndex(-1),d){var p=u.getMatrix();v.setMatrix(p)}}}}})},n.prototype.createOffscreenGroup=function(){var r=this.container,e=r.getGroupBase(),a=new e({});return a},n.prototype.adjustLabel=function(r,e){each$1(r,function(a){if(a){var o=a.id,s=e[o];if(!s.destroyed){var l=s.findAll(function(c){return c.get("type")!=="path"});each$1(l,function(c){c&&(a.offsetX&&c.attr("x",c.attr("x")+a.offsetX),a.offsetY&&c.attr("y",c.attr("y")+a.offsetY))})}}})},n}();function avg(n){var r=0;return each$1(n,function(e){r+=e}),r/n.length}var GeometryLabel=function(){function n(r){this.geometry=r}return n.prototype.getLabelItems=function(r){var e=this,a=[],o=this.getLabelCfgs(r);return each$1(r,function(s,l){var c=o[l];if(!c||isNil(s.x)||isNil(s.y)){a.push(null);return}var u=isArray$4(c.content)?c.content:[c.content];c.content=u;var f=u.length;each$1(u,function(d,g){if(isNil(d)||d===""){a.push(null);return}var v=__assign$8(__assign$8({},c),e.getLabelPoint(c,s,g));v.textAlign||(v.textAlign=e.getLabelAlign(v,g,f)),v.offset<=0&&(v.labelLine=null),a.push(v)})}),a},n.prototype.render=function(r,e){return e===void 0&&(e=!1),__awaiter(this,void 0,void 0,function(){var a,o,s;return __generator(this,function(l){switch(l.label){case 0:return a=this.getLabelItems(r),o=this.getLabelsRenderer(),s=this.getGeometryShapes(),[4,o.render(a,s,e)];case 1:return l.sent(),[2]}})})},n.prototype.clear=function(){var r=this.labelsRenderer;r&&r.clear()},n.prototype.destroy=function(){var r=this.labelsRenderer;r&&r.destroy(),this.labelsRenderer=null},n.prototype.getCoordinate=function(){return this.geometry.coordinate},n.prototype.getDefaultLabelCfg=function(r,e){var a=this.geometry,o=a.type,s=a.theme;return o==="polygon"||o==="interval"&&e==="middle"||r<0&&!["line","point","path"].includes(o)?get(s,"innerLabels",{}):get(s,"labels",{})},n.prototype.getThemedLabelCfg=function(r){var e=this.geometry,a=this.getDefaultLabelCfg(),o=e.type,s=e.theme,l;return o==="polygon"||r.offset<0&&!["line","point","path"].includes(o)?l=deepMix({},a,s.innerLabels,r):l=deepMix({},a,s.labels,r),l},n.prototype.setLabelPosition=function(r,e,a,o){},n.prototype.getLabelOffset=function(r){var e=this.getCoordinate(),a=this.getOffsetVector(r);return e.isTransposed?a[0]:a[1]},n.prototype.getLabelOffsetPoint=function(r,e,a){var o=r.offset,s=this.getCoordinate(),l=s.isTransposed,c=l?"x":"y",u=l?1:-1,f={x:0,y:0};return e>0||a===1?f[c]=o*u:f[c]=o*u*-1,f},n.prototype.getLabelPoint=function(r,e,a){var o=this.getCoordinate(),s=r.content.length;function l(x,A,_){_===void 0&&(_=!1);var b=x;return isArray$4(b)&&(r.content.length===1?_?b=avg(b):b.length<=2?b=b[x.length-1]:b=avg(b):b=b[A]),b}var c={content:r.content[a],x:0,y:0,start:{x:0,y:0},color:"#fff"},u=isArray$4(e.shape)?e.shape[0]:e.shape,f=u==="funnel"||u==="pyramid";if(this.geometry.type==="polygon"){var d=getPolygonCentroid(e.x,e.y);c.x=d[0],c.y=d[1]}else this.geometry.type==="interval"&&!f?(c.x=l(e.x,a,!0),c.y=l(e.y,a)):(c.x=l(e.x,a),c.y=l(e.y,a));if(f){var g=get(e,"nextPoints"),v=get(e,"points");if(g){var p=o.convert(v[1]),y=o.convert(g[1]);c.x=(p.x+y.x)/2,c.y=(p.y+y.y)/2}else if(u==="pyramid"){var p=o.convert(v[1]),y=o.convert(v[2]);c.x=(p.x+y.x)/2,c.y=(p.y+y.y)/2}}r.position&&this.setLabelPosition(c,e,a,r.position);var m=this.getLabelOffsetPoint(r,a,s);return c.start={x:c.x,y:c.y},c.x+=m.x,c.y+=m.y,c.color=e.color,c},n.prototype.getLabelAlign=function(r,e,a){var o="center",s=this.getCoordinate();if(s.isTransposed){var l=r.offset;l<0?o="right":l===0?o="center":o="left",a>1&&e===0&&(o==="right"?o="left":o==="left"&&(o="right"))}return o},n.prototype.getLabelId=function(r){var e=this.geometry,a=e.type,o=e.getXScale(),s=e.getYScale(),l=r[FIELD_ORIGIN],c=e.getElementId(r);return a==="line"||a==="area"?c+=" ".concat(l[o.field]):a==="path"&&(c+=" ".concat(l[o.field],"-").concat(l[s.field])),c},n.prototype.getLabelsRenderer=function(){var r=this.geometry,e=r.labelsContainer,a=r.labelOption,o=r.canvasRegion,s=r.animateOption,l=this.geometry.coordinate,c=this.labelsRenderer;return c||(c=new Labels({container:e,layout:get(a,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=c),c.region=o,c.animate=s?getDefaultAnimateCfg("label",l):!1,c},n.prototype.getLabelCfgs=function(r){var e=this,a=this.geometry,o=a.labelOption,s=a.scales,l=a.coordinate,c=o,u=c.fields,f=c.callback,d=c.cfg,g=u.map(function(p){return s[p]}),v=[];return each$1(r,function(p,y){var m=p[FIELD_ORIGIN],x=e.getLabelText(m,g),A;if(f){var _=u.map(function(T){return m[T]});if(A=f.apply(void 0,__spreadArray$2([],__read(_),!1)),isNil(A)){v.push(null);return}}var b=__assign$8(__assign$8({id:e.getLabelId(p),elementId:e.geometry.getElementId(p),data:m,mappingData:p,coordinate:l},d),A);isFunction$1(b.position)&&(b.position=b.position(m,p,y));var S=e.getLabelOffset(b.offset||0),C=e.getDefaultLabelCfg(S,b.position);b=deepMix({},C,b),b.offset=e.getLabelOffset(b.offset||0);var E=b.content;isFunction$1(E)?b.content=E(m,p,y):isUndefined$1(E)&&(b.content=x[0]),v.push(b)}),v},n.prototype.getLabelText=function(r,e){var a=[];return each$1(e,function(o){var s=r[o.field];isArray$4(s)?s=s.map(function(l){return o.getText(l)}):s=o.getText(s),isNil(s)||s===""?a.push(null):a.push(s)}),a},n.prototype.getOffsetVector=function(r){r===void 0&&(r=0);var e=this.getCoordinate(),a=0;return isNumber$2(r)&&(a=r),e.isTransposed?e.applyMatrix(a,0):e.applyMatrix(0,a)},n.prototype.getGeometryShapes=function(){var r=this.geometry,e={};return each$1(r.elementsMap,function(a,o){e[o]=a.shape}),each$1(r.getOffscreenGroup().getChildren(),function(a){var o=r.getElementId(a.get("origin").mappingData);e[o]=a}),e},n}();function getMappingValue(n,r,e){if(!n)return e;var a;if(n.callback&&n.callback.length>1){var o=Array(n.callback.length-1).fill("");a=n.mapping.apply(n,__spreadArray$2([r],__read(o),!1)).join("")}else a=n.mapping(r).join("");return a||e}var MarkerSymbols={hexagon:function(n,r,e){var a=e/2*Math.sqrt(3);return[["M",n,r-e],["L",n+a,r-e/2],["L",n+a,r+e/2],["L",n,r+e],["L",n-a,r+e/2],["L",n-a,r-e/2],["Z"]]},bowtie:function(n,r,e){var a=e-1.5;return[["M",n-e,r-a],["L",n+e,r+a],["L",n+e,r-a],["L",n-e,r+a],["Z"]]},cross:function(n,r,e){return[["M",n-e,r-e],["L",n+e,r+e],["M",n+e,r-e],["L",n-e,r+e]]},tick:function(n,r,e){return[["M",n-e/2,r-e],["L",n+e/2,r-e],["M",n,r-e],["L",n,r+e],["M",n-e/2,r+e],["L",n+e/2,r+e]]},plus:function(n,r,e){return[["M",n-e,r],["L",n+e,r],["M",n,r-e],["L",n,r+e]]},hyphen:function(n,r,e){return[["M",n-e,r],["L",n+e,r]]},line:function(n,r,e){return[["M",n,r-e],["L",n,r+e]]}},STROKES_SYMBOLS=["line","cross","tick","plus","hyphen"];function handleUserMarkerStyle(n,r){return isFunction$1(r)?r(n):deepMix({},n,r)}function adpatorMarkerStyle(n,r){var e=n.symbol;if(isString$1(e)&&STROKES_SYMBOLS.indexOf(e)!==-1){var a=get(n,"style",{}),o=get(a,"lineWidth",1),s=a.stroke||a.fill||r;n.style=deepMix({},n.style,{lineWidth:o,stroke:s,fill:null})}}function setMarkerSymbol(n){var r=n.symbol;isString$1(r)&&MarkerSymbols[r]&&(n.symbol=MarkerSymbols[r])}function getLegendLayout(n){return n.startsWith(DIRECTION.LEFT)||n.startsWith(DIRECTION.RIGHT)?"vertical":"horizontal"}function getLegendItems(n,r,e,a,o){var s=e.getScale(e.type);if(s.isCategory){var l=s.field,c=r.getAttribute("color"),u=r.getAttribute("shape"),f=n.getTheme().defaultColor,d=r.coordinate.isPolar;return s.getTicks().map(function(g,v){var p,y=g.text,m=g.value,x=y,A=s.invert(m),_=n.filterFieldData(l,[(p={},p[l]=A,p)]).length===0;each$1(n.views,function(T){var w;T.filterFieldData(l,[(w={},w[l]=A,w)]).length||(_=!0)});var b=getMappingValue(c,A,f),S=getMappingValue(u,A,"point"),C=r.getShapeMarker(S,{color:b,isInPolar:d}),E=o;return isFunction$1(E)&&(E=E(x,v,__assign$8({name:x,value:A},deepMix({},a,C)))),C=deepMix({},a,C,omit(__assign$8({},E),["style"])),adpatorMarkerStyle(C,b),E&&E.style&&(C.style=handleUserMarkerStyle(C.style,E.style)),setMarkerSymbol(C),{id:A,name:x,value:A,marker:C,unchecked:_}})}return[]}function getCustomLegendItems(n,r,e){return e.map(function(a,o){var s=r;isFunction$1(s)&&(s=s(a.name,o,deepMix({},n,a)));var l=isFunction$1(a.marker)?a.marker(a.name,o,deepMix({},n,a)):a.marker,c=deepMix({},n,s,l);return setMarkerSymbol(c),a.marker=c,a})}function getLegendThemeCfg(n,r){var e=get(n,["components","legend"],{});return deepMix({},get(e,["common"],{}),deepMix({},get(e,[r],{})))}function isValueEmpty(n){return n?!1:n==null||isNaN(n)}function isYNil(n){if(isArray$4(n))return isValueEmpty(n[1].y);var r=n.y;return isArray$4(r)?isValueEmpty(r[0]):isValueEmpty(r)}function getPathPoints(n,r,e){if(r===void 0&&(r=!1),e===void 0&&(e=!0),!n.length||n.length===1&&!e)return[];if(r){for(var a=[],o=0,s=n.length;o<s;o++){var l=n[o];isYNil(l)||a.push(l)}return[a]}for(var c=[],u=[],o=0,s=n.length;o<s;o++){var l=n[o];isYNil(l)?u.length&&(u.length===1&&!e||c.push(u),u=[]):u.push(l)}return u.length&&c.push(u),c}function getViolinPath(n){for(var r=[],e=0;e<n.length;e++){var a=n[e];if(a){var o=e===0?"M":"L";r.push([o,a.x,a.y])}}var s=n[0];return s&&(r.push(["L",s.x,s.y]),r.push(["z"])),r}function getSmoothViolinPath(n){for(var r=n.length/2,e=[],a=[],o=0;o<n.length;o++)o<r?e.push(n[o]):a.push(n[o]);var s=getSplinePath$1(e,!1),l=getSplinePath$1(a,!1);a.length&&s.push(["L",a[0].x,a[0].y]),l.shift();var c=s.concat(l);return e.length&&c.push(["L",e[0].x,e[0].y]),c.push(["z"]),c}function getStyle(n,r,e,a){a===void 0&&(a="");var o=n.style,s=o===void 0?{}:o,l=n.defaultStyle,c=n.color,u=n.size,f=__assign$8(__assign$8({},l),s);return c&&(r&&(s.stroke||(f.stroke=c)),e&&(s.fill||(f.fill=c))),a&&isNil(s[a])&&!isNil(u)&&(f[a]=u),f}function getBackgroundRectStyle(n){return deepMix({},{fill:"#CCD6EC",fillOpacity:.3},get(n,["background","style"]))}function splitPoints(n){var r=n.x,e=isArray$4(n.y)?n.y:[n.y];return e.map(function(a,o){return{x:isArray$4(r)?r[o]:r,y:a}})}var LineSymbols={line:function(n,r,e){return[["M",n-e,r],["L",n+e,r]]},dot:function(n,r,e){return[["M",n-e,r],["L",n+e,r]]},dash:function(n,r,e){return[["M",n-e,r],["L",n+e,r]]},smooth:function(n,r,e){return[["M",n-e,r],["A",e/2,e/2,0,1,1,n,r],["A",e/2,e/2,0,1,0,n+e,r]]},hv:function(n,r,e){return[["M",n-e-1,r-2.5],["L",n,r-2.5],["L",n,r+2.5],["L",n+e+1,r+2.5]]},vh:function(n,r,e){return[["M",n-e-1,r+2.5],["L",n,r+2.5],["L",n,r-2.5],["L",n+e+1,r-2.5]]},hvh:function(n,r,e){return[["M",n-(e+1),r+2.5],["L",n-e/2,r+2.5],["L",n-e/2,r-2.5],["L",n+e/2,r-2.5],["L",n+e/2,r+2.5],["L",n+e+1,r+2.5]]},vhv:function(n,r){return[["M",n-5,r+2.5],["L",n-5,r],["L",n,r],["L",n,r-3],["L",n,r+3],["L",n+6.5,r+3]]}};function getLineMarker(n,r){var e=n.color;return{symbol:LineSymbols[r],style:{lineWidth:2,r:6,stroke:e}}}function getShapeAttrs$1(n,r,e){for(var a=n.isStack,o=n.connectNulls,s=n.isInCircle,l=n.showSinglePoint,c=getStyle(n,!0,!1,"lineWidth"),u=getPathPoints(n.points,o,l),f=[],d=0,g=u.length;d<g;d++){var v=u[d];f=f.concat(getPath$3(v,s,a,r,e,c))}return c.path=f,c}function getSinglePath(n,r,e,a,o){if(n.length===1)return[["M",n[0].x,n[0].y-o.lineWidth/2],["L",n[0].x,n[0].y],["L",n[0].x,n[0].y+o.lineWidth/2]];var s;return e?(r&&n.length&&n.push({x:n[0].x,y:n[0].y}),s=getSplinePath$1(n,!1,a)):(s=getLinePath(n,!1),r&&s.push(["Z"])),s}function getRangePath(n,r,e,a,o,s){var l=[],c=[];each$1(n,function(d){var g=splitPoints(d);l.push(g[1]),c.push(g[0])});var u=getSinglePath(l,r,a,o,s),f=getSinglePath(c,r,a,o,s);return e?u:u.concat(f)}function getPath$3(n,r,e,a,o,s){if(n.length){var l=n[0];return isArray$4(l.y)?getRangePath(n,r,e,a,o,s):getSinglePath(n,r,a,o,s)}return[]}registerShapeFactory("line",{defaultShapeType:"line"});each$1(["line","dot","dash","smooth"],function(n){registerShape("line",n,{draw:function(r,e){var a=n==="smooth",o;if(a){var s=this.coordinate,l=s.start,c=s.end;o=[[l.x,c.y],[c.x,l.y]]}var u=getShapeAttrs$1(r,a,o),f=e.addShape({type:"path",attrs:u,name:"line",capture:!a});return f},getMarker:function(r){return getLineMarker(r,n)}})});var Util={getLegendItems,translate,rotate:rotate$1,zoom,transform:transform$4,getAngle:getAngle$1,getSectorPath,polarToCartesian,getDelegationObject,getTooltipItems,getMappingValue,getPath:getPath$3,getPathPoints},WHITE_COLORS={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},BLACK_COLORS={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},QUALITATIVE_10=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],QUALITATIVE_20=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],SINGLE_SEQUENCE=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],createDarkStyleSheet=function(n){n===void 0&&(n={});var r=n.paletteQualitative10,e=r===void 0?QUALITATIVE_10:r,a=n.paletteQualitative20,o=a===void 0?QUALITATIVE_20:a,s=n.brandColor,l=s===void 0?e[0]:s,c={backgroundColor:"#141414",brandColor:l,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:e,paletteQualitative20:o,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:SINGLE_SEQUENCE,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:BLACK_COLORS[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:BLACK_COLORS[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:WHITE_COLORS[85],axisTickLineBorderColor:BLACK_COLORS[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:BLACK_COLORS[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:BLACK_COLORS[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:BLACK_COLORS[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:BLACK_COLORS[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:QUALITATIVE_10[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:BLACK_COLORS[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:BLACK_COLORS[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:BLACK_COLORS[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:BLACK_COLORS[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:BLACK_COLORS[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:BLACK_COLORS[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:WHITE_COLORS[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:WHITE_COLORS[25],annotationArcBorderColor:BLACK_COLORS[15],annotationArcBorder:1,annotationLineBorderColor:BLACK_COLORS[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:BLACK_COLORS[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:BLACK_COLORS[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:BLACK_COLORS[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:BLACK_COLORS[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:BLACK_COLORS[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:WHITE_COLORS[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:BLACK_COLORS[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:WHITE_COLORS[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:BLACK_COLORS[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:QUALITATIVE_10[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:WHITE_COLORS[100],pointBorderOpacity:1,pointActiveBorderColor:BLACK_COLORS[100],pointSelectedBorder:2,pointSelectedBorderColor:BLACK_COLORS[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:QUALITATIVE_10[0],hollowPointBorderOpacity:.95,hollowPointFillColor:WHITE_COLORS[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:BLACK_COLORS[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:BLACK_COLORS[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:QUALITATIVE_10[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:QUALITATIVE_10[0],areaFillOpacity:.25,areaActiveFillColor:QUALITATIVE_10[0],areaActiveFillOpacity:.5,areaSelectedFillColor:QUALITATIVE_10[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:QUALITATIVE_10[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:BLACK_COLORS[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:BLACK_COLORS[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:QUALITATIVE_10[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:BLACK_COLORS[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:BLACK_COLORS[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:QUALITATIVE_10[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:WHITE_COLORS[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:BLACK_COLORS[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:BLACK_COLORS[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return __assign$8(__assign$8({},c),n)},antvDark=createDarkStyleSheet();function getPixelRatio$1(){return window?window.devicePixelRatio:1}function distance$1(n,r,e,a){var o=n-e,s=r-a;return Math.sqrt(o*o+s*s)}function inBox(n,r,e,a,o,s){return o>=n&&o<=n+e&&s>=r&&s<=r+a}function intersectRect(n,r){return!(r.minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)}function mergeRegion(n,r){return!n||!r?n||r:{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}}function isSamePoint$1(n,r){return n[0]===r[0]&&n[1]===r[1]}var regexLG$1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG$1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexPR$1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,regexColorStop$1=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function addStop$1(n,r){var e=n.match(regexColorStop$1);each$1(e,function(a){var o=a.split(":");r.addColorStop(o[0],o[1])})}function parseLineGradient$1(n,r,e){var a=regexLG$1.exec(e),o=parseFloat(a[1])%360*(Math.PI/180),s=a[2],l=r.getBBox(),c,u;o>=0&&o<1/2*Math.PI?(c={x:l.minX,y:l.minY},u={x:l.maxX,y:l.maxY}):1/2*Math.PI<=o&&o<Math.PI?(c={x:l.maxX,y:l.minY},u={x:l.minX,y:l.maxY}):Math.PI<=o&&o<3/2*Math.PI?(c={x:l.maxX,y:l.maxY},u={x:l.minX,y:l.minY}):(c={x:l.minX,y:l.maxY},u={x:l.maxX,y:l.minY});var f=Math.tan(o),d=f*f,g=(u.x-c.x+f*(u.y-c.y))/(d+1)+c.x,v=f*(u.x-c.x+f*(u.y-c.y))/(d+1)+c.y,p=n.createLinearGradient(c.x,c.y,g,v);return addStop$1(s,p),p}function parseRadialGradient$1(n,r,e){var a=regexRG$1.exec(e),o=parseFloat(a[1]),s=parseFloat(a[2]),l=parseFloat(a[3]),c=a[4];if(l===0){var u=c.match(regexColorStop$1);return u[u.length-1].split(":")[1]}var f=r.getBBox(),d=f.maxX-f.minX,g=f.maxY-f.minY,v=Math.sqrt(d*d+g*g)/2,p=n.createRadialGradient(f.minX+d*o,f.minY+g*s,0,f.minX+d/2,f.minY+g/2,l*v);return addStop$1(c,p),p}function parsePattern(n,r,e){if(r.get("patternSource")&&r.get("patternSource")===e)return r.get("pattern");var a,o,s=regexPR$1.exec(e),l=s[1],c=s[2];function u(){a=n.createPattern(o,l),r.set("pattern",a),r.set("patternSource",e)}switch(l){case"a":l="repeat";break;case"x":l="repeat-x";break;case"y":l="repeat-y";break;case"n":l="no-repeat";break;default:l="no-repeat"}return o=new Image,c.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=c,o.complete?u():(o.onload=u,o.src=o.src),a}function parseStyle(n,r,e){var a=r.getBBox();if(isNaN(a.x)||isNaN(a.y)||isNaN(a.width)||isNaN(a.height))return e;if(isString$1(e)){if(e[1]==="("||e[2]==="("){if(e[0]==="l")return parseLineGradient$1(n,r,e);if(e[0]==="r")return parseRadialGradient$1(n,r,e);if(e[0]==="p")return parsePattern(n,r,e)}return e}if(e instanceof CanvasPattern)return e}function parseRadius$2(n){var r=0,e=0,a=0,o=0;return isArray$4(n)?n.length===1?r=e=a=o=n[0]:n.length===2?(r=a=n[0],e=o=n[1]):n.length===3?(r=n[0],e=o=n[1],a=n[2]):(r=n[0],e=n[1],a=n[2],o=n[3]):r=e=a=o=n,[r,e,a,o]}function vMag(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function vRatio(n,r){return vMag(n)*vMag(r)?(n[0]*r[0]+n[1]*r[1])/(vMag(n)*vMag(r)):1}function vAngle(n,r){return(n[0]*r[1]<n[1]*r[0]?-1:1)*Math.acos(vRatio(n,r))}function getArcParams(n,r){var e=r[1],a=r[2],o=mod$1(toRadian(r[3]),Math.PI*2),s=r[4],l=r[5],c=n[0],u=n[1],f=r[6],d=r[7],g=Math.cos(o)*(c-f)/2+Math.sin(o)*(u-d)/2,v=-1*Math.sin(o)*(c-f)/2+Math.cos(o)*(u-d)/2,p=g*g/(e*e)+v*v/(a*a);p>1&&(e*=Math.sqrt(p),a*=Math.sqrt(p));var y=e*e*(v*v)+a*a*(g*g),m=y?Math.sqrt((e*e*(a*a)-y)/y):1;s===l&&(m*=-1),isNaN(m)&&(m=0);var x=a?m*e*v/a:0,A=e?m*-a*g/e:0,_=(c+f)/2+Math.cos(o)*x-Math.sin(o)*A,b=(u+d)/2+Math.sin(o)*x+Math.cos(o)*A,S=[(g-x)/e,(v-A)/a],C=[(-1*g-x)/e,(-1*v-A)/a],E=vAngle([1,0],S),T=vAngle(S,C);return vRatio(S,C)<=-1&&(T=Math.PI),vRatio(S,C)>=1&&(T=0),l===0&&T>0&&(T=T-2*Math.PI),l===1&&T<0&&(T=T+2*Math.PI),{cx:_,cy:b,rx:isSamePoint$1(n,[f,d])?0:e,ry:isSamePoint$1(n,[f,d])?0:a,startAngle:E,endAngle:E+T,xRotation:o,arcFlag:s,sweepFlag:l}}var sin=Math.sin,cos=Math.cos,atan2=Math.atan2,PI=Math.PI;function _addDefaultArrow(n,r,e,a,o,s,l){var c=r.stroke,u=r.lineWidth,f=e-o,d=a-s,g=atan2(d,f),v=new Path$2({type:"path",canvas:n.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*cos(PI/6)+","+10*sin(PI/6)+" L0,0 L"+10*cos(PI/6)+",-"+10*sin(PI/6),stroke:c,lineWidth:u}});v.translate(o,s),v.rotateAtPoint(o,s,g),n.set(l?"startArrowShape":"endArrowShape",v)}function _addCustomizedArrow(n,r,e,a,o,s,l){var c=r.startArrow,u=r.endArrow,f=r.stroke,d=r.lineWidth,g=l?c:u,v=g.d,p=g.fill,y=g.stroke,m=g.lineWidth,x=__rest$1(g,["d","fill","stroke","lineWidth"]),A=e-o,_=a-s,b=atan2(_,A);v&&(o=o-cos(b)*v,s=s-sin(b)*v);var S=new Path$2({type:"path",canvas:n.get("canvas"),isArrowShape:!0,attrs:__assign$8(__assign$8({},x),{stroke:y||f,lineWidth:m||d,fill:p})});S.translate(o,s),S.rotateAtPoint(o,s,b),n.set(l?"startArrowShape":"endArrowShape",S)}function getShortenOffset(n,r,e,a,o){var s=atan2(a-r,e-n);return{dx:cos(s)*o,dy:sin(s)*o}}function addStartArrow(n,r,e,a,o,s){typeof r.startArrow=="object"?_addCustomizedArrow(n,r,e,a,o,s,!0):r.startArrow?_addDefaultArrow(n,r,e,a,o,s,!0):n.set("startArrowShape",null)}function addEndArrow(n,r,e,a,o,s){typeof r.endArrow=="object"?_addCustomizedArrow(n,r,e,a,o,s,!1):r.endArrow?_addDefaultArrow(n,r,e,a,o,s,!1):n.set("startArrowShape",null)}var SHAPE_ATTRS_MAP={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function applyAttrsToContext(n,r){var e=r.attr();for(var a in e){var o=e[a],s=SHAPE_ATTRS_MAP[a]?SHAPE_ATTRS_MAP[a]:a;s==="matrix"&&o?n.transform(o[0],o[1],o[3],o[4],o[6],o[7]):s==="lineDash"&&n.setLineDash?isArray$4(o)&&n.setLineDash(o):(s==="strokeStyle"||s==="fillStyle"?o=parseStyle(n,r,o):s==="globalAlpha"&&(o=o*n.globalAlpha),n[s]=o)}}function drawChildren$1(n,r,e){for(var a=0;a<r.length;a++){var o=r[a];o.cfg.visible?o.draw(n,e):o.skipDraw()}}function checkRefresh(n,r,e){var a=n.get("refreshElements");each$1(a,function(o){if(o!==n)for(var s=o.cfg.parent;s&&s!==n&&!s.cfg.refresh;)s.cfg.refresh=!0,s=s.cfg.parent}),a[0]===n?setChildrenRefresh(r):checkChildrenRefresh(r,e)}function checkChildrenRefresh(n,r){for(var e=0;e<n.length;e++){var a=n[e];if(a.cfg.visible)if(a.cfg.hasChanged)a.cfg.refresh=!0,a.isGroup()&&setChildrenRefresh(a.cfg.children);else if(a.cfg.refresh)a.isGroup()&&checkChildrenRefresh(a.cfg.children,r);else{var o=checkElementRefresh(a,r);a.cfg.refresh=o,o&&a.isGroup()&&checkChildrenRefresh(a.cfg.children,r)}}}function clearChanged(n){for(var r=0;r<n.length;r++){var e=n[r];e.cfg.hasChanged=!1,e.isGroup()&&!e.destroyed&&clearChanged(e.cfg.children)}}function setChildrenRefresh(n,r){for(var e=0;e<n.length;e++){var a=n[e];a.cfg.visible&&(a.cfg.refresh=!0,a.isGroup()&&setChildrenRefresh(a.get("children")))}}function checkElementRefresh(n,r){var e=n.cfg.cacheCanvasBBox,a=n.cfg.isInView&&e&&intersectRect(e,r);return a}function drawPath(n,r,e,a){var o=e.path,s=e.startArrow,l=e.endArrow;if(o){var c=[0,0],u=[0,0],f={dx:0,dy:0};r.beginPath();for(var d=0;d<o.length;d++){var g=o[d],v=g[0];if(d===0&&s&&s.d){var p=n.getStartTangent();f=getShortenOffset(p[0][0],p[0][1],p[1][0],p[1][1],s.d)}else if(d===o.length-2&&o[d+1][0]==="Z"&&l&&l.d){var y=o[d+1];if(y[0]==="Z"){var p=n.getEndTangent();f=getShortenOffset(p[0][0],p[0][1],p[1][0],p[1][1],l.d)}}else if(d===o.length-1&&l&&l.d&&o[0]!=="Z"){var p=n.getEndTangent();f=getShortenOffset(p[0][0],p[0][1],p[1][0],p[1][1],l.d)}var m=f.dx,x=f.dy;switch(v){case"M":r.moveTo(g[1]-m,g[2]-x),u=[g[1],g[2]];break;case"L":r.lineTo(g[1]-m,g[2]-x);break;case"Q":r.quadraticCurveTo(g[1],g[2],g[3]-m,g[4]-x);break;case"C":r.bezierCurveTo(g[1],g[2],g[3],g[4],g[5]-m,g[6]-x);break;case"A":{var A=void 0;a?(A=a[d],A||(A=getArcParams(c,g),a[d]=A)):A=getArcParams(c,g);var _=A.cx,b=A.cy,S=A.rx,C=A.ry,E=A.startAngle,T=A.endAngle,w=A.xRotation,L=A.sweepFlag;if(r.ellipse)r.ellipse(_,b,S,C,w,E,T,1-L);else{var M=S>C?S:C,O=S>C?1:S/C,P=S>C?C/S:1;r.translate(_,b),r.rotate(w),r.scale(O,P),r.arc(0,0,M,E,T,1-L),r.scale(1/O,1/P),r.rotate(-w),r.translate(-_,-b)}break}case"Z":r.closePath();break}if(v==="Z")c=u;else{var N=g.length;c=[g[N-2],g[N-1]]}}}}function refreshElement$1(n,r){var e=n.get("canvas");e&&(r==="remove"&&(n._cacheCanvasBBox=n.get("cacheCanvasBBox")),n.get("hasChanged")||(n.set("hasChanged",!0),n.cfg.parent&&n.cfg.parent.get("hasChanged")||(e.refreshElement(n,r,e),e.get("autoDraw")&&e.draw())))}function getRefreshRegion(n){var r;if(n.destroyed)r=n._cacheCanvasBBox;else{var e=n.get("cacheCanvasBBox"),a=e&&!!(e.width&&e.height),o=n.getCanvasBBox(),s=o&&!!(o.width&&o.height);a&&s?r=mergeRegion(e,o):a?r=e:s&&(r=o)}return r}function getMergedRegion(n){if(!n.length)return null;var r=[],e=[],a=[],o=[];return each$1(n,function(s){var l=getRefreshRegion(s);l&&(r.push(l.minX),e.push(l.minY),a.push(l.maxX),o.push(l.maxY))}),{minX:min$2(r),minY:min$2(e),maxX:max$2(a),maxY:max$2(o)}}function mergeView(n,r){return!n||!r||!intersectRect(n,r)?null:{minX:Math.max(n.minX,r.minX),minY:Math.max(n.minY,r.minY),maxX:Math.min(n.maxX,r.maxX),maxY:Math.min(n.maxY,r.maxY)}}var Group$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.onCanvasChange=function(e){refreshElement$1(this,e)},r.prototype.getShapeBase=function(){return Shape$1},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(e,a){a&&(e.save(),applyAttrsToContext(e,a),a.createPath(e),e.restore(),e.clip(),a._afterDraw())},r.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,a=[],o=[];each$1(e,function(v){var p=v.cfg.cacheCanvasBBox;p&&v.cfg.isInView&&(a.push(p.minX,p.maxX),o.push(p.minY,p.maxY))});var s=null;if(a.length){var l=min$2(a),c=max$2(a),u=min$2(o),f=max$2(o);s={minX:l,minY:u,x:l,y:u,maxX:c,maxY:f,width:c-l,height:f-u};var d=this.cfg.canvas;if(d){var g=d.getViewRange();this.set("isInView",intersectRect(s,g))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",s)},r.prototype.draw=function(e,a){var o=this.cfg.children,s=a?this.cfg.refresh:!0;o.length&&s&&(e.save(),applyAttrsToContext(e,this),this._applyClip(e,this.getClip()),drawChildren$1(e,o,a),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(AbstractGroup),ShapeBase$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.getShapeBase=function(){return Shape$1},r.prototype.getGroupBase=function(){return Group$1},r.prototype.onCanvasChange=function(e){refreshElement$1(this,e)},r.prototype.calculateBBox=function(){var e=this.get("type"),a=this.getHitLineWidth(),o=getMethod(e),s=o(this),l=a/2,c=s.x-l,u=s.y-l,f=s.x+s.width+l,d=s.y+s.height+l;return{x:c,minX:c,y:u,minY:u,width:s.width+a,height:s.height+a,maxX:f,maxY:d}},r.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},r.prototype.isStroke=function(){return!!this.attrs.stroke},r.prototype._applyClip=function(e,a){a&&(e.save(),applyAttrsToContext(e,a),a.createPath(e),e.restore(),e.clip(),a._afterDraw())},r.prototype.draw=function(e,a){var o=this.cfg.clipShape;if(a){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var s=this.getCanvasBBox();if(!intersectRect(a,s)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),applyAttrsToContext(e,this),this._applyClip(e,o),this.drawPath(e),e.restore(),this._afterDraw()},r.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},r.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var a=this.getCanvasBBox(),o=intersectRect(a,e);this.set("isInView",o),o?this.set("cacheCanvasBBox",a):this.set("cacheCanvasBBox",null)}},r.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},r.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},r.prototype.fill=function(e){e.fill()},r.prototype.stroke=function(e){e.stroke()},r.prototype.strokeAndFill=function(e){var a=this.attrs,o=a.lineWidth,s=a.opacity,l=a.strokeOpacity,c=a.fillOpacity;this.isFill()&&(!isNil(c)&&c!==1?(e.globalAlpha=c,this.fill(e),e.globalAlpha=s):this.fill(e)),this.isStroke()&&o>0&&(!isNil(l)&&l!==1&&(e.globalAlpha=l),this.stroke(e)),this.afterDrawPath(e)},r.prototype.createPath=function(e){},r.prototype.afterDrawPath=function(e){},r.prototype.isInShape=function(e,a){var o=this.isStroke(),s=this.isFill(),l=this.getHitLineWidth();return this.isInStrokeOrPath(e,a,o,s,l)},r.prototype.isInStrokeOrPath=function(e,a,o,s,l){return!1},r.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},r}(AbstractShape),Circle$2=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,r:0})},r.prototype.isInStrokeOrPath=function(e,a,o,s,l){var c=this.attr(),u=c.x,f=c.y,d=c.r,g=l/2,v=distance$1(u,f,e,a);return s&&o?v<=d+g:s?v<=d:o?v>=d-g&&v<=d+g:!1},r.prototype.createPath=function(e){var a=this.attr(),o=a.x,s=a.y,l=a.r;e.beginPath(),e.arc(o,s,l,0,Math.PI*2,!1),e.closePath()},r}(ShapeBase$1);function ellipseDistance(n,r,e,a){return n/(e*e)+r/(a*a)}var Ellipse$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(e,a,o,s,l){var c=this.attr(),u=l/2,f=c.x,d=c.y,g=c.rx,v=c.ry,p=(e-f)*(e-f),y=(a-d)*(a-d);return s&&o?ellipseDistance(p,y,g+u,v+u)<=1:s?ellipseDistance(p,y,g,v)<=1:o?ellipseDistance(p,y,g-u,v-u)>=1&&ellipseDistance(p,y,g+u,v+u)<=1:!1},r.prototype.createPath=function(e){var a=this.attr(),o=a.x,s=a.y,l=a.rx,c=a.ry;if(e.beginPath(),e.ellipse)e.ellipse(o,s,l,c,0,0,Math.PI*2,!1);else{var u=l>c?l:c,f=l>c?1:l/c,d=l>c?c/l:1;e.save(),e.translate(o,s),e.scale(f,d),e.arc(0,0,u,0,Math.PI*2),e.restore(),e.closePath()}},r}(ShapeBase$1);function isCanvas(n){return n instanceof HTMLElement&&isString$1(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"}var ImageShape=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(e){this._setImage(e.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(e){var a=this,o=this.attrs;if(isString$1(e)){var s=new Image;s.onload=function(){if(a.destroyed)return!1;a.attr("img",s),a.set("loading",!1),a._afterLoading();var l=a.get("callback");l&&l.call(a)},s.crossOrigin="Anonymous",s.src=e,this.set("loading",!0)}else e instanceof Image?(o.width||(o.width=e.width),o.height||(o.height=e.height)):isCanvas(e)&&(o.width||(o.width=Number(e.getAttribute("width"))),o.height||(o.height,Number(e.getAttribute("height"))))},r.prototype.onAttrChange=function(e,a,o){n.prototype.onAttrChange.call(this,e,a,o),e==="img"&&this._setImage(a)},r.prototype.createPath=function(e){if(this.get("loading")){this.set("toDraw",!0),this.set("context",e);return}var a=this.attr(),o=a.x,s=a.y,l=a.width,c=a.height,u=a.sx,f=a.sy,d=a.swidth,g=a.sheight,v=a.img;(v instanceof Image||isCanvas(v))&&(!isNil(u)&&!isNil(f)&&!isNil(d)&&!isNil(g)?e.drawImage(v,u,f,d,g,o,s,l,c):e.drawImage(v,o,s,l,c))},r}(ShapeBase$1);function inLine(n,r,e,a,o,s,l){var c=Math.min(n,e),u=Math.max(n,e),f=Math.min(r,a),d=Math.max(r,a),g=o/2;return s>=c-g&&s<=u+g&&l>=f-g&&l<=d+g?LineUtil.pointToLine(n,r,e,a,s,l)<=o/2:!1}var Line$3=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this.setArrow()},r.prototype.onAttrChange=function(e,a,o){n.prototype.onAttrChange.call(this,e,a,o),this.setArrow()},r.prototype.setArrow=function(){var e=this.attr(),a=e.x1,o=e.y1,s=e.x2,l=e.y2,c=e.startArrow,u=e.endArrow;c&&addStartArrow(this,e,s,l,a,o),u&&addEndArrow(this,e,a,o,s,l)},r.prototype.isInStrokeOrPath=function(e,a,o,s,l){if(!o||!l)return!1;var c=this.attr(),u=c.x1,f=c.y1,d=c.x2,g=c.y2;return inLine(u,f,d,g,l,e,a)},r.prototype.createPath=function(e){var a=this.attr(),o=a.x1,s=a.y1,l=a.x2,c=a.y2,u=a.startArrow,f=a.endArrow,d={dx:0,dy:0},g={dx:0,dy:0};u&&u.d&&(d=getShortenOffset(o,s,l,c,a.startArrow.d)),f&&f.d&&(g=getShortenOffset(o,s,l,c,a.endArrow.d)),e.beginPath(),e.moveTo(o+d.dx,s+d.dy),e.lineTo(l-g.dx,c-g.dy)},r.prototype.afterDrawPath=function(e){var a=this.get("startArrowShape"),o=this.get("endArrowShape");a&&a.draw(e),o&&o.draw(e)},r.prototype.getTotalLength=function(){var e=this.attr(),a=e.x1,o=e.y1,s=e.x2,l=e.y2;return LineUtil.length(a,o,s,l)},r.prototype.getPoint=function(e){var a=this.attr(),o=a.x1,s=a.y1,l=a.x2,c=a.y2;return LineUtil.pointAt(o,s,l,c,e)},r}(ShapeBase$1),Symbols$1={circle:function(n,r,e){return[["M",n-e,r],["A",e,e,0,1,0,n+e,r],["A",e,e,0,1,0,n-e,r]]},square:function(n,r,e){return[["M",n-e,r-e],["L",n+e,r-e],["L",n+e,r+e],["L",n-e,r+e],["Z"]]},diamond:function(n,r,e){return[["M",n-e,r],["L",n,r-e],["L",n+e,r],["L",n,r+e],["Z"]]},triangle:function(n,r,e){var a=e*Math.sin(.3333333333333333*Math.PI);return[["M",n-e,r+a],["L",n,r-a],["L",n+e,r+a],["Z"]]},"triangle-down":function(n,r,e){var a=e*Math.sin(.3333333333333333*Math.PI);return[["M",n-e,r-a],["L",n+e,r-a],["L",n,r+a],["Z"]]}},Marker$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.initAttrs=function(e){this._resetParamsCache()},r.prototype._resetParamsCache=function(){this.set("paramsCache",{})},r.prototype.onAttrChange=function(e,a,o){n.prototype.onAttrChange.call(this,e,a,o),["symbol","x","y","r","radius"].indexOf(e)!==-1&&this._resetParamsCache()},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._getR=function(e){return isNil(e.r)?e.radius:e.r},r.prototype._getPath=function(){var e=this.attr(),a=e.x,o=e.y,s=e.symbol||"circle",l=this._getR(e),c,u;if(isFunction$1(s))c=s,u=c(a,o,l),u=pathToAbsolute(u);else{if(c=r.Symbols[s],!c)return console.warn(s+" marker is not supported."),null;u=c(a,o,l)}return u},r.prototype.createPath=function(e){var a=this._getPath(),o=this.get("paramsCache");drawPath(this,e,{path:a},o)},r.Symbols=Symbols$1,r}(ShapeBase$1);function isPointInPath(n,r,e){var a=getOffScreenContext();return n.createPath(a),a.isPointInPath(r,e)}var tolerance=1e-6;function dcmp(n){return Math.abs(n)<tolerance?0:n<0?-1:1}function onSegment(n,r,e){return(e[0]-n[0])*(r[1]-n[1])===(r[0]-n[0])*(e[1]-n[1])&&Math.min(n[0],r[0])<=e[0]&&e[0]<=Math.max(n[0],r[0])&&Math.min(n[1],r[1])<=e[1]&&e[1]<=Math.max(n[1],r[1])}function isInPolygon(n,r,e){var a=!1,o=n.length;if(o<=2)return!1;for(var s=0;s<o;s++){var l=n[s],c=n[(s+1)%o];if(onSegment(l,c,[r,e]))return!0;dcmp(l[1]-e)>0!=dcmp(c[1]-e)>0&&dcmp(r-(e-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(a=!a)}return a}function arc(n,r,e,a,o,s,l,c){var u=(Math.atan2(c-r,l-n)+Math.PI*2)%(Math.PI*2);if(u<a||u>o)return!1;var f={x:n+e*Math.cos(u),y:r+e*Math.sin(u)};return distance$1(f.x,f.y,l,c)<=s/2}var transform$3=transform$6;function hasArc(n){for(var r=!1,e=n.length,a=0;a<e;a++){var o=n[a],s=o[0];if(s==="C"||s==="A"||s==="Q"){r=!0;break}}return r}function isPointInStroke(n,r,e,a,o){for(var s=!1,l=r/2,c=0;c<n.length;c++){var u=n[c],f=u.currentPoint,d=u.params,g=u.prePoint,v=u.box;if(!(v&&!inBox(v.x-l,v.y-l,v.width+r,v.height+r,e,a))){switch(u.command){case"L":case"Z":s=inLine(g[0],g[1],f[0],f[1],r,e,a);break;case"Q":var p=QuadUtil.pointDistance(g[0],g[1],d[1],d[2],d[3],d[4],e,a);s=p<=r/2;break;case"C":var y=CubicUtil.pointDistance(g[0],g[1],d[1],d[2],d[3],d[4],d[5],d[6],e,a,o);s=y<=r/2;break;case"A":var m=u.arcParams,x=m.cx,A=m.cy,_=m.rx,b=m.ry,S=m.startAngle,C=m.endAngle,E=m.xRotation,T=[e,a,1],w=_>b?_:b,L=_>b?1:_/b,M=_>b?b/_:1,O=transform$3(null,[["t",-x,-A],["r",-E],["s",1/L,1/M]]);transformMat3$1(T,T,O),s=arc(0,0,w,S,C,r,T[0],T[1]);break}if(s)break}}return s}function extractPolygons(n){for(var r=n.length,e=[],a=[],o=[],s=0;s<r;s++){var l=n[s],c=l[0];c==="M"?(o.length&&(a.push(o),o=[]),o.push([l[1],l[2]])):c==="Z"?o.length&&(e.push(o),o=[]):o.push([l[1],l[2]])}return o.length>0&&a.push(o),{polygons:e,polylines:a}}const PathUtil=__assign$8({hasArc,extractPolygons,isPointInStroke},PathUtil$1);function isInPolygons(n,r,e){for(var a=!1,o=0;o<n.length;o++){var s=n[o];if(a=isInPolygon(s,r,e),a)break}return a}var Path$2=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},r.prototype.onAttrChange=function(e,a,o){n.prototype.onAttrChange.call(this,e,a,o),e==="path"&&this._setPathArr(a),this.setArrow()},r.prototype._setPathArr=function(e){this.attrs.path=pathToAbsolute(e);var a=PathUtil.hasArc(e);this.set("hasArc",a),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},r.prototype.getSegments=function(){var e=this.get("segements");return e||(e=getSegments(this.attr("path")),this.set("segments",e)),e},r.prototype.setArrow=function(){var e=this.attr(),a=e.startArrow,o=e.endArrow;if(a){var s=this.getStartTangent();addStartArrow(this,e,s[0][0],s[0][1],s[1][0],s[1][1])}if(o){var s=this.getEndTangent();addEndArrow(this,e,s[0][0],s[0][1],s[1][0],s[1][1])}},r.prototype.isInStrokeOrPath=function(e,a,o,s,l){var c=this.getSegments(),u=this.get("hasArc"),f=!1;if(o){var d=this.getTotalLength();f=PathUtil.isPointInStroke(c,l,e,a,d)}if(!f&&s)if(u)f=isPointInPath(this,e,a);else{var g=this.attr("path"),v=PathUtil.extractPolygons(g);f=isInPolygons(v.polygons,e,a)||isInPolygons(v.polylines,e,a)}return f},r.prototype.createPath=function(e){var a=this.attr(),o=this.get("paramsCache");drawPath(this,e,a,o)},r.prototype.afterDrawPath=function(e){var a=this.get("startArrowShape"),o=this.get("endArrowShape");a&&a.draw(e),o&&o.draw(e)},r.prototype.getTotalLength=function(){var e=this.get("totalLength");return isNil(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},r.prototype.getPoint=function(e){var a=this.get("tCache");a||(this._calculateCurve(),this._setTcache(),a=this.get("tCache"));var o,s,l=this.get("curve");if(!a||a.length===0)return l?{x:l[0][1],y:l[0][2]}:null;each$1(a,function(d,g){e>=d[0]&&e<=d[1]&&(o=(e-d[0])/(d[1]-d[0]),s=g)});var c=l[s];if(isNil(c)||isNil(s))return null;var u=c.length,f=l[s+1];return CubicUtil.pointAt(c[u-2],c[u-1],f[1],f[2],f[3],f[4],f[5],f[6],o)},r.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",PathUtil.pathToCurve(e))},r.prototype._setTcache=function(){var e=0,a=0,o=[],s,l,c,u,f=this.get("curve");if(f){if(each$1(f,function(d,g){c=f[g+1],u=d.length,c&&(e+=CubicUtil.length(d[u-2],d[u-1],c[1],c[2],c[3],c[4],c[5],c[6])||0)}),this.set("totalLength",e),e===0){this.set("tCache",[]);return}each$1(f,function(d,g){c=f[g+1],u=d.length,c&&(s=[],s[0]=a/e,l=CubicUtil.length(d[u-2],d[u-1],c[1],c[2],c[3],c[4],c[5],c[6]),a+=l||0,s[1]=a/e,o.push(s))}),this.set("tCache",o)}},r.prototype.getStartTangent=function(){var e=this.getSegments(),a;if(e.length>1){var o=e[0].currentPoint,s=e[1].currentPoint,l=e[1].startTangent;a=[],l?(a.push([o[0]-l[0],o[1]-l[1]]),a.push([o[0],o[1]])):(a.push([s[0],s[1]]),a.push([o[0],o[1]]))}return a},r.prototype.getEndTangent=function(){var e=this.getSegments(),a=e.length,o;if(a>1){var s=e[a-2].currentPoint,l=e[a-1].currentPoint,c=e[a-1].endTangent;o=[],c?(o.push([l[0]-c[0],l[1]-c[1]]),o.push([l[0],l[1]])):(o.push([s[0],s[1]]),o.push([l[0],l[1]]))}return o},r}(ShapeBase$1);function inPolyline(n,r,e,a,o){var s=n.length;if(s<2)return!1;for(var l=0;l<s-1;l++){var c=n[l][0],u=n[l][1],f=n[l+1][0],d=n[l+1][1];if(inLine(c,u,f,d,r,e,a))return!0}if(o){var g=n[0],v=n[s-1];if(inLine(g[0],g[1],v[0],v[1],r,e,a))return!0}return!1}var Polygon$2=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.isInStrokeOrPath=function(e,a,o,s,l){var c=this.attr().points,u=!1;return o&&(u=inPolyline(c,l,e,a,!0)),!u&&s&&(u=isInPolygon(c,e,a)),u},r.prototype.createPath=function(e){var a=this.attr(),o=a.points;if(!(o.length<2)){e.beginPath();for(var s=0;s<o.length;s++){var l=o[s];s===0?e.moveTo(l[0],l[1]):e.lineTo(l[0],l[1])}e.closePath()}},r}(ShapeBase$1),PolyLine=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(e){this.setArrow()},r.prototype.onAttrChange=function(e,a,o){n.prototype.onAttrChange.call(this,e,a,o),this.setArrow(),["points"].indexOf(e)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.setArrow=function(){var e=this.attr(),a=this.attrs,o=a.points,s=a.startArrow,l=a.endArrow,c=o.length,u=o[0][0],f=o[0][1],d=o[c-1][0],g=o[c-1][1];s&&addStartArrow(this,e,o[1][0],o[1][1],u,f),l&&addEndArrow(this,e,o[c-2][0],o[c-2][1],d,g)},r.prototype.isFill=function(){return!1},r.prototype.isInStrokeOrPath=function(e,a,o,s,l){if(!o||!l)return!1;var c=this.attr().points;return inPolyline(c,l,e,a,!1)},r.prototype.isStroke=function(){return!0},r.prototype.createPath=function(e){var a=this.attr(),o=a.points,s=a.startArrow,l=a.endArrow,c=o.length;if(!(o.length<2)){var u=o[0][0],f=o[0][1],d=o[c-1][0],g=o[c-1][1];if(s&&s.d){var v=getShortenOffset(u,f,o[1][0],o[1][1],s.d);u+=v.dx,f+=v.dy}if(l&&l.d){var v=getShortenOffset(o[c-2][0],o[c-2][1],d,g,l.d);d-=v.dx,g-=v.dy}e.beginPath(),e.moveTo(u,f);for(var p=0;p<c-1;p++){var y=o[p];e.lineTo(y[0],y[1])}e.lineTo(d,g)}},r.prototype.afterDrawPath=function(e){var a=this.get("startArrowShape"),o=this.get("endArrowShape");a&&a.draw(e),o&&o.draw(e)},r.prototype.getTotalLength=function(){var e=this.attr().points,a=this.get("totalLength");return isNil(a)?(this.set("totalLength",PolylineUtil.length(e)),this.get("totalLength")):a},r.prototype.getPoint=function(e){var a=this.attr().points,o=this.get("tCache");o||(this._setTcache(),o=this.get("tCache"));var s,l;return each$1(o,function(c,u){e>=c[0]&&e<=c[1]&&(s=(e-c[0])/(c[1]-c[0]),l=u)}),LineUtil.pointAt(a[l][0],a[l][1],a[l+1][0],a[l+1][1],s)},r.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var a=this.getTotalLength();if(!(a<=0)){var o=0,s=[],l,c;each$1(e,function(u,f){e[f+1]&&(l=[],l[0]=o/a,c=LineUtil.length(u[0],u[1],e[f+1][0],e[f+1][1]),o+=c,l[1]=o/a,s.push(l))}),this.set("tCache",s)}}},r.prototype.getStartTangent=function(){var e=this.attr().points,a=[];return a.push([e[1][0],e[1][1]]),a.push([e[0][0],e[0][1]]),a},r.prototype.getEndTangent=function(){var e=this.attr().points,a=e.length-1,o=[];return o.push([e[a-1][0],e[a-1][1]]),o.push([e[a][0],e[a][1]]),o},r}(ShapeBase$1);function inRect(n,r,e,a,o,s,l){var c=o/2;return inBox(n-c,r-c,e,o,s,l)||inBox(n+e-c,r-c,o,a,s,l)||inBox(n+c,r+a-c,e,o,s,l)||inBox(n-c,r+c,o,a,s,l)}function rectWithRadius(n,r,e,a,o,s,l,c){return inLine(n+o,r,n+e-o,r,s,l,c)||inLine(n+e,r+o,n+e,r+a-o,s,l,c)||inLine(n+e-o,r+a,n+o,r+a,s,l,c)||inLine(n,r+a-o,n,r+o,s,l,c)||arc(n+e-o,r+o,o,1.5*Math.PI,2*Math.PI,s,l,c)||arc(n+e-o,r+a-o,o,0,.5*Math.PI,s,l,c)||arc(n+o,r+a-o,o,.5*Math.PI,Math.PI,s,l,c)||arc(n+o,r+o,o,Math.PI,1.5*Math.PI,s,l,c)}var Rect$2=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.isInStrokeOrPath=function(e,a,o,s,l){var c=this.attr(),u=c.x,f=c.y,d=c.width,g=c.height,v=c.radius;if(v){var y=!1;return o&&(y=rectWithRadius(u,f,d,g,v,l,e,a)),!y&&s&&(y=isPointInPath(this,e,a)),y}else{var p=l/2;if(s&&o)return inBox(u-p,f-p,d+p,g+p,e,a);if(s)return inBox(u,f,d,g,e,a);if(o)return inRect(u,f,d,g,l,e,a)}},r.prototype.createPath=function(e){var a=this.attr(),o=a.x,s=a.y,l=a.width,c=a.height,u=a.radius;if(e.beginPath(),u===0)e.rect(o,s,l,c);else{var f=parseRadius$2(u),d=f[0],g=f[1],v=f[2],p=f[3];e.moveTo(o+d,s),e.lineTo(o+l-g,s),g!==0&&e.arc(o+l-g,s+g,g,-Math.PI/2,0),e.lineTo(o+l,s+c-v),v!==0&&e.arc(o+l-v,s+c-v,v,0,Math.PI/2),e.lineTo(o+p,s+c),p!==0&&e.arc(o+p,s+c-p,p,Math.PI/2,Math.PI),e.lineTo(o,s+d),d!==0&&e.arc(o+d,s+d,d,Math.PI,Math.PI*1.5),e.closePath()}},r}(ShapeBase$1),Text$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.isOnlyHitBox=function(){return!0},r.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},r.prototype._assembleFont=function(){var e=this.attrs;e.font=assembleFont(e)},r.prototype._setText=function(e){var a=null;isString$1(e)&&e.indexOf(`
`)!==-1&&(a=e.split(`
`)),this.set("textArr",a)},r.prototype.onAttrChange=function(e,a,o){n.prototype.onAttrChange.call(this,e,a,o),e.startsWith("font")&&this._assembleFont(),e==="text"&&this._setText(a)},r.prototype._getSpaceingY=function(){var e=this.attrs,a=e.lineHeight,o=e.fontSize*1;return a?a-o:o*.14},r.prototype._drawTextArr=function(e,a,o){var s=this.attrs,l=s.textBaseline,c=s.x,u=s.y,f=s.fontSize*1,d=this._getSpaceingY(),g=getTextHeight(s.text,s.fontSize,s.lineHeight),v;each$1(a,function(p,y){v=u+y*(d+f)-g+f,l==="middle"&&(v+=g-f-(g-f)/2),l==="top"&&(v+=g-f),isNil(p)||(o?e.fillText(p,c,v):e.strokeText(p,c,v))})},r.prototype._drawText=function(e,a){var o=this.attr(),s=o.x,l=o.y,c=this.get("textArr");if(c)this._drawTextArr(e,c,a);else{var u=o.text;isNil(u)||(a?e.fillText(u,s,l):e.strokeText(u,s,l))}},r.prototype.strokeAndFill=function(e){var a=this.attrs,o=a.lineWidth,s=a.opacity,l=a.strokeOpacity,c=a.fillOpacity;this.isStroke()&&o>0&&(!isNil(l)&&l!==1&&(e.globalAlpha=s),this.stroke(e)),this.isFill()&&(!isNil(c)&&c!==1?(e.globalAlpha=c,this.fill(e),e.globalAlpha=s):this.fill(e)),this.afterDrawPath(e)},r.prototype.fill=function(e){this._drawText(e,!0)},r.prototype.stroke=function(e){this._drawText(e,!1)},r}(ShapeBase$1);function invertFromMatrix(n,r){if(r){var e=invert$1(r);return multiplyVec2$1(e,n)}return n}function getRefXY(n,r,e){var a=n.getTotalMatrix();if(a){var o=invertFromMatrix([r,e,1],a),s=o[0],l=o[1];return[s,l]}return[r,e]}function preTest(n,r,e){if(n.isCanvas&&n.isCanvas())return!0;if(!isAllowCapture(n)||n.cfg.isInView===!1)return!1;if(n.cfg.clipShape){var a=getRefXY(n,r,e),o=a[0],s=a[1];if(n.isClipped(o,s))return!1}var l=n.cfg.cacheCanvasBBox||n.getCanvasBBox();return r>=l.minX&&r<=l.maxX&&e>=l.minY&&e<=l.maxY}function getShape(n,r,e){if(!preTest(n,r,e))return null;for(var a=null,o=n.getChildren(),s=o.length,l=s-1;l>=0;l--){var c=o[l];if(c.isGroup())a=getShape(c,r,e);else if(preTest(c,r,e)){var u=c,f=getRefXY(c,r,e),d=f[0],g=f[1];u.isInShape(d,g)&&(a=c)}if(a)break}return a}var Canvas$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},r.prototype.onCanvasChange=function(e){(e==="attr"||e==="sort"||e==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},r.prototype.getShapeBase=function(){return Shape$1},r.prototype.getGroupBase=function(){return Group$1},r.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||getPixelRatio$1();return e>=1?Math.ceil(e):1},r.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},r.prototype.createDom=function(){var e=document.createElement("canvas"),a=e.getContext("2d");return this.set("context",a),e},r.prototype.setDOMSize=function(e,a){n.prototype.setDOMSize.call(this,e,a);var o=this.get("context"),s=this.get("el"),l=this.getPixelRatio();s.width=l*e,s.height=l*a,l>1&&o.scale(l,l)},r.prototype.clear=function(){n.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),a=this.get("el");e.clearRect(0,0,a.width,a.height)},r.prototype.getShape=function(e,a){var o;return this.get("quickHit")?o=getShape(this,e,a):o=n.prototype.getShape.call(this,e,a,null),o},r.prototype._getRefreshRegion=function(){var e=this.get("refreshElements"),a=this.getViewRange(),o;if(e.length&&e[0]===this)o=a;else if(o=getMergedRegion(e),o){o.minX=Math.floor(o.minX),o.minY=Math.floor(o.minY),o.maxX=Math.ceil(o.maxX),o.maxY=Math.ceil(o.maxY),o.maxY+=1;var s=this.get("clipView");s&&(o=mergeView(o,a))}return o},r.prototype.refreshElement=function(e){var a=this.get("refreshElements");a.push(e)},r.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(cancelAnimationFrame$2(e),this.set("drawFrame",null),this.set("refreshElements",[]))},r.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},r.prototype._drawAll=function(){var e=this.get("context"),a=this.get("el"),o=this.getChildren();e.clearRect(0,0,a.width,a.height),applyAttrsToContext(e,this),drawChildren$1(e,o),this.set("refreshElements",[])},r.prototype._drawRegion=function(){var e=this.get("context"),a=this.get("refreshElements"),o=this.getChildren(),s=this._getRefreshRegion();s?(e.clearRect(s.minX,s.minY,s.maxX-s.minX,s.maxY-s.minY),e.save(),e.beginPath(),e.rect(s.minX,s.minY,s.maxX-s.minX,s.maxY-s.minY),e.clip(),applyAttrsToContext(e,this),checkRefresh(this,o,s),drawChildren$1(e,o,s),e.restore()):a.length&&clearChanged(a),each$1(a,function(l){l.get("hasChanged")&&l.set("hasChanged",!1)}),this.set("refreshElements",[])},r.prototype._startDraw=function(){var e=this,a=this.get("drawFrame");a||(a=requestAnimationFrame$2(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)}),this.set("drawFrame",a))},r.prototype.skipDraw=function(){},r.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},r}(Canvas$2),version$1="0.5.12";const CanvasEngine=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:Canvas$2,AbstractGroup,AbstractShape,Base,Canvas:Canvas$1,Event:GraphEvent,Group:Group$1,PathUtil:PathUtil$1,Shape:Shape$1,assembleFont,getArcParams,getBBoxMethod:getMethod,getOffScreenContext,getTextHeight,invert:invert$1,isAllowCapture,multiplyVec2:multiplyVec2$1,registerBBox:register,registerEasing,version:version$1},Symbol.toStringTag,{value:"Module"}));var SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function createSVGElement(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function createDom(n){var r=SHAPE_TO_TAGS[n.type],e=n.getParent();if(!r)throw new Error("the type "+n.type+" is not supported by svg");var a=createSVGElement(r);if(n.get("id")&&(a.id=n.get("id")),n.set("el",a),n.set("attrs",{}),e){var o=e.get("el");o||(o=e.createDom(),e.set("el",o)),o.appendChild(a)}return a}function sortDom(n,r){var e=n.get("el"),a=toArray(e.children).sort(r),o=document.createDocumentFragment();a.forEach(function(s){o.appendChild(s)}),e.appendChild(o)}function moveTo(n,r){var e=n.parentNode,a=Array.from(e.childNodes).filter(function(c){return c.nodeType===1&&c.nodeName.toLowerCase()!=="defs"}),o=a[r],s=a.indexOf(n);if(o){if(s>r)e.insertBefore(n,o);else if(s<r){var l=a[r+1];l?e.insertBefore(n,l):e.appendChild(n)}}else e.appendChild(n)}function setShadow(n,r){var e=n.cfg.el,a=n.attr(),o={dx:a.shadowOffsetX,dy:a.shadowOffsetY,blur:a.shadowBlur,color:a.shadowColor};if(!o.dx&&!o.dy&&!o.blur&&!o.color)e.removeAttribute("filter");else{var s=r.find("filter",o);s||(s=r.addShadow(o)),e.setAttribute("filter","url(#"+s+")")}}function setTransform(n){var r=n.attr().matrix;if(r){for(var e=n.cfg.el,a=[],o=0;o<9;o+=3)a.push(r[o]+","+r[o+1]);a=a.join(","),a.indexOf("NaN")===-1?e.setAttribute("transform","matrix("+a+")"):console.warn("invalid matrix:",r)}}function setClip(n,r){var e=n.getClip(),a=n.get("el");if(!e)a.removeAttribute("clip-path");else if(e&&!a.hasAttribute("clip-path")){createDom(e),e.createPath(r);var o=r.addClip(e);a.setAttribute("clip-path","url(#"+o+")")}}function drawChildren(n,r){r.forEach(function(e){e.draw(n)})}function refreshElement(n,r){var e=n.get("canvas");if(e&&e.get("autoDraw")){var a=e.get("context"),o=n.getParent(),s=o?o.getChildren():[e],l=n.get("el");if(r==="remove"){var c=n.get("isClipShape");if(c){var u=l&&l.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else l&&l.parentNode&&l.parentNode.removeChild(l)}else if(r==="show")l.setAttribute("visibility","visible");else if(r==="hide")l.setAttribute("visibility","hidden");else if(r==="zIndex")moveTo(l,s.indexOf(n));else if(r==="sort"){var d=n.get("children");d&&d.length&&sortDom(n,function(g,v){return d.indexOf(g)-d.indexOf(v)?1:0})}else r==="clear"?l&&(l.innerHTML=""):r==="matrix"?setTransform(n):r==="clip"?setClip(n,a):r==="attr"||r==="add"&&n.draw(a)}}var Group=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.isEntityGroup=function(){return!0},r.prototype.createDom=function(){var e=createSVGElement("g");this.set("el",e);var a=this.getParent();if(a){var o=a.get("el");o||(o=a.createDom(),a.set("el",o)),o.appendChild(e)}return e},r.prototype.afterAttrsChange=function(e){n.prototype.afterAttrsChange.call(this,e);var a=this.get("canvas");if(a&&a.get("autoDraw")){var o=a.get("context");this.createPath(o,e)}},r.prototype.onCanvasChange=function(e){refreshElement(this,e)},r.prototype.getShapeBase=function(){return Shape},r.prototype.getGroupBase=function(){return r},r.prototype.draw=function(e){var a=this.getChildren(),o=this.get("el");this.get("destroyed")?o&&o.parentNode.removeChild(o):(o||this.createDom(),setClip(this,e),this.createPath(e),a.length&&drawChildren(e,a))},r.prototype.createPath=function(e,a){var o=this.attr(),s=this.get("el");each$1(a||o,function(l,c){SVG_ATTR_MAP[c]&&s.setAttribute(SVG_ATTR_MAP[c],l)}),setTransform(this)},r}(AbstractGroup),ShapeBase=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.afterAttrsChange=function(e){n.prototype.afterAttrsChange.call(this,e);var a=this.get("canvas");if(a&&a.get("autoDraw")){var o=a.get("context");this.draw(o,e)}},r.prototype.getShapeBase=function(){return Shape},r.prototype.getGroupBase=function(){return Group},r.prototype.onCanvasChange=function(e){refreshElement(this,e)},r.prototype.calculateBBox=function(){var e=this.get("el"),a=null;if(e)a=e.getBBox();else{var o=getMethod(this.get("type"));o&&(a=o(this))}if(a){var s=a.x,l=a.y,c=a.width,u=a.height,f=this.getHitLineWidth(),d=f/2,g=s-d,v=l-d,p=s+c+d,y=l+u+d;return{x:g,y:v,minX:g,minY:v,maxX:p,maxY:y,width:c+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},r.prototype.isFill=function(){var e=this.attr(),a=e.fill,o=e.fillStyle;return(a||o||this.isClipShape())&&this.canFill},r.prototype.isStroke=function(){var e=this.attr(),a=e.stroke,o=e.strokeStyle;return(a||o)&&this.canStroke},r.prototype.draw=function(e,a){var o=this.get("el");this.get("destroyed")?o&&o.parentNode.removeChild(o):(o||createDom(this),setClip(this,e),this.createPath(e,a),this.shadow(e,a),this.strokeAndFill(e,a),this.transform(a))},r.prototype.createPath=function(e,a){},r.prototype.strokeAndFill=function(e,a){var o=a||this.attr(),s=o.fill,l=o.fillStyle,c=o.stroke,u=o.strokeStyle,f=o.fillOpacity,d=o.strokeOpacity,g=o.lineWidth,v=this.get("el");this.canFill&&(a?"fill"in o?this._setColor(e,"fill",s):"fillStyle"in o&&this._setColor(e,"fill",l):this._setColor(e,"fill",s||l),f&&v.setAttribute(SVG_ATTR_MAP.fillOpacity,f)),this.canStroke&&g>0&&(a?"stroke"in o?this._setColor(e,"stroke",c):"strokeStyle"in o&&this._setColor(e,"stroke",u):this._setColor(e,"stroke",c||u),d&&v.setAttribute(SVG_ATTR_MAP.strokeOpacity,d),g&&v.setAttribute(SVG_ATTR_MAP.lineWidth,g))},r.prototype._setColor=function(e,a,o){var s=this.get("el");if(!o){s.setAttribute(SVG_ATTR_MAP[a],"none");return}if(o=o.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(o)){var l=e.find("gradient",o);l||(l=e.addGradient(o)),s.setAttribute(SVG_ATTR_MAP[a],"url(#"+l+")")}else if(/^[p,P]{1}[\s]*\(/.test(o)){var l=e.find("pattern",o);l||(l=e.addPattern(o)),s.setAttribute(SVG_ATTR_MAP[a],"url(#"+l+")")}else s.setAttribute(SVG_ATTR_MAP[a],o)},r.prototype.shadow=function(e,a){var o=this.attr(),s=a||o,l=s.shadowOffsetX,c=s.shadowOffsetY,u=s.shadowBlur,f=s.shadowColor;(l||c||u||f)&&setShadow(this,e)},r.prototype.transform=function(e){var a=this.attr(),o=(e||a).matrix;o&&setTransform(this)},r.prototype.isInShape=function(e,a){return this.isPointInPath(e,a)},r.prototype.isPointInPath=function(e,a){var o=this.get("el"),s=this.get("canvas"),l=s.get("el").getBoundingClientRect(),c=e+l.left,u=a+l.top,f=document.elementFromPoint(c,u);return!!(f&&f.isEqualNode(o))},r.prototype.getHitLineWidth=function(){var e=this.attrs,a=e.lineWidth,o=e.lineAppendWidth;return this.isStroke()?a+o:0},r}(AbstractShape),Circle$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,r:0})},r.prototype.createPath=function(e,a){var o=this.attr(),s=this.get("el");each$1(a||o,function(l,c){c==="x"||c==="y"?s.setAttribute("c"+c,l):SVG_ATTR_MAP[c]&&s.setAttribute(SVG_ATTR_MAP[c],l)})},r}(ShapeBase),Dom=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return r.prototype.createPath=function(e,a){var o=this.attr(),s=this.get("el");if(each$1(a||o,function(f,d){SVG_ATTR_MAP[d]&&s.setAttribute(SVG_ATTR_MAP[d],f)}),typeof o.html=="function"){var l=o.html.call(this,o);if(l instanceof Element||l instanceof HTMLDocument){for(var c=s.childNodes,u=c.length-1;u>=0;u--)s.removeChild(c[u]);s.appendChild(l)}else s.innerHTML=l}else s.innerHTML=o.html},r}(ShapeBase),Ellipse=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,rx:0,ry:0})},r.prototype.createPath=function(e,a){var o=this.attr(),s=this.get("el");each$1(a||o,function(l,c){c==="x"||c==="y"?s.setAttribute("c"+c,l):SVG_ATTR_MAP[c]&&s.setAttribute(SVG_ATTR_MAP[c],l)})},r}(ShapeBase),Image$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,width:0,height:0})},r.prototype.createPath=function(e,a){var o=this,s=this.attr(),l=this.get("el");each$1(a||s,function(c,u){u==="img"?o._setImage(s.img):SVG_ATTR_MAP[u]&&l.setAttribute(SVG_ATTR_MAP[u],c)})},r.prototype.setAttr=function(e,a){this.attrs[e]=a,e==="img"&&this._setImage(a)},r.prototype._setImage=function(e){var a=this.attr(),o=this.get("el");if(isString$1(e))o.setAttribute("href",e);else if(e instanceof window.Image)a.width||(o.setAttribute("width",e.width),this.attr("width",e.width)),a.height||(o.setAttribute("height",e.height),this.attr("height",e.height)),o.setAttribute("href",e.src);else if(e instanceof HTMLElement&&isString$1(e.nodeName)&&e.nodeName.toUpperCase()==="CANVAS")o.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var s=document.createElement("canvas");s.setAttribute("width",""+e.width),s.setAttribute("height",""+e.height),s.getContext("2d").putImageData(e,0,0),a.width||(o.setAttribute("width",""+e.width),this.attr("width",e.width)),a.height||(o.setAttribute("height",""+e.height),this.attr("height",e.height)),o.setAttribute("href",s.toDataURL())}},r}(ShapeBase),Line$2=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.createPath=function(e,a){var o=this.attr(),s=this.get("el");each$1(a||o,function(l,c){if(c==="startArrow"||c==="endArrow")if(l){var u=isObject$1(l)?e.addArrow(o,SVG_ATTR_MAP[c]):e.getDefaultArrow(o,SVG_ATTR_MAP[c]);s.setAttribute(SVG_ATTR_MAP[c],"url(#"+u+")")}else s.removeAttribute(SVG_ATTR_MAP[c]);else SVG_ATTR_MAP[c]&&s.setAttribute(SVG_ATTR_MAP[c],l)})},r.prototype.getTotalLength=function(){var e=this.attr(),a=e.x1,o=e.y1,s=e.x2,l=e.y2;return LineUtil.length(a,o,s,l)},r.prototype.getPoint=function(e){var a=this.attr(),o=a.x1,s=a.y1,l=a.x2,c=a.y2;return LineUtil.pointAt(o,s,l,c,e)},r}(ShapeBase),Symbols={circle:function(n,r,e){return[["M",n,r],["m",-e,0],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0]]},square:function(n,r,e){return[["M",n-e,r-e],["L",n+e,r-e],["L",n+e,r+e],["L",n-e,r+e],["Z"]]},diamond:function(n,r,e){return[["M",n-e,r],["L",n,r-e],["L",n+e,r],["L",n,r+e],["Z"]]},triangle:function(n,r,e){var a=e*Math.sin(.3333333333333333*Math.PI);return[["M",n-e,r+a],["L",n,r-a],["L",n+e,r+a],["z"]]},triangleDown:function(n,r,e){var a=e*Math.sin(.3333333333333333*Math.PI);return[["M",n-e,r-a],["L",n+e,r-a],["L",n,r+a],["Z"]]}};const symbolsFactory={get:function(n){return Symbols[n]},register:function(n,r){Symbols[n]=r},remove:function(n){delete Symbols[n]},getAll:function(){return Symbols}};var Marker=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return r.prototype.createPath=function(e){var a=this.get("el");a.setAttribute("d",this._assembleMarker())},r.prototype._assembleMarker=function(){var e=this._getPath();return isArray$4(e)?e.map(function(a){return a.join(" ")}).join(""):e},r.prototype._getPath=function(){var e=this.attr(),a=e.x,o=e.y,s=e.r||e.radius,l=e.symbol||"circle",c;return isFunction$1(l)?c=l:c=symbolsFactory.get(l),c?c(a,o,s):(console.warn(c+" symbol is not exist."),null)},r.symbolsFactory=symbolsFactory,r}(ShapeBase),Path$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{startArrow:!1,endArrow:!1})},r.prototype.createPath=function(e,a){var o=this,s=this.attr(),l=this.get("el");each$1(a||s,function(c,u){if(u==="path"&&isArray$4(c))l.setAttribute("d",o._formatPath(c));else if(u==="startArrow"||u==="endArrow")if(c){var f=isObject$1(c)?e.addArrow(s,SVG_ATTR_MAP[u]):e.getDefaultArrow(s,SVG_ATTR_MAP[u]);l.setAttribute(SVG_ATTR_MAP[u],"url(#"+f+")")}else l.removeAttribute(SVG_ATTR_MAP[u]);else SVG_ATTR_MAP[u]&&l.setAttribute(SVG_ATTR_MAP[u],c)})},r.prototype._formatPath=function(e){var a=e.map(function(o){return o.join(" ")}).join("");return~a.indexOf("NaN")?"":a},r.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},r.prototype.getPoint=function(e){var a=this.get("el"),o=this.getTotalLength();if(o===0)return null;var s=a?a.getPointAtLength(e*o):null;return s?{x:s.x,y:s.y}:null},r}(ShapeBase),Polygon$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return r.prototype.createPath=function(e,a){var o=this.attr(),s=this.get("el");each$1(a||o,function(l,c){c==="points"&&isArray$4(l)&&l.length>=2?s.setAttribute("points",l.map(function(u){return u[0]+","+u[1]}).join(" ")):SVG_ATTR_MAP[c]&&s.setAttribute(SVG_ATTR_MAP[c],l)})},r}(ShapeBase),Polyline=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{startArrow:!1,endArrow:!1})},r.prototype.onAttrChange=function(e,a,o){n.prototype.onAttrChange.call(this,e,a,o),["points"].indexOf(e)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.createPath=function(e,a){var o=this.attr(),s=this.get("el");each$1(a||o,function(l,c){c==="points"&&isArray$4(l)&&l.length>=2?s.setAttribute("points",l.map(function(u){return u[0]+","+u[1]}).join(" ")):SVG_ATTR_MAP[c]&&s.setAttribute(SVG_ATTR_MAP[c],l)})},r.prototype.getTotalLength=function(){var e=this.attr().points,a=this.get("totalLength");return isNil(a)?(this.set("totalLength",PolylineUtil.length(e)),this.get("totalLength")):a},r.prototype.getPoint=function(e){var a=this.attr().points,o=this.get("tCache");o||(this._setTcache(),o=this.get("tCache"));var s,l;return each$1(o,function(c,u){e>=c[0]&&e<=c[1]&&(s=(e-c[0])/(c[1]-c[0]),l=u)}),LineUtil.pointAt(a[l][0],a[l][1],a[l+1][0],a[l+1][1],s)},r.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var a=this.getTotalLength();if(!(a<=0)){var o=0,s=[],l,c;each$1(e,function(u,f){e[f+1]&&(l=[],l[0]=o/a,c=LineUtil.length(u[0],u[1],e[f+1][0],e[f+1][1]),o+=c,l[1]=o/a,s.push(l))}),this.set("tCache",s)}}},r.prototype.getStartTangent=function(){var e=this.attr().points,a=[];return a.push([e[1][0],e[1][1]]),a.push([e[0][0],e[0][1]]),a},r.prototype.getEndTangent=function(){var e=this.attr().points,a=e.length-1,o=[];return o.push([e[a-1][0],e[a-1][1]]),o.push([e[a][0],e[a][1]]),o},r}(ShapeBase);function parseRadius$1(n){var r=0,e=0,a=0,o=0;return isArray$4(n)?n.length===1?r=e=a=o=n[0]:n.length===2?(r=a=n[0],e=o=n[1]):n.length===3?(r=n[0],e=o=n[1],a=n[2]):(r=n[0],e=n[1],a=n[2],o=n[3]):r=e=a=o=n,{r1:r,r2:e,r3:a,r4:o}}var Rect$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.createPath=function(e,a){var o=this,s=this.attr(),l=this.get("el"),c=!1,u=["x","y","width","height","radius"];each$1(a||s,function(f,d){u.indexOf(d)!==-1&&!c?(l.setAttribute("d",o._assembleRect(s)),c=!0):u.indexOf(d)===-1&&SVG_ATTR_MAP[d]&&l.setAttribute(SVG_ATTR_MAP[d],f)})},r.prototype._assembleRect=function(e){var a=e.x,o=e.y,s=e.width,l=e.height,c=e.radius;if(!c)return"M "+a+","+o+" l "+s+",0 l 0,"+l+" l"+-s+" 0 z";var u=parseRadius$1(c);isArray$4(c)?c.length===1?u.r1=u.r2=u.r3=u.r4=c[0]:c.length===2?(u.r1=u.r3=c[0],u.r2=u.r4=c[1]):c.length===3?(u.r1=c[0],u.r2=u.r4=c[1],u.r3=c[2]):(u.r1=c[0],u.r2=c[1],u.r3=c[2],u.r4=c[3]):u.r1=u.r2=u.r3=u.r4=c;var f=[["M "+(a+u.r1)+","+o],["l "+(s-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(l-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-s)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-l)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},r}(ShapeBase),LETTER_SPACING=.3,BASELINE_MAP={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},BASELINE_MAP_FOR_FIREFOX={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ANCHOR_MAP={left:"left",start:"left",center:"middle",right:"end",end:"end"},Text=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return r.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return __assign$8(__assign$8({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.createPath=function(e,a){var o=this,s=this.attr(),l=this.get("el");this._setFont(),each$1(a||s,function(c,u){u==="text"?o._setText(""+c):u==="matrix"&&c?setTransform(o):SVG_ATTR_MAP[u]&&l.setAttribute(SVG_ATTR_MAP[u],c)}),l.setAttribute("paint-order","stroke"),l.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},r.prototype._setFont=function(){var e=this.get("el"),a=this.attr(),o=a.textBaseline,s=a.textAlign,l=detect();l&&l.name==="firefox"?e.setAttribute("dominant-baseline",BASELINE_MAP_FOR_FIREFOX[o]||"alphabetic"):e.setAttribute("alignment-baseline",BASELINE_MAP[o]||"baseline"),e.setAttribute("text-anchor",ANCHOR_MAP[s]||"left")},r.prototype._setText=function(e){var a=this.get("el"),o=this.attr(),s=o.x,l=o.textBaseline,c=l===void 0?"bottom":l;if(!e)a.innerHTML="";else if(~e.indexOf(`
`)){var u=e.split(`
`),f=u.length-1,d="";each$1(u,function(g,v){v===0?c==="alphabetic"?d+='<tspan x="'+s+'" dy="'+-f+'em">'+g+"</tspan>":c==="top"?d+='<tspan x="'+s+'" dy="0.9em">'+g+"</tspan>":c==="middle"?d+='<tspan x="'+s+'" dy="'+-(f-1)/2+'em">'+g+"</tspan>":c==="bottom"?d+='<tspan x="'+s+'" dy="-'+(f+LETTER_SPACING)+'em">'+g+"</tspan>":c==="hanging"&&(d+='<tspan x="'+s+'" dy="'+(-(f-1)-LETTER_SPACING)+'em">'+g+"</tspan>"):d+='<tspan x="'+s+'" dy="1em">'+g+"</tspan>"}),a.innerHTML=d}else a.innerHTML=e},r}(ShapeBase),regexLG=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexColorStop=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function addStop(n){var r=n.match(regexColorStop);if(!r)return"";var e="";return r.sort(function(a,o){return a=a.split(":"),o=o.split(":"),Number(a[0])-Number(o[0])}),each$1(r,function(a){a=a.split(":"),e+='<stop offset="'+a[0]+'" stop-color="'+a[1]+'"></stop>'}),e}function parseLineGradient(n,r){var e=regexLG.exec(n),a=mod$1(toRadian(parseFloat(e[1])),Math.PI*2),o=e[2],s,l;a>=0&&a<.5*Math.PI?(s={x:0,y:0},l={x:1,y:1}):.5*Math.PI<=a&&a<Math.PI?(s={x:1,y:0},l={x:0,y:1}):Math.PI<=a&&a<1.5*Math.PI?(s={x:1,y:1},l={x:0,y:0}):(s={x:0,y:1},l={x:1,y:0});var c=Math.tan(a),u=c*c,f=(l.x-s.x+c*(l.y-s.y))/(u+1)+s.x,d=c*(l.x-s.x+c*(l.y-s.y))/(u+1)+s.y;r.setAttribute("x1",s.x),r.setAttribute("y1",s.y),r.setAttribute("x2",f),r.setAttribute("y2",d),r.innerHTML=addStop(o)}function parseRadialGradient(n,r){var e=regexRG.exec(n),a=parseFloat(e[1]),o=parseFloat(e[2]),s=parseFloat(e[3]),l=e[4];r.setAttribute("cx",a),r.setAttribute("cy",o),r.setAttribute("r",s),r.innerHTML=addStop(l)}var Gradient=function(){function n(r){this.cfg={};var e=null,a=uniqueId("gradient_");return r.toLowerCase()[0]==="l"?(e=createSVGElement("linearGradient"),parseLineGradient(r,e)):(e=createSVGElement("radialGradient"),parseRadialGradient(r,e)),e.setAttribute("id",a),this.el=e,this.id=a,this.cfg=r,this}return n.prototype.match=function(r,e){return this.cfg===e},n}(),ATTR_MAP={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},SHADOW_DIMENSION={x:"-40%",y:"-40%",width:"200%",height:"200%"},Shadow=function(){function n(r){this.type="filter",this.cfg={},this.type="filter";var e=createSVGElement("filter");return each$1(SHADOW_DIMENSION,function(a,o){e.setAttribute(o,a)}),this.el=e,this.id=uniqueId("filter_"),this.el.id=this.id,this.cfg=r,this._parseShadow(r,e),this}return n.prototype.match=function(r,e){if(this.type!==r)return!1;var a=!0,o=this.cfg;return each$1(Object.keys(o),function(s){if(o[s]!==e[s])return a=!1,!1}),a},n.prototype.update=function(r,e){var a=this.cfg;return a[ATTR_MAP[r]]=e,this._parseShadow(a,this.el),this},n.prototype._parseShadow=function(r,e){var a=`<feDropShadow
      dx="`+(r.dx||0)+`"
      dy="`+(r.dy||0)+`"
      stdDeviation="`+(r.blur?r.blur/10:0)+`"
      flood-color="`+(r.color?r.color:"#000")+`"
      flood-opacity="`+(r.opacity?r.opacity:1)+`"
      />`;e.innerHTML=a},n}(),Arrow=function(){function n(r,e){this.cfg={};var a=createSVGElement("marker"),o=uniqueId("marker_");a.setAttribute("id",o);var s=createSVGElement("path");s.setAttribute("stroke",r.stroke||"none"),s.setAttribute("fill",r.fill||"none"),a.appendChild(s),a.setAttribute("overflow","visible"),a.setAttribute("orient","auto-start-reverse"),this.el=a,this.child=s,this.id=o;var l=r[e==="marker-start"?"startArrow":"endArrow"];return this.stroke=r.stroke||"#000",l===!0?this._setDefaultPath(e,s):(this.cfg=l,this._setMarker(r.lineWidth,s)),this}return n.prototype.match=function(){return!1},n.prototype._setDefaultPath=function(r,e){var a=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),a.setAttribute("refX",""+10*Math.cos(Math.PI/6)),a.setAttribute("refY","5")},n.prototype._setMarker=function(r,e){var a=this.el,o=this.cfg.path,s=this.cfg.d;isArray$4(o)&&(o=o.map(function(l){return l.join(" ")}).join("")),e.setAttribute("d",o),a.appendChild(e),s&&a.setAttribute("refX",""+s/r)},n.prototype.update=function(r){var e=this.child;e.attr?e.attr("fill",r):e.setAttribute("fill",r)},n}(),Clip=function(){function n(r){this.type="clip",this.cfg={};var e=createSVGElement("clipPath");this.el=e,this.id=uniqueId("clip_"),e.id=this.id;var a=r.cfg.el;return e.appendChild(a),this.cfg=r,this}return n.prototype.match=function(){return!1},n.prototype.remove=function(){var r=this.el;r.parentNode.removeChild(r)},n}(),regexPR=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Pattern=function(){function n(r){this.cfg={};var e=createSVGElement("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var a=createSVGElement("image");e.appendChild(a);var o=uniqueId("pattern_");e.id=o,this.el=e,this.id=o,this.cfg=r;var s=regexPR.exec(r),l=s[2];a.setAttribute("href",l);var c=new Image;l.match(/^data:/i)||(c.crossOrigin="Anonymous"),c.src=l;function u(){e.setAttribute("width",""+c.width),e.setAttribute("height",""+c.height)}return c.complete?u():(c.onload=u,c.src=c.src),this}return n.prototype.match=function(r,e){return this.cfg===e},n}(),Defs=function(){function n(r){var e=createSVGElement("defs"),a=uniqueId("defs_");e.id=a,r.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=r}return n.prototype.find=function(r,e){for(var a=this.children,o=null,s=0;s<a.length;s++)if(a[s].match(r,e)){o=a[s].id;break}return o},n.prototype.findById=function(r){for(var e=this.children,a=null,o=0;o<e.length;o++)if(e[o].id===r){a=e[o];break}return a},n.prototype.add=function(r){this.children.push(r),r.canvas=this.canvas,r.parent=this},n.prototype.getDefaultArrow=function(r,e){var a=r.stroke||r.strokeStyle;if(this.defaultArrow[a])return this.defaultArrow[a].id;var o=new Arrow(r,e);return this.defaultArrow[a]=o,this.el.appendChild(o.el),this.add(o),o.id},n.prototype.addGradient=function(r){var e=new Gradient(r);return this.el.appendChild(e.el),this.add(e),e.id},n.prototype.addArrow=function(r,e){var a=new Arrow(r,e);return this.el.appendChild(a.el),this.add(a),a.id},n.prototype.addShadow=function(r){var e=new Shadow(r);return this.el.appendChild(e.el),this.add(e),e.id},n.prototype.addPattern=function(r){var e=new Pattern(r);return this.el.appendChild(e.el),this.add(e),e.id},n.prototype.addClip=function(r){var e=new Clip(r);return this.el.appendChild(e.el),this.add(e),e.id},n}(),Canvas=function(n){__extends$7(r,n);function r(e){return n.call(this,__assign$8(__assign$8({},e),{autoDraw:!0,renderer:"svg"}))||this}return r.prototype.getShapeBase=function(){return Shape},r.prototype.getGroupBase=function(){return Group},r.prototype.getShape=function(e,a,o){var s=o.target||o.srcElement;if(!SHAPE_TO_TAGS[s.tagName]){for(var l=s.parentNode;l&&!SHAPE_TO_TAGS[l.tagName];)l=l.parentNode;s=l}return this.find(function(c){return c.get("el")===s})},r.prototype.createDom=function(){var e=createSVGElement("svg"),a=new Defs(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",a),e},r.prototype.onCanvasChange=function(e){var a=this.get("context"),o=this.get("el");if(e==="sort"){var s=this.get("children");s&&s.length&&sortDom(this,function(c,u){return s.indexOf(c)-s.indexOf(u)?1:0})}else if(e==="clear"){if(o){o.innerHTML="";var l=a.el;l.innerHTML="",o.appendChild(l)}}else e==="matrix"?setTransform(this):e==="clip"?setClip(this,a):e==="changeSize"&&(o.setAttribute("width",""+this.get("width")),o.setAttribute("height",""+this.get("height")))},r.prototype.draw=function(){var e=this.get("context"),a=this.getChildren();setClip(this,e),a.length&&drawChildren(e,a)},r}(Canvas$2),version="0.5.6";const SVGEngine=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:Canvas$2,AbstractGroup,AbstractShape,Base,Canvas,Event:GraphEvent,Group,PathUtil:PathUtil$1,Shape,assembleFont,getBBoxMethod:getMethod,getOffScreenContext,getTextHeight,invert:invert$1,isAllowCapture,multiplyVec2:multiplyVec2$1,registerBBox:register,registerEasing,version},Symbol.toStringTag,{value:"Module"}));var Path=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.type="path",a.shapeType="line";var o=e.connectNulls,s=o===void 0?!1:o,l=e.showSinglePoint,c=l===void 0?!0:l;return a.connectNulls=s,a.showSinglePoint=c,a}return r.prototype.updateElements=function(e,a){var o,s,l,c,u,f;a===void 0&&(a=!1);for(var d=new Map,g=new Map,v=[],p=0,y=0;y<e.length;y++){var m=e[y],x=this.getElementId(m);v.push(x),d.set(x,m),g.set(x,p),p++}this.elements=new Array(p);var A=diff$2(this.lastElementsMap,v),_=A.added,b=A.updated,S=A.removed;try{for(var C=__values(_),E=C.next();!E.done;E=C.next()){var x=E.value,m=d.get(x),T=this.getShapeFactory(),w=this.getShapeInfo(m),y=g.get(x),L=new Element$1({shapeFactory:T,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:y});L.geometry=this,L.animate=this.animateOption,L.draw(w,a),this.elementsMap[x]=L,this.elements[y]=L}}catch(Y){o={error:Y}}finally{try{E&&!E.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}try{for(var M=__values(b),O=M.next();!O.done;O=M.next()){var x=O.value,m=d.get(x),L=this.lastElementsMap[x],y=g.get(x),w=this.getShapeInfo(m),P=L.getModel();(this.isCoordinateChanged||isModelChange(P,w))&&(L.animate=this.animateOption,L.update(w)),this.elementsMap[x]=L,this.elements[y]=L}}catch(Y){l={error:Y}}finally{try{O&&!O.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}try{for(var N=__values(S),G=N.next();!G.done;G=N.next()){var x=G.value,L=this.lastElementsMap[x];L.animate=this.animateOption,L.destroy()}}catch(Y){u={error:Y}}finally{try{G&&!G.done&&(f=N.return)&&f.call(N)}finally{if(u)throw u.error}}},r.prototype.getPointsAndData=function(e){for(var a=[],o=[],s=0,l=e.length;s<l;s++){var c=e[s];a.push({x:c.x,y:c.y}),o.push(c[FIELD_ORIGIN])}return{points:a,data:o}},r.prototype.getShapeInfo=function(e){var a=this.getDrawCfg(e[0]),o=this.getPointsAndData(e),s=o.points,l=o.data;return a.mappingData=e,a.data=l,a.isStack=!!this.getAdjust("stack"),a.points=s,a.connectNulls=this.connectNulls,a.showSinglePoint=this.showSinglePoint,a},r}(Geometry);function getPath$2(n,r,e,a,o){var s=[];if(n.length){for(var l=[],c=[],u=0,f=n.length;u<f;u++){var d=n[u];l.push(d[1]),c.push(d[0])}c=c.reverse(),each$1([l,c],function(g,v){var p=[],y=a.parsePoints(g),m=y[0];l.length===1&&c.length===1?p=v===0?[["M",m.x-.5,m.y],["L",m.x+.5,m.y]]:[["L",m.x+.5,m.y],["L",m.x-.5,m.y]]:(r&&y.push({x:m.x,y:m.y}),e?p=getSplinePath$1(y,!1,o):p=getLinePath(y,!1),v>0&&(p[0][0]="L")),s=s.concat(p)}),s.push(["Z"])}return s}function getShapeAttrs(n,r,e,a,o){for(var s=getStyle(n,r,!r,"lineWidth"),l=n.connectNulls,c=n.isInCircle,u=n.points,f=n.showSinglePoint,d=getPathPoints(u,l,f),g=[],v=0,p=d.length;v<p;v++){var y=d[v];g=g.concat(getPath$2(y,c,e,a,o))}return s.path=g,s}function getConstraint(n){var r=n.start,e=n.end;return[[r.x,e.y],[e.x,r.y]]}registerShapeFactory("area",{defaultShapeType:"area",getDefaultPoints:function(n){var r=n.x,e=n.y0,a=isArray$4(n.y)?n.y:[e,n.y];return a.map(function(o){return{x:r,y:o}})}});registerShape("area","area",{draw:function(n,r){var e=getShapeAttrs(n,!1,!1,this),a=r.addShape({type:"path",attrs:e,name:"area"});return a},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){return o===void 0&&(o=5.5),[["M",e-o,a-4],["L",e+o,a-4],["L",e+o,a+4],["L",e-o,a+4],["Z"]]},style:{r:5,fill:r,fillOpacity:1}}}});var Area$1=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.type="area",a.shapeType="area",a.generatePoints=!0,a.startOnZero=!0;var o=e.startOnZero,s=o===void 0?!0:o,l=e.sortable,c=l===void 0?!1:l,u=e.showSinglePoint,f=u===void 0?!1:u;return a.startOnZero=s,a.sortable=c,a.showSinglePoint=f,a}return r.prototype.getPointsAndData=function(e){for(var a=[],o=[],s=0,l=e.length;s<l;s++){var c=e[s];a.push(c.points),o.push(c[FIELD_ORIGIN])}return{points:a,data:o}},r.prototype.getYMinValue=function(){if(this.startOnZero)return n.prototype.getYMinValue.call(this);var e=this.getYScale();return e.min},r}(Path);registerShapeFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(n){return splitPoints(n)}});registerShape("edge","line",{draw:function(n,r){var e=getStyle(n,!0,!1,"lineWidth"),a=getLinePath(this.parsePoints(n.points),this.coordinate.isPolar);return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});var Edge=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return r}(Geometry),Heatmap=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return r.prototype.updateElements=function(e,a){for(var o=0;o<e.length;o++){var s=e[o],l=this.prepareRange(s),c=this.prepareSize(),u=get(this.styleOption,["cfg","shadowBlur"]);isNumber$2(u)||(u=c/2),this.prepareGreyScaleBlurredCircle(c,u),this.drawWithRange(s,l,c,u)}},r.prototype.color=function(e,a){return this.createAttrOption("color",e,typeof a!="function"?a:""),this},r.prototype.clear=function(){n.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},r.prototype.prepareRange=function(e){var a=this.getAttribute("color"),o=a.getFields()[0],s=1/0,l=-1/0;return e.forEach(function(c){var u=c[FIELD_ORIGIN][o];u>l&&(l=u),u<s&&(s=u)}),s===l&&(s=l-1),[s,l]},r.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return isNumber$2(e)||(e=this.getDefaultSize()),e},r.prototype.prepareGreyScaleBlurredCircle=function(e,a){var o=this.getGrayScaleBlurredCanvas(),s=e+a,l=o.getContext("2d");o.width=o.height=s*2,l.clearRect(0,0,o.width,o.height),l.shadowOffsetX=l.shadowOffsetY=s*2,l.shadowBlur=a,l.shadowColor="black",l.beginPath(),l.arc(-s,-s,e,0,Math.PI*2,!0),l.closePath(),l.fill()},r.prototype.drawWithRange=function(e,a,o,s){var l,c,u=this.coordinate,f=u.start,d=u.end,g=this.coordinate.getWidth(),v=this.coordinate.getHeight(),p=this.getAttribute("color"),y=p.getFields()[0];this.clearShadowCanvasCtx();var m=this.getShadowCanvasCtx();a&&(e=e.filter(function(M){return M[FIELD_ORIGIN][y]<=a[1]&&M[FIELD_ORIGIN][y]>=a[0]}));var x=this.scales[y];try{for(var A=__values(e),_=A.next();!_.done;_=A.next()){var b=_.value,S=this.getDrawCfg(b),C=S.x,E=S.y,T=x.scale(b[FIELD_ORIGIN][y]);this.drawGrayScaleBlurredCircle(C-f.x,E-d.y,o+s,T,m)}}catch(M){l={error:M}}finally{try{_&&!_.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}var w=m.getImageData(0,0,g,v);this.clearShadowCanvasCtx(),this.colorize(w),m.putImageData(w,0,0);var L=this.getImageShape();L.attr("x",f.x),L.attr("y",d.y),L.attr("width",g),L.attr("height",v),L.attr("img",m.canvas),L.set("origin",this.getShapeInfo(e))},r.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),a=this.coordinate;return Math.min(a.getWidth()/(e.scales[0].ticks.length*4),a.getHeight()/(e.scales[1].ticks.length*4))},r.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},r.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},r.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},r.prototype.drawGrayScaleBlurredCircle=function(e,a,o,s,l){var c=this.getGrayScaleBlurredCanvas();l.globalAlpha=s,l.drawImage(c,e-o,a-o)},r.prototype.colorize=function(e){for(var a=this.getAttribute("color"),o=e.data,s=this.paletteCache,l=3;l<o.length;l+=4){var c=o[l];if(isNumber$2(c)){var u=s[c]?s[c]:colorUtil.rgb2arr(a.gradient(c/256));o[l-3]=u[0],o[l-2]=u[1],o[l-1]=u[2],o[l]=c}}},r.prototype.getImageShape=function(){var e=this.imageShape;if(e)return e;var a=this.container;return e=a.addShape({type:"image",attrs:{}}),this.imageShape=e,e},r.prototype.getShapeInfo=function(e){var a=this.getDrawCfg(e[0]),o=e.map(function(s){return s[FIELD_ORIGIN]});return __assign$8(__assign$8({},a),{mappingData:e,data:o})},r}(Geometry);function getRectPoints$1(n){var r,e,a=n.x,o=n.y,s=n.y0,l=n.size,c,u;isArray$4(o)?(r=__read(o,2),c=r[0],u=r[1]):(c=s,u=o);var f,d;isArray$4(a)?(e=__read(a,2),f=e[0],d=e[1]):(f=a-l/2,d=a+l/2);var g=[{x:f,y:c},{x:f,y:u}];return g.push({x:d,y:u},{x:d,y:c}),g}function getRectPath$1(n,r){r===void 0&&(r=!0);var e=[],a=n[0];e.push(["M",a.x,a.y]);for(var o=1,s=n.length;o<s;o++)e.push(["L",n[o].x,n[o].y]);return r&&(e.push(["L",a.x,a.y]),e.push(["z"])),e}function parseRadius(n,r){var e=0,a=0,o=0,s=0;return isArray$4(n)?n.length===1?e=a=o=s=n[0]:n.length===2?(e=o=n[0],a=s=n[1]):n.length===3?(e=n[0],a=s=n[1],o=n[2]):(e=n[0],a=n[1],o=n[2],s=n[3]):e=a=o=s=n,e+a>r&&(e=e?r/(1+a/e):0,a=r-e),o+s>r&&(o=o?r/(1+s/o):0,s=r-o),[e||0,a||0,o||0,s||0]}function getBackgroundRectPath(n,r,e){var a=[];if(e.isRect){var o=e.isTransposed?{x:e.start.x,y:r[0].y}:{x:r[0].x,y:e.start.y},s=e.isTransposed?{x:e.end.x,y:r[2].y}:{x:r[3].x,y:e.end.y},l=get(n,["background","style","radius"]);if(l){var c=e.isTransposed?Math.abs(r[0].y-r[2].y):r[2].x-r[1].x,u=e.isTransposed?e.getWidth():e.getHeight(),f=__read(parseRadius(l,Math.min(c,u)),4),d=f[0],g=f[1],v=f[2],p=f[3],y=e.isTransposed&&e.isReflect("y"),m=y?0:1,x=function(E){return y?-E:E};a.push(["M",o.x,s.y+x(d)]),d!==0&&a.push(["A",d,d,0,0,m,o.x+d,s.y]),a.push(["L",s.x-g,s.y]),g!==0&&a.push(["A",g,g,0,0,m,s.x,s.y+x(g)]),a.push(["L",s.x,o.y-x(v)]),v!==0&&a.push(["A",v,v,0,0,m,s.x-v,o.y]),a.push(["L",o.x+p,o.y]),p!==0&&a.push(["A",p,p,0,0,m,o.x,o.y-x(p)])}else a.push(["M",o.x,o.y]),a.push(["L",s.x,o.y]),a.push(["L",s.x,s.y]),a.push(["L",o.x,s.y]),a.push(["L",o.x,o.y]);a.push(["z"])}if(e.isPolar){var A=e.getCenter(),_=getAngle$1(n,e),b=_.startAngle,S=_.endAngle;if(e.type!=="theta"&&!e.isTransposed)a=getSectorPath(A.x,A.y,e.getRadius(),b,S);else{var C=function(w){return Math.pow(w,2)},d=Math.sqrt(C(A.x-r[0].x)+C(A.y-r[0].y)),g=Math.sqrt(C(A.x-r[2].x)+C(A.y-r[2].y));a=getSectorPath(A.x,A.y,d,e.startAngle,e.endAngle,g)}}return a}function getIntervalRectPath(n,r,e){var a=e.getWidth(),o=e.getHeight(),s=e.type==="rect",l=[],c=(n[2].x-n[1].x)/2,u=e.isTransposed?c*o/a:c*a/o;return r==="round"?(s?(l.push(["M",n[0].x,n[0].y+u]),l.push(["L",n[1].x,n[1].y-u]),l.push(["A",c,c,0,0,1,n[2].x,n[2].y-u]),l.push(["L",n[3].x,n[3].y+u]),l.push(["A",c,c,0,0,1,n[0].x,n[0].y+u])):(l.push(["M",n[0].x,n[0].y]),l.push(["L",n[1].x,n[1].y]),l.push(["A",c,c,0,0,1,n[2].x,n[2].y]),l.push(["L",n[3].x,n[3].y]),l.push(["A",c,c,0,0,1,n[0].x,n[0].y])),l.push(["z"])):l=getRectPath$1(n),l}function getFunnelPath(n,r,e){var a=[];return isNil(r)?e?a.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",(n[2].x+n[3].x)/2,(n[2].y+n[3].y)/2],["Z"]):a.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",n[2].x,n[2].y],["L",n[3].x,n[3].y],["Z"]):a.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",r[1].x,r[1].y],["L",r[0].x,r[0].y],["Z"]),a}function swap$2(n,r){return[r,n]}function getRectWithCornerRadius(n,r,e){var a,o,s,l,c,u,f,d=__read(__spreadArray$2([],__read(n),!1),4),g=d[0],v=d[1],p=d[2],y=d[3],m=__read(typeof e=="number"?Array(4).fill(e):e,4),x=m[0],A=m[1],_=m[2],b=m[3];r.isTransposed&&(a=__read(swap$2(v,y),2),v=a[0],y=a[1]),r.isReflect("y")&&(o=__read(swap$2(g,v),2),g=o[0],v=o[1],s=__read(swap$2(p,y),2),p=s[0],y=s[1]),r.isReflect("x")&&(l=__read(swap$2(g,y),2),g=l[0],y=l[1],c=__read(swap$2(v,p),2),v=c[0],p=c[1]);var S=[],C=function(E){return Math.abs(E)};return u=__read(parseRadius([x,A,_,b],Math.min(C(y.x-g.x),C(v.y-g.y))).map(function(E){return C(E)}),4),x=u[0],A=u[1],_=u[2],b=u[3],r.isTransposed&&(f=__read([b,x,A,_],4),x=f[0],A=f[1],_=f[2],b=f[3]),g.y<v.y?(S.push(["M",y.x,y.y+_]),_!==0&&S.push(["A",_,_,0,0,0,y.x-_,y.y]),S.push(["L",g.x+b,g.y]),b!==0&&S.push(["A",b,b,0,0,0,g.x,g.y+b]),S.push(["L",v.x,v.y-x]),x!==0&&S.push(["A",x,x,0,0,0,v.x+x,v.y]),S.push(["L",p.x-A,p.y]),A!==0&&S.push(["A",A,A,0,0,0,p.x,p.y-A]),S.push(["L",y.x,y.y+_]),S.push(["z"])):y.x<g.x?(S.push(["M",p.x+A,p.y]),A!==0&&S.push(["A",A,A,0,0,0,p.x,p.y+A]),S.push(["L",y.x,y.y-_]),_!==0&&S.push(["A",_,_,0,0,0,y.x+_,y.y]),S.push(["L",g.x-b,g.y]),b!==0&&S.push(["A",b,b,0,0,0,g.x,g.y-b]),S.push(["L",v.x,v.y+x]),x!==0&&S.push(["A",x,x,0,0,0,v.x-x,v.y]),S.push(["L",p.x+A,p.y]),S.push(["z"])):(S.push(["M",v.x,v.y+x]),x!==0&&S.push(["A",x,x,0,0,1,v.x+x,v.y]),S.push(["L",p.x-A,p.y]),A!==0&&S.push(["A",A,A,0,0,1,p.x,p.y+A]),S.push(["L",y.x,y.y-_]),_!==0&&S.push(["A",_,_,0,0,1,y.x-_,y.y]),S.push(["L",g.x+b,g.y]),b!==0&&S.push(["A",b,b,0,0,1,g.x,g.y-b]),S.push(["L",v.x,v.y+x]),S.push(["z"])),S}registerShapeFactory("interval",{defaultShapeType:"rect",getDefaultPoints:function(n){return getRectPoints$1(n)}});registerShape("interval","rect",{draw:function(n,r){var e=getStyle(n,!1,!0),a=r,o=n==null?void 0:n.background;if(o){a=r.addGroup({name:"interval-group"});var s=getBackgroundRectStyle(n),l=getBackgroundRectPath(n,this.parsePoints(n.points),this.coordinate);a.addShape("path",{attrs:__assign$8(__assign$8({},s),{path:l}),capture:!1,zIndex:-1,name:BACKGROUND_SHAPE})}var c;e.radius&&this.coordinate.isRect?c=getRectWithCornerRadius(this.parsePoints(n.points),this.coordinate,e.radius):c=this.parsePath(getIntervalRectPath(n.points,e.lineCap,this.coordinate));var u=a.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:c}),name:"interval"});return o?a:u},getMarker:function(n){var r=n.color,e=n.isInPolar;return e?{symbol:"circle",style:{r:4.5,fill:r}}:{symbol:"square",style:{r:4,fill:r}}}});function findMinDistance(n,r){var e=n.length,a=n;isString$1(a[0])&&(a=n.map(function(c){return r.translate(c)}));for(var o=a[1]-a[0],s=2;s<e;s++){var l=a[s]-a[s-1];o>l&&(o=l)}return o}function getDodgeCount(n,r){if(r){var e=flatten(n),a=valuesOfKey(e,r);return a.length}return n.length}function getDefaultSize(n){var r=n.theme,e=n.coordinate,a=n.getXScale(),o=a.values,s=n.beforeMappingData,l=o.length,c=getXDimensionLength(n.coordinate),u=n.intervalPadding,f=n.dodgePadding,d=n.maxColumnWidth||r.maxColumnWidth,g=n.minColumnWidth||r.minColumnWidth,v=n.columnWidthRatio||r.columnWidthRatio,p=n.multiplePieWidthRatio||r.multiplePieWidthRatio,y=n.roseWidthRatio||r.roseWidthRatio;if(a.isLinear&&o.length>1){o.sort();var m=findMinDistance(o,a);l=(a.max-a.min)/m,o.length>l&&(l=o.length)}var x=a.range,A=1/l,_=1;if(e.isPolar?e.isTransposed&&l>1?_=p:_=y:(a.isLinear&&(A*=x[1]-x[0]),_=v),!isNil(u)&&u>=0){var b=u/c;A=(1-(l-1)*b)/l}else A*=_;if(n.getAdjust("dodge")){var S=n.getAdjust("dodge"),C=S.dodgeBy,E=getDodgeCount(s,C);if(!isNil(f)&&f>=0){var T=f/c;A=(A-T*(E-1))/E}else!isNil(u)&&u>=0&&(A*=_),A=A/E;A=A>=0?A:0}if(!isNil(d)&&d>=0){var w=d/c;A>w&&(A=w)}if(!isNil(g)&&g>=0){var L=g/c;A<L&&(A=L)}return A}var Interval=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.type="interval",a.shapeType="interval",a.generatePoints=!0;var o=e.background;return a.background=o,a}return r.prototype.createShapePointsCfg=function(e){var a=n.prototype.createShapePointsCfg.call(this,e),o,s=this.getAttribute("size");if(s){o=this.getAttributeValues(s,e)[0];var l=this.coordinate,c=getXDimensionLength(l);o=o/c}else this.defaultSize||(this.defaultSize=getDefaultSize(this)),o=this.defaultSize;return a.size=o,a},r.prototype.adjustScale=function(){n.prototype.adjustScale.call(this);var e=this.getYScale();if(this.coordinate.type==="theta")e.change({nice:!1,min:0,max:getMaxScale(e)});else{var a=this.scaleDefs,o=e.field,s=e.min,l=e.max,c=e.type;c!=="time"&&(s>0&&!get(a,[o,"min"])&&e.change({min:0}),l<=0&&!get(a,[o,"max"])&&e.change({max:0}))}},r.prototype.getDrawCfg=function(e){var a=n.prototype.getDrawCfg.call(this,e);return a.background=this.background,a},r}(Geometry),Line$1=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;a.type="line";var o=e.sortable,s=o===void 0?!1:o;return a.sortable=s,a}return r}(Path),SHAPES=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],HOLLOW_SHAPES=["cross","tick","plus","hyphen","line"];function drawPoints(n,r,e,a,o){var s,l,c=getStyle(r,o,!o,"r"),u=n.parsePoints(r.points),f=u[0];if(r.isStack)f=u[1];else if(u.length>1){var d=e.addGroup();try{for(var g=__values(u),v=g.next();!v.done;v=g.next()){var p=v.value;d.addShape({type:"marker",attrs:__assign$8(__assign$8(__assign$8({},c),{symbol:MarkerSymbols[a]||a}),p)})}}catch(y){s={error:y}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(s)throw s.error}}return d}return e.addShape({type:"marker",attrs:__assign$8(__assign$8(__assign$8({},c),{symbol:MarkerSymbols[a]||a}),f)})}registerShapeFactory("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(n){return splitPoints(n)}});each$1(SHAPES,function(n){registerShape("point","hollow-".concat(n),{draw:function(r,e){return drawPoints(this,r,e,n,!0)},getMarker:function(r){var e=r.color;return{symbol:MarkerSymbols[n]||n,style:{r:4.5,stroke:e,fill:null}}}})});var Point=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return r.prototype.getDrawCfg=function(e){var a=n.prototype.getDrawCfg.call(this,e);return __assign$8(__assign$8({},a),{isStack:!!this.getAdjust("stack")})},r}(Geometry);function getPath$1(n){for(var r=n[0],e=1,a=[["M",r.x,r.y]];e<n.length;){var o=n[e];(o.x!==n[e-1].x||o.y!==n[e-1].y)&&(a.push(["L",o.x,o.y]),o.x===r.x&&o.y===r.y&&e<n.length-1&&(r=n[e+1],a.push(["Z"]),a.push(["M",r.x,r.y]),e++)),e++}return isEqual$1(last(a),r)||a.push(["L",r.x,r.y]),a.push(["Z"]),a}registerShapeFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(n){var r=[];return each$1(n.x,function(e,a){var o=n.y[a];r.push({x:e,y:o})}),r}});registerShape("polygon","polygon",{draw:function(n,r){if(!isEmpty(n.points)){var e=getStyle(n,!0,!0),a=this.parsePath(getPath$1(n.points));return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a}),name:"polygon"})}},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});var Polygon=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return r.prototype.createShapePointsCfg=function(e){var a=n.prototype.createShapePointsCfg.call(this,e),o=a.x,s=a.y,l;if(!(isArray$4(o)&&isArray$4(s))){var c=this.getXScale(),u=this.getYScale(),f=c.values.length,d=u.values.length,g=.5*1/f,v=.5*1/d;c.isCategory&&u.isCategory?(o=[o-g,o-g,o+g,o+g],s=[s-v,s+v,s+v,s-v]):isArray$4(o)?(l=o,o=[l[0],l[0],l[1],l[1]],s=[s-v/2,s+v/2,s+v/2,s-v/2]):isArray$4(s)&&(l=s,s=[l[0],l[1],l[1],l[0]],o=[o-g/2,o-g/2,o+g/2,o+g/2]),a.x=o,a.y=s}return a},r}(Geometry);registerShapeFactory("schema",{defaultShapeType:""});var Schema=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return r.prototype.createShapePointsCfg=function(e){var a=n.prototype.createShapePointsCfg.call(this,e),o,s=this.getAttribute("size");if(s){o=this.getAttributeValues(s,e)[0];var l=this.coordinate,c=getXDimensionLength(l);o=o/c}else this.defaultSize||(this.defaultSize=getDefaultSize(this)),o=this.defaultSize;return a.size=o,a},r}(Geometry);function normalizeSize(n){if(!isArray$4(n))return[];var r=max$2(n);return map$2(n,function(e){return e/r})}registerShapeFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(n){var r=n.size/2,e=[],a=normalizeSize(n._size);return each$1(n.y,function(o,s){var l=a[s]*r,c=s===0,u=s===n.y.length-1;e.push({isMin:c,isMax:u,x:n.x-l,y:o}),e.unshift({isMin:c,isMax:u,x:n.x+l,y:o})}),e}});registerShape("violin","violin",{draw:function(n,r){var e=getStyle(n,!0,!0),a=this.parsePath(getViolinPath(n.points));return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a}),name:"violin"})},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{r:4,fill:r}}}});var Violin=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e}return r.prototype.createShapePointsCfg=function(e){var a=n.prototype.createShapePointsCfg.call(this,e),o,s=this.getAttribute("size");if(s){o=this.getAttributeValues(s,e)[0];var l=this.coordinate,c=getXDimensionLength(l);o=o/c}else this.defaultSize||(this.defaultSize=getDefaultSize(this)),o=this.defaultSize;return a.size=o,a._size=get(e[FIELD_ORIGIN],[this._sizeField]),a},r.prototype.initAttributes=function(){var e=this.attributeOption,a=e.size?e.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=a,delete e.size,n.prototype.initAttributes.call(this)},r}(Geometry);registerShape("area","line",{draw:function(n,r){var e=getShapeAttrs(n,!0,!1,this),a=r.addShape({type:"path",attrs:e,name:"area"});return a},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){return o===void 0&&(o=5.5),[["M",e-o,a-4],["L",e+o,a-4],["L",e+o,a+4],["L",e-o,a+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}});registerShape("area","smooth",{draw:function(n,r){var e=this.coordinate,a=getShapeAttrs(n,!1,!0,this,getConstraint(e)),o=r.addShape({type:"path",attrs:a,name:"area"});return o},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){return o===void 0&&(o=5.5),[["M",e-o,a-4],["L",e+o,a-4],["L",e+o,a+4],["L",e-o,a+4],["Z"]]},style:{r:5,fill:r,fillOpacity:1}}}});registerShape("area","smooth-line",{draw:function(n,r){var e=this.coordinate,a=getShapeAttrs(n,!0,!0,this,getConstraint(e)),o=r.addShape({type:"path",attrs:a,name:"area"});return o},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){return o===void 0&&(o=5.5),[["M",e-o,a-4],["L",e+o,a-4],["L",e+o,a+4],["L",e-o,a+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}});function getCPath(n,r){return["C",n.x*1/2+r.x*1/2,n.y,n.x*1/2+r.x*1/2,r.y,r.x,r.y]}function getQPath(n,r){var e=[];e.push({x:r.x,y:r.y}),e.push(n);var a=["Q"];return each$1(e,function(o){a.push(o.x,o.y)}),a}function getArcShapePath(n,r,e){var a=getQPath(r,e),o=[["M",n.x,n.y]];return o.push(a),o}function getArcShapeWeightPath(n,r){var e=getQPath(n[1],r),a=getQPath(n[3],r),o=[["M",n[0].x,n[0].y]];return o.push(a),o.push(["L",n[3].x,n[3].y]),o.push(["L",n[2].x,n[2].y]),o.push(e),o.push(["L",n[1].x,n[1].y]),o.push(["L",n[0].x,n[0].y]),o.push(["Z"]),o}registerShape("edge","arc",{draw:function(n,r){var e=getStyle(n,!0,!1,"lineWidth"),a=n.points,o=a.length>2?"weight":"normal",s;if(n.isInCircle){var l={x:0,y:1};return o==="normal"?s=getArcShapePath(a[0],a[1],l):(e.fill=e.stroke,s=getArcShapeWeightPath(a,l)),s=this.parsePath(s),r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:s})})}else{if(o==="normal")return a=this.parsePoints(a),s=getArcPath((a[1].x+a[0].x)/2,a[0].y,Math.abs(a[1].x-a[0].x)/2,Math.PI,Math.PI*2),r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:s})});var c=getCPath(a[1],a[3]),u=getCPath(a[2],a[0]);return s=[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],c,["L",a[3].x,a[3].y],["L",a[2].x,a[2].y],u,["Z"]],s=this.parsePath(s),e.fill=e.stroke,r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:s})})}},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});function getSmoothPath(n,r){var e=getCPath(n,r),a=[["M",n.x,n.y]];return a.push(e),a}registerShape("edge","smooth",{draw:function(n,r){var e=getStyle(n,!0,!1,"lineWidth"),a=n.points,o=this.parsePath(getSmoothPath(a[0],a[1]));return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:o})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});var CORNER_PERCENT=1/3;function getVHVPath(n,r){var e=[];e.push({x:n.x,y:n.y*(1-CORNER_PERCENT)+r.y*CORNER_PERCENT}),e.push({x:r.x,y:n.y*(1-CORNER_PERCENT)+r.y*CORNER_PERCENT}),e.push(r);var a=[["M",n.x,n.y]];return each$1(e,function(o){a.push(["L",o.x,o.y])}),a}registerShape("edge","vhv",{draw:function(n,r){var e=getStyle(n,!0,!1,"lineWidth"),a=n.points,o=this.parsePath(getVHVPath(a[0],a[1]));return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:o})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});registerShape("interval","funnel",{getPoints:function(n){return n.size=n.size*2,getRectPoints$1(n)},draw:function(n,r){var e=getStyle(n,!1,!0),a=this.parsePath(getFunnelPath(n.points,n.nextPoints,!1)),o=r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a}),name:"interval"});return o},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});registerShape("interval","hollow-rect",{draw:function(n,r){var e=getStyle(n,!0,!1),a=r,o=n==null?void 0:n.background;if(o){a=r.addGroup();var s=getBackgroundRectStyle(n),l=getBackgroundRectPath(n,this.parsePoints(n.points),this.coordinate);a.addShape("path",{attrs:__assign$8(__assign$8({},s),{path:l}),capture:!1,zIndex:-1,name:BACKGROUND_SHAPE})}var c=this.parsePath(getRectPath$1(n.points)),u=a.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:c}),name:"interval"});return o?a:u},getMarker:function(n){var r=n.color,e=n.isInPolar;return e?{symbol:"circle",style:{r:4.5,stroke:r,fill:null}}:{symbol:"square",style:{r:4,stroke:r,fill:null}}}});function getLinePoints(n){var r=n.x,e=n.y,a=n.y0;return isArray$4(e)?e.map(function(o,s){return{x:isArray$4(r)?r[s]:r,y:o}}):[{x:r,y:a},{x:r,y:e}]}registerShape("interval","line",{getPoints:function(n){return getLinePoints(n)},draw:function(n,r){var e=getStyle(n,!0,!1,"lineWidth"),a=omit(__assign$8({},e),["fill"]),o=this.parsePath(getRectPath$1(n.points,!1)),s=r.addShape("path",{attrs:__assign$8(__assign$8({},a),{path:o}),name:"interval"});return s},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){return[["M",e,a-o],["L",e,a+o]]},style:{r:5,stroke:r}}}});registerShape("interval","pyramid",{getPoints:function(n){return n.size=n.size*2,getRectPoints$1(n)},draw:function(n,r){var e=getStyle(n,!1,!0),a=this.parsePath(getFunnelPath(n.points,n.nextPoints,!0)),o=r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a}),name:"interval"});return o},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});function getTickPoints(n){var r,e=n.x,a=n.y,o=n.y0,s=n.size,l,c;isArray$4(a)?(r=__read(a,2),l=r[0],c=r[1]):(l=o,c=a);var u=e+s/2,f=e-s/2;return[{x:e,y:l},{x:e,y:c},{x:f,y:l},{x:u,y:l},{x:f,y:c},{x:u,y:c}]}function getTickPath(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]}registerShape("interval","tick",{getPoints:function(n){return getTickPoints(n)},draw:function(n,r){var e=getStyle(n,!0,!1),a=this.parsePath(getTickPath(n.points)),o=r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a}),name:"interval"});return o},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){return[["M",e-o/2,a-o],["L",e+o/2,a-o],["M",e,a-o],["L",e,a+o],["M",e-o/2,a+o],["L",e+o/2,a+o]]},style:{r:5,stroke:r}}}});var interpolateCallback=function(n,r,e){var a=n.x,o=n.y,s=r.x,l=r.y,c;switch(e){case"hv":c=[{x:s,y:o}];break;case"vh":c=[{x:a,y:l}];break;case"hvh":var u=(s+a)/2;c=[{x:u,y:o},{x:u,y:l}];break;case"vhv":var f=(o+l)/2;c=[{x:a,y:f},{x:s,y:f}];break}return c};function getInterpolatePoints(n,r){var e=[];return each$1(n,function(a,o){var s=n[o+1];if(e.push(a),s){var l=interpolateCallback(a,s,r);e=e.concat(l)}}),e}function getInterpolatePath(n){return n.map(function(r,e){return e===0?["M",r.x,r.y]:["L",r.x,r.y]})}function getInterpolateShapeAttrs(n,r){var e=getPathPoints(n.points,n.connectNulls,n.showSinglePoint),a=[];return each$1(e,function(o){var s=getInterpolatePoints(o,r);a=a.concat(getInterpolatePath(s))}),__assign$8(__assign$8({},getStyle(n,!0,!1,"lineWidth")),{path:a})}each$1(["hv","vh","hvh","vhv"],function(n){registerShape("line",n,{draw:function(r,e){var a=getInterpolateShapeAttrs(r,n),o=e.addShape({type:"path",attrs:a,name:"line"});return o},getMarker:function(r){return getLineMarker(r,n)}})});each$1(HOLLOW_SHAPES,function(n){registerShape("point",n,{draw:function(r,e){return drawPoints(this,r,e,n,!0)},getMarker:function(r){var e=r.color;return{symbol:MarkerSymbols[n],style:{r:4.5,stroke:e,fill:null}}}})});registerShape("point","image",{draw:function(n,r){var e,a,o=getStyle(n,!1,!1,"r").r,s=this.parsePoints(n.points),l=s[0];if(n.isStack)l=s[1];else if(s.length>1){var c=r.addGroup();try{for(var u=__values(s),f=u.next();!f.done;f=u.next()){var d=f.value;c.addShape("image",{attrs:{x:d.x-o/2,y:d.y-o,width:o,height:o,img:n.shape[1]}})}}catch(g){e={error:g}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(e)throw e.error}}return c}return r.addShape("image",{attrs:{x:l.x-o/2,y:l.y-o,width:o,height:o,img:n.shape[1]}})},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{r:4.5,fill:r}}}});each$1(SHAPES,function(n){registerShape("point",n,{draw:function(r,e){return drawPoints(this,r,e,n,!1)},getMarker:function(r){var e=r.color;return{symbol:MarkerSymbols[n]||n,style:{r:4.5,fill:e}}}})});function parseValue(n){var r=isArray$4(n)?n:[n],e=r[0],a=r[r.length-1],o=r.length>1?r[1]:e,s=r.length>3?r[3]:a,l=r.length>2?r[2]:o;return{min:e,max:a,min1:o,max1:s,median:l}}function getBoxPoints(n,r,e){var a=e/2,o;if(isArray$4(r)){var s=parseValue(r),l=s.min,c=s.max,u=s.median,f=s.min1,d=s.max1,g=n-a,v=n+a;o=[[g,c],[v,c],[n,c],[n,d],[g,f],[g,d],[v,d],[v,f],[n,f],[n,l],[g,l],[v,l],[g,u],[v,u]]}else{r=isNil(r)?.5:r;var p=parseValue(n),l=p.min,c=p.max,u=p.median,f=p.min1,d=p.max1,y=r-a,m=r+a;o=[[l,y],[l,m],[l,r],[f,r],[f,y],[f,m],[d,m],[d,y],[d,r],[c,r],[c,y],[c,m],[u,y],[u,m]]}return o.map(function(x){return{x:x[0],y:x[1]}})}function getBoxPath(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]}registerShape("schema","box",{getPoints:function(n){var r=n.x,e=n.y,a=n.size;return getBoxPoints(r,e,a)},draw:function(n,r){var e=getStyle(n,!0,!1),a=this.parsePath(getBoxPath(n.points)),o=r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a,name:"schema"})});return o},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){var s=[a-6,a-3,a,a+3,a+6],l=getBoxPoints(e,s,o);return[["M",l[0].x+1,l[0].y],["L",l[1].x-1,l[1].y],["M",l[2].x,l[2].y],["L",l[3].x,l[3].y],["M",l[4].x,l[4].y],["L",l[5].x,l[5].y],["L",l[6].x,l[6].y],["L",l[7].x,l[7].y],["L",l[4].x,l[4].y],["Z"],["M",l[8].x,l[8].y],["L",l[9].x,l[9].y],["M",l[10].x+1,l[10].y],["L",l[11].x-1,l[11].y],["M",l[12].x,l[12].y],["L",l[13].x,l[13].y]]},style:{r:6,lineWidth:1,stroke:r}}}});function getCandleYValues(n){var r=isArray$4(n)?n:[n],e=r.sort(function(a,o){return o-a});return padEnd(e,4,e[e.length-1])}function getCandlePoints(n,r,e){var a=getCandleYValues(r);return[{x:n,y:a[0]},{x:n,y:a[1]},{x:n-e/2,y:a[2]},{x:n-e/2,y:a[1]},{x:n+e/2,y:a[1]},{x:n+e/2,y:a[2]},{x:n,y:a[2]},{x:n,y:a[3]}]}function getCandlePath(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]}registerShape("schema","candle",{getPoints:function(n){var r=n.x,e=n.y,a=n.size;return getCandlePoints(r,e,a)},draw:function(n,r){var e=getStyle(n,!0,!0),a=this.parsePath(getCandlePath(n.points)),o=r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a,name:"schema"})});return o},getMarker:function(n){var r=n.color;return{symbol:function(e,a,o){var s=[a+7.5,a+3,a-3,a-7.5],l=getCandlePoints(e,s,o);return[["M",l[0].x,l[0].y],["L",l[1].x,l[1].y],["M",l[2].x,l[2].y],["L",l[3].x,l[3].y],["L",l[4].x,l[4].y],["L",l[5].x,l[5].y],["Z"],["M",l[6].x,l[6].y],["L",l[7].x,l[7].y]]},style:{lineWidth:1,stroke:r,fill:r,r:6}}}});function getRectAttrs(n,r){var e=Math.abs(n[0].x-n[2].x),a=Math.abs(n[0].y-n[2].y),o=Math.min(e,a);r&&(o=clamp(r,0,Math.min(e,a))),o=o/2;var s=(n[0].x+n[2].x)/2,l=(n[0].y+n[2].y)/2;return{x:s-o,y:l-o,width:o*2,height:o*2}}registerShape("polygon","square",{draw:function(n,r){if(!isEmpty(n.points)){var e=getStyle(n,!0,!0),a=this.parsePoints(n.points);return r.addShape("rect",{attrs:__assign$8(__assign$8({},e),getRectAttrs(a,n.size)),name:"polygon"})}},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});registerShape("violin","smooth",{draw:function(n,r){var e=getStyle(n,!0,!0),a=this.parsePath(getSmoothViolinPath(n.points));return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a})})},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{stroke:null,r:4,fill:r}}}});registerShape("violin","hollow",{draw:function(n,r){var e=getStyle(n,!0,!1),a=this.parsePath(getViolinPath(n.points));return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a})})},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{r:4,fill:null,stroke:r}}}});registerShape("violin","hollow-smooth",{draw:function(n,r){var e=getStyle(n,!0,!1),a=this.parsePath(getSmoothViolinPath(n.points));return r.addShape("path",{attrs:__assign$8(__assign$8({},e),{path:a})})},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{r:4,fill:null,stroke:r}}}});var IntervalLabel=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getLabelValueDir=function(e){var a="y",o=e.points;return o[0][a]<=o[2][a]?1:-1},r.prototype.getLabelOffsetPoint=function(e,a,o,s){var l,c=n.prototype.getLabelOffsetPoint.call(this,e,a,o),u=this.getCoordinate(),f=u.isTransposed,d=f?"x":"y",g=this.getLabelValueDir(e.mappingData);return c=__assign$8(__assign$8({},c),(l={},l[d]=c[d]*g,l)),u.isReflect("x")&&(c=__assign$8(__assign$8({},c),{x:c.x*-1})),u.isReflect("y")&&(c=__assign$8(__assign$8({},c),{y:c.y*-1})),c},r.prototype.getThemedLabelCfg=function(e){var a=this.geometry,o=this.getDefaultLabelCfg(),s=a.theme;return deepMix({},o,s.labels,e.position==="middle"?{offset:0}:{},e)},r.prototype.setLabelPosition=function(e,a,o,s){var l=this.getCoordinate(),c=l.isTransposed,u=a.points,f=l.convert(u[0]),d=l.convert(u[2]),g=this.getLabelValueDir(a),v,p,y,m,x=isArray$4(a.shape)?a.shape[0]:a.shape;if(x==="funnel"||x==="pyramid"){var A=get(a,"nextPoints"),_=get(a,"points");if(A){var b=l.convert(_[0]),S=l.convert(_[1]),C=l.convert(A[0]),E=l.convert(A[1]);c?(v=Math.min(C.y,b.y),y=Math.max(C.y,b.y),p=(S.x+E.x)/2,m=(b.x+C.x)/2):(v=Math.min((S.y+E.y)/2,(b.y+C.y)/2),y=Math.max((S.y+E.y)/2,(b.y+C.y)/2),p=E.x,m=b.x)}else v=Math.min(d.y,f.y),y=Math.max(d.y,f.y),p=d.x,m=f.x}else v=Math.min(d.y,f.y),y=Math.max(d.y,f.y),p=d.x,m=f.x;switch(s){case"right":e.x=p,e.y=(v+y)/2,e.textAlign=get(e,"textAlign",g>0?"left":"right");break;case"left":e.x=m,e.y=(v+y)/2,e.textAlign=get(e,"textAlign",g>0?"left":"right");break;case"bottom":c&&(e.x=(p+m)/2),e.y=y,e.textAlign=get(e,"textAlign","center"),e.textBaseline=get(e,"textBaseline",g>0?"bottom":"top");break;case"middle":c&&(e.x=(p+m)/2),e.y=(v+y)/2,e.textAlign=get(e,"textAlign","center"),e.textBaseline=get(e,"textBaseline","middle");break;case"top":c&&(e.x=(p+m)/2),e.y=v,e.textAlign=get(e,"textAlign","center"),e.textBaseline=get(e,"textBaseline",g>0?"bottom":"top");break}},r}(GeometryLabel),HALF_PI=Math.PI/2,PolarLabel=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getLabelOffset=function(e){var a=this.getCoordinate(),o=0;if(isNumber$2(e))o=e;else if(isString$1(e)&&e.indexOf("%")!==-1){var s=a.getRadius();a.innerRadius>0&&(s=s*(1-a.innerRadius)),o=parseFloat(e)*.01*s}return o},r.prototype.getLabelItems=function(e){var a=n.prototype.getLabelItems.call(this,e),o=this.geometry.getYScale();return map$2(a,function(s){if(s&&o){var l=o.scale(get(s.data,o.field));return __assign$8(__assign$8({},s),{percent:l})}return s})},r.prototype.getLabelAlign=function(e){var a=this.getCoordinate(),o;if(e.labelEmit)o=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(!a.isTransposed)o="center";else{var s=a.getCenter(),l=e.offset;Math.abs(e.x-s.x)<1?o="center":e.angle>Math.PI||e.angle<=0?o=l>0?"left":"right":o=l>0?"right":"left"}return o},r.prototype.getLabelPoint=function(e,a,o){var s=1,l,c=e.content[o];this.isToMiddle(a)?l=this.getMiddlePoint(a.points):(e.content.length===1&&o===0?o=1:o===0&&(s=-1),l=this.getArcPoint(a,o));var u=e.offset*s,f=this.getPointAngle(l),d=e.labelEmit,g=this.getCirclePoint(f,u,l,d);return g.r===0?g.content="":(g.content=c,g.angle=f,g.color=a.color),g.rotate=e.autoRotate?this.getLabelRotate(f,u,d):e.rotate,g.start={x:l.x,y:l.y},g},r.prototype.getArcPoint=function(e,a){return a===void 0&&(a=0),!isArray$4(e.x)&&!isArray$4(e.y)?{x:e.x,y:e.y}:{x:isArray$4(e.x)?e.x[a]:e.x,y:isArray$4(e.y)?e.y[a]:e.y}},r.prototype.getPointAngle=function(e){return getAngleByPoint(this.getCoordinate(),e)},r.prototype.getCirclePoint=function(e,a,o,s){var l=this.getCoordinate(),c=l.getCenter(),u=getDistanceToCenter(l,o);if(u===0)return __assign$8(__assign$8({},c),{r:u});var f=e;if(l.isTransposed&&u>a&&!s){var d=Math.asin(a/(2*u));f=e+d*2}else u=u+a;return{x:c.x+u*Math.cos(f),y:c.y+u*Math.sin(f),r:u}},r.prototype.getLabelRotate=function(e,a,o){var s=e+HALF_PI;return o&&(s-=HALF_PI),s&&(s>HALF_PI?s=s-Math.PI:s<-HALF_PI&&(s=s+Math.PI)),s},r.prototype.getMiddlePoint=function(e){var a=this.getCoordinate(),o=e.length,s={x:0,y:0};return each$1(e,function(l){s.x+=l.x,s.y+=l.y}),s.x/=o,s.y/=o,s=a.convert(s),s},r.prototype.isToMiddle=function(e){return e.x.length>2},r}(GeometryLabel),PieLabel=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return r.prototype.getDefaultLabelCfg=function(e,a){var o=n.prototype.getDefaultLabelCfg.call(this,e,a);return deepMix({},o,get(this.geometry.theme,"pieLabels",{}))},r.prototype.getLabelOffset=function(e){return n.prototype.getLabelOffset.call(this,e)||0},r.prototype.getLabelRotate=function(e,a,o){var s;return a<0&&(s=e,s>Math.PI/2&&(s=s-Math.PI),s<-Math.PI/2&&(s=s+Math.PI)),s},r.prototype.getLabelAlign=function(e){var a=this.getCoordinate(),o=a.getCenter(),s;return e.angle<=Math.PI/2&&e.x>=o.x?s="left":s="right",e.offset<=0&&(s==="right"?s="left":s="right"),s},r.prototype.getArcPoint=function(e){return e},r.prototype.getPointAngle=function(e){var a=this.getCoordinate(),o={x:isArray$4(e.x)?e.x[0]:e.x,y:e.y[0]},s={x:isArray$4(e.x)?e.x[1]:e.x,y:e.y[1]},l,c=getAngleByPoint(a,o);if(e.points&&e.points[0].y===e.points[1].y)l=c;else{var u=getAngleByPoint(a,s);c>=u&&(u=u+Math.PI*2),l=c+(u-c)/2}return l},r.prototype.getCirclePoint=function(e,a){var o=this.getCoordinate(),s=o.getCenter(),l=o.getRadius()+a;return __assign$8(__assign$8({},polarToCartesian(s.x,s.y,l,e)),{angle:e,r:l})},r}(PolarLabel),MARGIN$1=4;function antiCollision$1(n,r,e,a,o,s){var l,c,u=!0,f=a.start,d=a.end,g=Math.min(f.y,d.y),v=Math.abs(f.y-d.y),p,y=0,m=Number.MIN_VALUE,x=r.map(function(T){return T.y>y&&(y=T.y),T.y<m&&(m=T.y),{size:e,targets:[T.y-g]}});for(m-=g,y-g>v&&(v=y-g);u;)for(x.forEach(function(T){var w=(Math.min.apply(m,T.targets)+Math.max.apply(m,T.targets))/2;T.pos=Math.min(Math.max(m,w-T.size/2),v-T.size)}),u=!1,p=x.length;p--;)if(p>0){var A=x[p-1],_=x[p];A.pos+A.size>_.pos&&(A.size+=_.size,A.targets=A.targets.concat(_.targets),A.pos+A.size>v&&(A.pos=v-A.size),x.splice(p,1),u=!0)}p=0,x.forEach(function(T){var w=g+e/2;T.targets.forEach(function(){r[p].y=T.pos+w,w+=e,p++})});var b={};try{for(var S=__values(n),C=S.next();!C.done;C=S.next()){var E=C.value;b[E.get("id")]=E}}catch(T){l={error:T}}finally{try{C&&!C.done&&(c=S.return)&&c.call(S)}finally{if(l)throw l.error}}r.forEach(function(T){var w=T.r*T.r,L=Math.pow(Math.abs(T.y-o.y),2);if(w<L)T.x=o.x;else{var M=Math.sqrt(w-L);s?T.x=o.x+M:T.x=o.x-M}var O=b[T.id];O.attr("x",T.x),O.attr("y",T.y);var P=find$2(O.getChildren(),function(N){return N.get("type")==="text"});P&&(P.attr("y",T.y),P.attr("x",T.x))})}function distribute(n,r,e,a){if(!(!n.length||!r.length)){var o=n[0]?n[0].offset:0,s=r[0].get("coordinate"),l=s.getRadius(),c=s.getCenter();if(o>0){var u=14,f=l+o,d=f*2+u*2,g={start:s.start,end:s.end},v=[[],[]];n.forEach(function(p){p&&(p.textAlign==="right"?v[0].push(p):v[1].push(p))}),v.forEach(function(p,y){var m=d/u;p.length>m&&(p.sort(function(x,A){return A["..percent"]-x["..percent"]}),p.splice(m,p.length-m)),p.sort(function(x,A){return x.y-A.y}),antiCollision$1(r,p,u,g,c,y)})}each$1(n,function(p){if(p&&p.labelLine){var y=p.offset,m=p.angle,x=polarToCartesian(c.x,c.y,l,m),A=polarToCartesian(c.x,c.y,l+y/2,m),_=p.x+get(p,"offsetX",0),b=p.y+get(p,"offsetY",0),S={x:_-Math.cos(m)*MARGIN$1,y:b-Math.sin(m)*MARGIN$1};isObject$1(p.labelLine)||(p.labelLine={}),p.labelLine.path=["M ".concat(x.x),"".concat(x.y," Q").concat(A.x),"".concat(A.y," ").concat(S.x),S.y].join(",")}})}}function antiCollision(n,r,e){var a=n.filter(function(y){return!y.invisible});a.sort(function(y,m){return y.y-m.y});var o=!0,s=e.minY,l=e.maxY,c=Math.abs(s-l),u,f=0,d=Number.MIN_VALUE,g=a.map(function(y){return y.y>f&&(f=y.y),y.y<d&&(d=y.y),{content:y.content,size:r,targets:[y.y-s],pos:null}});for(d-=s,f-s>c&&(c=f-s);o;)for(g.forEach(function(y){var m=(Math.min.apply(d,y.targets)+Math.max.apply(d,y.targets))/2;y.pos=Math.min(Math.max(d,m-y.size/2),c-y.size),y.pos=Math.max(0,y.pos)}),o=!1,u=g.length;u--;)if(u>0){var v=g[u-1],p=g[u];v.pos+v.size>p.pos&&(v.size+=p.size,v.targets=v.targets.concat(p.targets),v.pos+v.size>c&&(v.pos=c-v.size),g.splice(u,1),o=!0)}u=0,g.forEach(function(y){var m=s+r/2;y.targets.forEach(function(){a[u].y=y.pos+m,m+=r,u++})})}var MARGIN=4;function drawLabelline$1(n,r){var e=r.getCenter(),a=r.getRadius();if(n&&n.labelLine){var o=n.angle,s=n.offset,l=polarToCartesian(e.x,e.y,a,o),c=n.x+get(n,"offsetX",0)*(Math.cos(o)>0?1:-1),u=n.y+get(n,"offsetY",0)*(Math.sin(o)>0?1:-1),f={x:c-Math.cos(o)*MARGIN,y:u-Math.sin(o)*MARGIN},d=n.labelLine.smooth,g=[],v=f.x-e.x,p=f.y-e.y,y=Math.atan(p/v);if(v<0&&(y+=Math.PI),d===!1){isObject$1(n.labelLine)||(n.labelLine={});var m=0;(o<0&&o>-Math.PI/2||o>Math.PI*1.5)&&f.y>l.y&&(m=1),o>=0&&o<Math.PI/2&&f.y>l.y&&(m=1),o>=Math.PI/2&&o<Math.PI&&l.y>f.y&&(m=1),(o<-Math.PI/2||o>=Math.PI&&o<Math.PI*1.5)&&l.y>f.y&&(m=1);var x=s/2>4?4:Math.max(s/2-1,0),A=polarToCartesian(e.x,e.y,a+x,o),_=polarToCartesian(e.x,e.y,a+s/2,y),b=0;g.push("M ".concat(l.x," ").concat(l.y)),g.push("L ".concat(A.x," ").concat(A.y)),g.push("A ".concat(e.x," ").concat(e.y," 0 ").concat(b," ").concat(m," ").concat(_.x," ").concat(_.y)),g.push("L ".concat(f.x," ").concat(f.y))}else{var A=polarToCartesian(e.x,e.y,a+(s/2>4?4:Math.max(s/2-1,0)),o),S=l.x<e.x?1:-1;g.push("M ".concat(f.x," ").concat(f.y));var C=(l.y-e.y)/(l.x-e.x),E=(f.y-e.y)/(f.x-e.x);Math.abs(C-E)>Math.pow(Math.E,-16)&&g.push.apply(g,["C",f.x+S*4,f.y,2*A.x-l.x,2*A.y-l.y,l.x,l.y]),g.push("L ".concat(l.x," ").concat(l.y))}n.labelLine.path=g.join(" ")}}function pieOuterLabelLayout(n,r,e,a){var o,s,l=filter(n,function(w){return!isNil(w)}),c=r[0]&&r[0].get("coordinate");if(c){var u=c.getCenter(),f=c.getRadius(),d={};try{for(var g=__values(r),v=g.next();!v.done;v=g.next()){var p=v.value;d[p.get("id")]=p}}catch(w){o={error:w}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}var y=get(l[0],"labelHeight",14),m=get(l[0],"offset",0);if(!(m<=0)){var x="left",A="right",_=groupBy(l,function(w){return w.x<u.x?x:A}),b=c.start,S=c.end,C=Math.min((f+m+y)*2,c.getHeight()),E=C/2,T={minX:b.x,maxX:S.x,minY:u.y-E,maxY:u.y+E};each$1(_,function(w,L){var M=Math.floor(C/y);w.length>M&&(w.sort(function(O,P){return P.percent-O.percent}),each$1(w,function(O,P){P+1>M&&(d[O.id].set("visible",!1),O.invisible=!0)})),antiCollision(w,y,T)}),each$1(_,function(w,L){each$1(w,function(M){var O=L===A,P=d[M.id],N=P.getChildByIndex(0);if(N){var G=f+m,Y=M.y-u.y,F=Math.pow(G,2),z=Math.pow(Y,2),W=F-z>0?F-z:0,j=Math.sqrt(W),U=Math.abs(Math.cos(M.angle)*G);O?M.x=u.x+Math.max(j,U):M.x=u.x-Math.max(j,U)}N&&(N.attr("y",M.y),N.attr("x",M.x)),drawLabelline$1(M,c)})})}}}var INFLECTION_OFFSET=4,LABEL_OFFSET_X=4,LABEL_TEXT_LINE_OFFSET=4;function drawLabelline(n,r,e){var a=r.getCenter(),o=r.getRadius(),s={x:n.x-(e?LABEL_TEXT_LINE_OFFSET:-LABEL_TEXT_LINE_OFFSET),y:n.y},l=polarToCartesian(a.x,a.y,o+INFLECTION_OFFSET,n.angle),c={x:s.x,y:s.y},u={x:l.x,y:l.y},f=polarToCartesian(a.x,a.y,o,n.angle),d="";if(s.y!==l.y){var g=e?4:-4;c.y=s.y,n.angle<0&&n.angle>=-Math.PI/2&&(c.x=Math.max(l.x,s.x-g),s.y<l.y?u.y=c.y:(u.y=l.y,u.x=Math.max(u.x,c.x-g))),n.angle>0&&n.angle<Math.PI/2&&(c.x=Math.max(l.x,s.x-g),s.y>l.y?u.y=c.y:(u.y=l.y,u.x=Math.max(u.x,c.x-g))),n.angle>Math.PI/2&&(c.x=Math.min(l.x,s.x-g),s.y>l.y?u.y=c.y:(u.y=l.y,u.x=Math.min(u.x,c.x-g))),n.angle<-Math.PI/2&&(c.x=Math.min(l.x,s.x-g),s.y<l.y?u.y=c.y:(u.y=l.y,u.x=Math.min(u.x,c.x-g)))}d=["M ".concat(s.x,",").concat(s.y),"L ".concat(c.x,",").concat(c.y),"L ".concat(u.x,",").concat(u.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(f.x,",").concat(f.y)].join(" "),n.labelLine=deepMix({},n.labelLine,{path:d})}function pieSpiderLabelLayout(n,r,e,a){var o,s,l=r[0]&&r[0].get("coordinate");if(l){var c=l.getCenter(),u=l.getRadius(),f={};try{for(var d=__values(r),g=d.next();!g.done;g=d.next()){var v=g.value;f[v.get("id")]=v}}catch(w){o={error:w}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}var p=get(n[0],"labelHeight",14),y=Math.max(get(n[0],"offset",0),INFLECTION_OFFSET);each$1(n,function(w){if(w){var L=get(f,[w.id]);if(L){var M=w.x>c.x||w.x===c.x&&w.y>c.y,O=isNil(w.offsetX)?LABEL_OFFSET_X:w.offsetX,P=polarToCartesian(c.x,c.y,u+INFLECTION_OFFSET,w.angle),N=y+O;w.x=c.x+(M?1:-1)*(u+N),w.y=P.y}}});var m=l.start,x=l.end,A="left",_="right",b=groupBy(n,function(w){return w.x<c.x?A:_}),S=(u+y)*2+p;each$1(b,function(w){var L=w.length*p;L>S&&(S=Math.min(L,Math.abs(m.y-x.y)))});var C={minX:m.x,maxX:x.x,minY:c.y-S/2,maxY:c.y+S/2};each$1(b,function(w,L){var M=S/p;w.length>M&&(w.sort(function(O,P){return P.percent-O.percent}),each$1(w,function(O,P){P>M&&(f[O.id].set("visible",!1),O.invisible=!0)})),antiCollision(w,p,C)});var E=C.minY,T=C.maxY;each$1(b,function(w,L){var M=L===_;each$1(w,function(O){var P=get(f,O&&[O.id]);if(P){if(O.y<E||O.y>T){P.set("visible",!1);return}var N=P.getChildByIndex(0),G=N.getCanvasBBox(),Y={x:M?G.x:G.maxX,y:G.y+G.height/2};translate(N,O.x-Y.x,O.y-Y.y),O.labelLine&&drawLabelline(O,l,M)}})})}}function limitInCanvas(n,r,e,a){each$1(r,function(o){var s=a.minX,l=a.minY,c=a.maxX,u=a.maxY,f=o.getCanvasBBox(),d=f.minX,g=f.minY,v=f.maxX,p=f.maxY,y=f.x,m=f.y,x=f.width,A=f.height,_=y,b=m;(d<s||v<s)&&(_=s),(g<l||p<l)&&(b=l),d>c?_=c-x:v>c&&(_=_-(v-c)),g>u?b=u-A:p>u&&(b=b-(p-u)),(_!==y||b!==m)&&translate(o,_-y,b-m)})}function limitInShape(n,r,e,a){each$1(r,function(o,s){var l=o.getCanvasBBox(),c=e[s].getBBox();(l.minX<c.minX||l.minY<c.minY||l.maxX>c.maxX||l.maxY>c.maxY)&&o.remove(!0)})}var MAX_TIMES=100,Greedy=function(){function n(r){r===void 0&&(r={}),this.bitmap={};var e=r.xGap,a=e===void 0?1:e,o=r.yGap,s=o===void 0?8:o;this.xGap=a,this.yGap=s}return n.prototype.hasGap=function(r){for(var e=!0,a=this.bitmap,o=Math.round(r.minX),s=Math.round(r.maxX),l=Math.round(r.minY),c=Math.round(r.maxY),u=o;u<=s;u+=1){if(!a[u]){a[u]={};continue}if(u===o||u===s){for(var f=l;f<=c;f++)if(a[u][f]){e=!1;break}}else if(a[u][l]||a[u][c]){e=!1;break}}return e},n.prototype.fillGap=function(r){for(var e=this.bitmap,a=Math.round(r.minX),o=Math.round(r.maxX),s=Math.round(r.minY),l=Math.round(r.maxY),c=a;c<=o;c+=1)e[c]||(e[c]={});for(var c=a;c<=o;c+=this.xGap){for(var u=s;u<=l;u+=this.yGap)e[c][u]=!0;e[c][l]=!0}if(this.yGap!==1)for(var c=s;c<=l;c+=1)e[a][c]=!0,e[o][c]=!0;if(this.xGap!==1)for(var c=a;c<=o;c+=1)e[c][s]=!0,e[c][l]=!0},n.prototype.destroy=function(){this.bitmap={}},n}();function spiralFill(n,r,e){e===void 0&&(e=MAX_TIMES);var a=-1,o=n.attr(),s=o.x,l=o.y,c=n.getCanvasBBox(),u=Math.sqrt(c.width*c.width+c.height*c.height),f,d=-a,g=0,v=0,p=function(A){var _=A*.1;return[_*Math.cos(_),_*Math.sin(_)]};if(r.hasGap(c))return r.fillGap(c),!0;for(var y=!1,m=0,x={};Math.min(Math.abs(g),Math.abs(v))<u&&m<e;)if(f=p(d+=a),g=~~f[0],v=~~f[1],!(!g&&!v||x["".concat(g,"-").concat(v)])&&(n.attr({x:s+g,y:l+v}),g+v<0&&n.attr("textAlign","right"),m++,r.hasGap(n.getCanvasBBox()))){r.fillGap(n.getCanvasBBox()),y=!0,x["".concat(g,"-").concat(v)]=!0;break}return y}function adjustLabelPosition(n,r,e,a){var o=n.getCanvasBBox(),s=o.width,l=o.height,c={x:r,y:e,textAlign:"center"};switch(a){case 0:c.y-=l+1,c.x+=1,c.textAlign="left";break;case 1:c.y-=l+1,c.x-=1,c.textAlign="right";break;case 2:c.y+=l+1,c.x-=1,c.textAlign="right";break;case 3:c.y+=l+1,c.x+=1,c.textAlign="left";break;case 5:c.y-=l*2+2;break;case 6:c.y+=l*2+2;break;case 7:c.x+=s+1,c.textAlign="left";break;case 8:c.x-=s+1,c.textAlign="right";break}return n.attr(c),n.getCanvasBBox()}function fixedOverlap(n,r,e,a){var o=new Greedy;each$1(r,function(s){var l=s.find(function(c){return c.get("type")==="text"});spiralFill(l,o)||s.remove(!0)}),o.destroy()}function overlap(n,r,e,a){var o=new Greedy;each$1(r,function(s){for(var l=s.find(function(p){return p.get("type")==="text"}),c=l.attr(),u=c.x,f=c.y,d=!1,g=0;g<=8;g++){var v=adjustLabelPosition(l,u,f,g);if(o.hasGap(v)){o.fillGap(v),d=!0;break}}d||s.remove(!0)}),o.destroy()}function dot$2(n,r){return(n[0]||0)*(r[0]||0)+(n[1]||0)*(r[1]||0)+(n[2]||0)*(r[2]||0)}function getAxes(n){if(n.length>4)return[];var r=function(o,s){return[s.x-o.x,s.y-o.y]},e=r(n[0],n[1]),a=r(n[1],n[2]);return[e,a]}function rotateAtPoint(n,r,e){r===void 0&&(r=0),e===void 0&&(e={x:0,y:0});var a=n.x,o=n.y;return{x:(a-e.x)*Math.cos(-r)+(o-e.y)*Math.sin(-r)+e.x,y:(e.x-a)*Math.sin(-r)+(o-e.y)*Math.cos(-r)+e.y}}function getRectPoints(n){var r=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],e=n.rotation;return e?[rotateAtPoint(r[0],e,r[0]),rotateAtPoint(r[1],e,r[0]),rotateAtPoint(r[2],e,r[0]),rotateAtPoint(r[3],e,r[0])]:r}function getProjection(n,r){if(n.length>4)return{min:0,max:0};var e=[];return n.forEach(function(a){e.push(dot$2([a.x,a.y],r))}),{min:Math.min.apply(Math,__spreadArray$2([],__read(e),!1)),max:Math.max.apply(Math,__spreadArray$2([],__read(e),!1))}}function isProjectionOverlap(n,r){return n.max>r.min&&n.min<r.max}function isValidNumber(n){return typeof n=="number"&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0}function isValidBox(n){return["x","y","width","height"].every(function(r){return isValidNumber(n[r])})}function isIntersectRect(n,r,e){return e===void 0&&(e=0),!(r.x>n.x+n.width+e||r.x+r.width<n.x-e||r.y>n.y+n.height+e||r.y+r.height<n.y-e)}function intersect(n,r,e){if(e===void 0&&(e=0),!isValidBox(n)||!isValidBox(r))return!1;if(!n.rotation&&!r.rotation)return isIntersectRect(n,r,e);for(var a=getRectPoints(n),o=getRectPoints(r),s=getAxes(a).concat(getAxes(o)),l=0;l<s.length;l++){var c=s[l],u=getProjection(a,c),f=getProjection(o,c);if(!isProjectionOverlap(u,f))return!1}return!0}var MyWorker=function(){function n(r){var e=this;this.queue=[],this.worker=new Worker(r),this.worker.onmessage=function(a){var o;(o=e.queue.shift())===null||o===void 0||o.resolve(a)},this.worker.onmessageerror=function(a){var o;console.warn("[AntV G2] Web worker is not available"),(o=e.queue.shift())===null||o===void 0||o.reject(a)}}return n.prototype.post=function(r,e){var a=this;return new Promise(function(o,s){a.queue.push({resolve:o,reject:s});try{a.worker.postMessage(r)}catch{console.warn("[AntV G2] Web worker is not available"),isFunction$1(e)&&e()}})},n.prototype.destroy=function(){this.worker.terminate()},n}();function createWorker(n){if(!(typeof window>"u")){var r;try{r=new Blob([n.toString()],{type:"application/javascript"})}catch{r=new window.BlobBuilder,r.append(n.toString()),r=r.getBlob()}return new MyWorker(URL.createObjectURL(r))}}var onmessage=function(n){function r(){function f(b,S){return(b[0]||0)*(S[0]||0)+(b[1]||0)*(S[1]||0)+(b[2]||0)*(S[2]||0)}function d(b){if(b.length>4)return[];var S=function(T,w){return[w.x-T.x,w.y-T.y]},C=S(b[0],b[1]),E=S(b[1],b[2]);return[C,E]}function g(b,S,C){S===void 0&&(S=0),C===void 0&&(C={x:0,y:0});var E=b.x,T=b.y;return{x:(E-C.x)*Math.cos(-S)+(T-C.y)*Math.sin(-S)+C.x,y:(C.x-E)*Math.sin(-S)+(T-C.y)*Math.cos(-S)+C.y}}function v(b){var S=[{x:b.x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}],C=b.rotation;return C?[g(S[0],C,S[0]),g(S[1],C,S[0]),g(S[2],C,S[0]),g(S[3],C,S[0])]:S}function p(b,S){if(b.length>4)return{min:0,max:0};var C=[];return b.forEach(function(E){C.push(f([E.x,E.y],S))}),{min:Math.min.apply(null,C),max:Math.max.apply(null,C)}}function y(b,S){return b.max>S.min&&b.min<S.max}function m(b){return typeof b=="number"&&!Number.isNaN(b)&&b!==1/0&&b!==-1/0}function x(b){return["x","y","width","height"].every(function(S){return m(b[S])})}function A(b,S,C){return C===void 0&&(C=0),!(S.x>b.x+b.width+C||S.x+S.width<b.x-C||S.y>b.y+b.height+C||S.y+S.height<b.y-C)}function _(b,S,C){if(C===void 0&&(C=0),!x(b)||!x(S))return!1;if(!b.rotation&&!S.rotation)return A(b,S,C);for(var E=v(b),T=v(S),w=d(E).concat(d(T)),L=0;L<w.length;L++){var M=w[L],O=p(E,M),P=p(T,M);if(!y(O,P))return!1}return!0}return{intersect:_}}var e=r().intersect;function a(f){for(var d=f.slice(),g=0;g<d.length;g++){var v=d[g];if(v.visible)for(var p=g+1;p<d.length;p++){var y=d[p];v!==y&&y.visible&&e(v,y)&&(y.visible=!1)}}return d}var o={"hide-overlap":a};try{var s=JSON.parse(n.data);if(!s||!s.type||!o[s.type])return;var l=s.type,c=s.items,u=o[l](c);self.postMessage(u)}catch(f){throw f}},code=`
   self.onmessage = `.concat(onmessage.toString(),`
`),layout=function(n){for(var r=n.slice(),e=0;e<r.length;e++){var a=r[e];if(a.visible)for(var o=e+1;o<r.length;o++){var s=r[o];a!==s&&s.visible&&intersect(a,s)&&(s.visible=!1)}}return r},cache=new Map,worker=createWorker(code);function hideOverlap(n,r,e,a){return __awaiter(this,void 0,void 0,function(){var o,s,l,c,u,f;return __generator(this,function(d){switch(d.label){case 0:return o=r.map(function(g,v){return __assign$8(__assign$8({},getLabelBackgroundInfo(g,n[v],get(n[v],"background.padding"))),{visible:!0})}),s=JSON.stringify(o),l=function(g){return cache.set(s,g),each$1(g,function(v,p){var y=v.visible,m=r[p];y?m==null||m.show():m==null||m.hide()}),g},cache.get(s)?(l(cache.get(s)),[3,7]):[3,1];case 1:if(!worker)return[3,6];d.label=2;case 2:return d.trys.push([2,4,,5]),c=JSON.stringify({type:"hide-overlap",items:o}),[4,worker.post(c,function(){return l(layout(o))})];case 3:return u=d.sent(),l(Array.isArray(u.data)?u.data:[]),[3,5];case 4:return f=d.sent(),console.error(f),l(layout(o)),[3,5];case 5:return[3,7];case 6:l(layout(o)),d.label=7;case 7:return[2]}})})}var preset={"#5B8FF9":!0},isContrastColorWhite=function(n){var r=colorUtil.toRGB(n).toUpperCase();if(preset[r])return preset[r];var e=__read(colorUtil.rgb2arr(r),3),a=e[0],o=e[1],s=e[2],l=(a*299+o*587+s*114)/1e3<128;return l};function adjustColor(n,r,e){if(e.length!==0){var a=e[0].get("element"),o=a.geometry.theme,s=o.labels||{},l=s.fillColorLight,c=s.fillColorDark;e.forEach(function(u,f){var d=r[f],g=d.find(function(A){return A.get("type")==="text"}),v=BBox.fromObject(u.getBBox()),p=BBox.fromObject(g.getCanvasBBox()),y=!v.contains(p),m=u.attr("fill"),x=isContrastColorWhite(m);y?g.attr(o.overflowLabels.style):x?l&&g.attr("fill",l):c&&g.attr("fill",c)})}}function shouldInShapeSingle(n,r,e){var a=n.coordinate,o=findLabelTextShape(r),s=BBox.fromObject(o.getCanvasBBox()),l=BBox.fromObject(e.getBBox());return a.isTransposed?l.height>=s.height:l.width>=s.width}function shouldInShape(n,r,e){var a=!!n.getAdjust("stack");return a||r.every(function(o,s){var l=e[s];return shouldInShapeSingle(n,o,l)})}function moveInShape(n,r,e){var a=n.coordinate,o=BBox.fromObject(e.getBBox()),s=findLabelTextShape(r);a.isTransposed?s.attr({x:o.minX+o.width/2,textAlign:"center"}):s.attr({y:o.minY+o.height/2,textBaseline:"middle"})}function intervalAdjustPosition(n,r,e){var a;if(e.length!==0){var o=(a=e[0])===null||a===void 0?void 0:a.get("element"),s=o==null?void 0:o.geometry;if(!(!s||s.type!=="interval")){var l=shouldInShape(s,r,e);l&&e.forEach(function(c,u){var f=r[u];moveInShape(s,f,c)})}}}function filterLabel(n){var r=500,e=[],a=Math.max(Math.floor(n.length/r),1);return each$1(n,function(o,s){s%a===0?e.push(o):o.set("visible",!1)}),e}function intervalHideOverlap(n,r,e){var a;if(e.length!==0){var o=(a=e[0])===null||a===void 0?void 0:a.get("element"),s=o==null?void 0:o.geometry;if(!(!s||s.type!=="interval")){var l=filterLabel(r),c=__read(s.getXYFields(),1),u=c[0],f=[],d=[],g=groupBy(l,function(x){return x.get("data")[u]}),v=uniq$2(map$2(l,function(x){return x.get("data")[u]})),p;l.forEach(function(x){x.set("visible",!0)});var y=function(x){x&&(x.length&&d.push(x.pop()),d.push.apply(d,__spreadArray$2([],__read(x),!1)))};for(size(v)>0&&(p=v.shift(),y(g[p])),size(v)>0&&(p=v.pop(),y(g[p])),each$1(v.reverse(),function(x){y(g[x])});d.length>0;){var m=d.shift();m.get("visible")&&(checkShapeOverlap$2(m,f)?m.set("visible",!1):f.push(m))}}}}function sortLabels$1(n,r){var e=n.getXYFields()[1],a=[],o=r.sort(function(s,l){return s.get("data")[e]-s.get("data")[e]});return o.length>0&&a.push(o.shift()),o.length>0&&a.push(o.pop()),a.push.apply(a,__spreadArray$2([],__read(o),!1)),a}function hasSome$1(n,r,e){return n.some(function(a){return e(a,r)})}function getOverlapArea$1(n,r,e){e===void 0&&(e=0);var a=Math.max(0,Math.min(n.x+n.width+e,r.x+r.width+e)-Math.max(n.x-e,r.x-e)),o=Math.max(0,Math.min(n.y+n.height+e,r.y+r.height+e)-Math.max(n.y-e,r.y-e));return a*o}function checkShapeOverlap$1(n,r){return hasSome$1(n,r,function(e,a){var o=findLabelTextShape(e),s=findLabelTextShape(a);return getOverlapArea$1(o.getCanvasBBox(),s.getCanvasBBox(),2)>0})}function pointAdjustPosition(n,r,e,a,o){var s,l;if(e.length!==0){var c=(s=e[0])===null||s===void 0?void 0:s.get("element"),u=c==null?void 0:c.geometry;if(!(!u||u.type!=="point")){var f=__read(u.getXYFields(),2),d=f[0],g=f[1],v=groupBy(r,function(m){return m.get("data")[d]}),p=[],y=o&&o.offset||((l=n[0])===null||l===void 0?void 0:l.offset)||12;map$2(keys(v).reverse(),function(m){for(var x=sortLabels$1(u,v[m]);x.length;){var A=x.shift(),_=findLabelTextShape(A);if(hasSome$1(p,A,function(C,E){return C.get("data")[d]===E.get("data")[d]&&C.get("data")[g]===E.get("data")[g]})){_.set("visible",!1);continue}var b=checkShapeOverlap$1(p,A),S=!1;if(b&&(_.attr("y",_.attr("y")+2*y),S=checkShapeOverlap$1(p,A)),S){_.set("visible",!1);continue}p.push(A)}})}}}function sortLabels(n,r){var e=n.getXYFields()[1],a=[],o=r.sort(function(s,l){return s.get("data")[e]-s.get("data")[e]});return o.length>0&&a.push(o.shift()),o.length>0&&a.push(o.pop()),a.push.apply(a,__spreadArray$2([],__read(o),!1)),a}function hasSome(n,r,e){return n.some(function(a){return e(a,r)})}function getOverlapArea(n,r,e){e===void 0&&(e=0);var a=Math.max(0,Math.min(n.x+n.width+e,r.x+r.width+e)-Math.max(n.x-e,r.x-e)),o=Math.max(0,Math.min(n.y+n.height+e,r.y+r.height+e)-Math.max(n.y-e,r.y-e));return a*o}function checkShapeOverlap(n,r){return hasSome(n,r,function(e,a){var o=findLabelTextShape(e),s=findLabelTextShape(a);return getOverlapArea(o.getCanvasBBox(),s.getCanvasBBox(),2)>0})}function pathAdjustPosition(n,r,e,a,o){var s,l;if(e.length!==0){var c=(s=e[0])===null||s===void 0?void 0:s.get("element"),u=c==null?void 0:c.geometry;if(!(!u||["path","line","area"].indexOf(u.type)<0)){var f=__read(u.getXYFields(),2),d=f[0],g=f[1],v=groupBy(r,function(m){return m.get("data")[d]}),p=[],y=o&&o.offset||((l=n[0])===null||l===void 0?void 0:l.offset)||12;map$2(keys(v).reverse(),function(m){for(var x=sortLabels(u,v[m]);x.length;){var A=x.shift(),_=findLabelTextShape(A);if(hasSome(p,A,function(C,E){return C.get("data")[d]===E.get("data")[d]&&C.get("data")[g]===E.get("data")[g]})){_.set("visible",!1);continue}var b=checkShapeOverlap(p,A),S=!1;if(b&&(_.attr("y",_.attr("y")+2*y),S=checkShapeOverlap(p,A)),S){_.set("visible",!1);continue}p.push(A)}})}}}var ctx$1;function getCanvasContext$1(){return ctx$1||(ctx$1=document.createElement("canvas").getContext("2d")),ctx$1}var measureTextWidth=memoize(function(n,r){r===void 0&&(r={});var e=r.fontSize,a=r.fontFamily,o=r.fontWeight,s=r.fontStyle,l=r.fontVariant,c=getCanvasContext$1();return c.font=[s,l,o,"".concat(e,"px"),a].join(" "),c.measureText(isString$1(n)?n:"").width},function(n,r){return r===void 0&&(r={}),__spreadArray$2([n],__read(values(r)),!1).join("")}),getEllipsisText=function(n,r,e){var a=16,o=measureTextWidth("...",e),s;isString$1(n)?s=n:s=toString$2(n);var l=r,c=[],u,f;if(measureTextWidth(n,e)<=r)return n;for(;u=s.substr(0,a),f=measureTextWidth(u,e),!(f+o>l&&f>l);)if(c.push(u),l-=f,s=s.substr(a),!s)return c.join("");for(;u=s.substr(0,1),f=measureTextWidth(u,e),!(f+o>l);)if(c.push(u),l-=f,s=s.substr(1),!s)return c.join("");return"".concat(c.join(""),"...")};function limitInPlot$3(n,r,e,a,o){if(!(r.length<=0)){var s=(o==null?void 0:o.direction)||["top","right","bottom","left"],l=(o==null?void 0:o.action)||"translate",c=(o==null?void 0:o.margin)||0,u=r[0].get("coordinate");if(u){var f=getCoordinateBBox(u,c),d=f.minX,g=f.minY,v=f.maxX,p=f.maxY;each$1(r,function(y){var m=y.getCanvasBBox(),x=m.minX,A=m.minY,_=m.maxX,b=m.maxY,S=m.x,C=m.y,E=m.width,T=m.height,w=S,L=C;if(s.indexOf("left")>=0&&(x<d||_<d)&&(w=d),s.indexOf("top")>=0&&(A<g||b<g)&&(L=g),s.indexOf("right")>=0&&(x>v?w=v-E:_>v&&(w=w-(_-v))),s.indexOf("bottom")>=0&&(A>p?L=p-T:b>p&&(L=L-(b-p))),w!==S||L!==C){var M=w-S;if(l==="translate")translate(y,M,L-C);else if(l==="ellipsis"){var O=y.findAll(function(P){return P.get("type")==="text"});O.forEach(function(P){var N=pick$1(P.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),G=P.getCanvasBBox(),Y=getEllipsisText(P.attr("text"),G.width-Math.abs(M),N);P.attr("text",Y)})}else y.hide()}})}}}function fadeIn(n,r,e){var a={fillOpacity:isNil(n.attr("fillOpacity"))?1:n.attr("fillOpacity"),strokeOpacity:isNil(n.attr("strokeOpacity"))?1:n.attr("strokeOpacity"),opacity:isNil(n.attr("opacity"))?1:n.attr("opacity")};n.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),n.animate(a,r)}function fadeOut(n,r,e){var a={fillOpacity:0,strokeOpacity:0,opacity:0},o=r.easing,s=r.duration,l=r.delay;n.animate(a,s,o,function(){n.remove(!0)},l)}function transformShape(n,r,e){var a,o=__read(r,2),s=o[0],l=o[1];return n.applyToMatrix([s,l,1]),e==="x"?(n.setMatrix(transform$6(n.getMatrix(),[["t",-s,-l],["s",.01,1],["t",s,l]])),a=transform$6(n.getMatrix(),[["t",-s,-l],["s",100,1],["t",s,l]])):e==="y"?(n.setMatrix(transform$6(n.getMatrix(),[["t",-s,-l],["s",1,.01],["t",s,l]])),a=transform$6(n.getMatrix(),[["t",-s,-l],["s",1,100],["t",s,l]])):e==="xy"&&(n.setMatrix(transform$6(n.getMatrix(),[["t",-s,-l],["s",.01,.01],["t",s,l]])),a=transform$6(n.getMatrix(),[["t",-s,-l],["s",100,100],["t",s,l]])),a}function doScaleAnimate(n,r,e,a,o){var s=e.start,l=e.end,c=e.getWidth(),u=e.getHeight(),f,d;o==="y"?(f=s.x+c/2,d=a.y<s.y?a.y:s.y):o==="x"?(f=a.x>s.x?a.x:s.x,d=s.y+u/2):o==="xy"&&(e.isPolar?(f=e.getCenter().x,d=e.getCenter().y):(f=(s.x+l.x)/2,d=(s.y+l.y)/2));var g=transformShape(n,[f,d],o);n.animate({matrix:g},r)}function growInX(n,r,e){var a=e.coordinate,o=e.minYPoint;doScaleAnimate(n,r,a,o,"x")}function growInY(n,r,e){var a=e.coordinate,o=e.minYPoint;doScaleAnimate(n,r,a,o,"y")}function growInXY(n,r,e){var a=e.coordinate,o=e.minYPoint;doScaleAnimate(n,r,a,o,"xy")}function pathIn(n,r,e){var a=n.getTotalLength();n.attr("lineDash",[a]),n.animate(function(o){return{lineDashOffset:(1-o)*a}},r)}function positionUpdate(n,r,e){var a=e.toAttrs,o=a.x,s=a.y;delete a.x,delete a.y,n.attr(a),n.animate({x:o,y:s},r)}function scaleInX(n,r,e){var a=n.getBBox(),o=n.get("origin").mappingData,s=o.points,l=s[0].y-s[1].y>0?a.maxX:a.minX,c=(a.minY+a.maxY)/2;n.applyToMatrix([l,c,1]);var u=transform$6(n.getMatrix(),[["t",-l,-c],["s",.01,1],["t",l,c]]);n.setMatrix(u),n.animate({matrix:transform$6(n.getMatrix(),[["t",-l,-c],["s",100,1],["t",l,c]])},r)}function scaleInY(n,r,e){var a=n.getBBox(),o=n.get("origin").mappingData,s=(a.minX+a.maxX)/2,l=o.points,c=l[0].y-l[1].y<=0?a.maxY:a.minY;n.applyToMatrix([s,c,1]);var u=transform$6(n.getMatrix(),[["t",-s,-c],["s",1,.01],["t",s,c]]);n.setMatrix(u),n.animate({matrix:transform$6(n.getMatrix(),[["t",-s,-c],["s",1,100],["t",s,c]])},r)}function getAngle(n,r){var e,a=getArcParams(n,r),o=a.startAngle,s=a.endAngle;return!isNumberEqual$1(o,-Math.PI*.5)&&o<-Math.PI*.5&&(o+=Math.PI*2),!isNumberEqual$1(s,-Math.PI*.5)&&s<-Math.PI*.5&&(s+=Math.PI*2),r[5]===0&&(e=__read([s,o],2),o=e[0],s=e[1]),isNumberEqual$1(o,Math.PI*1.5)&&(o=Math.PI*-.5),isNumberEqual$1(s,Math.PI*-.5)&&!isNumberEqual$1(o,s)&&(s=Math.PI*1.5),{startAngle:o,endAngle:s}}function getArcStartPoint(n){var r;return n[0]==="M"||n[0]==="L"?r=[n[1],n[2]]:(n[0]==="a"||n[0]==="A"||n[0]==="C")&&(r=[n[n.length-2],n[n.length-1]]),r}function getArcInfo(n){var r,e,a,o=n.filter(function(b){return b[0]==="A"||b[0]==="a"});if(o.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var s=o[0],l=o.length>1?o[1]:o[0],c=n.indexOf(s),u=n.indexOf(l),f=getArcStartPoint(n[c-1]),d=getArcStartPoint(n[u-1]),g=getAngle(f,s),v=g.startAngle,p=g.endAngle,y=getAngle(d,l),m=y.startAngle,x=y.endAngle;isNumberEqual$1(v,m)&&isNumberEqual$1(p,x)?(e=v,a=p):(e=Math.min(v,m),a=Math.max(p,x));var A=s[1],_=o[o.length-1][1];return A<_?(r=__read([_,A],2),A=r[0],_=r[1]):A===_&&(_=0),{startAngle:e,endAngle:a,radius:A,innerRadius:_}}function sectorPathUpdate(n,r,e){var a=e.toAttrs,o=e.coordinate,s=a.path||[],l=s.map(function(_){return _[0]});if(!(s.length<1)){var c=getArcInfo(s),u=c.startAngle,f=c.endAngle,d=c.radius,g=c.innerRadius,v=getArcInfo(n.attr("path")),p=v.startAngle,y=v.endAngle,m=o.getCenter(),x=u-p,A=f-y;if(x===0&&A===0){n.attr("path",s);return}n.animate(function(_){var b=p+_*x,S=y+_*A;return __assign$8(__assign$8({},a),{path:isEqual$1(l,["M","A","A","Z"])?getArcPath(m.x,m.y,d,b,S):getSectorPath(m.x,m.y,d,b,S,g)})},__assign$8(__assign$8({},r),{callback:function(){n.attr("path",s),isFunction$1(r.callback)&&r.callback()}}))}}function waveIn(n,r,e){var a=getCoordinateClipCfg(e.coordinate,20),o=a.type,s=a.startState,l=a.endState,c=n.setClip({type:o,attrs:s});e.toAttrs&&n.attr(e.toAttrs),c.animate(l,__assign$8(__assign$8({},r),{callback:function(){n&&!n.get("destroyed")&&n.set("clipShape",null),c.remove(!0),isFunction$1(r.callback)&&r.callback()}}))}function doShapeZoom(n,r,e){if(n.isGroup())each$1(n.getChildren(),function(c){doShapeZoom(c,r,e)});else{var a=n.getBBox(),o=(a.minX+a.maxX)/2,s=(a.minY+a.maxY)/2;if(n.applyToMatrix([o,s,1]),e==="zoomIn"){var l=transform$6(n.getMatrix(),[["t",-o,-s],["s",.01,.01],["t",o,s]]);n.setMatrix(l),n.animate({matrix:transform$6(n.getMatrix(),[["t",-o,-s],["s",100,100],["t",o,s]])},r)}else n.animate({matrix:transform$6(n.getMatrix(),[["t",-o,-s],["s",.01,.01],["t",o,s]])},__assign$8(__assign$8({},r),{callback:function(){n.remove(!0),isFunction$1(r.callback)&&r.callback()}}))}}function zoomIn(n,r,e){doShapeZoom(n,r,"zoomIn")}function zoomOut(n,r,e){doShapeZoom(n,r,"zoomOut")}function getFactTitleConfig(n){return[DIRECTION.TOP,DIRECTION.BOTTOM].includes(n)?{offsetX:0,offsetY:n===DIRECTION.TOP?-8:8,style:{textAlign:"center",textBaseline:n===DIRECTION.TOP?"bottom":"top"}}:[DIRECTION.LEFT,DIRECTION.RIGHT].includes(n)?{offsetX:n===DIRECTION.LEFT?-8:8,offsetY:0,style:{textAlign:n===DIRECTION.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function getAnglePoint(n,r,e){return{x:n.x+r*Math.cos(e),y:n.y+r*Math.sin(e)}}var Circle=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return deepMix({},n.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.getRegion=function(e,a){var o=.5,s={x:.5,y:.5},l=Math.PI*2/e,c=-1*Math.PI/2+l*a,u=o/(1+1/Math.sin(l/2)),f=getAnglePoint(s,o-u,c),d=Math.PI*5/4,g=Math.PI*1/4;return{start:getAnglePoint(f,u,d),end:getAnglePoint(f,u,g)}},r.prototype.afterEachView=function(e,a){this.processAxis(e,a)},r.prototype.beforeEachView=function(e,a){},r.prototype.generateFacets=function(e){var a=this,o=this.cfg,s=o.fields,l=o.type,c=__read(s,1),u=c[0];if(!u)throw new Error("No `fields` specified!");var f=this.getFieldValues(e,u),d=f.length,g=[];return f.forEach(function(v,p){var y=[{field:u,value:v,values:f}],m=filter(e,a.getFacetDataFilter(y)),x={type:l,data:m,region:a.getRegion(d,p),columnValue:v,columnField:u,columnIndex:p,columnValuesLength:d,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};g.push(x)}),g},r.prototype.getXAxisOption=function(e,a,o,s){return o},r.prototype.getYAxisOption=function(e,a,o,s){return o},r.prototype.renderTitle=function(){var e=this;each$1(this.facets,function(a){var o=a.columnValue,s=a.view,l=get(e.cfg.title,"formatter"),c=deepMix({position:["50%","0%"],content:l?l(o):o},getFactTitleConfig(DIRECTION.TOP),e.cfg.title);s.annotation().text(c)})},r}(Facet),List=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return deepMix({},n.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(e,a){this.processAxis(e,a)},r.prototype.beforeEachView=function(e,a){},r.prototype.generateFacets=function(e){var a=this,o=this.cfg.fields,s=this.cfg.cols,l=__read(o,1),c=l[0];if(!c)throw new Error("No `fields` specified!");var u=this.getFieldValues(e,c),f=u.length;s=s||f;var d=this.getPageCount(f,s),g=[];return u.forEach(function(v,p){var y=a.getRowCol(p,s),m=y.row,x=y.col,A=[{field:c,value:v,values:u}],_=filter(e,a.getFacetDataFilter(A)),b={type:a.cfg.type,data:_,region:a.getRegion(d,s,x,m),columnValue:v,rowValue:v,columnField:c,rowField:null,columnIndex:x,rowIndex:m,columnValuesLength:s,rowValuesLength:d,total:f};g.push(b)}),g},r.prototype.getXAxisOption=function(e,a,o,s){return s.rowIndex!==s.rowValuesLength-1&&s.columnValuesLength*s.rowIndex+s.columnIndex+1+s.columnValuesLength<=s.total?__assign$8(__assign$8({},o),{label:null,title:null}):o},r.prototype.getYAxisOption=function(e,a,o,s){return s.columnIndex!==0?__assign$8(__assign$8({},o),{title:null,label:null}):o},r.prototype.renderTitle=function(){var e=this;each$1(this.facets,function(a){var o=a.columnValue,s=a.view,l=get(e.cfg.title,"formatter"),c=deepMix({position:["50%","0%"],content:l?l(o):o},getFactTitleConfig(DIRECTION.TOP),e.cfg.title);s.annotation().text(c)})},r.prototype.getPageCount=function(e,a){return Math.floor((e+a-1)/a)},r.prototype.getRowCol=function(e,a){var o=Math.floor(e/a),s=e%a;return{row:o,col:s}},r}(Facet),Matrix=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return deepMix({},n.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:__assign$8({},n.prototype.getDefaultTitleCfg.call(this)),rowTitle:__assign$8({},n.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(e,a){this.processAxis(e,a)},r.prototype.beforeEachView=function(e,a){},r.prototype.generateFacets=function(e){for(var a=this.cfg,o=a.fields,s=a.type,l=o.length,c=l,u=[],f=0;f<c;f++)for(var d=o[f],g=0;g<l;g++){var v=o[g],p={type:s,data:e,region:this.getRegion(l,c,f,g),columnValue:d,rowValue:v,columnField:d,rowField:v,columnIndex:f,rowIndex:g,columnValuesLength:c,rowValuesLength:l};u.push(p)}return u},r.prototype.getXAxisOption=function(e,a,o,s){return s.rowIndex!==s.rowValuesLength-1?__assign$8(__assign$8({},o),{label:null,title:null}):o},r.prototype.getYAxisOption=function(e,a,o,s){return s.columnIndex!==0?__assign$8(__assign$8({},o),{title:null,label:null}):o},r.prototype.renderTitle=function(){var e=this;each$1(this.facets,function(a,o){var s=a.columnIndex,l=a.rowIndex,c=a.columnValuesLength;a.rowValuesLength;var u=a.columnValue,f=a.rowValue,d=a.view;if(l===0){var g=get(e.cfg.columnTitle,"formatter"),v=deepMix({position:["50%","0%"],content:g?g(u):u},getFactTitleConfig(DIRECTION.TOP),e.cfg.columnTitle);d.annotation().text(v)}if(s===c-1){var g=get(e.cfg.rowTitle,"formatter"),v=deepMix({position:["100%","50%"],content:g?g(f):f},getFactTitleConfig(DIRECTION.RIGHT),e.cfg.rowTitle);d.annotation().text(v)}})},r}(Facet),Mirror=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return deepMix({},n.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this),transpose:!1})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.beforeEachView=function(e,a){this.cfg.transpose?a.columnIndex%2===0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():a.rowIndex%2!==0&&e.coordinate().reflect("y")},r.prototype.afterEachView=function(e,a){this.processAxis(e,a)},r.prototype.generateFacets=function(e){var a=this,o=__read(this.cfg.fields,1),s=o[0],l=[],c=1,u=1,f=[""],d=[""],g,v;return this.cfg.transpose?(g=s,f=this.getFieldValues(e,g).slice(0,2),c=f.length):(v=s,d=this.getFieldValues(e,v).slice(0,2),u=d.length),f.forEach(function(p,y){d.forEach(function(m,x){var A=[{field:g,value:p,values:f},{field:v,value:m,values:d}],_=filter(e,a.getFacetDataFilter(A)),b={type:a.cfg.type,data:_,region:a.getRegion(u,c,y,x),columnValue:p,rowValue:m,columnField:g,rowField:v,columnIndex:y,rowIndex:x,columnValuesLength:c,rowValuesLength:u};l.push(b)})}),l},r.prototype.getXAxisOption=function(e,a,o,s){return s.columnIndex===1||s.rowIndex===1?__assign$8(__assign$8({},o),{label:null,title:null}):o},r.prototype.getYAxisOption=function(e,a,o,s){return o},r.prototype.renderTitle=function(){var e=this;each$1(this.facets,function(a,o){var s=a.columnValue,l=a.rowValue,c=a.view,u=get(e.cfg.title,"formatter");if(e.cfg.transpose){var f=deepMix({position:["50%","0%"],content:u?u(s):s},getFactTitleConfig(DIRECTION.TOP),e.cfg.title);c.annotation().text(f)}else{var f=deepMix({position:["100%","50%"],content:u?u(l):l},getFactTitleConfig(DIRECTION.RIGHT),e.cfg.title);c.annotation().text(f)}})},r}(Facet),Rect=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.afterEachView=function(e,a){this.processAxis(e,a)},r.prototype.beforeEachView=function(e,a){},r.prototype.getDefaultCfg=function(){return deepMix({},n.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:__assign$8({},n.prototype.getDefaultTitleCfg.call(this)),rowTitle:__assign$8({},n.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.generateFacets=function(e){var a=this,o=__read(this.cfg.fields,2),s=o[0],l=o[1],c=[],u=1,f=1,d=[""],g=[""];return s&&(d=this.getFieldValues(e,s),u=d.length),l&&(g=this.getFieldValues(e,l),f=g.length),d.forEach(function(v,p){g.forEach(function(y,m){var x=[{field:s,value:v,values:d},{field:l,value:y,values:g}],A=filter(e,a.getFacetDataFilter(x)),_={type:a.cfg.type,data:A,region:a.getRegion(f,u,p,m),columnValue:v,rowValue:y,columnField:s,rowField:l,columnIndex:p,rowIndex:m,columnValuesLength:u,rowValuesLength:f};c.push(_)})}),c},r.prototype.renderTitle=function(){var e=this;each$1(this.facets,function(a,o){var s=a.columnIndex,l=a.rowIndex,c=a.columnValuesLength,u=a.columnValue,f=a.rowValue,d=a.view;if(l===0){var g=get(e.cfg.columnTitle,"formatter"),v=deepMix({position:["50%","0%"],content:g?g(u):u},getFactTitleConfig(DIRECTION.TOP),e.cfg.columnTitle);d.annotation().text(v)}if(s===c-1){var g=get(e.cfg.rowTitle,"formatter"),v=deepMix({position:["100%","50%"],content:g?g(f):f},getFactTitleConfig(DIRECTION.RIGHT),e.cfg.rowTitle);d.annotation().text(v)}})},r.prototype.getXAxisOption=function(e,a,o,s){return s.rowIndex!==s.rowValuesLength-1?__assign$8(__assign$8({},o),{title:null,label:null}):s.columnIndex!==Math.floor((s.columnValuesLength-1)/2)?__assign$8(__assign$8({},o),{title:null}):o},r.prototype.getYAxisOption=function(e,a,o,s){return s.columnIndex!==0?__assign$8(__assign$8({},o),{title:null,label:null}):s.rowIndex!==Math.floor((s.rowValuesLength-1)/2)?__assign$8(__assign$8({},o),{title:null}):o},r}(Facet),Tree=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return r.prototype.afterEachView=function(e,a){this.processAxis(e,a)},r.prototype.beforeEachView=function(e,a){},r.prototype.init=function(){n.prototype.init.call(this),this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER,this.afterChartRender)},r.prototype.getDefaultCfg=function(){return deepMix({},n.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},r.prototype.generateFacets=function(e){var a=this.cfg.fields;if(!a.length)throw new Error("Please specify for the fields for rootFacet!");var o=[],s={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return o.push(s),s.children=this.getChildFacets(e,1,o),this.setRegion(o),o},r.prototype.setRegion=function(e){var a=this;this.forceColIndex(e),e.forEach(function(o){o.region=a.getRegion(o.rowValuesLength,o.columnValuesLength,o.columnIndex,o.rowIndex)})},r.prototype.getRegion=function(e,a,o,s){var l=1/a,c=1/e,u={x:l*o,y:c*s},f={x:u.x+l,y:u.y+c*2/3};return{start:u,end:f}},r.prototype.forceColIndex=function(e){var a,o,s=this,l=[],c=0;e.forEach(function(y){s.isLeaf(y)&&(l.push(y),y.columnIndex=c,c++)}),l.forEach(function(y){y.columnValuesLength=l.length});for(var u=this.cfg.fields.length,f=u-1;f>=0;f--){var d=this.getFacetsByLevel(e,f);try{for(var g=(a=void 0,__values(d)),v=g.next();!v.done;v=g.next()){var p=v.value;this.isLeaf(p)||(p.originColIndex=p.columnIndex,p.columnIndex=this.getRegionIndex(p.children),p.columnValuesLength=l.length)}}catch(y){a={error:y}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}}},r.prototype.getFacetsByLevel=function(e,a){var o=[];return e.forEach(function(s){s.rowIndex===a&&o.push(s)}),o},r.prototype.getRegionIndex=function(e){var a=e[0],o=e[e.length-1];return(o.columnIndex-a.columnIndex)/2+a.columnIndex},r.prototype.isLeaf=function(e){return!e.children||!e.children.length},r.prototype.getRows=function(){return this.cfg.fields.length+1},r.prototype.getChildFacets=function(e,a,o){var s=this,l=this.cfg.fields,c=l.length;if(!(c<a)){var u=[],f=l[a-1],d=this.getFieldValues(e,f);return d.forEach(function(g,v){var p=[{field:f,value:g,values:d}],y=e.filter(s.getFacetDataFilter(p));if(y.length){var m={type:s.cfg.type,data:y,region:null,columnValue:g,rowValue:"",columnField:f,rowField:"",columnIndex:v,rowValuesLength:s.getRows(),columnValuesLength:1,rowIndex:a,children:s.getChildFacets(y,a+1,o)};u.push(m),o.push(m)}}),u}},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.renderTitle=function(){var e=this;each$1(this.facets,function(a){var o=a.columnValue,s=a.view,l=get(e.cfg.title,"formatter"),c=deepMix({position:["50%","0%"],content:l?l(o):o},getFactTitleConfig(DIRECTION.TOP),e.cfg.title);s.annotation().text(c)})},r.prototype.drawLines=function(e){var a=this;e.forEach(function(o){if(!a.isLeaf(o)){var s=o.children;a.addFacetLines(o,s)}})},r.prototype.addFacetLines=function(e,a){var o=this,s=e.view,l=s.coordinateBBox,c={x:l.x+l.width/2,y:l.y+l.height};a.forEach(function(u){var f=u.view.coordinateBBox,d={x:f.bl.x+(f.tr.x-f.bl.x)/2,y:f.tr.y},g={x:c.x,y:c.y+(d.y-c.y)/2},v={x:d.x,y:g.y};o.drawLine([c,g,v,d])})},r.prototype.getPath=function(e){var a=[],o=this.cfg.line.smooth;return o?(a.push(["M",e[0].x,e[0].y]),a.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach(function(s,l){l===0?a.push(["M",s.x,s.y]):a.push(["L",s.x,s.y])}),a},r.prototype.drawLine=function(e){var a=this.getPath(e),o=this.cfg.line.style;this.container.addShape("path",{attrs:mix({path:a},o)})},r.prototype.getXAxisOption=function(e,a,o,s){return s.rowIndex!==s.rowValuesLength-1?__assign$8(__assign$8({},o),{title:null,label:null}):o},r.prototype.getYAxisOption=function(e,a,o,s){return s.originColIndex!==0&&s.columnIndex!==0?__assign$8(__assign$8({},o),{title:null,label:null}):o},r}(Facet);function getMedian(n){var r=__spreadArray$2([],__read(n),!1);r.sort(function(a,o){return a-o});var e=r.length;return e===0?0:e%2===1?r[(e-1)/2]:(r[e/2]+r[e/2-1])/2}function getMean(n){var r=reduce(n,function(e,a){return e+=isNaN(a)||!isNumber$2(a)?0:a},0);return n.length===0?0:r/n.length}function getNormalizedValue(n,r){if(!r)return null;var e;switch(n){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{e=r.isCategory?getMedian(r.values.map(function(a,o){return o})):getMedian(r.values);break}case"mean":{e=r.isCategory?(r.values.length-1)/2:getMean(r.values);break}case"min":e=r.isCategory?0:r[n];break;case"max":e=r.isCategory?r.values.length-1:r[n];break;default:e=n;break}return r.scale(e)}var ANNOTATIONS_AFTER_RENDER=["regionFilter","shape"],Annotation=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.cache=new Map,a.foregroundContainer=a.view.getLayer(LAYER.FORE).addGroup(),a.backgroundContainer=a.view.getLayer(LAYER.BG).addGroup(),a.option=[],a}return Object.defineProperty(r.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.layout=function(){this.update()},r.prototype.render=function(){},r.prototype.update=function(){var e=this;this.onAfterRender(function(){var o=new Map;each$1(e.option,function(s){if(contains(ANNOTATIONS_AFTER_RENDER,s.type)){var l=e.updateOrCreate(s);l&&o.set(e.getCacheKey(s),l)}}),e.cache=e.syncCache(o)});var a=new Map;each$1(this.option,function(o){if(!contains(ANNOTATIONS_AFTER_RENDER,o.type)){var s=e.updateOrCreate(o);s&&a.set(e.getCacheKey(o),s)}}),this.cache=this.syncCache(a)},r.prototype.clear=function(e){e===void 0&&(e=!1),n.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},r.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},r.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(a){e.push(a)}),e},r.prototype.clearComponents=function(){this.getComponents().forEach(function(e){e.component.destroy()}),this.cache.clear()},r.prototype.onAfterRender=function(e){var a=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(o){o.animateOption&&(o.once(GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE,function(){e()}),a=!0)}),a||this.view.getRootView().once(VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){e()})},r.prototype.createAnnotation=function(e){var a=e.type,o=AnnotationComponent[upperFirst(a)];if(o){var s=this.getAnnotationTheme(a),l=this.getAnnotationCfg(a,e,s);if(!l)return null;var c=new o(l);return{component:c,layer:this.isTop(l)?LAYER.FORE:LAYER.BG,direction:DIRECTION.NONE,type:COMPONENT_TYPE.ANNOTATION,extra:e}}},r.prototype.annotation=function(e){this.option.push(e)},r.prototype.arc=function(e){return this.annotation(__assign$8({type:"arc"},e)),this},r.prototype.image=function(e){return this.annotation(__assign$8({type:"image"},e)),this},r.prototype.line=function(e){return this.annotation(__assign$8({type:"line"},e)),this},r.prototype.region=function(e){return this.annotation(__assign$8({type:"region"},e)),this},r.prototype.text=function(e){return this.annotation(__assign$8({type:"text"},e)),this},r.prototype.dataMarker=function(e){return this.annotation(__assign$8({type:"dataMarker"},e)),this},r.prototype.dataRegion=function(e){this.annotation(__assign$8({type:"dataRegion"},e))},r.prototype.regionFilter=function(e){this.annotation(__assign$8({type:"regionFilter"},e))},r.prototype.shape=function(e){this.annotation(__assign$8({type:"shape"},e))},r.prototype.html=function(e){this.annotation(__assign$8({type:"html"},e))},r.prototype.parsePosition=function(e){var a,o,s=this.view.getXScale(),l=this.view.getScalesByDim("y"),c=isFunction$1(e)?e.call(null,s,l):e,u=0,f=0;if(isArray$4(c)){var d=__read(c,2),g=d[0],v=d[1];if(isString$1(g)&&g.indexOf("%")!==-1&&!isNaN(g.slice(0,-1)))return this.parsePercentPosition(c);u=getNormalizedValue(g,s),f=getNormalizedValue(v,Object.values(l)[0])}else if(!isNil(c))try{for(var p=__values(keys(c)),y=p.next();!y.done;y=p.next()){var m=y.value,x=c[m];m===s.field&&(u=getNormalizedValue(x,s)),l[m]&&(f=getNormalizedValue(x,l[m]))}}catch(A){a={error:A}}finally{try{y&&!y.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}return isNaN(u)||isNaN(f)?null:this.view.getCoordinate().convert({x:u,y:f})},r.prototype.getRegionPoints=function(e,a){var o=this,s=this.view.getXScale(),l=this.view.getScalesByDim("y"),c=Object.values(l)[0],u=s.field,f=this.view.getData(),d=isArray$4(e)?e[0]:e[u],g=isArray$4(a)?a[0]:a[u],v=[],p;return each$1(f,function(y,m){if(y[u]===d&&(p=m),m>=p){var x=o.parsePosition([y[u],y[c.field]]);x&&v.push(x)}if(y[u]===g)return!1}),v},r.prototype.parsePercentPosition=function(e){var a=parseFloat(e[0])/100,o=parseFloat(e[1])/100,s=this.view.getCoordinate(),l=s.start,c=s.end,u={x:Math.min(l.x,c.x),y:Math.min(l.y,c.y)},f=s.getWidth()*a+u.x,d=s.getHeight()*o+u.y;return{x:f,y:d}},r.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),a=e.start,o=e.end,s=e.getWidth(),l=e.getHeight(),c={x:Math.min(a.x,o.x),y:Math.min(a.y,o.y)};return{x:c.x,y:c.y,minX:c.x,minY:c.y,maxX:c.x+s,maxY:c.y+l,width:s,height:l}},r.prototype.getAnnotationCfg=function(e,a,o){var s=this,l=this.view.getCoordinate(),c=this.view.getCanvas(),u={};if(isNil(a))return null;var f=a.start,d=a.end,g=a.position,v=this.parsePosition(f),p=this.parsePosition(d),y=this.parsePosition(g);if(["arc","image","line","region","regionFilter"].includes(e)&&(!v||!p))return null;if(["text","dataMarker","html"].includes(e)&&!y)return null;if(e==="arc"){var m=a;m.start,m.end;var x=__rest$1(m,["start","end"]),A=getAngleByPoint(l,v),_=getAngleByPoint(l,p);A>_&&(_=Math.PI*2+_),u=__assign$8(__assign$8({},x),{center:l.getCenter(),radius:getDistanceToCenter(l,v),startAngle:A,endAngle:_})}else if(e==="image"){var b=a;b.start,b.end;var x=__rest$1(b,["start","end"]);u=__assign$8(__assign$8({},x),{start:v,end:p,src:a.src})}else if(e==="line"){var S=a;S.start,S.end;var x=__rest$1(S,["start","end"]);u=__assign$8(__assign$8({},x),{start:v,end:p,text:get(a,"text",null)})}else if(e==="region"){var C=a;C.start,C.end;var x=__rest$1(C,["start","end"]);u=__assign$8(__assign$8({},x),{start:v,end:p})}else if(e==="text"){var E=this.view.getData(),T=a;T.position;var w=T.content,x=__rest$1(T,["position","content"]),L=w;isFunction$1(w)&&(L=w(E)),u=__assign$8(__assign$8(__assign$8({},y),x),{content:L})}else if(e==="dataMarker"){var M=a;M.position;var O=M.point,P=M.line,N=M.text,G=M.autoAdjust,Y=M.direction,x=__rest$1(M,["position","point","line","text","autoAdjust","direction"]);u=__assign$8(__assign$8(__assign$8({},x),y),{coordinateBBox:this.getCoordinateBBox(),point:O,line:P,text:N,autoAdjust:G,direction:Y})}else if(e==="dataRegion"){var F=a,z=F.start,W=F.end,j=F.region,N=F.text,U=F.lineLength,x=__rest$1(F,["start","end","region","text","lineLength"]);u=__assign$8(__assign$8({},x),{points:this.getRegionPoints(z,W),region:j,text:N,lineLength:U})}else if(e==="regionFilter"){var X=a;X.start,X.end;var tt=X.apply,rt=X.color,x=__rest$1(X,["start","end","apply","color"]),J=this.view.geometries,et=[],it=function(mt){mt&&(mt.isGroup()?mt.getChildren().forEach(function(St){return it(St)}):et.push(mt))};each$1(J,function(mt){tt?contains(tt,mt.type)&&each$1(mt.elements,function(St){it(St.shape)}):each$1(mt.elements,function(St){it(St.shape)})}),u=__assign$8(__assign$8({},x),{color:rt,shapes:et,start:v,end:p})}else if(e==="shape"){var ot=a,st=ot.render,ut=__rest$1(ot,["render"]),ft=function(_t){if(isFunction$1(a.render))return st(_t,s.view,{parsePosition:s.parsePosition.bind(s)})};u=__assign$8(__assign$8({},ut),{render:ft})}else if(e==="html"){var gt=a,vt=gt.html;gt.position;var ut=__rest$1(gt,["html","position"]),yt=function(mt){return isFunction$1(vt)?vt(mt,s.view):vt};u=__assign$8(__assign$8(__assign$8({},ut),y),{parent:c.get("el").parentNode,html:yt})}var At=deepMix({},o,__assign$8(__assign$8({},u),{top:a.top,style:a.style,offsetX:a.offsetX,offsetY:a.offsetY}));return e!=="html"&&(At.container=this.getComponentContainer(At)),At.animate=this.view.getOptions().animate&&At.animate&&get(a,"animate",At.animate),At.animateOption=deepMix({},DEFAULT_ANIMATE_CFG,At.animateOption,a.animateOption),At},r.prototype.isTop=function(e){return get(e,"top",!0)},r.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},r.prototype.getAnnotationTheme=function(e){return get(this.view.getTheme(),["components","annotation",e],{})},r.prototype.updateOrCreate=function(e){var a=this.cache.get(this.getCacheKey(e));if(a){var o=e.type,s=this.getAnnotationTheme(o),l=this.getAnnotationCfg(o,e,s);l&&omit(l,["container"]),a.component.update(__assign$8(__assign$8({},l||{}),{visible:!!l})),contains(ANNOTATIONS_AFTER_RENDER,e.type)&&a.component.render()}else a=this.createAnnotation(e),a&&(a.component.init(),contains(ANNOTATIONS_AFTER_RENDER,e.type)&&a.component.render());return a},r.prototype.syncCache=function(e){var a=this,o=new Map(this.cache);return e.forEach(function(s,l){o.set(l,s)}),o.forEach(function(s,l){find$2(a.option,function(c){return l===a.getCacheKey(c)})||(s.component.destroy(),o.delete(l))}),o},r.prototype.getCacheKey=function(e){return e},r}(Controller);function getGridThemeCfg(n,r){var e=deepMix({},get(n,["components","axis","common"]),get(n,["components","axis",r]));return get(e,["grid"],{})}function getLineGridItems(n,r,e,a){var o=[],s=r.getTicks();return n.isPolar&&s.push({value:1,text:"",tickValue:""}),s.reduce(function(l,c,u){var f=c.value;if(a)o.push({points:[n.convert(e==="y"?{x:0,y:f}:{x:f,y:0}),n.convert(e==="y"?{x:1,y:f}:{x:f,y:1})]});else if(u){var d=l.value,g=(d+f)/2;o.push({points:[n.convert(e==="y"?{x:0,y:g}:{x:g,y:0}),n.convert(e==="y"?{x:1,y:g}:{x:g,y:1})]})}return c},s[0]),o}function getCircleGridItems(n,r,e,a,o){var s=r.values.length,l=[],c=e.getTicks();return c.reduce(function(u,f){var d=u?u.value:f.value,g=f.value,v=(d+g)/2;return o==="x"?l.push({points:[n.convert({x:a?g:v,y:0}),n.convert({x:a?g:v,y:1})]}):l.push({points:map$2(Array(s+1),function(p,y){return n.convert({x:y/s,y:a?g:v})})}),f},c[0]),l}function showGrid(n,r){var e=get(r,"grid");if(e===null)return!1;var a=get(n,"grid");return!(e===void 0&&a===null)}var OMIT_CFG=["container"],AXIS_DEFAULT_ANIMATE_CFG=__assign$8(__assign$8({},DEFAULT_ANIMATE_CFG),{appear:null}),Axis=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.cache=new Map,a.gridContainer=a.view.getLayer(LAYER.BG).addGroup(),a.gridForeContainer=a.view.getLayer(LAYER.FORE).addGroup(),a.axisContainer=a.view.getLayer(LAYER.BG).addGroup(),a.axisForeContainer=a.view.getLayer(LAYER.FORE).addGroup(),a}return Object.defineProperty(r.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){this.update()},r.prototype.layout=function(){var e=this,a=this.view.getCoordinate();each$1(this.getComponents(),function(o){var s=o.component,l=o.direction,c=o.type,u=o.extra,f=u.dim,d=u.scale,g=u.alignTick,v;if(c===COMPONENT_TYPE.AXIS)a.isPolar?f==="x"?v=a.isTransposed?getAxisRegion(a,l):getCircleAxisCenterRadius(a):f==="y"&&(v=a.isTransposed?getCircleAxisCenterRadius(a):getAxisRegion(a,l)):v=getAxisRegion(a,l);else if(c===COMPONENT_TYPE.GRID)if(a.isPolar){var p=void 0;a.isTransposed?p=f==="x"?getCircleGridItems(a,e.view.getYScales()[0],d,g,f):getLineGridItems(a,d,f,g):p=f==="x"?getLineGridItems(a,d,f,g):getCircleGridItems(a,e.view.getXScale(),d,g,f),v={items:p,center:e.view.getCoordinate().getCenter()}}else v={items:getLineGridItems(a,d,f,g)};s.update(v)})},r.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var a=new Map;this.cache.forEach(function(o,s){e.has(s)?a.set(s,o):o.component.destroy()}),this.cache=a},r.prototype.clear=function(){n.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},r.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(a){e.push(a)}),e},r.prototype.updateXAxes=function(e){var a=this.view.getXScale();if(!(!a||a.isIdentity)){var o=getAxisOption(this.option,a.field);if(o!==!1){var s=getAxisDirection(o,DIRECTION.BOTTOM),l=LAYER.BG,c="x",u=this.view.getCoordinate(),f=this.getId("axis",a.field),d=this.getId("grid",a.field);if(u.isRect){var g=this.cache.get(f);if(g){var v=this.getLineAxisCfg(a,o,s);omit(v,OMIT_CFG),g.component.update(v),e.set(f,g)}else g=this.createLineAxis(a,o,l,s,c),this.cache.set(f,g),e.set(f,g);var p=this.cache.get(d);if(p){var v=this.getLineGridCfg(a,o,s,c);omit(v,OMIT_CFG),p.component.update(v),e.set(d,p)}else p=this.createLineGrid(a,o,l,s,c),p&&(this.cache.set(d,p),e.set(d,p))}else if(u.isPolar){var g=this.cache.get(f);if(g){var v=u.isTransposed?this.getLineAxisCfg(a,o,DIRECTION.RADIUS):this.getCircleAxisCfg(a,o,s);omit(v,OMIT_CFG),g.component.update(v),e.set(f,g)}else{if(u.isTransposed){if(isUndefined$1(o))return;g=this.createLineAxis(a,o,l,DIRECTION.RADIUS,c)}else g=this.createCircleAxis(a,o,l,s,c);this.cache.set(f,g),e.set(f,g)}var p=this.cache.get(d);if(p){var v=u.isTransposed?this.getCircleGridCfg(a,o,DIRECTION.RADIUS,c):this.getLineGridCfg(a,o,DIRECTION.CIRCLE,c);omit(v,OMIT_CFG),p.component.update(v),e.set(d,p)}else{if(u.isTransposed){if(isUndefined$1(o))return;p=this.createCircleGrid(a,o,l,DIRECTION.RADIUS,c)}else p=this.createLineGrid(a,o,l,DIRECTION.CIRCLE,c);p&&(this.cache.set(d,p),e.set(d,p))}}}}},r.prototype.updateYAxes=function(e){var a=this,o=this.view.getYScales();each$1(o,function(s,l){if(!(!s||s.isIdentity)){var c=s.field,u=getAxisOption(a.option,c);if(u!==!1){var f=LAYER.BG,d="y",g=a.getId("axis",c),v=a.getId("grid",c),p=a.view.getCoordinate();if(p.isRect){var y=getAxisDirection(u,l===0?DIRECTION.LEFT:DIRECTION.RIGHT),m=a.cache.get(g);if(m){var x=a.getLineAxisCfg(s,u,y);omit(x,OMIT_CFG),m.component.update(x),e.set(g,m)}else m=a.createLineAxis(s,u,f,y,d),a.cache.set(g,m),e.set(g,m);var A=a.cache.get(v);if(A){var x=a.getLineGridCfg(s,u,y,d);omit(x,OMIT_CFG),A.component.update(x),e.set(v,A)}else A=a.createLineGrid(s,u,f,y,d),A&&(a.cache.set(v,A),e.set(v,A))}else if(p.isPolar){var m=a.cache.get(g);if(m){var x=p.isTransposed?a.getCircleAxisCfg(s,u,DIRECTION.CIRCLE):a.getLineAxisCfg(s,u,DIRECTION.RADIUS);omit(x,OMIT_CFG),m.component.update(x),e.set(g,m)}else{if(p.isTransposed){if(isUndefined$1(u))return;m=a.createCircleAxis(s,u,f,DIRECTION.CIRCLE,d)}else m=a.createLineAxis(s,u,f,DIRECTION.RADIUS,d);a.cache.set(g,m),e.set(g,m)}var A=a.cache.get(v);if(A){var x=p.isTransposed?a.getLineGridCfg(s,u,DIRECTION.CIRCLE,d):a.getCircleGridCfg(s,u,DIRECTION.RADIUS,d);omit(x,OMIT_CFG),A.component.update(x),e.set(v,A)}else{if(p.isTransposed){if(isUndefined$1(u))return;A=a.createLineGrid(s,u,f,DIRECTION.CIRCLE,d)}else A=a.createCircleGrid(s,u,f,DIRECTION.RADIUS,d);A&&(a.cache.set(v,A),e.set(v,A))}}}}})},r.prototype.createLineAxis=function(e,a,o,s,l){var c={component:new LineAxis(this.getLineAxisCfg(e,a,s)),layer:o,direction:s===DIRECTION.RADIUS?DIRECTION.NONE:s,type:COMPONENT_TYPE.AXIS,extra:{dim:l,scale:e}};return c.component.set("field",e.field),c.component.init(),c},r.prototype.createLineGrid=function(e,a,o,s,l){var c=this.getLineGridCfg(e,a,s,l);if(c){var u={component:new LineGrid(c),layer:o,direction:DIRECTION.NONE,type:COMPONENT_TYPE.GRID,extra:{dim:l,scale:e,alignTick:get(c,"alignTick",!0)}};return u.component.init(),u}},r.prototype.createCircleAxis=function(e,a,o,s,l){var c={component:new CircleAxis(this.getCircleAxisCfg(e,a,s)),layer:o,direction:s,type:COMPONENT_TYPE.AXIS,extra:{dim:l,scale:e}};return c.component.set("field",e.field),c.component.init(),c},r.prototype.createCircleGrid=function(e,a,o,s,l){var c=this.getCircleGridCfg(e,a,s,l);if(c){var u={component:new CircleGrid(c),layer:o,direction:DIRECTION.NONE,type:COMPONENT_TYPE.GRID,extra:{dim:l,scale:e,alignTick:get(c,"alignTick",!0)}};return u.component.init(),u}},r.prototype.getLineAxisCfg=function(e,a,o){var s=get(a,["top"])?this.axisForeContainer:this.axisContainer,l=this.view.getCoordinate(),c=getAxisRegion(l,o),u=getAxisTitleText(e,a),f=getAxisThemeCfg(this.view.getTheme(),o),d=get(a,["title"])?deepMix({title:{style:{text:u}}},{title:getAxisTitleOptions(this.view.getTheme(),o,a.title)},a):a,g=deepMix(__assign$8(__assign$8({container:s},c),{ticks:e.getTicks().map(function(b){return{id:"".concat(b.tickValue),name:b.text,value:b.value}}),verticalFactor:l.isPolar?getAxisFactorByRegion(c,l.getCenter())*-1:getAxisFactorByRegion(c,l.getCenter()),theme:f}),f,d),v=this.getAnimateCfg(g),p=v.animate,y=v.animateOption;g.animateOption=y,g.animate=p;var m=isVertical(c),x=get(g,"verticalLimitLength",m?1/3:1/2);if(x<=1){var A=this.view.getCanvas().get("width"),_=this.view.getCanvas().get("height");g.verticalLimitLength=x*(m?A:_)}return g},r.prototype.getLineGridCfg=function(e,a,o,s){if(showGrid(getAxisThemeCfg(this.view.getTheme(),o),a)){var l=getGridThemeCfg(this.view.getTheme(),o),c=deepMix({container:get(a,["top"])?this.gridForeContainer:this.gridContainer},l,get(a,"grid"),this.getAnimateCfg(a));return c.items=getLineGridItems(this.view.getCoordinate(),e,s,get(c,"alignTick",!0)),c}},r.prototype.getCircleAxisCfg=function(e,a,o){var s=get(a,["top"])?this.axisForeContainer:this.axisContainer,l=this.view.getCoordinate(),c=e.getTicks().map(function(m){return{id:"".concat(m.tickValue),name:m.text,value:m.value}});!e.isCategory&&Math.abs(l.endAngle-l.startAngle)===Math.PI*2&&c.length&&(c[c.length-1].name="");var u=getAxisTitleText(e,a),f=getAxisThemeCfg(this.view.getTheme(),DIRECTION.CIRCLE),d=get(a,["title"])?deepMix({title:{style:{text:u}}},{title:getAxisTitleOptions(this.view.getTheme(),o,a.title)},a):a,g=deepMix(__assign$8(__assign$8({container:s},getCircleAxisCenterRadius(this.view.getCoordinate())),{ticks:c,verticalFactor:1,theme:f}),f,d),v=this.getAnimateCfg(g),p=v.animate,y=v.animateOption;return g.animate=p,g.animateOption=y,g},r.prototype.getCircleGridCfg=function(e,a,o,s){if(showGrid(getAxisThemeCfg(this.view.getTheme(),o),a)){var l=getGridThemeCfg(this.view.getTheme(),DIRECTION.RADIUS),c=deepMix({container:get(a,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},l,get(a,"grid"),this.getAnimateCfg(a)),u=get(c,"alignTick",!0),f=s==="x"?this.view.getYScales()[0]:this.view.getXScale();return c.items=getCircleGridItems(this.view.getCoordinate(),f,e,u,s),c}},r.prototype.getId=function(e,a){var o=this.view.getCoordinate();return"".concat(e,"-").concat(a,"-").concat(o.type)},r.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&get(e,"animate"),animateOption:e&&e.animateOption?deepMix({},AXIS_DEFAULT_ANIMATE_CFG,e.animateOption):AXIS_DEFAULT_ANIMATE_CFG}},r}(Controller);function directionToPosition(n,r,e){return e===DIRECTION.TOP?[n.minX+n.width/2-r.width/2,n.minY]:e===DIRECTION.BOTTOM?[n.minX+n.width/2-r.width/2,n.maxY-r.height]:e===DIRECTION.LEFT?[n.minX,n.minY+n.height/2-r.height/2]:e===DIRECTION.RIGHT?[n.maxX-r.width,n.minY+n.height/2-r.height/2]:e===DIRECTION.TOP_LEFT||e===DIRECTION.LEFT_TOP?[n.tl.x,n.tl.y]:e===DIRECTION.TOP_RIGHT||e===DIRECTION.RIGHT_TOP?[n.tr.x-r.width,n.tr.y]:e===DIRECTION.BOTTOM_LEFT||e===DIRECTION.LEFT_BOTTOM?[n.bl.x,n.bl.y-r.height]:e===DIRECTION.BOTTOM_RIGHT||e===DIRECTION.RIGHT_BOTTOM?[n.br.x-r.width,n.br.y-r.height]:[0,0]}function getLegendOption(n,r){return isBoolean(n)?n===!1?!1:{}:get(n,[r],n)}function getDirection(n){return get(n,"position",DIRECTION.BOTTOM)}var Legend=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.container=a.view.getLayer(LAYER.FORE).addGroup(),a}return Object.defineProperty(r.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){this.update()},r.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,each$1(this.components,function(a){var o=a.component,s=a.direction,l=getLegendLayout(s),c=o.get("maxWidthRatio"),u=o.get("maxHeightRatio"),f=e.getCategoryLegendSizeCfg(l,c,u),d=o.get("maxWidth"),g=o.get("maxHeight");o.update({maxWidth:Math.min(f.maxWidth,d||0),maxHeight:Math.min(f.maxHeight,g||0)});var v=o.get("padding"),p=o.getLayoutBBox(),y=new BBox(p.x,p.y,p.width,p.height).expand(v),m=__read(directionToPosition(e.view.viewBBox,y,s),2),x=m[0],A=m[1],_=__read(directionToPosition(e.layoutBBox,y,s),2),b=_[0],S=_[1],C=0,E=0;s.startsWith("top")||s.startsWith("bottom")?(C=x,E=S):(C=b,E=A),o.setLocation({x:C+v[3],y:E+v[0]}),e.layoutBBox=e.layoutBBox.cut(y,s)})},r.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var a={},o=function(v,p,y){var m=e.getId(y.field),x=e.getComponentById(m);if(x){var A=void 0,_=getLegendOption(e.option,y.field);_!==!1&&(get(_,"custom")?A=e.getCategoryCfg(v,p,y,_,!0):y.isLinear?A=e.getContinuousCfg(v,p,y,_):y.isCategory&&(A=e.getCategoryCfg(v,p,y,_))),A&&(omit(A,["container"]),x.direction=getDirection(_),x.component.update(A),a[m]=!0)}else{var b=e.createFieldLegend(v,p,y);b&&(b.component.init(),e.components.push(b),a[m]=!0)}};if(get(this.option,"custom")){var s="global-custom",l=this.getComponentById(s);if(l){var c=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);omit(c,["container"]),l.component.update(c),a[s]=!0}else{var u=this.createCustomLegend(void 0,void 0,void 0,this.option);if(u){u.init();var f=LAYER.FORE,d=getDirection(this.option);this.components.push({id:s,component:u,layer:f,direction:d,type:COMPONENT_TYPE.LEGEND,extra:void 0}),a[s]=!0}}}else this.loopLegends(o);var g=[];each$1(this.getComponents(),function(v){a[v.id]?g.push(v):v.component.destroy()}),this.components=g},r.prototype.clear=function(){n.prototype.clear.call(this),this.container.clear()},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.container.remove(!0)},r.prototype.getGeometries=function(e){var a=this,o=e.geometries;return each$1(e.views,function(s){o=o.concat(a.getGeometries(s))}),o},r.prototype.loopLegends=function(e){var a=this.view.getRootView()===this.view;if(a){var o=this.getGeometries(this.view),s={};each$1(o,function(l){var c=l.getGroupAttributes();each$1(c,function(u){var f=u.getScale(u.type);!f||f.type==="identity"||s[f.field]||(e(l,u,f),s[f.field]=!0)})})}},r.prototype.createFieldLegend=function(e,a,o){var s,l=getLegendOption(this.option,o.field),c=LAYER.FORE,u=getDirection(l);if(l!==!1&&(get(l,"custom")?s=this.createCustomLegend(e,a,o,l):o.isLinear?s=this.createContinuousLegend(e,a,o,l):o.isCategory&&(s=this.createCategoryLegend(e,a,o,l))),s)return s.set("field",o.field),{id:this.getId(o.field),component:s,layer:c,direction:u,type:COMPONENT_TYPE.LEGEND,extra:{scale:o}}},r.prototype.createCustomLegend=function(e,a,o,s){var l=this.getCategoryCfg(e,a,o,s,!0);return new CategoryLegend(l)},r.prototype.createContinuousLegend=function(e,a,o,s){var l=this.getContinuousCfg(e,a,o,omit(s,["value"]));return new ContinuousLegend(l)},r.prototype.createCategoryLegend=function(e,a,o,s){var l=this.getCategoryCfg(e,a,o,s);return new CategoryLegend(l)},r.prototype.getContinuousCfg=function(e,a,o,s){var l=o.getTicks(),c=find$2(l,function(m){return m.value===0}),u=find$2(l,function(m){return m.value===1}),f=l.map(function(m){var x=m.value,A=m.tickValue,_=a.mapping(o.invert(x)).join("");return{value:A,attrValue:_,color:_,scaleValue:x}});c||f.push({value:o.min,attrValue:a.mapping(o.invert(0)).join(""),color:a.mapping(o.invert(0)).join(""),scaleValue:0}),u||f.push({value:o.max,attrValue:a.mapping(o.invert(1)).join(""),color:a.mapping(o.invert(1)).join(""),scaleValue:1}),f.sort(function(m,x){return m.value-x.value});var d={min:head(f).value,max:last(f).value,colors:[],rail:{type:a.type},track:{}};a.type==="size"&&(d.track={style:{fill:a.type==="size"?this.view.getTheme().defaultColor:void 0}}),a.type==="color"&&(d.colors=f.map(function(m){return m.attrValue}));var g=this.container,v=getDirection(s),p=getLegendLayout(v),y=get(s,"title");return y&&(y=deepMix({text:getName(o)},y)),d.container=g,d.layout=p,d.title=y,d.animateOption=DEFAULT_ANIMATE_CFG,this.mergeLegendCfg(d,s,"continuous")},r.prototype.getCategoryCfg=function(e,a,o,s,l){var c=this.container,u=get(s,"position",DIRECTION.BOTTOM),f=getLegendThemeCfg(this.view.getTheme(),u),d=get(f,["marker"]),g=get(s,"marker"),v=getLegendLayout(u),p=get(f,["pageNavigator"]),y=get(s,"pageNavigator"),m=l?getCustomLegendItems(d,g,s.items):getLegendItems(this.view,e,a,d,g),x=get(s,"title");x&&(x=deepMix({text:o?getName(o):""},x));var A=get(s,"maxWidthRatio"),_=get(s,"maxHeightRatio"),b=this.getCategoryLegendSizeCfg(v,A,_);b.container=c,b.layout=v,b.items=m,b.title=x,b.animateOption=DEFAULT_ANIMATE_CFG,b.pageNavigator=deepMix({},p,y);var S=this.mergeLegendCfg(b,s,u);S.reversed&&S.items.reverse();var C=get(S,"maxItemWidth");return C&&C<=1&&(S.maxItemWidth=this.view.viewBBox.width*C),S},r.prototype.mergeLegendCfg=function(e,a,o){var s=o.split("-")[0],l=getLegendThemeCfg(this.view.getTheme(),s);return deepMix({},l,e,a)},r.prototype.getId=function(e){return"".concat(this.name,"-").concat(e)},r.prototype.getComponentById=function(e){return find$2(this.components,function(a){return a.id===e})},r.prototype.getCategoryLegendSizeCfg=function(e,a,o){a===void 0&&(a=COMPONENT_MAX_VIEW_PERCENTAGE),o===void 0&&(o=COMPONENT_MAX_VIEW_PERCENTAGE);var s=this.view.viewBBox,l=s.width,c=s.height;return e==="vertical"?{maxWidth:l*a,maxHeight:c}:{maxWidth:l,maxHeight:c*o}},r}(Controller),Slider=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.onChangeFn=noop,a.resetMeasure=function(){a.clear()},a.onValueChange=function(o){var s=__read(o,2),l=s[0],c=s[1];a.start=l,a.end=c,a.changeViewData(l,c)},a.container=a.view.getLayer(LAYER.FORE).addGroup(),a.onChangeFn=throttle$1(a.onValueChange,20,{leading:!0}),a.width=0,a.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,a.resetMeasure),a.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,a.resetMeasure),a}return Object.defineProperty(r.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){n.prototype.destroy.call(this),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,this.resetMeasure)},r.prototype.init=function(){},r.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),a=e.start,o=e.end;isNil(this.start)&&(this.start=a,this.end=o);var s=this.view.getOptions().data;this.option&&!isEmpty(s)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},r.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.start,e.end)},0)),this.slider){var a=this.view.coordinateBBox.width,o=this.slider.component.get("padding"),s=__read(o,4),l=s[0];s[1],s[2];var c=s[3],u=this.slider.component.getLayoutBBox(),f=new BBox(u.x,u.y,Math.min(u.width,a),u.height).expand(o),d=this.getMinMaxText(this.start,this.end),g=d.minText,v=d.maxText,p=__read(directionToPosition(this.view.viewBBox,f,DIRECTION.BOTTOM),2);p[0];var y=p[1],m=__read(directionToPosition(this.view.coordinateBBox,f,DIRECTION.BOTTOM),2),x=m[0];m[1],this.slider.component.update(__assign$8(__assign$8({},this.getSliderCfg()),{x:x+c,y:y+l,width:this.width,start:this.start,end:this.end,minText:g,maxText:v})),this.view.viewBBox=this.view.viewBBox.cut(f,DIRECTION.BOTTOM)}},r.prototype.update=function(){this.render()},r.prototype.createSlider=function(){var e=this.getSliderCfg(),a=new Slider$1(__assign$8({container:this.container},e));return a.init(),{component:a,layer:LAYER.FORE,direction:DIRECTION.BOTTOM,type:COMPONENT_TYPE.SLIDER}},r.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var a=this.getMinMaxText(this.start,this.end),o=a.minText,s=a.maxText;e=__assign$8(__assign$8({},e),{width:this.width,start:this.start,end:this.end,minText:o,maxText:s})}return this.slider.component.update(e),this.slider},r.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},r.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(isObject$1(this.option)){var a=__assign$8({data:this.getData()},get(this.option,"trendCfg",{}));e=deepMix({},e,this.getThemeOptions(),this.option),e=__assign$8(__assign$8({},e),{trendCfg:a})}return e.start=clamp(Math.min(isNil(e.start)?0:e.start,isNil(e.end)?1:e.end),0,1),e.end=clamp(Math.max(isNil(e.start)?0:e.start,isNil(e.end)?1:e.end),0,1),e},r.prototype.getData=function(){var e=this.view.getOptions().data,a=__read(this.view.getYScales(),1),o=a[0],s=this.view.getGroupScales();if(s.length){var l=s[0],c=l.field,u=l.ticks;return e.reduce(function(f,d){return d[c]===u[0]&&f.push(d[o.field]),f},[])}return e.map(function(f){return f[o.field]||0})},r.prototype.getThemeOptions=function(){var e=this.view.getTheme();return get(e,["components","slider","common"],{})},r.prototype.getMinMaxText=function(e,a){var o=this.view.getOptions().data,s=this.view.getXScale(),l=valuesOfKey(o,s.field);s.isLinear&&(l=l.sort());var c=l,u=size(o);if(!s||!u)return{};var f=size(c),d=Math.round(e*(f-1)),g=Math.round(a*(f-1)),v=get(c,[d]),p=get(c,[g]),y=this.getSliderCfg().formatter;return y&&(v=y(v,o[d],d),p=y(p,o[g],g)),{minText:v,maxText:p}},r.prototype.changeViewData=function(e,a){var o=this.view.getOptions().data,s=this.view.getXScale(),l=size(o);if(!(!s||!l)){var c=valuesOfKey(o,s.field),u=this.view.getXScale().isLinear?c.sort(function(p,y){return Number(p)-Number(y)}):c,f=u,d=size(f),g=Math.round(e*(d-1)),v=Math.round(a*(d-1));this.view.filter(s.field,function(p,y){var m=f.indexOf(p);return m>-1?isBetween$1(m,g,v):!0}),this.view.render(!0)}},r.prototype.getComponents=function(){return this.slider?[this.slider]:[]},r.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},r}(Controller),DEFAULT_PADDING=0,DEFAULT_SIZE=8,DEFAULT_CATEGORY_SIZE=32,MIN_THUMB_LENGTH=20,Scrollbar=function(n){__extends$7(r,n);function r(e){var a=n.call(this,e)||this;return a.onChangeFn=noop,a.resetMeasure=function(){a.clear()},a.onValueChange=function(o){var s=o.ratio,l=a.getValidScrollbarCfg().animate;a.ratio=clamp(s,0,1);var c=a.view.getOptions().animate;l||a.view.animate(!1),a.changeViewData(a.getScrollRange(),!0),a.view.animate(c)},a.container=a.view.getLayer(LAYER.FORE).addGroup(),a.onChangeFn=throttle$1(a.onValueChange,20,{leading:!0}),a.trackLen=0,a.thumbLen=0,a.ratio=0,a.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,a.resetMeasure),a.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,a.resetMeasure),a}return Object.defineProperty(r.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){n.prototype.destroy.call(this),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,this.resetMeasure)},r.prototype.init=function(){},r.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},r.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)})),this.scrollbar){var a=this.view.coordinateBBox.width,o=this.scrollbar.component.get("padding"),s=this.scrollbar.component.getLayoutBBox(),l=new BBox(s.x,s.y,Math.min(s.width,a),s.height).expand(o),c=this.getScrollbarComponentCfg(),u=void 0,f=void 0;if(c.isHorizontal){var d=__read(directionToPosition(this.view.viewBBox,l,DIRECTION.BOTTOM),2);d[0];var g=d[1],v=__read(directionToPosition(this.view.coordinateBBox,l,DIRECTION.BOTTOM),2),p=v[0];v[1],u=p,f=g}else{var y=__read(directionToPosition(this.view.viewBBox,l,DIRECTION.RIGHT),2);y[0];var g=y[1],m=__read(directionToPosition(this.view.viewBBox,l,DIRECTION.RIGHT),2),p=m[0];m[1],u=p,f=g}u+=o[3],f+=o[0],this.trackLen?this.scrollbar.component.update(__assign$8(__assign$8({},c),{x:u,y:f,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(__assign$8(__assign$8({},c),{x:u,y:f})),this.view.viewBBox=this.view.viewBBox.cut(l,c.isHorizontal?DIRECTION.BOTTOM:DIRECTION.RIGHT)}},r.prototype.update=function(){this.render()},r.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},r.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},r.prototype.setValue=function(e){this.onValueChange({ratio:e})},r.prototype.getValue=function(){return this.ratio},r.prototype.getThemeOptions=function(){var e=this.view.getTheme();return get(e,["components","scrollbar","common"],{})},r.prototype.getScrollbarTheme=function(e){var a=get(this.view.getTheme(),["components","scrollbar"]),o=e||{},s=o.thumbHighlightColor,l=__rest$1(o,["thumbHighlightColor"]);return{default:deepMix({},get(a,["default","style"],{}),l),hover:deepMix({},get(a,["hover","style"],{}),{thumbColor:s})}},r.prototype.measureScrollbar=function(){var e=this.view.getXScale(),a=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var o=this.getScrollbarComponentCfg(),s=o.trackLen,l=o.thumbLen;this.trackLen=s,this.thumbLen=l,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=a},r.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*clamp(this.ratio,0,1)),a=Math.min(e+this.step-1,this.cnt-1);return[e,a]},r.prototype.changeViewData=function(e,a){var o=this,s=__read(e,2),l=s[0],c=s[1],u=this.getValidScrollbarCfg().type,f=u!=="vertical",d=valuesOfKey(this.data,this.xScaleCfg.field),g=this.view.getXScale().isLinear?d.sort(function(p,y){return Number(p)-Number(y)}):d,v=f?g:g.reverse();this.yScalesCfg.forEach(function(p){o.view.scale(p.field,{formatter:p.formatter,type:p.type,min:p.min,max:p.max,tickMethod:p.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(p){var y=v.indexOf(p);return y>-1?isBetween$1(y,l,c):!0}),this.view.render(!0)},r.prototype.createScrollbar=function(){var e=this.getValidScrollbarCfg().type,a=e!=="vertical",o=new Scrollbar$1(__assign$8(__assign$8({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return o.init(),{component:o,layer:LAYER.FORE,direction:a?DIRECTION.BOTTOM:DIRECTION.RIGHT,type:COMPONENT_TYPE.SCROLLBAR}},r.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),a=this.trackLen?__assign$8(__assign$8({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):__assign$8({},e);return this.scrollbar.component.update(a),this.scrollbar},r.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,a=this.getValidScrollbarCfg(),o=a.type,s=a.categorySize,l=o!=="vertical";return Math.floor((l?e.width:e.height)/s)},r.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),a=this.getScrollbarData(),o=valuesOfKey(a,e.field);return size(o)},r.prototype.getScrollbarComponentCfg=function(){var e=this.view,a=e.coordinateBBox,o=e.viewBBox,s=this.getValidScrollbarCfg(),l=s.type,c=s.padding,u=s.width,f=s.height,d=s.style,g=l!=="vertical",v=__read(c,4),p=v[0],y=v[1],m=v[2],x=v[3],A=g?{x:a.minX+x,y:o.maxY-f-m}:{x:o.maxX-u-y,y:a.minY+p},_=this.getStep(),b=this.getCnt(),S=g?a.width-x-y:a.height-p-m,C=Math.max(S*clamp(_/b,0,1),MIN_THUMB_LENGTH);return __assign$8(__assign$8({},this.getThemeOptions()),{x:A.x,y:A.y,size:g?f:u,isHorizontal:g,trackLen:S,thumbLen:C,thumbOffset:0,theme:this.getScrollbarTheme(d)})},r.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:DEFAULT_CATEGORY_SIZE,width:DEFAULT_SIZE,height:DEFAULT_SIZE,padding:[0,0,0,0],animate:!0,style:{}};return isObject$1(this.option)&&(e=__assign$8(__assign$8({},e),this.option)),(!isObject$1(this.option)||!this.option.padding)&&(e.padding=e.type==="horizontal"?[DEFAULT_PADDING,0,DEFAULT_PADDING,0]:[0,DEFAULT_PADDING,0,DEFAULT_PADDING]),e},r.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),a=this.getValidScrollbarCfg(),o=this.view.getOptions().data||[];return e.isReflect("y")&&a.type==="vertical"&&(o=__spreadArray$2([],__read(o),!1).reverse()),o},r}(Controller),DEFAULT_REGION_PATH_STYLE={fill:"#CCD6EC",opacity:.3};function getItemsOfView(n,r,e){var a,o,s,l,c,u,f=findItemsFromViewRecurisive(n,r,e);if(f.length){f=flatten(f);try{for(var d=__values(f),g=d.next();!g.done;g=d.next()){var v=g.value;try{for(var p=(s=void 0,__values(v)),y=p.next();!y.done;y=p.next()){var m=y.value,x=m.mappingData,A=x.x,_=x.y;m.x=isArray$4(A)?A[A.length-1]:A,m.y=isArray$4(_)?_[_.length-1]:_}}catch(M){s={error:M}}finally{try{y&&!y.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(M){a={error:M}}finally{try{g&&!g.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}var b=e.shared;if(b===!1&&f.length>1){var S=f[0],C=Math.abs(r.y-S[0].y);try{for(var E=__values(f),T=E.next();!T.done;T=E.next()){var w=T.value,L=Math.abs(r.y-w[0].y);L<=C&&(S=w,C=L)}}catch(M){c={error:M}}finally{try{T&&!T.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}f=[S]}return uniq$2(flatten(f))}return[]}var ActiveRegion=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.show=function(e){var a=this.context.view,o=this.context.event,s=a.getController("tooltip").getTooltipCfg(),l=getItemsOfView(a,{x:o.x,y:o.y},s);if(!isEqual$1(l,this.items)&&(this.items=l,l.length)){var c=a.getXScale().field,u=l[0].data[c],f=[],d=a.geometries;if(each$1(d,function(W){if(W.type==="interval"||W.type==="schema"){var j=W.getElementsBy(function(U){var X=U.getData();return X[c]===u});f=f.concat(j)}}),f.length){var g=a.getCoordinate(),v=f[0].shape.getCanvasBBox(),p=f[0].shape.getCanvasBBox(),y=v;each$1(f,function(W){var j=W.shape.getCanvasBBox();g.isTransposed?(j.minY<v.minY&&(v=j),j.maxY>p.maxY&&(p=j)):(j.minX<v.minX&&(v=j),j.maxX>p.maxX&&(p=j)),y.x=Math.min(j.minX,y.minX),y.y=Math.min(j.minY,y.minY),y.width=Math.max(j.maxX,y.maxX)-y.x,y.height=Math.max(j.maxY,y.maxY)-y.y});var m=a.backgroundGroup,x=a.coordinateBBox,A=void 0;if(g.isRect){var _=a.getXScale(),b=e||{},S=b.appendRatio,C=b.appendWidth;isNil(C)&&(S=isNil(S)?_.isLinear?0:.25:S,C=g.isTransposed?S*p.height:S*v.width);var E=void 0,T=void 0,w=void 0,L=void 0;g.isTransposed?(E=x.minX,T=Math.min(p.minY,v.minY)-C,w=x.width,L=y.height+C*2):(E=Math.min(v.minX,p.minX)-C,T=x.minY,w=y.width+C*2,L=x.height),A=[["M",E,T],["L",E+w,T],["L",E+w,T+L],["L",E,T+L],["Z"]]}else{var M=head(f),O=last(f),P=getAngle$1(M.getModel(),g).startAngle,N=getAngle$1(O.getModel(),g).endAngle,G=g.getCenter(),Y=g.getRadius(),F=g.innerRadius*Y;A=getSectorPath(G.x,G.y,Y,P,N,F)}if(this.regionPath)this.regionPath.attr("path",A),this.regionPath.show();else{var z=get(e,"style",DEFAULT_REGION_PATH_STYLE);this.regionPath=m.addShape({type:"path",name:"active-region",capture:!1,attrs:__assign$8(__assign$8({},z),{path:A})})}}}},r.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},r.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),n.prototype.destroy.call(this)},r}(Action),TooltipAction=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.timeStamp=0,e}return r.prototype.show=function(){var e=this.context,a=e.event,o=e.view,s=o.isTooltipLocked();if(!s){var l=this.timeStamp,c=+new Date,u=get(e.view.getOptions(),"tooltip.showDelay",16);if(c-l>u){var f=this.location,d={x:a.x,y:a.y};(!f||!isEqual$1(f,d))&&this.showTooltip(o,d),this.timeStamp=c,this.location=d}}},r.prototype.hide=function(){var e=this.context.view,a=e.getController("tooltip"),o=this.context.event,s=o.clientX,l=o.clientY;a.isCursorEntered({x:s,y:l})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},r.prototype.showTooltip=function(e,a){e.showTooltip(a)},r.prototype.hideTooltip=function(e){e.hideTooltip()},r}(Action),SiblingTooltip=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.showTooltip=function(e,a){var o=getSilbings(e);each$1(o,function(s){var l=getSiblingPoint(e,s,a);s.showTooltip(l)})},r.prototype.hideTooltip=function(e){var a=getSilbings(e);each$1(a,function(o){o.hideTooltip()})},r}(TooltipAction),EllipsisText=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.timeStamp=0,e}return r.prototype.destroy=function(){n.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},r.prototype.show=function(){var e=this.context,a=e.event,o=this.timeStamp,s=+new Date;if(s-o>16){var l=this.location,c={x:a.x,y:a.y};(!l||!isEqual$1(l,c))&&this.showTooltip(c),this.timeStamp=s,this.location=c}},r.prototype.hide=function(){this.hideTooltip(),this.location=null},r.prototype.showTooltip=function(e){var a=this.context,o=a.event,s=o.target;if(s&&s.get("tip")){this.tooltip||this.renderTooltip();var l=s.get("tip");this.tooltip.update(__assign$8({title:l},e)),this.tooltip.show()}},r.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},r.prototype.renderTooltip=function(){var e,a=this.context.view,o=a.canvas,s={start:{x:0,y:0},end:{x:o.get("width"),y:o.get("height")}},l=a.getTheme(),c=get(l,["components","tooltip","domStyles"],{}),u=new HtmlTooltip({parent:o.get("el").parentNode,region:s,visible:!1,crosshairs:null,domStyles:__assign$8({},deepMix({},c,(e={},e[CONTAINER_CLASS]={"max-width":"50%"},e[TITLE_CLASS]={"word-break":"break-all"},e)))});u.init(),u.setCapture(!1),this.tooltip=u},r}(Action),StateBase=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="",e}return r.prototype.hasState=function(e){return e.hasState(this.stateName)},r.prototype.setElementState=function(e,a){e.setState(this.stateName,a)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},r.prototype.clearViewState=function(e){var a=this,o=getElementsByState(e,this.stateName);each$1(o,function(s){a.setElementState(s,!1)})},r}(Action);function getItem(n){return get(n.get("delegateObject"),"item")}var ElementState=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return r.prototype.isItemIgnore=function(e,a){var o=this.ignoreListItemStates,s=o.filter(function(l){return a.hasState(e,l)});return!!s.length},r.prototype.setStateByComponent=function(e,a,o){var s=this.context.view,l=e.get("field"),c=getElements(s);this.setElementsStateByItem(c,l,a,o)},r.prototype.setStateByElement=function(e,a){this.setElementState(e,a)},r.prototype.isMathItem=function(e,a,o){var s=this.context.view,l=getScaleByField(s,a),c=getElementValue$1(e,a);return!isNil(c)&&o.name===l.getText(c)},r.prototype.setElementsStateByItem=function(e,a,o,s){var l=this;each$1(e,function(c){l.isMathItem(c,a,o)&&c.setState(l.stateName,s)})},r.prototype.setStateEnable=function(e){var a=getCurrentElement$1(this.context);if(a)isElementChange(this.context)&&this.setStateByElement(a,e);else{var o=getDelegationObject(this.context);if(isList(o)){var s=o.item,l=o.component;if(s&&l&&!this.isItemIgnore(s,l)){var c=this.context.event.gEvent;if(c&&c.fromShape&&c.toShape&&getItem(c.fromShape)===getItem(c.toShape))return;this.setStateByComponent(l,s,e)}}}},r.prototype.toggle=function(){var e=getCurrentElement$1(this.context);if(e){var a=e.hasState(this.stateName);this.setElementState(e,!a)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(StateBase),ElementActive=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="active",e}return r.prototype.active=function(){this.setState()},r}(ElementState),LinkByColor=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.cache={},e}return r.prototype.getColorScale=function(e,a){var o=a.geometry.getAttribute("color");if(!o)return null;var s=e.getScaleByField(o.getFields()[0]);return s},r.prototype.getLinkPath=function(e,a){var o=this.context.view,s=o.getCoordinate().isTransposed,l=e.shape.getCanvasBBox(),c=a.shape.getCanvasBBox(),u=s?[["M",l.minX,l.minY],["L",c.minX,c.maxY],["L",c.maxX,c.maxY],["L",l.maxX,l.minY],["Z"]]:[["M",l.maxX,l.minY],["L",c.minX,c.minY],["L",c.minX,c.maxY],["L",l.maxX,l.maxY],["Z"]];return u},r.prototype.addLinkShape=function(e,a,o,s){var l={opacity:.4,fill:a.shape.attr("fill")};e.addShape({type:"path",attrs:__assign$8(__assign$8({},deepMix({},l,isFunction$1(s)?s(l,a):s)),{path:this.getLinkPath(a,o)})})},r.prototype.linkByElement=function(e,a){var o=this,s=this.context.view,l=this.getColorScale(s,e);if(l){var c=getElementValue$1(e,l.field);if(!this.cache[c]){var u=getElementsByField(s,l.field,c),f=this.linkGroup,d=f.addGroup();this.cache[c]=d;var g=u.length;each$1(u,function(v,p){if(p<g-1){var y=u[p+1];o.addLinkShape(d,v,y,a)}})}}},r.prototype.removeLink=function(e){var a=this.getColorScale(this.context.view,e);if(a){var o=getElementValue$1(e,a.field);this.cache[o]&&(this.cache[o].remove(),this.cache[o]=null)}},r.prototype.link=function(e){var a=this.context;this.linkGroup||(this.linkGroup=a.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var o=getCurrentElement$1(a);o&&this.linkByElement(o,e==null?void 0:e.style)},r.prototype.unlink=function(){var e=getCurrentElement$1(this.context);e&&this.removeLink(e)},r.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},r}(Action),ElementRangeState=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return r.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},r.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},r.prototype.getIntersectElements=function(){var e=null;if(isMask(this.context))e=getMaskedElements(this.context,10);else{var a=this.startPoint,o=this.isStarted?this.getCurrentPoint():this.endPoint;if(!a||!o)return;var s={minX:Math.min(a.x,o.x),minY:Math.min(a.y,o.y),maxX:Math.max(a.x,o.x),maxY:Math.max(a.y,o.y)},l=this.context.view;e=getIntersectElements(l,s)}return e},r.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var a=getElements(this.context.view),o=this.getIntersectElements();o&&o.length?this.effectByRecord?this.setSiblingsStateByRecord(o,e):this.setElementsState(o,e,a):this.clear()}},r.prototype.setSiblingsStateByRecord=function(e,a){var o=this,s=this.context.view,l=getSilbings(s),c=e.map(function(d){return d.getModel().data}),u=s.getXScale().field,f=s.getYScales()[0].field;each$1(l,function(d){var g=getElements(d),v=g.filter(function(p){var y=p.getModel().data;return isInRecords(c,y,u,f)});o.setElementsState(v,a,g)})},r.prototype.setSiblingsState=function(e){var a=this,o=this.context.view,s=getSilbings(o);isMask(this.context)&&each$1(s,function(l){var c=getElements(l),u=getSiblingMaskElements(a.context,l,10);u&&u.length?a.setElementsState(u,e,c):a.clearViewState(l)})},r.prototype.setElementsState=function(e,a,o){var s=this;each$1(o,function(l){e.includes(l)?s.setElementState(l,a):s.setElementState(l,!1)})},r.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},r.prototype.clear=function(){var e=this,a=this.context.view;if(this.effectSiblings){var o=getSilbings(a);each$1(o,function(s){e.clearViewState(s)})}else this.clearViewState(a)},r}(StateBase),ElementRangeActive=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="active",e}return r.prototype.active=function(){this.setState()},r}(ElementRangeState),ElementSingleState=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setStateEnable=function(e){var a=getCurrentElement$1(this.context);if(a){if(!isElementChange(this.context))return;e?(this.clear(),this.setElementState(a,!0)):this.hasState(a)&&this.setElementState(a,!1)}},r.prototype.toggle=function(){var e=getCurrentElement$1(this.context);if(e){var a=this.hasState(e);a||this.clear(),this.setElementState(e,!a)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(StateBase),ElementSingleActive=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="active",e}return r.prototype.active=function(){this.setState()},r}(ElementSingleState),STATUS_UNACTIVE$3="inactive",STATUS_ACTIVE$3="active";function clearHighlight$1(n){var r=getElements(n);each$1(r,function(e){e.hasState(STATUS_ACTIVE$3)&&e.setState(STATUS_ACTIVE$3,!1),e.hasState(STATUS_UNACTIVE$3)&&e.setState(STATUS_UNACTIVE$3,!1)})}function setHighlightBy(n,r,e){each$1(n,function(a){r(a)?(a.hasState(STATUS_UNACTIVE$3)&&a.setState(STATUS_UNACTIVE$3,!1),a.setState(STATUS_ACTIVE$3,e)):(a.hasState(STATUS_ACTIVE$3)&&a.setState(STATUS_ACTIVE$3,!1),a.setState(STATUS_UNACTIVE$3,e))})}var STATUS_UNACTIVE$2=ELEMENT_STATE.INACTIVE,STATUS_ACTIVE$2=ELEMENT_STATE.ACTIVE,ElementHighlight=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName=STATUS_ACTIVE$2,e}return r.prototype.setElementsStateByItem=function(e,a,o,s){var l=this,c=function(u){return l.isMathItem(u,a,o)};this.setHighlightBy(e,c,s)},r.prototype.setElementHighlight=function(e,a){a(e)?(e.hasState(STATUS_UNACTIVE$2)&&e.setState(STATUS_UNACTIVE$2,!1),e.setState(STATUS_ACTIVE$2,!0)):e.hasState(STATUS_ACTIVE$2)||e.setState(STATUS_UNACTIVE$2,!0)},r.prototype.setHighlightBy=function(e,a,o){var s=this;if(o)each$1(e,function(u){s.setElementHighlight(u,a)});else{var l=getElementsByState(this.context.view,STATUS_ACTIVE$2),c=!0;each$1(l,function(u){if(!a(u))return c=!1,!1}),c?this.clear():each$1(e,function(u){a(u)&&(u.hasState(STATUS_ACTIVE$2)&&u.setState(STATUS_ACTIVE$2,!1),u.setState(STATUS_UNACTIVE$2,!0))})}},r.prototype.setElementState=function(e,a){var o=this.context.view,s=getElements(o);this.setHighlightBy(s,function(l){return e===l},a)},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var e=this.context.view;clearHighlight$1(e)},r}(ElementState),HighlightColor=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setStateByElement=function(e,a){var o=this.context.view,s=e.geometry.getAttribute("color");if(s){var l=o.getScaleByField(s.getFields()[0]),c=getElementValue$1(e,l.field),u=getElements(o),f=u.filter(function(d){return getElementValue$1(d,l.field)===c});this.setHighlightBy(u,function(d){return f.includes(d)},a)}},r}(ElementHighlight),HighlightX=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setElementHighlight=function(e,a){a(e)?(e.hasState(STATUS_UNACTIVE$2)&&e.setState(STATUS_UNACTIVE$2,!1),e.setState(STATUS_ACTIVE$2,!0)):(e.setState(STATUS_UNACTIVE$2,!0),e.hasState(STATUS_ACTIVE$2)&&e.setState(STATUS_ACTIVE$2,!1))},r.prototype.setStateByElement=function(e,a){var o=this.context.view,s=o.getXScale(),l=getElementValue$1(e,s.field),c=getElements(o),u=c.filter(function(f){return getElementValue$1(f,s.field)===l});this.setHighlightBy(c,function(f){return u.includes(f)},a)},r.prototype.toggle=function(){var e=getCurrentElement$1(this.context);if(e){var a=e.hasState(this.stateName);this.setStateByElement(e,!a)}},r}(ElementHighlight),EVENTS$2;(function(n){n.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",n.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",n.BEFORE_CLEAR="element-range-highlight:beforeclear",n.AFTER_CLEAR="element-range-highlight:afterclear"})(EVENTS$2||(EVENTS$2={}));var ElementRangeHighlight=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="active",e}return r.prototype.clearViewState=function(e){clearHighlight$1(e)},r.prototype.highlight=function(){var e=this.context,a=e.view,o=e.event,s=this.getIntersectElements(),l={view:a,event:o,highlightElements:s};a.emit(EVENTS$2.BEFORE_HIGHLIGHT,Event.fromData(a,EVENTS$2.BEFORE_HIGHLIGHT,l)),this.setState(),a.emit(EVENTS$2.AFTER_HIGHLIGHT,Event.fromData(a,EVENTS$2.AFTER_HIGHLIGHT,l))},r.prototype.clear=function(){var e=this.context.view;e.emit(EVENTS$2.BEFORE_CLEAR,Event.fromData(e,EVENTS$2.BEFORE_CLEAR,{})),n.prototype.clear.call(this),e.emit(EVENTS$2.AFTER_CLEAR,Event.fromData(e,EVENTS$2.AFTER_CLEAR,{}))},r.prototype.setElementsState=function(e,a,o){setHighlightBy(o,function(s){return e.indexOf(s)>=0},a)},r}(ElementRangeState),ElementSingleHighlight=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="active",e}return r.prototype.highlight=function(){this.setState()},r.prototype.setElementState=function(e,a){var o=this.context.view,s=getElements(o);setHighlightBy(s,function(l){return e===l},a)},r.prototype.clear=function(){var e=this.context.view;clearHighlight$1(e)},r}(ElementSingleState),ElementRangeSelected=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="selected",e}return r.prototype.selected=function(){this.setState()},r}(ElementRangeState),ElementMultipleSelected=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="selected",e}return r.prototype.selected=function(){this.setState()},r}(ElementState),ElementSingleSelected=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="selected",e}return r.prototype.selected=function(){this.setState()},r}(ElementSingleState),ListState=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return r.prototype.getTriggerListInfo=function(){var e=getDelegationObject(this.context),a=null;return isList(e)&&(a={item:e.item,list:e.component}),a},r.prototype.getAllowComponents=function(){var e=this,a=this.context.view,o=getComponents(a),s=[];return each$1(o,function(l){l.isList()&&e.allowSetStateByElement(l)&&s.push(l)}),s},r.prototype.hasState=function(e,a){return e.hasState(a,this.stateName)},r.prototype.clearAllComponentsState=function(){var e=this,a=this.getAllowComponents();each$1(a,function(o){o.clearItemsState(e.stateName)})},r.prototype.allowSetStateByElement=function(e){var a=e.get("field");if(!a)return!1;if(this.cfg&&this.cfg.componentNames){var o=e.get("name");if(this.cfg.componentNames.indexOf(o)===-1)return!1}var s=this.context.view,l=getScaleByField(s,a);return l&&l.isCategory},r.prototype.allowSetStateByItem=function(e,a){var o=this.ignoreItemStates;if(o.length){var s=o.filter(function(l){return a.hasState(e,l)});return s.length===0}return!0},r.prototype.setStateByElement=function(e,a,o){var s=e.get("field"),l=this.context.view,c=getScaleByField(l,s),u=getElementValue$1(a,s),f=c.getText(u);this.setItemsState(e,f,o)},r.prototype.setStateEnable=function(e){var a=this,o=getCurrentElement$1(this.context);if(o){var s=this.getAllowComponents();each$1(s,function(f){a.setStateByElement(f,o,e)})}else{var l=getDelegationObject(this.context);if(isList(l)){var c=l.item,u=l.component;this.allowSetStateByElement(u)&&this.allowSetStateByItem(c,u)&&this.setItemState(u,c,e)}}},r.prototype.setItemsState=function(e,a,o){var s=this,l=e.getItems();each$1(l,function(c){c.name===a&&s.setItemState(e,c,o)})},r.prototype.setItemState=function(e,a,o){e.setItemState(a,this.stateName,o)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.reset=function(){this.setStateEnable(!1)},r.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var a=e.list,o=e.item,s=this.hasState(a,o);this.setItemState(a,o,!s)}},r.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},r}(Action),ListActive=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="active",e}return r.prototype.active=function(){this.setState()},r}(ListState),STATUS_UNACTIVE$1="inactive",STATUS_ACTIVE$1="active";function clearList(n){var r=n.getItems();each$1(r,function(e){n.hasState(e,STATUS_ACTIVE$1)&&n.setItemState(e,STATUS_ACTIVE$1,!1),n.hasState(e,STATUS_UNACTIVE$1)&&n.setItemState(e,STATUS_UNACTIVE$1,!1)})}var STATUS_UNACTIVE="inactive",STATUS_ACTIVE="active",ListHighlight=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName=STATUS_ACTIVE,e.ignoreItemStates=["unchecked"],e}return r.prototype.setItemsState=function(e,a,o){this.setHighlightBy(e,function(s){return s.name===a},o)},r.prototype.setItemState=function(e,a,o){e.getItems(),this.setHighlightBy(e,function(s){return s===a},o)},r.prototype.setHighlightBy=function(e,a,o){var s=e.getItems();if(o)each$1(s,function(u){a(u)?(e.hasState(u,STATUS_UNACTIVE)&&e.setItemState(u,STATUS_UNACTIVE,!1),e.setItemState(u,STATUS_ACTIVE,!0)):e.hasState(u,STATUS_ACTIVE)||e.setItemState(u,STATUS_UNACTIVE,!0)});else{var l=e.getItemsByState(STATUS_ACTIVE),c=!0;each$1(l,function(u){if(!a(u))return c=!1,!1}),c?this.clear():each$1(s,function(u){a(u)&&(e.hasState(u,STATUS_ACTIVE)&&e.setItemState(u,STATUS_ACTIVE,!1),e.setItemState(u,STATUS_UNACTIVE,!0))})}},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var e=this.getTriggerListInfo();if(e)clearList(e.list);else{var a=this.getAllowComponents();each$1(a,function(o){o.clearItemsState(STATUS_ACTIVE),o.clearItemsState(STATUS_UNACTIVE)})}},r}(ListState),ListSelected=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="selected",e}return r.prototype.selected=function(){this.setState()},r}(ListState),ListUnchecked=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName="unchecked",e}return r.prototype.unchecked=function(){this.setState()},r}(ListState),STATUS_UNCHECKED$1="unchecked",STATUS_CHECKED="checked",ListChecked=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.stateName=STATUS_CHECKED,e}return r.prototype.setItemState=function(e,a,o){this.setCheckedBy(e,function(s){return s===a},o)},r.prototype.setCheckedBy=function(e,a,o){var s=e.getItems();o&&each$1(s,function(l){a(l)?(e.hasState(l,STATUS_UNCHECKED$1)&&e.setItemState(l,STATUS_UNCHECKED$1,!1),e.setItemState(l,STATUS_CHECKED,!0)):e.hasState(l,STATUS_CHECKED)||e.setItemState(l,STATUS_UNCHECKED$1,!0)})},r.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var a=e.list,o=e.item,s=!some(a.getItems(),function(l){return a.hasState(l,STATUS_UNCHECKED$1)});s||a.hasState(o,STATUS_UNCHECKED$1)?this.setItemState(a,o,!0):this.reset()}},r.prototype.checked=function(){this.setState()},r.prototype.reset=function(){var e=this.getAllowComponents();each$1(e,function(a){a.clearItemsState(STATUS_CHECKED),a.clearItemsState(STATUS_UNCHECKED$1)})},r}(ListState),STATUS_UNCHECKED="unchecked",ListFocus=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.toggle=function(){var e,a,o,s,l,c,u,f,d=this.getTriggerListInfo();if(d!=null&&d.item){var g=d.list,v=d.item,p=g.getItems(),y=p.filter(function(M){return!g.hasState(M,STATUS_UNCHECKED)}),m=p.filter(function(M){return g.hasState(M,STATUS_UNCHECKED)}),x=y[0];if(p.length===y.length)try{for(var A=__values(p),_=A.next();!_.done;_=A.next()){var b=_.value;g.setItemState(b,STATUS_UNCHECKED,b.id!==v.id)}}catch(M){e={error:M}}finally{try{_&&!_.done&&(a=A.return)&&a.call(A)}finally{if(e)throw e.error}}else if(p.length-m.length===1)if(x.id===v.id)try{for(var S=__values(p),C=S.next();!C.done;C=S.next()){var b=C.value;g.setItemState(b,STATUS_UNCHECKED,!1)}}catch(M){o={error:M}}finally{try{C&&!C.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}else try{for(var E=__values(p),T=E.next();!T.done;T=E.next()){var b=T.value;g.setItemState(b,STATUS_UNCHECKED,b.id!==v.id)}}catch(M){l={error:M}}finally{try{T&&!T.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}else try{for(var w=__values(p),L=w.next();!L.done;L=w.next()){var b=L.value;g.setItemState(b,STATUS_UNCHECKED,b.id!==v.id)}}catch(M){u={error:M}}finally{try{L&&!L.done&&(f=w.return)&&f.call(w)}finally{if(u)throw u.error}}}},r}(ListState),STATUS_SHOW="showRadio",TIP_ID="legend-radio-tip",ListRadio=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.timeStamp=0,e}return r.prototype.show=function(){var e=this.getTriggerListInfo();if(e!=null&&e.item){var a=e.list,o=e.item;a.setItemState(o,STATUS_SHOW,!0)}},r.prototype.hide=function(){var e=this.getTriggerListInfo();if(e!=null&&e.item){var a=e.list,o=e.item;a.setItemState(o,STATUS_SHOW,!1)}},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},r.prototype.showTip=function(){var e=this.context,a=e.event,o=this.timeStamp,s=+new Date,l=this.context.event.target;if(s-o>16&&l.get("name")==="legend-item-radio"){var c=this.location,u={x:a.x,y:a.y};this.timeStamp=s,this.location=u,(!c||!isEqual$1(c,u))&&this.showTooltip(u)}},r.prototype.hideTip=function(){this.hideTooltip(),this.location=null},r.prototype.showTooltip=function(e){var a=this.context,o=a.event,s=o.target;if(s&&s.get("tip")){this.tooltip||this.renderTooltip();var l=a.view.getCanvas().get("el").getBoundingClientRect(),c=l.x,u=l.y;this.tooltip.update(__assign$8(__assign$8({title:s.get("tip")},e),{x:e.x+c,y:e.y+u})),this.tooltip.show()}},r.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},r.prototype.renderTooltip=function(){var e,a=(e={},e[CONTAINER_CLASS]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},e[TITLE_CLASS]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},e);document.getElementById(TIP_ID)&&document.body.removeChild(document.getElementById(TIP_ID));var o=new HtmlTooltip({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:a,containerId:TIP_ID});o.init(),o.setCapture(!1),this.tooltip=o},r}(ListState),MaskBase=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return r.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},r.prototype.emitEvent=function(e){var a="mask:".concat(e),o=this.context.view,s=this.context.event;o.emit(a,{target:this.maskShape,shape:this.maskShape,points:this.points,x:s.x,y:s.y})},r.prototype.createMask=function(){var e=this.context.view,a=this.getMaskAttrs(),o=e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:__assign$8({fill:"#C5D4EB",opacity:.3},a)});return o},r.prototype.getMaskPath=function(){return[]},r.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},r.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(e==null?void 0:e.maskStyle),this.emitEvent("start")},r.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},r.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var e=this.getCurrentPoint(),a=this.preMovePoint,o=e.x-a.x,s=e.y-a.y,l=this.points;each$1(l,function(c){c.x+=o,c.y+=s}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},r.prototype.updateMask=function(e){var a=deepMix({},this.getMaskAttrs(),e);this.maskShape.attr(a)},r.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},r.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},r.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},r.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},r.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,n.prototype.destroy.call(this)},r}(Action);function getMaskAttrs$3(n){var r=last(n),e=0,a=0,o=0;if(n.length){var s=n[0];e=distance$2(s,r)/2,a=(r.x+s.x)/2,o=(r.y+s.y)/2}return{x:a,y:o,r:e}}var CircleMask=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.shapeType="circle",e}return r.prototype.getMaskAttrs=function(){return getMaskAttrs$3(this.points)},r}(MaskBase);function getRegion$1(n){return{start:head(n),end:last(n)}}function getMaskAttrs$2(n,r){var e=Math.min(n.x,r.x),a=Math.min(n.y,r.y),o=Math.abs(r.x-n.x),s=Math.abs(r.y-n.y);return{x:e,y:a,width:o,height:s}}var RectMask=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.shapeType="rect",e}return r.prototype.getRegion=function(){return getRegion$1(this.points)},r.prototype.getMaskAttrs=function(){var e=this.getRegion(),a=e.start,o=e.end;return getMaskAttrs$2(a,o)},r}(MaskBase);function clampPoint(n){n.x=clamp(n.x,0,1),n.y=clamp(n.y,0,1)}function getRegion(n,r,e,a){var o=null,s=null,l=a.invert(head(n)),c=a.invert(last(n));return e&&(clampPoint(l),clampPoint(c)),r==="x"?(o=a.convert({x:l.x,y:0}),s=a.convert({x:c.x,y:1})):(o=a.convert({x:0,y:l.y}),s=a.convert({x:1,y:c.y})),{start:o,end:s}}var DimRect=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return r.prototype.getRegion=function(){var e=this.context.view.getCoordinate();return getRegion(this.points,this.dim,this.inPlot,e)},r}(RectMask);function getMaskPath$1(n){var r=[];return n.length&&(each$1(n,function(e,a){a===0?r.push(["M",e.x,e.y]):r.push(["L",e.x,e.y])}),r.push(["L",n[0].x,n[0].y])),r}function getMaskAttrs$1(n){return{path:getMaskPath$1(n)}}var PathMask=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){return getMaskPath$1(this.points)},r.prototype.getMaskAttrs=function(){return getMaskAttrs$1(this.points)},r.prototype.addPoint=function(){this.resize()},r}(MaskBase);function getMaskPath(n){return getSpline(n,!0)}function getMaskAttrs(n){return{path:getMaskPath(n)}}var SmoothPathMask=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){return getMaskPath(this.points)},r.prototype.getMaskAttrs=function(){return getMaskAttrs(this.points)},r}(PathMask),MultipleMaskBase=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.maskShapes=[],e.starting=!1,e.moving=!1,e.recordPoints=null,e.preMovePoint=null,e.shapeType="path",e.maskType="multi-mask",e}return r.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},r.prototype.emitEvent=function(e){var a="".concat(this.maskType,":").concat(e),o=this.context.view,s=this.context.event,l={type:this.shapeType,name:this.maskType,get:function(c){return l.hasOwnProperty(c)?l[c]:void 0}};o.emit(a,{target:l,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:s.x,y:s.y})},r.prototype.createMask=function(e){var a=this.context.view,o=this.recordPoints[e],s=this.getMaskAttrs(o),l=a.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:__assign$8({fill:"#C5D4EB",opacity:.3},s)});this.maskShapes.push(l)},r.prototype.getMaskPath=function(e){return[]},r.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(e){return e.show()}),this.emitEvent("show"))},r.prototype.start=function(e){this.recordPointStart(),this.starting=!0,this.moving=!1;var a=this.recordPoints.length-1;this.createMask(a),this.updateShapesCapture(!1),this.updateMask(e==null?void 0:e.maskStyle),this.emitEvent("start")},r.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},r.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var e=this.getCurrentPoint(),a=this.preMovePoint,o=e.x-a.x,s=e.y-a.y,l=this.getCurMaskShapeIndex();l>-1&&(this.recordPoints[l].forEach(function(c){c.x+=o,c.y+=s}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e)}},r.prototype.updateMask=function(e){var a=this;this.recordPoints.forEach(function(o,s){var l=deepMix({},a.getMaskAttrs(o),e);a.maskShapes[s].attr(l)})},r.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},r.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},r.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},r.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(e){return e.hide()}),this.emitEvent("hide"))},r.prototype.remove=function(){var e=this.getCurMaskShapeIndex();e>-1&&(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},r.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(e){return e.remove()}),this.maskShapes=[],this.preMovePoint=null},r.prototype.clear=function(){var e=this.getCurMaskShapeIndex();e===-1?(this.recordPointClear(),this.maskShapes.forEach(function(a){return a.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},r.prototype.destroy=function(){this.clear(),n.prototype.destroy.call(this)},r.prototype.getRecordPoints=function(){var e;return __spreadArray$2([],__read((e=this.recordPoints)!==null&&e!==void 0?e:[]),!1)},r.prototype.recordPointStart=function(){var e=this.getRecordPoints(),a=this.getCurrentPoint();this.recordPoints=__spreadArray$2(__spreadArray$2([],__read(e),!1),[[a]],!1)},r.prototype.recordPointContinue=function(){var e=this.getRecordPoints(),a=this.getCurrentPoint(),o=e.splice(-1,1)[0]||[];o.push(a),this.recordPoints=__spreadArray$2(__spreadArray$2([],__read(e),!1),[o],!1)},r.prototype.recordPointClear=function(){this.recordPoints=[]},r.prototype.updateShapesCapture=function(e){this.maskShapes.forEach(function(a){return a.set("capture",e)})},r.prototype.getCurMaskShapeIndex=function(){var e=this.getCurrentPoint();return this.maskShapes.findIndex(function(a){var o=a.attrs,s=o.width,l=o.height,c=o.r,u=s===0||l===0||c===0;return!u&&a.isHit(e.x,e.y)})},r}(Action),RectMultiMask=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.shapeType="rect",e}return r.prototype.getRegion=function(e){return getRegion$1(e)},r.prototype.getMaskAttrs=function(e){var a=this.getRegion(e),o=a.start,s=a.end;return getMaskAttrs$2(o,s)},r}(MultipleMaskBase),DimRectMultiMask=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return r.prototype.getRegion=function(e){var a=this.context.view.getCoordinate();return getRegion(e,this.dim,this.inPlot,a)},r}(RectMultiMask),CircleMultiMask=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.shapeType="circle",e.getMaskAttrs=getMaskAttrs$3,e}return r}(MultipleMaskBase),PathMultiMask=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.getMaskPath=getMaskPath$1,e.getMaskAttrs=getMaskAttrs$1,e}return r.prototype.addPoint=function(){this.resize()},r}(MultipleMaskBase),SmoothPathMultiMask=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.getMaskPath=getMaskPath,e.getMaskAttrs=getMaskAttrs,e}return r}(PathMultiMask),CursorAction=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setCursor=function(e){var a=this.context.view;a.getCanvas().setCursor(e)},r.prototype.default=function(){this.setCursor("default")},r.prototype.pointer=function(){this.setCursor("pointer")},r.prototype.move=function(){this.setCursor("move")},r.prototype.crosshair=function(){this.setCursor("crosshair")},r.prototype.wait=function(){this.setCursor("wait")},r.prototype.help=function(){this.setCursor("help")},r.prototype.text=function(){this.setCursor("text")},r.prototype.eResize=function(){this.setCursor("e-resize")},r.prototype.wResize=function(){this.setCursor("w-resize")},r.prototype.nResize=function(){this.setCursor("n-resize")},r.prototype.sResize=function(){this.setCursor("s-resize")},r.prototype.neResize=function(){this.setCursor("ne-resize")},r.prototype.nwResize=function(){this.setCursor("nw-resize")},r.prototype.seResize=function(){this.setCursor("se-resize")},r.prototype.swResize=function(){this.setCursor("sw-resize")},r.prototype.nsResize=function(){this.setCursor("ns-resize")},r.prototype.ewResize=function(){this.setCursor("ew-resize")},r.prototype.zoomIn=function(){this.setCursor("zoom-in")},r.prototype.zoomOut=function(){this.setCursor("zoom-out")},r}(Action),DataFilter=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.filterView=function(e,a,o){var s=this;e.getScaleByField(a)&&e.filter(a,o),e.views&&e.views.length&&each$1(e.views,function(l){s.filterView(l,a,o)})},r.prototype.filter=function(){var e=getDelegationObject(this.context);if(e){var a=this.context.view,o=e.component,s=o.get("field");if(isList(e)){if(s){var l=o.getItemsByState("unchecked"),c=getScaleByField(a,s),u=l.map(function(p){return p.name});u.length?this.filterView(a,s,function(p){var y=c.getText(p);return!u.includes(y)}):this.filterView(a,s,null),a.render(!0)}}else if(isSlider(e)){var f=o.getValue(),d=__read(f,2),g=d[0],v=d[1];this.filterView(a,s,function(p){return p>=g&&p<=v}),a.render(!0)}}},r}(Action);function getFilter(n,r,e,a){var o=Math.min(e[r],a[r]),s=Math.max(e[r],a[r]),l=__read(n.range,2),c=l[0],u=l[1];if(o<c&&(o=c),s>u&&(s=u),o===u&&s===u)return null;var f=n.invert(o),d=n.invert(s);if(n.isCategory){var g=n.values.indexOf(f),v=n.values.indexOf(d),p=n.values.slice(g,v+1);return function(y){return p.includes(y)}}else return function(y){return y>=f&&y<=d}}var EVENTS$1;(function(n){n.FILTER="brush-filter-processing",n.RESET="brush-filter-reset",n.BEFORE_FILTER="brush-filter:beforefilter",n.AFTER_FILTER="brush-filter:afterfilter",n.BEFORE_RESET="brush-filter:beforereset",n.AFTER_RESET="brush-filter:afterreset"})(EVENTS$1||(EVENTS$1={}));var RangeFilter=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return r.prototype.hasDim=function(e){return this.dims.includes(e)},r.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},r.prototype.filter=function(){var e,a;if(isMask(this.context)){var o=this.context.event.target,s=o.getCanvasBBox();e={x:s.x,y:s.y},a={x:s.maxX,y:s.maxY}}else{if(!this.isStarted)return;e=this.startPoint,a=this.context.getCurrentPoint()}if(!(Math.abs(e.x-a.x)<5||Math.abs(e.x-a.y)<5)){var l=this.context,c=l.view,u=l.event,f={view:c,event:u,dims:this.dims};c.emit(EVENTS$1.BEFORE_FILTER,Event.fromData(c,EVENTS$1.BEFORE_FILTER,f));var d=c.getCoordinate(),g=d.invert(a),v=d.invert(e);if(this.hasDim("x")){var p=c.getXScale(),y=getFilter(p,"x",g,v);this.filterView(c,p.field,y)}if(this.hasDim("y")){var m=c.getYScales()[0],y=getFilter(m,"y",g,v);this.filterView(c,m.field,y)}this.reRender(c,{source:EVENTS$1.FILTER}),c.emit(EVENTS$1.AFTER_FILTER,Event.fromData(c,EVENTS$1.AFTER_FILTER,f))}},r.prototype.end=function(){this.isStarted=!1},r.prototype.reset=function(){var e=this.context.view;if(e.emit(EVENTS$1.BEFORE_RESET,Event.fromData(e,EVENTS$1.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var a=e.getXScale();this.filterView(e,a.field,null)}if(this.hasDim("y")){var o=e.getYScales()[0];this.filterView(e,o.field,null)}this.reRender(e,{source:EVENTS$1.RESET}),e.emit(EVENTS$1.AFTER_RESET,Event.fromData(e,EVENTS$1.AFTER_RESET,{}))},r.prototype.filterView=function(e,a,o){e.filter(a,o)},r.prototype.reRender=function(e,a){e.render(!0,a)},r}(Action),SiblingFilter$1=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.filterView=function(e,a,o){var s=getSilbings(e);each$1(s,function(l){l.filter(a,o)})},r.prototype.reRender=function(e){var a=getSilbings(e);each$1(a,function(o){o.render(!0)})},r}(RangeFilter),ElementFilter=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.filter=function(){var e=getDelegationObject(this.context),a=this.context.view,o=getElements(a);if(isMask(this.context)){var s=getMaskedElements(this.context,10);s&&each$1(o,function(m){s.includes(m)?m.show():m.hide()})}else if(e){var l=e.component,c=l.get("field");if(isList(e)){if(c){var u=l.getItemsByState("unchecked"),f=getScaleByField(a,c),d=u.map(function(m){return m.name});each$1(o,function(m){var x=getElementValue$1(m,c),A=f.getText(x);d.indexOf(A)>=0?m.hide():m.show()})}}else if(isSlider(e)){var g=l.getValue(),v=__read(g,2),p=v[0],y=v[1];each$1(o,function(m){var x=getElementValue$1(m,c);x>=p&&x<=y?m.show():m.hide()})}}},r.prototype.clear=function(){var e=getElements(this.context.view);each$1(e,function(a){a.show()})},r.prototype.reset=function(){this.clear()},r}(Action),SiblingFilter=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.byRecord=!1,e}return r.prototype.filter=function(){isMask(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},r.prototype.filterByRecord=function(){var e=this.context.view,a=getMaskedElements(this.context,10);if(a){var o=e.getXScale().field,s=e.getYScales()[0].field,l=a.map(function(u){return u.getModel().data}),c=getSilbings(e);each$1(c,function(u){var f=getElements(u);each$1(f,function(d){var g=d.getModel().data;isInRecords(l,g,o,s)?d.show():d.hide()})})}},r.prototype.filterByBBox=function(){var e=this,a=this.context.view,o=getSilbings(a);each$1(o,function(s){var l=getSiblingMaskElements(e.context,s,10),c=getElements(s);l&&each$1(c,function(u){l.includes(u)?u.show():u.hide()})})},r.prototype.reset=function(){var e=getSilbings(this.context.view);each$1(e,function(a){var o=getElements(a);each$1(o,function(s){s.show()})})},r}(Action),PADDING_RIGHT$1=10,PADDING_TOP$2=5,ButtonAction$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return r.prototype.getButtonCfg=function(){return deepMix(this.buttonCfg,this.cfg)},r.prototype.drawButton=function(){var e=this.getButtonCfg(),a=this.context.view.foregroundGroup.addGroup({name:e.name}),o=a.addShape({type:"text",name:"button-text",attrs:__assign$8({text:e.text},e.textStyle)}),s=o.getBBox(),l=parsePadding(e.padding),c=a.addShape({type:"rect",name:"button-rect",attrs:__assign$8({x:s.x-l[3],y:s.y-l[0],width:s.width+l[1]+l[3],height:s.height+l[0]+l[2]},e.style)});c.toBack(),a.on("mouseenter",function(){c.attr(e.activeStyle)}),a.on("mouseleave",function(){c.attr(e.style)}),this.buttonGroup=a},r.prototype.resetPosition=function(){var e=this.context.view,a=e.getCoordinate(),o=a.convert({x:1,y:1}),s=this.buttonGroup,l=s.getBBox(),c=transform$6(null,[["t",o.x-l.width-PADDING_RIGHT$1,o.y+l.height+PADDING_TOP$2]]);s.setMatrix(c)},r.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},r.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},r.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),n.prototype.destroy.call(this)},r}(Action),DISTANCE=4,Drag=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},r.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),a=this.context.view,o=this.context.event;this.dragStart?a.emit("drag",{target:o.target,x:o.x,y:o.y}):distance$2(e,this.startPoint)>DISTANCE&&(a.emit("dragstart",{target:o.target,x:o.x,y:o.y}),this.dragStart=!0)}},r.prototype.end=function(){if(this.dragStart){var e=this.context.view,a=this.context.event;e.emit("dragend",{target:a.target,x:a.x,y:a.y})}this.starting=!1,this.dragStart=!1},r}(Action),MIN_DISTANCE=5,Move=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},r.prototype.move=function(){if(this.starting){var e=this.startPoint,a=this.context.getCurrentPoint(),o=distance$2(e,a);if(o>MIN_DISTANCE&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var s=this.context.view,l=transform$6(this.startMatrix,[["t",a.x-e.x,a.y-e.y]]);s.backgroundGroup.setMatrix(l),s.foregroundGroup.setMatrix(l),s.middleGroup.setMatrix(l)}}},r.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},r.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},r}(Action),DIM_X="x",DIM_Y="y",ScaleTranslate$2=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.dims=[DIM_X,DIM_Y],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return r.prototype.hasDim=function(e){return this.dims.includes(e)},r.prototype.getScale=function(e){var a=this.context.view;return e==="x"?a.getXScale():a.getYScales()[0]},r.prototype.resetDim=function(e){var a=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var o=this.getScale(e);a.scale(o.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},r.prototype.reset=function(){this.resetDim(DIM_X),this.resetDim(DIM_Y);var e=this.context.view;e.render(!0)},r}(Action),ScaleTranslate$1=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return r.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var a=this.dims;each$1(a,function(o){var s=e.getScale(o),l=s.min,c=s.max,u=s.values;e.startCache[o]={min:l,max:c,values:u}})},r.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},r.prototype.translate=function(){var e=this;if(this.starting){var a=this.startPoint,o=this.context.view.getCoordinate(),s=this.context.getCurrentPoint(),l=o.invert(a),c=o.invert(s),u=c.x-l.x,f=c.y-l.y,d=this.context.view,g=this.dims;each$1(g,function(v){e.translateDim(v,{x:u*-1,y:f*-1})}),d.render(!0)}},r.prototype.translateDim=function(e,a){if(this.hasDim(e)){var o=this.getScale(e);o.isLinear&&this.translateLinear(e,o,a)}},r.prototype.translateLinear=function(e,a,o){var s=this.context.view,l=this.startCache[e],c=l.min,u=l.max,f=u-c,d=o[e]*f;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:a.nice,min:c,max:u}),s.scale(a.field,{nice:!1,min:c+d,max:u+d})},r.prototype.reset=function(){n.prototype.reset.call(this),this.startPoint=null,this.starting=!1},r}(ScaleTranslate$2),ScaleTranslate=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.zoomRatio=.05,e}return r.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},r.prototype.zoom=function(e){var a=this,o=this.dims;each$1(o,function(s){a.zoomDim(s,e)}),this.context.view.render(!0)},r.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},r.prototype.zoomDim=function(e,a){if(this.hasDim(e)){var o=this.getScale(e);o.isLinear&&this.zoomLinear(e,o,a)}},r.prototype.zoomLinear=function(e,a,o){var s=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:a.nice,min:a.min,max:a.max});var l=this.cacheScaleDefs[e],c=l.max-l.min,u=a.min,f=a.max,d=o*c,g=u-d,v=f+d,p=v-g,y=p/c;v>g&&y<100&&y>.01&&s.scale(a.field,{nice:!1,min:u-d,max:f+d})},r}(ScaleTranslate$2);function isWheelDown$1(n){var r=n.gEvent.originalEvent;return r.deltaY>0}var DEFAULT_WHEELDELTA=1,MousewheelScroll=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.scroll=function(e){var a=this.context,o=a.view,s=a.event;if(o.getOptions().scrollbar){var l=(e==null?void 0:e.wheelDelta)||DEFAULT_WHEELDELTA,c=o.getController("scrollbar"),u=o.getXScale(),f=o.getOptions().data,d=size(valuesOfKey(f,u.field)),g=size(u.values),v=c.getValue(),p=Math.floor((d-g)*v),y=p+(isWheelDown$1(s)?l:-l),m=l/(d-g)/1e4,x=clamp(y/(d-g)+m,0,1);c.setValue(x)}},r}(Action),AXIS_DESCRIPTION_TOOLTIP="aixs-description-tooltip",AxisDescription=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.show=function(){var e=this.context,a=getDelegationObject(e).axis,o=a.cfg.title,s=o.description,l=o.text,c=o.descriptionTooltipStyle,u=e.event,f=u.x,d=u.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:l||"",customContent:function(){return`
          <div class="`.concat(CONTAINER_CLASS,'" style={').concat(c,`}>
            <div class="`).concat(TITLE_CLASS,`">
              字段说明：`).concat(s,`
            </div>
          </div>
        `)},x:f,y:d}),this.tooltip.show()},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},r.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},r.prototype.renderTooltip=function(){var e,a=this.context.view,o=a.canvas,s={start:{x:0,y:0},end:{x:o.get("width"),y:o.get("height")}},l=new HtmlTooltip({parent:o.get("el").parentNode,region:s,visible:!1,containerId:AXIS_DESCRIPTION_TOOLTIP,domStyles:__assign$8({},deepMix({},(e={},e[CONTAINER_CLASS]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},e[TITLE_CLASS]={"word-break":"break-all","margin-bottom":"3px"},e)))});l.init(),l.setCapture(!1),this.tooltip=l},r}(Action);registerTheme("dark",createThemeByStyleSheet(antvDark));registerEngine("canvas",CanvasEngine);registerEngine("svg",SVGEngine);registerGeometry("Polygon",Polygon);registerGeometry("Interval",Interval);registerGeometry("Schema",Schema);registerGeometry("Path",Path);registerGeometry("Point",Point);registerGeometry("Line",Line$1);registerGeometry("Area",Area$1);registerGeometry("Edge",Edge);registerGeometry("Heatmap",Heatmap);registerGeometry("Violin",Violin);registerGeometryLabel("base",GeometryLabel);registerGeometryLabel("interval",IntervalLabel);registerGeometryLabel("pie",PieLabel);registerGeometryLabel("polar",PolarLabel);registerGeometryLabelLayout("overlap",overlap);registerGeometryLabelLayout("distribute",distribute);registerGeometryLabelLayout("fixed-overlap",fixedOverlap);registerGeometryLabelLayout("hide-overlap",hideOverlap);registerGeometryLabelLayout("limit-in-shape",limitInShape);registerGeometryLabelLayout("limit-in-canvas",limitInCanvas);registerGeometryLabelLayout("limit-in-plot",limitInPlot$3);registerGeometryLabelLayout("pie-outer",pieOuterLabelLayout);registerGeometryLabelLayout("adjust-color",adjustColor);registerGeometryLabelLayout("interval-adjust-position",intervalAdjustPosition);registerGeometryLabelLayout("interval-hide-overlap",intervalHideOverlap);registerGeometryLabelLayout("point-adjust-position",pointAdjustPosition);registerGeometryLabelLayout("pie-spider",pieSpiderLabelLayout);registerGeometryLabelLayout("path-adjust-position",pathAdjustPosition);registerAnimation("fade-in",fadeIn);registerAnimation("fade-out",fadeOut);registerAnimation("grow-in-x",growInX);registerAnimation("grow-in-xy",growInXY);registerAnimation("grow-in-y",growInY);registerAnimation("scale-in-x",scaleInX);registerAnimation("scale-in-y",scaleInY);registerAnimation("wave-in",waveIn);registerAnimation("zoom-in",zoomIn);registerAnimation("zoom-out",zoomOut);registerAnimation("position-update",positionUpdate);registerAnimation("sector-path-update",sectorPathUpdate);registerAnimation("path-in",pathIn);registerFacet("rect",Rect);registerFacet("mirror",Mirror);registerFacet("list",List);registerFacet("matrix",Matrix);registerFacet("circle",Circle);registerFacet("tree",Tree);registerComponentController("axis",Axis);registerComponentController("legend",Legend);registerComponentController("tooltip",Tooltip);registerComponentController("annotation",Annotation);registerComponentController("slider",Slider);registerComponentController("scrollbar",Scrollbar);registerAction("tooltip",TooltipAction);registerAction("sibling-tooltip",SiblingTooltip);registerAction("ellipsis-text",EllipsisText);registerAction("element-active",ElementActive);registerAction("element-single-active",ElementSingleActive);registerAction("element-range-active",ElementRangeActive);registerAction("element-highlight",ElementHighlight);registerAction("element-highlight-by-x",HighlightX);registerAction("element-highlight-by-color",HighlightColor);registerAction("element-single-highlight",ElementSingleHighlight);registerAction("element-range-highlight",ElementRangeHighlight);registerAction("element-sibling-highlight",ElementRangeHighlight,{effectSiblings:!0,effectByRecord:!0});registerAction("element-selected",ElementMultipleSelected);registerAction("element-single-selected",ElementSingleSelected);registerAction("element-range-selected",ElementRangeSelected);registerAction("element-link-by-color",LinkByColor);registerAction("active-region",ActiveRegion);registerAction("list-active",ListActive);registerAction("list-selected",ListSelected);registerAction("list-highlight",ListHighlight);registerAction("list-unchecked",ListUnchecked);registerAction("list-checked",ListChecked);registerAction("list-focus",ListFocus);registerAction("list-radio",ListRadio);registerAction("legend-item-highlight",ListHighlight,{componentNames:["legend"]});registerAction("axis-label-highlight",ListHighlight,{componentNames:["axis"]});registerAction("axis-description",AxisDescription);registerAction("rect-mask",RectMask);registerAction("x-rect-mask",DimRect,{dim:"x"});registerAction("y-rect-mask",DimRect,{dim:"y"});registerAction("circle-mask",CircleMask);registerAction("path-mask",PathMask);registerAction("smooth-path-mask",SmoothPathMask);registerAction("rect-multi-mask",RectMultiMask);registerAction("x-rect-multi-mask",DimRectMultiMask,{dim:"x"});registerAction("y-rect-multi-mask",DimRectMultiMask,{dim:"y"});registerAction("circle-multi-mask",CircleMultiMask);registerAction("path-multi-mask",PathMultiMask);registerAction("smooth-path-multi-mask",SmoothPathMultiMask);registerAction("cursor",CursorAction);registerAction("data-filter",DataFilter);registerAction("brush",RangeFilter);registerAction("brush-x",RangeFilter,{dims:["x"]});registerAction("brush-y",RangeFilter,{dims:["y"]});registerAction("sibling-filter",SiblingFilter$1);registerAction("sibling-x-filter",SiblingFilter$1,{dims:"x"});registerAction("sibling-y-filter",SiblingFilter$1,{dims:"y"});registerAction("element-filter",ElementFilter);registerAction("element-sibling-filter",SiblingFilter);registerAction("element-sibling-filter-record",SiblingFilter,{byRecord:!0});registerAction("view-drag",Drag);registerAction("view-move",Move);registerAction("scale-translate",ScaleTranslate$1);registerAction("scale-zoom",ScaleTranslate);registerAction("reset-button",ButtonAction$1,{name:"reset-button",text:"reset"});registerAction("mousewheel-scroll",MousewheelScroll);function isPointInView$1(n){return n.isInPlot()}registerInteraction("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]});registerInteraction("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]});registerInteraction("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]});registerInteraction("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]});registerInteraction("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]});registerInteraction("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]});registerInteraction("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]});registerInteraction("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]});registerInteraction("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]});registerInteraction("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]});registerInteraction("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]});registerInteraction("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(n){return!n.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(n){return!n.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]});registerInteraction("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:isPointInView$1,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:isPointInView$1,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]});registerInteraction("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]});registerInteraction("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:isPointInView$1,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:isPointInView$1,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]});registerInteraction("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:"path-mask:start"},{trigger:"mousedown",isEnable:isPointInView$1,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]});registerInteraction("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(n){return!isMultipleMask(n)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]});registerInteraction("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]});registerInteraction("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(n){return!n.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]});registerInteraction("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]});registerInteraction("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]});registerInteraction("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]});registerInteraction("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});registerInteraction("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function isWheelDown(n){return n.gEvent.preventDefault(),n.gEvent.originalEvent.deltaY>0}registerInteraction("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(n){return isWheelDown(n.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(n){return!isWheelDown(n.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]});registerInteraction("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});registerInteraction("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var AXIS_META_CONFIG_KEYS=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],LEVEL;(function(n){n.ERROR="error",n.WARN="warn",n.INFO="log"})(LEVEL||(LEVEL={}));var BRAND="AntV/G2Plot";function getMessage(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var a=0;return"".concat(BRAND,": ").concat(n.replace(/%s/g,function(){return"".concat(r[a++])}))}function log(n,r,e){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];r||console[n](getMessage.apply(void 0,__spreadArray$2([e],a,!1)))}function pick(n,r){var e={};return n!==null&&typeof n=="object"&&r.forEach(function(a){var o=n[a];o!==void 0&&(e[a]=o)}),e}function adjustYMetaByZero(n,r){if(!n)return{};var e=n.filter(function(s){var l=get(s,[r]);return isNumber$2(l)&&!isNaN(l)}),a=e.every(function(s){return get(s,[r])>=0}),o=e.every(function(s){return get(s,[r])<=0});return a?{min:0}:o?{max:0}:{}}function transformDataToNodeLinkData(n,r,e,a,o){if(o===void 0&&(o=[]),!Array.isArray(n))return{nodes:[],links:[]};var s=[],l={},c=-1;return n.forEach(function(u){var f=u[r],d=u[e],g=u[a],v=pick(u,o);l[f]||(l[f]=__assign$8({id:++c,name:f},v)),l[d]||(l[d]=__assign$8({id:++c,name:d},v)),s.push(__assign$8({source:l[f].id,target:l[d].id,value:g},v))}),{nodes:Object.values(l).sort(function(u,f){return u.id-f.id}),links:s}}function processIllegalData(n,r){var e=filter(n,function(a){var o=a[r];return o===null||typeof o=="number"&&!isNaN(o)});return log(LEVEL.WARN,e.length===n.length,"illegal data existed in chart data."),e}var MAX_MIX_LEVEL=5,toString={}.toString,isType=function(n,r){return toString.call(n)==="[object "+r+"]"},isArray$3=function(n){return isType(n,"Array")},isObjectLike=function(n){return typeof n=="object"&&n!==null},isPlainObject=function(n){if(!isObjectLike(n)||!isType(n,"Object"))return!1;for(var r=n;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r},deep=function(n,r,e,a){e=e||0,a=a||MAX_MIX_LEVEL;for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var s=r[o];s?isPlainObject(s)?(isPlainObject(n[o])||(n[o]={}),e<a?deep(n[o],s,e+1,a):n[o]=r[o]):isArray$3(s)?(n[o]=[],n[o]=n[o].concat(s)):n[o]=s:n[o]=s}},deepAssign=function(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var a=0;a<r.length;a+=1)deep(n,r[a]);return n};function getContainerSize(n){if(!n)return{width:0,height:0};var r=getComputedStyle(n);return{width:(n.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10),height:(n.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)}}function flow(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(e){return n.reduce(function(a,o){return o(a)},e)}}function findGeometry(n,r){return n.geometries.find(function(e){return e.type===r})}function getAllElements(n){return reduce(n.geometries,function(r,e){return r.concat(e.elements)},[])}function getAllElementsRecursively(n){return get(n,["views","length"],0)<=0?getAllElements(n):reduce(n.views,function(r,e){return r.concat(getAllElementsRecursively(e))},getAllElements(n))}function getAllGeometriesRecursively(n){return get(n,["views","length"],0)<=0?n.geometries:reduce(n.views,function(r,e){return r.concat(e.geometries)},n.geometries)}function kebabCase(n){if(!n)return n;var r=n.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return r.map(function(e){return e.toLowerCase()}).join("-")}function transformLabel(n){if(!isType$1(n,"Object"))return n;var r=__assign$8({},n);return r.formatter&&!r.content&&(r.content=r.formatter),r}var ctx;function getCanvasContext(){return ctx||(ctx=document.createElement("canvas").getContext("2d")),ctx}memoize(function(n,r){r===void 0&&(r={});var e=r.fontSize,a=r.fontFamily,o=a===void 0?"sans-serif":a,s=r.fontWeight,l=r.fontStyle,c=r.fontVariant,u=getCanvasContext();u.font=[l,s,c,"".concat(e,"px"),o].join(" ");var f=u.measureText(isString$1(n)?n:"");return f.width},function(n,r){return r===void 0&&(r={}),__spreadArray$2([n],values(r),!0).join("")});function isRealNumber(n){return typeof n=="number"&&!isNaN(n)}function isBetween(n,r,e){var a=Math.min(r,e),o=Math.max(r,e);return n>=a&&n<=o}function normalPadding(n){if(isNumber$2(n))return[n,n,n,n];if(isArray$4(n)){var r=n.length;if(r===1)return[n[0],n[0],n[0],n[0]];if(r===2)return[n[0],n[1],n[0],n[1]];if(r===3)return[n[0],n[1],n[2],n[1]];if(r===4)return n}return[0,0,0,0]}function getAdjustAppendPadding(n,r,e){r===void 0&&(r="bottom"),e===void 0&&(e=25);var a=normalPadding(n),o=[r.startsWith("top")?e:0,r.startsWith("right")?e:0,r.startsWith("bottom")?e:0,r.startsWith("left")?e:0];return[a[0]+o[0],a[1]+o[1],a[2]+o[2],a[3]+o[3]]}function resolveAllPadding(n){var r=n.map(function(a){return normalPadding(a)}),e=[0,0,0,0];return r.length>0&&(e=e.map(function(a,o){return r.forEach(function(s,l){a+=r[l][o]}),a})),e}function points2Path(n,r){var e=[];if(n.length){e.push(["M",n[0].x,n[0].y]);for(var a=1,o=n.length;a<o;a+=1){var s=n[a];e.push(["L",s.x,s.y])}r&&e.push(["Z"])}return e}var smoothBezier=function(n,r,e,a){var o=[],s,l,c=!!a,u,f;if(c){u=[1/0,1/0],f=[-1/0,-1/0];for(var d=0,g=n.length;d<g;d++){var v=n[d];u=min$1([0,0],u,v),f=max$1([0,0],f,v)}u=min$1([0,0],u,a[0]),f=max$1([0,0],f,a[1])}for(var d=0,p=n.length;d<p;d++){var v=n[d];if(e)s=n[d?d-1:p-1],l=n[(d+1)%p];else if(d===0||d===p-1){o.push(v);continue}else s=n[d-1],l=n[d+1];var y=[0,0];y=sub(y,l,s),y=scale$3(y,y,r);var m=distance$6(v,s),x=distance$6(v,l),A=m+x;A!==0&&(m/=A,x/=A);var _=scale$3([0,0],y,-m),b=scale$3([0,0],y,x),S=add$1([0,0],v,_),C=add$1([0,0],v,b);c&&(S=max$1([0,0],S,u),S=min$1([0,0],S,f),C=max$1([0,0],C,u),C=min$1([0,0],C,f)),o.push(S),o.push(C)}return e&&o.push(o.shift()),o};function catmullRom2bezier(n,r,e){for(var a=!!r,o=[],s=0,l=n.length;s<l;s+=2)o.push([n[s],n[s+1]]);for(var c=smoothBezier(o,.4,a,e),u=o.length,f=[],d,g,v,s=0;s<u-1;s++)d=c[s*2],g=c[s*2+1],v=o[s+1],f.push(["C",d[0],d[1],g[0],g[1],v[0],v[1]]);return a&&(d=c[u],g=c[u+1],v=o[0],f.push(["C",d[0],d[1],g[0],g[1],v[0],v[1]])),f}function getSplinePath(n,r,e){var a=[],o=n[0],s=null;if(n.length<=2)return points2Path(n,r);for(var l=0,c=n.length;l<c;l++){var u=n[l];(!s||!(s.x===u.x&&s.y===u.y))&&(a.push(u.x),a.push(u.y),s=u)}var f=e||[[0,0],[1,1]],d=catmullRom2bezier(a,r,f);return d.unshift(["M",o.x,o.y]),d}function adapteStyle(n){var r={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},e=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];get(n,"fill")&&(r.color=n.fill);var a=pick(n,e),o=a.shadowColor,s=a.shadowBlur,l=s===void 0?0:s,c=a.shadowOffsetX,u=c===void 0?0:c,f=a.shadowOffsetY,d=f===void 0?0:f;r["text-shadow"]="".concat([o,"".concat(u,"px"),"".concat(d,"px"),"".concat(l,"px")].join(" "));var g=pick(n,e),v=g.stroke,p=g.lineWidth,y=p===void 0?0:p;return r["-webkit-text-stroke"]="".concat(["".concat(y,"px"),v].join(" ")),each$1(n,function(m,x){["fontSize"].includes(x)&&isNumber$2(m)?r[kebabCase(x)]="".concat(m,"px"):x&&!e.includes(x)&&(r[kebabCase(x)]="".concat(m))}),r}function setStatisticContainerStyle(n,r){n.style["pointer-events"]="none",each$1(r,function(e,a){a&&e&&(n.style[a]=e)})}var renderStatistic=function(n,r,e){var a=r.statistic,o=r.plotType,s=a.title,l=a.content;[s,l].forEach(function(c,u){if(c){var f="";u===0?f=l?"translate(-50%, -100%)":"translate(-50%, -50%)":f=s?"translate(-50%, 0)":"translate(-50%, -50%)";var d=isFunction$1(c.style)?c.style(e):c.style;n.annotation().html(__assign$8({position:["50%","50%"],html:function(g,v){var p=v.getCoordinate(),y=0;if(o==="pie"||o==="ring-progress")y=p.getRadius()*p.innerRadius*2;else if(o==="liquid"){var m=get(v.geometries,[0,"elements",0,"shape"]);if(m){var x=m.find(function(S){return S.get("name")==="wrap"}),A=x.getCanvasBBox().width;y=A}}else y||(y=p.getWidth());setStatisticContainerStyle(g,__assign$8({width:"".concat(y,"px"),transform:f},adapteStyle(d)));var _=v.getData();if(c.customHtml)return c.customHtml(g,v,e,_);var b=c.content;return c.formatter&&(b=c.formatter(e,_)),b?isString$1(b)?b:"".concat(b):"<div></div>"},key:"".concat(u===0?"top":"bottom","-statistic")},pick(c,["offsetX","offsetY","rotate","style","formatter"])))}})},renderGaugeStatistic=function(n,r,e){var a=r.statistic,o=a.title,s=a.content;[o,s].forEach(function(l){if(l){var c=isFunction$1(l.style)?l.style(e):l.style;n.annotation().html(__assign$8({position:["50%","100%"],html:function(u,f){var d=f.getCoordinate(),g=f.views[0].getCoordinate(),v=g.getCenter(),p=g.getRadius(),y=Math.max(Math.sin(g.startAngle),Math.sin(g.endAngle))*p,m=v.y+y-d.y.start-parseFloat(get(c,"fontSize",0)),x=d.getRadius()*d.innerRadius*2;setStatisticContainerStyle(u,__assign$8({width:"".concat(x,"px"),transform:"translate(-50%, ".concat(m,"px)")},adapteStyle(c)));var A=f.getData();if(l.customHtml)return l.customHtml(u,f,e,A);var _=l.content;return l.formatter&&(_=l.formatter(e,A)),_?isString$1(_)?_:"".concat(_):"<div></div>"}},pick(l,["offsetX","offsetY","rotate","style","formatter"])))}})};function template(n,r){return r?reduce(r,function(e,a,o){return e.replace(new RegExp("{\\s*".concat(o,"\\s*}"),"g"),a)},n):n}function findViewById(n,r){return n.views.find(function(e){return e.id===r})}function getViews(n){var r=n.parent;return r?r.views:[]}function getSiblingViews(n){return getViews(n).filter(function(r){return r!==n})}function addViewAnimation(n,r,e){e===void 0&&(e=n.geometries),typeof r=="boolean"?n.animate(r):n.animate(!0),each$1(e,function(a){var o;isFunction$1(r)?o=r(a.type||a.shapeType,a)||!0:o=r,a.animate(o)})}function getPixelRatio(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function initCanvas(n,r){r===void 0&&(r=n);var e=document.createElement("canvas"),a=getPixelRatio();e.width=n*a,e.height=r*a,e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px");var o=e.getContext("2d");return o.scale(a,a),e}function drawBackground(n,r,e,a){a===void 0&&(a=e);var o=r.backgroundColor,s=r.opacity;n.globalAlpha=s,n.fillStyle=o,n.beginPath(),n.fillRect(0,0,e,a),n.closePath()}function getUnitPatternSize(n,r,e){var a=n+r;return e?a*2:a}function getSymbolsPosition(n,r){var e=r?[[n*.25,n*.25],[n*.75,n*.75]]:[[n*.5,n*.5]];return e}function transformMatrix(n,r){var e=r*Math.PI/180,a={a:Math.cos(e)*(1/n),b:Math.sin(e)*(1/n),c:-Math.sin(e)*(1/n),d:Math.cos(e)*(1/n),e:0,f:0};return a}var defaultDotPatternCfg={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function drawDot(n,r,e,a){var o=r.size,s=r.fill,l=r.lineWidth,c=r.stroke,u=r.fillOpacity;n.beginPath(),n.globalAlpha=u,n.fillStyle=s,n.strokeStyle=c,n.lineWidth=l,n.arc(e,a,o/2,0,2*Math.PI,!1),n.fill(),l&&n.stroke(),n.closePath()}function createDotPattern(n){var r=deepAssign({},defaultDotPatternCfg,n),e=r.size,a=r.padding,o=r.isStagger,s=r.rotation,l=getUnitPatternSize(e,a,o),c=getSymbolsPosition(l,o),u=initCanvas(l,l),f=u.getContext("2d");drawBackground(f,r,l);for(var d=0,g=c;d<g.length;d++){var v=g[d],p=v[0],y=v[1];drawDot(f,r,p,y)}var m=f.createPattern(u,"repeat");if(m){var x=getPixelRatio(),A=transformMatrix(x,s);m.setTransform(A)}return m}var defaultLinePatternCfg={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function drawLine(n,r,e){var a=r.stroke,o=r.lineWidth,s=r.strokeOpacity,l=new Path2D(e);n.globalAlpha=s,n.lineCap="square",n.strokeStyle=o?a:"transparent",n.lineWidth=o,n.stroke(l)}function createLinePattern(n){var r=deepAssign({},defaultLinePatternCfg,n),e=r.spacing,a=r.rotation,o=r.lineWidth,s=e+o||1,l=e+o||1,c=`
            M 0 0 L `.concat(s,` 0
            M 0 `).concat(l," L ").concat(s," ").concat(l,`
            `),u=initCanvas(s,l),f=u.getContext("2d");drawBackground(f,r,s,l),drawLine(f,r,c);var d=f.createPattern(u,"repeat");if(d){var g=getPixelRatio(),v=transformMatrix(g,a);d.setTransform(v)}return d}var defaultSquarePatternCfg={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function drawSquare(n,r,e,a){var o=r.stroke,s=r.size,l=r.fill,c=r.lineWidth,u=r.fillOpacity;n.globalAlpha=u,n.strokeStyle=o,n.lineWidth=c,n.fillStyle=l,n.strokeRect(e-s/2,a-s/2,s,s),n.fillRect(e-s/2,a-s/2,s,s)}function createSquarePattern(n){var r=deepAssign({},defaultSquarePatternCfg,n),e=r.size,a=r.padding,o=r.isStagger,s=r.rotation,l=getUnitPatternSize(e,a,o),c=getSymbolsPosition(l,o),u=initCanvas(l,l),f=u.getContext("2d");drawBackground(f,r,l);for(var d=0,g=c;d<g.length;d++){var v=g[d],p=v[0],y=v[1];drawSquare(f,r,p,y)}var m=f.createPattern(u,"repeat");if(m){var x=getPixelRatio(),A=transformMatrix(x,s);m.setTransform(A)}return m}function getCanvasPattern(n){var r=n.type,e=n.cfg,a;switch(r){case"dot":a=createDotPattern(e);break;case"line":a=createLinePattern(e);break;case"square":a=createSquarePattern(e);break}return a}function pattern(n){var r=this;return function(e){var a,o=e.options,s=e.chart,l=o.pattern;if(!l)return e;var c=function(u){for(var f,d,g,v=[],p=1;p<arguments.length;p++)v[p-1]=arguments[p];var y=s.getTheme().defaultColor,m=y,x=(d=(f=s.geometries)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.getAttribute("color");if(x){var A=x.getFields()[0],_=get(u,A);m=Util.getMappingValue(x,_,((g=x.values)===null||g===void 0?void 0:g[0])||y)}var b=l;typeof l=="function"&&(b=l.call(r,u,m)),b instanceof CanvasPattern||(b=getCanvasPattern(deepAssign({},{cfg:{backgroundColor:m}},b)));var S=o[n];return __assign$8(__assign$8({},typeof S=="function"?S.call.apply(S,__spreadArray$2([r,u],v,!1)):S||{}),{fill:b||m})};return deepAssign({},e,{options:(a={},a[n]=c,a)})}}function legend$g(n){var r=n.chart,e=n.options,a=e.legend,o=e.colorField,s=e.seriesField;return a===!1?r.legend(!1):(o||s)&&r.legend(o||s,a),n}function tooltip$9(n){var r=n.chart,e=n.options,a=e.tooltip;return a!==void 0&&r.tooltip(a),n}function interaction$8(n){var r=n.chart,e=n.options,a=e.interactions;return each$1(a,function(o){o.enable===!1?r.removeInteraction(o.type):r.interaction(o.type,o.cfg||{})}),n}function animation$5(n){var r=n.chart,e=n.options,a=e.animation;return addViewAnimation(r,a),n}function theme$2(n){var r=n.chart,e=n.options,a=e.theme;return a&&r.theme(a),n}function state(n){var r=n.chart,e=n.options,a=e.state;return a&&each$1(r.geometries,function(o){o.state(a)}),n}function slider$2(n){var r=n.chart,e=n.options,a=e.slider;return r.option("slider",a),n}function scrollbar(n){var r=n.chart,e=n.options,a=e.scrollbar;return r.option("scrollbar",a),n}function scale$2(n,r){return function(e){var a=e.chart,o=e.options,s={};return each$1(n,function(l,c){s[c]=pick(l,AXIS_META_CONFIG_KEYS)}),s=deepAssign({},r,o.meta,s),a.scale(s),e}}function annotation$2(n){return function(r){var e=r.chart,a=r.options,o=e.getController("annotation");return each$1(__spreadArray$2(__spreadArray$2([],a.annotations||[],!0),n||[],!0),function(s){o.annotation(s)}),r}}function limitInPlot$2(n){var r=n.chart,e=n.options,a=e.yAxis,o=e.limitInPlot,s=o;return isObject$1(a)&&isNil(o)&&(Object.values(pick(a,["min","max","minLimit","maxLimit"])).some(function(l){return!isNil(l)})?s=!0:s=!1),r.limitInPlot=s,n}function transformations(n){return n===void 0&&(n="rect"),function(r){var e=r.chart,a=r.options,o=a.coordinate,s=Array.from(o||[]).map(function(l){return l.type==="reflectX"?["reflect","x"]:l.type==="reflectY"?["reflect","y"]:l.type==="transpose"?["transpose"]:null}).filter(function(l){return!!l});return s.length!==0&&e.coordinate({type:n,actions:s}),r}}var GLOBAL={locale:"en-US"},LocaleMap={};function registerLocale(n,r){LocaleMap[n]=r}function getLocale(n){return{get:function(r,e){return template(get(LocaleMap[n],r)||get(LocaleMap[GLOBAL.locale],r)||get(LocaleMap["en-US"],r)||r,e)}}}var EN_US_LOCALE={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},ZH_CN_LOCALE={locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}};function getTooltipMapping(n,r){if(n===!1)return{fields:!1};var e=get(n,"fields"),a=get(n,"formatter");return a&&!e&&(e=r),{fields:e,formatter:a}}function getMappingField(n,r){var e=n.type,a=n.xField,o=n.yField,s=n.colorField,l=n.shapeField,c=n.sizeField,u=n.styleField,f=n.rawFields,d=[];if(f=(isFunction$1(f)?f(e,r):f)||[],r==="color")d=__spreadArray$2([s||a],f,!0);else if(r==="shape")d=__spreadArray$2([l||a],f,!0);else if(r==="size")d=__spreadArray$2([c||a],f,!0);else{d=__spreadArray$2([a,o,s,l,c,u],f,!0);var g=["x","y","color","shape","size","style"].indexOf(r),v=d[g];d.splice(g,1),d.unshift(v)}var p=uniq$2(d.filter(function(m){return!!m})),y=e==="line"&&[a,o].includes(p.join("*"))?"":p.join("*");return{mappingFields:p,tileMappingField:y}}function getMappingFunction(n,r){if(r)return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var o={};return n.forEach(function(s,l){o[s]=e[l]}),delete o.undefined,r(o)}}function geometry$x(n){var r=n.chart,e=n.options,a=e.type,o=e.args,s=e.mapping,l=e.xField,c=e.yField,u=e.colorField,f=e.shapeField,d=e.sizeField,g=e.tooltipFields,v=e.label,p=e.state,y=e.customInfo;if(!s)return n;var m=s.color,x=s.shape,A=s.size,_=s.style,b=s.tooltip,S=r[a](o).position("".concat(l,"*").concat(c));if(isString$1(m))u?S.color(u,m):S.color(m);else if(isFunction$1(m)){var C=getMappingField(e,"color"),E=C.mappingFields,T=C.tileMappingField;S.color(T,getMappingFunction(E,m))}else u&&S.color(u,m);if(isString$1(x))f?S.shape(f,[x]):S.shape(x);else if(isFunction$1(x)){var w=getMappingField(e,"shape"),E=w.mappingFields,T=w.tileMappingField;S.shape(T,getMappingFunction(E,x))}else f&&S.shape(f,x);if(isNumber$2(A))d?S.size(d,A):S.size(A);else if(isFunction$1(A)){var L=getMappingField(e,"size"),E=L.mappingFields,T=L.tileMappingField;S.size(T,getMappingFunction(E,A))}else d&&S.size(d,A);if(isFunction$1(_)){var M=getMappingField(e,"style"),E=M.mappingFields,T=M.tileMappingField;S.style(T,getMappingFunction(E,_))}else isObject$1(_)&&S.style(_);if(g===!1?S.tooltip(!1):isEmpty(g)||S.tooltip(g.join("*"),getMappingFunction(g,b)),v===!1)S.label(!1);else if(v){var O=v.callback,P=v.fields,N=__rest$1(v,["callback","fields"]);S.label({fields:P||[c],callback:O,cfg:transformLabel(N)})}return p&&S.state(p),y&&S.customInfo(y),[l,c].filter(function(G){return G!==u}).forEach(function(G){r.legend(G,!1)}),__assign$8(__assign$8({},n),{ext:{geometry:S}})}function area(n){var r=n.options,e=r.area,a=r.xField,o=r.yField,s=r.seriesField,l=r.smooth,c=r.tooltip,u=r.useDeferredLabel,f=getTooltipMapping(c,[a,o,s]),d=f.fields,g=f.formatter;return e?geometry$x(deepAssign({},n,{options:{type:"area",colorField:s,tooltipFields:d,mapping:deepMix({shape:l?"smooth":"area",tooltip:g},e),args:{useDeferredLabel:u}}})):n}function edge(n){var r=n.options,e=r.edge,a=r.xField,o=r.yField,s=r.seriesField,l=r.tooltip,c=r.useDeferredLabel,u=getTooltipMapping(l,[a,o,s]),f=u.fields,d=u.formatter;return e?geometry$x(deepAssign({},n,{options:{type:"edge",colorField:s,tooltipFields:f,mapping:__assign$8({tooltip:d},e),args:{useDeferredLabel:c}}})):n}function otherAdaptor(n){var r=n.chart,e=n.options,a=n.ext,o=e.seriesField,s=e.isGroup,l=e.isStack,c=e.marginRatio,u=e.widthRatio,f=e.groupField,d=e.theme,g=[];if(o&&(s&&g.push({type:"dodge",dodgeBy:f||o,marginRatio:c}),l&&g.push({type:"stack",marginRatio:c})),g.length&&(a!=null&&a.geometry)){var v=a==null?void 0:a.geometry;v.adjust(g)}return isNil(u)||r.theme(deepAssign({},isObject$1(d)?d:getTheme(d),{columnWidthRatio:u})),n}function interval(n){var r=n.options,e=r.xField,a=r.yField,o=r.interval,s=r.seriesField,l=r.tooltip,c=r.minColumnWidth,u=r.maxColumnWidth,f=r.columnBackground,d=r.dodgePadding,g=r.intervalPadding,v=r.useDeferredLabel,p=getTooltipMapping(l,[e,a,s]),y=p.fields,m=p.formatter,x=(o?geometry$x(deepAssign({},n,{options:{type:"interval",colorField:s,tooltipFields:y,mapping:__assign$8({tooltip:m},o),args:{dodgePadding:d,intervalPadding:g,minColumnWidth:c,maxColumnWidth:u,background:f,useDeferredLabel:v}}})):n).ext;return otherAdaptor(__assign$8(__assign$8({},n),{ext:x}))}function line(n){var r=n.options,e=r.line,a=r.stepType,o=r.xField,s=r.yField,l=r.seriesField,c=r.smooth,u=r.connectNulls,f=r.tooltip,d=r.useDeferredLabel,g=getTooltipMapping(f,[o,s,l]),v=g.fields,p=g.formatter;return e?geometry$x(deepAssign({},n,{options:{type:"line",colorField:l,tooltipFields:v,mapping:deepMix({shape:a||(c?"smooth":"line"),tooltip:p},e),args:{connectNulls:u,useDeferredLabel:d}}})):n}function point(n){var r=n.options,e=r.point,a=r.xField,o=r.yField,s=r.seriesField,l=r.sizeField,c=r.shapeField,u=r.tooltip,f=r.useDeferredLabel,d=getTooltipMapping(u,[a,o,s,l,c]),g=d.fields,v=d.formatter;return e?geometry$x(deepAssign({},n,{options:{type:"point",colorField:s,shapeField:c,tooltipFields:g,mapping:__assign$8({tooltip:v},e),args:{useDeferredLabel:f}}})):n}function polygon(n){var r=n.options,e=r.polygon,a=r.xField,o=r.yField,s=r.seriesField,l=r.tooltip,c=r.useDeferredLabel,u=getTooltipMapping(l,[a,o,s]),f=u.fields,d=u.formatter;return e?geometry$x(deepAssign({},n,{options:{type:"polygon",colorField:s,tooltipFields:f,mapping:__assign$8({tooltip:d},e),args:{useDeferredLabel:c}}})):n}function schema(n){var r=n.options,e=r.schema,a=r.xField,o=r.yField,s=r.seriesField,l=r.tooltip,c=r.useDeferredLabel,u=getTooltipMapping(l,[a,o,s]),f=u.fields,d=u.formatter;return e?geometry$x(deepAssign({},n,{options:{type:"schema",colorField:s,tooltipFields:f,mapping:__assign$8({tooltip:d},e),args:{useDeferredLabel:c}}})):n}function violin(n){var r=n.options,e=r.violin,a=r.xField,o=r.yField,s=r.seriesField,l=r.sizeField,c=r.tooltip,u=getTooltipMapping(c,[a,o,s,l]),f=u.fields,d=u.formatter;return e?geometry$x(deepAssign({},n,{options:{type:"violin",colorField:s,tooltipFields:f,mapping:__assign$8({tooltip:d},e)}})):n}var lib={},sensorPool={},id={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=1,e=function(){return"".concat(r++)};n.default=e})(id);var sensors={},object={},debounce={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,s=null;return function(){for(var l=this,c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];clearTimeout(s),s=setTimeout(function(){a.apply(l,u)},o)}};n.default=r})(debounce);var constant$2={};Object.defineProperty(constant$2,"__esModule",{value:!0});constant$2.SizeSensorId=constant$2.SensorTabIndex=constant$2.SensorClassName=void 0;var SizeSensorId="size-sensor-id";constant$2.SizeSensorId=SizeSensorId;var SensorClassName="size-sensor-object";constant$2.SensorClassName=SensorClassName;var SensorTabIndex="-1";constant$2.SensorTabIndex=SensorTabIndex;Object.defineProperty(object,"__esModule",{value:!0});object.createSensor=void 0;var _debounce$1=_interopRequireDefault$2(debounce),_constant$2=constant$2;function _interopRequireDefault$2(n){return n&&n.__esModule?n:{default:n}}var createSensor$2=function n(r,e){var a=void 0,o=[],s=function(){getComputedStyle(r).position==="static"&&(r.style.position="relative");var g=document.createElement("object");return g.onload=function(){g.contentDocument.defaultView.addEventListener("resize",l),l()},g.style.display="block",g.style.position="absolute",g.style.top="0",g.style.left="0",g.style.height="100%",g.style.width="100%",g.style.overflow="hidden",g.style.pointerEvents="none",g.style.zIndex="-1",g.style.opacity="0",g.setAttribute("class",_constant$2.SensorClassName),g.setAttribute("tabindex",_constant$2.SensorTabIndex),g.type="text/html",r.appendChild(g),g.data="about:blank",g},l=(0,_debounce$1.default)(function(){o.forEach(function(d){d(r)})}),c=function(g){a||(a=s()),o.indexOf(g)===-1&&o.push(g)},u=function(){a&&a.parentNode&&(a.contentDocument&&a.contentDocument.defaultView.removeEventListener("resize",l),a.parentNode.removeChild(a),r.removeAttribute(_constant$2.SizeSensorId),a=void 0,o=[],e&&e())},f=function(g){var v=o.indexOf(g);v!==-1&&o.splice(v,1),o.length===0&&a&&u()};return{element:r,bind:c,destroy:u,unbind:f}};object.createSensor=createSensor$2;var resizeObserver={};Object.defineProperty(resizeObserver,"__esModule",{value:!0});resizeObserver.createSensor=void 0;var _constant$1=constant$2,_debounce=_interopRequireDefault$1(debounce);function _interopRequireDefault$1(n){return n&&n.__esModule?n:{default:n}}var createSensor$1=function n(r,e){var a=void 0,o=[],s=(0,_debounce.default)(function(){o.forEach(function(d){d(r)})}),l=function(){var g=new ResizeObserver(s);return g.observe(r),s(),g},c=function(g){a||(a=l()),o.indexOf(g)===-1&&o.push(g)},u=function(){a.disconnect(),o=[],a=void 0,r.removeAttribute(_constant$1.SizeSensorId),e&&e()},f=function(g){var v=o.indexOf(g);v!==-1&&o.splice(v,1),o.length===0&&a&&u()};return{element:r,bind:c,destroy:u,unbind:f}};resizeObserver.createSensor=createSensor$1;Object.defineProperty(sensors,"__esModule",{value:!0});sensors.createSensor=void 0;var _object=object,_resizeObserver=resizeObserver,createSensor=typeof ResizeObserver<"u"?_resizeObserver.createSensor:_object.createSensor;sensors.createSensor=createSensor;Object.defineProperty(sensorPool,"__esModule",{value:!0});sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var _id=_interopRequireDefault(id),_sensors=sensors,_constant=constant$2;function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}var Sensors={};sensorPool.Sensors=Sensors;function clean(n){n&&Sensors[n]&&delete Sensors[n]}var getSensor=function n(r){var e=r.getAttribute(_constant.SizeSensorId);if(e&&Sensors[e])return Sensors[e];var a=(0,_id.default)();r.setAttribute(_constant.SizeSensorId,a);var o=(0,_sensors.createSensor)(r,function(){return clean(a)});return Sensors[a]=o,o};sensorPool.getSensor=getSensor;var removeSensor=function n(r){var e=r.element.getAttribute(_constant.SizeSensorId);r.destroy(),clean(e)};sensorPool.removeSensor=removeSensor;Object.defineProperty(lib,"__esModule",{value:!0});lib.ver=lib.clear=bind_1=lib.bind=void 0;var _sensorPool=sensorPool,bind=function n(r,e){var a=(0,_sensorPool.getSensor)(r);return a.bind(e),function(){a.unbind(e)}},bind_1=lib.bind=bind,clear=function n(r){var e=(0,_sensorPool.getSensor)(r);(0,_sensorPool.removeSensor)(e)};lib.clear=clear;var ver="1.0.2";lib.ver=ver;var SOURCE_ATTRIBUTE_NAME="data-chart-source-type",PLOT_CONTAINER_OPTIONS=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Plot=function(n){__extends$7(r,n);function r(e,a){var o=n.call(this)||this;return o.container=typeof e=="string"?document.getElementById(e):e,o.options=deepAssign({},o.getDefaultOptions(),a),o.createG2(),o.bindEvents(),o}return r.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},r.prototype.createG2=function(){var e=this.options,a=e.width,o=e.height,s=e.defaultInteractions;this.chart=new Chart(__assign$8(__assign$8(__assign$8(__assign$8({container:this.container,autoFit:!1},this.getChartSize(a,o)),{localRefresh:!1}),pick(this.options,PLOT_CONTAINER_OPTIONS)),{defaultInteractions:s})),this.container.setAttribute(SOURCE_ATTRIBUTE_NAME,"G2Plot")},r.prototype.getChartSize=function(e,a){var o=getContainerSize(this.container);return{width:e||o.width||400,height:a||o.height||400}},r.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",function(a){a!=null&&a.type&&e.emit(a.type,a)})},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},r.prototype.update=function(e){this.updateOption(e),this.render()},r.prototype.updateOption=function(e){this.options=deepAssign({},this.options,e)},r.prototype.setState=function(e,a,o){o===void 0&&(o=!0);var s=getAllElementsRecursively(this.chart);each$1(s,function(l){a(l.getData())&&l.setState(e,o)})},r.prototype.getStates=function(){var e=getAllElementsRecursively(this.chart),a=[];return each$1(e,function(o){var s=o.getData(),l=o.getStates();each$1(l,function(c){a.push({data:s,state:c,geometry:o.geometry,element:o})})}),a},r.prototype.changeData=function(e){this.update({data:e})},r.prototype.changeSize=function(e,a){this.chart.changeSize(e,a)},r.prototype.addAnnotations=function(e,a){a=a||this.chart;var o=__spreadArray$2([],e,!0),s=a.getController("annotation"),l=s.getComponents().map(function(f){return f.extra});s.clear(!0);for(var c=function(f){var d=l[f],g=o.findIndex(function(v){return v.id&&v.id===d.id});g!==-1&&(d=deepAssign({},d,o[g]),o.splice(g,1)),s.annotation(d)},u=0;u<l.length;u++)c(u);o.forEach(function(f){return s.annotation(f)}),a.render(!0)},r.prototype.removeAnnotations=function(e){var a=this.chart.getController("annotation"),o=a.getComponents().map(function(c){return c.extra});a.clear(!0);for(var s=function(c){var u=o[c];e.find(function(f){return f.id&&f.id===u.id})||a.annotation(u)},l=0;l<o.length;l++)s(l);this.chart.render(!0)},r.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(SOURCE_ATTRIBUTE_NAME)},r.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),a=this.options,o=a.padding,s=a.appendPadding;this.chart.padding=o,this.chart.appendPadding=s,e({chart:this.chart,options:this.options})},r.prototype.triggerResize=function(){this.chart.forceFit()},r.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var a=this.options.autoFit,o=a===void 0?!0:a;o&&(this.unbind=bind_1(this.container,function(){var s=getContainerSize(e.container),l=s.width,c=s.height;(l!==e.chart.width||c!==e.chart.height)&&e.triggerResize()}))}},r.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},r}(EventEmitter$2);function percent(n,r,e,a){var o=reduce(n,function(s,l){var c=l[e],u=s.has(c)?s.get(c):0,f=l[r];return u=isRealNumber(f)?u+f:u,s.set(c,u),s},new Map);return map$2(n,function(s){var l,c=s[r],u=s[e],f=isRealNumber(c)&&o.get(u)!==0?c/o.get(u):0;return __assign$8(__assign$8({},s),(l={},l[a]=f,l))})}function getDeepPercent(n,r,e,a){var o=reduce(n,function(s,l){var c=reduce(e,function(d,g){return"".concat(d).concat(l[g])},""),u=s.has(c)?s.get(c):0,f=l[r];return u=isRealNumber(f)?u+f:u,s.set(c,u),s},new Map);return map$2(n,function(s){var l,c=s[r],u=reduce(e,function(d,g){return"".concat(d).concat(s[g])},""),f=isRealNumber(c)&&o.get(u)!==0?c/o.get(u):0;return __assign$8(__assign$8({},s),(l={},l[a]=f,l))})}function getDataWhetherPercentage(n,r,e,a,o){return o?percent(n,r,e,a):n}function geometry$w(n){var r=n.chart,e=n.options,a=e.data,o=e.color,s=e.lineStyle,l=e.lineShape,c=e.point,u=e.area,f=e.seriesField,d=c==null?void 0:c.state,g=u==null?void 0:u.state;r.data(a);var v=deepAssign({},n,{options:{shapeField:f,line:{color:o,style:s,shape:l},point:c&&__assign$8({color:o,shape:"circle"},c),area:u&&__assign$8({color:o},u),label:void 0}}),p=deepAssign({},v,{options:{tooltip:!1,state:d}}),y=deepAssign({},v,{options:{tooltip:!1,state:g}});return line(v),point(p),area(y),n}function meta$l(n){var r,e,a=n.options,o=a.xAxis,s=a.yAxis,l=a.xField,c=a.yField,u=a.data;return flow(scale$2((r={},r[l]=o,r[c]=s,r),(e={},e[l]={type:"cat"},e[c]=adjustYMetaByZero(u,c),e)))(n)}function coordinate$9(n){var r=n.chart,e=n.options,a=e.reflect;if(a){var o=a;isArray$4(o)||(o=[o]);var s=o.map(function(l){return["reflect",l]});r.coordinate({type:"rect",actions:s})}return n}function axis$k(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return a===!1?r.axis(s,!1):r.axis(s,a),o===!1?r.axis(l,!1):r.axis(l,o),n}function legend$f(n){var r=n.chart,e=n.options,a=e.legend,o=e.seriesField;return a&&o?r.legend(o,a):a===!1&&r.legend(!1),n}function label$f(n){var r=n.chart,e=n.options,a=e.label,o=e.yField,s=findGeometry(r,"line");if(!a)s.label(!1);else{var l=a.callback,c=__rest$1(a,["callback"]);s.label({fields:[o],callback:l,cfg:__assign$8({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},transformLabel(c))})}return n}function adjust$1(n){var r=n.chart,e=n.options,a=e.isStack;return a&&each$1(r.geometries,function(o){o.adjust("stack")}),n}function adaptor$y(n){return flow(geometry$w,meta$l,adjust$1,theme$2,coordinate$9,axis$k,legend$f,tooltip$9,label$f,slider$2,scrollbar,interaction$8,animation$5,annotation$2(),limitInPlot$2)(n)}function geometry$v(n){var r=n.chart,e=n.options,a=e.data,o=e.areaStyle,s=e.areaShape,l=e.color,c=e.point,u=e.line,f=e.isPercent,d=e.xField,g=e.yField,v=e.tooltip,p=e.seriesField,y=e.startOnZero,m=c==null?void 0:c.state,x=getDataWhetherPercentage(a,g,d,g,f);r.data(x);var A=f?__assign$8({formatter:function(C){return{name:C[p]||C[d],value:(Number(C[g])*100).toFixed(2)+"%"}}},v):v,_=deepAssign({},n,{options:{area:{color:l,style:o,shape:s},point:c&&__assign$8({color:l},c),tooltip:A,label:void 0,args:{startOnZero:y}}}),b={chart:r,options:deepAssign({line:{size:2}},omit$1(e,["state"]),{line:u&&__assign$8({color:l},u),sizeField:p,state:u==null?void 0:u.state,tooltip:!1,label:void 0,args:{startOnZero:y}})},S=deepAssign({},_,{options:{tooltip:!1,state:m}});return area(_),line(b),point(S),n}function label$e(n){var r=n.chart,e=n.options,a=e.label,o=e.yField,s=findGeometry(r,"area");if(!a)s.label(!1);else{var l=a.callback,c=__rest$1(a,["callback"]);s.label({fields:[o],callback:l,cfg:__assign$8({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},transformLabel(c))})}return n}function adjust(n){var r=n.chart,e=n.options,a=e.isStack,o=e.isPercent,s=e.seriesField;return(o||a)&&s&&each$1(r.geometries,function(l){l.adjust("stack")}),n}function adaptor$x(n){return flow(theme$2,pattern("areaStyle"),transformations("rect"),geometry$v,meta$l,adjust,axis$k,legend$f,tooltip$9,label$e,slider$2,annotation$2(),interaction$8,animation$5,limitInPlot$2)(n)}var DEFAULT_OPTIONS$z=deepAssign({},Plot.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),Area=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="area",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$z},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this.options,o=a.isPercent,s=a.xField,l=a.yField,c=this,u=c.chart,f=c.options;meta$l({chart:u,options:f}),this.chart.changeData(getDataWhetherPercentage(e,l,s,l,o))},r.prototype.getSchemaAdaptor=function(){return adaptor$x},r}(Plot),PADDING_RIGHT=10,PADDING_TOP$1=5,BUTTON_ACTION_CONFIG={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},ButtonAction=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=__assign$8({name:"button"},BUTTON_ACTION_CONFIG),e}return r.prototype.getButtonCfg=function(){var e=this.context.view,a=get(e,["interactions","filter-action","cfg","buttonConfig"]);return deepAssign(this.buttonCfg,a,this.cfg)},r.prototype.drawButton=function(){var e=this.getButtonCfg(),a=this.context.view.foregroundGroup.addGroup({name:e.name}),o=this.drawText(a);this.drawBackground(a,o.getBBox()),this.buttonGroup=a},r.prototype.drawText=function(e){var a,o=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:__assign$8({text:o.text},(a=o.textStyle)===null||a===void 0?void 0:a.default)})},r.prototype.drawBackground=function(e,a){var o,s=this.getButtonCfg(),l=normalPadding(s.padding),c=e.addShape({type:"rect",name:"button-rect",attrs:__assign$8({x:a.x-l[3],y:a.y-l[0],width:a.width+l[1]+l[3],height:a.height+l[0]+l[2]},(o=s.buttonStyle)===null||o===void 0?void 0:o.default)});return c.toBack(),e.on("mouseenter",function(){var u;c.attr((u=s.buttonStyle)===null||u===void 0?void 0:u.active)}),e.on("mouseleave",function(){var u;c.attr((u=s.buttonStyle)===null||u===void 0?void 0:u.default)}),c},r.prototype.resetPosition=function(){var e=this.context.view,a=e.getCoordinate(),o=a.convert({x:1,y:1}),s=this.buttonGroup,l=s.getBBox(),c=Util.transform(null,[["t",o.x-l.width-PADDING_RIGHT,o.y+l.height+PADDING_TOP$1]]);s.setMatrix(c)},r.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},r.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},r.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),n.prototype.destroy.call(this)},r}(Action);registerAction("brush-reset-button",ButtonAction,{name:"brush-reset-button"});registerInteraction("filter-action",{});function isPointInView(n){return n.isInPlot()}function getInteractionCfg(n,r,e){var a=e||{},o=a.mask,s=a.isStartEnable,l=r||"rect";switch(n){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:s||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:s||isPointInView,action:["brush:start","".concat(l,"-mask:start"),"".concat(l,"-mask:show")],arg:[null,{maskStyle:o==null?void 0:o.style}]}],processing:[{trigger:"mousemove",isEnable:isPointInView,action:["".concat(l,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:isPointInView,action:["brush:filter","brush:end","".concat(l,"-mask:end"),"".concat(l,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:s||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:s||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(c){return s?!s(c):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:s||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:s||function(c){return!c.isInShape("mask")},action:["".concat(l,"-mask:start"),"".concat(l,"-mask:show")],arg:[{maskStyle:o==null?void 0:o.style}]},{trigger:"mask:dragstart",action:["".concat(l,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(l,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(l,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(l,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(l,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(c){return!c.isInPlot()},action:["element-range-highlight:clear","".concat(l,"-mask:end"),"".concat(l,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(l,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:s||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:s||isPointInView,action:["brush-x:start","".concat(l,"-mask:start"),"".concat(l,"-mask:show")],arg:[null,{maskStyle:o==null?void 0:o.style}]}],processing:[{trigger:"mousemove",isEnable:isPointInView,action:["".concat(l,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:isPointInView,action:["brush-x:filter","brush-x:end","".concat(l,"-mask:end"),"".concat(l,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:s||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:s||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:s||function(c){return!c.isInShape("mask")},action:["".concat(l,"-mask:start"),"".concat(l,"-mask:show")],arg:[{maskStyle:o==null?void 0:o.style}]},{trigger:"mask:dragstart",action:["".concat(l,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(l,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(l,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(l,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(l,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(c){return!c.isInPlot()},action:["element-range-highlight:clear","".concat(l,"-mask:end"),"".concat(l,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(l,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:s||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:s||isPointInView,action:["brush-y:start","".concat(l,"-mask:start"),"".concat(l,"-mask:show")],arg:[null,{maskStyle:o==null?void 0:o.style}]}],processing:[{trigger:"mousemove",isEnable:isPointInView,action:["".concat(l,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:isPointInView,action:["brush-y:filter","brush-y:end","".concat(l,"-mask:end"),"".concat(l,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:s||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:s||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:s||function(c){return!c.isInShape("mask")},action:["".concat(l,"-mask:start"),"".concat(l,"-mask:show")],arg:[{maskStyle:o==null?void 0:o.style}]},{trigger:"mask:dragstart",action:["".concat(l,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(l,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(l,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(l,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(l,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(c){return!c.isInPlot()},action:["element-range-highlight:clear","".concat(l,"-mask:end"),"".concat(l,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(l,"-mask:hide")]}]};default:return{}}}registerInteraction("brush",getInteractionCfg("brush"));registerInteraction("brush-highlight",getInteractionCfg("brush-highlight"));registerInteraction("brush-x",getInteractionCfg("brush-x","x-rect"));registerInteraction("brush-y",getInteractionCfg("brush-y","y-rect"));registerInteraction("brush-x-highlight",getInteractionCfg("brush-x-highlight","x-rect"));registerInteraction("brush-y-highlight",getInteractionCfg("brush-y-highlight","y-rect"));var BRUSH_TYPES=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function brushInteraction(n){var r=n.options,e=r.brush,a=filter(r.interactions||[],function(o){return BRUSH_TYPES.indexOf(o.type)===-1});return e!=null&&e.enabled&&(BRUSH_TYPES.forEach(function(o){var s=!1;switch(e.type){case"x-rect":s=o===(e.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":s=o===(e.action==="highlight"?"brush-y-highlight":"brush-y");break;default:s=o===(e.action==="highlight"?"brush-highlight":"brush");break}var l={type:o,enable:s};e&&(l.cfg=getInteractionCfg(o,e.type,e)),a.push(l)}),(e==null?void 0:e.action)!=="highlight"&&a.push({type:"filter-action",cfg:{buttonConfig:e.button}})),deepAssign({},n,{options:{interactions:a}})}var INTERACTION_MAP={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},getStartStages=function(n,r){return n==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:r}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:r}]}]};registerInteraction(INTERACTION_MAP.hover,{start:getStartStages(INTERACTION_MAP.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});registerInteraction(INTERACTION_MAP.click,{start:getStartStages(INTERACTION_MAP.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function connectedArea(n){return n===void 0&&(n=!1),function(r){var e=r.chart,a=r.options,o=a.connectedArea,s=function(){e.removeInteraction(INTERACTION_MAP.hover),e.removeInteraction(INTERACTION_MAP.click)};if(!n&&o){var l=o.trigger||"hover";s(),e.interaction(INTERACTION_MAP[l],{start:getStartStages(l,o.style)})}else s();return r}}function conversionTagFormatter(n,r){return!isNumber$2(n)||!isNumber$2(r)||n===0&&r===0?"-":n===r?"100%":n===0?"∞":"".concat((100*r/n).toFixed(2),"%")}function getConversionTagOptionsWithDefaults(n,r){return deepAssign({size:r?32:80,spacing:r?8:12,offset:r?32:0,arrow:n.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:n.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:conversionTagFormatter}},n)}function parsePoints(n,r){return map$2(r.getModel().points,function(e){return n.convertPoint(e)})}function renderArrowTag(n,r,e){var a=n.view,o=n.geometry,s=n.group,l=n.options,c=n.horizontal,u=l.offset,f=l.size,d=l.arrow,g=a.getCoordinate(),v=parsePoints(g,r)[3],p=parsePoints(g,e)[0],y=p.y-v.y,m=p.x-v.x;if(typeof d!="boolean"){var x=d.headSize,A=l.spacing,_;c?(m-x)/2<A?(A=Math.max(1,(m-x)/2),_=[[v.x+A,v.y-u],[v.x+A,v.y-u-f],[p.x-A,p.y-u-f/2]]):_=[[v.x+A,v.y-u],[v.x+A,v.y-u-f],[p.x-A-x,p.y-u-f],[p.x-A,p.y-u-f/2],[p.x-A-x,p.y-u]]:(y-x)/2<A?(A=Math.max(1,(y-x)/2),_=[[v.x+u,v.y+A],[v.x+u+f,v.y+A],[p.x+u+f/2,p.y-A]]):_=[[v.x+u,v.y+A],[v.x+u+f,v.y+A],[p.x+u+f,p.y-A-x],[p.x+u+f/2,p.y-A],[p.x+u,p.y-A-x]],s.addShape("polygon",{id:"".concat(a.id,"-conversion-tag-arrow-").concat(o.getElementId(r.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:r,nextElement:e},attrs:__assign$8(__assign$8({},d.style||{}),{points:_})})}}function renderTextTag(n,r,e){var a,o,s,l=n.view,c=n.geometry,u=n.group,f=n.options,d=n.field,g=n.horizontal,v=f.offset,p=f.size;if(typeof f.text!="boolean"){var y=l.getCoordinate(),m=((a=f.text)===null||a===void 0?void 0:a.formatter)&&((o=f.text)===null||o===void 0?void 0:o.formatter(r.getData()[d],e.getData()[d])),x=parsePoints(y,r)[g?3:0],A=parsePoints(y,e)[g?0:3],_=u.addShape("text",{id:"".concat(l.id,"-conversion-tag-text-").concat(c.getElementId(r.getModel().mappingData)),name:"conversion-tag-text",origin:{element:r,nextElement:e},attrs:__assign$8(__assign$8({},((s=f.text)===null||s===void 0?void 0:s.style)||{}),{text:m,x:g?(x.x+A.x)/2:x.x+v+p/2,y:g?x.y-v-p/2:(x.y+A.y)/2})});if(g){var b=A.x-x.x,S=_.getBBox().width;if(S>b){var C=S/m.length,E=Math.max(1,Math.ceil(b/C)-1),T="".concat(m.slice(0,E),"...");_.attr("text",T)}}}}function renderTag(n,r,e){renderArrowTag(n,r,e),renderTextTag(n,r,e)}function conversionTag$3(n,r,e){return r===void 0&&(r=!0),e===void 0&&(e=!1),function(a){var o=a.options,s=a.chart,l=o.conversionTag,c=o.theme;return l&&!e&&(s.theme(deepAssign({},isObject$1(c)?c:getTheme(c),{columnWidthRatio:1/3})),s.annotation().shape({render:function(u,f){var d=u.addGroup({id:"".concat(s.id,"-conversion-tag-group"),name:"conversion-tag-group"}),g=find$2(s.geometries,function(y){return y.type==="interval"}),v={view:f,geometry:g,group:d,field:n,horizontal:r,options:getConversionTagOptionsWithDefaults(l,r)},p=g.elements;each$1(p,function(y,m){m>0&&renderTag(v,p[m-1],y)})}})),a}}function defaultOptions$6(n){var r=n.options,e=r.legend,a=r.seriesField,o=r.isStack;return a?e!==!1&&(e=__assign$8({position:o?"right-top":"top-left"},e)):e=!1,n.options.legend=e,n}function geometry$u(n){var r=n.chart,e=n.options,a=e.data,o=e.columnStyle,s=e.color,l=e.columnWidthRatio,c=e.isPercent,u=e.isGroup,f=e.isStack,d=e.xField,g=e.yField,v=e.seriesField,p=e.groupField,y=e.tooltip,m=e.shape,x=c&&u&&f?getDeepPercent(a,g,[d,p],g):getDataWhetherPercentage(a,g,d,g,c),A=[];f&&v&&!u?x.forEach(function(S){var C=A.find(function(E){return E[d]===S[d]&&E[v]===S[v]});C?C[g]+=S[g]||0:A.push(__assign$8({},S))}):A=x,r.data(A);var _=c?__assign$8({formatter:function(S){var C;return{name:u&&f?"".concat(S[v]," - ").concat(S[p]):(C=S[v])!==null&&C!==void 0?C:S[d],value:(Number(S[g])*100).toFixed(2)+"%"}}},y):y,b=deepAssign({},n,{options:{data:A,widthRatio:l,tooltip:_,interval:{shape:m,style:o,color:s}}});return interval(b),b}function meta$k(n){var r,e,a=n.options,o=a.xAxis,s=a.yAxis,l=a.xField,c=a.yField,u=a.data,f=a.isPercent,d=f?{max:1,min:0,minLimit:0,maxLimit:1}:{};return flow(scale$2((r={},r[l]=o,r[c]=s,r),(e={},e[l]={type:"cat"},e[c]=__assign$8(__assign$8({},adjustYMetaByZero(u,c)),d),e)))(n)}function axis$j(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return a===!1?r.axis(s,!1):r.axis(s,a),o===!1?r.axis(l,!1):r.axis(l,o),n}function legend$e(n){var r=n.chart,e=n.options,a=e.legend,o=e.seriesField;return a&&o?r.legend(o,a):a===!1&&r.legend(!1),n}function label$d(n){var r=n.chart,e=n.options,a=e.label,o=e.yField,s=e.isRange,l=findGeometry(r,"interval");if(!a)l.label(!1);else{var c=a.callback,u=__rest$1(a,["callback"]);l.label({fields:[o],callback:c,cfg:__assign$8({layout:u!=null&&u.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},transformLabel(s?__assign$8({content:function(f){var d;return(d=f[o])===null||d===void 0?void 0:d.join("-")}},u):u))})}return n}function columnTooltip(n){var r=n.chart,e=n.options,a=e.tooltip,o=e.isGroup,s=e.isStack,l=e.groupField,c=e.data,u=e.xField,f=e.yField,d=e.seriesField;if(a===!1)r.tooltip(!1);else{var g=a;if(o&&s){var v=g.customItems,p=(g==null?void 0:g.formatter)||function(y){return{name:"".concat(y[d]," - ").concat(y[l]),value:y[f]}};g=__assign$8(__assign$8({},g),{customItems:function(y){var m=[];return each$1(y,function(x){var A=filter(c,function(_){return isMatch(_,pick(x.data,[u,d]))});A.forEach(function(_){m.push(__assign$8(__assign$8(__assign$8({},x),{value:_[f],data:_,mappingData:{_origin:_}}),p(_)))})}),v?v(m):m}})}r.tooltip(g)}return n}function adaptor$w(n,r){r===void 0&&(r=!1);var e=n.options,a=e.seriesField;return flow(defaultOptions$6,theme$2,pattern("columnStyle"),state,transformations("rect"),geometry$u,meta$k,axis$j,legend$e,columnTooltip,slider$2,scrollbar,label$d,brushInteraction,interaction$8,animation$5,annotation$2(),conversionTag$3(e.yField,!r,!!a),connectedArea(!e.isStack),limitInPlot$2)(n)}function defaultOptions$5(n){var r=n.options,e=r.xField,a=r.yField,o=r.xAxis,s=r.yAxis,l={left:"bottom",right:"top",top:"left",bottom:"right"},c=s!==!1?__assign$8({position:l[(s==null?void 0:s.position)||"left"]},s):!1,u=o!==!1?__assign$8({position:l[(o==null?void 0:o.position)||"bottom"]},o):!1;return __assign$8(__assign$8({},n),{options:__assign$8(__assign$8({},r),{xField:a,yField:e,xAxis:c,yAxis:u})})}function label$c(n){var r=n.options,e=r.label;return e&&!e.position&&(e.position="left",e.layout||(e.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),deepAssign({},n,{options:{label:e}})}function legend$d(n){var r=n.options,e=r.seriesField,a=r.isStack,o=r.legend;return e?o!==!1&&(o=__assign$8({position:a?"top-left":"right-top"},o||{})):o=!1,deepAssign({},n,{options:{legend:o}})}function coordinate$8(n){var r=n.options,e=[{type:"transpose"},{type:"reflectY"}].concat(r.coordinate||[]);return deepAssign({},n,{options:{coordinate:e}})}function geometry$t(n){var r=n.chart,e=n.options,a=e.barStyle,o=e.barWidthRatio,s=e.minBarWidth,l=e.maxBarWidth,c=e.barBackground;return adaptor$w({chart:r,options:__assign$8(__assign$8({},e),{columnStyle:a,columnWidthRatio:o,minColumnWidth:s,maxColumnWidth:l,columnBackground:c})},!0)}function adaptor$v(n){return flow(defaultOptions$5,label$c,legend$d,tooltip$9,coordinate$8,geometry$t)(n)}var DEFAULT_OPTIONS$y=deepAssign({},Plot.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Bar=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="bar",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$y},r.prototype.changeData=function(e){var a,o;this.updateOption({data:e});var s=this,l=s.chart,c=s.options,u=c.isPercent,f=c.xField,d=c.yField,g=c.xAxis,v=c.yAxis;a=[d,f],f=a[0],d=a[1],o=[v,g],g=o[0],v=o[1];var p=__assign$8(__assign$8({},c),{xField:f,yField:d,yAxis:v,xAxis:g});meta$k({chart:l,options:p}),l.changeData(getDataWhetherPercentage(e,f,d,f,u))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$v},r}(Plot),DEFAULT_OPTIONS$x=deepAssign({},Plot.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Column=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="column",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$x},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this.options,o=a.yField,s=a.xField,l=a.isPercent,c=this,u=c.chart,f=c.options;meta$k({chart:u,options:f}),this.chart.changeData(getDataWhetherPercentage(e,o,s,o,l))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$w},r}(Plot),_a$2,FUNNEL_PERCENT="$$percentage$$",FUNNEL_MAPPING_VALUE="$$mappingValue$$",FUNNEL_CONVERSATION="$$conversion$$",FUNNEL_TOTAL_PERCENT="$$totalPercentage$$",PLOYGON_X="$$x$$",PLOYGON_Y="$$y$$",DEFAULT_OPTIONS$w={appendPadding:[0,80],minSize:0,maxSize:1,meta:(_a$2={},_a$2[FUNNEL_MAPPING_VALUE]={min:0,max:1,nice:!1},_a$2),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},CONVERSION_TAG_NAME="CONVERSION_TAG_NAME";function transformData$8(n,r,e){var a=[],o=e.yField,s=e.maxSize,l=e.minSize,c=get(maxBy(r,o),[o]),u=isNumber$2(s)?s:1,f=isNumber$2(l)?l:0;return a=map$2(n,function(d,g){var v=(d[o]||0)/c;return d[FUNNEL_PERCENT]=v,d[FUNNEL_MAPPING_VALUE]=(u-f)*v+f,d[FUNNEL_CONVERSATION]=[get(n,[g-1,o]),d[o]],d}),a}function conversionTagComponent(n){return function(r){var e=r.chart,a=r.options,o=a.conversionTag,s=a.filteredData,l=s||e.getOptions().data;if(o){var c=o.formatter;l.forEach(function(u,f){if(!(f<=0||Number.isNaN(u[FUNNEL_MAPPING_VALUE]))){var d=n(u,f,l,{top:!0,name:CONVERSION_TAG_NAME,text:{content:isFunction$1(c)?c(u,l):c,offsetX:o.offsetX,offsetY:o.offsetY,position:"end",autoRotate:!1,style:__assign$8({textAlign:"start",textBaseline:"middle"},o.style)}});e.annotation().line(d)}})}return r}}function field$4(n){var r=n.chart,e=n.options,a=e.data,o=a===void 0?[]:a,s=e.yField,l=e.maxSize,c=e.minSize,u=transformData$8(o,o,{yField:s,maxSize:l,minSize:c});return r.data(u),n}function geometry$s(n){var r=n.chart,e=n.options,a=e.xField,o=e.yField,s=e.color,l=e.tooltip,c=e.label,u=e.shape,f=u===void 0?"funnel":u,d=e.funnelStyle,g=e.state,v=getTooltipMapping(l,[a,o]),p=v.fields,y=v.formatter;geometry$x({chart:r,options:{type:"interval",xField:a,yField:FUNNEL_MAPPING_VALUE,colorField:a,tooltipFields:isArray$4(p)&&p.concat([FUNNEL_PERCENT,FUNNEL_CONVERSATION]),mapping:{shape:f,tooltip:y,color:s,style:d},label:c,state:g}});var m=findGeometry(n.chart,"interval");return m.adjust("symmetric"),n}function transpose$2(n){var r=n.chart,e=n.options,a=e.isTransposed;return r.coordinate({type:"rect",actions:a?[]:[["transpose"],["scale",1,-1]]}),n}function conversionTag$2(n){var r=n.options,e=n.chart,a=r.maxSize,o=get(e,["geometries","0","dataArray"],[]),s=get(e,["options","data","length"]),l=map$2(o,function(u){return get(u,["0","nextPoints","0","x"])*s-.5}),c=function(u,f,d,g){var v=a-(a-u[FUNNEL_MAPPING_VALUE])/2;return __assign$8(__assign$8({},g),{start:[l[f-1]||f-.5,v],end:[l[f-1]||f-.5,v+.05]})};return conversionTagComponent(c)(n),n}function basicFunnel(n){return flow(field$4,geometry$s,transpose$2,conversionTag$2)(n)}function field$3(n){var r,e=n.chart,a=n.options,o=a.data,s=o===void 0?[]:o,l=a.yField;return e.data(s),e.scale((r={},r[l]={sync:!0},r)),n}function geometry$r(n){var r=n.chart,e=n.options,a=e.data,o=e.xField,s=e.yField,l=e.color,c=e.compareField,u=e.isTransposed,f=e.tooltip,d=e.maxSize,g=e.minSize,v=e.label,p=e.funnelStyle,y=e.state,m=e.showFacetTitle;return r.facet("mirror",{fields:[c],transpose:!u,padding:u?0:[32,0,0,0],showTitle:m,eachView:function(x,A){var _=u?A.rowIndex:A.columnIndex;u||x.coordinate({type:"rect",actions:[["transpose"],["scale",_===0?-1:1,-1]]});var b=transformData$8(A.data,a,{yField:s,maxSize:d,minSize:g});x.data(b);var S=getTooltipMapping(f,[o,s,c]),C=S.fields,E=S.formatter,T=u?{offset:_===0?10:-23,position:_===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:_===0?"end":"start"}};geometry$x({chart:x,options:{type:"interval",xField:o,yField:FUNNEL_MAPPING_VALUE,colorField:o,tooltipFields:isArray$4(C)&&C.concat([FUNNEL_PERCENT,FUNNEL_CONVERSATION]),mapping:{shape:"funnel",tooltip:E,color:l,style:p},label:v===!1?!1:deepAssign({},T,v),state:y}})}}),n}function compareConversionTag(n){var r=n.chart,e=n.index,a=n.options,o=a.conversionTag,s=a.isTransposed;(isNumber$2(e)?[r]:r.views).forEach(function(l,c){var u=get(l,["geometries","0","dataArray"],[]),f=get(l,["options","data","length"]),d=map$2(u,function(v){return get(v,["0","nextPoints","0","x"])*f-.5}),g=function(v,p,y,m){var x=(e||c)===0?-1:1;return deepAssign({},m,{start:[d[p-1]||p-.5,v[FUNNEL_MAPPING_VALUE]],end:[d[p-1]||p-.5,v[FUNNEL_MAPPING_VALUE]+.05],text:s?{style:{textAlign:"start"}}:{offsetX:o!==!1?x*o.offsetX:0,style:{textAlign:(e||c)===0?"end":"start"}}})};conversionTagComponent(g)(deepAssign({},{chart:l,options:a}))})}function conversionTag$1(n){var r=n.chart;return r.once("beforepaint",function(){return compareConversionTag(n)}),n}function compareFunnel(n){return flow(field$3,geometry$r,conversionTag$1)(n)}function field$2(n){var r=n.chart,e=n.options,a=e.data,o=a===void 0?[]:a,s=e.yField,l=reduce(o,function(f,d){return f+(d[s]||0)},0),c=maxBy(o,s)[s],u=map$2(o,function(f,d){var g=[],v=[];if(f[FUNNEL_TOTAL_PERCENT]=(f[s]||0)/l,d){var p=o[d-1][PLOYGON_X],y=o[d-1][PLOYGON_Y];g[0]=p[3],v[0]=y[3],g[1]=p[2],v[1]=y[2]}else g[0]=-.5,v[0]=1,g[1]=.5,v[1]=1;return v[2]=v[1]-f[FUNNEL_TOTAL_PERCENT],g[2]=(v[2]+1)/4,v[3]=v[2],g[3]=-g[2],f[PLOYGON_X]=g,f[PLOYGON_Y]=v,f[FUNNEL_PERCENT]=(f[s]||0)/c,f[FUNNEL_CONVERSATION]=[get(o,[d-1,s]),f[s]],f});return r.data(u),n}function geometry$q(n){var r=n.chart,e=n.options,a=e.xField,o=e.yField,s=e.color,l=e.tooltip,c=e.label,u=e.funnelStyle,f=e.state,d=getTooltipMapping(l,[a,o]),g=d.fields,v=d.formatter;return geometry$x({chart:r,options:{type:"polygon",xField:PLOYGON_X,yField:PLOYGON_Y,colorField:a,tooltipFields:isArray$4(g)&&g.concat([FUNNEL_PERCENT,FUNNEL_CONVERSATION]),label:c,state:f,mapping:{tooltip:v,color:s,style:u}}}),n}function transpose$1(n){var r=n.chart,e=n.options,a=e.isTransposed;return r.coordinate({type:"rect",actions:a?[["transpose"],["reflect","x"]]:[]}),n}function conversionTag(n){var r=function(e,a,o,s){return __assign$8(__assign$8({},s),{start:[e[PLOYGON_X][1],e[PLOYGON_Y][1]],end:[e[PLOYGON_X][1]+.05,e[PLOYGON_Y][1]]})};return conversionTagComponent(r)(n),n}function dynamicHeightFunnel(n){return flow(field$2,geometry$q,transpose$1,conversionTag)(n)}function field$1(n){var r,e=n.chart,a=n.options,o=a.data,s=o===void 0?[]:o,l=a.yField;return e.data(s),e.scale((r={},r[l]={sync:!0},r)),n}function geometry$p(n){var r=n.chart,e=n.options,a=e.seriesField,o=e.isTransposed,s=e.showFacetTitle;return r.facet("rect",{fields:[a],padding:[o?0:32,10,0,10],showTitle:s,eachView:function(l,c){basicFunnel(deepAssign({},n,{chart:l,options:{data:c.data}}))}}),n}function facetFunnel(n){return flow(field$1,geometry$p)(n)}var ConversionTagAction=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.rendering=!1,e}return r.prototype.change=function(e){var a=this;if(!this.rendering){var o=e.seriesField,s=e.compareField,l=s?compareConversionTag:conversionTag$2,c=this.context.view,u=o||s?c.views:[c];map$2(u,function(f,d){var g=f.getController("annotation"),v=filter(get(g,["option"],[]),function(y){var m=y.name;return m!==CONVERSION_TAG_NAME});g.clear(!0),each$1(v,function(y){typeof y=="object"&&f.annotation()[y.type](y)});var p=get(f,["filteredData"],f.getOptions().data);l({chart:f,index:d,options:__assign$8(__assign$8({},e),{filteredData:transformData$8(p,p,e)})}),f.filterData(p),a.rendering=!0,f.render(!0)})}this.rendering=!1},r}(Action),FUNNEL_CONVERSION_TAG="funnel-conversion-tag",FUNNEL_LEGEND_FILTER="funnel-afterrender",interactionStart={trigger:"afterrender",action:"".concat(FUNNEL_CONVERSION_TAG,":change")};registerAction(FUNNEL_CONVERSION_TAG,ConversionTagAction);registerInteraction(FUNNEL_LEGEND_FILTER,{start:[interactionStart]});function defaultOptions$4(n){var r=n.options,e=r.compareField,a=r.xField,o=r.yField,s=r.locale,l=r.funnelStyle,c=r.data,u=getLocale(s),f={label:e?{fields:[a,o,e,FUNNEL_PERCENT,FUNNEL_CONVERSATION],formatter:function(g){return"".concat(g[o])}}:{fields:[a,o,FUNNEL_PERCENT,FUNNEL_CONVERSATION],offset:0,position:"middle",formatter:function(g){return"".concat(g[a]," ").concat(g[o])}},tooltip:{title:a,formatter:function(g){return{name:g[a],value:g[o]}}},conversionTag:{formatter:function(g){return"".concat(u.get(["conversionTag","label"]),": ").concat(conversionTagFormatter.apply(void 0,g[FUNNEL_CONVERSATION]))}}},d;return(e||l)&&(d=function(g){return deepAssign({},e&&{lineWidth:1,stroke:"#fff"},isFunction$1(l)?l(g):l)}),deepAssign({options:f},n,{options:{funnelStyle:d,data:clone(c)}})}function geometry$o(n){var r=n.options,e=r.compareField,a=r.dynamicHeight,o=r.seriesField;return o?facetFunnel(n):e?compareFunnel(n):a?dynamicHeightFunnel(n):basicFunnel(n)}function meta$j(n){var r,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return flow(scale$2((r={},r[s]=a,r[l]=o,r)))(n)}function axis$i(n){var r=n.chart;return r.axis(!1),n}function legend$c(n){var r=n.chart,e=n.options,a=e.legend;return a===!1?r.legend(!1):r.legend(a),n}function interaction$7(n){var r=n.chart,e=n.options,a=e.interactions,o=e.dynamicHeight;return each$1(a,function(s){s.enable===!1?r.removeInteraction(s.type):r.interaction(s.type,s.cfg||{})}),o?r.removeInteraction(FUNNEL_LEGEND_FILTER):r.interaction(FUNNEL_LEGEND_FILTER,{start:[__assign$8(__assign$8({},interactionStart),{arg:e})]}),n}function adaptor$u(n){return flow(defaultOptions$4,geometry$o,meta$j,axis$i,tooltip$9,interaction$7,legend$c,animation$5,theme$2,annotation$2())(n)}var Funnel=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="funnel",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$w},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$u},r.prototype.setState=function(e,a,o){o===void 0&&(o=!0);var s=getAllElementsRecursively(this.chart);each$1(s,function(l){a(l.getData())&&l.setState(e,o)})},r.prototype.getStates=function(){var e=getAllElementsRecursively(this.chart),a=[];return each$1(e,function(o){var s=o.getData(),l=o.getStates();each$1(l,function(c){a.push({data:s,state:c,geometry:o.geometry,element:o})})}),a},r.CONVERSATION_FIELD=FUNNEL_CONVERSATION,r.PERCENT_FIELD=FUNNEL_PERCENT,r.TOTAL_PERCENT_FIELD=FUNNEL_TOTAL_PERCENT,r}(Plot),_a$1,RANGE_VALUE="range",RANGE_TYPE="type",PERCENT="percent",DEFAULT_COLOR$1="#f0f0f0",INDICATEOR_VIEW_ID="indicator-view",RANGE_VIEW_ID="range-view",DEFAULT_OPTIONS$v={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(_a$1={},_a$1[RANGE_VALUE]={sync:"v"},_a$1[PERCENT]={sync:"v",tickCount:5,tickInterval:.2},_a$1),animation:!1};function processRangeData(n,r){return n.map(function(e,a){var o;return o={},o[RANGE_VALUE]=e-(n[a-1]||0),o[RANGE_TYPE]="".concat(a),o[PERCENT]=r,o})}function getIndicatorData(n){var r;return[(r={},r[PERCENT]=clamp(n,0,1),r)]}function getRangeData(n,r){var e=get(r,["ticks"],[]),a=size(e)?uniq$2(e):[0,clamp(n,0,1),1];return a[0]||a.shift(),processRangeData(a,n)}function geometry$n(n){var r=n.chart,e=n.options,a=e.percent,o=e.range,s=e.radius,l=e.innerRadius,c=e.startAngle,u=e.endAngle,f=e.axis,d=e.indicator,g=e.gaugeStyle,v=e.type,p=e.meter,y=o.color,m=o.width;if(d){var x=getIndicatorData(a),A=r.createView({id:INDICATEOR_VIEW_ID});A.data(x),A.point().position("".concat(PERCENT,"*1")).shape(d.shape||"gauge-indicator").customInfo({defaultColor:r.getTheme().defaultColor,indicator:d}),A.coordinate("polar",{startAngle:c,endAngle:u,radius:l*s}),A.axis(PERCENT,f),A.scale(PERCENT,pick(f,AXIS_META_CONFIG_KEYS))}var _=getRangeData(a,e.range),b=r.createView({id:RANGE_VIEW_ID});b.data(_);var S=isString$1(y)?[y,DEFAULT_COLOR$1]:y,C=interval({chart:b,options:{xField:"1",yField:RANGE_VALUE,seriesField:RANGE_TYPE,rawFields:[PERCENT],isStack:!0,interval:{color:S,style:g,shape:v==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:m,maxColumnWidth:m}}).ext,E=C.geometry;return E.customInfo({meter:p}),b.coordinate("polar",{innerRadius:l,radius:s,startAngle:c,endAngle:u}).transpose(),n}function meta$i(n){var r;return flow(scale$2((r={range:{min:0,max:1,maxLimit:1,minLimit:0}},r[PERCENT]={},r)))(n)}function statistic$2(n,r){var e=n.chart,a=n.options,o=a.statistic,s=a.percent;if(e.getController("annotation").clear(!0),o){var l=o.content,c=void 0;l&&(c=deepAssign({},{content:"".concat((s*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},l)),renderGaugeStatistic(e,{statistic:__assign$8(__assign$8({},o),{content:c})},{percent:s})}return r&&e.render(!0),n}function tooltip$8(n){var r=n.chart,e=n.options,a=e.tooltip;return a?r.tooltip(deepAssign({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(o,s){var l=get(s,[0,"data",PERCENT],0);return"".concat((l*100).toFixed(2),"%")}},a)):r.tooltip(!1),n}function other(n){var r=n.chart;return r.legend(!1),n}function adaptor$t(n){return flow(theme$2,animation$5,geometry$n,meta$i,tooltip$8,statistic$2,interaction$8,annotation$2(),other)(n)}registerShape("point","gauge-indicator",{draw:function(n,r){var e=n.customInfo,a=e.indicator,o=e.defaultColor,s=a,l=s.pointer,c=s.pin,u=r.addGroup(),f=this.parsePoint({x:0,y:0});return l&&u.addShape("line",{name:"pointer",attrs:__assign$8({x1:f.x,y1:f.y,x2:n.x,y2:n.y,stroke:o},l.style)}),c&&u.addShape("circle",{name:"pin",attrs:__assign$8({x:f.x,y:f.y,stroke:o},c.style)}),u}});registerShape("interval","meter-gauge",{draw:function(n,r){var e=n.customInfo.meter,a=e===void 0?{}:e,o=a.steps,s=o===void 0?50:o,l=a.stepRatio,c=l===void 0?.5:l;s=s<1?1:s,c=clamp(c,0,1);var u=this.coordinate,f=u.startAngle,d=u.endAngle,g=0;if(c>0&&c<1){var v=d-f;g=v/s/(c/(1-c)+1-1/s)}for(var p=g/(1-c)*c,y=r.addGroup(),m=this.coordinate.getCenter(),x=this.coordinate.getRadius(),A=Util.getAngle(n,this.coordinate),_=A.startAngle,b=A.endAngle,S=_;S<b;){var C=void 0,E=(S-f)%(p+g);E<p?C=S+(p-E):(S+=p+g-E,C=S+p);var T=Util.getSectorPath(m.x,m.y,x,S,Math.min(C,b),x*this.coordinate.innerRadius);y.addShape("path",{name:"meter-gauge",attrs:{path:T,fill:n.color,stroke:n.color,lineWidth:.5}}),S=C+g}return y}});var Gauge=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="gauge",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$v},r.prototype.changeData=function(e){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var a=this.chart.views.find(function(s){return s.id===INDICATEOR_VIEW_ID});a&&a.data(getIndicatorData(e));var o=this.chart.views.find(function(s){return s.id===RANGE_VIEW_ID});o&&o.data(getRangeData(e,this.options.range)),statistic$2({chart:this.chart,options:this.options},!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$t},r}(Plot);function getBinKey(n,r,e){if(e===1)return[0,r];var a=Math.floor(n/r);return[r*a,r*(a+1)]}function sturges(n){return Math.ceil(Math.log(n.length)/Math.LN2)+1}function binHistogram(n,r,e,a,o){var s=clone(n);sortBy(s,r);var l=valuesOfKey(s,r),c=getRange(l),u=c.max-c.min,f=e;if(!e&&a&&(f=a>1?u/(a-1):c.max),!e&&!a){var d=sturges(l);f=u/d}var g={},v=groupBy(s,o);isEmpty(v)?each$1(s,function(y){var m=y[r],x=getBinKey(m,f,a),A="".concat(x[0],"-").concat(x[1]);has(g,A)||(g[A]={range:x,count:0}),g[A].count+=1}):Object.keys(v).forEach(function(y){each$1(v[y],function(m){var x=m[r],A=getBinKey(x,f,a),_="".concat(A[0],"-").concat(A[1]),b="".concat(_,"-").concat(y);has(g,b)||(g[b]={range:A,count:0},g[b][o]=y),g[b].count+=1})});var p=[];return each$1(g,function(y){p.push(y)}),p}var HISTOGRAM_X_FIELD="range",HISTOGRAM_Y_FIELD="count",DEFAULT_OPTIONS$u=deepAssign({},Plot.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function geometry$m(n){var r=n.chart,e=n.options,a=e.data,o=e.binField,s=e.binNumber,l=e.binWidth,c=e.color,u=e.stackField,f=e.legend,d=e.columnStyle,g=binHistogram(a,o,l,s,u);r.data(g);var v=deepAssign({},n,{options:{xField:HISTOGRAM_X_FIELD,yField:HISTOGRAM_Y_FIELD,seriesField:u,isStack:!0,interval:{color:c,style:d}}});return interval(v),f&&u?r.legend(u,f):r.legend(!1),n}function meta$h(n){var r,e=n.options,a=e.xAxis,o=e.yAxis;return flow(scale$2((r={},r[HISTOGRAM_X_FIELD]=a,r[HISTOGRAM_Y_FIELD]=o,r)))(n)}function axis$h(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis;return a===!1?r.axis(HISTOGRAM_X_FIELD,!1):r.axis(HISTOGRAM_X_FIELD,a),o===!1?r.axis(HISTOGRAM_Y_FIELD,!1):r.axis(HISTOGRAM_Y_FIELD,o),n}function label$b(n){var r=n.chart,e=n.options,a=e.label,o=findGeometry(r,"interval");if(!a)o.label(!1);else{var s=a.callback,l=__rest$1(a,["callback"]);o.label({fields:[HISTOGRAM_Y_FIELD],callback:s,cfg:transformLabel(l)})}return n}function adaptor$s(n){return flow(theme$2,pattern("columnStyle"),geometry$m,meta$h,axis$h,state,label$b,tooltip$9,interaction$8,animation$5)(n)}var Histogram=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="histogram",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$u},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this.options,o=a.binField,s=a.binNumber,l=a.binWidth,c=a.stackField;this.chart.changeData(binHistogram(e,o,l,s,c))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$s},r}(Plot),DEFAULT_OPTIONS$t=deepAssign({},Plot.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),MarkerActiveAction=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.active=function(){var e=this.getView(),a=this.context.event;if(a.data){var o=a.data.items,s=e.geometries.filter(function(l){return l.type==="point"});each$1(s,function(l){each$1(l.elements,function(c){var u=findIndex$1(o,function(f){return f.data===c.data})!==-1;c.setState("active",u)})})}},r.prototype.reset=function(){var e=this.getView(),a=e.geometries.filter(function(o){return o.type==="point"});each$1(a,function(o){each$1(o.elements,function(s){s.setState("active",!1)})})},r.prototype.getView=function(){return this.context.view},r}(Action);registerAction("marker-active",MarkerActiveAction);registerInteraction("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var Line=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="line",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$t},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this,o=a.chart,s=a.options;meta$l({chart:o,options:s}),this.chart.changeData(e)},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$y},r}(Plot),DEFAULT_OPTIONS$s=deepAssign({},Plot.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),ORIGIN_MATRIX=[1,0,0,0,1,0,0,0,1];function transform$2(n,r){var e=r?__spreadArray$2([],r,!0):__spreadArray$2([],ORIGIN_MATRIX,!0);return Util.transform(e,n)}var PieLegendAction=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getActiveElements=function(){var e=Util.getDelegationObject(this.context);if(e){var a=this.context.view,o=e.component,s=e.item,l=o.get("field");if(l){var c=a.geometries[0].elements;return c.filter(function(u){return u.getModel().data[l]===s.value})}}return[]},r.prototype.getActiveElementLabels=function(){var e=this.context.view,a=this.getActiveElements(),o=e.geometries[0].labelsContainer.getChildren();return o.filter(function(s){return a.find(function(l){return isEqual$1(l.getData(),s.get("data"))})})},r.prototype.transfrom=function(e){e===void 0&&(e=7.5);var a=this.getActiveElements(),o=this.getActiveElementLabels();a.forEach(function(s,l){var c=o[l],u=s.geometry.coordinate;if(u.isPolar&&u.isTransposed){var f=Util.getAngle(s.getModel(),u),d=f.startAngle,g=f.endAngle,v=(d+g)/2,p=e,y=p*Math.cos(v),m=p*Math.sin(v);s.shape.setMatrix(transform$2([["t",y,m]])),c.setMatrix(transform$2([["t",y,m]]))}})},r.prototype.active=function(){this.transfrom()},r.prototype.reset=function(){this.transfrom(0)},r}(Action);function getCurrentElement(n){var r=n.event,e,a=r.target;return a&&(e=a.get("element")),e}var StatisticAction=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getAnnotations=function(e){var a=e||this.context.view;return a.getController("annotation").option},r.prototype.getInitialAnnotation=function(){return this.initialAnnotation},r.prototype.init=function(){var e=this,a=this.context.view;a.removeInteraction("tooltip"),a.on("afterchangesize",function(){var o=e.getAnnotations(a);e.initialAnnotation=o})},r.prototype.change=function(e){var a=this.context,o=a.view,s=a.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var l=get(s,["data","data"]);if(s.type.match("legend-item")){var c=Util.getDelegationObject(this.context),u=o.getGroupedFields()[0];if(c&&u){var f=c.item;l=o.getData().find(function(p){return p[u]===f.value})}}if(l){var d=get(e,"annotations",[]),g=get(e,"statistic",{});o.getController("annotation").clear(!0),each$1(d,function(p){typeof p=="object"&&o.annotation()[p.type](p)}),renderStatistic(o,{statistic:g,plotType:"pie"},l),o.render(!0)}var v=getCurrentElement(this.context);v&&v.shape.toFront()},r.prototype.reset=function(){var e=this.context.view,a=e.getController("annotation");a.clear(!0);var o=this.getInitialAnnotation();each$1(o,function(s){e.annotation()[s.type](s)}),e.render(!0)},r}(Action),PIE_STATISTIC="pie-statistic";registerAction(PIE_STATISTIC,StatisticAction);registerInteraction("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});registerAction("pie-legend",PieLegendAction);registerInteraction("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function getTotalValue(n,r){var e=null;return each$1(n,function(a){typeof a[r]=="number"&&(e+=a[r])}),e}function adaptOffset(n,r){var e;switch(n){case"inner":return e="-30%",isString$1(r)&&r.endsWith("%")?parseFloat(r)*.01>0?e:r:r<0?r:e;case"outer":return e=12,isString$1(r)&&r.endsWith("%")?parseFloat(r)*.01<0?e:r:r>0?r:e;default:return r}}function isAllZero(n,r){return every(processIllegalData(n,r),function(e){return e[r]===0})}function geometry$l(n){var r=n.chart,e=n.options,a=e.data,o=e.angleField,s=e.colorField,l=e.color,c=e.pieStyle,u=e.shape,f=processIllegalData(a,o);if(isAllZero(f,o)){var d="$$percentage$$";f=f.map(function(v){var p;return __assign$8(__assign$8({},v),(p={},p[d]=1/f.length,p))}),r.data(f);var g=deepAssign({},n,{options:{xField:"1",yField:d,seriesField:s,isStack:!0,interval:{color:l,shape:u,style:c},args:{zIndexReversed:!0,sortZIndex:!0}}});interval(g)}else{r.data(f);var g=deepAssign({},n,{options:{xField:"1",yField:o,seriesField:s,isStack:!0,interval:{color:l,shape:u,style:c},args:{zIndexReversed:!0,sortZIndex:!0}}});interval(g)}return n}function meta$g(n){var r,e=n.chart,a=n.options,o=a.meta,s=a.colorField,l=deepAssign({},o);return e.scale(l,(r={},r[s]={type:"cat"},r)),n}function coordinate$7(n){var r=n.chart,e=n.options,a=e.radius,o=e.innerRadius,s=e.startAngle,l=e.endAngle;return r.coordinate({type:"theta",cfg:{radius:a,innerRadius:o,startAngle:s,endAngle:l}}),n}function label$a(n){var r=n.chart,e=n.options,a=e.label,o=e.colorField,s=e.angleField,l=r.geometries[0];if(!a)l.label(!1);else{var c=a.callback,u=__rest$1(a,["callback"]),f=transformLabel(u);if(f.content){var d=f.content;f.content=function(y,m,x){var A=y[o],_=y[s],b=r.getScaleByField(s),S=b==null?void 0:b.scale(_);return isFunction$1(d)?d(__assign$8(__assign$8({},y),{percent:S}),m,x):isString$1(d)?template(d,{value:_,name:A,percentage:isNumber$2(S)&&!isNil(_)?"".concat((S*100).toFixed(2),"%"):null}):d}}var g={inner:"",outer:"pie-outer",spider:"pie-spider"},v=f.type?g[f.type]:"pie-outer",p=f.layout?isArray$4(f.layout)?f.layout:[f.layout]:[];f.layout=(v?[{type:v}]:[]).concat(p),l.label({fields:o?[s,o]:[s],callback:c,cfg:__assign$8(__assign$8({},f),{offset:adaptOffset(f.type,f.offset),type:"pie"})})}return n}function transformStatisticOptions(n){var r=n.innerRadius,e=n.statistic,a=n.angleField,o=n.colorField,s=n.meta,l=n.locale,c=getLocale(l);if(r&&e){var u=deepAssign({},DEFAULT_OPTIONS$s.statistic,e),f=u.title,d=u.content;return f!==!1&&(f=deepAssign({},{formatter:function(g){var v=g?g[o]:isNil(f.content)?c.get(["statistic","total"]):f.content,p=get(s,[o,"formatter"])||function(y){return y};return p(v)}},f)),d!==!1&&(d=deepAssign({},{formatter:function(g,v){var p=g?g[a]:getTotalValue(v,a),y=get(s,[a,"formatter"])||function(m){return m};return g||isNil(d.content)?y(p):d.content}},d)),deepAssign({},{statistic:{title:f,content:d}},n)}return n}function pieAnnotation(n){var r=n.chart,e=n.options,a=transformStatisticOptions(e),o=a.innerRadius,s=a.statistic;return r.getController("annotation").clear(!0),flow(annotation$2())(n),o&&s&&renderStatistic(r,{statistic:s,plotType:"pie"}),n}function tooltip$7(n){var r=n.chart,e=n.options,a=e.tooltip,o=e.colorField,s=e.angleField,l=e.data;if(a===!1)r.tooltip(a);else if(r.tooltip(deepAssign({},a,{shared:!1})),isAllZero(l,s)){var c=get(a,"fields"),u=get(a,"formatter");isEmpty(get(a,"fields"))&&(c=[o,s],u=u||function(f){return{name:f[o],value:toString$2(f[s])}}),r.geometries[0].tooltip(c.join("*"),getMappingFunction(c,u))}return n}function interaction$6(n){var r=n.chart,e=n.options,a=transformStatisticOptions(e),o=a.interactions,s=a.statistic,l=a.annotations;return each$1(o,function(c){var u,f;if(c.enable===!1)r.removeInteraction(c.type);else if(c.type==="pie-statistic-active"){var d=[];!((u=c.cfg)===null||u===void 0)&&u.start||(d=[{trigger:"element:mouseenter",action:"".concat(PIE_STATISTIC,":change"),arg:{statistic:s,annotations:l}}]),each$1((f=c.cfg)===null||f===void 0?void 0:f.start,function(g){d.push(__assign$8(__assign$8({},g),{arg:{statistic:s,annotations:l}}))}),r.interaction(c.type,deepAssign({},c.cfg,{start:d}))}else r.interaction(c.type,c.cfg||{})}),n}function adaptor$r(n){return flow(pattern("pieStyle"),geometry$l,meta$g,theme$2,coordinate$7,legend$g,tooltip$7,label$a,state,pieAnnotation,interaction$6,animation$5)(n)}var Pie=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="pie",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$s},r.prototype.changeData=function(e){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null));var a=this.options,o=this.options.angleField,s=processIllegalData(a.data,o),l=processIllegalData(e,o);isAllZero(s,o)||isAllZero(l,o)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(l),pieAnnotation({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$r},r}(Plot),DEFAULT_COLOR=["#FAAD14","#E8EDF3"],DEFAULT_OPTIONS$r={percent:.2,color:DEFAULT_COLOR,animation:{}};function getProgressData(n){var r=clamp(isRealNumber(n)?n:0,0,1);return[{current:"".concat(r),type:"current",percent:r},{current:"".concat(r),type:"target",percent:1}]}function geometry$k(n){var r=n.chart,e=n.options,a=e.percent,o=e.progressStyle,s=e.color,l=e.barWidthRatio;r.data(getProgressData(a));var c=deepAssign({},n,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:l,interval:{style:o,color:isString$1(s)?[s,DEFAULT_COLOR[1]]:s},args:{zIndexReversed:!0,sortZIndex:!0}}});return interval(c),r.tooltip(!1),r.axis(!1),r.legend(!1),n}function coordinate$6(n){var r=n.chart;return r.coordinate("rect").transpose(),n}function adaptor$q(n){return flow(geometry$k,scale$2({}),coordinate$6,animation$5,theme$2,annotation$2())(n)}var Progress=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="process",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$r},r.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(getProgressData(e))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$q},r}(Plot);function coordinate$5(n){var r=n.chart,e=n.options,a=e.innerRadius,o=e.radius;return r.coordinate("theta",{innerRadius:a,radius:o}),n}function statistic$1(n,r){var e=n.chart,a=n.options,o=a.innerRadius,s=a.statistic,l=a.percent,c=a.meta;if(e.getController("annotation").clear(!0),o&&s){var u=get(c,["percent","formatter"])||function(d){return"".concat((d*100).toFixed(2),"%")},f=s.content;f&&(f=deepAssign({},f,{content:isNil(f.content)?u(l):f.content})),renderStatistic(e,{statistic:__assign$8(__assign$8({},s),{content:f}),plotType:"ring-progress"},{percent:l})}return r&&e.render(!0),n}function adaptor$p(n){return flow(geometry$k,scale$2({}),coordinate$5,statistic$1,animation$5,theme$2,annotation$2())(n)}var DEFAULT_OPTIONS$q={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},RingProgress=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="ring-process",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$q},r.prototype.changeData=function(e){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(getProgressData(e)),statistic$1({chart:this.chart,options:this.options},!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$p},r}(Plot);function _slicedToArray(n,r){return _arrayWithHoles(n)||_iterableToArrayLimit(n,r)||_nonIterableRest()}function _arrayWithHoles(n){if(Array.isArray(n))return n}function _iterableToArrayLimit(n,r){var e=[],a=!0,o=!1,s=void 0;try{for(var l=n[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(e.push(c.value),!(r&&e.length===r));a=!0);}catch(u){o=!0,s=u}finally{try{!a&&l.return!=null&&l.return()}finally{if(o)throw s}}return e}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function points(n,r,e,a){n=n.filter(function(y,m){var x=r(y,m),A=e(y,m);return x!=null&&isFinite(x)&&A!=null&&isFinite(A)}),a&&n.sort(function(y,m){return r(y)-r(m)});for(var o=n.length,s=new Float64Array(o),l=new Float64Array(o),c=0,u=0,f,d,g,v=0;v<o;)g=n[v],s[v]=f=+r(g,v,n),l[v]=d=+e(g,v,n),++v,c+=(f-c)/v,u+=(d-u)/v;for(var p=0;p<o;++p)s[p]-=c,l[p]-=u;return[s,l,c,u]}function visitPoints(n,r,e,a){for(var o=0,s=0,l=n.length;s<l;s++){var c=n[s],u=+r(c,s,n),f=+e(c,s,n);u!=null&&isFinite(u)&&f!=null&&isFinite(f)&&a(u,f,o++)}}function determination(n,r,e,a,o){var s=0,l=0;return visitPoints(n,r,e,function(c,u){var f=u-o(c),d=u-a;s+=f*f,l+=d*d}),1-s/l}function angle(n){return Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])*180/Math.PI}function midpoint(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function interpose(n,r,e){for(var a=Math.log(r-n)*Math.LOG10E+1|0,o=1*Math.pow(10,-a/2-1),s=1e4,l=[u(n),u(r)],c=0;f(l)&&c<s;);return l;function u(d){return[d,e(d)]}function f(d){c++;for(var g=d.length,v=!1,p=0;p<g-1;p++){var y=d[p],m=d[p+1],x=midpoint([y,m]),A=u(x[0]),_=angle([y,x]),b=angle([y,A]),S=Math.abs(_-b);S>o&&(d.splice(p+1,0,A),v=!0)}return v}}function ols(n,r,e,a){var o=a-n*n,s=Math.abs(o)<1e-24?0:(e-n*r)/o,l=r-s*n;return[l,s]}function exponential(){var n=function(s){return s[0]},r=function(s){return s[1]},e;function a(o){var s=0,l=0,c=0,u=0,f=0,d=0,g=e?+e[0]:1/0,v=e?+e[1]:-1/0;visitPoints(o,n,r,function(b,S){var C=Math.log(S),E=b*S;++s,l+=(S-l)/s,u+=(E-u)/s,d+=(b*E-d)/s,c+=(S*C-c)/s,f+=(E*C-f)/s,e||(b<g&&(g=b),b>v&&(v=b))});var p=ols(u/l,c/l,f/l,d/l),y=_slicedToArray(p,2),m=y[0],x=y[1];m=Math.exp(m);var A=function(S){return m*Math.exp(x*S)},_=interpose(g,v,A);return _.a=m,_.b=x,_.predict=A,_.rSquared=determination(o,n,r,l,A),_}return a.domain=function(o){return arguments.length?(e=o,a):e},a.x=function(o){return arguments.length?(n=o,a):n},a.y=function(o){return arguments.length?(r=o,a):r},a}function linear(){var n=function(s){return s[0]},r=function(s){return s[1]},e;function a(o){var s=0,l=0,c=0,u=0,f=0,d=e?+e[0]:1/0,g=e?+e[1]:-1/0;visitPoints(o,n,r,function(_,b){++s,l+=(_-l)/s,c+=(b-c)/s,u+=(_*b-u)/s,f+=(_*_-f)/s,e||(_<d&&(d=_),_>g&&(g=_))});var v=ols(l,c,u,f),p=_slicedToArray(v,2),y=p[0],m=p[1],x=function(b){return m*b+y},A=[[d,x(d)],[g,x(g)]];return A.a=m,A.b=y,A.predict=x,A.rSquared=determination(o,n,r,c,x),A}return a.domain=function(o){return arguments.length?(e=o,a):e},a.x=function(o){return arguments.length?(n=o,a):n},a.y=function(o){return arguments.length?(r=o,a):r},a}function median(n){n.sort(function(e,a){return e-a});var r=n.length/2;return r%1===0?(n[r-1]+n[r])/2:n[Math.floor(r)]}var maxiters=2,epsilon=1e-12;function loess(){var n=function(s){return s[0]},r=function(s){return s[1]},e=.3;function a(o){for(var s=points(o,n,r,!0),l=_slicedToArray(s,4),c=l[0],u=l[1],f=l[2],d=l[3],g=c.length,v=Math.max(2,~~(e*g)),p=new Float64Array(g),y=new Float64Array(g),m=new Float64Array(g).fill(1),x=-1;++x<=maxiters;){for(var A=[0,v-1],_=0;_<g;++_){for(var b=c[_],S=A[0],C=A[1],E=b-c[S]>c[C]-b?S:C,T=0,w=0,L=0,M=0,O=0,P=1/Math.abs(c[E]-b||1),N=S;N<=C;++N){var G=c[N],Y=u[N],F=tricube(Math.abs(b-G)*P)*m[N],z=G*F;T+=F,w+=z,L+=Y*F,M+=Y*z,O+=G*z}var W=ols(w/T,L/T,M/T,O/T),j=_slicedToArray(W,2),U=j[0],X=j[1];p[_]=U+X*b,y[_]=Math.abs(u[_]-p[_]),updateInterval(c,_+1,A)}if(x===maxiters)break;var tt=median(y);if(Math.abs(tt)<epsilon)break;for(var rt=0,J,et;rt<g;++rt)J=y[rt]/(6*tt),m[rt]=J>=1?epsilon:(et=1-J*J)*et}return output(c,p,f,d)}return a.bandwidth=function(o){return arguments.length?(e=o,a):e},a.x=function(o){return arguments.length?(n=o,a):n},a.y=function(o){return arguments.length?(r=o,a):r},a}function tricube(n){return(n=1-n*n*n)*n*n}function updateInterval(n,r,e){var a=n[r],o=e[0],s=e[1]+1;if(!(s>=n.length))for(;r>o&&n[s]-a<=a-n[o];)e[0]=++o,e[1]=s,++s}function output(n,r,e,a){for(var o=n.length,s=[],l=0,c=0,u=[],f;l<o;++l)f=n[l]+e,u[0]===f?u[1]+=(r[l]-u[1])/++c:(c=0,u[1]+=a,u=[f,r[l]],s.push(u));return u[1]+=a,s}function logarithmic(){var n=function(l){return l[0]},r=function(l){return l[1]},e=Math.E,a;function o(s){var l=0,c=0,u=0,f=0,d=0,g=a?+a[0]:1/0,v=a?+a[1]:-1/0,p=Math.log(e);visitPoints(s,n,r,function(S,C){var E=Math.log(S)/p;++l,c+=(E-c)/l,u+=(C-u)/l,f+=(E*C-f)/l,d+=(E*E-d)/l,a||(S<g&&(g=S),S>v&&(v=S))});var y=ols(c,u,f,d),m=_slicedToArray(y,2),x=m[0],A=m[1],_=function(C){return A*Math.log(C)/p+x},b=interpose(g,v,_);return b.a=A,b.b=x,b.predict=_,b.rSquared=determination(s,n,r,u,_),b}return o.domain=function(s){return arguments.length?(a=s,o):a},o.x=function(s){return arguments.length?(n=s,o):n},o.y=function(s){return arguments.length?(r=s,o):r},o.base=function(s){return arguments.length?(e=s,o):e},o}function quad(){var n=function(s){return s[0]},r=function(s){return s[1]},e;function a(o){var s=points(o,n,r),l=_slicedToArray(s,4),c=l[0],u=l[1],f=l[2],d=l[3],g=c.length,v=0,p=0,y=0,m=0,x=0,A,_,b,S;for(A=0;A<g;)_=c[A],b=u[A++],S=_*_,v+=(S-v)/A,p+=(S*_-p)/A,y+=(S*S-y)/A,m+=(_*b-m)/A,x+=(S*b-x)/A;var C=0,E=0,T=e?+e[0]:1/0,w=e?+e[1]:-1/0;visitPoints(o,n,r,function(F,z){E++,C+=(z-C)/E,e||(F<T&&(T=F),F>w&&(w=F))});var L=y-v*v,M=v*L-p*p,O=(x*v-m*p)/M,P=(m*L-x*p)/M,N=-O*v,G=function(z){return z=z-f,O*z*z+P*z+N+d},Y=interpose(T,w,G);return Y.a=O,Y.b=P-2*O*f,Y.c=N-P*f+O*f*f+d,Y.predict=G,Y.rSquared=determination(o,n,r,C,G),Y}return a.domain=function(o){return arguments.length?(e=o,a):e},a.x=function(o){return arguments.length?(n=o,a):n},a.y=function(o){return arguments.length?(r=o,a):r},a}function polynomial(){var n=function(l){return l[0]},r=function(l){return l[1]},e=3,a;function o(s){if(e===1){var l=linear().x(n).y(r).domain(a)(s);return l.coefficients=[l.b,l.a],delete l.a,delete l.b,l}if(e===2){var c=quad().x(n).y(r).domain(a)(s);return c.coefficients=[c.c,c.b,c.a],delete c.a,delete c.b,delete c.c,c}var u=points(s,n,r),f=_slicedToArray(u,4),d=f[0],g=f[1],v=f[2],p=f[3],y=d.length,m=[],x=[],A=e+1,_=0,b=0,S=a?+a[0]:1/0,C=a?+a[1]:-1/0;visitPoints(s,n,r,function(G,Y){++b,_+=(Y-_)/b,a||(G<S&&(S=G),G>C&&(C=G))});var E,T,w,L,M;for(E=0;E<A;++E){for(w=0,L=0;w<y;++w)L+=Math.pow(d[w],E)*g[w];for(m.push(L),M=new Float64Array(A),T=0;T<A;++T){for(w=0,L=0;w<y;++w)L+=Math.pow(d[w],E+T);M[T]=L}x.push(M)}x.push(m);var O=gaussianElimination(x),P=function(Y){Y-=v;var F=p+O[0]+O[1]*Y+O[2]*Y*Y;for(E=3;E<A;++E)F+=O[E]*Math.pow(Y,E);return F},N=interpose(S,C,P);return N.coefficients=uncenter(A,O,-v,p),N.predict=P,N.rSquared=determination(s,n,r,_,P),N}return o.domain=function(s){return arguments.length?(a=s,o):a},o.x=function(s){return arguments.length?(n=s,o):n},o.y=function(s){return arguments.length?(r=s,o):r},o.order=function(s){return arguments.length?(e=s,o):e},o}function uncenter(n,r,e,a){var o=Array(n),s,l,c,u;for(s=0;s<n;++s)o[s]=0;for(s=n-1;s>=0;--s)for(c=r[s],u=1,o[s]+=c,l=1;l<=s;++l)u*=(s+1-l)/l,o[s-l]+=c*Math.pow(e,l)*u;return o[0]+=a,o}function gaussianElimination(n){var r=n.length-1,e=[],a,o,s,l,c;for(a=0;a<r;++a){for(l=a,o=a+1;o<r;++o)Math.abs(n[a][o])>Math.abs(n[a][l])&&(l=o);for(s=a;s<r+1;++s)c=n[s][a],n[s][a]=n[s][l],n[s][l]=c;for(o=a+1;o<r;++o)for(s=r;s>=a;s--)n[s][o]-=n[s][a]*n[a][o]/n[a][a]}for(o=r-1;o>=0;--o){for(c=0,s=o+1;s<r;++s)c+=n[s][o]*e[s];e[o]=(n[r][o]-c)/n[o][o]}return e}function power(){var n=function(s){return s[0]},r=function(s){return s[1]},e;function a(o){var s=0,l=0,c=0,u=0,f=0,d=0,g=e?+e[0]:1/0,v=e?+e[1]:-1/0;visitPoints(o,n,r,function(b,S){var C=Math.log(b),E=Math.log(S);++s,l+=(C-l)/s,c+=(E-c)/s,u+=(C*E-u)/s,f+=(C*C-f)/s,d+=(S-d)/s,e||(b<g&&(g=b),b>v&&(v=b))});var p=ols(l,c,u,f),y=_slicedToArray(p,2),m=y[0],x=y[1];m=Math.exp(m);var A=function(S){return m*Math.pow(S,x)},_=interpose(g,v,A);return _.a=m,_.b=x,_.predict=A,_.rSquared=determination(o,n,r,d,A),_}return a.domain=function(o){return arguments.length?(e=o,a):e},a.x=function(o){return arguments.length?(n=o,a):n},a.y=function(o){return arguments.length?(r=o,a):r},a}var REGRESSION_MAP={exp:exponential,linear,loess,log:logarithmic,poly:polynomial,pow:power,quad};function getQuadrantDefaultConfig(n,r){var e=10,a={regionStyle:[{position:{start:[n,"max"],end:["max",r]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[n,r]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",r],end:[n,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[n,r],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",r],offsetX:-e,offsetY:-e,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",r],offsetX:e,offsetY:-e,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",r],offsetX:e,offsetY:e,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",r],offsetX:-e,offsetY:e,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return a}var splinePath=function(n,r){var e=r.view,a=r.options,o=a.xField,s=a.yField,l=e.getScaleByField(o),c=e.getScaleByField(s),u=n.map(function(f){return e.getCoordinate().convert({x:l.scale(f[0]),y:c.scale(f[1])})});return getSplinePath(u,!1)},getPath=function(n){var r=n.options,e=r.xField,a=r.yField,o=r.data,s=r.regressionLine,l=s.type,c=l===void 0?"linear":l,u=s.algorithm,f=s.equation,d,g=null;if(u)d=isArray$4(u)?u:u(o),g=f;else{var v=REGRESSION_MAP[c]().x(function(p){return p[e]}).y(function(p){return p[a]});d=v(o),g=getRegressionEquation(c,d)}return[splinePath(d,n),g]},getMeta=function(n){var r,e=n.meta,a=e===void 0?{}:e,o=n.xField,s=n.yField,l=n.data,c=l[0][o],u=l[0][s],f=c>0,d=u>0;function g(v,p){var y=get(a,[v]);function m(A){return get(y,A)}var x={};return p==="x"?(isNumber$2(c)&&(isNumber$2(m("min"))||(x.min=f?0:c*2),isNumber$2(m("max"))||(x.max=f?c*2:0)),x):(isNumber$2(u)&&(isNumber$2(m("min"))||(x.min=d?0:u*2),isNumber$2(m("max"))||(x.max=d?u*2:0)),x)}return __assign$8(__assign$8({},a),(r={},r[o]=__assign$8(__assign$8({},a[o]),g(o,"x")),r[s]=__assign$8(__assign$8({},a[s]),g(s,"y")),r))};function getRegressionEquation(n,r){var e,a,o,s=function(f,d){return d===void 0&&(d=4),Math.round(f*Math.pow(10,d))/Math.pow(10,d)},l=function(f){return Number.isFinite(f)?s(f):"?"};switch(n){case"linear":return"y = ".concat(l(r.a),"x + ").concat(l(r.b),", R^2 = ").concat(l(r.rSquared));case"exp":return"y = ".concat(l(r.a),"e^(").concat(l(r.b),"x), R^2 = ").concat(l(r.rSquared));case"log":return"y = ".concat(l(r.a),"ln(x) + ").concat(l(r.b),", R^2 = ").concat(l(r.rSquared));case"quad":return"y = ".concat(l(r.a),"x^2 + ").concat(l(r.b),"x + ").concat(l(r.c),", R^2 = ").concat(l(r.rSquared));case"poly":for(var c="y = ".concat(l((e=r.coefficients)===null||e===void 0?void 0:e[0])," + ").concat(l((a=r.coefficients)===null||a===void 0?void 0:a[1]),"x + ").concat(l((o=r.coefficients)===null||o===void 0?void 0:o[2]),"x^2"),u=3;u<r.coefficients.length;++u)c+=" + ".concat(l(r.coefficients[u]),"x^").concat(u);return"".concat(c,", R^2 = ").concat(l(r.rSquared));case"pow":return"y = ".concat(l(r.a),"x^").concat(l(r.b),", R^2 = ").concat(l(r.rSquared))}return null}function transformOptions$1(n){var r=n.data,e=r===void 0?[]:r,a=n.xField,o=n.yField;if(e.length){for(var s=!0,l=!0,c=e[0],u=void 0,f=1;f<e.length&&(u=e[f],c[a]!==u[a]&&(s=!1),c[o]!==u[o]&&(l=!1),!(!s&&!l));f++)c=u;var d=[];s&&d.push(a),l&&d.push(o);var g=pick(getMeta(n),d);return deepAssign({},n,{meta:g})}return n}function geometry$j(n){var r=n.chart,e=n.options,a=e.data,o=e.type,s=e.color,l=e.shape,c=e.pointStyle,u=e.shapeField,f=e.colorField,d=e.xField,g=e.yField,v=e.sizeField,p=e.size,y=e.tooltip;v&&(p||(p=[2,8]),isNumber$2(p)&&(p=[p,p])),y&&!y.fields&&(y=__assign$8(__assign$8({},y),{fields:[d,g,f,v,u]})),r.data(a),point(deepAssign({},n,{options:{seriesField:f,point:{color:s,shape:l,size:p,style:c},tooltip:y}}));var m=findGeometry(r,"point");return o&&m.adjust(o),n}function meta$f(n){var r,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField,c=transformOptions$1(e);return flow(scale$2((r={},r[s]=a,r[l]=o,r)))(deepAssign({},n,{options:c}))}function axis$g(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return r.axis(s,a),r.axis(l,o),n}function legend$b(n){var r=n.chart,e=n.options,a=e.legend,o=e.colorField,s=e.shapeField,l=e.sizeField,c=e.shapeLegend,u=e.sizeLegend,f=a!==!1;return o&&r.legend(o,f?a:!1),s&&(c?r.legend(s,c):r.legend(s,c===!1?!1:a)),l&&r.legend(l,u||!1),!f&&!c&&!u&&r.legend(!1),n}function label$9(n){var r=n.chart,e=n.options,a=e.label,o=e.yField,s=findGeometry(r,"point");if(!a)s.label(!1);else{var l=a.callback,c=__rest$1(a,["callback"]);s.label({fields:[o],callback:l,cfg:transformLabel(c)})}return n}function scatterAnnotation(n){var r=n.options,e=r.quadrant,a=[];if(e){var o=e.xBaseline,s=o===void 0?0:o,l=e.yBaseline,c=l===void 0?0:l,u=e.labels,f=e.regionStyle,d=e.lineStyle,g=getQuadrantDefaultConfig(s,c),v=new Array(4).join(",").split(",");v.forEach(function(p,y){a.push(__assign$8(__assign$8({type:"region",top:!1},g.regionStyle[y].position),{style:deepAssign({},g.regionStyle[y].style,f==null?void 0:f[y])}),__assign$8({type:"text",top:!0},deepAssign({},g.labelStyle[y],u==null?void 0:u[y])))}),a.push({type:"line",top:!1,start:["min",c],end:["max",c],style:deepAssign({},g.lineStyle,d)},{type:"line",top:!1,start:[s,"min"],end:[s,"max"],style:deepAssign({},g.lineStyle,d)})}return flow(annotation$2(a))(n)}function regressionLine(n){var r=n.options,e=n.chart,a=r.regressionLine;if(a){var o=a.style,s=a.equationStyle,l=s===void 0?{}:s,c=a.top,u=c===void 0?!1:c,f=a.showEquation,d=f===void 0?!1:f,g={stroke:"#9ba29a",lineWidth:2,opacity:.5},v={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};e.annotation().shape({top:u,render:function(p,y){var m=p.addGroup({id:"".concat(e.id,"-regression-line"),name:"regression-line-group"}),x=getPath({view:y,options:r}),A=x[0],_=x[1];m.addShape("path",{name:"regression-line",attrs:__assign$8(__assign$8({path:A},g),o)}),d&&m.addShape("text",{name:"regression-equation",attrs:__assign$8(__assign$8(__assign$8({},v),l),{text:_})})}})}return n}function tooltip$6(n){var r=n.chart,e=n.options,a=e.tooltip;return a?r.tooltip(a):a===!1&&r.tooltip(!1),n}function adaptor$o(n){return flow(geometry$j,meta$f,axis$g,legend$b,tooltip$6,label$9,brushInteraction,slider$2,scrollbar,interaction$8,scatterAnnotation,animation$5,theme$2,regressionLine)(n)}var DEFAULT_OPTIONS$p=deepAssign({},Plot.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});registerInteraction("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Scatter=function(n){__extends$7(r,n);function r(e,a){var o=n.call(this,e,a)||this;return o.type="scatter",o.on(VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(s){var l,c,u=o,f=u.options,d=u.chart;if(((l=s.data)===null||l===void 0?void 0:l.source)===EVENTS$1.FILTER){var g=o.chart.filterData(o.chart.getData());meta$f({chart:d,options:__assign$8(__assign$8({},f),{data:g})})}((c=s.data)===null||c===void 0?void 0:c.source)===EVENTS$1.RESET&&meta$f({chart:d,options:f})}),o}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$p},r.prototype.changeData=function(e){this.updateOption(transformOptions$1(deepAssign({},this.options,{data:e})));var a=this,o=a.options,s=a.chart;meta$f({chart:s,options:o}),this.chart.changeData(e)},r.prototype.getSchemaAdaptor=function(){return adaptor$o},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r}(Plot),Y_FIELD$4="$$stock-range$$",TREND_FIELD="trend",TREND_UP="up",TREND_DOWN="down",DEFAULT_TOOLTIP_OPTIONS$2={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(n,r,e){var a;if(n==="x"){var o=e[0];a=o?o.title:r}else a=r;return{position:n==="y"?"start":"end",content:a,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},DEFAULT_OPTIONS$o=deepAssign({},Plot.getDefaultOptions(),{tooltip:DEFAULT_TOOLTIP_OPTIONS$2,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function getStockData(n,r){return map$2(n,function(e){var a=e&&__assign$8({},e);if(isArray$4(r)&&a){var o=r[0],s=r[1],l=r[2],c=r[3];a[TREND_FIELD]=a[o]<=a[s]?TREND_UP:TREND_DOWN,a[Y_FIELD$4]=[a[o],a[s],a[l],a[c]]}return a})}function geometry$i(n){var r=n.chart,e=n.options,a=e.yField,o=e.data,s=e.risingFill,l=e.fallingFill,c=e.tooltip,u=e.stockStyle;r.data(getStockData(o,a));var f=c;return f!==!1&&(f=deepAssign({},{fields:a},f)),schema(deepAssign({},n,{options:{schema:{shape:"candle",color:[s,l],style:u},yField:Y_FIELD$4,seriesField:TREND_FIELD,rawFields:a,tooltip:f}})),n}function meta$e(n){var r,e,a=n.chart,o=n.options,s=o.meta,l=o.xAxis,c=o.yAxis,u=o.xField,f=(r={},r[u]={type:"timeCat",tickCount:6},r[TREND_FIELD]={values:[TREND_UP,TREND_DOWN]},r),d=deepAssign(f,s,(e={},e[u]=pick(l,AXIS_META_CONFIG_KEYS),e[Y_FIELD$4]=pick(c,AXIS_META_CONFIG_KEYS),e));return a.scale(d),n}function axis$f(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField;return a===!1?r.axis(s,!1):r.axis(s,a),o===!1?r.axis(Y_FIELD$4,!1):r.axis(Y_FIELD$4,o),n}function tooltip$5(n){var r=n.chart,e=n.options,a=e.tooltip;return a!==!1?r.tooltip(a):r.tooltip(!1),n}function legend$a(n){var r=n.chart,e=n.options,a=e.legend;return a?r.legend(TREND_FIELD,a):a===!1&&r.legend(!1),n}function adaptor$n(n){flow(theme$2,geometry$i,meta$e,axis$f,tooltip$5,legend$a,interaction$8,animation$5,annotation$2(),slider$2)(n)}var Stock=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="stock",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$o},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$n},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this.options.yField;this.chart.changeData(getStockData(e,a))},r}(Plot);function getTinyData(n){return map$2(n||[],function(r,e){return{x:"".concat(e),y:r}})}var X_FIELD$3="x",Y_FIELD$3="y",DEFAULT_TOOLTIP_OPTIONS$1={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(n,r){return"".concat(get(r,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},DEFAULT_OPTIONS$n={appendPadding:2,tooltip:__assign$8({},DEFAULT_TOOLTIP_OPTIONS$1),animation:{}};function geometry$h(n){var r=n.chart,e=n.options,a=e.data,o=e.color,s=e.areaStyle,l=e.point,c=e.line,u=l==null?void 0:l.state,f=getTinyData(a);r.data(f);var d=deepAssign({},n,{options:{xField:X_FIELD$3,yField:Y_FIELD$3,area:{color:o,style:s},line:c,point:l}}),g=deepAssign({},d,{options:{tooltip:!1}}),v=deepAssign({},d,{options:{tooltip:!1,state:u}});return area(d),line(g),point(v),r.axis(!1),r.legend(!1),n}function meta$d(n){var r,e,a=n.options,o=a.xAxis,s=a.yAxis,l=a.data,c=getTinyData(l);return flow(scale$2((r={},r[X_FIELD$3]=o,r[Y_FIELD$3]=s,r),(e={},e[X_FIELD$3]={type:"cat"},e[Y_FIELD$3]=adjustYMetaByZero(c,Y_FIELD$3),e)))(n)}function adaptor$m(n){return flow(pattern("areaStyle"),geometry$h,meta$d,tooltip$9,theme$2,animation$5,annotation$2())(n)}var DEFAULT_OPTIONS$m={appendPadding:2,tooltip:__assign$8({},DEFAULT_TOOLTIP_OPTIONS$1),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},TinyArea=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="tiny-area",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$m},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this,o=a.chart,s=a.options;meta$d({chart:o,options:s}),o.changeData(getTinyData(e))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$m},r}(Plot);function geometry$g(n){var r=n.chart,e=n.options,a=e.data,o=e.color,s=e.columnStyle,l=e.columnWidthRatio,c=getTinyData(a);r.data(c);var u=deepAssign({},n,{options:{xField:X_FIELD$3,yField:Y_FIELD$3,widthRatio:l,interval:{style:s,color:o}}});return interval(u),r.axis(!1),r.legend(!1),r.interaction("element-active"),n}function adaptor$l(n){return flow(theme$2,pattern("columnStyle"),geometry$g,meta$d,tooltip$9,animation$5,annotation$2())(n)}var DEFAULT_TOOLTIP_OPTIONS={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(n,r){return"".concat(get(r,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},DEFAULT_OPTIONS$l={appendPadding:2,tooltip:__assign$8({},DEFAULT_TOOLTIP_OPTIONS),animation:{}},TinyColumn=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="tiny-column",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$l},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this,o=a.chart,s=a.options;meta$d({chart:o,options:s}),o.changeData(getTinyData(e))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$l},r}(Plot);function geometry$f(n){var r=n.chart,e=n.options,a=e.data,o=e.color,s=e.lineStyle,l=e.point,c=l==null?void 0:l.state,u=getTinyData(a);r.data(u);var f=deepAssign({},n,{options:{xField:X_FIELD$3,yField:Y_FIELD$3,line:{color:o,style:s},point:l}}),d=deepAssign({},f,{options:{tooltip:!1,state:c}});return line(f),point(d),r.axis(!1),r.legend(!1),n}function adaptor$k(n){return flow(geometry$f,meta$d,theme$2,tooltip$9,animation$5,annotation$2())(n)}var TinyLine=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="tiny-line",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$n},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this,o=a.chart,s=a.options;meta$d({chart:o,options:s}),o.changeData(getTinyData(e))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$k},r}(Plot),PLOT_ADAPTORS={line:adaptor$y,pie:adaptor$r,column:adaptor$w,bar:adaptor$v,area:adaptor$x,gauge:adaptor$t,"tiny-line":adaptor$k,"tiny-column":adaptor$l,"tiny-area":adaptor$m,"ring-progress":adaptor$p,progress:adaptor$q,scatter:adaptor$o,histogram:adaptor$s,funnel:adaptor$u,stock:adaptor$n},PLOT_CONSTRUCTOR={line:Line,pie:Pie,column:Column,bar:Bar,area:Area,gauge:Gauge,"tiny-line":TinyLine,"tiny-column":TinyColumn,"tiny-area":TinyArea,"ring-progress":RingProgress,progress:Progress,scatter:Scatter,histogram:Histogram,funnel:Funnel,stock:Stock},DEFAULT_OPTIONS_MAP={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function execPlotAdaptor(n,r,e){var a=PLOT_CONSTRUCTOR[n];if(!a){console.error("could not find ".concat(n," plot"));return}var o=PLOT_ADAPTORS[n];o({chart:r,options:deepAssign({},a.getDefaultOptions(),get(DEFAULT_OPTIONS_MAP,n,{}),e)})}function multiView(n){var r=n.chart,e=n.options,a=e.views,o=e.legend;return each$1(a,function(s){var l=s.region,c=s.data,u=s.meta,f=s.axes,d=s.coordinate,g=s.interactions,v=s.annotations,p=s.tooltip,y=s.geometries,m=r.createView({region:l});m.data(c);var x={};f&&each$1(f,function(A,_){x[_]=pick(A,AXIS_META_CONFIG_KEYS)}),x=deepAssign({},u,x),m.scale(x),f?each$1(f,function(A,_){m.axis(_,A)}):m.axis(!1),m.coordinate(d),each$1(y,function(A){var _=geometry$x({chart:m,options:A}).ext,b=A.adjust;b&&_.geometry.adjust(b)}),each$1(g,function(A){A.enable===!1?m.removeInteraction(A.type):m.interaction(A.type,A.cfg)}),each$1(v,function(A){m.annotation()[A.type](__assign$8({},A))}),typeof s.animation=="boolean"?m.animate(!1):(m.animate(!0),each$1(m.geometries,function(A){A.animate(s.animation)})),p&&(m.interaction("tooltip"),m.tooltip(p))}),o?each$1(o,function(s,l){r.legend(l,s)}):r.legend(!1),r.tooltip(e.tooltip),n}function multiPlot(n){var r=n.chart,e=n.options,a=e.plots,o=e.data,s=o===void 0?[]:o;return each$1(a,function(l){var c=l.type,u=l.region,f=l.options,d=f===void 0?{}:f,g=l.top,v=d.tooltip;if(g){execPlotAdaptor(c,r,__assign$8(__assign$8({},d),{data:s}));return}var p=r.createView(__assign$8({region:u},pick(d,PLOT_CONTAINER_OPTIONS)));v&&p.interaction("tooltip"),execPlotAdaptor(c,p,__assign$8({data:s},d))}),n}function slider$1(n){var r=n.chart,e=n.options;return r.option("slider",e.slider),n}function adaptor$j(n){return flow(animation$5,multiView,multiPlot,interaction$8,animation$5,theme$2,tooltip$9,slider$1,annotation$2())(n)}function getElementValue(n,r){var e=n.getModel(),a=e.data,o;return isArray$4(a)?o=a[0][r]:o=a[r],o}function clearHighlight(n){var r=getAllElements(n);each$1(r,function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)})}var Association=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getAssociationItems=function(e,a){var o,s=this.context.event,l=a||{},c=l.linkField,u=l.dim,f=[];if(!((o=s.data)===null||o===void 0)&&o.data){var d=s.data.data;each$1(e,function(g){var v,p,y=c;if(u==="x"?y=g.getXScale().field:u==="y"?y=(v=g.getYScales().find(function(x){return x.field===y}))===null||v===void 0?void 0:v.field:y||(y=(p=g.getGroupScales()[0])===null||p===void 0?void 0:p.field),!!y){var m=map$2(getAllElements(g),function(x){var A=!1,_=!1,b=isArray$4(d)?get(d[0],y):get(d,y);return getElementValue(x,y)===b?A=!0:_=!0,{element:x,view:g,active:A,inactive:_}});f.push.apply(f,m)}})}return f},r.prototype.showTooltip=function(e){var a=getSiblingViews(this.context.view),o=this.getAssociationItems(a,e);each$1(o,function(s){if(s.active){var l=s.element.shape.getCanvasBBox();s.view.showTooltip({x:l.minX+l.width/2,y:l.minY+l.height/2})}})},r.prototype.hideTooltip=function(){var e=getSiblingViews(this.context.view);each$1(e,function(a){a.hideTooltip()})},r.prototype.active=function(e){var a=getViews(this.context.view),o=this.getAssociationItems(a,e);each$1(o,function(s){var l=s.active,c=s.element;l&&c.setState("active",!0)})},r.prototype.selected=function(e){var a=getViews(this.context.view),o=this.getAssociationItems(a,e);each$1(o,function(s){var l=s.active,c=s.element;l&&c.setState("selected",!0)})},r.prototype.highlight=function(e){var a=getViews(this.context.view),o=this.getAssociationItems(a,e);each$1(o,function(s){var l=s.inactive,c=s.element;l&&c.setState("inactive",!0)})},r.prototype.reset=function(){var e=getViews(this.context.view);each$1(e,function(a){clearHighlight(a)})},r}(Action);registerAction("association",Association);registerInteraction("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});registerInteraction("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});registerInteraction("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});registerInteraction("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="mix",e}return r.prototype.getSchemaAdaptor=function(){return adaptor$j},r})(Plot);var Stage;(function(n){n.DEV="DEV",n.BETA="BETA",n.STABLE="STABLE"})(Stage||(Stage={}));var FIRST_AXES_VIEW="first-axes-view",SECOND_AXES_VIEW="second-axes-view",SERIES_FIELD_KEY="series-field-key";function transformData$7(n,r,e,a,o){var s=[];r.forEach(function(g){a.forEach(function(v){var p,y=(p={},p[n]=v[n],p[e]=g,p[g]=v[g],p);s.push(y)})});var l=Object.values(groupBy(s,e)),c=l[0],u=c===void 0?[]:c,f=l[1],d=f===void 0?[]:f;return o?[u.reverse(),d.reverse()]:[u,d]}function isHorizontal(n){return n!=="vertical"}function syncViewPadding(n,r,e){var a=r[0],o=r[1],s=a.autoPadding,l=o.autoPadding,c=n.__axisPosition,u=c.layout,f=c.position;if(isHorizontal(u)&&f==="top"&&(a.autoPadding=e.instance(s.top,0,s.bottom,s.left),o.autoPadding=e.instance(l.top,s.left,l.bottom,0)),isHorizontal(u)&&f==="bottom"&&(a.autoPadding=e.instance(s.top,s.right/2+5,s.bottom,s.left),o.autoPadding=e.instance(l.top,l.right,l.bottom,s.right/2+5)),!isHorizontal(u)&&f==="bottom"){var d=s.left>=l.left?s.left:l.left;a.autoPadding=e.instance(s.top,s.right,s.bottom/2+5,d),o.autoPadding=e.instance(s.bottom/2+5,l.right,l.bottom,d)}if(!isHorizontal(u)&&f==="top"){var d=s.left>=l.left?s.left:l.left;a.autoPadding=e.instance(s.top,s.right,0,d),o.autoPadding=e.instance(0,l.right,s.top,d)}}function geometry$e(n){var r=n.chart,e=n.options,a=e.data,o=e.xField,s=e.yField,l=e.color,c=e.barStyle,u=e.widthRatio,f=e.legend,d=e.layout,g=transformData$7(o,s,SERIES_FIELD_KEY,a,isHorizontal(d));f?r.legend(SERIES_FIELD_KEY,f):f===!1&&r.legend(!1);var v,p,y=g[0],m=g[1];isHorizontal(d)?(v=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:FIRST_AXES_VIEW}),v.coordinate().transpose().reflect("x"),p=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:SECOND_AXES_VIEW}),p.coordinate().transpose(),v.data(y),p.data(m)):(v=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:FIRST_AXES_VIEW}),p=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:SECOND_AXES_VIEW}),p.coordinate().reflect("y"),v.data(y),p.data(m));var x=deepAssign({},n,{chart:v,options:{widthRatio:u,xField:o,yField:s[0],seriesField:SERIES_FIELD_KEY,interval:{color:l,style:c}}});interval(x);var A=deepAssign({},n,{chart:p,options:{xField:o,yField:s[1],seriesField:SERIES_FIELD_KEY,widthRatio:u,interval:{color:l,style:c}}});return interval(A),n}function meta$c(n){var r,e,a,o=n.options,s=n.chart,l=o.xAxis,c=o.yAxis,u=o.xField,f=o.yField,d=findViewById(s,FIRST_AXES_VIEW),g=findViewById(s,SECOND_AXES_VIEW),v={};return keys((o==null?void 0:o.meta)||{}).map(function(p){get(o==null?void 0:o.meta,[p,"alias"])&&(v[p]=o.meta[p].alias)}),s.scale((r={},r[SERIES_FIELD_KEY]={sync:!0,formatter:function(p){return get(v,p,p)}},r)),scale$2((e={},e[u]=l,e[f[0]]=c[f[0]],e))(deepAssign({},n,{chart:d})),scale$2((a={},a[u]=l,a[f[1]]=c[f[1]],a))(deepAssign({},n,{chart:g})),n}function axis$e(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField,c=e.layout,u=findViewById(r,FIRST_AXES_VIEW),f=findViewById(r,SECOND_AXES_VIEW);return(a==null?void 0:a.position)==="bottom"?f.axis(s,__assign$8(__assign$8({},a),{label:{formatter:function(){return""}}})):f.axis(s,!1),a===!1?u.axis(s,!1):u.axis(s,__assign$8({position:isHorizontal(c)?"top":"bottom"},a)),o===!1?(u.axis(l[0],!1),f.axis(l[1],!1)):(u.axis(l[0],o[l[0]]),f.axis(l[1],o[l[1]])),r.__axisPosition={position:u.getOptions().axes[s].position,layout:c},n}function interaction$5(n){var r=n.chart;return interaction$8(deepAssign({},n,{chart:findViewById(r,FIRST_AXES_VIEW)})),interaction$8(deepAssign({},n,{chart:findViewById(r,SECOND_AXES_VIEW)})),n}function limitInPlot$1(n){var r=n.chart,e=n.options,a=e.yField,o=e.yAxis;return limitInPlot$2(deepAssign({},n,{chart:findViewById(r,FIRST_AXES_VIEW),options:{yAxis:o[a[0]]}})),limitInPlot$2(deepAssign({},n,{chart:findViewById(r,SECOND_AXES_VIEW),options:{yAxis:o[a[1]]}})),n}function theme$1(n){var r=n.chart;return theme$2(deepAssign({},n,{chart:findViewById(r,FIRST_AXES_VIEW)})),theme$2(deepAssign({},n,{chart:findViewById(r,SECOND_AXES_VIEW)})),theme$2(n),n}function animation$4(n){var r=n.chart;return animation$5(deepAssign({},n,{chart:findViewById(r,FIRST_AXES_VIEW)})),animation$5(deepAssign({},n,{chart:findViewById(r,SECOND_AXES_VIEW)})),n}function label$8(n){var r=this,e,a,o=n.chart,s=n.options,l=s.label,c=s.yField,u=s.layout,f=findViewById(o,FIRST_AXES_VIEW),d=findViewById(o,SECOND_AXES_VIEW),g=findGeometry(f,"interval"),v=findGeometry(d,"interval");if(!l)g.label(!1),v.label(!1);else{var p=l.callback,y=__rest$1(l,["callback"]);y.position||(y.position="middle"),y.offset===void 0&&(y.offset=2);var m=__assign$8({},y);if(isHorizontal(u)){var x=((e=m.style)===null||e===void 0?void 0:e.textAlign)||(y.position==="middle"?"center":"left");y.style=deepAssign({},y.style,{textAlign:x});var A={left:"right",right:"left",center:"center"};m.style=deepAssign({},m.style,{textAlign:A[x]})}else{var _={top:"bottom",bottom:"top",middle:"middle"};typeof y.position=="string"?y.position=_[y.position]:typeof y.position=="function"&&(y.position=function(){for(var C=[],E=0;E<arguments.length;E++)C[E]=arguments[E];return _[y.position.apply(r,C)]});var b=((a=m.style)===null||a===void 0?void 0:a.textBaseline)||"bottom";m.style=deepAssign({},m.style,{textBaseline:b});var S={top:"bottom",bottom:"top",middle:"middle"};y.style=deepAssign({},y.style,{textBaseline:S[b]})}g.label({fields:[c[0]],callback:p,cfg:transformLabel(m)}),v.label({fields:[c[1]],callback:p,cfg:transformLabel(y)})}return n}function adaptor$i(n){return flow(geometry$e,meta$c,axis$e,limitInPlot$1,theme$1,label$8,tooltip$9,interaction$5,animation$4)(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="bidirectional-bar",e}return r.getDefaultOptions=function(){return deepAssign({},n.getDefaultOptions.call(this),{syncViewPadding})},r.prototype.changeData=function(e){e===void 0&&(e=[]),this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var a=this.options,o=a.xField,s=a.yField,l=a.layout,c=transformData$7(o,s,SERIES_FIELD_KEY,e,isHorizontal(l)),u=c[0],f=c[1],d=findViewById(this.chart,FIRST_AXES_VIEW),g=findViewById(this.chart,SECOND_AXES_VIEW);d.data(u),g.data(f),this.chart.render(!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$i},r.SERIES_FIELD_KEY=SERIES_FIELD_KEY,r})(Plot);var _a,BOX_RANGE="$$range$$",BOX_RANGE_ALIAS="low-q1-median-q3-high",BOX_SYNC_NAME="$$y_outliers$$",OUTLIERS_VIEW_ID="outliers_view",DEFAULT_OPTIONS$k=deepAssign({},Plot.getDefaultOptions(),{meta:(_a={},_a[BOX_RANGE]={min:0,alias:BOX_RANGE_ALIAS},_a),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),transformData$6=function(n,r){var e=n;if(Array.isArray(r)){var a=r[0],o=r[1],s=r[2],l=r[3],c=r[4];e=map$2(n,function(u){return u[BOX_RANGE]=[u[a],u[o],u[s],u[l],u[c]],u})}return e};function field(n){var r=n.chart,e=n.options,a=e.xField,o=e.yField,s=e.groupField,l=e.color,c=e.tooltip,u=e.boxStyle;r.data(transformData$6(e.data,o));var f=isArray$4(o)?BOX_RANGE:o,d=o?isArray$4(o)?o:[o]:[],g=c;g!==!1&&(g=deepAssign({},{fields:isArray$4(o)?o:[]},g));var v=schema(deepAssign({},n,{options:{xField:a,yField:f,seriesField:s,tooltip:g,rawFields:d,label:!1,schema:{shape:"box",color:l,style:u}}})).ext;return s&&v.geometry.adjust("dodge"),n}function outliersPoint(n){var r=n.chart,e=n.options,a=e.xField,o=e.data,s=e.outliersField,l=e.outliersStyle,c=e.padding,u=e.label;if(!s)return n;var f=r.createView({padding:c,id:OUTLIERS_VIEW_ID}),d=o.reduce(function(g,v){var p=v[s];return p.forEach(function(y){var m;return g.push(__assign$8(__assign$8({},v),(m={},m[s]=y,m)))}),g},[]);return f.data(d),point({chart:f,options:{xField:a,yField:s,point:{shape:"circle",style:l},label:u}}),f.axis(!1),n}function meta$b(n){var r,e,a=n.chart,o=n.options,s=o.meta,l=o.xAxis,c=o.yAxis,u=o.xField,f=o.yField,d=o.outliersField,g=Array.isArray(f)?BOX_RANGE:f,v={};if(d){var p=BOX_SYNC_NAME;v=(r={},r[d]={sync:p,nice:!0},r[g]={sync:p,nice:!0},r)}var y=deepAssign(v,s,(e={},e[u]=pick(l,AXIS_META_CONFIG_KEYS),e[g]=pick(c,AXIS_META_CONFIG_KEYS),e));return a.scale(y),n}function axis$d(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField,c=Array.isArray(l)?BOX_RANGE:l;return a===!1?r.axis(s,!1):r.axis(s,a),o===!1?r.axis(BOX_RANGE,!1):r.axis(c,o),n}function legend$9(n){var r=n.chart,e=n.options,a=e.legend,o=e.groupField;return o?a?r.legend(o,a):r.legend(o,{position:"bottom"}):r.legend(!1),n}function adaptor$h(n){return flow(field,outliersPoint,meta$b,axis$d,legend$9,tooltip$9,annotation$2(),interaction$8,animation$5,theme$2)(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="box",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$k},r.prototype.changeData=function(e){this.updateOption({data:e});var a=this.options.yField,o=this.chart.views.find(function(s){return s.id===OUTLIERS_VIEW_ID});o&&o.data(e),this.chart.changeData(transformData$6(e,a))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$h},r})(Plot);function getSeriesFieldKey(n,r,e){return n.length>1?"".concat(r,"_").concat(e):"".concat(r)}function transformData$5(n){var r=n.data,e=n.xField,a=n.measureField,o=n.rangeField,s=n.targetField,l=n.layout,c=[],u=[];r.forEach(function(g,v){var p=[g[o]].flat();p.sort(function(x,A){return x-A}),p.forEach(function(x,A){var _,b=A===0?x:p[A]-p[A-1];c.push((_={rKey:"".concat(o,"_").concat(A)},_[e]=e?g[e]:String(v),_[o]=b,_))});var y=[g[a]].flat();y.forEach(function(x,A){var _;c.push((_={mKey:getSeriesFieldKey(y,a,A)},_[e]=e?g[e]:String(v),_[a]=x,_))});var m=[g[s]].flat();m.forEach(function(x,A){var _;c.push((_={tKey:getSeriesFieldKey(m,s,A)},_[e]=e?g[e]:String(v),_[s]=x,_))}),u.push(g[o],g[a],g[s])});var f=Math.min.apply(Math,u.flat(1/0)),d=Math.max.apply(Math,u.flat(1/0));return f=f>0?0:f,l==="vertical"&&c.reverse(),{min:f,max:d,ds:c}}function geometry$d(n){var r=n.chart,e=n.options,a=e.bulletStyle,o=e.targetField,s=e.rangeField,l=e.measureField,c=e.xField,u=e.color,f=e.layout,d=e.size,g=e.label,v=transformData$5(e),p=v.min,y=v.max,m=v.ds;r.data(m);var x=deepAssign({},n,{options:{xField:c,yField:s,seriesField:"rKey",isStack:!0,label:get(g,"range"),interval:{color:get(u,"range"),style:get(a,"range"),size:get(d,"range")}}});interval(x),r.geometries[0].tooltip(!1);var A=deepAssign({},n,{options:{xField:c,yField:l,seriesField:"mKey",isStack:!0,label:get(g,"measure"),interval:{color:get(u,"measure"),style:get(a,"measure"),size:get(d,"measure")}}});interval(A);var _=deepAssign({},n,{options:{xField:c,yField:o,seriesField:"tKey",label:get(g,"target"),point:{color:get(u,"target"),style:get(a,"target"),size:isFunction$1(get(d,"target"))?function(b){return get(d,"target")(b)/2}:get(d,"target")/2,shape:f==="horizontal"?"line":"hyphen"}}});return point(_),f==="horizontal"&&r.coordinate().transpose(),__assign$8(__assign$8({},n),{ext:{data:{min:p,max:y}}})}function meta$a(n){var r,e,a=n.options,o=n.ext,s=a.xAxis,l=a.yAxis,c=a.targetField,u=a.rangeField,f=a.measureField,d=a.xField,g=o.data;return flow(scale$2((r={},r[d]=s,r[f]=l,r),(e={},e[f]={min:g==null?void 0:g.min,max:g==null?void 0:g.max,sync:!0},e[c]={sync:"".concat(f)},e[u]={sync:"".concat(f)},e)))(n)}function axis$c(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.measureField,c=e.rangeField,u=e.targetField;return r.axis("".concat(c),!1),r.axis("".concat(u),!1),a===!1?r.axis("".concat(s),!1):r.axis("".concat(s),a),o===!1?r.axis("".concat(l),!1):r.axis("".concat(l),o),n}function legend$8(n){var r=n.chart,e=n.options,a=e.legend;return r.removeInteraction("legend-filter"),r.legend(a),r.legend("rKey",!1),r.legend("mKey",!1),r.legend("tKey",!1),n}function label$7(n){var r=n.chart,e=n.options,a=e.label,o=e.measureField,s=e.targetField,l=e.rangeField,c=r.geometries,u=c[0],f=c[1],d=c[2];return get(a,"range")?u.label("".concat(l),__assign$8({layout:[{type:"limit-in-plot"}]},transformLabel(a.range))):u.label(!1),get(a,"measure")?f.label("".concat(o),__assign$8({layout:[{type:"limit-in-plot"}]},transformLabel(a.measure))):f.label(!1),get(a,"target")?d.label("".concat(s),__assign$8({layout:[{type:"limit-in-plot"}]},transformLabel(a.target))):d.label(!1),n}function adaptor$g(n){flow(geometry$d,meta$a,axis$c,legend$8,theme$2,label$7,tooltip$9,interaction$8,animation$5)(n)}var DEFAULT_OPTIONS$j=deepAssign({},Plot.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="bullet",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$j},r.prototype.changeData=function(e){this.updateOption({data:e});var a=transformData$5(this.options),o=a.min,s=a.max,l=a.ds;meta$a({options:this.options,ext:{data:{min:o,max:s}},chart:this.chart}),this.chart.changeData(l)},r.prototype.getSchemaAdaptor=function(){return adaptor$g},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r})(Plot);var DEFAULT_OPTIONS$i={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(n){return n.id},source:function(n){return n.source},target:function(n){return n.target},sourceWeight:function(n){return n.value||1},targetWeight:function(n){return n.value||1},sortBy:null};function processGraph(n,r,e){each$1(n,function(a,o){a.inEdges=r.filter(function(s){return"".concat(e.target(s))==="".concat(o)}),a.outEdges=r.filter(function(s){return"".concat(e.source(s))==="".concat(o)}),a.edges=a.outEdges.concat(a.inEdges),a.frequency=a.edges.length,a.value=0,a.inEdges.forEach(function(s){a.value+=e.targetWeight(s)}),a.outEdges.forEach(function(s){a.value+=e.sourceWeight(s)})})}function sortNodes(n,r){var e={weight:function(o,s){return s.value-o.value},frequency:function(o,s){return s.frequency-o.frequency},id:function(o,s){return"".concat(r.id(o)).localeCompare("".concat(r.id(s)))}},a=e[r.sortBy];!a&&isFunction$1(r.sortBy)&&(a=r.sortBy),a&&n.sort(a)}function layoutNodes(n,r){var e=n.length;if(!e)throw new TypeError("Invalid nodes: it's empty!");if(r.weight){var a=r.nodePaddingRatio;if(a<0||a>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var o=a/(2*e),s=r.nodeWidthRatio;if(s<=0||s>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var l=0;n.forEach(function(u){l+=u.value}),n.forEach(function(u){u.weight=u.value/l,u.width=u.weight*(1-a),u.height=s}),n.forEach(function(u,f){for(var d=0,g=f-1;g>=0;g--)d+=n[g].width+2*o;var v=u.minX=o+d,p=u.maxX=u.minX+u.width,y=u.minY=r.y-s/2,m=u.maxY=y+s;u.x=[v,p,p,v],u.y=[y,y,m,m]})}else{var c=1/e;n.forEach(function(u,f){u.x=(f+.5)*c,u.y=r.y})}return n}function locatingEdges(n,r,e){if(e.weight){var a={};each$1(n,function(o,s){a[s]=o.value}),r.forEach(function(o){var s=e.source(o),l=e.target(o),c=n[s],u=n[l];if(c&&u){var f=a[s],d=e.sourceWeight(o),g=c.minX+(c.value-f)/c.value*c.width,v=g+d/c.value*c.width;a[s]-=d;var p=a[l],y=e.targetWeight(o),m=u.minX+(u.value-p)/u.value*u.width,x=m+y/u.value*u.width;a[l]-=y;var A=e.y;o.x=[g,v,m,x],o.y=[A,A,A,A],o.source=c,o.target=u}})}else r.forEach(function(o){var s=n[e.source(o)],l=n[e.target(o)];s&&l&&(o.x=[s.x,l.x],o.y=[s.y,l.y],o.source=s,o.target=l)});return r}function getDefaultOptions$1(n){return mix({},DEFAULT_OPTIONS$i,n)}function chordLayout(n,r){var e=getDefaultOptions$1(n),a={},o=r.nodes,s=r.links;o.forEach(function(u){var f=e.id(u);a[f]=u}),processGraph(a,s,e),sortNodes(o,e);var l=layoutNodes(o,e),c=locatingEdges(a,s,e);return{nodes:l,links:c}}var X_FIELD$2="x",Y_FIELD$2="y",NODE_COLOR_FIELD="name",EDGE_COLOR_FIELD="source",DEFAULT_OPTIONS$h={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(n,r){var e=(n[0]+n[1])/2,a=e>.5?-4:4;return{offsetX:a,content:r}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(n){return!get(n,[0,"data","isNode"])},formatter:function(n){var r=n.source,e=n.target,a=n.value;return{name:"".concat(r," -> ").concat(e),value:a}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function transformData$4(n){var r=n.options,e=r.data,a=r.sourceField,o=r.targetField,s=r.weightField,l=r.nodePaddingRatio,c=r.nodeWidthRatio,u=r.rawFields,f=u===void 0?[]:u,d=transformDataToNodeLinkData(e,a,o,s),g=chordLayout({weight:!0,nodePaddingRatio:l,nodeWidthRatio:c},d),v=g.nodes,p=g.links,y=v.map(function(x){return __assign$8(__assign$8({},pick(x,__spreadArray$2(["id","x","y","name"],f,!0))),{isNode:!0})}),m=p.map(function(x){return __assign$8(__assign$8({source:x.source.name,target:x.target.name,name:x.source.name||x.target.name},pick(x,__spreadArray$2(["x","y","value"],f,!0))),{isNode:!1})});return __assign$8(__assign$8({},n),{ext:__assign$8(__assign$8({},n.ext),{chordData:{nodesData:y,edgesData:m}})})}function scale$1(n){var r,e=n.chart;return e.scale((r={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},r[NODE_COLOR_FIELD]={sync:"color"},r[EDGE_COLOR_FIELD]={sync:"color"},r)),n}function axis$b(n){var r=n.chart;return r.axis(!1),n}function legend$7(n){var r=n.chart;return r.legend(!1),n}function tooltip$4(n){var r=n.chart,e=n.options,a=e.tooltip;return r.tooltip(a),n}function coordinate$4(n){var r=n.chart;return r.coordinate("polar").reflect("y"),n}function nodeGeometry(n){var r=n.chart,e=n.options,a=n.ext.chordData.nodesData,o=e.nodeStyle,s=e.label,l=e.tooltip,c=r.createView();return c.data(a),polygon({chart:c,options:{xField:X_FIELD$2,yField:Y_FIELD$2,seriesField:NODE_COLOR_FIELD,polygon:{style:o},label:s,tooltip:l}}),n}function edgeGeometry(n){var r=n.chart,e=n.options,a=n.ext.chordData.edgesData,o=e.edgeStyle,s=e.tooltip,l=r.createView();l.data(a);var c={xField:X_FIELD$2,yField:Y_FIELD$2,seriesField:EDGE_COLOR_FIELD,edge:{style:o,shape:"arc"},tooltip:s};return edge({chart:l,options:c}),n}function animation$3(n){var r=n.chart,e=n.options,a=e.animation;return addViewAnimation(r,a,getAllGeometriesRecursively(r)),n}function adaptor$f(n){return flow(theme$2,transformData$4,coordinate$4,scale$1,axis$b,legend$7,tooltip$4,edgeGeometry,nodeGeometry,interaction$8,state,animation$3)(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="chord",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$h},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$f},r})(Plot);var RAW_FIELDS$1=["x","y","r","name","value","path","depth"],DEFAULT_OPTIONS$g={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},PADDING=4,PADDING_LEFT=0,PADDING_TOP=5,BREAD_CRUMB_NAME="drilldown-bread-crumb",DEFAULT_BREAD_CRUMB_CONFIG={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},HIERARCHY_DATA_TRANSFORM_PARAMS="hierarchy-data-transform-params",DrillDownAction=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=DEFAULT_BREAD_CRUMB_CONFIG,e}return r.prototype.click=function(){var e=get(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},r.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),a=this.breadCrumbGroup,o=a.getBBox(),s=this.getButtonCfg().position,l={x:e.start.x,y:e.end.y-(o.height+PADDING_TOP*2)};e.isPolar&&(l={x:0,y:0}),s==="bottom-left"&&(l={x:e.start.x,y:e.start.y});var c=Util.transform(null,[["t",l.x+PADDING_LEFT,l.y+o.height+PADDING_TOP]]);a.setMatrix(c)}},r.prototype.back=function(){size(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},r.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},r.prototype.drill=function(e){var a=this.context.view,o=get(a,["interactions","drill-down","cfg","transformData"],function(f){return f}),s=o(__assign$8({data:e.data},e[HIERARCHY_DATA_TRANSFORM_PARAMS]));a.changeData(s);for(var l=[],c=e;c;){var u=c.data;l.unshift({id:"".concat(u.name,"_").concat(c.height,"_").concat(c.depth),name:u.name,children:o(__assign$8({data:u},e[HIERARCHY_DATA_TRANSFORM_PARAMS]))}),c=c.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(l)},r.prototype.backTo=function(e){if(!(!e||e.length<=0)){var a=this.context.view,o=last(e).children;a.changeData(o),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},r.prototype.getButtonCfg=function(){var e=this.context.view,a=get(e,["interactions","drill-down","cfg","drillDownConfig"]);return deepAssign(this.breadCrumbCfg,a==null?void 0:a.breadCrumb,this.cfg)},r.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},r.prototype.drawBreadCrumbGroup=function(){var e=this,a=this.getButtonCfg(),o=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:BREAD_CRUMB_NAME});var s=0;o.forEach(function(l,c){var u=e.breadCrumbGroup.addShape({type:"text",id:l.id,name:"".concat(BREAD_CRUMB_NAME,"_").concat(l.name,"_text"),attrs:__assign$8(__assign$8({text:c===0&&!isNil(a.rootText)?a.rootText:l.name},a.textStyle),{x:s,y:0})}),f=u.getBBox();if(s+=f.width+PADDING,u.on("click",function(v){var p,y=v.target.get("id");if(y!==((p=last(o))===null||p===void 0?void 0:p.id)){var m=o.slice(0,o.findIndex(function(x){return x.id===y})+1);e.backTo(m)}}),u.on("mouseenter",function(v){var p,y=v.target.get("id");y!==((p=last(o))===null||p===void 0?void 0:p.id)?u.attr(a.activeTextStyle):u.attr({cursor:"default"})}),u.on("mouseleave",function(){u.attr(a.textStyle)}),c<o.length-1){var d=e.breadCrumbGroup.addShape({type:"text",name:"".concat(a.name,"_").concat(l.name,"_divider"),attrs:__assign$8(__assign$8({text:a.dividerText},a.textStyle),{x:s,y:0})}),g=d.getBBox();s+=g.width+PADDING}})},r.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},r.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),n.prototype.destroy.call(this)},r}(Action);function defaultSeparation$1(n,r){return n.parent===r.parent?1:2}function meanX(n){return n.reduce(meanXReduce,0)/n.length}function meanXReduce(n,r){return n+r.x}function maxY(n){return 1+n.reduce(maxYReduce,0)}function maxYReduce(n,r){return Math.max(n,r.y)}function leafLeft(n){for(var r;r=n.children;)n=r[0];return n}function leafRight(n){for(var r;r=n.children;)n=r[r.length-1];return n}function cluster(){var n=defaultSeparation$1,r=1,e=1,a=!1;function o(s){var l,c=0;s.eachAfter(function(v){var p=v.children;p?(v.x=meanX(p),v.y=maxY(p)):(v.x=l?c+=n(v,l):0,v.y=0,l=v)});var u=leafLeft(s),f=leafRight(s),d=u.x-n(u,f)/2,g=f.x+n(f,u)/2;return s.eachAfter(a?function(v){v.x=(v.x-s.x)*r,v.y=(s.y-v.y)*e}:function(v){v.x=(v.x-d)/(g-d)*r,v.y=(1-(s.y?v.y/s.y:1))*e})}return o.separation=function(s){return arguments.length?(n=s,o):n},o.size=function(s){return arguments.length?(a=!1,r=+s[0],e=+s[1],o):a?null:[r,e]},o.nodeSize=function(s){return arguments.length?(a=!0,r=+s[0],e=+s[1],o):a?[r,e]:null},o}function count(n){var r=0,e=n.children,a=e&&e.length;if(!a)r=1;else for(;--a>=0;)r+=e[a].value;n.value=r}function node_count(){return this.eachAfter(count)}function node_each(n,r){let e=-1;for(const a of this)n.call(r,a,++e,this);return this}function node_eachBefore(n,r){for(var e=this,a=[e],o,s,l=-1;e=a.pop();)if(n.call(r,e,++l,this),o=e.children)for(s=o.length-1;s>=0;--s)a.push(o[s]);return this}function node_eachAfter(n,r){for(var e=this,a=[e],o=[],s,l,c,u=-1;e=a.pop();)if(o.push(e),s=e.children)for(l=0,c=s.length;l<c;++l)a.push(s[l]);for(;e=o.pop();)n.call(r,e,++u,this);return this}function node_find(n,r){let e=-1;for(const a of this)if(n.call(r,a,++e,this))return a}function node_sum(n){return this.eachAfter(function(r){for(var e=+n(r.data)||0,a=r.children,o=a&&a.length;--o>=0;)e+=a[o].value;r.value=e})}function node_sort(n){return this.eachBefore(function(r){r.children&&r.children.sort(n)})}function node_path(n){for(var r=this,e=leastCommonAncestor(r,n),a=[r];r!==e;)r=r.parent,a.push(r);for(var o=a.length;n!==e;)a.splice(o,0,n),n=n.parent;return a}function leastCommonAncestor(n,r){if(n===r)return n;var e=n.ancestors(),a=r.ancestors(),o=null;for(n=e.pop(),r=a.pop();n===r;)o=n,n=e.pop(),r=a.pop();return o}function node_ancestors(){for(var n=this,r=[n];n=n.parent;)r.push(n);return r}function node_descendants(){return Array.from(this)}function node_leaves(){var n=[];return this.eachBefore(function(r){r.children||n.push(r)}),n}function node_links(){var n=this,r=[];return n.each(function(e){e!==n&&r.push({source:e.parent,target:e})}),r}function*node_iterator(){var n=this,r,e=[n],a,o,s;do for(r=e.reverse(),e=[];n=r.pop();)if(yield n,a=n.children)for(o=0,s=a.length;o<s;++o)e.push(a[o]);while(e.length)}function hierarchy(n,r){n instanceof Map?(n=[void 0,n],r===void 0&&(r=mapChildren)):r===void 0&&(r=objectChildren);for(var e=new Node$1(n),a,o=[e],s,l,c,u;a=o.pop();)if((l=r(a.data))&&(u=(l=Array.from(l)).length))for(a.children=l,c=u-1;c>=0;--c)o.push(s=l[c]=new Node$1(l[c])),s.parent=a,s.depth=a.depth+1;return e.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(n){return n.children}function mapChildren(n){return Array.isArray(n)?n[1]:null}function copyData(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function computeHeight(n){var r=0;do n.height=r;while((n=n.parent)&&n.height<++r)}function Node$1(n){this.data=n,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function array(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function shuffle(n){for(var r=n.length,e,a;r;)a=Math.random()*r--|0,e=n[r],n[r]=n[a],n[a]=e;return n}function enclose(n){for(var r=0,e=(n=shuffle(Array.from(n))).length,a=[],o,s;r<e;)o=n[r],s&&enclosesWeak(s,o)?++r:(s=encloseBasis(a=extendBasis(a,o)),r=0);return s}function extendBasis(n,r){var e,a;if(enclosesWeakAll(r,n))return[r];for(e=0;e<n.length;++e)if(enclosesNot(r,n[e])&&enclosesWeakAll(encloseBasis2(n[e],r),n))return[n[e],r];for(e=0;e<n.length-1;++e)for(a=e+1;a<n.length;++a)if(enclosesNot(encloseBasis2(n[e],n[a]),r)&&enclosesNot(encloseBasis2(n[e],r),n[a])&&enclosesNot(encloseBasis2(n[a],r),n[e])&&enclosesWeakAll(encloseBasis3(n[e],n[a],r),n))return[n[e],n[a],r];throw new Error}function enclosesNot(n,r){var e=n.r-r.r,a=r.x-n.x,o=r.y-n.y;return e<0||e*e<a*a+o*o}function enclosesWeak(n,r){var e=n.r-r.r+Math.max(n.r,r.r,1)*1e-9,a=r.x-n.x,o=r.y-n.y;return e>0&&e*e>a*a+o*o}function enclosesWeakAll(n,r){for(var e=0;e<r.length;++e)if(!enclosesWeak(n,r[e]))return!1;return!0}function encloseBasis(n){switch(n.length){case 1:return encloseBasis1(n[0]);case 2:return encloseBasis2(n[0],n[1]);case 3:return encloseBasis3(n[0],n[1],n[2])}}function encloseBasis1(n){return{x:n.x,y:n.y,r:n.r}}function encloseBasis2(n,r){var e=n.x,a=n.y,o=n.r,s=r.x,l=r.y,c=r.r,u=s-e,f=l-a,d=c-o,g=Math.sqrt(u*u+f*f);return{x:(e+s+u/g*d)/2,y:(a+l+f/g*d)/2,r:(g+o+c)/2}}function encloseBasis3(n,r,e){var a=n.x,o=n.y,s=n.r,l=r.x,c=r.y,u=r.r,f=e.x,d=e.y,g=e.r,v=a-l,p=a-f,y=o-c,m=o-d,x=u-s,A=g-s,_=a*a+o*o-s*s,b=_-l*l-c*c+u*u,S=_-f*f-d*d+g*g,C=p*y-v*m,E=(y*S-m*b)/(C*2)-a,T=(m*x-y*A)/C,w=(p*b-v*S)/(C*2)-o,L=(v*A-p*x)/C,M=T*T+L*L-1,O=2*(s+E*T+w*L),P=E*E+w*w-s*s,N=-(M?(O+Math.sqrt(O*O-4*M*P))/(2*M):P/O);return{x:a+E+T*N,y:o+w+L*N,r:N}}function place(n,r,e){var a=n.x-r.x,o,s,l=n.y-r.y,c,u,f=a*a+l*l;f?(s=r.r+e.r,s*=s,u=n.r+e.r,u*=u,s>u?(o=(f+u-s)/(2*f),c=Math.sqrt(Math.max(0,u/f-o*o)),e.x=n.x-o*a-c*l,e.y=n.y-o*l+c*a):(o=(f+s-u)/(2*f),c=Math.sqrt(Math.max(0,s/f-o*o)),e.x=r.x+o*a-c*l,e.y=r.y+o*l+c*a)):(e.x=r.x+e.r,e.y=r.y)}function intersects(n,r){var e=n.r+r.r-1e-6,a=r.x-n.x,o=r.y-n.y;return e>0&&e*e>a*a+o*o}function score(n){var r=n._,e=n.next._,a=r.r+e.r,o=(r.x*e.r+e.x*r.r)/a,s=(r.y*e.r+e.y*r.r)/a;return o*o+s*s}function Node(n){this._=n,this.next=null,this.previous=null}function packEnclose(n){if(!(o=(n=array(n)).length))return 0;var r,e,a,o,s,l,c,u,f,d,g;if(r=n[0],r.x=0,r.y=0,!(o>1))return r.r;if(e=n[1],r.x=-e.r,e.x=r.r,e.y=0,!(o>2))return r.r+e.r;place(e,r,a=n[2]),r=new Node(r),e=new Node(e),a=new Node(a),r.next=a.previous=e,e.next=r.previous=a,a.next=e.previous=r;t:for(c=3;c<o;++c){place(r._,e._,a=n[c]),a=new Node(a),u=e.next,f=r.previous,d=e._.r,g=r._.r;do if(d<=g){if(intersects(u._,a._)){e=u,r.next=e,e.previous=r,--c;continue t}d+=u._.r,u=u.next}else{if(intersects(f._,a._)){r=f,r.next=e,e.previous=r,--c;continue t}g+=f._.r,f=f.previous}while(u!==f.next);for(a.previous=r,a.next=e,r.next=e.previous=e=a,s=score(r);(a=a.next)!==e;)(l=score(a))<s&&(r=a,s=l);e=r.next}for(r=[e._],a=e;(a=a.next)!==e;)r.push(a._);for(a=enclose(r),c=0;c<o;++c)r=n[c],r.x-=a.x,r.y-=a.y;return a.r}function siblings(n){return packEnclose(n),n}function optional(n){return n==null?null:required(n)}function required(n){if(typeof n!="function")throw new Error;return n}function constantZero(){return 0}function constant$1(n){return function(){return n}}function defaultRadius(n){return Math.sqrt(n.value)}function index$1(){var n=null,r=1,e=1,a=constantZero;function o(s){return s.x=r/2,s.y=e/2,n?s.eachBefore(radiusLeaf(n)).eachAfter(packChildren(a,.5)).eachBefore(translateChild(1)):s.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(a,s.r/Math.min(r,e))).eachBefore(translateChild(Math.min(r,e)/(2*s.r))),s}return o.radius=function(s){return arguments.length?(n=optional(s),o):n},o.size=function(s){return arguments.length?(r=+s[0],e=+s[1],o):[r,e]},o.padding=function(s){return arguments.length?(a=typeof s=="function"?s:constant$1(+s),o):a},o}function radiusLeaf(n){return function(r){r.children||(r.r=Math.max(0,+n(r)||0))}}function packChildren(n,r){return function(e){if(a=e.children){var a,o,s=a.length,l=n(e)*r||0,c;if(l)for(o=0;o<s;++o)a[o].r+=l;if(c=packEnclose(a),l)for(o=0;o<s;++o)a[o].r-=l;e.r=c+l}}}function translateChild(n){return function(r){var e=r.parent;r.r*=n,e&&(r.x=e.x+n*r.x,r.y=e.y+n*r.y)}}function roundNode(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function treemapDice(n,r,e,a,o){for(var s=n.children,l,c=-1,u=s.length,f=n.value&&(a-r)/n.value;++c<u;)l=s[c],l.y0=e,l.y1=o,l.x0=r,l.x1=r+=l.value*f}function partition$1(){var n=1,r=1,e=0,a=!1;function o(l){var c=l.height+1;return l.x0=l.y0=e,l.x1=n,l.y1=r/c,l.eachBefore(s(r,c)),a&&l.eachBefore(roundNode),l}function s(l,c){return function(u){u.children&&treemapDice(u,u.x0,l*(u.depth+1)/c,u.x1,l*(u.depth+2)/c);var f=u.x0,d=u.y0,g=u.x1-e,v=u.y1-e;g<f&&(f=g=(f+g)/2),v<d&&(d=v=(d+v)/2),u.x0=f,u.y0=d,u.x1=g,u.y1=v}}return o.round=function(l){return arguments.length?(a=!!l,o):a},o.size=function(l){return arguments.length?(n=+l[0],r=+l[1],o):[n,r]},o.padding=function(l){return arguments.length?(e=+l,o):e},o}var preroot={depth:-1},ambiguous={};function defaultId$1(n){return n.id}function defaultParentId(n){return n.parentId}function stratify(){var n=defaultId$1,r=defaultParentId;function e(a){var o=Array.from(a),s=o.length,l,c,u,f,d,g,v,p=new Map;for(c=0;c<s;++c)l=o[c],d=o[c]=new Node$1(l),(g=n(l,c,a))!=null&&(g+="")&&(v=d.id=g,p.set(v,p.has(v)?ambiguous:d)),(g=r(l,c,a))!=null&&(g+="")&&(d.parent=g);for(c=0;c<s;++c)if(d=o[c],g=d.parent){if(f=p.get(g),!f)throw new Error("missing: "+g);if(f===ambiguous)throw new Error("ambiguous: "+g);f.children?f.children.push(d):f.children=[d],d.parent=f}else{if(u)throw new Error("multiple roots");u=d}if(!u)throw new Error("no root");if(u.parent=preroot,u.eachBefore(function(y){y.depth=y.parent.depth+1,--s}).eachBefore(computeHeight),u.parent=null,s>0)throw new Error("cycle");return u}return e.id=function(a){return arguments.length?(n=required(a),e):n},e.parentId=function(a){return arguments.length?(r=required(a),e):r},e}function defaultSeparation(n,r){return n.parent===r.parent?1:2}function nextLeft(n){var r=n.children;return r?r[0]:n.t}function nextRight(n){var r=n.children;return r?r[r.length-1]:n.t}function moveSubtree(n,r,e){var a=e/(r.i-n.i);r.c-=a,r.s+=e,n.c+=a,r.z+=e,r.m+=e}function executeShifts(n){for(var r=0,e=0,a=n.children,o=a.length,s;--o>=0;)s=a[o],s.z+=r,s.m+=r,r+=s.s+(e+=s.c)}function nextAncestor(n,r,e){return n.a.parent===r.parent?n.a:e}function TreeNode(n,r){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(n){for(var r=new TreeNode(n,0),e,a=[r],o,s,l,c;e=a.pop();)if(s=e._.children)for(e.children=new Array(c=s.length),l=c-1;l>=0;--l)a.push(o=e.children[l]=new TreeNode(s[l],l)),o.parent=e;return(r.parent=new TreeNode(null,0)).children=[r],r}function tree(){var n=defaultSeparation,r=1,e=1,a=null;function o(f){var d=treeRoot(f);if(d.eachAfter(s),d.parent.m=-d.z,d.eachBefore(l),a)f.eachBefore(u);else{var g=f,v=f,p=f;f.eachBefore(function(_){_.x<g.x&&(g=_),_.x>v.x&&(v=_),_.depth>p.depth&&(p=_)});var y=g===v?1:n(g,v)/2,m=y-g.x,x=r/(v.x+y+m),A=e/(p.depth||1);f.eachBefore(function(_){_.x=(_.x+m)*x,_.y=_.depth*A})}return f}function s(f){var d=f.children,g=f.parent.children,v=f.i?g[f.i-1]:null;if(d){executeShifts(f);var p=(d[0].z+d[d.length-1].z)/2;v?(f.z=v.z+n(f._,v._),f.m=f.z-p):f.z=p}else v&&(f.z=v.z+n(f._,v._));f.parent.A=c(f,v,f.parent.A||g[0])}function l(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function c(f,d,g){if(d){for(var v=f,p=f,y=d,m=v.parent.children[0],x=v.m,A=p.m,_=y.m,b=m.m,S;y=nextRight(y),v=nextLeft(v),y&&v;)m=nextLeft(m),p=nextRight(p),p.a=f,S=y.z+_-v.z-x+n(y._,v._),S>0&&(moveSubtree(nextAncestor(y,f,g),f,S),x+=S,A+=S),_+=y.m,x+=v.m,b+=m.m,A+=p.m;y&&!nextRight(p)&&(p.t=y,p.m+=_-A),v&&!nextLeft(m)&&(m.t=v,m.m+=x-b,g=f)}return g}function u(f){f.x*=r,f.y=f.depth*e}return o.separation=function(f){return arguments.length?(n=f,o):n},o.size=function(f){return arguments.length?(a=!1,r=+f[0],e=+f[1],o):a?null:[r,e]},o.nodeSize=function(f){return arguments.length?(a=!0,r=+f[0],e=+f[1],o):a?[r,e]:null},o}function treemapSlice(n,r,e,a,o){for(var s=n.children,l,c=-1,u=s.length,f=n.value&&(o-e)/n.value;++c<u;)l=s[c],l.x0=r,l.x1=a,l.y0=e,l.y1=e+=l.value*f}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(n,r,e,a,o,s){for(var l=[],c=r.children,u,f,d=0,g=0,v=c.length,p,y,m=r.value,x,A,_,b,S,C,E;d<v;){p=o-e,y=s-a;do x=c[g++].value;while(!x&&g<v);for(A=_=x,C=Math.max(y/p,p/y)/(m*n),E=x*x*C,S=Math.max(_/E,E/A);g<v;++g){if(x+=f=c[g].value,f<A&&(A=f),f>_&&(_=f),E=x*x*C,b=Math.max(_/E,E/A),b>S){x-=f;break}S=b}l.push(u={value:x,dice:p<y,children:c.slice(d,g)}),u.dice?treemapDice(u,e,a,o,m?a+=y*x/m:s):treemapSlice(u,e,a,m?e+=p*x/m:o,s),m-=x,d=g}return l}const squarify=function n(r){function e(a,o,s,l,c){squarifyRatio(r,a,o,s,l,c)}return e.ratio=function(a){return n((a=+a)>1?a:1)},e}(phi);function index(){var n=squarify,r=!1,e=1,a=1,o=[0],s=constantZero,l=constantZero,c=constantZero,u=constantZero,f=constantZero;function d(v){return v.x0=v.y0=0,v.x1=e,v.y1=a,v.eachBefore(g),o=[0],r&&v.eachBefore(roundNode),v}function g(v){var p=o[v.depth],y=v.x0+p,m=v.y0+p,x=v.x1-p,A=v.y1-p;x<y&&(y=x=(y+x)/2),A<m&&(m=A=(m+A)/2),v.x0=y,v.y0=m,v.x1=x,v.y1=A,v.children&&(p=o[v.depth+1]=s(v)/2,y+=f(v)-p,m+=l(v)-p,x-=c(v)-p,A-=u(v)-p,x<y&&(y=x=(y+x)/2),A<m&&(m=A=(m+A)/2),n(v,y,m,x,A))}return d.round=function(v){return arguments.length?(r=!!v,d):r},d.size=function(v){return arguments.length?(e=+v[0],a=+v[1],d):[e,a]},d.tile=function(v){return arguments.length?(n=required(v),d):n},d.padding=function(v){return arguments.length?d.paddingInner(v).paddingOuter(v):d.paddingInner()},d.paddingInner=function(v){return arguments.length?(s=typeof v=="function"?v:constant$1(+v),d):s},d.paddingOuter=function(v){return arguments.length?d.paddingTop(v).paddingRight(v).paddingBottom(v).paddingLeft(v):d.paddingTop()},d.paddingTop=function(v){return arguments.length?(l=typeof v=="function"?v:constant$1(+v),d):l},d.paddingRight=function(v){return arguments.length?(c=typeof v=="function"?v:constant$1(+v),d):c},d.paddingBottom=function(v){return arguments.length?(u=typeof v=="function"?v:constant$1(+v),d):u},d.paddingLeft=function(v){return arguments.length?(f=typeof v=="function"?v:constant$1(+v),d):f},d}function binary(n,r,e,a,o){var s=n.children,l,c=s.length,u,f=new Array(c+1);for(f[0]=u=l=0;l<c;++l)f[l+1]=u+=s[l].value;d(0,c,n.value,r,e,a,o);function d(g,v,p,y,m,x,A){if(g>=v-1){var _=s[g];_.x0=y,_.y0=m,_.x1=x,_.y1=A;return}for(var b=f[g],S=p/2+b,C=g+1,E=v-1;C<E;){var T=C+E>>>1;f[T]<S?C=T+1:E=T}S-f[C-1]<f[C]-S&&g+1<C&&--C;var w=f[C]-b,L=p-w;if(x-y>A-m){var M=p?(y*L+x*w)/p:x;d(g,C,w,y,m,M,A),d(C,v,L,M,m,x,A)}else{var O=p?(m*L+A*w)/p:A;d(g,C,w,y,m,x,O),d(C,v,L,y,O,x,A)}}}function sliceDice(n,r,e,a,o){(n.depth&1?treemapSlice:treemapDice)(n,r,e,a,o)}const resquarify=function n(r){function e(a,o,s,l,c){if((u=a._squarify)&&u.ratio===r)for(var u,f,d,g,v=-1,p,y=u.length,m=a.value;++v<y;){for(f=u[v],d=f.children,g=f.value=0,p=d.length;g<p;++g)f.value+=d[g].value;f.dice?treemapDice(f,o,s,l,m?s+=(c-s)*f.value/m:c):treemapSlice(f,o,s,m?o+=(l-o)*f.value/m:l,c),m-=f.value}else a._squarify=u=squarifyRatio(r,a,o,s,l,c),u.ratio=r}return e.ratio=function(a){return n((a=+a)>1?a:1)},e}(phi),d3Hierarchy=Object.freeze(Object.defineProperty({__proto__:null,cluster,hierarchy,pack:index$1,packEnclose:enclose,packSiblings:siblings,partition:partition$1,stratify,tree,treemap:index,treemapBinary:binary,treemapDice,treemapResquarify:resquarify,treemapSlice,treemapSliceDice:sliceDice,treemapSquarify:squarify},Symbol.toStringTag,{value:"Module"}));var NODE_INDEX_FIELD="nodeIndex",CHILD_NODE_COUNT="childNodeCount",NODE_ANCESTORS_FIELD="nodeAncestor",INVALID_FIELD_ERR_MSG="Invalid field: it must be a string!";function getField(n,r){var e=n.field,a=n.fields;if(isString$1(e))return e;if(isArray$4(e))return console.warn(INVALID_FIELD_ERR_MSG),e[0];if(console.warn("".concat(INVALID_FIELD_ERR_MSG," will try to get fields instead.")),isString$1(a))return a;if(isArray$4(a)&&a.length)return a[0];if(r)return r;throw new TypeError(INVALID_FIELD_ERR_MSG)}function getAllNodes(n){var r=[];if(n&&n.each){var e,a;n.each(function(o){var s,l;o.parent!==e?(e=o.parent,a=0):a+=1;var c=filter((((s=o.ancestors)===null||s===void 0?void 0:s.call(o))||[]).map(function(u){return r.find(function(f){return f.name===u.name})||u}),function(u){var f=u.depth;return f>0&&f<o.depth});o[NODE_ANCESTORS_FIELD]=c,o[CHILD_NODE_COUNT]=((l=o.children)===null||l===void 0?void 0:l.length)||0,o[NODE_INDEX_FIELD]=a,r.push(o)})}else n&&n.eachNode&&n.eachNode(function(o){r.push(o)});return r}var DEFAULT_OPTIONS$f={field:"value",as:["x","y","r"],sort:function(n,r){return r.value-n.value}};function pack(n,r){r=mix({},DEFAULT_OPTIONS$f,r);var e=r.as;if(!isArray$4(e)||e.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var a;try{a=getField(r)}catch(f){console.warn(f)}var o=function(f){return index$1().size(r.size).padding(r.padding)(hierarchy(f).sum(function(d){return d[a]}).sort(r.sort))},s=o(n),l=e[0],c=e[1],u=e[2];return s.each(function(f){f[l]=f.x,f[c]=f.y,f[u]=f.r}),getAllNodes(s)}function transformData$3(n){var r=n.data,e=n.hierarchyConfig,a=n.rawFields,o=a===void 0?[]:a,s=n.enableDrillDown,l=pack(r,__assign$8(__assign$8({},e),{field:"value",as:["x","y","r"]})),c=[];return l.forEach(function(u){for(var f,d=u.data.name,g=__assign$8({},u);g.depth>1;)d="".concat((f=g.parent.data)===null||f===void 0?void 0:f.name," / ").concat(d),g=g.parent;if(s&&u.depth>2)return null;var v=deepAssign({},u.data,__assign$8(__assign$8(__assign$8({},pick(u.data,o)),{path:d}),u));v.ext=e,v[HIERARCHY_DATA_TRANSFORM_PARAMS]={hierarchyConfig:e,rawFields:o,enableDrillDown:s},c.push(v)}),c}function resolvePaddingForCircle(n,r,e){var a=resolveAllPadding([n,r]),o=a[0],s=a[1],l=a[2],c=a[3],u=e.width,f=e.height,d=u-(c+s),g=f-(o+l),v=Math.min(d,g),p=(d-v)/2,y=(g-v)/2,m=o+y,x=s+p,A=l+y,_=c+p,b=[m,x,A,_],S=v<0?0:v;return{finalPadding:b,finalSize:S}}function defaultOptions$3(n){var r=n.chart,e=Math.min(r.viewBBox.width,r.viewBBox.height);return deepAssign({options:{size:function(a){var o=a.r;return o*e}}},n)}function padding$1(n){var r=n.options,e=n.chart,a=e.viewBBox,o=r.padding,s=r.appendPadding,l=r.drilldown,c=s;if(l!=null&&l.enabled){var u=getAdjustAppendPadding(e.appendPadding,get(l,["breadCrumb","position"]));c=resolveAllPadding([u,s])}var f=resolvePaddingForCircle(o,c,a).finalPadding;return e.padding=f,e.appendPadding=0,n}function geometry$c(n){var r=n.chart,e=n.options,a=r.padding,o=r.appendPadding,s=e.color,l=e.colorField,c=e.pointStyle,u=e.hierarchyConfig,f=e.sizeField,d=e.rawFields,g=d===void 0?[]:d,v=e.drilldown,p=transformData$3({data:e.data,hierarchyConfig:u,enableDrillDown:v==null?void 0:v.enabled,rawFields:g});r.data(p);var y=r.viewBBox,m=resolvePaddingForCircle(a,o,y).finalSize,x=function(A){var _=A.r;return _*m};return f&&(x=function(A){return A[f]*m}),point(deepAssign({},n,{options:{xField:"x",yField:"y",seriesField:l,sizeField:f,rawFields:__spreadArray$2(__spreadArray$2([],RAW_FIELDS$1,!0),g,!0),point:{color:s,style:c,shape:"circle",size:x}}})),n}function meta$9(n){return flow(scale$2({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(n)}function tooltip$3(n){var r=n.chart,e=n.options,a=e.tooltip;if(a===!1)r.tooltip(!1);else{var o=a;get(a,"fields")||(o=deepAssign({},{customItems:function(s){return s.map(function(l){var c=get(r.getOptions(),"scales"),u=get(c,["name","formatter"],function(d){return d}),f=get(c,["value","formatter"],function(d){return d});return __assign$8(__assign$8({},l),{name:u(l.data.name),value:f(l.data.value)})})}},o)),r.tooltip(o)}return n}function axis$a(n){var r=n.chart;return r.axis(!1),n}function adaptorInteraction$2(n){var r=n.drilldown,e=n.interactions,a=e===void 0?[]:e;return r!=null&&r.enabled?deepAssign({},n,{interactions:__spreadArray$2(__spreadArray$2([],a,!0),[{type:"drill-down",cfg:{drillDownConfig:r,transformData:transformData$3,enableDrillDown:!0}}],!1)}):n}function interaction$4(n){var r=n.chart,e=n.options;return interaction$8({chart:r,options:adaptorInteraction$2(e)}),n}function adaptor$e(n){return flow(pattern("pointStyle"),defaultOptions$3,padding$1,theme$2,meta$9,geometry$c,axis$a,legend$g,tooltip$3,interaction$4,animation$5,annotation$2())(n)}function isParentNode(n){var r=get(n,["event","data","data"],{});return isArray$4(r.children)&&r.children.length>0}function inCenter(n){var r=n.view.getCoordinate(),e=r.innerRadius;if(e){var a=n.event,o=a.x,s=a.y,l=r.center,c=l.x,u=l.y,f=r.getRadius()*e,d=Math.sqrt(Math.pow(c-o,2)+Math.pow(u-s,2));return d<f}return!1}registerAction("drill-down-action",DrillDownAction);registerInteraction("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:isParentNode},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:inCenter}],start:[{trigger:"element:click",isEnable:isParentNode,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:inCenter,action:["drill-down-action:back"]}]});(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="circle-packing",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$g},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$e},r.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},r})(Plot);var LEFT_AXES_VIEW="left-axes-view",RIGHT_AXES_VIEW="right-axes-view",DEFAULT_YAXIS_CONFIG={nice:!0,label:{autoHide:!0,autoRotate:!1}},DEFAULT_LEFT_YAXIS_CONFIG=__assign$8(__assign$8({},DEFAULT_YAXIS_CONFIG),{position:"left"}),DEFAULT_RIGHT_YAXIS_CONFIG=__assign$8(__assign$8({},DEFAULT_YAXIS_CONFIG),{position:"right",grid:null}),AxisType;(function(n){n.Left="Left",n.Right="Right"})(AxisType||(AxisType={}));var DualAxesGeometry;(function(n){n.Line="line",n.Column="column"})(DualAxesGeometry||(DualAxesGeometry={}));function isLine(n){return get(n,"geometry")===DualAxesGeometry.Line}function isColumn(n){return get(n,"geometry")===DualAxesGeometry.Column}function getGeometryOption(n,r,e){return isColumn(e)?deepAssign({},{geometry:DualAxesGeometry.Column,label:e.label&&e.isRange?{content:function(a){var o;return(o=a[r])===null||o===void 0?void 0:o.join("-")}}:void 0},e):__assign$8({geometry:DualAxesGeometry.Line},e)}function transformObjectToArray(n,r){var e=n[0],a=n[1];if(isArray$4(r)){var o=r[0],s=r[1];return[o,s]}var l=get(r,e),c=get(r,a);return[l,c]}function getYAxisWithDefault(n,r){return r===AxisType.Left?n===!1?!1:deepAssign({},DEFAULT_LEFT_YAXIS_CONFIG,n):r===AxisType.Right?n===!1?!1:deepAssign({},DEFAULT_RIGHT_YAXIS_CONFIG,n):n}function drawSingleGeometry(n){var r=n.options,e=n.chart,a=r.geometryOption,o=a.isStack,s=a.color,l=a.seriesField,c=a.groupField,u=a.isGroup,f=["xField","yField"];if(isLine(a)){line(deepAssign({},n,{options:__assign$8(__assign$8(__assign$8({},pick(r,f)),a),{line:{color:a.color,style:a.lineStyle}})})),point(deepAssign({},n,{options:__assign$8(__assign$8(__assign$8({},pick(r,f)),a),{point:a.point&&__assign$8({color:s,shape:"circle"},a.point)})}));var d=[];u&&d.push({type:"dodge",dodgeBy:c||l,customOffset:0}),o&&d.push({type:"stack"}),d.length&&each$1(e.geometries,function(g){g.adjust(d)})}return isColumn(a)&&adaptor$w(deepAssign({},n,{options:__assign$8(__assign$8(__assign$8({},pick(r,f)),a),{widthRatio:a.columnWidthRatio,interval:__assign$8(__assign$8({},pick(a,["color"])),{style:a.columnStyle})})})),n}function getViewLegendItems(n){var r=n.view,e=n.geometryOption,a=n.yField,o=n.legend,s=get(o,"marker"),l=findGeometry(r,isLine(e)?"line":"interval");if(!e.seriesField){var c=get(r,"options.scales.".concat(a,".alias"))||a,u=l.getAttribute("color"),f=r.getTheme().defaultColor;u&&(f=Util.getMappingValue(u,c,get(u,["values",0],f)));var d=(isFunction$1(s)?s:!isEmpty(s)&&deepAssign({},{style:{stroke:f,fill:f}},s))||(isLine(e)?{symbol:function(v,p,y){return[["M",v-y,p],["L",v+y,p]]},style:{lineWidth:2,r:6,stroke:f}}:{symbol:"square",style:{fill:f}});return[{value:a,name:c,marker:d,isGeometry:!0,viewId:r.id}]}var g=l.getGroupAttributes();return reduce(g,function(v,p){var y=Util.getLegendItems(r,l,p,r.getTheme(),s);return v.concat(y)},[])}var doSliderFilter=function(n,r){var e=r[0],a=r[1],o=n.getOptions().data,s=n.getXScale(),l=size(o);if(!(!s||!l)){var c=valuesOfKey(o,s.field),u=c,f=size(u),d=Math.floor(e*(f-1)),g=Math.floor(a*(f-1));n.filter(s.field,function(v){var p=u.indexOf(v);return p>-1?isBetween(p,d,g):!0}),n.getRootView().render(!0)}};function transformOptions(n){var r,e=n.options,a=e.geometryOptions,o=a===void 0?[]:a,s=e.xField,l=e.yField,c=every(o,function(u){var f=u.geometry;return f===DualAxesGeometry.Line||f===void 0});return deepAssign({},{options:{geometryOptions:[],meta:(r={},r[s]={type:"cat",sync:!0,range:c?[0,1]:void 0},r),tooltip:{showMarkers:c,showCrosshairs:c,shared:!0,crosshairs:{type:"x"}},interactions:c?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},n,{options:{yAxis:transformObjectToArray(l,e.yAxis),geometryOptions:[getGeometryOption(s,l[0],o[0]),getGeometryOption(s,l[1],o[1])],annotations:transformObjectToArray(l,e.annotations)}})}function createViews(n){var r,e,a=n.chart,o=n.options,s=o.geometryOptions,l={line:0,column:1},c=[{type:(r=s[0])===null||r===void 0?void 0:r.geometry,id:LEFT_AXES_VIEW},{type:(e=s[1])===null||e===void 0?void 0:e.geometry,id:RIGHT_AXES_VIEW}];return c.sort(function(u,f){return-l[u.type]+l[f.type]}).forEach(function(u){return a.createView({id:u.id})}),n}function geometry$b(n){var r=n.chart,e=n.options,a=e.xField,o=e.yField,s=e.geometryOptions,l=e.data,c=e.tooltip,u=[__assign$8(__assign$8({},s[0]),{id:LEFT_AXES_VIEW,data:l[0],yField:o[0]}),__assign$8(__assign$8({},s[1]),{id:RIGHT_AXES_VIEW,data:l[1],yField:o[1]})];return u.forEach(function(f){var d=f.id,g=f.data,v=f.yField,p=isColumn(f)&&f.isPercent,y=p?percent(g,v,a,v):g,m=findViewById(r,d).data(y),x=p?__assign$8({formatter:function(A){return{name:A[f.seriesField]||v,value:(Number(A[v])*100).toFixed(2)+"%"}}},c):c;drawSingleGeometry({chart:m,options:{xField:a,yField:v,tooltip:x,geometryOption:f}})}),n}function color(n){var r,e=n.chart,a=n.options,o=a.geometryOptions,s=((r=e.getTheme())===null||r===void 0?void 0:r.colors10)||[],l=0;return e.once("beforepaint",function(){each$1(o,function(c,u){var f=findViewById(e,u===0?LEFT_AXES_VIEW:RIGHT_AXES_VIEW);if(!c.color){var d=f.getGroupScales(),g=get(d,[0,"values","length"],1),v=s.slice(l,l+g).concat(u===0?[]:s);f.geometries.forEach(function(p){c.seriesField?p.color(c.seriesField,v):p.color(v[0])}),l+=g}}),e.render(!0)}),n}function meta$8(n){var r,e,a=n.chart,o=n.options,s=o.xAxis,l=o.yAxis,c=o.xField,u=o.yField;return scale$2((r={},r[c]=s,r[u[0]]=l[0],r))(deepAssign({},n,{chart:findViewById(a,LEFT_AXES_VIEW)})),scale$2((e={},e[c]=s,e[u[1]]=l[1],e))(deepAssign({},n,{chart:findViewById(a,RIGHT_AXES_VIEW)})),n}function axis$9(n){var r=n.chart,e=n.options,a=findViewById(r,LEFT_AXES_VIEW),o=findViewById(r,RIGHT_AXES_VIEW),s=e.xField,l=e.yField,c=e.xAxis,u=e.yAxis;return r.axis(s,!1),r.axis(l[0],!1),r.axis(l[1],!1),a.axis(s,c),a.axis(l[0],getYAxisWithDefault(u[0],AxisType.Left)),o.axis(s,!1),o.axis(l[1],getYAxisWithDefault(u[1],AxisType.Right)),n}function tooltip$2(n){var r=n.chart,e=n.options,a=e.tooltip,o=findViewById(r,LEFT_AXES_VIEW),s=findViewById(r,RIGHT_AXES_VIEW);return r.tooltip(a),o.tooltip({shared:!0}),s.tooltip({shared:!0}),n}function interaction$3(n){var r=n.chart;return interaction$8(deepAssign({},n,{chart:findViewById(r,LEFT_AXES_VIEW)})),interaction$8(deepAssign({},n,{chart:findViewById(r,RIGHT_AXES_VIEW)})),n}function annotation$1(n){var r=n.chart,e=n.options,a=e.annotations,o=get(a,[0]),s=get(a,[1]);return annotation$2(o)(deepAssign({},n,{chart:findViewById(r,LEFT_AXES_VIEW),options:{annotations:o}})),annotation$2(s)(deepAssign({},n,{chart:findViewById(r,RIGHT_AXES_VIEW),options:{annotations:s}})),n}function theme(n){var r=n.chart;return theme$2(deepAssign({},n,{chart:findViewById(r,LEFT_AXES_VIEW)})),theme$2(deepAssign({},n,{chart:findViewById(r,RIGHT_AXES_VIEW)})),theme$2(n),n}function animation$2(n){var r=n.chart;return animation$5(deepAssign({},n,{chart:findViewById(r,LEFT_AXES_VIEW)})),animation$5(deepAssign({},n,{chart:findViewById(r,RIGHT_AXES_VIEW)})),n}function limitInPlot(n){var r=n.chart,e=n.options,a=e.yAxis;return limitInPlot$2(deepAssign({},n,{chart:findViewById(r,LEFT_AXES_VIEW),options:{yAxis:a[0]}})),limitInPlot$2(deepAssign({},n,{chart:findViewById(r,RIGHT_AXES_VIEW),options:{yAxis:a[1]}})),n}function legend$6(n){var r=n.chart,e=n.options,a=e.legend,o=e.geometryOptions,s=e.yField,l=e.data,c=findViewById(r,LEFT_AXES_VIEW),u=findViewById(r,RIGHT_AXES_VIEW);if(a===!1)r.legend(!1);else if(isObject$1(a)&&a.custom===!0)r.legend(a);else{var f=get(o,[0,"legend"],a),d=get(o,[1,"legend"],a);r.once("beforepaint",function(){var g=l[0].length?getViewLegendItems({view:c,geometryOption:o[0],yField:s[0],legend:f}):[],v=l[1].length?getViewLegendItems({view:u,geometryOption:o[1],yField:s[1],legend:d}):[];r.legend(deepAssign({},a,{custom:!0,items:g.concat(v)}))}),o[0].seriesField&&c.legend(o[0].seriesField,f),o[1].seriesField&&u.legend(o[1].seriesField,d),r.on("legend-item:click",function(g){var v=get(g,"gEvent.delegateObject",{});if(v&&v.item){var p=v.item,y=p.value,m=p.isGeometry,x=p.viewId;if(m){var A=findIndex$1(s,function(S){return S===y});if(A>-1){var _=get(findViewById(r,x),"geometries");each$1(_,function(S){S.changeVisible(!v.item.unchecked)})}}else{var b=get(r.getController("legend"),"option.items",[]);each$1(r.views,function(S){var C=S.getGroupScales();each$1(C,function(E){E.values&&E.values.indexOf(y)>-1&&S.filter(E.field,function(T){var w=find$2(b,function(L){return L.value===T});return!w.unchecked})}),r.render(!0)})}}})}return n}function slider(n){var r=n.chart,e=n.options,a=e.slider,o=findViewById(r,LEFT_AXES_VIEW),s=findViewById(r,RIGHT_AXES_VIEW);return a&&(o.option("slider",a),o.on("slider:valuechanged",function(l){var c=l.event,u=c.value,f=c.originValue;isEqual$1(u,f)||doSliderFilter(s,u)}),r.once("afterpaint",function(){if(!isBoolean(a)){var l=a.start,c=a.end;(l||c)&&doSliderFilter(s,[l,c])}})),n}function adaptor$d(n){return flow(transformOptions,createViews,theme,geometry$b,meta$8,axis$9,limitInPlot,tooltip$2,interaction$3,annotation$1,animation$2,color,legend$6,slider)(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dual-axes",e}return r.prototype.getDefaultOptions=function(){return deepAssign({},n.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},r.prototype.getSchemaAdaptor=function(){return adaptor$d},r})(Plot);function execViewAdaptor(n,r){var e=r.data,a=r.coordinate,o=r.interactions,s=r.annotations,l=r.animation,c=r.tooltip,u=r.axes,f=r.meta,d=r.geometries;e&&n.data(e);var g={};u&&each$1(u,function(v,p){g[p]=pick(v,AXIS_META_CONFIG_KEYS)}),g=deepAssign({},f,g),n.scale(g),a&&n.coordinate(a),u===!1?n.axis(!1):each$1(u,function(v,p){n.axis(p,v)}),each$1(d,function(v){var p=geometry$x({chart:n,options:v}).ext,y=v.adjust;y&&p.geometry.adjust(y)}),each$1(o,function(v){v.enable===!1?n.removeInteraction(v.type):n.interaction(v.type,v.cfg)}),each$1(s,function(v){n.annotation()[v.type](__assign$8({},v))}),addViewAnimation(n,l),c?(n.interaction("tooltip"),n.tooltip(c)):c===!1&&n.removeInteraction("tooltip")}function facetAdaptor(n){var r=n.chart,e=n.options,a=e.type,o=e.data,s=e.fields,l=e.eachView,c=omit$1(e,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return r.data(o),r.facet(a,__assign$8(__assign$8({},c),{fields:s,eachView:function(u,f){var d=l(u,f);if(d.geometries)execViewAdaptor(u,d);else{var g=d,v=g.options;v.tooltip&&u.interaction("tooltip"),execPlotAdaptor(g.type,u,v)}}})),n}function component(n){var r=n.chart,e=n.options,a=e.axes,o=e.meta,s=e.tooltip,l=e.coordinate,c=e.theme,u=e.legend,f=e.interactions,d=e.annotations,g={};return a&&each$1(a,function(v,p){g[p]=pick(v,AXIS_META_CONFIG_KEYS)}),g=deepAssign({},o,g),r.scale(g),r.coordinate(l),a?each$1(a,function(v,p){r.axis(p,v)}):r.axis(!1),s?(r.interaction("tooltip"),r.tooltip(s)):s===!1&&r.removeInteraction("tooltip"),r.legend(u),c&&r.theme(c),each$1(f,function(v){v.enable===!1?r.removeInteraction(v.type):r.interaction(v.type,v.cfg)}),each$1(d,function(v){r.annotation()[v.type](__assign$8({},v))}),n}function adaptor$c(n){return flow(theme$2,facetAdaptor,component)(n)}var DEFAULT_OPTIONS$e={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="area",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$e},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$c},r})(Plot);function geometry$a(n){var r=n.chart,e=n.options,a=e.data,o=e.type,s=e.xField,l=e.yField,c=e.colorField,u=e.sizeField,f=e.sizeRatio,d=e.shape,g=e.color,v=e.tooltip,p=e.heatmapStyle,y=e.meta;r.data(a);var m="polygon";o==="density"&&(m="heatmap");var x=getTooltipMapping(v,[s,l,c]),A=x.fields,_=x.formatter,b=1;return(f||f===0)&&(!d&&!u?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):f<0||f>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):b=f),geometry$x(deepAssign({},n,{options:{type:m,colorField:c,tooltipFields:A,shapeField:u||"",label:void 0,mapping:{tooltip:_,shape:d&&(u?function(S){var C=a.map(function(L){return L[u]}),E=(y==null?void 0:y[u])||{},T=E.min,w=E.max;return T=isNumber$2(T)?T:Math.min.apply(Math,C),w=isNumber$2(w)?w:Math.max.apply(Math,C),[d,(get(S,u)-T)/(w-T),b]}:function(){return[d,1,b]}),color:g||c&&r.getTheme().sequenceColors.join("-"),style:p}}})),n}function meta$7(n){var r,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return flow(scale$2((r={},r[s]=a,r[l]=o,r)))(n)}function axis$8(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return a===!1?r.axis(s,!1):r.axis(s,a),o===!1?r.axis(l,!1):r.axis(l,o),n}function legend$5(n){var r=n.chart,e=n.options,a=e.legend,o=e.colorField,s=e.sizeField,l=e.sizeLegend,c=a!==!1;return o&&r.legend(o,c?a:!1),s&&r.legend(s,l===void 0?a:l),!c&&!l&&r.legend(!1),n}function label$6(n){var r=n.chart,e=n.options,a=e.label,o=e.colorField,s=e.type,l=findGeometry(r,s==="density"?"heatmap":"polygon");if(!a)l.label(!1);else if(o){var c=a.callback,u=__rest$1(a,["callback"]);l.label({fields:[o],callback:c,cfg:transformLabel(u)})}return n}function coordinate$3(n){var r,e,a=n.chart,o=n.options,s=o.coordinate,l=o.reflect,c=deepAssign({actions:[]},s??{type:"rect"});return l&&((e=(r=c.actions)===null||r===void 0?void 0:r.push)===null||e===void 0||e.call(r,["reflect",l])),a.coordinate(c),n}function adaptor$b(n){return flow(theme$2,pattern("heatmapStyle"),meta$7,coordinate$3,geometry$a,axis$8,legend$5,tooltip$9,label$6,annotation$2(),interaction$8,animation$5,state)(n)}var DEFAULT_OPTIONS$d=deepAssign({},Plot.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});registerShape("polygon","circle",{draw:function(n,r){var e,a,o=n.x,s=n.y,l=this.parsePoints(n.points),c=Math.abs(l[2].x-l[1].x),u=Math.abs(l[1].y-l[0].y),f=Math.min(c,u)/2,d=Number(n.shape[1]),g=Number(n.shape[2]),v=Math.sqrt(g),p=f*v*Math.sqrt(d),y=((e=n.style)===null||e===void 0?void 0:e.fill)||n.color||((a=n.defaultStyle)===null||a===void 0?void 0:a.fill),m=r.addShape("circle",{attrs:__assign$8(__assign$8(__assign$8({x:o,y:s,r:p},n.defaultStyle),n.style),{fill:y})});return m}});registerShape("polygon","square",{draw:function(n,r){var e,a,o=n.x,s=n.y,l=this.parsePoints(n.points),c=Math.abs(l[2].x-l[1].x),u=Math.abs(l[1].y-l[0].y),f=Math.min(c,u),d=Number(n.shape[1]),g=Number(n.shape[2]),v=Math.sqrt(g),p=f*v*Math.sqrt(d),y=((e=n.style)===null||e===void 0?void 0:e.fill)||n.color||((a=n.defaultStyle)===null||a===void 0?void 0:a.fill),m=r.addShape("rect",{attrs:__assign$8(__assign$8(__assign$8({x:o-p/2,y:s-p/2,width:p,height:p},n.defaultStyle),n.style),{fill:y})});return m}});(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="heatmap",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$d},r.prototype.getSchemaAdaptor=function(){return adaptor$b},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r})(Plot);var CAT_VALUE="liquid";function getLiquidData(n){return[{percent:n,type:CAT_VALUE}]}function geometry$9(n){var r=n.chart,e=n.options,a=e.percent,o=e.liquidStyle,s=e.radius,l=e.outline,c=e.wave,u=e.shape,f=e.shapeStyle,d=e.animation;r.scale({percent:{min:0,max:1}}),r.data(getLiquidData(a));var g=e.color||r.getTheme().defaultColor,v=deepAssign({},n,{options:{xField:"type",yField:"percent",widthRatio:s,interval:{color:g,style:o,shape:"liquid-fill-gauge"}}}),p=interval(v).ext,y=p.geometry,m=r.getTheme().background,x={percent:a,radius:s,outline:l,wave:c,shape:u,shapeStyle:f,background:m,animation:d};return y.customInfo(x),r.legend(!1),r.axis(!1),r.tooltip(!1),n}function statistic(n,r){var e=n.chart,a=n.options,o=a.statistic,s=a.percent,l=a.meta;e.getController("annotation").clear(!0);var c=get(l,["percent","formatter"])||function(f){return"".concat((f*100).toFixed(2),"%")},u=o.content;return u&&(u=deepAssign({},u,{content:isNil(u.content)?c(s):u.content})),renderStatistic(e,{statistic:__assign$8(__assign$8({},o),{content:u}),plotType:"liquid"},{percent:s}),r&&e.render(!0),n}function adaptor$a(n){return flow(theme$2,pattern("liquidStyle"),geometry$9,statistic,scale$2({}),animation$5,interaction$8)(n)}var DEFAULT_OPTIONS$c={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},DURATION=5e3;function lerp(n,r,e){return n+(r-n)*e}function getFillAttrs$2(n){var r=__assign$8({opacity:1},n.style);return n.color&&!r.fill&&(r.fill=n.color),r}function getLineAttrs(n){var r={fill:"#fff",fillOpacity:0,lineWidth:4},e=mix({},r,n.style);return n.color&&!e.stroke&&(e.stroke=n.color),isNumber$2(n.opacity)&&(e.opacity=e.strokeOpacity=n.opacity),e}function getWaterWavePositions(n,r,e,a){return r===0?[[n+1/2*e/Math.PI/2,a/2],[n+1/2*e/Math.PI,a],[n+e/4,a]]:r===1?[[n+1/2*e/Math.PI/2*(Math.PI-2),a],[n+1/2*e/Math.PI/2*(Math.PI-1),a/2],[n+e/4,0]]:r===2?[[n+1/2*e/Math.PI/2,-a/2],[n+1/2*e/Math.PI,-a],[n+e/4,-a]]:[[n+1/2*e/Math.PI/2*(Math.PI-2),-a],[n+1/2*e/Math.PI/2*(Math.PI-1),-a/2],[n+e/4,0]]}function getWaterWavePath(n,r,e,a,o,s,l){for(var c=Math.ceil(2*n/e*4)*4,u=[],f=a;f<-Math.PI*2;)f+=Math.PI*2;for(;f>0;)f-=Math.PI*2;f=f/Math.PI/2*e;var d=s-n+f-n*2;u.push(["M",d,r]);for(var g=0,v=0;v<c;++v){var p=v%4,y=getWaterWavePositions(v*e/4,p,e,o);u.push(["C",y[0][0]+d,-y[0][1]+r,y[1][0]+d,-y[1][1]+r,y[2][0]+d,-y[2][1]+r]),v===c-1&&(g=y[2][0])}return u.push(["L",g+d,l+n]),u.push(["L",d,l+n]),u.push(["Z"]),u}function addWaterWave(n,r,e,a,o,s,l,c,u,f){for(var d=o.fill,g=o.opacity,v=l.getBBox(),p=v.maxX-v.minX,y=v.maxY-v.minY,m=0;m<a;m++){var x=a<=1?1:m/(a-1),A=s.addShape("path",{name:"waterwave-path",attrs:{path:getWaterWavePath(c,v.minY+y*e,u,0,p/32,n,r),fill:d,opacity:lerp(.2,.9,x)*g}});try{if(f===!1)return;var _=transform$2([["t",u,0]]);A.stopAnimate(),A.animate({matrix:_},{duration:lerp(.5*DURATION,DURATION,x),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function pin(n,r,e,a){var o=e*2/3,s=Math.max(o,a),l=o/2,c=n,u=l+r-s/2,f=Math.asin(l/((s-l)*.85)),d=Math.sin(f)*l,g=Math.cos(f)*l,v=c-g,p=u+d,y=n,m=u+l/Math.sin(f);return`
      M `.concat(v," ").concat(p,`
      A `).concat(l," ").concat(l," 0 1 1 ").concat(v+g*2," ").concat(p,`
      Q `).concat(y," ").concat(m," ").concat(n," ").concat(r+s/2,`
      Q `).concat(y," ").concat(m," ").concat(v," ").concat(p,`
      Z 
    `)}function circle(n,r,e,a){var o=e/2,s=a/2;return`
      M `.concat(n," ").concat(r-s,` 
      a `).concat(o," ").concat(s," 0 1 0 0 ").concat(s*2,`
      a `).concat(o," ").concat(s," 0 1 0 0 ").concat(-s*2,`
      Z
    `)}function diamond(n,r,e,a){var o=a/2,s=e/2;return`
      M `.concat(n," ").concat(r-o,`
      L `).concat(n+s," ").concat(r,`
      L `).concat(n," ").concat(r+o,`
      L `).concat(n-s," ").concat(r,`
      Z
    `)}function triangle(n,r,e,a){var o=a/2,s=e/2;return`
      M `.concat(n," ").concat(r-o,`
      L `).concat(n+s," ").concat(r+o,`
      L `).concat(n-s," ").concat(r+o,`
      Z
    `)}function rect(n,r,e,a){var o=.618,s=a/2,l=e/2*o;return`
      M `.concat(n-l," ").concat(r-s,`
      L `).concat(n+l," ").concat(r-s,`
      L `).concat(n+l," ").concat(r+s,`
      L `).concat(n-l," ").concat(r+s,`
      Z
    `)}var builtInShapeByName={pin,circle,diamond,triangle,rect};registerShape("interval","liquid-fill-gauge",{draw:function(n,r){var e=.5,a=.5,o=n.customInfo,s=o,l=s.percent,c=s.radius,u=s.shape,f=s.shapeStyle,d=s.background,g=s.animation,v=o.outline,p=o.wave,y=v.border,m=v.distance,x=p.count,A=p.length,_=reduce(n.points,function(G,Y){return Math.min(G,Y.x)},1/0),b=this.parsePoint({x:e,y:a}),S=this.parsePoint({x:_,y:a}),C=b.x-S.x,E=Math.min(C,S.y*c),T=getFillAttrs$2(n),w=getLineAttrs(mix({},n,v)),L=E-y/2,M=typeof u=="function"?u:builtInShapeByName[u]||builtInShapeByName.circle,O=M(b.x,b.y,L*2,L*2);if(f&&r.addShape("path",{name:"shape",attrs:__assign$8({path:O},f)}),l>0){var P=r.addGroup({name:"waves"}),N=P.setClip({type:"path",attrs:{path:O}});addWaterWave(b.x,b.y,1-n.points[1].y,x,T,P,N,E*2,A,g)}return r.addShape("path",{name:"distance",attrs:{path:O,fill:"transparent",lineWidth:y+m*2,stroke:d==="transparent"?"#fff":d}}),r.addShape("path",{name:"wrap",attrs:mix(w,{path:O,fill:"transparent",lineWidth:y})}),r}});var Liquid=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="liquid",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$c},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.changeData=function(e){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(getLiquidData(e)),statistic({chart:this.chart,options:this.options},!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},r.prototype.getSchemaAdaptor=function(){return adaptor$a},r}(Plot);function geometry$8(n){var r=n.chart,e=n.options,a=e.data,o=e.lineStyle,s=e.color,l=e.point,c=e.area;r.data(a);var u=deepAssign({},n,{options:{line:{style:o,color:s},point:l&&__assign$8({color:s},l),area:c&&__assign$8({color:s},c),label:void 0}}),f=deepAssign({},u,{options:{tooltip:!1}}),d=(l==null?void 0:l.state)||e.state,g=deepAssign({},u,{options:{tooltip:!1,state:d}});return line(u),point(g),area(f),n}function meta$6(n){var r,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return flow(scale$2((r={},r[s]=a,r[l]=o,r)))(n)}function coord(n){var r=n.chart,e=n.options,a=e.radius,o=e.startAngle,s=e.endAngle;return r.coordinate("polar",{radius:a,startAngle:o,endAngle:s}),n}function axis$7(n){var r=n.chart,e=n.options,a=e.xField,o=e.xAxis,s=e.yField,l=e.yAxis;return r.axis(a,o),r.axis(s,l),n}function label$5(n){var r=n.chart,e=n.options,a=e.label,o=e.yField,s=findGeometry(r,"line");if(!a)s.label(!1);else{var l=a.callback,c=__rest$1(a,["callback"]);s.label({fields:[o],callback:l,cfg:transformLabel(c)})}return n}function adaptor$9(n){return flow(geometry$8,meta$6,theme$2,coord,axis$7,legend$g,tooltip$9,label$5,interaction$8,animation$5,annotation$2())(n)}var RadarTooltipController=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),r.prototype.getTooltipItems=function(e){var a=this.getTooltipCfg(),o=a.shared,s=a.title,l=n.prototype.getTooltipItems.call(this,e);if(l.length>0){var c=this.view.geometries[0],u=c.dataArray,f=l[0].name,d=[];return u.forEach(function(g){g.forEach(function(v){var p=Util.getTooltipItems(v,c),y=p[0];if(!o&&y&&y.name===f){var m=isNil(s)?f:s;d.push(__assign$8(__assign$8({},y),{name:y.title,title:m}))}else if(o&&y){var m=isNil(s)?y.name||f:s;d.push(__assign$8(__assign$8({},y),{name:y.title,title:m}))}})}),d}return[]},r}(Tooltip);registerComponentController("radar-tooltip",RadarTooltipController);var RadarTooltipAction=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){var e=this.context.view;e.removeInteraction("tooltip")},r.prototype.show=function(){var e=this.context.event,a=this.getTooltipController();a.showTooltip({x:e.x,y:e.y})},r.prototype.hide=function(){var e=this.getTooltipController();e.hideTooltip()},r.prototype.getTooltipController=function(){var e=this.context.view;return e.getController("radar-tooltip")},r}(Action);registerAction("radar-tooltip",RadarTooltipAction);registerInteraction("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var Radar=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="radar",e}return r.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},r.prototype.getDefaultOptions=function(){return deepAssign({},n.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},r.prototype.getSchemaAdaptor=function(){return adaptor$9},r}(Plot);function getScaleMax(n,r,e){var a=e.map(function(l){return l[r]}).filter(function(l){return l!==void 0}),o=a.length>0?Math.max.apply(Math,a):0,s=Math.abs(n)%360;return s?o*360/s:o}function getStackedData(n,r,e){var a=[];return n.forEach(function(o){var s=a.find(function(l){return l[r]===o[r]});s?s[e]+=o[e]||null:a.push(__assign$8({},o))}),a}function geometry$7(n){var r=n.chart,e=n.options,a=e.barStyle,o=e.color,s=e.tooltip,l=e.colorField,c=e.type,u=e.xField,f=e.yField,d=e.data,g=e.shape,v=processIllegalData(d,f);r.data(v);var p=deepAssign({},n,{options:{tooltip:s,seriesField:l,interval:{style:a,color:o,shape:g||(c==="line"?"line":"intervel")},minColumnWidth:e.minBarWidth,maxColumnWidth:e.maxBarWidth,columnBackground:e.barBackground}});return interval(p),c==="line"&&point({chart:r,options:{xField:u,yField:f,seriesField:l,point:{shape:"circle",color:o}}}),n}function meta$5(n){var r,e=n.options,a=e.yField,o=e.xField,s=e.data,l=e.isStack,c=e.isGroup,u=e.colorField,f=e.maxAngle,d=l&&!c&&u?getStackedData(s,o,a):s,g=processIllegalData(d,a);return flow(scale$2((r={},r[a]={min:0,max:getScaleMax(f,a,g)},r)))(n)}function coordinate$2(n){var r=n.chart,e=n.options,a=e.radius,o=e.innerRadius,s=e.startAngle,l=e.endAngle;return r.coordinate({type:"polar",cfg:{radius:a,innerRadius:o,startAngle:s,endAngle:l}}).transpose(),n}function axis$6(n){var r=n.chart,e=n.options,a=e.xField,o=e.xAxis;return r.axis(a,o),n}function label$4(n){var r=n.chart,e=n.options,a=e.label,o=e.yField,s=findGeometry(r,"interval");if(!a)s.label(!1);else{var l=a.callback,c=__rest$1(a,["callback"]);s.label({fields:[o],callback:l,cfg:__assign$8(__assign$8({},transformLabel(c)),{type:"polar"})})}return n}function adaptor$8(n){return flow(pattern("barStyle"),geometry$7,meta$5,axis$6,coordinate$2,interaction$8,animation$5,theme$2,tooltip$9,legend$g,annotation$2(),label$4)(n)}var DEFAULT_OPTIONS$b=deepAssign({},Plot.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="radial-bar",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$b},r.prototype.changeData=function(e){this.updateOption({data:e}),meta$5({chart:this.chart,options:this.options}),this.chart.changeData(e)},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$8},r})(Plot);function geometry$6(n){var r=n.chart,e=n.options,a=e.data,o=e.sectorStyle,s=e.shape,l=e.color;return r.data(a),flow(interval)(deepAssign({},n,{options:{marginRatio:1,interval:{style:o,color:l,shape:s}}})),n}function label$3(n){var r=n.chart,e=n.options,a=e.label,o=e.xField,s=findGeometry(r,"interval");if(a===!1)s.label(!1);else if(isObject$1(a)){var l=a.callback,c=a.fields,u=__rest$1(a,["callback","fields"]),f=u.offset,d=u.layout;(f===void 0||f>=0)&&(d=d?isArray$4(d)?d:[d]:[],u.layout=filter(d,function(g){return g.type!=="limit-in-shape"}),u.layout.length||delete u.layout),s.label({fields:c||[o],callback:l,cfg:transformLabel(u)})}else log(LEVEL.WARN,a===null,"the label option must be an Object."),s.label({fields:[o]});return n}function legend$4(n){var r=n.chart,e=n.options,a=e.legend,o=e.seriesField;return a===!1?r.legend(!1):o&&r.legend(o,a),n}function coordinate$1(n){var r=n.chart,e=n.options,a=e.radius,o=e.innerRadius,s=e.startAngle,l=e.endAngle;return r.coordinate({type:"polar",cfg:{radius:a,innerRadius:o,startAngle:s,endAngle:l}}),n}function meta$4(n){var r,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return flow(scale$2((r={},r[s]=a,r[l]=o,r)))(n)}function axis$5(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return a?r.axis(s,a):r.axis(s,!1),o?r.axis(l,o):r.axis(l,!1),n}function adaptor$7(n){flow(pattern("sectorStyle"),geometry$6,meta$4,label$3,coordinate$1,axis$5,legend$4,tooltip$9,interaction$8,animation$5,theme$2,annotation$2(),state)(n)}var DEFAULT_OPTIONS$a=deepAssign({},Plot.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),Rose=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="rose",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$a},r.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$7},r}(Plot),X_FIELD$1="x",Y_FIELD$1="y",COLOR_FIELD="name",NODES_VIEW_ID="nodes",EDGES_VIEW_ID="edges";function getNodes(n,r,e){var a=[];return n.forEach(function(o){var s=o[r],l=o[e];a.includes(s)||a.push(s),a.includes(l)||a.push(l)}),a}function getMatrix(n,r,e,a){var o={};return r.forEach(function(s){o[s]={},r.forEach(function(l){o[s][l]=0})}),n.forEach(function(s){o[s[e]][s[a]]=1}),o}function cutoffCircle(n,r,e){if(!isArray$4(n))return[];var a=[],o=getNodes(n,r,e),s=getMatrix(n,o,r,e),l={};o.forEach(function(u){l[u]=0});function c(u){l[u]=1,o.forEach(function(f){if(s[u][f]!=0)if(l[f]==1)a.push("".concat(u,"_").concat(f));else{if(l[f]==-1)return;c(f)}}),l[u]=-1}return o.forEach(function(u){l[u]!=-1&&c(u)}),a.length!==0&&console.warn("sankey data contains circle, ".concat(a.length," records removed."),a),n.filter(function(u){return a.findIndex(function(f){return f==="".concat(u[r],"_").concat(u[e])})<0})}function targetDepth(n){return n.target.depth}function left(n){return n.depth}function right(n,r){return r-1-n.height}function justify(n,r){return n.sourceLinks.length?n.depth:r-1}function center(n){return n.targetLinks.length?n.depth:n.sourceLinks.length?minBy(n.sourceLinks,targetDepth)-1:0}function constant(n){return function(){return n}}function sumBy(n,r){for(var e=0,a=0;a<n.length;a++)e+=r(n[a]);return e}function maxValueBy(n,r){for(var e=-1/0,a=0;a<n.length;a++)e=Math.max(r(n[a]),e);return e}function minValueBy(n,r){for(var e=1/0,a=0;a<n.length;a++)e=Math.min(r(n[a]),e);return e}function ascendingSourceBreadth(n,r){return ascendingBreadth(n.source,r.source)||n.index-r.index}function ascendingTargetBreadth(n,r){return ascendingBreadth(n.target,r.target)||n.index-r.index}function ascendingBreadth(n,r){return n.y0-r.y0}function value(n){return n.value}function defaultId(n){return n.index}function defaultNodes(n){return n.nodes}function defaultLinks(n){return n.links}function find$1(n,r){var e=n.get(r);if(!e)throw new Error("missing: "+r);return e}function computeLinkBreadths(n){for(var r=n.nodes,e=0,a=r;e<a.length;e++){for(var o=a[e],s=o.y0,l=s,c=0,u=o.sourceLinks;c<u.length;c++){var f=u[c];f.y0=s+f.width/2,s+=f.width}for(var d=0,g=o.targetLinks;d<g.length;d++){var f=g[d];f.y1=l+f.width/2,l+=f.width}}}function Sankey(){var n=0,r=0,e=1,a=1,o=24,s=8,l,c=defaultId,u=justify,f,d,g,v=defaultNodes,p=defaultLinks,y=6;function m(F){var z={nodes:v(F),links:p(F)};return x(z),A(z),_(z),b(z),E(z),computeLinkBreadths(z),z}m.update=function(F){return computeLinkBreadths(F),F},m.nodeId=function(F){return arguments.length?(c=typeof F=="function"?F:constant(F),m):c},m.nodeAlign=function(F){return arguments.length?(u=typeof F=="function"?F:constant(F),m):u},m.nodeDepth=function(F){return arguments.length?(f=F,m):f},m.nodeSort=function(F){return arguments.length?(d=F,m):d},m.nodeWidth=function(F){return arguments.length?(o=+F,m):o},m.nodePadding=function(F){return arguments.length?(s=l=+F,m):s},m.nodes=function(F){return arguments.length?(v=typeof F=="function"?F:constant(F),m):v},m.links=function(F){return arguments.length?(p=typeof F=="function"?F:constant(F),m):p},m.linkSort=function(F){return arguments.length?(g=F,m):g},m.size=function(F){return arguments.length?(n=r=0,e=+F[0],a=+F[1],m):[e-n,a-r]},m.extent=function(F){return arguments.length?(n=+F[0][0],e=+F[1][0],r=+F[0][1],a=+F[1][1],m):[[n,r],[e,a]]},m.iterations=function(F){return arguments.length?(y=+F,m):y};function x(F){var z=F.nodes,W=F.links;z.forEach(function(et,it){et.index=it,et.sourceLinks=[],et.targetLinks=[]});var j=new Map(z.map(function(et){return[c(et),et]}));if(W.forEach(function(et,it){et.index=it;var ot=et.source,st=et.target;typeof ot!="object"&&(ot=et.source=find$1(j,ot)),typeof st!="object"&&(st=et.target=find$1(j,st)),ot.sourceLinks.push(et),st.targetLinks.push(et)}),g!=null)for(var U=0,X=z;U<X.length;U++){var tt=X[U],rt=tt.sourceLinks,J=tt.targetLinks;rt.sort(g),J.sort(g)}}function A(F){for(var z=F.nodes,W=0,j=z;W<j.length;W++){var U=j[W];U.value=U.fixedValue===void 0?Math.max(sumBy(U.sourceLinks,value),sumBy(U.targetLinks,value)):U.fixedValue}}function _(F){for(var z=F.nodes,W=z.length,j=new Set(z),U=new Set,X=0;j.size;){if(j.forEach(function(et){et.depth=X;for(var it=0,ot=et.sourceLinks;it<ot.length;it++){var st=ot[it].target;U.add(st)}}),++X>W)throw new Error("circular link");j=U,U=new Set}if(f)for(var tt=Math.max(maxValueBy(z,function(et){return et.depth})+1,0),rt=void 0,J=0;J<z.length;J++)rt=z[J],rt.depth=f.call(null,rt,tt)}function b(F){for(var z=F.nodes,W=z.length,j=new Set(z),U=new Set,X=0;j.size;){if(j.forEach(function(tt){tt.height=X;for(var rt=0,J=tt.targetLinks;rt<J.length;rt++){var et=J[rt].source;U.add(et)}}),++X>W)throw new Error("circular link");j=U,U=new Set}}function S(F){for(var z=F.nodes,W=Math.max(maxValueBy(z,function(st){return st.depth})+1,0),j=(e-n-o)/(W-1),U=new Array(W).fill(0).map(function(){return[]}),X=0,tt=z;X<tt.length;X++){var rt=tt[X],J=Math.max(0,Math.min(W-1,Math.floor(u.call(null,rt,W))));rt.layer=J,rt.x0=n+J*j,rt.x1=rt.x0+o,U[J]?U[J].push(rt):U[J]=[rt]}if(d)for(var et=0,it=U;et<it.length;et++){var ot=it[et];ot.sort(d)}return U}function C(F){for(var z=minValueBy(F,function(ut){return(a-r-(ut.length-1)*l)/sumBy(ut,value)}),W=0,j=F;W<j.length;W++){for(var U=j[W],X=r,tt=0,rt=U;tt<rt.length;tt++){var J=rt[tt];J.y0=X,J.y1=X+J.value*z,X=J.y1+l;for(var et=0,it=J.sourceLinks;et<it.length;et++){var ot=it[et];ot.width=ot.value*z}}X=(a-X+l)/(U.length+1);for(var st=0;st<U.length;++st){var J=U[st];J.y0+=X*(st+1),J.y1+=X*(st+1)}N(U)}}function E(F){var z=S(F);l=Math.min(s,(a-r)/(maxValueBy(z,function(X){return X.length})-1)),C(z);for(var W=0;W<y;++W){var j=Math.pow(.99,W),U=Math.max(1-j,(W+1)/y);w(z,j,U),T(z,j,U)}}function T(F,z,W){for(var j=1,U=F.length;j<U;++j){for(var X=F[j],tt=0,rt=X;tt<rt.length;tt++){for(var J=rt[tt],et=0,it=0,ot=0,st=J.targetLinks;ot<st.length;ot++){var ut=st[ot],ft=ut.source,gt=ut.value,vt=gt*(J.layer-ft.layer);et+=G(ft,J)*vt,it+=vt}if(it>0){var yt=(et/it-J.y0)*z;J.y0+=yt,J.y1+=yt,P(J)}}d===void 0&&X.sort(ascendingBreadth),X.length&&L(X,W)}}function w(F,z,W){for(var j=F.length,U=j-2;U>=0;--U){for(var X=F[U],tt=0,rt=X;tt<rt.length;tt++){for(var J=rt[tt],et=0,it=0,ot=0,st=J.sourceLinks;ot<st.length;ot++){var ut=st[ot],ft=ut.target,gt=ut.value,vt=gt*(ft.layer-J.layer);et+=Y(J,ft)*vt,it+=vt}if(it>0){var yt=(et/it-J.y0)*z;J.y0+=yt,J.y1+=yt,P(J)}}d===void 0&&X.sort(ascendingBreadth),X.length&&L(X,W)}}function L(F,z){var W=F.length>>1,j=F[W];O(F,j.y0-l,W-1,z),M(F,j.y1+l,W+1,z),O(F,a,F.length-1,z),M(F,r,0,z)}function M(F,z,W,j){for(;W<F.length;++W){var U=F[W],X=(z-U.y0)*j;X>1e-6&&(U.y0+=X,U.y1+=X),z=U.y1+l}}function O(F,z,W,j){for(;W>=0;--W){var U=F[W],X=(U.y1-z)*j;X>1e-6&&(U.y0-=X,U.y1-=X),z=U.y0-l}}function P(F){var z=F.sourceLinks,W=F.targetLinks;if(g===void 0){for(var j=0,U=W;j<U.length;j++){var X=U[j].source.sourceLinks;X.sort(ascendingTargetBreadth)}for(var tt=0,rt=z;tt<rt.length;tt++){var J=rt[tt].target.targetLinks;J.sort(ascendingSourceBreadth)}}}function N(F){if(g===void 0)for(var z=0,W=F;z<W.length;z++){var j=W[z],U=j.sourceLinks,X=j.targetLinks;U.sort(ascendingTargetBreadth),X.sort(ascendingSourceBreadth)}}function G(F,z){for(var W=F.y0-(F.sourceLinks.length-1)*l/2,j=0,U=F.sourceLinks;j<U.length;j++){var X=U[j],tt=X.target,rt=X.width;if(tt===z)break;W+=rt+l}for(var J=0,et=z.targetLinks;J<et.length;J++){var it=et[J],tt=it.source,rt=it.width;if(tt===F)break;W-=rt}return W}function Y(F,z){for(var W=z.y0-(z.targetLinks.length-1)*l/2,j=0,U=z.targetLinks;j<U.length;j++){var X=U[j],tt=X.source,rt=X.width;if(tt===F)break;W+=rt+l}for(var J=0,et=F.sourceLinks;J<et.length;J++){var it=et[J],tt=it.target,rt=it.width;if(tt===z)break;W-=rt}return W}return m}var ALIGN_METHOD={left,right,center,justify},DEFAULT_OPTIONS$9={nodeId:function(n){return n.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function getNodeAlignFunction(n){var r=isString$1(n)?ALIGN_METHOD[n]:isFunction$1(n)?n:null;return r||justify}function getDefaultOptions(n){return mix({},DEFAULT_OPTIONS$9,n)}function sankeyLayout(n,r){var e=getDefaultOptions(n),a=e.nodeId,o=e.nodeSort,s=e.nodeAlign,l=e.nodeWidth,c=e.nodePadding,u=e.nodeDepth,f=Sankey().nodeSort(o).nodeWidth(l).nodePadding(c).nodeDepth(u).nodeAlign(getNodeAlignFunction(s)).extent([[0,0],[1,1]]).nodeId(a),d=f(r),g=d.nodes.map(function(p){var y=p.x0,m=p.x1,x=p.y0,A=p.y1;return p.x=[y,m,m,y],p.y=[x,x,A,A],p}).filter(function(p){return p.name!==null}),v=d.links.map(function(p){var y=p.source,m=p.target,x=y.x1,A=m.x0;p.x=[x,x,A,A];var _=p.width/2;return p.y=[p.y0+_,p.y0-_,p.y1+_,p.y1-_],p}).filter(function(p){var y=p.source,m=p.target;return y.name!==null&&m.name!==null});return{nodes:g,links:v}}function isNodeLink(n){return n==="node-link"}function getNodeWidthRatio(n,r,e){return isRealNumber(n)?n/e:r}function getNodePaddingRatio(n,r,e){return isRealNumber(n)?n/e:r}function transformToViewsData(n,r,e){var a=n.dataType,o=n.data,s=n.sourceField,l=n.targetField,c=n.weightField,u=n.nodeAlign,f=n.nodeSort,d=n.nodePadding,g=n.nodePaddingRatio,v=n.nodeWidth,p=n.nodeWidthRatio,y=n.nodeDepth,m=n.rawFields,x=m===void 0?[]:m,A;isNodeLink(a)?A=o:A=transformDataToNodeLinkData(cutoffCircle(o,s,l),s,l,c,x);var _=sankeyLayout({nodeAlign:u,nodePadding:getNodePaddingRatio(d,g,e),nodeWidth:getNodeWidthRatio(v,p,r),nodeSort:f,nodeDepth:y},A),b=_.nodes,S=_.links;return{nodes:b.map(function(C){return __assign$8(__assign$8({},pick(C,__spreadArray$2(["x","y","name"],x,!0))),{isNode:!0})}),edges:S.map(function(C){return __assign$8(__assign$8({source:C.source.name,target:C.target.name,name:C.source.name||C.target.name},pick(C,__spreadArray$2(["x","y","value"],x,!0))),{isNode:!1})})}}function defaultOptions$2(n){var r=n.options,e=r.rawFields,a=e===void 0?[]:e;return deepAssign({},{options:{tooltip:{fields:uniq$2(__spreadArray$2(["name","source","target","value","isNode"],a,!0))},label:{fields:uniq$2(__spreadArray$2(["x","name"],a,!0))}}},n)}function geometry$5(n){var r=n.chart,e=n.options,a=e.color,o=e.nodeStyle,s=e.edgeStyle,l=e.label,c=e.tooltip,u=e.nodeState,f=e.edgeState,d=e.rawFields,g=d===void 0?[]:d;r.legend(!1),r.tooltip(c),r.axis(!1),r.coordinate().reflect("y");var v=transformToViewsData(e,r.width,r.height),p=v.nodes,y=v.edges,m=r.createView({id:EDGES_VIEW_ID});m.data(y),edge({chart:m,options:{xField:X_FIELD$1,yField:Y_FIELD$1,seriesField:COLOR_FIELD,rawFields:__spreadArray$2(["source","target"],g,!0),edge:{color:a,style:s,shape:"arc"},tooltip:c,state:f}});var x=r.createView({id:NODES_VIEW_ID});return x.data(p),polygon({chart:x,options:{xField:X_FIELD$1,yField:Y_FIELD$1,seriesField:COLOR_FIELD,polygon:{color:a,style:o},label:l,tooltip:c,state:u}}),r.interaction("element-active"),r.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),n}function animation$1(n){var r=n.chart,e=n.options,a=e.animation,o=__spreadArray$2(__spreadArray$2([],r.views[0].geometries,!0),r.views[1].geometries,!0);return addViewAnimation(r,a,o),n}function nodeDraggable(n){var r=n.chart,e=n.options,a=e.nodeDraggable,o="sankey-node-draggable";return a?r.interaction(o):r.removeInteraction(o),n}function interaction$2(n){var r=n.chart,e=n.options,a=e.interactions,o=a===void 0?[]:a,s=[].concat(o,e.nodeInteractions||[]),l=[].concat(o,e.edgeInteractions||[]),c=findViewById(r,NODES_VIEW_ID),u=findViewById(r,EDGES_VIEW_ID);return s.forEach(function(f){(f==null?void 0:f.enable)===!1?c.removeInteraction(f.type):c.interaction(f.type,f.cfg||{})}),l.forEach(function(f){(f==null?void 0:f.enable)===!1?u.removeInteraction(f.type):u.interaction(f.type,f.cfg||{})}),n}function adaptor$6(n){return flow(defaultOptions$2,geometry$5,interaction$2,nodeDraggable,animation$1,theme$2)(n)}var SankeyNodeDragAction=function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.isDragging=!1,e}return r.prototype.isNodeElement=function(){var e=get(this.context,"event.target");if(e){var a=e.get("element");return a&&a.getModel().data.isNode}return!1},r.prototype.getNodeView=function(){return findViewById(this.context.view,NODES_VIEW_ID)},r.prototype.getEdgeView=function(){return findViewById(this.context.view,EDGES_VIEW_ID)},r.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},r.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:get(this.context,"event.x"),y:get(this.context,"event.y")};var e=this.context.event.target.get("element"),a=this.getCurrentDatumIdx(e);if(a===-1)return;this.currentElementIdx=a,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},r.prototype.translate=function(){if(this.isDragging){var e=this.context.view,a={x:get(this.context,"event.x"),y:get(this.context,"event.y")},o=a.x-this.prevPoint.x,s=a.y-this.prevPoint.y,l=this.getNodeView(),c=l.geometries[0].elements[this.currentElementIdx];if(c&&c.getModel()){var u=c.getModel().data,f=l.getOptions().data,d=l.getCoordinate(),g={x:o/d.getWidth(),y:s/d.getHeight()},v=__assign$8(__assign$8({},u),{x:u.x.map(function(A){return A+=g.x}),y:u.y.map(function(A){return A+=g.y})}),p=__spreadArray$2([],f,!0);p[this.currentElementIdx]=v,l.data(p);var y=u.name,m=this.getEdgeView(),x=m.getOptions().data;x.forEach(function(A){A.source===y&&(A.x[0]+=g.x,A.x[1]+=g.x,A.y[0]+=g.y,A.y[1]+=g.y),A.target===y&&(A.x[2]+=g.x,A.x[3]+=g.x,A.y[2]+=g.y,A.y[3]+=g.y)}),m.data(x),this.prevPoint=a,e.render(!0)}}},r.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},r}(Action);registerAction("sankey-node-drag",SankeyNodeDragAction);registerInteraction("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(n){return n.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="sankey",e}return r.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){var a=e.name;return a},callback:function(e){var a=e[1]===1;return{style:{fill:"#545454",textAlign:a?"end":"start"},offsetX:a?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!get(e,[0,"data","isNode"])},formatter:function(e){var a=e.source,o=e.target,s=e.value;return{name:a+" -> "+o,value:s}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},r.prototype.changeData=function(e){this.updateOption({data:e});var a=transformToViewsData(this.options,this.chart.width,this.chart.height),o=a.nodes,s=a.edges,l=findViewById(this.chart,NODES_VIEW_ID),c=findViewById(this.chart,EDGES_VIEW_ID);l.changeData(o),c.changeData(s)},r.prototype.getSchemaAdaptor=function(){return adaptor$6},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r})(Plot);var SUNBURST_ANCESTOR_FIELD="ancestor-node",SUNBURST_Y_FIELD="value",SUNBURST_PATH_FIELD="path",RAW_FIELDS=[SUNBURST_PATH_FIELD,NODE_INDEX_FIELD,NODE_ANCESTORS_FIELD,CHILD_NODE_COUNT,"name","depth","height"],DEFAULT_OPTIONS$8=deepAssign({},Plot.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),DEFAULT_OPTIONS$7={field:"value",size:[1,1],round:!1,padding:0,sort:function(n,r){return r.value-n.value},as:["x","y"],ignoreParentValue:!0};function partition(n,r){r=mix({},DEFAULT_OPTIONS$7,r);var e=r.as;if(!isArray$4(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var a;try{a=getField(r)}catch(u){console.warn(u)}var o=function(u){return partition$1().size(r.size).round(r.round).padding(r.padding)(hierarchy(u).sum(function(f){return size(f.children)?r.ignoreParentValue?0:f[a]-reduce(f.children,function(d,g){return d+g[a]},0):f[a]}).sort(r.sort))},s=o(n),l=e[0],c=e[1];return s.each(function(u){var f,d;u[l]=[u.x0,u.x1,u.x1,u.x0],u[c]=[u.y1,u.y1,u.y0,u.y0],u.name=u.name||((f=u.data)===null||f===void 0?void 0:f.name)||((d=u.data)===null||d===void 0?void 0:d.label),u.data.name=u.name,["x0","x1","y0","y1"].forEach(function(g){e.indexOf(g)===-1&&delete u[g]})}),getAllNodes(s)}var DEFAULT_OPTIONS$6={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(n,r){return r.value-n.value},ratio:.5*(1+Math.sqrt(5))};function getTileMethod(n,r){return n==="treemapSquarify"?d3Hierarchy[n].ratio(r):d3Hierarchy[n]}function treemap(n,r){r=mix({},DEFAULT_OPTIONS$6,r);var e=r.as;if(!isArray$4(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var a;try{a=getField(r)}catch(f){console.warn(f)}var o=getTileMethod(r.tile,r.ratio),s=function(f){return index().tile(o).size(r.size).round(r.round).padding(r.padding).paddingInner(r.paddingInner).paddingOuter(r.paddingOuter).paddingTop(r.paddingTop).paddingRight(r.paddingRight).paddingBottom(r.paddingBottom).paddingLeft(r.paddingLeft)(hierarchy(f).sum(function(d){return r.ignoreParentValue&&d.children?0:d[a]}).sort(r.sort))},l=s(n),c=e[0],u=e[1];return l.each(function(f){f[c]=[f.x0,f.x1,f.x1,f.x0],f[u]=[f.y1,f.y1,f.y0,f.y0],["x0","x1","y0","y1"].forEach(function(d){e.indexOf(d)===-1&&delete f[d]})}),getAllNodes(l)}function transformData$2(n){var r=n.data,e=n.colorField,a=n.rawFields,o=n.hierarchyConfig,s=o===void 0?{}:o,l=s.activeDepth,c={partition,treemap},u=n.seriesField,f=n.type||"partition",d=c[f](r,__assign$8(__assign$8({field:u||"value"},omit$1(s,["activeDepth"])),{type:"hierarchy.".concat(f),as:["x","y"]})),g=[];return d.forEach(function(v){var p,y,m,x,A,_;if(v.depth===0||l>0&&v.depth>l)return null;for(var b=v.data.name,S=__assign$8({},v);S.depth>1;)b="".concat((y=S.parent.data)===null||y===void 0?void 0:y.name," / ").concat(b),S=S.parent;var C=__assign$8(__assign$8(__assign$8({},pick(v.data,__spreadArray$2(__spreadArray$2([],a||[],!0),[s.field],!1))),(p={},p[SUNBURST_PATH_FIELD]=b,p[SUNBURST_ANCESTOR_FIELD]=S.data.name,p)),v);u&&(C[u]=v.data[u]||((x=(m=v.parent)===null||m===void 0?void 0:m.data)===null||x===void 0?void 0:x[u])),e&&(C[e]=v.data[e]||((_=(A=v.parent)===null||A===void 0?void 0:A.data)===null||_===void 0?void 0:_[e])),C.ext=s,C[HIERARCHY_DATA_TRANSFORM_PARAMS]={hierarchyConfig:s,colorField:e,rawFields:a},g.push(C)}),g}function geometry$4(n){var r=n.chart,e=n.options,a=e.color,o=e.colorField,s=o===void 0?SUNBURST_ANCESTOR_FIELD:o,l=e.sunburstStyle,c=e.rawFields,u=c===void 0?[]:c,f=e.shape,d=transformData$2(e);r.data(d);var g;return l&&(g=function(v){return deepAssign({},{fillOpacity:Math.pow(.85,v.depth)},isFunction$1(l)?l(v):l)}),polygon(deepAssign({},n,{options:{xField:"x",yField:"y",seriesField:s,rawFields:uniq$2(__spreadArray$2(__spreadArray$2([],RAW_FIELDS,!0),u,!0)),polygon:{color:a,style:g,shape:f}}})),n}function axis$4(n){var r=n.chart;return r.axis(!1),n}function label$2(n){var r=n.chart,e=n.options,a=e.label,o=findGeometry(r,"polygon");if(!a)o.label(!1);else{var s=a.fields,l=s===void 0?["name"]:s,c=a.callback,u=__rest$1(a,["fields","callback"]);o.label({fields:l,callback:c,cfg:transformLabel(u)})}return n}function coordinate(n){var r=n.chart,e=n.options,a=e.innerRadius,o=e.radius,s=e.reflect,l=r.coordinate({type:"polar",cfg:{innerRadius:a,radius:o}});return s&&l.reflect(s),n}function meta$3(n){var r,e=n.options,a=e.hierarchyConfig,o=e.meta;return flow(scale$2({},(r={},r[SUNBURST_Y_FIELD]=get(o,get(a,["field"],"value")),r)))(n)}function tooltip$1(n){var r=n.chart,e=n.options,a=e.tooltip;if(a===!1)r.tooltip(!1);else{var o=a;get(a,"fields")||(o=deepAssign({},{customItems:function(s){return s.map(function(l){var c=get(r.getOptions(),"scales"),u=get(c,[SUNBURST_PATH_FIELD,"formatter"],function(d){return d}),f=get(c,[SUNBURST_Y_FIELD,"formatter"],function(d){return d});return __assign$8(__assign$8({},l),{name:u(l.data[SUNBURST_PATH_FIELD]),value:f(l.data.value)})})}},o)),r.tooltip(o)}return n}function adaptorInteraction$1(n){var r=n.drilldown,e=n.interactions,a=e===void 0?[]:e;return r!=null&&r.enabled?deepAssign({},n,{interactions:__spreadArray$2(__spreadArray$2([],a,!0),[{type:"drill-down",cfg:{drillDownConfig:r,transformData:transformData$2}}],!1)}):n}function interaction$1(n){var r=n.chart,e=n.options,a=e.drilldown;return interaction$8({chart:r,options:adaptorInteraction$1(e)}),a!=null&&a.enabled&&(r.appendPadding=getAdjustAppendPadding(r.appendPadding,get(a,["breadCrumb","position"]))),n}function adaptor$5(n){return flow(theme$2,pattern("sunburstStyle"),geometry$4,axis$4,meta$3,legend$g,coordinate,tooltip$1,label$2,interaction$1,animation$5,annotation$2())(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="sunburst",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$8},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$5},r.SUNBURST_ANCESTOR_FIELD=SUNBURST_ANCESTOR_FIELD,r.SUNBURST_PATH_FIELD=SUNBURST_PATH_FIELD,r.NODE_ANCESTORS_FIELD=NODE_ANCESTORS_FIELD,r})(Plot);function findInteraction(n,r){if(isArray$4(n))return n.find(function(e){return e.type===r})}function enableInteraction(n,r){var e=findInteraction(n,r);return e&&e.enable!==!1}function enableDrillInteraction(n){var r=n.interactions,e=n.drilldown;return get(e,"enabled")||enableInteraction(r,"treemap-drill-down")}function resetDrillDown(n){var r=n.interactions["drill-down"];if(r){var e=r.context.actions.find(function(a){return a.name==="drill-down-action"});e.reset()}}function transformData$1(n){var r=n.data,e=n.colorField,a=n.enableDrillDown,o=n.hierarchyConfig,s=treemap(r,__assign$8(__assign$8({},o),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),l=[];return s.forEach(function(c){if(c.depth===0||a&&c.depth!==1||!a&&c.children)return null;var u=c.ancestors().map(function(v){return{data:v.data,height:v.height,value:v.value}}),f=a&&isArray$4(r.path)?u.concat(r.path.slice(1)):u,d=Object.assign({},c.data,__assign$8({x:c.x,y:c.y,depth:c.depth,value:c.value,path:f},c));if(!c.data[e]&&c.parent){var g=c.ancestors().find(function(v){return v.data[e]});d[e]=g==null?void 0:g.data[e]}else d[e]=c.data[e];d[HIERARCHY_DATA_TRANSFORM_PARAMS]={hierarchyConfig:o,colorField:e,enableDrillDown:a},l.push(d)}),l}function defaultOptions$1(n){var r=n.options,e=r.colorField;return deepAssign({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(a){return{name:a.name,value:a.value}}}}},n)}function geometry$3(n){var r=n.chart,e=n.options,a=e.color,o=e.colorField,s=e.rectStyle,l=e.hierarchyConfig,c=e.rawFields,u=transformData$1({data:e.data,colorField:e.colorField,enableDrillDown:enableDrillInteraction(e),hierarchyConfig:l});return r.data(u),polygon(deepAssign({},n,{options:{xField:"x",yField:"y",seriesField:o,rawFields:c,polygon:{color:a,style:s}}})),r.coordinate().reflect("y"),n}function axis$3(n){var r=n.chart;return r.axis(!1),n}function adaptorInteraction(n){var r=n.drilldown,e=n.interactions,a=e===void 0?[]:e,o=enableDrillInteraction(n);return o?deepAssign({},n,{interactions:__spreadArray$2(__spreadArray$2([],a,!0),[{type:"drill-down",cfg:{drillDownConfig:r,transformData:transformData$1}}],!1)}):n}function interaction(n){var r=n.chart,e=n.options,a=e.interactions,o=e.drilldown;interaction$8({chart:r,options:adaptorInteraction(e)});var s=findInteraction(a,"view-zoom");s&&(s.enable!==!1?r.getCanvas().on("mousewheel",function(c){c.preventDefault()}):r.getCanvas().off("mousewheel"));var l=enableDrillInteraction(e);return l&&(r.appendPadding=getAdjustAppendPadding(r.appendPadding,get(o,["breadCrumb","position"]))),n}function adaptor$4(n){return flow(defaultOptions$1,theme$2,pattern("rectStyle"),geometry$3,axis$3,legend$g,tooltip$9,interaction,animation$5,annotation$2())(n)}var DEFAULT_OPTIONS$5={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="treemap",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$5},r.prototype.changeData=function(e){var a=this.options,o=a.colorField,s=a.interactions,l=a.hierarchyConfig;this.updateOption({data:e});var c=transformData$1({data:e,colorField:o,enableDrillDown:enableInteraction(s,"treemap-drill-down"),hierarchyConfig:l});this.chart.changeData(c),resetDrillDown(this.chart)},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$4},r})(Plot);var ID_FIELD="id",PATH_FIELD="path",DEFAULT_OPTIONS$4={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(n){return{name:n.id,value:n.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function placeElementsOrdered(n){if(n){var r=n.geometries[0].elements;r.forEach(function(e){e.shape.toFront()})}}var ElementActiveAction=getActionClass("element-active"),VennElementActive=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},r.prototype.active=function(){n.prototype.active.call(this),this.syncElementsPos()},r.prototype.toggle=function(){n.prototype.toggle.call(this),this.syncElementsPos()},r.prototype.reset=function(){n.prototype.reset.call(this),this.syncElementsPos()},r}(ElementActiveAction),ElementHighlightAction=getActionClass("element-highlight"),VennElementHighlight=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},r.prototype.highlight=function(){n.prototype.highlight.call(this),this.syncElementsPos()},r.prototype.toggle=function(){n.prototype.toggle.call(this),this.syncElementsPos()},r.prototype.clear=function(){n.prototype.clear.call(this),this.syncElementsPos()},r.prototype.reset=function(){n.prototype.reset.call(this),this.syncElementsPos()},r}(ElementHighlightAction),ElementSelectedAction=getActionClass("element-selected"),ElementSingleSelectedAction=getActionClass("element-single-selected"),VennElementSelected=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},r.prototype.selected=function(){n.prototype.selected.call(this),this.syncElementsPos()},r.prototype.toggle=function(){n.prototype.toggle.call(this),this.syncElementsPos()},r.prototype.reset=function(){n.prototype.reset.call(this),this.syncElementsPos()},r}(ElementSelectedAction),VennElementSingleSelected=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},r.prototype.selected=function(){n.prototype.selected.call(this),this.syncElementsPos()},r.prototype.toggle=function(){n.prototype.toggle.call(this),this.syncElementsPos()},r.prototype.reset=function(){n.prototype.reset.call(this),this.syncElementsPos()},r}(ElementSingleSelectedAction);registerAction("venn-element-active",VennElementActive);registerAction("venn-element-highlight",VennElementHighlight);registerAction("venn-element-selected",VennElementSelected);registerAction("venn-element-single-selected",VennElementSingleSelected);registerInteraction("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});registerInteraction("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});registerInteraction("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});registerInteraction("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});registerInteraction("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});registerInteraction("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var VennLabel=function(n){__extends$7(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getLabelPoint=function(e,a,o){var s=e.data,l=s.x,c=s.y,u=e.customLabelInfo,f=u.offsetX,d=u.offsetY;return{content:e.content[o],x:l+f,y:c+d}},r}(GeometryLabel);registerGeometryLabel("venn",VennLabel);var isArray$1=Array.isArray;const isArray$2=isArray$1;var SPACES=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND=new RegExp("([a-z])["+SPACES+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES+"]*,?["+SPACES+"]*)+)","ig"),PATH_VALUES=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES+"]*,?["+SPACES+"]*","ig");function parsePathString(n){if(!n)return null;if(isArray$2(n))return n;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(n).replace(PATH_COMMAND,function(a,o,s){var l=[],c=o.toLowerCase();if(s.replace(PATH_VALUES,function(u,f){f&&l.push(+f)}),c==="m"&&l.length>2&&(e.push([o].concat(l.splice(0,2))),c="l",o=o==="m"?"l":"L"),c==="o"&&l.length===1&&e.push([o,l[0]]),c==="r")e.push([o].concat(l));else for(;l.length>=r[c]&&(e.push([o].concat(l.splice(0,r[c]))),!!r[c]););return""}),e}function getFillAttrs$1(n){return deepAssign({},n.defaultStyle,{fill:n.color},n.style)}registerShape("schema","venn",{draw:function(n,r){var e=n.data,a=parsePathString(e[PATH_FIELD]),o=getFillAttrs$1(n),s=r.addGroup({name:"venn-shape"});s.addShape("path",{attrs:__assign$8(__assign$8({},o),{path:a}),name:"venn-path"});var l=n.customInfo,c=l.offsetX,u=l.offsetY,f=Util.transform(null,[["t",c,u]]);return s.setMatrix(f),s},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{lineWidth:0,stroke:r,fill:r,r:4}}}});var each=function(n){return function(r,e){var a=[];return a[0]=n(r[0],e[0]),a[1]=n(r[1],e[1]),a[2]=n(r[2],e[2]),a}},blendObject={normal:function(n){return n},multiply:function(n,r){return n*r/255},screen:function(n,r){return 255*(1-(1-n/255)*(1-r/255))},overlay:function(n,r){return r<128?2*n*r/255:255*(1-2*(1-n/255)*(1-r/255))},darken:function(n,r){return n>r?r:n},lighten:function(n,r){return n>r?n:r},dodge:function(n,r){return n===255?255:(n=255*(r/255)/(1-n/255),n>255?255:n)},burn:function(n,r){return r===255?255:n===0?0:255*(1-Math.min(1,(1-r/255)/(n/255)))}},innerBlend=function(n){if(!blendObject[n])throw new Error("unknown blend mode "+n);return blendObject[n]};function blend(n,r,e){e===void 0&&(e="normal");var a=each(innerBlend(e))(colorToArr(n),colorToArr(r)),o=colorToArr(n),s=o[0],l=o[1],c=o[2],u=o[3],f=colorToArr(r),d=f[0],g=f[1],v=f[2],p=f[3],y=Number((u+p*(1-u)).toFixed(2)),m=Math.round((u*(1-p)*(s/255)+u*p*(a[0]/255)+(1-u)*p*(d/255))/y*255),x=Math.round((u*(1-p)*(l/255)+u*p*(a[1]/255)+(1-u)*p*(g/255))/y*255),A=Math.round((u*(1-p)*(c/255)+u*p*(a[2]/255)+(1-u)*p*(v/255))/y*255);return"rgba(".concat(m,", ").concat(x,", ").concat(A,", ").concat(y,")")}function colorToArr(n){var r=n.replace("/s+/g",""),e;return typeof r=="string"&&!r.startsWith("rgba")&&!r.startsWith("#")?e=colorUtil.rgb2arr(colorUtil.toRGB(r)).concat([1]):(r.startsWith("rgba")&&(e=r.replace("rgba(","").replace(")","").split(",")),r.startsWith("#")&&(e=colorUtil.rgb2arr(r).concat([1])),e.map(function(a,o){return o===3?Number(a):a|0}))}function bisect(n,r,e,a){a=a||{};var o=a.maxIterations||100,s=a.tolerance||1e-10,l=n(r),c=n(e),u=e-r;if(l*c>0)throw"Initial bisect points must have opposite signs";if(l===0)return r;if(c===0)return e;for(var f=0;f<o;++f){u/=2;var d=r+u,g=n(d);if(g*l>=0&&(r=d),Math.abs(u)<s||g===0)return d}return r+u}function zeros(n){for(var r=new Array(n),e=0;e<n;++e)r[e]=0;return r}function zerosM(n,r){return zeros(n).map(function(){return zeros(r)})}function dot$1(n,r){for(var e=0,a=0;a<n.length;++a)e+=n[a]*r[a];return e}function norm2(n){return Math.sqrt(dot$1(n,n))}function scale(n,r,e){for(var a=0;a<r.length;++a)n[a]=r[a]*e}function weightedSum(n,r,e,a,o){for(var s=0;s<n.length;++s)n[s]=r*e[s]+a*o[s]}function nelderMead(n,r,e){e=e||{};var a=e.maxIterations||r.length*200,o=e.nonZeroDelta||1.05,s=e.zeroDelta||.001,l=e.minErrorDelta||1e-6,c=e.minErrorDelta||1e-5,u=e.rho!==void 0?e.rho:1,f=e.chi!==void 0?e.chi:2,d=e.psi!==void 0?e.psi:-.5,g=e.sigma!==void 0?e.sigma:.5,v,p=r.length,y=new Array(p+1);y[0]=r,y[0].fx=n(r),y[0].id=0;for(var m=0;m<p;++m){var x=r.slice();x[m]=x[m]?x[m]*o:s,y[m+1]=x,y[m+1].fx=n(x),y[m+1].id=m+1}function A(P){for(var N=0;N<P.length;N++)y[p][N]=P[N];y[p].fx=P.fx}for(var _=function(P,N){return P.fx-N.fx},b=r.slice(),S=r.slice(),C=r.slice(),E=r.slice(),T=0;T<a;++T){if(y.sort(_),e.history){var w=y.map(function(P){var N=P.slice();return N.fx=P.fx,N.id=P.id,N});w.sort(function(P,N){return P.id-N.id}),e.history.push({x:y[0].slice(),fx:y[0].fx,simplex:w})}for(v=0,m=0;m<p;++m)v=Math.max(v,Math.abs(y[0][m]-y[1][m]));if(Math.abs(y[0].fx-y[p].fx)<l&&v<c)break;for(m=0;m<p;++m){b[m]=0;for(var L=0;L<p;++L)b[m]+=y[L][m];b[m]/=p}var M=y[p];if(weightedSum(S,1+u,b,-u,M),S.fx=n(S),S.fx<y[0].fx)weightedSum(E,1+f,b,-f,M),E.fx=n(E),E.fx<S.fx?A(E):A(S);else if(S.fx>=y[p-1].fx){var O=!1;if(S.fx>M.fx?(weightedSum(C,1+d,b,-d,M),C.fx=n(C),C.fx<M.fx?A(C):O=!0):(weightedSum(C,1-d*u,b,d*u,M),C.fx=n(C),C.fx<S.fx?A(C):O=!0),O){if(g>=1)break;for(m=1;m<y.length;++m)weightedSum(y[m],1-g,y[0],g,y[m]),y[m].fx=n(y[m])}}else A(S)}return y.sort(_),{fx:y[0].fx,x:y[0]}}function wolfeLineSearch(n,r,e,a,o,s,l){var c=e.fx,u=dot$1(e.fxprime,r),f=c,d=c,g=u,v=0;o=o||1,s=s||1e-6,l=l||.1;function p(m,x,A){for(var _=0;_<16;++_)if(o=(m+x)/2,weightedSum(a.x,1,e.x,o,r),f=a.fx=n(a.x,a.fxprime),g=dot$1(a.fxprime,r),f>c+s*o*u||f>=A)x=o;else{if(Math.abs(g)<=-l*u)return o;g*(x-m)>=0&&(x=m),m=o,A=f}return 0}for(var y=0;y<10;++y){if(weightedSum(a.x,1,e.x,o,r),f=a.fx=n(a.x,a.fxprime),g=dot$1(a.fxprime,r),f>c+s*o*u||y&&f>=d)return p(v,o,d);if(Math.abs(g)<=-l*u)return o;if(g>=0)return p(o,v,f);d=f,v=o,o*=2}return o}function conjugateGradient(n,r,e){var a={x:r.slice(),fx:0,fxprime:r.slice()},o={x:r.slice(),fx:0,fxprime:r.slice()},s=r.slice(),l,c,u=1,f;e=e||{},f=e.maxIterations||r.length*20,a.fx=n(a.x,a.fxprime),l=a.fxprime.slice(),scale(l,a.fxprime,-1);for(var d=0;d<f;++d){if(u=wolfeLineSearch(n,l,a,o,u),e.history&&e.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),!u)scale(l,a.fxprime,-1);else{weightedSum(s,1,o.fxprime,-1,a.fxprime);var g=dot$1(a.fxprime,a.fxprime),v=Math.max(0,dot$1(s,o.fxprime)/g);weightedSum(l,v,l,-1,o.fxprime),c=a,a=o,o=c}if(norm2(a.fxprime)<=1e-5)break}return e.history&&e.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),a}var SMALL$1=1e-10;function intersectionArea(n,r){var e=getIntersectionPoints(n),a=e.filter(function(T){return containedInCircles(T,n)}),o=0,s=0,l,c=[];if(a.length>1){var u=getCenter(a);for(l=0;l<a.length;++l){var f=a[l];f.angle=Math.atan2(f.x-u.x,f.y-u.y)}a.sort(function(T,w){return w.angle-T.angle});var d=a[a.length-1];for(l=0;l<a.length;++l){var g=a[l];s+=(d.x+g.x)*(g.y-d.y);for(var v={x:(g.x+d.x)/2,y:(g.y+d.y)/2},p=null,y=0;y<g.parentIndex.length;++y)if(d.parentIndex.indexOf(g.parentIndex[y])>-1){var m=n[g.parentIndex[y]],x=Math.atan2(g.x-m.x,g.y-m.y),A=Math.atan2(d.x-m.x,d.y-m.y),_=A-x;_<0&&(_+=2*Math.PI);var b=A-_/2,S=distance(v,{x:m.x+m.radius*Math.sin(b),y:m.y+m.radius*Math.cos(b)});S>m.radius*2&&(S=m.radius*2),(p===null||p.width>S)&&(p={circle:m,width:S,p1:g,p2:d})}p!==null&&(c.push(p),o+=circleArea(p.circle.radius,p.width),d=g)}}else{var C=n[0];for(l=1;l<n.length;++l)n[l].radius<C.radius&&(C=n[l]);var E=!1;for(l=0;l<n.length;++l)if(distance(n[l],C)>Math.abs(C.radius-n[l].radius)){E=!0;break}E?o=s=0:(o=C.radius*C.radius*Math.PI,c.push({circle:C,p1:{x:C.x,y:C.y+C.radius},p2:{x:C.x-SMALL$1,y:C.y+C.radius},width:C.radius*2}))}return s/=2,r&&(r.area=o+s,r.arcArea=o,r.polygonArea=s,r.arcs=c,r.innerPoints=a,r.intersectionPoints=e),o+s}function containedInCircles(n,r){for(var e=0;e<r.length;++e)if(distance(n,r[e])>r[e].radius+SMALL$1)return!1;return!0}function getIntersectionPoints(n){for(var r=[],e=0;e<n.length;++e)for(var a=e+1;a<n.length;++a)for(var o=circleCircleIntersection(n[e],n[a]),s=0;s<o.length;++s){var l=o[s];l.parentIndex=[e,a],r.push(l)}return r}function circleArea(n,r){return n*n*Math.acos(1-r/n)-(n-r)*Math.sqrt(r*(2*n-r))}function distance(n,r){return Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y))}function circleOverlap(n,r,e){if(e>=n+r)return 0;if(e<=Math.abs(n-r))return Math.PI*Math.min(n,r)*Math.min(n,r);var a=n-(e*e-r*r+n*n)/(2*e),o=r-(e*e-n*n+r*r)/(2*e);return circleArea(n,a)+circleArea(r,o)}function circleCircleIntersection(n,r){var e=distance(n,r),a=n.radius,o=r.radius;if(e>=a+o||e<=Math.abs(a-o))return[];var s=(a*a-o*o+e*e)/(2*e),l=Math.sqrt(a*a-s*s),c=n.x+s*(r.x-n.x)/e,u=n.y+s*(r.y-n.y)/e,f=-(r.y-n.y)*(l/e),d=-(r.x-n.x)*(l/e);return[{x:c+f,y:u-d},{x:c-f,y:u+d}]}function getCenter(n){for(var r={x:0,y:0},e=0;e<n.length;++e)r.x+=n[e].x,r.y+=n[e].y;return r.x/=n.length,r.y/=n.length,r}function circleMargin(n,r,e){var a=r[0].radius-distance(r[0],n),o,s;for(o=1;o<r.length;++o)s=r[o].radius-distance(r[o],n),s<=a&&(a=s);for(o=0;o<e.length;++o)s=distance(e[o],n)-e[o].radius,s<=a&&(a=s);return a}function computeTextCentre(n,r){var e=[],a;for(a=0;a<n.length;++a){var o=n[a];e.push({x:o.x,y:o.y}),e.push({x:o.x+o.radius/2,y:o.y}),e.push({x:o.x-o.radius/2,y:o.y}),e.push({x:o.x,y:o.y+o.radius/2}),e.push({x:o.x,y:o.y-o.radius/2})}var s=e[0],l=circleMargin(e[0],n,r);for(a=1;a<e.length;++a){var c=circleMargin(e[a],n,r);c>=l&&(s=e[a],l=c)}var u=nelderMead(function(v){return-1*circleMargin({x:v[0],y:v[1]},n,r)},[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,f={x:u[0],y:u[1]},d=!0;for(a=0;a<n.length;++a)if(distance(f,n[a])>n[a].radius){d=!1;break}for(a=0;a<r.length;++a)if(distance(f,r[a])<r[a].radius){d=!1;break}if(!d)if(n.length==1)f={x:n[0].x,y:n[0].y};else{var g={};intersectionArea(n,g),g.arcs.length===0?f={x:0,y:-1e3,disjoint:!0}:g.arcs.length==1?f={x:g.arcs[0].circle.x,y:g.arcs[0].circle.y}:r.length?f=computeTextCentre(n,[]):f=getCenter(g.arcs.map(function(v){return v.p1}))}return f}function getOverlappingCircles(n){var r={},e=[];for(var a in n)e.push(a),r[a]=[];for(var o=0;o<e.length;o++)for(var s=n[e[o]],l=o+1;l<e.length;++l){var c=n[e[l]],u=distance(s,c);u+c.radius<=s.radius+1e-10?r[e[l]].push(e[o]):u+s.radius<=c.radius+1e-10&&r[e[o]].push(e[l])}return r}function computeTextCentres(n,r){for(var e={},a=getOverlappingCircles(n),o=0;o<r.length;++o){for(var s=r[o].sets,l={},c={},u=0;u<s.length;++u){l[s[u]]=!0;for(var f=a[s[u]],d=0;d<f.length;++d)c[f[d]]=!0}var g=[],v=[];for(var p in n)p in l?g.push(n[p]):p in c||v.push(n[p]);var y=computeTextCentre(g,v);e[s]=y,y.disjoint&&r[o].size>0&&console.log("WARNING: area "+s+" not represented on screen")}return e}function circlePath(n,r,e){var a=[],o=n-e,s=r;return a.push("M",o,s),a.push("A",e,e,0,1,0,o+2*e,s),a.push("A",e,e,0,1,0,o,s),a.join(" ")}function intersectionAreaPath(n){var r={};intersectionArea(n,r);var e=r.arcs;if(e.length===0)return"M 0 0";if(e.length==1){var a=e[0].circle;return circlePath(a.x,a.y,a.radius)}else{for(var o=[`
M`,e[0].p2.x,e[0].p2.y],s=0;s<e.length;++s){var l=e[s],c=l.circle.radius,u=l.width>c;o.push(`
A`,c,c,0,u?1:0,1,l.p1.x,l.p1.y)}return o.join(" ")}}function venn(n,r){r=r||{},r.maxIterations=r.maxIterations||500;var e=r.initialLayout||bestInitialLayout,a=r.lossFunction||lossFunction;n=addMissingAreas(n);var o=e(n,r),s=[],l=[],c;for(c in o)o.hasOwnProperty(c)&&(s.push(o[c].x),s.push(o[c].y),l.push(c));for(var u=nelderMead(function(g){for(var v={},p=0;p<l.length;++p){var y=l[p];v[y]={x:g[2*p],y:g[2*p+1],radius:o[y].radius}}return a(v,n)},s,r),f=u.x,d=0;d<l.length;++d)c=l[d],o[c].x=f[2*d],o[c].y=f[2*d+1];return o}var SMALL=1e-10;function distanceFromIntersectArea(n,r,e){return Math.min(n,r)*Math.min(n,r)*Math.PI<=e+SMALL?Math.abs(n-r):bisect(function(a){return circleOverlap(n,r,a)-e},0,n+r)}function addMissingAreas(n){n=n.slice();var r=[],e={},a,o,s,l;for(a=0;a<n.length;++a){var c=n[a];c.sets.length==1?r.push(c.sets[0]):c.sets.length==2&&(s=c.sets[0],l=c.sets[1],e[[s,l]]=!0,e[[l,s]]=!0)}for(r.sort(function(u,f){return u>f?1:-1}),a=0;a<r.length;++a)for(s=r[a],o=a+1;o<r.length;++o)l=r[o],[s,l]in e||n.push({sets:[s,l],size:0});return n}function getDistanceMatrices(n,r,e){var a=zerosM(r.length,r.length),o=zerosM(r.length,r.length);return n.filter(function(s){return s.sets.length==2}).map(function(s){var l=e[s.sets[0]],c=e[s.sets[1]],u=Math.sqrt(r[l].size/Math.PI),f=Math.sqrt(r[c].size/Math.PI),d=distanceFromIntersectArea(u,f,s.size);a[l][c]=a[c][l]=d;var g=0;s.size+1e-10>=Math.min(r[l].size,r[c].size)?g=1:s.size<=1e-10&&(g=-1),o[l][c]=o[c][l]=g}),{distances:a,constraints:o}}function constrainedMDSGradient(n,r,e,a){var o=0,s;for(s=0;s<r.length;++s)r[s]=0;for(s=0;s<e.length;++s)for(var l=n[2*s],c=n[2*s+1],u=s+1;u<e.length;++u){var f=n[2*u],d=n[2*u+1],g=e[s][u],v=a[s][u],p=(f-l)*(f-l)+(d-c)*(d-c),y=Math.sqrt(p),m=p-g*g;v>0&&y<=g||v<0&&y>=g||(o+=2*m*m,r[2*s]+=4*m*(l-f),r[2*s+1]+=4*m*(c-d),r[2*u]+=4*m*(f-l),r[2*u+1]+=4*m*(d-c))}return o}function bestInitialLayout(n,r){var e=greedyLayout(n,r),a=r.lossFunction||lossFunction;if(n.length>=8){var o=constrainedMDSLayout(n,r),s=a(o,n),l=a(e,n);s+1e-8<l&&(e=o)}return e}function constrainedMDSLayout(n,r){r=r||{};var e=r.restarts||10,a=[],o={},s;for(s=0;s<n.length;++s){var l=n[s];l.sets.length==1&&(o[l.sets[0]]=a.length,a.push(l))}var c=getDistanceMatrices(n,a,o),u=c.distances,f=c.constraints,d=norm2(u.map(norm2))/u.length;u=u.map(function(_){return _.map(function(b){return b/d})});var g=function(_,b){return constrainedMDSGradient(_,b,u,f)},v,p;for(s=0;s<e;++s){var y=zeros(u.length*2).map(Math.random);p=conjugateGradient(g,y,r),(!v||p.fx<v.fx)&&(v=p)}var m=v.x,x={};for(s=0;s<a.length;++s){var A=a[s];x[A.sets[0]]={x:m[2*s]*d,y:m[2*s+1]*d,radius:Math.sqrt(A.size/Math.PI)}}if(r.history)for(s=0;s<r.history.length;++s)scale(r.history[s].x,d);return x}function greedyLayout(n,r){for(var e=r&&r.lossFunction?r.lossFunction:lossFunction,a={},o={},s,l=0;l<n.length;++l){var c=n[l];c.sets.length==1&&(s=c.sets[0],a[s]={x:1e10,y:1e10,rowid:Object.keys(a).length,size:c.size,radius:Math.sqrt(c.size/Math.PI)},o[s]=[])}n=n.filter(function(F){return F.sets.length==2});for(var l=0;l<n.length;++l){var u=n[l],f=u.hasOwnProperty("weight")?u.weight:1,d=u.sets[0],g=u.sets[1];u.size+SMALL>=Math.min(a[d].size,a[g].size)&&(f=0),o[d].push({set:g,size:u.size,weight:f}),o[g].push({set:d,size:u.size,weight:f})}var v=[];for(s in o)if(o.hasOwnProperty(s)){for(var p=0,l=0;l<o[s].length;++l)p+=o[s][l].size*o[s][l].weight;v.push({set:s,size:p})}function y(F,z){return z.size-F.size}v.sort(y);var m={};function x(F){return F.set in m}function A(F,z){a[z].x=F.x,a[z].y=F.y,m[z]=!0}A({x:0,y:0},v[0].set);for(var l=1;l<v.length;++l){var _=v[l].set,b=o[_].filter(x);if(s=a[_],b.sort(y),b.length===0)throw"ERROR: missing pairwise overlap information";for(var S=[],C=0;C<b.length;++C){var E=a[b[C].set],T=distanceFromIntersectArea(s.radius,E.radius,b[C].size);S.push({x:E.x+T,y:E.y}),S.push({x:E.x-T,y:E.y}),S.push({y:E.y+T,x:E.x}),S.push({y:E.y-T,x:E.x});for(var w=C+1;w<b.length;++w)for(var L=a[b[w].set],M=distanceFromIntersectArea(s.radius,L.radius,b[w].size),O=circleCircleIntersection({x:E.x,y:E.y,radius:T},{x:L.x,y:L.y,radius:M}),P=0;P<O.length;++P)S.push(O[P])}for(var N=1e50,G=S[0],C=0;C<S.length;++C){a[_].x=S[C].x,a[_].y=S[C].y;var Y=e(a,n);Y<N&&(N=Y,G=S[C])}A(G,_)}return a}function lossFunction(n,r){var e=0;function a(d){return d.map(function(g){return n[g]})}for(var o=0;o<r.length;++o){var s=r[o],l=void 0;if(s.sets.length!=1){if(s.sets.length==2){var c=n[s.sets[0]],u=n[s.sets[1]];l=circleOverlap(c.radius,u.radius,distance(c,u))}else l=intersectionArea(a(s.sets));var f=s.hasOwnProperty("weight")?s.weight:1;e+=f*(l-s.size)*(l-s.size)}}return e}function getBoundingBox(n){var r=function(e){var a=Math.max.apply(null,n.map(function(s){return s[e]+s.radius})),o=Math.min.apply(null,n.map(function(s){return s[e]-s.radius}));return{max:a,min:o}};return{xRange:r("x"),yRange:r("y")}}function scaleSolution(n,r,e,a){var o=[],s=[];for(var l in n)n.hasOwnProperty(l)&&(s.push(l),o.push(n[l]));r-=2*a,e-=2*a;var c=getBoundingBox(o),u=c.xRange,f=c.yRange;if(u.max==u.min||f.max==f.min)return console.log("not scaling solution: zero size detected"),n;for(var d=r/(u.max-u.min),g=e/(f.max-f.min),v=Math.min(g,d),p=(r-(u.max-u.min)*v)/2,y=(e-(f.max-f.min)*v)/2,m={},x=0;x<o.length;++x){var A=o[x];m[s[x]]={radius:v*A.radius,x:a+p+(A.x-u.min)*v,y:a+y+(A.y-f.min)*v}}return m}var getColorMap=memoize(function(n,r,e,a){var o=new Map,s=n.length;return r.forEach(function(l,c){if(l[a].length===1)o.set(l[ID_FIELD],n[(c+s)%s]);else{var u=l[a].map(function(f){return o.get(f)});o.set(l[ID_FIELD],u.slice(1).reduce(function(f,d){return blend(f,d,e)},u[0]))}}),o},function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return JSON.stringify(n)});function layoutVennData(n,r,e,a){a===void 0&&(a=0);var o=n.data,s=n.setsField,l=n.sizeField;if(o.length===0)return log(LEVEL.WARN,!1,"warn: %s","数据不能为空"),[];var c=o.map(function(g){var v;return __assign$8(__assign$8({},g),(v={sets:g[s]||[],size:g[l]},v[PATH_FIELD]="",v[ID_FIELD]="",v))});c.sort(function(g,v){return g.sets.length-v.sets.length});var u=venn(c),f=scaleSolution(u,r,e,a),d=computeTextCentres(f,c);return c.forEach(function(g){var v=g.sets,p=v.join(",");g[ID_FIELD]=p;var y=v.map(function(A){return f[A]}),m=intersectionAreaPath(y);/[zZ]$/.test(m)||(m+=" Z"),g[PATH_FIELD]=m;var x=d[p]||{x:0,y:0};mix(g,x)}),c}function islegalSets(n,r){for(var e=0;e<r.length;e++)if(!n.includes(r[e]))return!1;return!0}var LEGEND_SPACE=40;function colorMap(n,r,e){var a=n.chart,o=n.options,s=o.blendMode,l=o.setsField,c=a.getTheme(),u=c.colors10,f=c.colors20,d=e;isArray$4(d)||(d=r.filter(function(v){return v[l].length===1}).length<=10?u:f);var g=getColorMap(d,r,s,l);return function(v){return g.get(v)||d[0]}}function transformColor(n,r){var e=n.options,a=e.color;if(typeof a!="function"){var o=typeof a=="string"?[a]:a,s=colorMap(n,r,o);return function(l){return s(l[ID_FIELD])}}return a}function padding(n){var r=n.chart,e=n.options,a=e.legend,o=e.appendPadding,s=e.padding,l=normalPadding(o);return a!==!1&&(l=getAdjustAppendPadding(o,get(a,"position"),LEGEND_SPACE)),r.appendPadding=resolveAllPadding([l,s]),n}function data$1(n){var r=n.options,e=r.data;e||(log(LEVEL.WARN,!1,"warn: %s","数据不能为空"),e=[]);var a=e.filter(function(s){return s.sets.length===1}).map(function(s){return s.sets[0]}),o=e.filter(function(s){var l=s.sets;return islegalSets(a,l)});return isEqual$1(o,e)||log(LEVEL.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),deepMix({},n,{options:{data:o}})}function geometry$2(n){var r=n.chart,e=n.options,a=e.pointStyle,o=e.setsField,s=e.sizeField,l=normalPadding(r.appendPadding),c=l[0],u=l[1],f=l[2],d=l[3],g={offsetX:d,offsetY:c},v=r.viewBBox,p=v.width,y=v.height,m=layoutVennData(e,Math.max(p-(u+d),0),Math.max(y-(c+f),0),0);r.data(m);var x=schema(deepAssign({},n,{options:{xField:"x",yField:"y",sizeField:s,seriesField:ID_FIELD,rawFields:[o,s],schema:{shape:"venn",style:a}}})).ext,A=x.geometry;A.customInfo(g);var _=transformColor(n,m);return typeof _=="function"&&A.color(ID_FIELD,function(b){var S=m.find(function(E){return E[ID_FIELD]===b}),C=colorMap(n,m)(b);return _(S,C)}),n}function label$1(n){var r=n.chart,e=n.options,a=e.label,o=normalPadding(r.appendPadding),s=o[0],l=o[3],c={offsetX:l,offsetY:s},u=findGeometry(r,"schema");if(!a)u.label(!1);else{var f=a.callback,d=__rest$1(a,["callback"]);u.label({fields:["id"],callback:f,cfg:deepMix({},transformLabel(d),{type:"venn",customLabelInfo:c})})}return n}function legend$3(n){var r=n.chart,e=n.options,a=e.legend,o=e.sizeField;return r.legend(ID_FIELD,a),r.legend(o,!1),n}function axis$2(n){var r=n.chart;return r.axis(!1),n}function vennInteraction(n){var r=n.options,e=n.chart,a=r.interactions;if(a){var o={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};interaction$8(deepAssign({},n,{options:{interactions:a.map(function(s){return __assign$8(__assign$8({},s),{type:o[s.type]||s.type})})}}))}return e.removeInteraction("legend-active"),e.removeInteraction("legend-highlight"),n}function adaptor$3(n){return flow(padding,theme$2,data$1,geometry$2,label$1,scale$2({}),legend$3,axis$2,tooltip$9,vennInteraction,animation$5)(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="venn",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$4},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$3},r.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},r})(Plot);var X_FIELD="x",VIOLIN_Y_FIELD="violinY",VIOLIN_SIZE_FIELD="violinSize",MIN_MAX_FIELD="minMax",QUANTILE_FIELD="quantile",MEDIAN_FIELD="median",VIOLIN_VIEW_ID="violin_view",MIN_MAX_VIEW_ID="min_max_view",QUANTILE_VIEW_ID="quantile_view",MEDIAN_VIEW_ID="median_view",DEFAULT_OPTIONS$3=deepAssign({},Plot.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),src={exports:{}},helper={exports:{}};(function(n){var r=n.exports;n.exports.isNumber=function(e){return typeof e=="number"},n.exports.findMin=function(e){if(e.length===0)return 1/0;for(var a=e[0],o=1;o<e.length;o++)a=Math.min(a,e[o]);return a},n.exports.findMax=function(e){if(e.length===0)return-1/0;for(var a=e[0],o=1;o<e.length;o++)a=Math.max(a,e[o]);return a},n.exports.findMinMulti=function(e){for(var a=r.findMin(e[0]),o=1;o<e.length;o++)a=Math.min(a,r.findMin(e[o]));return a},n.exports.findMaxMulti=function(e){for(var a=r.findMax(e[0]),o=1;o<e.length;o++)a=Math.max(a,r.findMax(e[o]));return a},n.exports.inside=function(e,a,o){return e<=o&&o<=a}})(helper);var helperExports=helper.exports;(function(n){var r=50,e=2,a=Math.log(2),o=n.exports,s=helperExports;function l(u){return 1-Math.abs(u)}n.exports.getUnifiedMinMax=function(u,f){return o.getUnifiedMinMaxMulti([u],f)},n.exports.getUnifiedMinMaxMulti=function(u,f){f=f||{};var d=!1,g=!1,v=s.isNumber(f.width)?f.width:e,p=s.isNumber(f.size)?f.size:r,y=s.isNumber(f.min)?f.min:(d=!0,s.findMinMulti(u)),m=s.isNumber(f.max)?f.max:(g=!0,s.findMaxMulti(u)),x=m-y,A=x/(p-1);return d&&(y=y-2*v*A),g&&(m=m+2*v*A),{min:y,max:m}},n.exports.create=function(u,f){if(f=f||{},!u||u.length===0)return[];var d=s.isNumber(f.size)?f.size:r,g=s.isNumber(f.width)?f.width:e,v=o.getUnifiedMinMax(u,{size:d,width:g,min:f.min,max:f.max}),p=v.min,y=v.max,m=y-p,x=m/(d-1);if(m===0)return[{x:p,y:1}];for(var A=[],_=0;_<d;_++)A.push({x:p+_*x,y:0});var b=function(O){return Math.floor((O-p)/x)},S=c(l,g),C=S[g],E=S[g-1]-S[g-2],T=0;u.forEach(function(O){var P=b(O);if(!(P+g<0||P-g>=A.length)){var N=Math.max(P-g,0),G=P,Y=Math.min(P+g,A.length-1),F=N-(P-g),z=P+g-Y,W=S[-g-1+F]||0,j=S[-g-1+z]||0,U=C/(C-W-j);F>0&&(T+=U*(F-1)*E);var X=Math.max(0,P-g+1);s.inside(0,A.length-1,X)&&(A[X].y+=U*1*E),s.inside(0,A.length-1,G+1)&&(A[G+1].y-=U*2*E),s.inside(0,A.length-1,Y+1)&&(A[Y+1].y+=U*1*E)}});var w=T,L=0,M=0;return A.forEach(function(O){L+=O.y,w+=L,O.y=w,M+=w}),M>0&&A.forEach(function(O){O.y/=M}),A};function c(u,f){for(var d={},g=0,v=-f;v<=f;v++)g+=u(v/f),d[v]=g;return d}n.exports.getExpectedValueFromPdf=function(u){if(!(!u||u.length===0)){var f=0;return u.forEach(function(d){f+=d.x*d.y}),f}},n.exports.getXWithLeftTailArea=function(u,f){if(!(!u||u.length===0)){for(var d=0,g=0,v=0;v<u.length&&(g=v,d+=u[v].y,!(d>=f));v++);return u[g].x}},n.exports.getPerplexity=function(u){if(!(!u||u.length===0)){var f=0;return u.forEach(function(d){var g=Math.log(d.y);isFinite(g)&&(f+=d.y*g)}),f=-f/a,Math.pow(2,f)}}})(src);var srcExports=src.exports;const pdf=getDefaultExportFromCjs(srcExports);function quantileSorted(n,r){var e=n.length*r;if(n.length===0)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return r===1?n[n.length-1]:r===0?n[0]:e%1!==0?n[Math.ceil(e)-1]:n.length%2===0?(n[e-1]+n[e])/2:n[e]}function swap$1(n,r,e){var a=n[r];n[r]=n[e],n[e]=a}function quickselect(n,r,e,a){for(e=e||0,a=a||n.length-1;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o);s-o/2<0&&(u*=-1);var f=Math.max(e,Math.floor(r-s*c/o+u)),d=Math.min(a,Math.floor(r+(o-s)*c/o+u));quickselect(n,r,f,d)}var g=n[r],v=e,p=a;for(swap$1(n,e,r),n[a]>g&&swap$1(n,e,a);v<p;){for(swap$1(n,v,p),v++,p--;n[v]<g;)v++;for(;n[p]>g;)p--}n[e]===g?swap$1(n,e,p):(p++,swap$1(n,p,a)),p<=r&&(e=p+1),r<=p&&(a=p-1)}}function quantile(n,r){var e=n.slice();if(Array.isArray(r)){multiQuantileSelect(e,r);for(var a=[],o=0;o<r.length;o++)a[o]=quantileSorted(e,r[o]);return a}else{var s=quantileIndex(e.length,r);return quantileSelect(e,s,0,e.length-1),quantileSorted(e,r)}}function quantileSelect(n,r,e,a){r%1===0?quickselect(n,r,e,a):(r=Math.floor(r),quickselect(n,r,e,a),quickselect(n,r+1,r+1,a))}function multiQuantileSelect(n,r){for(var e=[0],a=0;a<r.length;a++)e.push(quantileIndex(n.length,r[a]));e.push(n.length-1),e.sort(compare);for(var o=[0,e.length-1];o.length;){var s=Math.ceil(o.pop()),l=Math.floor(o.pop());if(!(s-l<=1)){var c=Math.floor((l+s)/2);quantileSelect(n,e[c],Math.floor(e[l]),Math.ceil(e[s])),o.push(l,c,c,s)}}}function compare(n,r){return n-r}function quantileIndex(n,r){var e=n*r;return r===1?n-1:r===0?0:e%1!==0?Math.ceil(e)-1:n%2===0?e-.5:e}var toBoxValue=function(n){return{low:min$2(n),high:max$2(n),q1:quantile(n,.25),q3:quantile(n,.75),median:quantile(n,[.5]),minMax:[min$2(n),max$2(n)],quantile:[quantile(n,.25),quantile(n,.75)]}},toViolinValue=function(n,r){var e=pdf.create(n,r);return{violinSize:e.map(function(a){return a.y}),violinY:e.map(function(a){return a.x})}},transformViolinData=function(n){var r=n.xField,e=n.yField,a=n.seriesField,o=n.data,s=n.kde,l={min:s.min,max:s.max,size:s.sampleSize,width:s.width};if(!a){var c=groupBy(o,r);return Object.keys(c).map(function(d){var g=c[d],v=g.map(function(p){return p[e]});return __assign$8(__assign$8({x:d},toViolinValue(v,l)),toBoxValue(v))})}var u=[],f=groupBy(o,a);return Object.keys(f).forEach(function(d){var g=groupBy(f[d],r);return Object.keys(g).forEach(function(v){var p,y=g[v],m=y.map(function(x){return x[e]});u.push(__assign$8(__assign$8((p={x:v},p[a]=d,p),toViolinValue(m,l)),toBoxValue(m)))})}),u},TOOLTIP_FIELDS=["low","high","q1","q3","median"],adjustCfg=[{type:"dodge",marginRatio:1/32}];function data(n){var r=n.chart,e=n.options;return r.data(transformViolinData(e)),n}function violinView(n){var r=n.chart,e=n.options,a=e.seriesField,o=e.color,s=e.shape,l=s===void 0?"violin":s,c=e.violinStyle,u=e.tooltip,f=e.state,d=r.createView({id:VIOLIN_VIEW_ID});return violin({chart:d,options:{xField:X_FIELD,yField:VIOLIN_Y_FIELD,seriesField:a||X_FIELD,sizeField:VIOLIN_SIZE_FIELD,tooltip:__assign$8({fields:TOOLTIP_FIELDS},u),violin:{style:c,color:o,shape:l},state:f}}),d.geometries[0].adjust(adjustCfg),n}function boxView(n){var r=n.chart,e=n.options,a=e.seriesField,o=e.color,s=e.tooltip,l=e.box;if(l===!1)return n;var c=r.createView({id:MIN_MAX_VIEW_ID});interval({chart:c,options:{xField:X_FIELD,yField:MIN_MAX_FIELD,seriesField:a||X_FIELD,tooltip:__assign$8({fields:TOOLTIP_FIELDS},s),state:typeof l=="object"?l.state:{},interval:{color:o,size:1,style:{lineWidth:0}}}}),c.geometries[0].adjust(adjustCfg);var u=r.createView({id:QUANTILE_VIEW_ID});interval({chart:u,options:{xField:X_FIELD,yField:QUANTILE_FIELD,seriesField:a||X_FIELD,tooltip:__assign$8({fields:TOOLTIP_FIELDS},s),state:typeof l=="object"?l.state:{},interval:{color:o,size:8,style:{fillOpacity:1}}}}),u.geometries[0].adjust(adjustCfg);var f=r.createView({id:MEDIAN_VIEW_ID});return point({chart:f,options:{xField:X_FIELD,yField:MEDIAN_FIELD,seriesField:a||X_FIELD,tooltip:__assign$8({fields:TOOLTIP_FIELDS},s),state:typeof l=="object"?l.state:{},point:{color:o,size:1,style:{fill:"white",lineWidth:0}}}}),f.geometries[0].adjust(adjustCfg),u.axis(!1),c.axis(!1),f.axis(!1),f.legend(!1),c.legend(!1),u.legend(!1),n}function meta$2(n){var r,e=n.chart,a=n.options,o=a.meta,s=a.xAxis,l=a.yAxis,c={},u=deepAssign(c,o,(r={},r[X_FIELD]=__assign$8(__assign$8({sync:!0},pick(s,AXIS_META_CONFIG_KEYS)),{type:"cat"}),r[VIOLIN_Y_FIELD]=__assign$8({sync:!0},pick(l,AXIS_META_CONFIG_KEYS)),r[MIN_MAX_FIELD]=__assign$8({sync:VIOLIN_Y_FIELD},pick(l,AXIS_META_CONFIG_KEYS)),r[QUANTILE_FIELD]=__assign$8({sync:VIOLIN_Y_FIELD},pick(l,AXIS_META_CONFIG_KEYS)),r[MEDIAN_FIELD]=__assign$8({sync:VIOLIN_Y_FIELD},pick(l,AXIS_META_CONFIG_KEYS)),r));return e.scale(u),n}function axis$1(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=findViewById(r,VIOLIN_VIEW_ID);return a===!1?s.axis(X_FIELD,!1):s.axis(X_FIELD,a),o===!1?s.axis(VIOLIN_Y_FIELD,!1):s.axis(VIOLIN_Y_FIELD,o),r.axis(!1),n}function legend$2(n){var r=n.chart,e=n.options,a=e.legend,o=e.seriesField,s=e.shape;if(a===!1)r.legend(!1);else{var l=o||X_FIELD,c=omit$1(a,["selected"]);(!s||!s.startsWith("hollow"))&&(get(c,["marker","style","lineWidth"])||set(c,["marker","style","lineWidth"],0)),r.legend(l,c),get(a,"selected")&&each$1(r.views,function(u){return u.legend(l,a)})}return n}function annotation(n){var r=n.chart,e=findViewById(r,VIOLIN_VIEW_ID);return annotation$2()(__assign$8(__assign$8({},n),{chart:e})),n}function animation(n){var r=n.chart,e=n.options,a=e.animation;return each$1(r.views,function(o){addViewAnimation(o,a)}),n}function adaptor$2(n){return flow(theme$2,data,violinView,boxView,meta$2,tooltip$9,axis$1,legend$2,interaction$8,annotation,animation)(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="violin",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$3},r.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(transformViolinData(this.options))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return adaptor$2},r})(Plot);var Y_FIELD="$$yField$$",DIFF_FIELD="$$diffField$$",ABSOLUTE_FIELD="$$absoluteField$$",IS_TOTAL="$$isTotal$$",DEFAULT_OPTIONS$2={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function getRectPath(n){for(var r=[],e=0;e<n.length;e++){var a=n[e];if(a){var o=e===0?"M":"L";r.push([o,a.x,a.y])}}var s=n[0];return r.push(["L",s.x,s.y]),r.push(["z"]),r}function getFillAttrs(n){return deepAssign({},n.defaultStyle,n.style,{fill:n.color})}registerShape("interval","waterfall",{draw:function(n,r){var e=n.customInfo,a=n.points,o=n.nextPoints,s=r.addGroup(),l=this.parsePath(getRectPath(a)),c=getFillAttrs(n);s.addShape("path",{attrs:__assign$8(__assign$8({},c),{path:l})});var u=get(e,"leaderLine");if(u&&o){var f=[["M",a[2].x,a[2].y],["L",o[0].x,o[0].y]];a[2].y===o[1].y&&(f[1]=["L",o[1].x,o[1].y]),f=this.parsePath(f),s.addShape("path",{attrs:__assign$8({path:f},u.style||{})})}return s}});function processData(n,r,e,a,o){var s,l=[];if(reduce(n,function(u,f){var d;log(LEVEL.WARN,isNumber$2(f[e]),"".concat(f[e]," is not a valid number"));var g=isUndefined$1(f[e])?null:f[e];return l.push(__assign$8(__assign$8({},f),(d={},d[a]=[u,u+g],d))),u+g},0),l.length&&o){var c=get(l,[[n.length-1],a,[1]]);l.push((s={},s[r]=o.label,s[e]=c,s[a]=[0,c],s))}return l}function transformData(n,r,e,a){var o=processData(n,r,e,Y_FIELD,a);return o.map(function(s,l){var c;return isObject$1(s)?__assign$8(__assign$8({},s),(c={},c[ABSOLUTE_FIELD]=s[Y_FIELD][1],c[DIFF_FIELD]=s[Y_FIELD][1]-s[Y_FIELD][0],c[IS_TOTAL]=l===n.length,c)):s})}function defaultOptions(n){var r=n.options,e=r.locale,a=r.total,o=getLocale(e).get(["waterfall","total"]);return a&&typeof a.label!="string"&&o&&(n.options.total.label=o),n}function geometry$1(n){var r=n.chart,e=n.options,a=e.data,o=e.xField,s=e.yField,l=e.total,c=e.leaderLine,u=e.columnWidthRatio,f=e.waterfallStyle,d=e.risingFill,g=e.fallingFill,v=e.color,p=e.shape,y=e.customInfo;r.data(transformData(a,o,s,l));var m=v||function(b){return get(b,[IS_TOTAL])?get(l,["style","fill"],""):get(b,[Y_FIELD,1])-get(b,[Y_FIELD,0])>0?d:g},x=deepAssign({},n,{options:{xField:o,yField:Y_FIELD,seriesField:o,rawFields:[s,DIFF_FIELD,IS_TOTAL,Y_FIELD],widthRatio:u,interval:{style:f,shape:p||"waterfall",color:m}}}),A=interval(x).ext,_=A.geometry;return _.customInfo(__assign$8(__assign$8({},y),{leaderLine:c})),n}function meta$1(n){var r,e,a=n.options,o=a.xAxis,s=a.yAxis,l=a.xField,c=a.yField,u=a.meta,f=deepAssign({},{alias:c},get(u,c));return flow(scale$2((r={},r[l]=o,r[c]=s,r[Y_FIELD]=s,r),deepAssign({},u,(e={},e[Y_FIELD]=f,e[DIFF_FIELD]=f,e[ABSOLUTE_FIELD]=f,e))))(n)}function axis(n){var r=n.chart,e=n.options,a=e.xAxis,o=e.yAxis,s=e.xField,l=e.yField;return a===!1?r.axis(s,!1):r.axis(s,a),o===!1?(r.axis(l,!1),r.axis(Y_FIELD,!1)):(r.axis(l,o),r.axis(Y_FIELD,o)),n}function legend$1(n){var r=n.chart,e=n.options,a=e.legend,o=e.total,s=e.risingFill,l=e.fallingFill,c=e.locale,u=getLocale(c);if(a===!1)r.legend(!1);else{var f=[{name:u.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:s}}},{name:u.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:l}}}];o&&f.push({name:o.label||"",value:"total",marker:{symbol:"square",style:deepAssign({},{r:5},get(o,"style"))}}),r.legend(deepAssign({},{custom:!0,position:"top",items:f},a)),r.removeInteraction("legend-filter")}return n}function label(n){var r=n.chart,e=n.options,a=e.label,o=e.labelMode,s=e.xField,l=findGeometry(r,"interval");if(!a)l.label(!1);else{var c=a.callback,u=__rest$1(a,["callback"]);l.label({fields:o==="absolute"?[ABSOLUTE_FIELD,s]:[DIFF_FIELD,s],callback:c,cfg:transformLabel(u)})}return n}function tooltip(n){var r=n.chart,e=n.options,a=e.tooltip,o=e.xField,s=e.yField;if(a!==!1){r.tooltip(__assign$8({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[s]},a));var l=r.geometries[0];a!=null&&a.formatter?l.tooltip("".concat(o,"*").concat(s),a.formatter):l.tooltip(s)}else r.tooltip(!1);return n}function adaptor$1(n){return flow(defaultOptions,theme$2,geometry$1,meta$1,axis,legend$1,tooltip,label,state,interaction$8,animation$5,annotation$2())(n)}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="waterfall",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$2},r.prototype.changeData=function(e){var a=this.options,o=a.xField,s=a.yField,l=a.total;this.updateOption({data:e}),this.chart.changeData(transformData(e,o,s,l))},r.prototype.getSchemaAdaptor=function(){return adaptor$1},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r})(Plot);var WORD_CLOUD_COLOR_FIELD="color",DEFAULT_OPTIONS$1=deepAssign({},Plot.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",WORD_CLOUD_COLOR_FIELD],formatter:function(n){return{name:n.text,value:n.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),DEFAULT_OPTIONS={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function wordCloud(n,r){return r=mix({},DEFAULT_OPTIONS,r),transform$1(n,r)}function transform$1(n,r){var e=tagCloud();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(u){isNil(r[u])||e[u](r[u])}),e.words(n),r.imageMask&&e.createMask(r.imageMask);var a=e.start(),o=a._tags;o.forEach(function(u){u.x+=r.size[0]/2,u.y+=r.size[1]/2});var s=r.size,l=s[0],c=s[1];return o.push({text:"",value:0,x:0,y:0,opacity:0}),o.push({text:"",value:0,x:l,y:c,opacity:0}),o}var cloudRadians=Math.PI/180,cw=64,ch=2048;function cloudText(n){return n.text}function cloudFont(){return"serif"}function cloudFontNormal(){return"normal"}function cloudFontSize(n){return n.value}function cloudRotate(){return~~(Math.random()*2)*90}function cloudPadding(){return 1}function cloudSprite(n,r,e,a){if(!r.sprite){var o=n.context,s=n.ratio;o.clearRect(0,0,(cw<<5)/s,ch/s);var l=0,c=0,u=0,f=e.length;for(--a;++a<f;){r=e[a],o.save(),o.font=r.style+" "+r.weight+" "+~~((r.size+1)/s)+"px "+r.font;var d=o.measureText(r.text+"m").width*s,g=r.size<<1;if(r.rotate){var v=Math.sin(r.rotate*cloudRadians),p=Math.cos(r.rotate*cloudRadians),y=d*p,m=d*v,x=g*p,A=g*v;d=Math.max(Math.abs(y+A),Math.abs(y-A))+31>>5<<5,g=~~Math.max(Math.abs(m+x),Math.abs(m-x))}else d=d+31>>5<<5;if(g>u&&(u=g),l+d>=cw<<5&&(l=0,c+=u,u=0),c+g>=ch)break;o.translate((l+(d>>1))/s,(c+(g>>1))/s),r.rotate&&o.rotate(r.rotate*cloudRadians),o.fillText(r.text,0,0),r.padding&&(o.lineWidth=2*r.padding,o.strokeText(r.text,0,0)),o.restore(),r.width=d,r.height=g,r.xoff=l,r.yoff=c,r.x1=d>>1,r.y1=g>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,l+=d}for(var _=o.getImageData(0,0,(cw<<5)/s,ch/s).data,b=[];--a>=0;)if(r=e[a],!!r.hasText){for(var d=r.width,S=d>>5,g=r.y1-r.y0,C=0;C<g*S;C++)b[C]=0;if(l=r.xoff,l==null)return;c=r.yoff;for(var E=0,T=-1,w=0;w<g;w++){for(var C=0;C<d;C++){var L=S*w+(C>>5),M=_[(c+w)*(cw<<5)+(l+C)<<2]?1<<31-C%32:0;b[L]|=M,E|=M}E?T=w:(r.y0++,g--,w--,c++)}r.y1=r.y0+T,r.sprite=b.slice(0,(r.y1-r.y0)*S)}}}function cloudCollide(n,r,e){e>>=5;for(var a=n.sprite,o=n.width>>5,s=n.x-(o<<4),l=s&127,c=32-l,u=n.y1-n.y0,f=(n.y+n.y0)*e+(s>>5),d,g=0;g<u;g++){d=0;for(var v=0;v<=o;v++)if((d<<c|(v<o?(d=a[g*o+v])>>>l:0))&r[f+v])return!0;f+=e}return!1}function cloudBounds(n,r){var e=n[0],a=n[1];r.x+r.x0<e.x&&(e.x=r.x+r.x0),r.y+r.y0<e.y&&(e.y=r.y+r.y0),r.x+r.x1>a.x&&(a.x=r.x+r.x1),r.y+r.y1>a.y&&(a.y=r.y+r.y1)}function collideRects(n,r){return n.x+n.x1>r[0].x&&n.x+n.x0<r[1].x&&n.y+n.y1>r[0].y&&n.y+n.y0<r[1].y}function archimedeanSpiral(n){var r=n[0]/n[1];return function(e){return[r*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function rectangularSpiral(n){var r=4,e=r*n[0]/n[1],a=0,o=0;return function(s){var l=s<0?-1:1;switch(Math.sqrt(1+4*l*s)-l&3){case 0:a+=e;break;case 1:o+=r;break;case 2:a-=e;break;default:o-=r;break}return[a,o]}}function zeroArray(n){for(var r=[],e=-1;++e<n;)r[e]=0;return r}function cloudCanvas(){return document.createElement("canvas")}function functor(n){return isFunction$1(n)?n:function(){return n}}var spirals={archimedean:archimedeanSpiral,rectangular:rectangularSpiral};function tagCloud(){var n=[256,256],r=cloudFont,e=cloudFontSize,a=cloudFontNormal,o=cloudRotate,s=cloudPadding,l=archimedeanSpiral,c=Math.random,u=[],f=1/0,d=cloudText,g=cloudFontNormal,v=cloudCanvas,p={};p.start=function(){var x=n[0],A=n[1],_=y(v()),b=p.board?p.board:zeroArray((n[0]>>5)*n[1]),S=u.length,C=[],E=u.map(function(M,O,P){return M.text=d.call(this,M,O,P),M.font=r.call(this,M,O,P),M.style=g.call(this,M,O,P),M.weight=a.call(this,M,O,P),M.rotate=o.call(this,M,O,P),M.size=~~e.call(this,M,O,P),M.padding=s.call(this,M,O,P),M}).sort(function(M,O){return O.size-M.size}),T=-1,w=p.board?[{x:0,y:0},{x,y:A}]:null;L();function L(){for(var M=Date.now();Date.now()-M<f&&++T<S;){var O=E[T];O.x=x*(c()+.5)>>1,O.y=A*(c()+.5)>>1,cloudSprite(_,O,E,T),O.hasText&&m(b,O,w)&&(C.push(O),w?p.hasImage||cloudBounds(w,O):w=[{x:O.x+O.x0,y:O.y+O.y0},{x:O.x+O.x1,y:O.y+O.y1}],O.x-=n[0]>>1,O.y-=n[1]>>1)}p._tags=C,p._bounds=w}return p};function y(x){x.width=x.height=1;var A=Math.sqrt(x.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);x.width=(cw<<5)/A,x.height=ch/A;var _=x.getContext("2d",{willReadFrequently:!0});return _.fillStyle=_.strokeStyle="red",_.textAlign="center",{context:_,ratio:A}}function m(x,A,_){for(var b=A.x,S=A.y,C=Math.sqrt(n[0]*n[0]+n[1]*n[1]),E=l(n),T=c()<.5?1:-1,w,L=-T,M,O;(w=E(L+=T))&&(M=~~w[0],O=~~w[1],!(Math.min(Math.abs(M),Math.abs(O))>=C));)if(A.x=b+M,A.y=S+O,!(A.x+A.x0<0||A.y+A.y0<0||A.x+A.x1>n[0]||A.y+A.y1>n[1])&&(!_||!cloudCollide(A,x,n[0]))&&(!_||collideRects(A,_))){for(var P=A.sprite,N=A.width>>5,G=n[0]>>5,Y=A.x-(N<<4),F=Y&127,z=32-F,W=A.y1-A.y0,j=void 0,U=(A.y+A.y0)*G+(Y>>5),X=0;X<W;X++){j=0;for(var tt=0;tt<=N;tt++)x[U+tt]|=j<<z|(tt<N?(j=P[X*N+tt])>>>F:0);U+=G}return delete A.sprite,!0}return!1}return p.createMask=function(x){var A=document.createElement("canvas"),_=n[0],b=n[1];if(!(!_||!b)){var S=_>>5,C=zeroArray((_>>5)*b);A.width=_,A.height=b;var E=A.getContext("2d");E.drawImage(x,0,0,x.width,x.height,0,0,_,b);for(var T=E.getImageData(0,0,_,b).data,w=0;w<b;w++)for(var L=0;L<_;L++){var M=S*w+(L>>5),O=w*_+L<<2,P=T[O]>=250&&T[O+1]>=250&&T[O+2]>=250,N=P?1<<31-L%32:0;C[M]|=N}p.board=C,p.hasImage=!0}},p.timeInterval=function(x){f=x??1/0},p.words=function(x){u=x},p.size=function(x){n=[+x[0],+x[1]]},p.font=function(x){r=functor(x)},p.fontWeight=function(x){a=functor(x)},p.rotate=function(x){o=functor(x)},p.spiral=function(x){l=spirals[x]||x},p.fontSize=function(x){e=functor(x)},p.padding=function(x){s=functor(x)},p.random=function(x){c=functor(x)},p}function transform(n){var r=n.options,e=n.chart,a=e,o=a.width,s=a.height,l=a.padding,c=a.appendPadding,u=a.ele,f=r.data,d=r.imageMask,g=r.wordField,v=r.weightField,p=r.colorField,y=r.wordStyle,m=r.timeInterval,x=r.random,A=r.spiral,_=r.autoFit,b=_===void 0?!0:_,S=r.placementStrategy;if(!f||!f.length)return[];var C=y.fontFamily,E=y.fontWeight,T=y.padding,w=y.fontSize,L=getSingleKeyValues(f,v),M=[min(L),max(L)],O=f.map(function(G){return{text:G[g],value:G[v],color:G[p],datum:G}}),P={imageMask:d,font:C,fontSize:getFontSizeMapping(w,M),fontWeight:E,size:getSize({width:o,height:s,padding:l,appendPadding:c,autoFit:b,container:u}),padding:T,timeInterval:m,random:x,spiral:A,rotate:getRotate(r)};if(isFunction$1(S)){var N=O.map(function(G,Y,F){return __assign$8(__assign$8(__assign$8({},G),{hasText:!!G.text,font:functor(P.font)(G,Y,F),weight:functor(P.fontWeight)(G,Y,F),rotate:functor(P.rotate)(G,Y,F),size:functor(P.fontSize)(G,Y,F),style:"normal"}),S.call(e,G,Y,F))});return N.push({text:"",value:0,x:0,y:0,opacity:0}),N.push({text:"",value:0,x:P.size[0],y:P.size[1],opacity:0}),N}return wordCloud(O,P)}function getSize(n){var r=n.width,e=n.height,a=n.container,o=n.autoFit,s=n.padding,l=n.appendPadding;if(o){var c=getContainerSize(a);r=c.width,e=c.height}r=r||400,e=e||400;var u=resolvePadding({padding:s,appendPadding:l}),f=u[0],d=u[1],g=u[2],v=u[3],p=[r-(v+d),e-(f+g)];return p}function resolvePadding(n){var r=normalPadding(n.padding),e=normalPadding(n.appendPadding),a=r[0]+e[0],o=r[1]+e[1],s=r[2]+e[2],l=r[3]+e[3];return[a,o,s,l]}function processImageMask(n){return new Promise(function(r,e){if(n instanceof HTMLImageElement){r(n);return}if(isString$1(n)){var a=new Image;a.crossOrigin="anonymous",a.src=n,a.onload=function(){r(a)},a.onerror=function(){log(LEVEL.ERROR,!1,"image %s load failed !!!",n),e()};return}log(LEVEL.WARN,n===void 0,"The type of imageMask option must be String or HTMLImageElement."),e()})}function getFontSizeMapping(n,r){if(isFunction$1(n))return n;if(isArray$4(n)){var e=n[0],a=n[1];if(!r)return function(){return(a+e)/2};var o=r[0],s=r[1];return s===o?function(){return(a+e)/2}:function(c){var u=c.value;return(a-e)/(s-o)*(u-o)+e}}return function(){return n}}function getSingleKeyValues(n,r){return n.map(function(e){return e[r]}).filter(function(e){return typeof e=="number"&&!isNaN(e)})}function getRotate(n){var r=resolveRotate(n),e=r.rotation,a=r.rotationSteps;if(!isArray$4(e))return e;var o=e[0],s=e[1],l=a===1?0:(s-o)/(a-1);return function(){return s===o?s:Math.floor(Math.random()*a)*l}}function resolveRotate(n){var r=n.wordStyle.rotationSteps;return r<1&&(log(LEVEL.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),r=1),{rotation:n.wordStyle.rotation,rotationSteps:r}}function min(n){return Math.min.apply(Math,n)}function max(n){return Math.max.apply(Math,n)}function geometry(n){var r=n.chart,e=n.options,a=e.colorField,o=e.color,s=transform(n);r.data(s);var l=deepAssign({},n,{options:{xField:"x",yField:"y",seriesField:a&&WORD_CLOUD_COLOR_FIELD,rawFields:isFunction$1(o)&&__spreadArray$2(__spreadArray$2([],get(e,"rawFields",[]),!0),["datum"],!1),point:{color:o,shape:"word-cloud"}}}),c=point(l).ext;return c.geometry.label(!1),r.coordinate().reflect("y"),r.axis(!1),n}function meta(n){return flow(scale$2({x:{nice:!1},y:{nice:!1}}))(n)}function legend(n){var r=n.chart,e=n.options,a=e.legend,o=e.colorField;return a===!1?r.legend(!1):o&&r.legend(WORD_CLOUD_COLOR_FIELD,a),n}function adaptor(n){flow(geometry,meta,tooltip$9,legend,interaction$8,animation$5,theme$2,state)(n)}registerShape("point","word-cloud",{draw:function(n,r){var e=n.x,a=n.y,o=r.addShape("text",{attrs:__assign$8(__assign$8({},getTextAttrs(n)),{x:e,y:a})}),s=n.data.rotate;return typeof s=="number"&&Util.rotate(o,s*Math.PI/180),o}});function getTextAttrs(n){return{fontSize:n.data.size,text:n.data.text,textAlign:"center",fontFamily:n.data.font,fontWeight:n.data.weight,fill:n.color||n.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(n){__extends$7(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="word-cloud",e}return r.getDefaultOptions=function(){return DEFAULT_OPTIONS$1},r.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(transform({chart:this.chart,options:this.options}))},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.render=function(){var e=this;return new Promise(function(a){var o=e.options.imageMask;if(!o){n.prototype.render.call(e),a();return}var s=function(l){e.options=__assign$8(__assign$8({},e.options),{imageMask:l||null}),n.prototype.render.call(e),a()};processImageMask(o).then(s).catch(s)})},r.prototype.getSchemaAdaptor=function(){return adaptor},r.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){n.prototype.triggerResize.call(e)}))},r})(Plot);(function(n){__extends$7(r,n);function r(e,a,o,s){var l=n.call(this,e,deepAssign({},s,a))||this;return l.type="g2-plot",l.defaultOptions=s,l.adaptor=o,l}return r.prototype.getDefaultOptions=function(){return this.defaultOptions},r.prototype.getSchemaAdaptor=function(){return this.adaptor},r})(Plot);registerLocale("en-US",EN_US_LOCALE);registerLocale("zh-CN",ZH_CN_LOCALE);class AntdCommonAreaController extends AntdBaseDesignerController{async create(r,e){await super.commonCreate(r,Area,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,Area,e)}updateTheme(r){var f,d,g,v,p,y,m,x,A,_,b,S,C,E,T,w,L,M,O,P,N,G,Y,F,z,W,j,U,X;const{type:e}=(f=this.config)==null?void 0:f.base;if(!r)return;const a=(d=this.config)==null?void 0:d.style,{colors:{main:o,mainText:s,subText:l,supplementFirst:c,supplementSecond:u}}=r;a!=null&&a.color&&(e==="AntdBaseArea"?a.color=o:a.color=[o,c,u]),a!=null&&a.point&&((g=a==null?void 0:a.point)!=null&&g.style)&&(a.point.style.fill=o),a!=null&&a.line&&((v=a==null?void 0:a.line)!=null&&v.style)&&(a.line.style.stroke=o),a.legend&&((p=a.legend.itemName)!=null&&p.style)&&(a.legend.itemName.style.fill=s),a!=null&&a.xAxis&&((m=(y=a==null?void 0:a.xAxis)==null?void 0:y.label)!=null&&m.style)&&(a.xAxis.label.style.fill=l),a!=null&&a.xAxis&&((x=a==null?void 0:a.xAxis)!=null&&x.title)&&(a.xAxis.title.style.fill=s),a!=null&&a.xAxis&&((_=(A=a==null?void 0:a.xAxis)==null?void 0:A.line)!=null&&_.style)&&(a.xAxis.line.style.stroke=c),a!=null&&a.xAxis&&((C=(S=(b=a==null?void 0:a.xAxis)==null?void 0:b.grid)==null?void 0:S.line)!=null&&C.style)&&(a.xAxis.grid.line.style.stroke=c),a!=null&&a.xAxis&&((T=(E=a==null?void 0:a.xAxis)==null?void 0:E.tickLine)!=null&&T.style)&&(a.xAxis.tickLine.style.stroke=u),a!=null&&a.xAxis&&((L=(w=a==null?void 0:a.xAxis)==null?void 0:w.subTickLine)!=null&&L.style)&&(a.xAxis.subTickLine.style.stroke=u),a!=null&&a.yAxis&&((O=(M=a==null?void 0:a.yAxis)==null?void 0:M.label)!=null&&O.style)&&(a.yAxis.label.style.fill=l),a!=null&&a.yAxis&&((P=a==null?void 0:a.yAxis)!=null&&P.title)&&(a.yAxis.title.style.fill=s),a!=null&&a.yAxis&&((G=(N=a==null?void 0:a.yAxis)==null?void 0:N.line)!=null&&G.style)&&(a.yAxis.line.style.stroke=c),a!=null&&a.yAxis&&((z=(F=(Y=a==null?void 0:a.yAxis)==null?void 0:Y.grid)==null?void 0:F.line)!=null&&z.style)&&(a.yAxis.grid.line.style.stroke=c),a!=null&&a.yAxis&&((j=(W=a==null?void 0:a.yAxis)==null?void 0:W.tickLine)!=null&&j.style)&&(a.yAxis.tickLine.style.stroke=u),a!=null&&a.yAxis&&((X=(U=a==null?void 0:a.yAxis)==null?void 0:U.subTickLine)!=null&&X.style)&&(a.yAxis.subTickLine.style.stroke=u),this.update({style:a},{reRender:!0})}}const __vite_glob_0_4=Object.freeze(Object.defineProperty({__proto__:null,default:AntdCommonAreaController},Symbol.toStringTag,{value:"Module"}));class AxisConfig extends reactExports.Component{constructor(e){super(e);R(this,"defaultData",{label:{style:{fill:"#00FFEAFF"}},line:{style:{stroke:"#00dbffff",lineWidth:1}}});R(this,"oldData");R(this,"emptyData",{grid:null,line:null,title:null,label:null,tickLine:null,subTickLine:null});this.oldData={...e==null?void 0:e.config}}render(){const{config:e,title:a="坐标轴",onChange:o}=this.props,{grid:s,line:l,label:c,title:u,tickLine:f,subTickLine:d}=e||{},g=!!(s||l||c||u||f||d);return jsxRuntimeExports.jsxs(Accordion,{label:a,showSwitch:!0,defaultValue:g,onChange:v=>{o(v?lodashExports.isEqual(this.oldData,this.emptyData)?this.defaultData:this.oldData:this.emptyData)},children:[jsxRuntimeExports.jsx(Radio,{label:"位置",defaultValue:(e==null?void 0:e.position)||"right",containerStyle:{marginBottom:10},onChange:v=>o({position:v}),options:[{label:"上",value:"top"},{label:"下",value:"bottom"},{label:"左",value:"left"},{label:"右",value:"right"}]}),jsxRuntimeExports.jsx(AxisText,{config:e==null?void 0:e.label,onChange:v=>o({label:v})}),jsxRuntimeExports.jsx(AxisTitle,{config:e==null?void 0:e.title,onChange:v=>o({title:v})}),jsxRuntimeExports.jsx(AxisLine,{config:e==null?void 0:e.line,onChange:v=>o({line:v})}),jsxRuntimeExports.jsx(AxisGridLine,{config:e==null?void 0:e.grid,onChange:v=>o({grid:v})}),jsxRuntimeExports.jsx(AxisTickLine,{config:e==null?void 0:e.tickLine,onChange:v=>o({tickLine:v})}),jsxRuntimeExports.jsx(AxisSubTickLine,{config:e==null?void 0:e.subTickLine,onChange:v=>o({subTickLine:v})})]})}}const AxisSubTickLine=({config:n,onChange:r})=>{var l,c;const[e,a]=reactExports.useState(n),o=u=>{const{id:f,data:d}=u;if(f==="subTickLineSwitch")if(d){const g={count:5,length:1,style:{stroke:"#6e6e6e",lineWidth:1}};r(g),a(g)}else r(null),a(null);else r(u.dataFragment)},s={type:"card-panel",label:"子刻度",children:[{type:"grid",config:{columns:2},children:[{key:"subTickLineSwitch",id:"subTickLineSwitch",type:"switch",label:"开启",value:!!e},{rules:"{subTickLineSwitch}==='true'",key:"count",type:"number-input",label:"数量",value:e==null?void 0:e.count,config:{min:0,max:100}},{rules:"{subTickLineSwitch}==='true'",key:"length",type:"number-input",label:"长度",value:e==null?void 0:e.length,config:{min:0,max:10}},{rules:"{subTickLineSwitch}==='true'",key:"style",children:[{key:"lineWidth",type:"number-input",label:"宽度",value:(l=e==null?void 0:e.style)==null?void 0:l.lineWidth,config:{min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:(c=e==null?void 0:e.style)==null?void 0:c.stroke,config:{showText:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})},AxisTickLine=({config:n,onChange:r})=>{var l,c;const[e,a]=reactExports.useState(n),o=u=>{const{id:f,data:d}=u;if(f==="tickLineSwitch")if(d){const g={alignTick:!0,length:1,style:{stroke:"#6e6e6e",lineWidth:1}};r(g),a(g)}else r(null),a(null);else r(u.dataFragment)},s={type:"card-panel",label:"刻度线",children:[{type:"grid",config:{columns:2},children:[{key:"tickLineSwitch",id:"tickLineSwitch",type:"switch",label:"开启",value:!!e},{key:"alignTick",rules:"{tickLineSwitch}==='true'",type:"switch",label:"对齐",value:e==null?void 0:e.alignTick},{key:"length",rules:"{tickLineSwitch}==='true'",type:"number-input",label:"长度",value:e==null?void 0:e.length,config:{min:0,max:10}},{key:"style",rules:"{tickLineSwitch}==='true'",children:[{key:"lineWidth",type:"number-input",label:"宽度",value:(l=e==null?void 0:e.style)==null?void 0:l.lineWidth,config:{min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:(c=e==null?void 0:e.style)==null?void 0:c.stroke,config:{showText:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})},AxisGridLine=({config:n,onChange:r})=>{var l,c,u,f;const[e,a]=reactExports.useState(n),o=d=>{const{id:g,data:v}=d;if(g==="gridLineSwitch")if(v){const p={alignTick:!0,line:{style:{stroke:"#5c5c5c",lineWidth:1},type:"line"}};r(p),a(p)}else r(null),a(null);else r(d.dataFragment)},s={type:"card-panel",label:"网格线",children:[{type:"grid",config:{columns:2},children:[{key:"gridLineSwitch",id:"gridLineSwitch",type:"switch",label:"开启",value:!!e},{rules:"{gridLineSwitch} === 'true'",key:"alignTick",type:"switch",label:"对齐",value:e==null?void 0:e.alignTick},{rules:"{gridLineSwitch} === 'true'",key:"line",children:[{key:"style",children:[{key:"lineWidth",type:"number-input",label:"宽度",value:(c=(l=e==null?void 0:e.line)==null?void 0:l.style)==null?void 0:c.lineWidth,config:{min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:(f=(u=e==null?void 0:e.line)==null?void 0:u.style)==null?void 0:f.stroke,config:{showText:!0}}]}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})},AxisLine=({config:n,onChange:r})=>{var l,c;const[e,a]=reactExports.useState(n),o=u=>{const{id:f,data:d}=u;f==="lineSwitch"?d?(r({style:{stroke:"#595959",lineWidth:1}}),a({style:{stroke:"#595959",lineWidth:1}})):(r(null),a(null)):r(u.dataFragment)},s={type:"card-panel",label:"轴线",children:[{type:"grid",config:{columns:2},children:[{key:"lineSwitch",id:"lineSwitch",type:"switch",label:"开启",value:!!e},{key:"style",rules:"{lineSwitch} === 'true'",children:[{key:"lineWidth",type:"number-input",label:"宽度",value:((l=e==null?void 0:e.style)==null?void 0:l.lineWidth)||1,config:{min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:((c=e==null?void 0:e.style)==null?void 0:c.stroke)||"#595959",config:{showText:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})},AxisTitle=({config:n,onChange:r})=>{const[e,a]=reactExports.useState(n),o=l=>{const{id:c,data:u}=l;c==="titleSwitch"?u?(r({text:"标题",offset:0,style:{fill:"#d2d2d2",fontSize:12}}),a({text:"标题",offset:0,style:{fill:"#d2d2d2",fontSize:12}})):(r(null),a(null)):r(l.dataFragment)},s={type:"card-panel",label:"标题",children:[{type:"grid",config:{columns:2},children:[{key:"titleSwitch",id:"titleSwitch",type:"switch",label:"开启",reRender:!0,value:!!e},{rules:"{titleSwitch} === 'true'",children:[{key:"position",type:"select",label:"位置",value:(e==null?void 0:e.position)||"center",config:{options:[{value:"start",label:"前"},{value:"center",label:"中"},{value:"end",label:"后"}]}},{key:"text",type:"input",label:"内容",value:(e==null?void 0:e.text)||"标题"},{key:"offset",type:"number-input",label:"偏移",value:(e==null?void 0:e.offset)||0},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:12,config:{min:1,max:50}},{key:"fill",type:"color-picker",label:"颜色",value:"#1c1c1c",config:{showText:!0}}]}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})},AxisText=({config:n,onChange:r})=>{const{offset:e,style:a,rotate:o}=n||{},s=c=>{r(c.dataFragment)},l={type:"card-panel",label:"文本",children:[{type:"grid",config:{columns:2},children:[{key:"rotate",type:"number-input",label:"角度",value:o||0,config:{min:0,max:360}},{key:"offset",type:"number-input",label:"偏移",value:e||0},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:(a==null?void 0:a.fontSize)||12,config:{min:1,max:50}},{key:"fill",type:"color-picker",label:"颜色",value:(a==null?void 0:a.fill)||"#1c1c1c",config:{showText:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:l,onFieldChange:s})},AntdCartesianCoordinateSys=({config:n,onChange:r})=>{const e=o=>{r({xAxis:o})},a=o=>{r({yAxis:o})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AxisConfig,{title:"X轴",config:n==null?void 0:n.xAxis,onChange:e}),jsxRuntimeExports.jsx(AxisConfig,{title:"Y轴",config:n==null?void 0:n.yAxis,onChange:a})]})},AntdLegend=n=>{const{controller:r}=n,{legend:e}=r.getConfig().style,a=s=>{const{id:l,data:c,dataFragment:u}=s;l==="legendSwitch"?c?r.update({style:{legend:e}}):r.update({style:{legend:!1}}):r.update(u)},o={key:"style",id:"legendSwitch",type:"accordion",label:"图例",config:{showSwitch:!0},value:!!e,children:[{key:"legend",type:"grid",config:{columns:2},children:[{key:"position",type:"select",label:"位置",value:"left-top",config:{options:[{value:"left-top",label:"左上"},{value:"left",label:"正左"},{value:"left-bottom",label:"左下"},{value:"top-left",label:"上左"},{value:"top",label:"正上"},{value:"top-right",label:"上右"},{value:"right-top",label:"右上"},{value:"right",label:"正右"},{value:"right-bottom",label:"右下"},{value:"bottom-left",label:"下左"},{value:"bottom",label:"正下"},{value:"bottom-right",label:"下右"}]}},{key:"layout",type:"select",label:"方向",value:"horizontal",config:{options:[{value:"horizontal",label:"水平"},{value:"vertical",label:"垂直"}]}},{key:"itemName",children:[{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:12,config:{min:0,max:100}},{key:"fill",type:"color-picker",label:"颜色",value:"#1c1c1c",config:{showText:!0}}]}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:o,onFieldChange:a})};let AntdAreaCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);R(this,"legendChange",e=>{this.props.controller.update({style:{legend:e}})});R(this,"areaCoordinateSysChange",e=>{this.props.controller.update({style:e})});R(this,"areaGraphicsChange",e=>{this.props.controller.update({style:e})})}render(){const{controller:e}=this.props,a=e.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdCommonAreaGraphics,{config:a,onChange:this.areaGraphicsChange}),jsxRuntimeExports.jsx(AntdLegend,{controller:e}),jsxRuntimeExports.jsx(AntdCartesianCoordinateSys,{onChange:this.areaCoordinateSysChange,config:a})]})}};const AntdCommonAreaGraphics=({config:n,onChange:r})=>{var o,s,l,c,u,f,d;const e=g=>{const{id:v,data:p,dataFragment:y}=g;console.log(v,p,y),v==="areaColor"?p&&Array.isArray(p)?r({color:p,areaStyle:{fill:void 0}}):p&&typeof p=="string"&&p.indexOf("gradient")!==-1||r({areaStyle:{fill:p}}):r&&r(y)},a={type:"accordion",label:"图形",children:[{type:"card-panel",label:"数据点",key:"point",children:[{type:"grid",config:{columns:2},children:[{key:"size",type:"number-input",label:"尺寸",value:((o=n==null?void 0:n.point)==null?void 0:o.size)||0,config:{min:0,max:100}},{key:"shape",type:"select",label:"形状",value:((s=n==null?void 0:n.point)==null?void 0:s.shape)||"circle",config:{options:[{value:"circle",label:"圈形"},{value:"square",label:"方形"},{value:"bowtie",label:"领结"},{value:"diamond",label:"钻石"},{value:"hexagon",label:"六角形"},{value:"triangle",label:"三角形"}]}},{key:"style",children:[{key:"fill",type:"color-picker",label:"颜色",value:((c=(l=n==null?void 0:n.point)==null?void 0:l.style)==null?void 0:c.fill)||"#1c1c1c",config:{showText:!0}}]}]}]},{type:"card-panel",label:"数据线",children:[{type:"grid",config:{columns:2},children:[{key:"smooth",type:"switch",label:"平滑",value:(n==null?void 0:n.smooth)||!1},{key:"line",children:[{key:"style",children:[{key:"lineWidth",type:"number-input",label:"宽度",value:((f=(u=n==null?void 0:n.line)==null?void 0:u.style)==null?void 0:f.lineWidth)||0,config:{min:0,max:100}}]}]}]}]},{type:"card-panel",label:"数据面",children:[{type:"grid",children:[{id:"areaColor",type:"color-mode",label:"颜色",value:((d=n==null?void 0:n.areaStyle)==null?void 0:d.fill)||"#1c1c1c"}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:e})},AntdAreaFieldMapping=({controller:n})=>{const r=AntdCommonUtil.getDataFieldOptions(n),e={type:"grid",config:{columns:2},children:[{type:"select",label:"X字段",value:"country",config:{options:r}},{type:"select",label:"Y字段",config:{options:r}},{type:"select",label:"分组字段",config:{options:r}}]},a=o=>{};return jsxRuntimeExports.jsx(LCGUI,{schema:e,onFieldChange:a})},AntdAreaCommonFieldMapping=n=>{const{controller:r}=n,e=r.config.style,a=AntdCommonUtil.getDataFieldOptions(r),o={key:"style",type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:e.xField,config:{options:a}},{key:"yField",type:"select",label:"Y字段",value:e.yField,config:{options:a}},{key:"seriesField",type:"select",label:"分组字段",value:e.seriesField,config:{options:a}}]},s=l=>{r.update(l.dataFragment)};return jsxRuntimeExports.jsx(LCGUI,{schema:o,onFieldChange:s})},AntdAreaCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdAreaCommonFieldMapping,AntdAreaCommonStyleConfig:AntdAreaCommonStyleConfig$1,AntdAreaFieldMapping,AntdCommonAreaGraphics},Symbol.toStringTag,{value:"Module"})),AnimationConfig$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdAreaCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdAreaCommonConfig),void 0).then(n=>({default:n.AntdAreaCommonStyleConfig}))),ThemeConfig$c=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$c=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$c=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractAreaDefinition extends AntdCommonDefinition{getController(){return AntdCommonAreaController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$c,data:DataConfig$c,style:AntdAreaCommonStyleConfig,animation:AnimationConfig$b,theme:ThemeConfig$c,mapping:AntdAreaCommonFieldMapping}}}const __vite_glob_0_3=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractAreaDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonBarController extends AntdBaseDesignerController{async create(r,e){await super.commonCreate(r,Bar,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,Bar,e)}updateTheme(r){var u,f,d,g,v,p,y,m,x,A,_,b,S,C,E,T,w,L,M,O,P,N,G,Y,F,z;if(!r)return;const e=(u=this.config)==null?void 0:u.style,{colors:{main:a,mainText:o,supplementSecond:s,supplementFirst:l,subText:c}}=r;e!=null&&e.color&&(e.barStyle={fill:void 0},e.color=[a,l,s]),e.legend&&((f=e.legend.itemName)!=null&&f.style)&&(e.legend.itemName.style.fill=o),e!=null&&e.xAxis&&((g=(d=e==null?void 0:e.xAxis)==null?void 0:d.label)!=null&&g.style)&&(e.xAxis.label.style.fill=c),e!=null&&e.xAxis&&((v=e==null?void 0:e.xAxis)!=null&&v.title)&&(e.xAxis.title.style.fill=o),e!=null&&e.xAxis&&((y=(p=e==null?void 0:e.xAxis)==null?void 0:p.line)!=null&&y.style)&&(e.xAxis.line.style.stroke=l),e!=null&&e.xAxis&&((A=(x=(m=e==null?void 0:e.xAxis)==null?void 0:m.grid)==null?void 0:x.line)!=null&&A.style)&&(e.xAxis.grid.line.style.stroke=l),e!=null&&e.xAxis&&((b=(_=e==null?void 0:e.xAxis)==null?void 0:_.tickLine)!=null&&b.style)&&(e.xAxis.tickLine.style.stroke=l),e!=null&&e.xAxis&&((C=(S=e==null?void 0:e.xAxis)==null?void 0:S.subTickLine)!=null&&C.style)&&(e.xAxis.subTickLine.style.stroke=s),e!=null&&e.yAxis&&((T=(E=e==null?void 0:e.yAxis)==null?void 0:E.label)!=null&&T.style)&&(e.yAxis.label.style.fill=c),e!=null&&e.yAxis&&((w=e==null?void 0:e.yAxis)!=null&&w.title)&&(e.yAxis.title.style.fill=o),e!=null&&e.yAxis&&((M=(L=e==null?void 0:e.yAxis)==null?void 0:L.line)!=null&&M.style)&&(e.yAxis.line.style.stroke=l),e!=null&&e.yAxis&&((N=(P=(O=e==null?void 0:e.yAxis)==null?void 0:O.grid)==null?void 0:P.line)!=null&&N.style)&&(e.yAxis.grid.line.style.stroke=l),e!=null&&e.yAxis&&((Y=(G=e==null?void 0:e.yAxis)==null?void 0:G.tickLine)!=null&&Y.style)&&(e.yAxis.tickLine.style.stroke=l),e!=null&&e.yAxis&&((z=(F=e==null?void 0:e.yAxis)==null?void 0:F.subTickLine)!=null&&z.style)&&(e.yAxis.subTickLine.style.stroke=s),this.update({style:e},{reRender:!0})}}const __vite_glob_0_6=Object.freeze(Object.defineProperty({__proto__:null,default:AntdCommonBarController},Symbol.toStringTag,{value:"Module"}));let AntdBarCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);R(this,"legendChange",e=>{this.props.controller.update({style:{legend:e}})});R(this,"barGraphicsChange",e=>{this.props.controller.update({style:e})});R(this,"barCoordinateSysChange",e=>{this.props.controller.update({style:e})})}render(){const{controller:e}=this.props,a=e.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdBarGraphics,{controller:e}),jsxRuntimeExports.jsx(AntdLegend,{controller:e}),jsxRuntimeExports.jsx(AntdCartesianCoordinateSys,{onChange:this.barCoordinateSysChange,config:a})]})}};const AntdBarGraphics=({controller:n})=>{const r=n.getConfig().style,e=o=>{const{id:s,data:l,dataFragment:c}=o;s==="barColor"?l&&Array.isArray(l)?n.update({style:{color:l,barStyle:{fill:void 0}}}):l&&typeof l=="string"&&l.indexOf("gradient")!==-1||n.update({style:{barStyle:{fill:l}}}):n.update(c)},a={key:"style",type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2},children:[{key:"maxBarWidth",type:"number-input",label:"宽度",value:r==null?void 0:r.maxBarWidth,config:{min:1,max:100}},{id:"barColor",type:"color-mode",label:"颜色",value:"#1c1c1c",config:{containerStyle:{gridColumn:"1/3"}}}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:e})},AntdBarFieldMapping=({controller:n})=>{const r=n.getConfig().style,{data:e,xField:a,yField:o,seriesField:s}=r,l=[];if(e&&e.length>=1){const f=e[0];Object.keys(f).forEach(d=>l.push({label:d,value:d}))}const c=f=>{n.update(f.dataFragment)},u={key:"style",type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:a,config:{options:l}},{key:"yField",type:"select",label:"Y字段",value:o,config:{options:l}},{key:"seriesField",type:"select",label:"分组字段",value:s,config:{options:l}}]};return jsxRuntimeExports.jsx(LCGUI,{schema:u,onFieldChange:c})},AntdBarCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdBarCommonStyleConfig:AntdBarCommonStyleConfig$1,AntdBarFieldMapping,AntdBarGraphics},Symbol.toStringTag,{value:"Module"})),AnimationConfig$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdBarCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdBarCommonConfig),void 0).then(n=>({default:n.AntdBarCommonStyleConfig}))),ThemeConfig$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractBarDefinition extends AntdCommonDefinition{getController(){return AntdCommonBarController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$b,data:DataConfig$b,style:AntdBarCommonStyleConfig,animation:AnimationConfig$a,theme:ThemeConfig$b,mapping:AntdBarFieldMapping}}}const __vite_glob_0_5=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractBarDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonColumnController extends AntdBaseDesignerController{async create(r,e){await super.commonCreate(r,Column,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,Column,e)}updateTheme(r){var u,f,d,g,v,p,y,m,x,A,_,b,S,C,E,T,w,L,M,O,P,N,G,Y,F,z,W;if(!r)return;const e=(u=this.config)==null?void 0:u.style,{colors:{main:a,mainText:o,supplementSecond:s,supplementFirst:l,subText:c}}=r;e!=null&&e.color&&(e.columnStyle={fill:void 0},e.color=[a,l,s]),e.legend&&((f=e.legend.itemName)!=null&&f.style)&&(e.legend.itemName.style.fill=o),e!=null&&e.xAxis&&((v=(g=(d=e==null?void 0:e.xAxis)==null?void 0:d.label)==null?void 0:g.style)!=null&&v.fill)&&(e.xAxis.label.style.fill=c),e!=null&&e.xAxis&&((p=e==null?void 0:e.xAxis)!=null&&p.title)&&(e.xAxis.title.style.fill=o),e!=null&&e.xAxis&&((m=(y=e==null?void 0:e.xAxis)==null?void 0:y.line)!=null&&m.style)&&(e.xAxis.line.style.stroke=l),e!=null&&e.xAxis&&((_=(A=(x=e==null?void 0:e.xAxis)==null?void 0:x.grid)==null?void 0:A.line)!=null&&_.style)&&(e.xAxis.grid.line.style.stroke=l),e!=null&&e.xAxis&&((S=(b=e==null?void 0:e.xAxis)==null?void 0:b.tickLine)!=null&&S.style)&&(e.xAxis.tickLine.style.stroke=l),e!=null&&e.xAxis&&((E=(C=e==null?void 0:e.xAxis)==null?void 0:C.subTickLine)!=null&&E.style)&&(e.xAxis.subTickLine.style.stroke=s),e!=null&&e.yAxis&&((w=(T=e==null?void 0:e.yAxis)==null?void 0:T.label)!=null&&w.style)&&(e.yAxis.label.style.fill=o),e!=null&&e.yAxis&&((L=e==null?void 0:e.yAxis)!=null&&L.title)&&(e.yAxis.title.style.fill=o),e!=null&&e.yAxis&&((O=(M=e==null?void 0:e.yAxis)==null?void 0:M.line)!=null&&O.style)&&(e.yAxis.line.style.stroke=l),e!=null&&e.yAxis&&((G=(N=(P=e==null?void 0:e.yAxis)==null?void 0:P.grid)==null?void 0:N.line)!=null&&G.style)&&(e.yAxis.grid.line.style.stroke=l),e!=null&&e.yAxis&&((F=(Y=e==null?void 0:e.yAxis)==null?void 0:Y.tickLine)!=null&&F.style)&&(e.yAxis.tickLine.style.stroke=l),e!=null&&e.yAxis&&((W=(z=e==null?void 0:e.yAxis)==null?void 0:z.subTickLine)!=null&&W.style)&&(e.yAxis.subTickLine.style.stroke=s),this.update({style:e},{reRender:!0})}}const __vite_glob_0_8=Object.freeze(Object.defineProperty({__proto__:null,default:AntdCommonColumnController},Symbol.toStringTag,{value:"Module"}));let AntdColumnCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);R(this,"legendChange",e=>{this.props.controller.update({style:{legend:e}})});R(this,"barGraphicsChange",e=>{this.props.controller.update({style:e})});R(this,"barCoordinateSysChange",e=>{this.props.controller.update({style:e})})}render(){const{controller:e}=this.props,a=e.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdColumnGraphics,{onChange:this.barGraphicsChange,config:a}),jsxRuntimeExports.jsx(AntdLegend,{controller:e}),jsxRuntimeExports.jsx(AntdCartesianCoordinateSys,{onChange:this.barCoordinateSysChange,config:a})]})}};const AntdColumnGraphics=({config:n,onChange:r})=>{const e=o=>{const{id:s,data:l,dataFragment:c}=o;s==="columnColor"?l&&Array.isArray(l)?r({color:l,columnStyle:{fill:void 0}}):l&&typeof l=="string"&&l.indexOf("gradient")!==-1||r({columnStyle:{fill:l}}):r(c)},a={type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2},children:[{key:"maxColumnWidth",type:"number-input",label:"宽度",value:12,config:{min:0,max:100}},{id:"columnColor",type:"color-mode",label:"颜色",value:"#1c1c1c",config:{containerStyle:{gridColumn:"1/3"}}}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:e})},AntdColumnCommonFieldMapping=n=>{const{controller:r}=n,{xField:e,yField:a,seriesField:o}=r.getConfig().style,s=AntdCommonUtil.getDataFieldOptions(r),l={key:"style",type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:e,config:{options:s}},{key:"yField",type:"select",label:"Y字段",value:a,config:{options:s}},{key:"seriesField",type:"select",label:"分组字段",value:o,config:{options:s}}]},c=u=>{const{dataFragment:f}=u;r.update(f)};return jsxRuntimeExports.jsx(LCGUI,{schema:l,onFieldChange:c})},AntdColumnCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdColumnCommonFieldMapping,AntdColumnCommonStyleConfig:AntdColumnCommonStyleConfig$1,AntdColumnGraphics},Symbol.toStringTag,{value:"Module"})),AnimationConfig$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdColumnCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdColumnCommonConfig),void 0).then(n=>({default:n.AntdColumnCommonStyleConfig}))),ThemeConfig$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractColumnDefinition extends AntdCommonDefinition{getController(){return AntdCommonColumnController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$a,data:DataConfig$a,style:AntdColumnCommonStyleConfig,animation:AnimationConfig$9,theme:ThemeConfig$a,mapping:AntdColumnCommonFieldMapping}}}const __vite_glob_0_7=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractColumnDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonLineController extends AntdBaseDesignerController{async create(r,e){await super.commonCreate(r,Line,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,Line,e)}updateTheme(r){var f,d,g,v,p,y,m,x,A,_,b,S,C,E,T,w,L,M,O,P,N,G,Y,F,z,W,j,U,X,tt,rt,J,et,it,ot,st,ut,ft,gt,vt,yt;if(!r)return;const{type:e}=(f=this.config)==null?void 0:f.base,a=(d=this.config)==null?void 0:d.style,{colors:{main:o,mainText:s,supplementSecond:l,supplementFirst:c,subText:u}}=r;a!=null&&a.color&&(e==="AntdMultiLine"?a.color=[o,c,l]:a.color=o),a!=null&&a.point&&((g=a==null?void 0:a.point)!=null&&g.style)&&(a.point.style.fill=void 0),a.legend&&((p=(v=a.legend.itemName)==null?void 0:v.style)!=null&&p.fill)&&(a.legend.itemName.style.fill=s),a!=null&&a.xAxis&&((x=(m=(y=a==null?void 0:a.xAxis)==null?void 0:y.label)==null?void 0:m.style)!=null&&x.fill)&&(a.xAxis.label.style.fill=s),a!=null&&a.xAxis&&((_=(A=a==null?void 0:a.xAxis)==null?void 0:A.title)!=null&&_.fill)&&(a.xAxis.title.style.fill=s),a!=null&&a.xAxis&&((C=(S=(b=a==null?void 0:a.xAxis)==null?void 0:b.line)==null?void 0:S.style)!=null&&C.stroke)&&(a.xAxis.line.style.stroke=l),a!=null&&a.xAxis&&((L=(w=(T=(E=a==null?void 0:a.xAxis)==null?void 0:E.grid)==null?void 0:T.line)==null?void 0:w.style)!=null&&L.stroke)&&(a.xAxis.grid.line.style.stroke=u),a!=null&&a.xAxis&&((P=(O=(M=a==null?void 0:a.xAxis)==null?void 0:M.tickLine)==null?void 0:O.style)!=null&&P.stroke)&&(a.xAxis.tickLine.style.stroke=c),a!=null&&a.xAxis&&((Y=(G=(N=a==null?void 0:a.xAxis)==null?void 0:N.subTickLine)==null?void 0:G.style)!=null&&Y.stroke)&&(a.xAxis.subTickLine.style.stroke=u),a!=null&&a.yAxis&&((W=(z=(F=a==null?void 0:a.yAxis)==null?void 0:F.label)==null?void 0:z.style)!=null&&W.fill)&&(a.yAxis.label.style.fill=s),a!=null&&a.yAxis&&((U=(j=a==null?void 0:a.yAxis)==null?void 0:j.title)!=null&&U.fill)&&(a.yAxis.title.style.fill=s),a!=null&&a.yAxis&&((rt=(tt=(X=a==null?void 0:a.yAxis)==null?void 0:X.line)==null?void 0:tt.style)!=null&&rt.stroke)&&(a.yAxis.line.style.stroke=l),a!=null&&a.yAxis&&((ot=(it=(et=(J=a==null?void 0:a.yAxis)==null?void 0:J.grid)==null?void 0:et.line)==null?void 0:it.style)!=null&&ot.stroke)&&(a.yAxis.grid.line.style.stroke=u),a!=null&&a.yAxis&&((ft=(ut=(st=a==null?void 0:a.yAxis)==null?void 0:st.tickLine)==null?void 0:ut.style)!=null&&ft.stroke)&&(a.yAxis.tickLine.style.stroke=c),a!=null&&a.yAxis&&((yt=(vt=(gt=a==null?void 0:a.yAxis)==null?void 0:gt.subTickLine)==null?void 0:vt.style)!=null&&yt.stroke)&&(a.yAxis.subTickLine.style.stroke=u),this.update({style:a},{reRender:!0})}}const __vite_glob_0_10=Object.freeze(Object.defineProperty({__proto__:null,default:AntdCommonLineController},Symbol.toStringTag,{value:"Module"})),AnimationConfig$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdLineCommonStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdLineCommonConfig-8-wFweE8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdLineCommonStyleConfig}))),AntdLineFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdLineCommonConfig-8-wFweE8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdLineFieldMapping}))),ThemeConfig$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractLineDefinition extends AntdCommonDefinition{getController(){return AntdCommonLineController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$9,data:DataConfig$9,style:AntdLineCommonStyleConfig,animation:AnimationConfig$8,theme:ThemeConfig$9,mapping:AntdLineFieldMapping}}}const __vite_glob_0_9=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractLineDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonRoseController extends AntdBaseDesignerController{async create(r,e){await super.commonCreate(r,Rose,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,Rose,e)}updateTheme(r){var f,d,g,v;if(!r)return;const e=(f=this.config)==null?void 0:f.style,{colors:{main:a,mainText:o,supplementSecond:s,background:l,supplementFirst:c,subText:u}}=r;e!=null&&e.color&&(e.color=[a,o,u,c,s]),e.legend&&((g=(d=e.legend.itemName)==null?void 0:d.style)!=null&&g.fill)&&(e.legend.itemName.style.fill=o),e!=null&&e.sectorStyle&&(e!=null&&e.sectorStyle)&&(e.sectorStyle.stroke=l),e!=null&&e.label&&((v=e==null?void 0:e.label)!=null&&v.style)&&(e.label.style.fill=o),this.update({style:e},{reRender:!0})}}const __vite_glob_0_12=Object.freeze(Object.defineProperty({__proto__:null,default:AntdCommonRoseController},Symbol.toStringTag,{value:"Module"}));let AntdRoseCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);R(this,"roseGraphicsChange",e=>{this.props.controller.update({style:e})});R(this,"legendChange",e=>{this.props.controller.update({style:{legend:e}})})}render(){const e=this.props.controller,a=e.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdLegend,{controller:e}),jsxRuntimeExports.jsx(AntdRoseGraphicsConfig,{onChange:this.roseGraphicsChange,config:a})]})}};const AntdRoseGraphicsConfig=({config:n,onChange:r})=>{var l,c,u,f,d,g,v,p,y;const[e,a]=reactExports.useState(n),o=m=>{let{id:x,data:A,dataKeyPath:_,dataFragment:b,reRender:S}=m;x==="startAngle"||x==="endAngle"?(A=Math.PI*A,r&&r(LCGUIUtil.createObjectFromArray(_,A))):x==="labelRotate"?r({label:{rotate:A*Math.PI}}):r&&r(b),S&&a({...e,...b})},s={children:[{type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2},children:[{key:"radius",type:"number-input",label:"外径",value:n.radius,config:{min:0,max:1,step:.01}},{id:"startAngle",key:"startAngle",type:"number-input",label:"起始角",value:(n.startAngle||0)/Math.PI,config:{suffix:"Π",min:0,max:2,step:.01}},{key:"innerRadius",type:"number-input",label:"内径",value:n.innerRadius,config:{min:0,max:1,step:.01}},{id:"endAngle",key:"endAngle",type:"number-input",label:"结束角",value:(n.endAngle||2*Math.PI)/Math.PI,config:{suffix:"Π",min:0,max:2,step:.01}},{key:"pieStyle",children:[{key:"stroke",type:"color-picker",label:"描边色",value:"#1c1c1c",config:{showText:!0}},{key:"lineWidth",type:"number-input",label:"描边宽",value:0,config:{min:0,max:30}}]},{key:"color",type:"color-mode",label:"颜色",value:"#1c1c1c",config:{containerStyle:{gridColumn:"1 / 3"}}}]}]},{type:"accordion",label:"标签",children:[{key:"label",type:"grid",config:{columns:2},children:[{key:"offset",type:"number-input",label:"偏移",value:((l=e.label)==null?void 0:l.offset)||0},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:((u=(c=e.label)==null?void 0:c.style)==null?void 0:u.fontSize)||12,config:{min:0,max:100}},{key:"fontWeight",type:"number-input",label:"加粗",value:((d=(f=e.label)==null?void 0:f.style)==null?void 0:d.fontWeight)||500,config:{min:100,max:900,step:100}},{key:"fill",type:"color-picker",label:"颜色",value:(v=(g=e.label)==null?void 0:g.style)==null?void 0:v.fill,config:{showText:!0}}]},{key:"autoRotate",type:"switch",label:"自动旋转",reRender:!0,value:(p=e.label)==null?void 0:p.autoRotate},{id:"labelRotate",key:"rotate",type:"number-input",label:"旋转角度",rules:"{autoRotate} === 'false'",value:((y=e.label)==null?void 0:y.rotate)||0,config:{min:0,max:2,step:.01}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})},AntdRoseFieldMapping=({controller:n})=>{var s;const r=(s=n.getConfig())==null?void 0:s.style,e=AntdCommonUtil.getDataFieldOptions(n),a={type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:r==null?void 0:r.xField,config:{options:e}},{key:"yField",type:"select",label:"Y字段",value:r==null?void 0:r.yField,config:{options:e}},{key:"seriesField",type:"select",label:"分组字段",value:r==null?void 0:r.seriesField,config:{options:e}}]},o=l=>{n.update(l.dataFragment)};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:o})},AntdRoseCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdRoseFieldMapping,AntdRoseGraphicsConfig,default:AntdRoseCommonStyleConfig$1},Symbol.toStringTag,{value:"Module"})),AnimationConfig$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdRoseCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdRoseCommonConfig),void 0)),ThemeConfig$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractRoseDefinition extends AntdCommonDefinition{getController(){return AntdCommonRoseController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$8,data:DataConfig$8,style:AntdRoseCommonStyleConfig,animation:AnimationConfig$7,theme:ThemeConfig$8,mapping:AntdRoseFieldMapping}}}const __vite_glob_0_11=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractRoseDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonScatterController extends AntdBaseDesignerController{async create(r,e){await super.commonCreate(r,Scatter,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,Scatter,e)}updateTheme(r){var u,f,d,g,v,p,y,m,x,A,_,b,S,C,E,T,w,L,M,O,P,N,G,Y,F,z;if(!r)return;const e=(u=this.config)==null?void 0:u.style,{colors:{main:a,mainText:o,supplementSecond:s,supplementFirst:l,subText:c}}=r;e!=null&&e.color&&(e.color=[a,o,c,l,s]),e.legend&&((f=e.legend.itemName)!=null&&f.style)&&(e.legend.itemName.style.fill=o),e!=null&&e.xAxis&&((g=(d=e==null?void 0:e.xAxis)==null?void 0:d.label)!=null&&g.style)&&(e.xAxis.label.style.fill=c),e!=null&&e.xAxis&&((v=e==null?void 0:e.xAxis)!=null&&v.title)&&(e.xAxis.title.style.fill=o),e!=null&&e.xAxis&&((y=(p=e==null?void 0:e.xAxis)==null?void 0:p.line)!=null&&y.style)&&(e.xAxis.line.style.stroke=l),e!=null&&e.xAxis&&((A=(x=(m=e==null?void 0:e.xAxis)==null?void 0:m.grid)==null?void 0:x.line)!=null&&A.style)&&(e.xAxis.grid.line.style.stroke=l),e!=null&&e.xAxis&&((b=(_=e==null?void 0:e.xAxis)==null?void 0:_.tickLine)!=null&&b.style)&&(e.xAxis.tickLine.style.stroke=l),e!=null&&e.xAxis&&((C=(S=e==null?void 0:e.xAxis)==null?void 0:S.subTickLine)!=null&&C.style)&&(e.xAxis.subTickLine.style.stroke=s),e!=null&&e.yAxis&&((T=(E=e==null?void 0:e.yAxis)==null?void 0:E.label)!=null&&T.style)&&(e.yAxis.label.style.fill=c),e!=null&&e.yAxis&&((w=e==null?void 0:e.yAxis)!=null&&w.title)&&(e.yAxis.title.style.fill=o),e!=null&&e.yAxis&&((M=(L=e==null?void 0:e.yAxis)==null?void 0:L.line)!=null&&M.style)&&(e.yAxis.line.style.stroke=l),e!=null&&e.yAxis&&((N=(P=(O=e==null?void 0:e.yAxis)==null?void 0:O.grid)==null?void 0:P.line)!=null&&N.style)&&(e.yAxis.grid.line.style.stroke=l),e!=null&&e.yAxis&&((Y=(G=e==null?void 0:e.yAxis)==null?void 0:G.tickLine)!=null&&Y.style)&&(e.yAxis.tickLine.style.stroke=l),e!=null&&e.yAxis&&((z=(F=e==null?void 0:e.yAxis)==null?void 0:F.subTickLine)!=null&&z.style)&&(e.yAxis.subTickLine.style.stroke=s),this.update({style:e},{reRender:!0})}}const __vite_glob_0_14=Object.freeze(Object.defineProperty({__proto__:null,default:AntdCommonScatterController},Symbol.toStringTag,{value:"Module"})),AnimationConfig$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdScatterCommonStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdScatterCommonConfig-k7pbCd-z.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdScatterCommonStyleConfig}))),AntdScatterFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdScatterCommonConfig-k7pbCd-z.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdScatterFieldMapping}))),ThemeConfig$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractScatterDefinition extends AntdCommonDefinition{getController(){return AntdCommonScatterController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$7,data:DataConfig$7,style:AntdScatterCommonStyleConfig,animation:AnimationConfig$6,theme:ThemeConfig$7,mapping:AntdScatterFieldMapping}}}const __vite_glob_0_13=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractScatterDefinition},Symbol.toStringTag,{value:"Module"})),__vite_glob_0_15=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),baseAreaImg="/light-chaser-app/assets/base-area-rTZyFFIu.png",AntdBaseAreaStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdBaseAreaConfig-Zw_XeZmE.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdBaseAreaStyleConfig}))),AntdBaseAreaFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdBaseAreaConfig-Zw_XeZmE.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdBaseAreaFieldMapping})));class AntdBaseAreaDefinition extends AbstractAreaDefinition{getBaseInfo(){return{compName:"Antd基础面积图",compKey:"AntdBaseArea",categorize:"chart",subCategorize:"area"}}getChartImg(){return baseAreaImg}getMenuToConfigContentMap(){const r=super.getMenuToConfigContentMap();return r.style=AntdBaseAreaStyleConfig,r.mapping=AntdBaseAreaFieldMapping,r}getInitConfig(){const r=[{name:"Q1",value:140},{name:"Q2",value:205},{name:"Q3",value:186},{name:"Q4",value:220}];return{base:{id:"",name:"基础面积图",type:"AntdBaseArea"},style:{data:r,xField:"name",yField:"value",color:"#00d7ff",smooth:!1,supportCSSTransform:!0,isStack:!1,xAxis:{range:[0,1],grid:null,label:{style:{fill:"#adadadff",fontSize:10}},line:{style:{stroke:"#c7c7c76e",lineWidth:1}},tickLine:null,subTickLine:null,title:null,position:"bottom"},yAxis:{grid:null,label:{style:{fill:"#9a9a9aff",fontSize:10}},line:null,tickLine:null,subTickLine:null,title:null},legend:{position:"right-top",layout:"vertical",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"wave-in",duration:3e3}},startOnZero:!1,point:{size:4,style:{fill:"#00ddffff",stroke:"#ffffff",lineWidth:0}},line:{size:0}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_16=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseAreaDefinition},Symbol.toStringTag,{value:"Module"})),percentAreaImg="/light-chaser-app/assets/percent-area-ximgswaD.png";class AntdPercentAreaDefinition extends AbstractAreaDefinition{getBaseInfo(){return{compName:"Antd百分比面积图",compKey:"AntdPercentArea",categorize:"chart",subCategorize:"area"}}getChartImg(){return percentAreaImg}getInitConfig(){const r=[{country:"Asia",year:"1750",value:502},{country:"Asia",year:"1800",value:635},{country:"Asia",year:"1850",value:809},{country:"Asia",year:"1900",value:947},{country:"Asia",year:"1950",value:1402},{country:"Asia",year:"1999",value:3634},{country:"Asia",year:"2050",value:5268},{country:"Africa",year:"1750",value:106},{country:"Africa",year:"1800",value:107},{country:"Africa",year:"1850",value:111},{country:"Africa",year:"1900",value:133},{country:"Africa",year:"1950",value:221},{country:"Africa",year:"1999",value:767},{country:"Africa",year:"2050",value:1766},{country:"Europe",year:"1750",value:163},{country:"Europe",year:"1800",value:203},{country:"Europe",year:"1850",value:276},{country:"Europe",year:"1900",value:408},{country:"Europe",year:"1950",value:547},{country:"Europe",year:"1999",value:729},{country:"Europe",year:"2050",value:628}];return{base:{id:"",name:"百分比面积图",type:"AntdPercentArea"},style:{data:r,xField:"year",yField:"value",seriesField:"country",isPercent:!0,xAxis:{position:"bottom",range:[0,1],grid:null,label:{style:{fill:"#aaaaaaff",fontSize:8}},line:null,tickLine:null,subTickLine:null,title:null},yAxis:{position:"left",grid:null,label:{style:{fill:"#afafafff",fontSize:8}},line:{style:{stroke:"#545454c7",lineWidth:1}},tickLine:null,subTickLine:null,title:null},smooth:!0,legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#b1b1b1ff",fontSize:12}}},supportCSSTransform:!0,animation:{appear:{animation:"wave-in",duration:3e3}},line:{style:{lineWidth:0}},color:["#4fa3ffff","#009affff","#006d7fff"],areaStyle:{},point:{size:3,style:{fill:"#78edffad"}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_17=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPercentAreaDefinition},Symbol.toStringTag,{value:"Module"})),stackAreaImg="/light-chaser-app/assets/stack-area-KoSo3CYW.png";class AntdStackAreaDefinition extends AbstractAreaDefinition{getBaseInfo(){return{compName:"Antd堆叠面积图",compKey:"AntdStackArea",categorize:"chart",subCategorize:"area"}}getChartImg(){return stackAreaImg}getInitConfig(){const r=[{country:"北美",date:1965,value:1390.5},{country:"北美",date:1966,value:1469.5},{country:"北美",date:1967,value:1521.7},{country:"北美",date:1968,value:1615.9},{country:"北美",date:1969,value:1703.7},{country:"北美",date:1970,value:1767.8},{country:"北美",date:1971,value:1806.2},{country:"北美",date:1972,value:1903.5},{country:"北美",date:1973,value:1986.6},{country:"北美",date:1974,value:1952},{country:"北美",date:1975,value:1910.4},{country:"北美",date:1976,value:2015.8},{country:"北美",date:1977,value:2074.7},{country:"北美",date:1978,value:2092.7},{country:"北美",date:1979,value:2123.8},{country:"北美",date:1980,value:2068.3},{country:"北美",date:1981,value:2018},{country:"北美",date:1982,value:1951.5},{country:"北美",date:1983,value:1941.1},{country:"北美",date:1984,value:2046.2},{country:"北美",date:1985,value:2053.1},{country:"北美",date:1986,value:2060.7},{country:"北美",date:1987,value:2130.8},{country:"北美",date:1988,value:2223.5},{country:"北美",date:1989,value:2275.9},{country:"北美",date:1990,value:2280.7},{country:"北美",date:1991,value:2282},{country:"北美",date:1992,value:2319.7},{country:"北美",date:1993,value:2366.6},{country:"北美",date:1994,value:2420.2},{country:"北美",date:1995,value:2466.9},{country:"北美",date:1996,value:2547.4},{country:"北美",date:1997,value:2569},{country:"北美",date:1998,value:2585.2},{country:"北美",date:1999,value:2633.8},{country:"北美",date:2e3,value:2699.4},{country:"北美",date:2001,value:2640.1},{country:"北美",date:2002,value:2687.7},{country:"北美",date:2003,value:2700.7},{country:"北美",date:2004,value:2759.4},{country:"北美",date:2005,value:2775.6},{country:"北美",date:2006,value:2761.9},{country:"北美",date:2007,value:2809.5},{country:"北美",date:2008,value:2759.4},{country:"北美",date:2009,value:2632.5},{country:"北美",date:2010,value:2720.7},{country:"北美",date:2011,value:2722.9},{country:"北美",date:2012,value:2665.1},{country:"北美",date:2013,value:2738.3},{country:"北美",date:2014,value:2766.8},{country:"北美",date:2015,value:2739.7},{country:"北美",date:2016,value:2761.9},{country:"北美",date:2017,value:2772.8},{country:"中南美",date:1965,value:109.2},{country:"中南美",date:1966,value:115.7},{country:"中南美",date:1967,value:120.5},{country:"中南美",date:1968,value:128},{country:"中南美",date:1969,value:134.4},{country:"中南美",date:1970,value:142.2},{country:"中南美",date:1971,value:157.5},{country:"中南美",date:1972,value:169.5},{country:"中南美",date:1973,value:186.3},{country:"中南美",date:1974,value:195.5},{country:"中南美",date:1975,value:198},{country:"中南美",date:1976,value:211.7},{country:"中南美",date:1977,value:223.8},{country:"中南美",date:1978,value:236.5},{country:"中南美",date:1979,value:251.8},{country:"中南美",date:1980,value:262.9},{country:"中南美",date:1981,value:262.7},{country:"中南美",date:1982,value:265.9},{country:"中南美",date:1983,value:268.3},{country:"中南美",date:1984,value:278.3},{country:"中南美",date:1985,value:285.2},{country:"中南美",date:1986,value:304.2},{country:"中南美",date:1987,value:315.4},{country:"中南美",date:1988,value:324.6},{country:"中南美",date:1989,value:329.9},{country:"中南美",date:1990,value:331.1},{country:"中南美",date:1991,value:339.7},{country:"中南美",date:1992,value:355.8},{country:"中南美",date:1993,value:368.8},{country:"中南美",date:1994,value:390.9},{country:"中南美",date:1995,value:408.3},{country:"中南美",date:1996,value:425.8},{country:"中南美",date:1997,value:448.2},{country:"中南美",date:1998,value:465.5},{country:"中南美",date:1999,value:463.7},{country:"中南美",date:2e3,value:476.1},{country:"中南美",date:2001,value:477.7},{country:"中南美",date:2002,value:483.5},{country:"中南美",date:2003,value:489.3},{country:"中南美",date:2004,value:515.5},{country:"中南美",date:2005,value:533.6},{country:"中南美",date:2006,value:564},{country:"中南美",date:2007,value:587},{country:"中南美",date:2008,value:605.8},{country:"中南美",date:2009,value:596.8},{country:"中南美",date:2010,value:632.5},{country:"中南美",date:2011,value:658.9},{country:"中南美",date:2012,value:676.5},{country:"中南美",date:2013,value:692},{country:"中南美",date:2014,value:697.7},{country:"中南美",date:2015,value:701.1},{country:"中南美",date:2016,value:696.8},{country:"中南美",date:2017,value:700.6},{country:"欧洲",date:1965,value:1058.1},{country:"欧洲",date:1966,value:1089.7},{country:"欧洲",date:1967,value:1121.7},{country:"欧洲",date:1968,value:1196.6},{country:"欧洲",date:1969,value:1285.5},{country:"欧洲",date:1970,value:1369},{country:"欧洲",date:1971,value:1406.2},{country:"欧洲",date:1972,value:1472.7},{country:"欧洲",date:1973,value:1558},{country:"欧洲",date:1974,value:1535.5},{country:"欧洲",date:1975,value:1519.3},{country:"欧洲",date:1976,value:1606.9},{country:"欧洲",date:1977,value:1632.4},{country:"欧洲",date:1978,value:1687.5},{country:"欧洲",date:1979,value:1749.6},{country:"欧洲",date:1980,value:1706.4},{country:"欧洲",date:1981,value:1661.4},{country:"欧洲",date:1982,value:1630.2},{country:"欧洲",date:1983,value:1645.2},{country:"欧洲",date:1984,value:1686.9},{country:"欧洲",date:1985,value:1779.4},{country:"欧洲",date:1986,value:1811.3},{country:"欧洲",date:1987,value:1849.7},{country:"欧洲",date:1988,value:1870},{country:"欧洲",date:1989,value:1875},{country:"欧洲",date:1990,value:1853.3},{country:"欧洲",date:1991,value:1844.6},{country:"欧洲",date:1992,value:1814.1},{country:"欧洲",date:1993,value:1805.3},{country:"欧洲",date:1994,value:1791.3},{country:"欧洲",date:1995,value:1836.2},{country:"欧洲",date:1996,value:1896.1},{country:"欧洲",date:1997,value:1896.4},{country:"欧洲",date:1998,value:1918.8},{country:"欧洲",date:1999,value:1907.7},{country:"欧洲",date:2e3,value:1932.1},{country:"欧洲",date:2001,value:1959.2},{country:"欧洲",date:2002,value:1954.8},{country:"欧洲",date:2003,value:1991.6},{country:"欧洲",date:2004,value:2025.4},{country:"欧洲",date:2005,value:2037.4},{country:"欧洲",date:2006,value:2056.4},{country:"欧洲",date:2007,value:2041.7},{country:"欧洲",date:2008,value:2038.5},{country:"欧洲",date:2009,value:1932.1},{country:"欧洲",date:2010,value:2001.1},{country:"欧洲",date:2011,value:1949.1},{country:"欧洲",date:2012,value:1944.3},{country:"欧洲",date:2013,value:1934},{country:"欧洲",date:2014,value:1871.2},{country:"欧洲",date:2015,value:1908.7},{country:"欧洲",date:2016,value:1934.6},{country:"欧洲",date:2017,value:1969.5}];return{base:{id:"",name:"堆叠面积图",type:"AntdStackArea"},style:{data:r,xField:"date",yField:"value",seriesField:"country",smooth:!1,supportCSSTransform:!0,color:["#4ebfffff","#00a3ffff","#0060b1ff"],xAxis:{grid:null,label:{style:{fill:"#8c8c8cff",fontSize:10}},line:null,tickLine:null,subTickLine:null,title:null,position:"left"},yAxis:{grid:null,label:{style:{fill:"#a8a8a8ff",fontSize:10}},line:{style:{stroke:"#9e9e9e6e",lineWidth:1}},tickLine:null,subTickLine:null,title:null,position:"bottom"},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a4a4a4ff",fontSize:10}}},animation:{appear:{animation:"wave-in",duration:3e3}},line:{style:{lineWidth:0}},point:{size:0,style:{fill:"#ffffffff"}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_18=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackAreaDefinition},Symbol.toStringTag,{value:"Module"})),baseBarImg="/light-chaser-app/assets/base-bar-o8Kakkm6.png";class AntdBaseBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd基础条形图",compKey:"AntdBaseBar",categorize:"chart",subCategorize:"bar"}}getChartImg(){return baseBarImg}getInitConfig(){const r=[{name:"1951 年",value:48},{name:"1952 年",value:52},{name:"1956 年",value:22}];return{base:{id:"",name:"基础条形图",type:"AntdBaseBar"},style:{data:r,xField:"value",yField:"name",seriesField:"name",maxBarWidth:8,color:["#005d71ff","#00d0e4ff","#5bf0ffff"],barStyle:void 0,supportCSSTransform:!0,xAxis:{grid:null,label:{style:{fill:"#878787ff",fontSize:10}},line:{style:{stroke:"#6f6f6f91",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#6b6b6bff",fontSize:10},offset:9},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#989898ff",fontSize:10}}},animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_19=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseBarDefinition},Symbol.toStringTag,{value:"Module"})),groupBarImg="/light-chaser-app/assets/group-bar-yoW9hgxO.png";class AntdGroupBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd分组条形图",compKey:"AntdGroupBar",categorize:"chart",subCategorize:"bar"}}getChartImg(){return groupBarImg}getInitConfig(){const r=[{label:"Mon.",type:"series1",value:2800},{label:"Mon.",type:"series2",value:2260},{label:"Tues.",type:"series1",value:1800},{label:"Tues.",type:"series2",value:1300},{label:"Wed.",type:"series1",value:950},{label:"Wed.",type:"series2",value:900}];return{base:{id:"",name:"Antd分组条形图",type:"AntdGroupBar"},style:{data:r,isGroup:!0,xField:"value",yField:"label",seriesField:"type",color:["#00a6ffff","#5dd1ffff"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#929292ff",fontSize:10}},line:{style:{stroke:"#a2a2a273",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#9c9c9cff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#adadadff",fontSize:12}}},maxBarWidth:8,supportCSSTransform:!0,animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_20=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGroupBarDefinition},Symbol.toStringTag,{value:"Module"})),percentBarImg="/light-chaser-app/assets/percent-bar-dd_G1Ngg.png";class AntdPercentBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd百分比条形图",compKey:"AntdPercentBar",categorize:"chart",subCategorize:"bar"}}getChartImg(){return percentBarImg}getInitConfig(){const r=[{country:"Asia",year:"1750",value:502},{country:"Asia",year:"1800",value:635},{country:"Asia",year:"1850",value:809},{country:"Africa",year:"1750",value:106},{country:"Africa",year:"1800",value:107},{country:"Africa",year:"1850",value:111},{country:"Europe",year:"1750",value:163},{country:"Europe",year:"1800",value:203},{country:"Europe",year:"1850",value:276}];return{base:{id:"",name:"Antd百分比条形图",type:"AntdPercentBar"},style:{data:r,xField:"value",yField:"year",seriesField:"country",isPercent:!0,isStack:!0,color:["#59bfff","#298aff","#004294"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#b7b7b7ff",fontSize:10}},line:{style:{stroke:"#a4a4a473",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#9e9e9eff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#989898ff",fontSize:12}}},maxBarWidth:8,supportCSSTransform:!0,animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_21=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPercentBarDefinition},Symbol.toStringTag,{value:"Module"})),rangeBarImg="/light-chaser-app/assets/range-bar-2Igv1w3w.png";class AntdRangeBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd区间条形图",compKey:"AntdRangeBar",categorize:"chart",subCategorize:"bar"}}getChartImg(){return rangeBarImg}getInitConfig(){const r=[{type:"sort1",values:[36,130]},{type:"sort2",values:[60,95]},{type:"sort3",values:[50,110]},{type:"sort4",values:[20,135]}];return{base:{id:"",name:"Antd区间条形图",type:"AntdRangeBar"},style:{data:r,xField:"values",yField:"type",seriesField:"type",isRange:!0,color:["#2ea4ffff","#7cdaffff","#6cc2ffff"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#9c9c9cff",fontSize:11}},line:{style:{stroke:"#b9b9b975",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#9c9c9cff",fontSize:11}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#9e9e9eff",fontSize:12}}},maxBarWidth:8,supportCSSTransform:!0,animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_22=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRangeBarDefinition},Symbol.toStringTag,{value:"Module"})),stackBarImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ8AAACqCAIAAAA8612AAAALlElEQVR4Xu3dfUzU9x3AcRDrdF02bedS5e7gDjge6gR8qJHalhaBAlLKxIoNihQrWqEi1lauBXk2VYklCipQqEEKrS3MZp1Z1izLtibNknZdky5Ln/fg1gezZuvWJU328PG+eIWftfl4Oe8Q36984u5+dz92vfu9fw9//cJsAHTCrAsAXAS1AFrUAmhRC6BFLYAWtQBa1AJoXXW1RDpdkbFxlrG+yWt+ckrEu59Yl04Odmec3RlvGeubvK6rqAz/6+cRvz8TfvaLOdt3WV/Gpbjqarm28XDYz9+3TGS00/q+yV1LvOe9xH3/s4z1TV5Sy8wf/lQe3JC2YsbLv7W+jEtBLdpa5icmTX/jfZlpH3z6raPHZcl39rRd2zs4/fV3wj/8fLan4cs1L79LrSXS5Zp5+hfXl5TJknmpiyPe+eiaV98K/8u/zNFmxi9/882hU2Gf/te6MiaiFm0ts07+eG7BavM4/Mw/5y1ZKrXMPHVutx0ZExvxzse+dwbBJdUy7Y9/v+blN+S/5Tv1rbIk4u0Pb1i23Lw67Q+fRrrjZ/zqdfMSvh61aGu55rW3IuMTzOMZP/v13B+skVpmexrNEtkife8MgkuqxZyJiWl//kekKyb8o3/7Xp3+2tvzFi+RY8v3snN9C3Ex1KKtZdboT3zHlmlnPpv//YVXXC3hZz6zORwR73785bHl3U8iY2LO1ZKV8+U6uAhq+bpawv72HwlD5hsvvSLXLRG/+9P0Nz6Qs5dvN++zea9brohaws9+If8JcnE1p2qnzXvdMu29s3LdIguvLy23ea9bqEXjqqtlbmb+nNJKy8ge1/q+yS36jm2unFrLWN+EQLvqagH8Ri2AFrUAWtQCaFELoEUtgBa1AFrUAmhRC6BFLYAWtQBa1AJoUQugRS2AFrUAWtQCaFELoEUtgBa1AFrUAmhRC6BFLYAWtQBa1AJoUQugRS2AFrUAWmO1FBUVJSYmyoPY2Ni9e/c2NDT4lh88eDA9Pd23QnV1te+xxXVrNjJmvlu8zXkHMzZ29yLrtnJlCnM6ncPDw319fQsXLpTnPT09EkxSUtIjjzySkZFh2uju7na5XHl5eQMDA729vZY/4RNx6tXw028yMjMHXklo+Ywx40jOsG4rV6axY0tbW5uppbOzU/6Nioo6duxYRUVFWlqaPC0rK8vKyjLvlHLGVr0AtfiGWsbPlK2lubnZ4/Hs27dPjiFut3toaEia6e/vz8kZu78HtWiGWsbPlK3FkPOuxsax+/iI+vr6hISxm8hRi2aoZfxM2Vrksl4OI3Jln5KSEhMTU1hYWFpa2tTU5FuBWjRDLeNnqtUSHR1tt9vNA4nEcf5eWS4v37uF0/kVN50zqMU31DJ+plotAXF90QbGzNw1W5x3bGXM2N2p1m3lyhTIWoCpjVoALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0ztUSGxvb0tJi7mm8cuXKI0eOPPnkk8nJyfK0sbGxs7OzurpaHt99991dXV09PT2pqV99G8HZZVWzN9Uwl3XmF+5wrWpgLus4c+usG7dXWExMTHt7+4EDB0wt3d3dDodD+mltbS0uLpZCZGFDQ8OCBQsSEhLkcUpKSnNzs+WvGNzTOAgzr/6lC28azAR4Gs9aN26vsTOxtrY2U4scOux2e3R0dF9fX3l5eV5eniysqqrKz88378zIyNi0adP51SegliAMtQRjlLWsXbtWgjl06JCcdEVFRclpWEdHR1NTk0QirxYUFMhxRpaP/xM+1BKEoZZgjLIWIy4urqamxvf0iSeekNMzOdRkZ2f7Fl6IWoIw1BKMUdbi8Xh2797d29srBxC32y1HFUll3bp18pIs3OVlLvovRC1BGGoJxnx9LQFBLUEYagnGBKGWSFcMc7nHFi0Ty1z2+SqBrAWY2qgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZA61wtdru9oqLC3NM4MTFxcHCwr6/P4XDIU1k+MjJy1113yeN77713dHT08OHD0dHRE//ImFn7+mftZy555taPxG3+EePH2N0p1q3wcgpzuVy9vb1dXV2mlu7ubqfTmZCQUFdXl5eXV15eLgsPHjzodrvNCpmZmaWlpeP/hA/3NPZv5nS/ab2nLqObYNdi/qetrc3UcvToUfk3Kiqqp6dHDiy33XabPL3//vtzc3PNO6WiZcuWja09EbX4N9Ti94S4loceeqi9vV2akYOMnHENDw8/+uij8jQ7O1uOOevWrZOjUEZGxoS/cR61+DfU4veEuBYjNjbW4/H4nra2tsoS81hOyTo6OnwvjUct/g21+D0hrqWysnL9+vUnTpyI83rggQcee+yxmpoaeam2tlYu9Ds7O1euXDn+T/hQi39DLX5PaGoJCGrxb6jF77mCa5mXvJjxY+anLHckLmP8GFv02AVCcASyFmBqoxZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0ApkLSUlJRuBK9+GDRusG7dXIGsBpjZqAbSoBdCiFkCLWgAtagG0qAXQCkwtycnJx48f37NnT319vfW1SWPRokVdXV21tbVPPfWUPN25c2dzc3N3d/fy5cujoqKGh4crKiqefvppu91uXTOkHA7HyZMnU1NT5cHAwMDmzZufffZZ+cApKSm9vb0tLS27du2yrhNSWVlZsjFs3br19ttvly9TPvz27dvNd15XVycbSX9/v2ww1tVCSj7ktm3bTp06JR84Jyfn2LFjjz/++Pr1623ee7Rs2bJF3uB2uwNTS09Pj7lhmPz/WV+bfF544QXZ8szvl5CQcOTIkezs7HvuucfmvVON/MbWFUKqurpaqpZapOr77rtPlqxZs2bVqlUStvnOn3/+ees6oSMZd3Z2+vY48uFvvfVWm/eGWbK3Mt95UlKSvGf8WiHX1tZm/pUPeeLECbNwZGRk8eLFZmckuwCJJzC1jI6Omgey24iLi5v44uSydOlSyWPBggX79+83S4aGhqqqqlasWCGPc3NzZVsc//7QyszMfPDBBysrK6WWkpKSO++8UxbefPPNks3p06fNe2QT9N0vJORk7yMHwKamJtnm0tPT5ehn7ionu2fZH+3du9e8TQ6PE1YLNTnjkGOI+XiyPZiF8iElkrVr19q8m83u3bsDU8tzzz1nHsgv53Q6J744ieTn55u9iPyo7e3tNu89N+XXlUOKuQua7LMLCgosa4WK7IPlRFE6efjhhyWbwsJCc4e2W265Rcp58cUXzdvkO7/YnUCD78YbbzS7IXlw4MABOYaYWiT4vLw8Ob2xeb/zwcFBy4ohJMcT2V3azt8DTw7aZrnUIicaxcXF8vimm26qqakJTC3yLcgxS05v5OBlfW3SkFMCuTIxj+UHk3NreZCWliYXMHKSIz+nPJXLgMlzSi1HjHQvOd2XVORCRXaBNu/92+THO3TokCyR73xSbXnSrRQun0p2xvI5i4qKzL5Zdkkul8tsiPJfJBcJ1jVDR3aR5hR39erVshuSi5ZYL7m+8MW/ceNGKScwtcjZqpyDPfPMM/Hx8dbXJg0pQc4YR7zkW5B9tjzt6OiQn1bikWbkAmBSnYb5mDMx2/lbTJeVldm826UcVYaHh3030J0k5JxWronlizVHPDm9kS9W9kfyeMmSJfKdy1Hd3DF78vB4PPLFtra2ygeTTmRLlp2puaaQ2uWlHTt2yEYSmFqAqwG1AFr/B72o7yOp7VkjAAAAAElFTkSuQmCC";class AntdStackBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd堆叠条形图",compKey:"AntdStackBar",categorize:"chart",subCategorize:"bar"}}getChartImg(){return stackBarImg}getInitConfig(){const r=[{year:"1991",value:300,type:"Lon"},{year:"1992",value:400,type:"Lon"},{year:"1993",value:350,type:"Lon"},{year:"1991",value:300,type:"Bor"},{year:"1992",value:400,type:"Bor"},{year:"1993",value:350,type:"Bor"}];return{base:{id:"",name:"Antd堆叠条形图",type:"AntdStackBar"},style:{data:r,xField:"value",yField:"year",seriesField:"type",isStack:!0,maxBarWidth:8,supportCSSTransform:!0,color:["#00c0df","#298aff"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#b9b9b9ff",fontSize:10}},line:{style:{stroke:"#b9b9b980",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#b3b3b3ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_23=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackBarDefinition},Symbol.toStringTag,{value:"Module"})),baseColumnImg="/light-chaser-app/assets/base-column-wb9fa2bU.png";class AntdBaseColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd基础柱状图",compKey:"AntdBaseColumn",categorize:"chart",subCategorize:"column"}}getChartImg(){return baseColumnImg}getInitConfig(){const r=[{name:"1951 年",value:48},{name:"1952 年",value:52},{name:"1956 年",value:22}];return{base:{id:"",name:"基础条形图",type:"AntdBaseBar"},style:{data:r,xField:"name",yField:"value",seriesField:"name",maxColumnWidth:8,supportCSSTransform:!0,color:["#00dbffff"],columnStyle:{fill:void 0},xAxis:{grid:null,label:{style:{fill:"#afafafff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a8a8a8ff",fontSize:10}},line:{style:{stroke:"#9898987a",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a6a6a6ff",fontSize:10}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_24=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseColumnDefinition},Symbol.toStringTag,{value:"Module"})),groupColumnImg="/light-chaser-app/assets/group-column-PnUC7N0s.png";class AntdGroupColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd分组柱状图",compKey:"AntdGroupColumn",categorize:"chart",subCategorize:"column"}}getChartImg(){return groupColumnImg}getInitConfig(){const r=[{label:"Mon.",type:"series1",value:2800},{label:"Mon.",type:"series2",value:2260},{label:"Tues.",type:"series1",value:1800},{label:"Tues.",type:"series2",value:1300},{label:"Wed.",type:"series1",value:950},{label:"Wed.",type:"series2",value:900}];return{base:{id:"",name:"Antd分组柱状图",type:"AntdGroupColumn"},style:{data:r,isGroup:!0,xField:"label",yField:"value",seriesField:"type",maxColumnWidth:8,supportCSSTransform:!0,color:["#00c0df","#298aff"],columnStyle:{},xAxis:{grid:null,label:{style:{fill:"#949494ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b1b1b1ff",fontSize:10}},line:{style:{stroke:"#b3b3b37d",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a8a8a8ff",fontSize:10}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_25=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGroupColumnDefinition},Symbol.toStringTag,{value:"Module"})),percentColumnImg="/light-chaser-app/assets/percent-column-gPdW4L9g.png";class AntdPercentColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd百分比柱状图",compKey:"AntdPercentColumn",categorize:"chart",subCategorize:"column"}}getChartImg(){return percentColumnImg}getInitConfig(){const r=[{country:"Asia",year:"1750",value:502},{country:"Asia",year:"1800",value:635},{country:"Asia",year:"1850",value:809},{country:"Africa",year:"1750",value:106},{country:"Africa",year:"1800",value:107},{country:"Africa",year:"1850",value:111},{country:"Europe",year:"1750",value:163},{country:"Europe",year:"1800",value:203},{country:"Europe",year:"1850",value:276}];return{base:{id:"",name:"Antd百分比柱状图",type:"AntdPercentColumn"},style:{data:r,xField:"year",yField:"value",seriesField:"country",isPercent:!0,isStack:!0,maxColumnWidth:8,supportCSSTransform:!0,color:["#59bfff","#298aff","#004294"],columnStyle:{},xAxis:{grid:null,label:{style:{fill:"#a2a2a2ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b3b3b3ff",fontSize:10}},line:{style:{stroke:"#92929278",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_26=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPercentColumnDefinition},Symbol.toStringTag,{value:"Module"})),rangeColumnImg="/light-chaser-app/assets/range-column-VnDciZC_.png";class AntdRangeColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd区间柱状图",compKey:"AntdRangeColumn",categorize:"chart",subCategorize:"column"}}getChartImg(){return rangeColumnImg}getInitConfig(){const r=[{type:"sort1",values:[76,100]},{type:"sort2",values:[56,108]},{type:"sort3",values:[38,129]},{type:"sort4",values:[38,129]}];return{base:{id:"",name:"Antd区间柱状图",type:"AntdRangeColumn"},style:{data:r,xField:"type",yField:"values",seriesField:"type",isRange:!0,maxColumnWidth:8,supportCSSTransform:!0,color:["#00dbffff"],columnStyle:{fill:"#00c0df"},xAxis:{grid:null,label:{style:{fill:"#a6a6a6ff",fontSize:11}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#d0d0d0ff",fontSize:11}},line:{style:{stroke:"#9e9e9e91",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#969696ff",fontSize:12}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_27=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRangeColumnDefinition},Symbol.toStringTag,{value:"Module"})),stackColumnImg="/light-chaser-app/assets/stack-column-vyea8mUD.png";class AntdStackColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd堆叠柱状图",compKey:"AntdStackColumn",categorize:"chart",subCategorize:"column"}}getChartImg(){return stackColumnImg}getInitConfig(){const r=[{year:"1991",value:3,type:"Lon"},{year:"1992",value:4,type:"Lon"},{year:"1993",value:3.5,type:"Lon"},{year:"1991",value:3,type:"Bor"},{year:"1992",value:4,type:"Bor"},{year:"1993",value:3.5,type:"Bor"}];return{base:{id:"",name:"Antd堆叠柱状图",type:"AntdStackColumn"},style:{data:r,xField:"year",yField:"value",seriesField:"type",isStack:!0,maxColumnWidth:8,supportCSSTransform:!0,color:["#00c0df","#298aff"],columnStyle:{},xAxis:{grid:null,label:{style:{fill:"#c7c7c7ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b7b7b7ff"}},line:{style:{stroke:"#9e9e9e75",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#aaaaaaff",fontSize:12}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_28=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackColumnDefinition},Symbol.toStringTag,{value:"Module"}));class AntdGaugeController extends AntdBaseDesignerController{async create(r,e){super.commonCreate(r,Gauge,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}changeData(r){var e;this.config.data.staticData.data=r,this.config.style.percent=r,(e=this.instance)==null||e.changeData(r)}update(r,e){super.commonUpdate(r,Gauge,e)}updateTheme(r){}}const __vite_glob_0_29=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGaugeController},Symbol.toStringTag,{value:"Module"})),gaugeImg="/light-chaser-app/assets/gauge-2HjQIWKp.png",AnimationConfig$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdGaugeConfig=React.lazy(()=>__vitePreload(()=>import("./AntdGaugeConfig-c1hh3SM0.js"),__vite__mapDeps([33,1,2,3]))),ThemeConfig$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AntdGaugeDefinition extends AbstractDefinition{getController(){return AntdGaugeController}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo$6,data:DataConfig$6,style:AntdGaugeConfig,animation:AnimationConfig$5,theme:ThemeConfig$6}}getBaseInfo(){return{compName:"Antd仪表盘",compKey:"AntdGauge",categorize:"chart",subCategorize:"progress"}}getChartImg(){return gaugeImg}getInitConfig(){return{base:{id:"",name:"Antd仪表盘",type:"AntdGauge"},style:{percent:.75,radius:.75,innerRadius:.95,startAngle:2.6,endAngle:.5,range:{color:["#6bc2ff","#5d9eff59"]},indicator:{pointer:{style:{stroke:"#37b3ff",lineWidth:2}},pin:{style:{stroke:"#37b3ff",fill:"#053b5d",r:2,lineWidth:2}}},axis:{tickLine:{style:{stroke:"#89d2ff",lineWidth:1},length:-4},subTickLine:{count:11,style:{stroke:"#2caaff",lineWidth:1},length:-2},label:{style:{fill:"#69c6ff",fontSize:12,textAlign:"center",textBaseline:"middle"}}},statistic:{content:{style:{color:"#49c1ff",fontSize:"11px"}}},animation:{appear:{animation:"grow-in-x",duration:3e3},update:{animation:"grow-in-x",duration:3e3}}},data:{sourceType:"static",staticData:.75}}}}const __vite_glob_0_30=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGaugeDefinition},Symbol.toStringTag,{value:"Module"})),baseLineImg="/light-chaser-app/assets/base-line-OYaftkGE.png",AntdBaseLineStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdBaseLineConfig-8GRpywLB.js"),__vite__mapDeps([34,1,2,3,0,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdBaseLineStyleConfig})));class AntdBaseLineDefinition extends AbstractLineDefinition{getBaseInfo(){return{compName:"Antd基础折线图",compKey:"AntdBaseLine",categorize:"chart",subCategorize:"line"}}getChartImg(){return baseLineImg}getMenuToConfigContentMap(){const r=super.getMenuToConfigContentMap();return r.style=AntdBaseLineStyleConfig,r}getInitConfig(){const r=[{name:"1990",value:525},{name:"1991",value:459},{name:"1992",value:357},{name:"1993",value:414},{name:"1994",value:234},{name:"1995",value:250},{name:"1996",value:156}];return{base:{id:"",name:"基础折线图",type:"AntdBaseLine"},style:{data:r,xField:"name",yField:"value",smooth:!1,supportCSSTransform:!0,color:"#00d7ff",lineStyle:{stroke:void 0,lineWidth:2},xAxis:{grid:null,label:{style:{fill:"#969696ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b1b1b1ff",fontSize:9}},line:{style:{stroke:"#9e9e9e7d",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},animation:{appear:{animation:"wave-in",duration:3e3}},point:{size:4,style:{fill:"#00d7ff"}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_31=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseLineDefinition},Symbol.toStringTag,{value:"Module"})),multiLineImg="/light-chaser-app/assets/multi-line-sQL9gk6w.png";class AntdMultiLineDefinition extends AbstractLineDefinition{getBaseInfo(){return{compName:"Antd多折线图",compKey:"AntdMultiLine",categorize:"chart",subCategorize:"line"}}getChartImg(){return multiLineImg}getInitConfig(){const r=[{year:"2007",value:1706,category:"sort1"},{year:"2007",value:448,category:"sort2"},{year:"2008",value:1361,category:"sort1"},{year:"2008",value:779,category:"sort2"},{year:"2009",value:1722,category:"sort1"},{year:"2009",value:430,category:"sort2"},{year:"2010",value:1626,category:"sort1"},{year:"2010",value:555,category:"sort2"}];return{base:{id:"",name:"多折线图",type:"AntdMultiLine"},style:{data:r,xField:"year",yField:"value",seriesField:"category",supportCSSTransform:!0,color:["#00a8ff","#00ffc9"],lineStyle:{},xAxis:{grid:null,label:{style:{fill:"#969696ff",fontSize:11}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a0a0a0ff",fontSize:10}},line:{style:{stroke:"#adadad75",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},smooth:!1,legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a0a0a0ff",fontSize:12}}},animation:{appear:{animation:"wave-in",duration:3e3}},point:{size:3}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_32=Object.freeze(Object.defineProperty({__proto__:null,default:AntdMultiLineDefinition},Symbol.toStringTag,{value:"Module"})),stepLineImg="/light-chaser-app/assets/step-line-ZsCy2NyX.png",AntdStepLineStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdStepLineConfig-hx5qO748.js"),__vite__mapDeps([35,1,2,3,0,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdStepLineStyleConfig})));class AntdStepLineDefinition extends AbstractLineDefinition{getBaseInfo(){return{compName:"Antd阶梯折线图",compKey:"AntdStepLine",categorize:"chart",subCategorize:"line"}}getChartImg(){return stepLineImg}getMenuToConfigContentMap(){const r=super.getMenuToConfigContentMap();return r.style=AntdStepLineStyleConfig,r}getInitConfig(){const r=[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:13},{year:"1999",value:8}];return{base:{id:"",name:"多折线图",type:"AntdStepLine"},style:{data:r,xField:"year",yField:"value",stepType:"vh",color:"#00d7ff",smooth:!0,supportCSSTransform:!0,lineStyle:{stroke:void 0,lineWidth:1},xAxis:{grid:null,label:{style:{fill:"#989898ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a6a6a6ff"}},line:{style:{stroke:"#9a9a9a8c",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"right-top",layout:"vertical",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"wave-in",duration:3e3}},point:{size:3,style:{fill:"#00d7ff"},shape:"bowtie"}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_33=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStepLineDefinition},Symbol.toStringTag,{value:"Module"}));class AntdLiquidController extends AntdBaseDesignerController{async create(r,e){super.commonCreate(r,Liquid,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}changeData(r){var e;this.config.data.staticData.data=r,this.config.style.percent=r,(e=this.instance)==null||e.changeData(r)}update(r,e){super.commonUpdate(r,Liquid,e)}updateTheme(r){}}const __vite_glob_0_34=Object.freeze(Object.defineProperty({__proto__:null,default:AntdLiquidController},Symbol.toStringTag,{value:"Module"})),liquidImg="/light-chaser-app/assets/liquid-J6eQe4sd.png",AntdLiquidConfig=React.lazy(()=>__vitePreload(()=>import("./AntdLiquidConfig-lyh2pNsP.js"),__vite__mapDeps([36,1,2,3]))),ThemeConfig$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AntdLiquidDefinition extends AbstractDefinition{getController(){return AntdLiquidController}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo$5,data:DataConfig$5,style:AntdLiquidConfig,theme:ThemeConfig$5}}getBaseInfo(){return{compName:"Antd水波图",compKey:"AntdLiquid",categorize:"chart",subCategorize:"progress"}}getChartImg(){return liquidImg}getInitConfig(){return{base:{id:"",name:"Antd水波图",type:"AntdLiquid"},style:{shape:"circle",percent:.65,radius:.9,liquidStyle:{fill:"#2399ffea",stroke:"#1a75c8d6"},shapeStyle:{fill:"#00fff716"},outline:{border:0,distance:0},wave:{length:150,count:5},statistic:{content:{style:{fill:"#7de0ff",fontSize:"20",color:"#81d8ff"}},title:{content:"指标1",style:{fontSize:"22",color:"#61a0f9c2",fontWeight:900},offsetY:-10}},animation:{appear:{animation:"wave-in",duration:3e3},update:{duration:2e3}}},data:{sourceType:"static",staticData:.65}}}}const __vite_glob_0_35=Object.freeze(Object.defineProperty({__proto__:null,default:AntdLiquidDefinition},Symbol.toStringTag,{value:"Module"}));class AntdPieController extends AntdBaseDesignerController{async create(r,e){await super.commonCreate(r,Pie,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,Pie,e)}updateTheme(r){var f,d,g,v,p,y;if(!r)return;const e=(f=this.config)==null?void 0:f.style,{colors:{main:a,mainText:o,supplementSecond:s,background:l,supplementFirst:c,subText:u}}=r;e!=null&&e.color&&(e.color=[a,o,u,c,s]),e.legend&&((g=(d=e.legend.itemName)==null?void 0:d.style)!=null&&g.fill)&&(e.legend.itemName.style.fill=o),e!=null&&e.pieStyle&&(e!=null&&e.pieStyle)&&(e.pieStyle.stroke=l),e!=null&&e.label&&((v=e==null?void 0:e.label)!=null&&v.style)&&(e.label.style.fill=o),e!=null&&e.statistic&&((p=e==null?void 0:e.statistic)!=null&&p.title)&&e.statistic.title.style&&(e.statistic.title.style.color=o),e!=null&&e.statistic&&((y=e==null?void 0:e.statistic)!=null&&y.content)&&e.statistic.content.style&&(e.statistic.content.style.color=u),this.update({style:e},{reRender:!0})}}const __vite_glob_0_36=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPieController},Symbol.toStringTag,{value:"Module"})),pieImg="/light-chaser-app/assets/pie-kQBx5-oT.png",AnimationConfig$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdPieConfig=React.lazy(()=>__vitePreload(()=>import("./AntdPieStyleConfig-SSzKtAXL.js"),__vite__mapDeps([37,1,2,3,5,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),AntdPieFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdPieStyleConfig-SSzKtAXL.js"),__vite__mapDeps([37,1,2,3,5,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdPieFieldMapping}))),ThemeConfig$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AntdPieDefinition extends AntdCommonDefinition{getController(){return AntdPieController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$4,data:DataConfig$4,style:AntdPieConfig,animation:AnimationConfig$4,theme:ThemeConfig$4,mapping:AntdPieFieldMapping}}getBaseInfo(){return{compName:"Antd饼图",compKey:"AntdPie",categorize:"chart",subCategorize:"pie"}}getChartImg(){return pieImg}getInitConfig(){const r=[{type:"sort1",value:30},{type:"sort2",value:25},{type:"sort3",value:20},{type:"sort4",value:25}];return{base:{id:"",name:"Antd饼图",type:"AntdPie"},style:{data:r,angleField:"value",colorField:"type",radius:.7,innerRadius:.6,pieStyle:{stroke:"#fff",lineWidth:0},label:{type:"outer",offset:27,content:"{name} {percentage}",autoRotate:!0,rotate:0,style:{textAlign:"center",fontSize:10,fontWeight:400,fill:"#cececeff"}},legend:{position:"right",layout:"vertical",itemName:{style:{fill:"#adadadff",fontSize:12}}},interactions:[{type:"element-selected"},{type:"element-active"}],statistic:{title:{style:{fontSize:"10px",color:"#b9b9b9ff",fontWeight:300},content:"总计",offsetY:-6},content:{style:{fontSize:"16px",color:"#c5c5c5ff"},content:"100",offsetY:2,offsetX:-2}},animation:{appear:{animation:"wave-in",duration:3e3}},color:["#0087ffff","#339effff","#87c5ffff","#4687c3ff"]},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_37=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPieDefinition},Symbol.toStringTag,{value:"Module"}));class AntdRadarController extends AntdBaseDesignerController{async create(r,e){super.commonCreate(r,Radar,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}changeData(r){var e;this.config.data.staticData.data=r,this.config.style.data=r,(e=this.instance)==null||e.changeData(r)}update(r,e){super.commonUpdate(r,Radar,e)}updateTheme(r){}}const __vite_glob_0_38=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRadarController},Symbol.toStringTag,{value:"Module"})),radarImg="/light-chaser-app/assets/radar-dpKzdvXL.png",AnimationConfig$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdRadarStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdRadarStyleConfig-pb7Ms3r_.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))),ThemeConfig$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0)),AntdRadarFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdRadarStyleConfig-pb7Ms3r_.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(n=>({default:n.AntdRadarFieldMapping})));class AntdRadarDefinition extends AntdCommonDefinition{getController(){return AntdRadarController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$3,data:DataConfig$3,style:AntdRadarStyleConfig,animation:AnimationConfig$3,theme:ThemeConfig$3,mapping:AntdRadarFieldMapping}}getBaseInfo(){return{compName:"Antd雷达图",compKey:"AntdRadar",categorize:"chart",subCategorize:"radar"}}getChartImg(){return radarImg}getInitConfig(){const r=[{name:"G2",star:10371},{name:"G6",star:7380},{name:"F2",star:7414},{name:"L7",star:2140},{name:"X6",star:6601},{name:"AVA",star:8851},{name:"G2Plot",star:1626}];return{base:{id:"",name:"Antd雷达图",type:"AntdRadar"},style:{data:r,xField:"name",yField:"star",radius:1,smooth:!0,lineStyle:{stroke:"#8fe0ff",lineWidth:2,opacity:.5},point:{size:3,shape:"circle",style:{fill:"#4c9cff",stroke:"#64d6ff",lineWidth:1}},area:{style:{fill:"#3991ff",fillOpacity:.6}},xAxis:{line:null,tickLine:null,grid:{alignTick:!0,line:{style:{stroke:"#42cdffbb",lineWidth:1},type:"line"}},label:{style:{fill:"#41bbff"}}},yAxis:{line:{style:{stroke:"#595959",lineWidth:1}},tickLine:null,grid:{alignTick:!0,line:{style:{stroke:"#7ee5ff95",lineWidth:1},type:"line"}},label:{style:{fill:"#78b3fa"}}},animation:{appear:{animation:"wave-in",duration:3e3}}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_39=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRadarDefinition},Symbol.toStringTag,{value:"Module"}));class AntdRingProgressController extends AntdBaseDesignerController{async create(r,e){super.commonCreate(r,RingProgress,e)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(r,e){super.commonUpdate(r,RingProgress,e)}updateTheme(r){var c,u,f;if(!r)return;const e=(c=this.config)==null?void 0:c.style,{colors:{main:a,mainText:o,supplementFirst:s,subText:l}}=r;e!=null&&e.color&&(e.color=[a,s]),e!=null&&e.statistic&&((u=e==null?void 0:e.statistic)!=null&&u.title)&&e.statistic.title.style&&(e.statistic.title.style.color=o),e!=null&&e.statistic&&((f=e==null?void 0:e.statistic)!=null&&f.content)&&e.statistic.content.style&&(e.statistic.content.style.color=l),this.update({style:e},{reRender:!0})}}const __vite_glob_0_40=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRingProgressController},Symbol.toStringTag,{value:"Module"})),ringProgressImg="/light-chaser-app/assets/ring-progress-eDw8Jasc.png",AnimationConfig$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),DataConfig$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0)),AntdRingProgressStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdRingProgressConfig-ftCRuZUY.js"),__vite__mapDeps([39,1,2,3,5])).then(n=>({default:n.AntdRingProgressStyleConfig}))),ThemeConfig$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0));class AntdRingProgressDefinition extends AntdCommonDefinition{getController(){return AntdRingProgressController}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo$2,data:DataConfig$2,style:AntdRingProgressStyleConfig,animation:AnimationConfig$2,theme:ThemeConfig$2}}getBaseInfo(){return{compName:"Antd迷你环图",compKey:"AntdRingProgress",categorize:"chart",subCategorize:"progress"}}getChartImg(){return ringProgressImg}getInitConfig(){return{base:{id:"",name:"Antd迷你环图",type:"AntdRingProgress"},style:{percent:.7,color:["#3cc2f8bd","#66d2ff3e"],statistic:{content:{style:{fill:"#fff",fontSize:"24",fontWeight:900,color:"#57c6ff"},offsetY:7,offsetX:0},title:{style:{fontSize:"21",fontWeight:900,color:"#6ad1ff"},content:"指标1",offsetY:-11}},animation:{appear:{animation:"wave-in",duration:3e3}},progressStyle:{}},data:{sourceType:"static",staticData:.7}}}}const __vite_glob_0_41=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRingProgressDefinition},Symbol.toStringTag,{value:"Module"})),baseRoseImg="/light-chaser-app/assets/base-rose-Q2gpgR7-.png";class AntdBaseRoseDefinition extends AbstractRoseDefinition{getBaseInfo(){return{compName:"Antd基础玫瑰图",compKey:"AntdBaseRose",categorize:"chart",subCategorize:"rose"}}getChartImg(){return baseRoseImg}getInitConfig(){const r=[{type:"sort1",value:27},{type:"sort2",value:25},{type:"sort3",value:18},{type:"sort4",value:15}];return{base:{id:"",name:"Antd基础玫瑰图",type:"AntdBaseRose"},style:{data:r,xField:"type",yField:"value",seriesField:"type",radius:.8,padding:[50,0,0,0],supportCSSTransform:!0,sectorStyle:{stroke:"#fff",lineWidth:0},label:{style:{fill:"#b5b5b5ff",fontSize:13},autoRotate:!0},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a6a6a6ff",fontSize:12}}},animation:{appear:{animation:"grow-in-xy",duration:3e3}},color:["#0091ffff","#68beffff","#b4e0ffff","#408ec9ff"]},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_42=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseRoseDefinition},Symbol.toStringTag,{value:"Module"})),groupRoseImg="/light-chaser-app/assets/group-rose-vO5lvahu.png";class AntdGroupRoseDefinition extends AbstractRoseDefinition{getBaseInfo(){return{compName:"Antd分组玫瑰图",compKey:"AntdGroupRose",categorize:"chart",subCategorize:"rose"}}getChartImg(){return groupRoseImg}getInitConfig(){const r=[{type:"sort1",value:27,user:"user1"},{type:"sort2",value:25,user:"user2"},{type:"sort3",value:18,user:"user1"},{type:"sort4",value:15,user:"user2"},{type:"sort5",value:18,user:"user1"},{type:"sort6",value:20,user:"user2"}];return{base:{id:"",name:"Antd基础玫瑰图",type:"AntdBaseRose"},style:{data:r,xField:"type",yField:"value",isGroup:!0,seriesField:"user",padding:[60,0,0,0],label:{offset:14,style:{fill:"#aaaaaaff"}},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a8a8a8ff",fontSize:12}}},supportCSSTransform:!0,animation:{appear:{animation:"grow-in-xy",duration:3e3}},color:["#00b7ffff","#81dbffff"],sectorStyle:{lineWidth:0}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_43=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGroupRoseDefinition},Symbol.toStringTag,{value:"Module"})),stackRoseImg="/light-chaser-app/assets/stack-rose-UAs5DTM4.png";class AntdStackRoseDefinition extends AbstractRoseDefinition{getBaseInfo(){return{compName:"Antd堆叠玫瑰图",compKey:"AntdStackRose",categorize:"chart",subCategorize:"rose"}}getChartImg(){return stackRoseImg}getInitConfig(){const r=[{type:"sort1",value:27,user:"user1"},{type:"sort2",value:25,user:"user1"},{type:"sort3",value:18,user:"user1"},{type:"sort4",value:15,user:"user1"},{type:"sort5",value:10,user:"user1"},{type:"sort1",value:7,user:"user2"},{type:"sort2",value:5,user:"user2"},{type:"sort3",value:28,user:"user2"},{type:"sort4",value:15,user:"user2"},{type:"sort5",value:20,user:"user2"}];return{base:{id:"",name:"Antd堆叠玫瑰图",type:"AntdStackRose"},style:{data:r,xField:"type",yField:"value",isStack:!0,seriesField:"user",label:{offset:-12,style:{fill:"#ffffffff",fontSize:9,fontWeight:700}},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#b9b9b9ff",fontSize:12}}},supportCSSTransform:!0,animation:{appear:{animation:"wave-in",duration:3e3}},color:["#00b7ffff","#8ed2ffff"],radius:1},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_44=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackRoseDefinition},Symbol.toStringTag,{value:"Module"})),scatterBubble="/light-chaser-app/assets/scatter-bubble-3905Y8Ct.png";class AntdScatterBubbleDefinition extends AbstractScatterDefinition{getBaseInfo(){return{compName:"Antd气泡图",compKey:"AntdScatterBubble",categorize:"chart",subCategorize:"scatter"}}getChartImg(){return scatterBubble}getInitConfig(){const r=[{x:42,y:38,size:20,genre:"female"},{x:6,y:18,size:1,genre:"female"},{x:58,y:24,size:20,genre:"male"},{x:78,y:37,size:34,genre:"male"},{x:55,y:56,size:53,genre:"male"},{x:18,y:45,size:70,genre:"male"},{x:42,y:44,size:28,genre:"male"},{x:3,y:52,size:59,genre:"male"},{x:31,y:18,size:97,genre:"male"},{x:79,y:91,size:63,genre:"male"},{x:93,y:23,size:23,genre:"male"},{x:44,y:83,size:22,genre:"male"}];return{base:{id:"",name:"Antd气泡图",type:"AntdScatterBubble"},style:{data:r,xField:"x",yField:"y",colorField:"genre",sizeField:"size",size:[5,20],shape:"circle",xAxis:{grid:null,label:{style:{fill:"#9a9a9aff",fontSize:10},offset:16},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a0a0a0ff",fontSize:10},offset:5},line:{style:{stroke:"#a2a2a275",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a0a0a0ff",fontSize:10}}},supportCSSTransform:!0,animation:{appear:{animation:"fade-in",duration:3e3}},color:["#116BA2","#58c1ffff"],pointStyle:{lineWidth:0}},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_45=Object.freeze(Object.defineProperty({__proto__:null,default:AntdScatterBubbleDefinition},Symbol.toStringTag,{value:"Module"})),scatterPoint="/light-chaser-app/assets/scatter-point-pdQO4Bno.png";class AntdScatterPointDefinition extends AbstractScatterDefinition{getBaseInfo(){return{compName:"Antd散点图",compKey:"AntdScatterPoint",categorize:"chart",subCategorize:"scatter"}}getChartImg(){return scatterPoint}getInitConfig(){const r=[{x:1,y:23,type:"one"},{x:2,y:15,type:"two"},{x:3,y:17,type:"three"},{x:4,y:48,type:"four"},{x:5,y:8,type:"five"}];return{base:{id:"",name:"Antd散点图",type:"AntdScatterPoint"},style:{data:r,xField:"x",yField:"y",colorField:"type",sizeField:"y",size:6,shape:"circle",pointStyle:{fillOpacity:1,lineWidth:0},xAxis:{grid:null,label:{style:{fill:"#a8a8a8ff",fontSize:10}},line:{style:{stroke:"#a4a4a470",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},yAxis:{grid:null,label:{style:{fill:"#a0a0a0ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#969696ff",fontSize:10}}},supportCSSTransform:!0,animation:{appear:{animation:"fade-in",duration:3e3}},color:["#00b7ffff","#006d98ff"]},data:{sourceType:"static",staticData:r}}}}const __vite_glob_0_46=Object.freeze(Object.defineProperty({__proto__:null,default:AntdScatterPointDefinition},Symbol.toStringTag,{value:"Module"}));class BaseInfoStore{constructor(){R(this,"baseConfigRef",null);R(this,"setBaseConfigRef",r=>this.baseConfigRef=r);R(this,"updateBaseConfig",r=>{var a;const{activeElem:{id:e}}=rightStore$1;e===(r==null?void 0:r.id)&&((a=this.baseConfigRef)==null||a.setState(r))})}}const baseInfoStore=new BaseInfoStore,__vite_glob_0_47=Object.freeze(Object.defineProperty({__proto__:null,default:baseInfoStore},Symbol.toStringTag,{value:"Module"})),__vite_glob_0_48=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class GroupLayerController extends AbstractDesignerController{constructor(r,e,a){super(),this.container=r,this.config=e,this.instance=a}async create(r,e){}getConfig(){return this.config}update(r,e){}show(){var r;(r=this.instance)==null||r.setState({load:!0})}hide(){var r;(r=this.instance)==null||r.setState({load:!1})}}const __vite_glob_0_49=Object.freeze(Object.defineProperty({__proto__:null,default:GroupLayerController},Symbol.toStringTag,{value:"Module"})),alignLeft="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='14.5'%20y='17'%20width='28'%20height='14'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.5%206V42'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignHorizontally="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='7'%20y='17'%20width='34'%20height='14'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M24%206V42'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignRight="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='6'%20y='17'%20width='28'%20height='14'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%206V42'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignTop="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='17'%20y='14.5'%20width='14'%20height='28'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%206.5H6'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignVertically="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='17'%20y='7'%20width='14'%20height='34'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%2024H6'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignBottom="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='17'%20y='6'%20width='14'%20height='28'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%2042H6'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var FUNCTION="function",OBJECT="object",STRING="string",NUMBER="number",UNDEFINED="undefined",IS_WINDOW=typeof window!==UNDEFINED,doc=typeof document!==UNDEFINED&&document,OPEN_CLOSED_CHARACTERS=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],TINY_NUM=1e-7,DEFAULT_UNIT_PRESETS={cm:function(n){return n*96/2.54},mm:function(n){return n*96/254},in:function(n){return n*96},pt:function(n){return n*96/72},pc:function(n){return n*96/6},"%":function(n,r){return n*r/100},vw:function(n,r){return r===void 0&&(r=window.innerWidth),n/100*r},vh:function(n,r){return r===void 0&&(r=window.innerHeight),n/100*r},vmax:function(n,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),n/100*r},vmin:function(n,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),n/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __spreadArrays$2(){for(var n=0,r=0,e=arguments.length;r<e;r++)n+=arguments[r].length;for(var a=Array(n),o=0,r=0;r<e;r++)for(var s=arguments[r],l=0,c=s.length;l<c;l++,o++)a[o]=s[l];return a}function dot(n,r,e,a){return(n*a+r*e)/(e+a)}function isUndefined(n){return typeof n===UNDEFINED}function isObject(n){return n&&typeof n===OBJECT}function isArray(n){return Array.isArray(n)}function isString(n){return typeof n===STRING}function isNumber(n){return typeof n===NUMBER}function isFunction(n){return typeof n===FUNCTION}function isEqualSeparator(n,r){var e=n===""||n==" ",a=r===""||r==" ";return a&&e||n===r}function findOpen(n,r,e,a,o){var s=findIgnore(n,r,e);return s?e:findClose(n,r,e+1,a,o)}function findIgnore(n,r,e){if(!n.ignore)return null;var a=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(n.ignore).exec(a)}function findClose(n,r,e,a,o){for(var s=function(f){var d=r[f].trim();if(d===n.close&&!findIgnore(n,r,f))return{value:f};var g=f,v=find(o,function(p){var y=p.open;return y===d});if(v&&(g=findOpen(v,r,f,a,o)),g===-1)return l=f,"break";f=g,l=f},l,c=e;c<a;++c){var u=s(c);if(c=l,typeof u=="object")return u.value;if(u==="break")break}return-1}function splitText(n,r){var e=isString(r)?{separator:r}:r,a=e.separator,o=a===void 0?",":a,s=e.isSeparateFirst,l=e.isSeparateOnlyOpenClose,c=e.isSeparateOpenClose,u=c===void 0?l:c,f=e.openCloseCharacters,d=f===void 0?OPEN_CLOSED_CHARACTERS:f,g=d.map(function(T){var w=T.open,L=T.close;return w===L?w:w+"|"+L}).join("|"),v="(\\s*"+o+"\\s*|"+g+"|\\s+)",p=new RegExp(v,"g"),y=n.split(p).filter(function(T){return T&&T!=="undefined"}),m=y.length,x=[],A=[];function _(){return A.length?(x.push(A.join("")),A=[],!0):!1}for(var b=function(T){var w=y[T].trim(),L=T,M=find(d,function(N){var G=N.open;return G===w}),O=find(d,function(N){var G=N.close;return G===w});if(M){if(L=findOpen(M,y,T,m,d),L!==-1&&u)return _()&&s||(x.push(y.slice(T,L+1).join("")),T=L,s)?(S=T,"break"):(S=T,"continue")}else if(O&&!findIgnore(O,y,T)){var P=__spreadArrays$2(d);return P.splice(d.indexOf(O),1),{value:splitText(n,{separator:o,isSeparateFirst:s,isSeparateOnlyOpenClose:l,isSeparateOpenClose:u,openCloseCharacters:P})}}else if(isEqualSeparator(w,o)&&!l)return _(),s?(S=T,"break"):(S=T,"continue");L===-1&&(L=m-1),A.push(y.slice(T,L+1).join("")),T=L,S=T},S,C=0;C<m;++C){var E=b(C);if(C=S,typeof E=="object")return E.value;if(E==="break")break}return A.length&&x.push(A.join("")),x}function splitSpace(n){return splitText(n,"")}function splitComma(n){return splitText(n,",")}function splitBracket(n){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(n);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function splitUnit(n){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(n);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],a=r[2],o=r[3];return{prefix:e,unit:o,value:parseFloat(a)}}function camelize(n){return n.replace(/[\s-_]+([^\s-_])/g,function(r,e){return e.toUpperCase()})}function decamelize(n,r){return r===void 0&&(r="-"),n.replace(/([a-z])([A-Z])/g,function(e,a,o){return""+a+r+o.toLowerCase()})}function now(){return Date.now?Date.now():new Date().getTime()}function findIndex(n,r,e){e===void 0&&(e=-1);for(var a=n.length,o=0;o<a;++o)if(r(n[o],o,n))return o;return e}function findLastIndex(n,r,e){e===void 0&&(e=-1);for(var a=n.length,o=a-1;o>=0;--o)if(r(n[o],o,n))return o;return e}function findLast(n,r,e){var a=findLastIndex(n,r);return a>-1?n[a]:e}function find(n,r,e){var a=findIndex(n,r);return a>-1?n[a]:e}var requestAnimationFrame$1=function(){var n=now(),r=IS_WINDOW&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var a=now(),o=setTimeout(function(){e(a-n)},1e3/60);return o}}(),cancelAnimationFrame$1=function(){var n=IS_WINDOW&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return n?n.bind(window):function(r){clearTimeout(r)}}();function getKeys(n){return Object.keys(n)}function convertUnitSize(n,r){var e=splitUnit(n),a=e.value,o=e.unit;if(isObject(r)){var s=r[o];if(s){if(isFunction(s))return s(a);if(DEFAULT_UNIT_PRESETS[o])return DEFAULT_UNIT_PRESETS[o](a,s)}}else if(o==="%")return a*r/100;return DEFAULT_UNIT_PRESETS[o]?DEFAULT_UNIT_PRESETS[o](a):a}function between(n,r,e){return Math.max(r,Math.min(n,e))}function checkBoundSize(n,r,e,a){return a===void 0&&(a=n[0]/n[1]),[[throttle(r[0],TINY_NUM),throttle(r[0]/a,TINY_NUM)],[throttle(r[1]*a,TINY_NUM),throttle(r[1],TINY_NUM)]].filter(function(o){return o.every(function(s,l){var c=r[l],u=throttle(c,TINY_NUM);return e?s<=c||s<=u:s>=c||s>=u})})[0]||n}function calculateBoundSize(n,r,e,a){if(!a)return n.map(function(p,y){return between(p,r[y],e[y])});var o=n[0],s=n[1],l=a===!0?o/s:a,c=checkBoundSize(n,r,!1,l),u=c[0],f=c[1],d=checkBoundSize(n,e,!0,l),g=d[0],v=d[1];return o<u||s<f?(o=u,s=f):(o>g||s>v)&&(o=g,s=v),[o,s]}function sum(n){for(var r=n.length,e=0,a=r-1;a>=0;--a)e+=n[a];return e}function average(n){for(var r=n.length,e=0,a=r-1;a>=0;--a)e+=n[a];return r?e/r:0}function getRad$1(n,r){var e=r[0]-n[0],a=r[1]-n[1],o=Math.atan2(a,e);return o>=0?o:o+Math.PI*2}function getCenterPoint(n){return[0,1].map(function(r){return average(n.map(function(e){return e[r]}))})}function getShapeDirection(n){var r=getCenterPoint(n),e=getRad$1(r,n[0]),a=getRad$1(r,n[1]);return e<a&&a-e<Math.PI||e>a&&a-e<-Math.PI?1:-1}function getDist$1(n,r){return Math.sqrt(Math.pow((r?r[0]:0)-n[0],2)+Math.pow((r?r[1]:0)-n[1],2))}function throttle(n,r){if(!r)return n;var e=1/r;return Math.round(n/r)/e}function throttleArray(n,r){return n.forEach(function(e,a){n[a]=throttle(n[a],r)}),n}function counter(n){for(var r=[],e=0;e<n;++e)r.push(e);return r}function hasClass(n,r){return n.classList?n.classList.contains(r):!!n.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function addClass(n,r){n.classList?n.classList.add(r):n.className+=" "+r}function removeClass(n,r){if(n.classList)n.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");n.className=n.className.replace(e," ")}}function addEvent(n,r,e,a){n.addEventListener(r,e,a)}function removeEvent(n,r,e,a){n.removeEventListener(r,e,a)}function getDocument(n){return(n==null?void 0:n.ownerDocument)||doc}function getDocumentElement(n){return getDocument(n).documentElement}function getDocumentBody(n){return getDocument(n).body}function getWindow(n){var r;return((r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function isWindow(n){return n&&"postMessage"in n&&"blur"in n&&"self"in n}function isNode(n){return isObject(n)&&n.nodeName&&n.nodeType&&"ownerDocument"in n}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$6=function(){return __assign$6=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$6.apply(this,arguments)};function __spreadArrays$1(){for(var n=0,r=0,e=arguments.length;r<e;r++)n+=arguments[r].length;for(var a=Array(n),o=0,r=0;r<e;r++)for(var s=arguments[r],l=0,c=s.length;l<c;l++,o++)a[o]=s[l];return a}var EventEmitter=function(){function n(){this._events={}}var r=n.prototype;return r.on=function(e,a){if(isObject(e))for(var o in e)this.on(o,e[o]);else this._addEvent(e,a,{});return this},r.off=function(e,a){if(!e)this._events={};else if(isObject(e))for(var o in e)this.off(o);else if(!a)this._events[e]=[];else{var s=this._events[e];if(s){var l=findIndex(s,function(c){return c.listener===a});l>-1&&s.splice(l,1)}}return this},r.once=function(e,a){var o=this;return a&&this._addEvent(e,a,{once:!0}),new Promise(function(s){o._addEvent(e,s,{once:!0})})},r.emit=function(e,a){var o=this;a===void 0&&(a={});var s=this._events[e];if(!e||!s)return!0;var l=!1;return a.eventType=e,a.stop=function(){l=!0},a.currentTarget=this,__spreadArrays$1(s).forEach(function(c){c.listener(a),c.once&&o.off(e,c.listener)}),!l},r.trigger=function(e,a){return a===void 0&&(a={}),this.emit(e,a)},r._addEvent=function(e,a,o){var s=this._events;s[e]=s[e]||[];var l=s[e];l.push(__assign$6({listener:a},o))},n}();const EventEmitter$1=EventEmitter;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$5=function(n,r){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)a.hasOwnProperty(o)&&(e[o]=a[o])},extendStatics$5(n,r)};function __extends$5(n,r){extendStatics$5(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var __assign$5=function(){return __assign$5=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$5.apply(this,arguments)};function getRad(n,r){var e=r[0]-n[0],a=r[1]-n[1],o=Math.atan2(a,e);return o>=0?o:o+Math.PI*2}function getRotatiion(n){return getRad([n[0].clientX,n[0].clientY],[n[1].clientX,n[1].clientY])/Math.PI*180}function isMultiTouch(n){return n.touches&&n.touches.length>=2}function getEventClients(n){return n?n.touches?getClients(n.touches):[getClient$1(n)]:[]}function isMouseEvent(n){return n&&(n.type.indexOf("mouse")>-1||"button"in n)}function getPosition(n,r,e){var a=e.length,o=getAverageClient(n,a),s=o.clientX,l=o.clientY,c=o.originalClientX,u=o.originalClientY,f=getAverageClient(r,a),d=f.clientX,g=f.clientY,v=getAverageClient(e,a),p=v.clientX,y=v.clientY,m=s-d,x=l-g,A=s-p,_=l-y;return{clientX:c,clientY:u,deltaX:m,deltaY:x,distX:A,distY:_}}function getDist(n){return Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2))}function getClients(n){for(var r=Math.min(n.length,2),e=[],a=0;a<r;++a)e.push(getClient$1(n[a]));return e}function getClient$1(n){return{clientX:n.clientX,clientY:n.clientY}}function getAverageClient(n,r){r===void 0&&(r=n.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},a=Math.min(n.length,r),o=0;o<a;++o){var s=n[o];e.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,e.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,e.clientX+=s.clientX,e.clientY+=s.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var ClientStore=function(){function n(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return n.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),getRotatiion(r)},n.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),getRotatiion(r)-getRotatiion(this.startClients)},n.prototype.getPosition=function(r,e){r===void 0&&(r=this.prevClients);var a=getPosition(r||this.prevClients,this.prevClients,this.startClients),o=a.deltaX,s=a.deltaY;return this.movement+=Math.sqrt(o*o+s*s),this.prevClients=r,a},n.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var e=this.prevClients,a=this.startClients,o=Math.min(this.length,e.length),s=[],l=0;l<o;++l)s[l]=getPosition([r[l]],[e[l]],[a[l]]);return s},n.prototype.getMovement=function(r){var e=this.movement;if(!r)return e;var a=getAverageClient(r,this.length),o=getAverageClient(this.prevClients,this.length),s=a.clientX-o.clientX,l=a.clientY-o.clientY;return Math.sqrt(s*s+l*l)+e},n.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),getDist(r)},n.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),getDist(r)/getDist(this.startClients)},n.prototype.move=function(r,e){this.startClients.forEach(function(a){a.clientX-=r,a.clientY-=e}),this.prevClients.forEach(function(a){a.clientX-=r,a.clientY-=e})},n}(),INPUT_TAGNAMES=["textarea","input"],Gesto=function(n){__extends$5(r,n);function r(e,a){a===void 0&&(a={});var o=n.call(this)||this;o.options={},o.flag=!1,o.pinchFlag=!1,o.data={},o.isDrag=!1,o.isPinch=!1,o.clientStores=[],o.targets=[],o.prevTime=0,o.doubleFlag=!1,o._useMouse=!1,o._useTouch=!1,o._useDrag=!1,o._dragFlag=!1,o._isTrusted=!1,o._isMouseEvent=!1,o._isSecondaryButton=!1,o._preventMouseEvent=!1,o._prevInputEvent=null,o._isDragAPI=!1,o._isIdle=!0,o._window=window,o.onDragStart=function(v,p){if(p===void 0&&(p=!0),!(!o.flag&&v.cancelable===!1)){var y=v.type.indexOf("drag")>=-1;if(!(o.flag&&y)){o._isDragAPI=!0;var m=o.options,x=m.container,A=m.pinchOutside,_=m.preventWheelClick,b=m.preventRightClick,S=m.preventDefault,C=m.checkInput,E=m.dragFocusedInput,T=m.preventClickEventOnDragStart,w=m.preventClickEventOnDrag,L=m.preventClickEventByCondition,M=o._useTouch,O=!o.flag;if(o._isSecondaryButton=v.which===3||v.button===2,_&&(v.which===2||v.button===1)||b&&(v.which===3||v.button===2))return o.stop(),!1;if(O){var P=o._window.document.activeElement,N=v.target;if(N){var G=N.tagName.toLowerCase(),Y=INPUT_TAGNAMES.indexOf(G)>-1,F=N.isContentEditable;if(Y||F){if(C||!E&&P===N)return!1;if(P&&(P===N||F&&P.isContentEditable&&P.contains(N)))if(E)N.blur();else return!1}else if((S||v.type==="touchstart")&&P){var z=P.tagName.toLowerCase();(P.isContentEditable||INPUT_TAGNAMES.indexOf(z)>-1)&&P.blur()}(T||w||L)&&addEvent(o._window,"click",o._onClick,!0)}o.clientStores=[new ClientStore(getEventClients(v))],o._isIdle=!1,o.flag=!0,o.isDrag=!1,o._isTrusted=p,o._dragFlag=!0,o._prevInputEvent=v,o.data={},o.doubleFlag=now()-o.prevTime<200,o._isMouseEvent=isMouseEvent(v),!o._isMouseEvent&&o._preventMouseEvent&&(o._preventMouseEvent=!1);var W=o._preventMouseEvent||o.emit("dragStart",__assign$5(__assign$5({data:o.data,datas:o.data,inputEvent:v,isMouseEvent:o._isMouseEvent,isSecondaryButton:o._isSecondaryButton,isTrusted:p,isDouble:o.doubleFlag},o.getCurrentStore().getPosition()),{preventDefault:function(){v.preventDefault()},preventDrag:function(){o._dragFlag=!1}}));W===!1&&o.stop(),o._isMouseEvent&&o.flag&&S&&v.preventDefault()}if(!o.flag)return!1;var j=0;if(O?(o._attchDragEvent(),M&&A&&(j=setTimeout(function(){addEvent(x,"touchstart",o.onDragStart,{passive:!1})}))):M&&A&&removeEvent(x,"touchstart",o.onDragStart),o.flag&&isMultiTouch(v)){if(clearTimeout(j),O&&v.touches.length!==v.changedTouches.length)return;o.pinchFlag||o.onPinchStart(v)}}}},o.onDrag=function(v,p){if(o.flag){var y=o.options.preventDefault;!o._isMouseEvent&&y&&v.preventDefault(),o._prevInputEvent=v;var m=getEventClients(v),x=o.moveClients(m,v,!1);if(o._dragFlag){if(o.pinchFlag||x.deltaX||x.deltaY){var A=o._preventMouseEvent||o.emit("drag",__assign$5(__assign$5({},x),{isScroll:!!p,inputEvent:v}));if(A===!1){o.stop();return}}o.pinchFlag&&o.onPinch(v,m)}o.getCurrentStore().getPosition(m,!0)}},o.onDragEnd=function(v){if(o.flag){var p=o.options,y=p.pinchOutside,m=p.container,x=p.preventClickEventOnDrag,A=p.preventClickEventOnDragStart,_=p.preventClickEventByCondition,b=o.isDrag;(x||A||_)&&requestAnimationFrame(function(){o._allowClickEvent()}),!_&&!A&&x&&!b&&o._allowClickEvent(),o._useTouch&&y&&removeEvent(m,"touchstart",o.onDragStart),o.pinchFlag&&o.onPinchEnd(v);var S=v!=null&&v.touches?getEventClients(v):[],C=S.length;C===0||!o.options.keepDragging?o.flag=!1:o._addStore(new ClientStore(S));var E=o._getPosition(),T=now(),w=!b&&o.doubleFlag;o._prevInputEvent=null,o.prevTime=b||w?0:T,o.flag||(o._dettachDragEvent(),o._preventMouseEvent||o.emit("dragEnd",__assign$5({data:o.data,datas:o.data,isDouble:w,isDrag:b,isClick:!b,isMouseEvent:o._isMouseEvent,isSecondaryButton:o._isSecondaryButton,inputEvent:v,isTrusted:o._isTrusted},E)),o.clientStores=[],o._isMouseEvent||(o._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){o._preventMouseEvent=!1})})),o._isIdle=!0)}},o.onBlur=function(){o.onDragEnd()},o._allowClickEvent=function(){removeEvent(o._window,"click",o._onClick,!0)},o._onClick=function(v){o._allowClickEvent(),o._preventMouseEvent=!1;var p=o.options.preventClickEventByCondition;p!=null&&p(v)||(v.stopPropagation(),v.preventDefault())},o._onContextMenu=function(v){var p=o.options;p.preventRightClick?o.onDragEnd(v):v.preventDefault()},o._passCallback=function(){};var s=[].concat(e),l=s[0];o._window=isWindow(l)?l:getWindow(l),o.options=__assign$5({checkInput:!1,container:l&&!("document"in l)?getWindow(l):l,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},a);var c=o.options,u=c.container,f=c.events,d=c.checkWindowBlur;if(o._useDrag=f.indexOf("drag")>-1,o._useTouch=f.indexOf("touch")>-1,o._useMouse=f.indexOf("mouse")>-1,o.targets=s,o._useDrag&&s.forEach(function(v){addEvent(v,"dragstart",o.onDragStart)}),o._useMouse&&(s.forEach(function(v){addEvent(v,"mousedown",o.onDragStart),addEvent(v,"mousemove",o._passCallback)}),addEvent(u,"contextmenu",o._onContextMenu)),d&&addEvent(getWindow(),"blur",o.onBlur),o._useTouch){var g={passive:!1};s.forEach(function(v){addEvent(v,"touchstart",o.onDragStart,g),addEvent(v,"touchmove",o._passCallback,g)})}return o}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(a,o){return a+o.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(e,a,o,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(e,a),s&&this.onDrag(o,!0))},r.prototype.move=function(e,a){var o=e[0],s=e[1],l=this.getCurrentStore(),c=l.prevClients;return this.moveClients(c.map(function(u){var f=u.clientX,d=u.clientY;return{clientX:f+o,clientY:d+s,originalClientX:f,originalClientY:d}}),a,!0)},r.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},r.prototype.setEventData=function(e){var a=this.data;for(var o in e)a[o]=e[o];return this},r.prototype.setEventDatas=function(e){return this.setEventData(e)},r.prototype.getCurrentEvent=function(e){return e===void 0&&(e=this._prevInputEvent),__assign$5(__assign$5({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var e=this,a=this.targets,o=this.options.container;this.off(),removeEvent(this._window,"blur",this.onBlur),this._useDrag&&a.forEach(function(s){removeEvent(s,"dragstart",e.onDragStart)}),this._useMouse&&(a.forEach(function(s){removeEvent(s,"mousedown",e.onDragStart)}),removeEvent(o,"contextmenu",this._onContextMenu)),this._useTouch&&(a.forEach(function(s){removeEvent(s,"touchstart",e.onDragStart)}),removeEvent(o,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(e){var a=this,o=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>o)){var s=new ClientStore(getEventClients(e));this.pinchFlag=!0,this._addStore(s);var l=this.emit("pinchStart",__assign$5(__assign$5({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:e,isTrusted:this._isTrusted,preventDefault:function(){e.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));l===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(e,a){if(!(!this.flag||!this.pinchFlag||a.length<2)){var o=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",__assign$5(__assign$5({data:this.data,datas:this.data,movement:this.getMovement(a),angle:o.getAngle(a),rotation:o.getRotation(a),touches:o.getPositions(a),scale:o.getScale(a),distance:o.getDistance(a)},o.getPosition(a)),{inputEvent:e,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(e){if(this.pinchFlag){var a=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var o=this.getCurrentStore();this.emit("pinchEnd",__assign$5(__assign$5({data:this.data,datas:this.data,isPinch:a,touches:o.getPositions()},o.getPosition()),{inputEvent:e}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(e,a,o){var s=this._getPosition(e,o),l=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var c=!1;return!l&&this.isDrag&&(c=!0),__assign$5(__assign$5({data:this.data,datas:this.data},s),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:a,isTrusted:this._isTrusted,isFirstDrag:c})},r.prototype._addStore=function(e){this.clientStores.splice(0,0,e)},r.prototype._getPosition=function(e,a){var o=this.getCurrentStore(),s=o.getPosition(e,a),l=this.clientStores.slice(1).reduce(function(f,d){var g=d.getPosition();return f.distX+=g.distX,f.distY+=g.distY,f},s),c=l.distX,u=l.distY;return __assign$5(__assign$5({},s),{distX:c,distY:u})},r.prototype._attchDragEvent=function(){var e=this._window,a=this.options.container,o={passive:!1};this._isDragAPI&&(addEvent(a,"dragover",this.onDrag,o),addEvent(e,"dragend",this.onDragEnd)),this._useMouse&&(addEvent(a,"mousemove",this.onDrag),addEvent(e,"mouseup",this.onDragEnd)),this._useTouch&&(addEvent(a,"touchmove",this.onDrag,o),addEvent(e,"touchend",this.onDragEnd,o),addEvent(e,"touchcancel",this.onDragEnd,o))},r.prototype._dettachDragEvent=function(){var e=this._window,a=this.options.container;this._isDragAPI&&(removeEvent(a,"dragover",this.onDrag),removeEvent(e,"dragend",this.onDragEnd)),this._useMouse&&(removeEvent(a,"mousemove",this.onDrag),removeEvent(e,"mouseup",this.onDragEnd)),this._useTouch&&(removeEvent(a,"touchstart",this.onDragStart),removeEvent(a,"touchmove",this.onDrag),removeEvent(e,"touchend",this.onDragEnd),removeEvent(e,"touchcancel",this.onDragEnd))},r}(EventEmitter$1);function prefixNames(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(a){return a.split(" ").map(function(o){return o?""+n+o:""}).join(" ")}).join(" ")}function prefixCSS(n,r){return r.replace(/([^}{]*){/gm,function(e,a){return a.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})}function ref(n,r){return function(e){e&&(n[r]=e)}}function refs(n,r,e){return function(a){a&&(n[r][e]=a)}}function Properties(n,r){return function(e){var a=e.prototype;n.forEach(function(o){r(a,o)})}}function withMethods(n,r){return r===void 0&&(r={}),function(e,a){n.forEach(function(o){var s=r[o]||o;s in e||(e[s]=function(){for(var l,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var f=(l=this[a])[o].apply(l,c);return f===this[a]?this:f})})}}var PolyMap=function(){function n(){this.keys=[],this.values=[]}var r=n.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,a){var o=this.keys,s=this.values,l=o.indexOf(e),c=l===-1?o.length:l;o[c]=e,s[c]=a},n}(),HashMap=function(){function n(){this.object={}}var r=n.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,a){this.object[e]=a},n}(),SUPPORT_MAP=typeof Map=="function",Link=function(){function n(){}var r=n.prototype;return r.connect=function(e,a){this.prev=e,this.next=a,e&&(e.next=this),a&&(a.prev=this)},r.disconnect=function(){var e=this.prev,a=this.next;e&&(e.next=a),a&&(a.prev=e)},r.getIndex=function(){for(var e=this,a=-1;e;)e=e.prev,++a;return a},n}();function orderChanged(n,r){var e=[],a=[];return n.forEach(function(o){var s=o[0],l=o[1],c=new Link;e[s]=c,a[l]=c}),e.forEach(function(o,s){o.connect(e[s-1])}),n.filter(function(o,s){return!r[s]}).map(function(o,s){var l=o[0],c=o[1];if(l===c)return[0,0];var u=e[l],f=a[c-1],d=u.getIndex();u.disconnect(),f?u.connect(f,f.next):u.connect(void 0,e[0]);var g=u.getIndex();return[d,g]})}var Result=function(){function n(e,a,o,s,l,c,u,f){this.prevList=e,this.list=a,this.added=o,this.removed=s,this.changed=l,this.maintained=c,this.changedBeforeAdded=u,this.fixed=f}var r=n.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=orderChanged(this.changedBeforeAdded,this.fixed),a=this.changed,o=[];this.cacheOrdered=e.filter(function(s,l){var c=s[0],u=s[1],f=a[l],d=f[0],g=f[1];if(c!==u)return o.push([d,g]),!0}),this.cachePureChanged=o},n}();function diff$1(n,r,e){var a=SUPPORT_MAP?Map:e?HashMap:PolyMap,o=e||function(_){return _},s=[],l=[],c=[],u=n.map(o),f=r.map(o),d=new a,g=new a,v=[],p=[],y={},m=[],x=0,A=0;return u.forEach(function(_,b){d.set(_,b)}),f.forEach(function(_,b){g.set(_,b)}),u.forEach(function(_,b){var S=g.get(_);typeof S>"u"?(++A,l.push(b)):y[S]=A}),f.forEach(function(_,b){var S=d.get(_);typeof S>"u"?(s.push(b),++x):(c.push([S,b]),A=y[b]||0,v.push([S-A,b-x]),p.push(b===S),S!==b&&m.push([S,b]))}),l.reverse(),new Result(n,r,s,l,m,c,v,p)}var ListDiffer=function(){function n(e,a){e===void 0&&(e=[]),this.findKeyCallback=a,this.list=[].slice.call(e)}var r=n.prototype;return r.update=function(e){var a=[].slice.call(e),o=diff$1(this.list,a,this.findKeyCallback);return this.list=a,o},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$4=function(n,r){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)a.hasOwnProperty(o)&&(e[o]=a[o])},extendStatics$4(n,r)};function __extends$4(n,r){extendStatics$4(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var findKeyCallback=typeof Map=="function"?void 0:function(){var n=0;return function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++n)}}(),ChildrenDiffer=function(n){__extends$4(r,n);function r(e){return e===void 0&&(e=[]),n.call(this,e,findKeyCallback)||this}return r}(ListDiffer);function diff(n,r){return diff$1(n,r,findKeyCallback)}const ChildrenDiffer$1=ChildrenDiffer;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$3=function(n,r){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)a.hasOwnProperty(o)&&(e[o]=a[o])},extendStatics$3(n,r)};function __extends$3(n,r){extendStatics$3(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var __assign$4=function(){return __assign$4=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$4.apply(this,arguments)};function getDefaultScrollPosition(n){var r=n.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function checkDefaultScrollEvent(n,r){return n.addEventListener("scroll",r),function(){n.removeEventListener("scroll",r)}}function getContainerElement(n){if(n){if(isString(n))return document.querySelector(n)}else return null;if(isFunction(n))return n();if(n instanceof Element)return n;if("current"in n)return n.current;if("value"in n)return n.value}var DragScroll=function(n){__extends$3(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a._startRect=null,a._startPos=[],a._prevTime=0,a._timer=0,a._prevScrollPos=[0,0],a._isWait=!1,a._flag=!1,a._currentOptions=null,a._lock=!1,a._unregister=null,a._onScroll=function(){var o=a._currentOptions;a._lock||!o||a.emit("scrollDrag",{next:function(s){a.checkScroll({container:o.container,inputEvent:s})}})},a}var e=r.prototype;return e.dragStart=function(a,o){var s=getContainerElement(o.container);if(!s){this._flag=!1;return}var l=0,c=0,u=0,f=0;if(s===document.body)u=window.innerWidth,f=window.innerHeight;else{var d=s.getBoundingClientRect();l=d.top,c=d.left,u=d.width,f=d.height}this._flag=!0,this._startPos=[a.clientX,a.clientY],this._startRect={top:l,left:c,width:u,height:f},this._prevScrollPos=this._getScrollPosition([0,0],o),this._currentOptions=o,this._registerScrollEvent(o)},e.drag=function(a,o){if(clearTimeout(this._timer),!!this._flag){var s=a.clientX,l=a.clientY,c=o.threshold,u=c===void 0?0:c,f=this,d=f._startRect,g=f._startPos;this._currentOptions=o;var v=[0,0];return d.top>l-u?(g[1]>d.top||l<g[1])&&(v[1]=-1):d.top+d.height<l+u&&(g[1]<d.top+d.height||l>g[1])&&(v[1]=1),d.left>s-u?(g[0]>d.left||s<g[0])&&(v[0]=-1):d.left+d.width<s+u&&(g[0]<d.left+d.width||s>g[0])&&(v[0]=1),!v[0]&&!v[1]?!1:this._continueDrag(__assign$4(__assign$4({},o),{direction:v,inputEvent:a,isDrag:!0}))}},e.checkScroll=function(a){var o=this;if(this._isWait)return!1;var s=a.prevScrollPos,l=s===void 0?this._prevScrollPos:s,c=a.direction,u=a.throttleTime,f=u===void 0?0:u,d=a.inputEvent,g=a.isDrag,v=this._getScrollPosition(c||[0,0],a),p=v[0]-l[0],y=v[1]-l[1],m=c||[p?Math.abs(p)/p:0,y?Math.abs(y)/y:0];return this._prevScrollPos=v,this._lock=!1,!p&&!y?!1:(this.emit("move",{offsetX:m[0]?p:0,offsetY:m[1]?y:0,inputEvent:d}),f&&g&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){o._continueDrag(a)},f)),!0)},e.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},e._getScrollPosition=function(a,o){var s=o.container,l=o.getScrollPosition,c=l===void 0?getDefaultScrollPosition:l;return c({container:getContainerElement(s),direction:a})},e._continueDrag=function(a){var o=this,s,l=a.container,c=a.direction,u=a.throttleTime,f=a.useScroll,d=a.isDrag,g=a.inputEvent;if(!(!this._flag||d&&this._isWait)){var v=now(),p=Math.max(u+this._prevTime-v,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){o._continueDrag(a)},p),!1;this._prevTime=v;var y=this._getScrollPosition(c,a);this._prevScrollPos=y,d&&(this._isWait=!0),f||(this._lock=!0);var m={container:getContainerElement(l),direction:c,inputEvent:g};return(s=a.requestScroll)===null||s===void 0||s.call(a,m),this.emit("scroll",m),this._isWait=!1,f||this.checkScroll(__assign$4(__assign$4({},a),{prevScrollPos:y,direction:c,inputEvent:g}))}},e._registerScrollEvent=function(a){this._unregisterScrollEvent();var o=a.checkScrollEvent;if(o){var s=o===!0?checkDefaultScrollEvent:o,l=getContainerElement(a.container);o===!0&&(l===document.body||l===document.documentElement)?this._unregister=checkDefaultScrollEvent(window,this._onScroll):this._unregister=s(l,this._onScroll)}},e._unregisterScrollEvent=function(){var a;(a=this._unregister)===null||a===void 0||a.call(this),this._unregister=null},r}(EventEmitter$1);const DragScroll$1=DragScroll;var extendStatics$2=function(n,r){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])},extendStatics$2(n,r)};function __extends$2(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");extendStatics$2(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function createCommonjsModule(n,r){return r={exports:{}},n(r,r.exports),r.exports}var keycode=createCommonjsModule(function(n,r){function e(u){if(u&&typeof u=="object"){var f=u.which||u.keyCode||u.charCode;f&&(u=f)}if(typeof u=="number")return l[u];var d=String(u),g=a[d.toLowerCase()];if(g)return g;var g=o[d.toLowerCase()];if(g)return g;if(d.length===1)return d.charCodeAt(0)}e.isEventKey=function(f,d){if(f&&typeof f=="object"){var g=f.which||f.keyCode||f.charCode;if(g==null)return!1;if(typeof d=="string"){var v=a[d.toLowerCase()];if(v)return v===g;var v=o[d.toLowerCase()];if(v)return v===g}else if(typeof d=="number")return d===g;return!1}},r=n.exports=e;var a=r.code=r.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=r.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)a[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)a[s-48]=s;for(s=1;s<13;s++)a["f"+s]=s+111;for(s=0;s<10;s++)a["numpad "+s]=s+96;var l=r.names=r.title={};for(s in a)l[a[s]]=s;for(var c in o)a[c]=o[c]});keycode.code;keycode.codes;keycode.aliases;var keycode_4=keycode.names;keycode.title;var codeData={"+":"plus","left command":"meta","right command":"meta"},keysSort={shift:1,ctrl:2,alt:3,meta:4};function getKey(n,r){var e=(keycode_4[n]||r||"").toLowerCase();for(var a in codeData)e=e.replace(a,codeData[a]);return e.replace(/\s/g,"")}function getCombi(n,r){r===void 0&&(r=getKey(n.keyCode,n.key));var e=getModifierCombi(n);return e.indexOf(r)===-1&&e.push(r),e.filter(Boolean)}function getModifierCombi(n){var r=[n.shiftKey&&"shift",n.ctrlKey&&"ctrl",n.altKey&&"alt",n.metaKey&&"meta"];return r.filter(Boolean)}function getArrangeCombi(n){var r=n.slice();return r.sort(function(e,a){var o=keysSort[e]||5,s=keysSort[a]||5;return o-s}),r}var globalKeyController,KeyController=function(n){__extends$2(r,n);function r(a){a===void 0&&(a=window);var o=n.call(this)||this;return o.container=a,o.ctrlKey=!1,o.altKey=!1,o.shiftKey=!1,o.metaKey=!1,o.clear=function(){return o.ctrlKey=!1,o.altKey=!1,o.shiftKey=!1,o.metaKey=!1,o},o.keydownEvent=function(s){o.triggerEvent("keydown",s)},o.keyupEvent=function(s){o.triggerEvent("keyup",s)},o.blur=function(){o.clear(),o.trigger("blur")},addEvent(a,"blur",o.blur),addEvent(a,"keydown",o.keydownEvent),addEvent(a,"keyup",o.keyupEvent),o}var e=r.prototype;return Object.defineProperty(r,"global",{get:function(){return globalKeyController||(globalKeyController=new r)},enumerable:!1,configurable:!0}),r.setGlobal=function(){return this.global},e.destroy=function(){var a=this.container;this.clear(),this.off(),removeEvent(a,"blur",this.blur),removeEvent(a,"keydown",this.keydownEvent),removeEvent(a,"keyup",this.keyupEvent)},e.keydown=function(a,o){return this.addEvent("keydown",a,o)},e.offKeydown=function(a,o){return this.removeEvent("keydown",a,o)},e.offKeyup=function(a,o){return this.removeEvent("keyup",a,o)},e.keyup=function(a,o){return this.addEvent("keyup",a,o)},e.addEvent=function(a,o,s){return isArray(o)?this.on("".concat(a,".").concat(getArrangeCombi(o).join(".")),s):isString(o)?this.on("".concat(a,".").concat(o),s):this.on(a,o),this},e.removeEvent=function(a,o,s){return isArray(o)?this.off("".concat(a,".").concat(getArrangeCombi(o).join(".")),s):isString(o)?this.off("".concat(a,".").concat(o),s):this.off(a,o),this},e.triggerEvent=function(a,o){this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.altKey=o.altKey,this.metaKey=o.metaKey;var s=getKey(o.keyCode,o.key),l=s==="ctrl"||s==="shift"||s==="meta"||s==="alt",c={key:s,isToggle:l,inputEvent:o,keyCode:o.keyCode,ctrlKey:o.ctrlKey,altKey:o.altKey,shiftKey:o.shiftKey,metaKey:o.metaKey};this.trigger(a,c),this.trigger("".concat(a,".").concat(s),c);var u=getCombi(o,s);u.length>1&&this.trigger("".concat(a,".").concat(u.join(".")),c)},r}(EventEmitter$1);const KeyController$1=KeyController;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __spreadArrays(){for(var n=0,r=0,e=arguments.length;r<e;r++)n+=arguments[r].length;for(var a=Array(n),o=0,r=0;r<e;r++)for(var s=arguments[r],l=0,c=s.length;l<c;l++,o++)a[o]=s[l];return a}function tinyThrottle(n){return throttle(n,TINY_NUM)}function isSameConstants(n,r){return n.every(function(e,a){return tinyThrottle(e-r[a])===0})}function isSamePoint(n,r){return!tinyThrottle(n[0]-r[0])&&!tinyThrottle(n[1]-r[1])}function getAreaSize(n){return n.length<3?0:Math.abs(sum(n.map(function(r,e){var a=n[e+1]||n[0];return r[0]*a[1]-a[0]*r[1]})))/2}function fitPoints(n,r){var e=r.width,a=r.height,o=r.left,s=r.top,l=getMinMaxs(n),c=l.minX,u=l.minY,f=l.maxX,d=l.maxY,g=e/(f-c),v=a/(d-u);return n.map(function(p){return[o+(p[0]-c)*g,s+(p[1]-u)*v]})}function getMinMaxs(n){var r=n.map(function(a){return a[0]}),e=n.map(function(a){return a[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function isInside(n,r,e){var a=n[0],o=n[1],s=getMinMaxs(r),l=s.minX,c=s.maxX,u=[[l,o],[c,o]],f=getLinearConstants(u[0],u[1]),d=convertLines(r),g=[];if(d.forEach(function(y){var m=getLinearConstants(y[0],y[1]),x=y[0];if(isSameConstants(f,m))g.push({pos:n,line:y,type:"line"});else{var A=getPointsOnLines(getIntersectionPointsByConstants(f,m),[u,y]);A.forEach(function(_){y.some(function(b){return isSamePoint(b,_)})?g.push({pos:_,line:y,type:"point"}):tinyThrottle(x[1]-o)!==0&&g.push({pos:_,line:y,type:"intersection"})})}}),!e&&find(g,function(y){return y[0]===a}))return!0;var v=0,p={};return g.forEach(function(y){var m=y.pos,x=y.type,A=y.line;if(!(m[0]>a))if(x==="intersection")++v;else{if(x==="line")return;if(x==="point"){var _=find(A,function(C){return C[1]!==o}),b=p[m[0]],S=_[1]>o?1:-1;b?b!==S&&++v:p[m[0]]=S}}}),v%2===1}function getLinearConstants(n,r){var e=n[0],a=n[1],o=r[0],s=r[1],l=o-e,c=s-a;Math.abs(l)<TINY_NUM&&(l=0),Math.abs(c)<TINY_NUM&&(c=0);var u=0,f=0,d=0;return l?c?(u=-c/l,f=1,d=-u*e-a):(f=1,d=-a):c&&(u=-1,d=e),[u,f,d]}function getIntersectionPointsByConstants(n,r){var e=n[0],a=n[1],o=n[2],s=r[0],l=r[1],c=r[2],u=e===0&&s===0,f=a===0&&l===0,d=[];if(u&&f)return[];if(u){var g=-o/a,v=-c/l;return g!==v?[]:[[-1/0,g],[1/0,g]]}else if(f){var p=-o/e,y=-c/s;return p!==y?[]:[[p,-1/0],[p,1/0]]}else if(e===0){var m=-o/a,x=-(l*m+c)/s;d=[[x,m]]}else if(s===0){var m=-c/l,x=-(a*m+o)/e;d=[[x,m]]}else if(a===0){var x=-o/e,m=-(s*x+c)/l;d=[[x,m]]}else if(l===0){var x=-c/s,m=-(e*x+o)/a;d=[[x,m]]}else{var x=(a*c-l*o)/(l*e-a*s),m=-(e*x+o)/a;d=[[x,m]]}return d.map(function(A){return[A[0],A[1]]})}function getPointsOnLines(n,r){var e=r.map(function(g){return[0,1].map(function(v){return[Math.min(g[0][v],g[1][v]),Math.max(g[0][v],g[1][v])]})}),a=[];if(n.length===2){var o=n[0],s=o[0],l=o[1];if(tinyThrottle(s-n[1][0])){if(!tinyThrottle(l-n[1][1])){var f=Math.max.apply(Math,e.map(function(g){return g[0][0]})),d=Math.min.apply(Math,e.map(function(g){return g[0][1]}));if(tinyThrottle(f-d)>0)return[];a=[[f,l],[d,l]]}}else{var c=Math.max.apply(Math,e.map(function(g){return g[1][0]})),u=Math.min.apply(Math,e.map(function(g){return g[1][1]}));if(tinyThrottle(c-u)>0)return[];a=[[s,c],[s,u]]}}return a.length||(a=n.filter(function(g){var v=g[0],p=g[1];return e.every(function(y){return 0<=tinyThrottle(v-y[0][0])&&0<=tinyThrottle(y[0][1]-v)&&0<=tinyThrottle(p-y[1][0])&&0<=tinyThrottle(y[1][1]-p)})})),a.map(function(g){return[tinyThrottle(g[0]),tinyThrottle(g[1])]})}function convertLines(n){return __spreadArrays(n.slice(1),[n[0]]).map(function(r,e){return[n[e],r]})}function getOverlapPointInfos(n,r){var e=n.slice(),a=r.slice();getShapeDirection(e)===-1&&e.reverse(),getShapeDirection(a)===-1&&a.reverse();var o=convertLines(e),s=convertLines(a),l=o.map(function(d){return getLinearConstants(d[0],d[1])}),c=s.map(function(d){return getLinearConstants(d[0],d[1])}),u=[];l.forEach(function(d,g){var v=o[g],p=[];c.forEach(function(y,m){var x=getIntersectionPointsByConstants(d,y),A=getPointsOnLines(x,[v,s[m]]);p.push.apply(p,A.map(function(_){return{index1:g,index2:m,pos:_,type:"intersection"}}))}),p.sort(function(y,m){return getDist$1(v[0],y.pos)-getDist$1(v[0],m.pos)}),u.push.apply(u,p),isInside(v[1],a)&&u.push({index1:g,index2:-1,pos:v[1],type:"inside"})}),s.forEach(function(d,g){if(isInside(d[1],e)){var v=!1,p=findIndex(u,function(y){var m=y.index2;return m===g?(v=!0,!1):!!v});p===-1&&(v=!1,p=findIndex(u,function(y){var m=y.index1,x=y.index2;return m===-1&&x+1===g?(v=!0,!1):!!v})),p===-1?u.push({index1:-1,index2:g,pos:d[1],type:"inside"}):u.splice(p,0,{index1:-1,index2:g,pos:d[1],type:"inside"})}});var f={};return u.filter(function(d){var g=d.pos,v=g[0]+"x"+g[1];return f[v]?!1:(f[v]=!0,!0)})}function getOverlapPoints(n,r){var e=getOverlapPointInfos(n,r);return e.map(function(a){var o=a.pos;return o})}function getOverlapSize(n,r){var e=getOverlapPoints(n,r);return getAreaSize(e)}function add(n,r,e,a,o,s){for(var l=0;l<o;++l){var c=e+l*o,u=a+l*o;n[c]+=n[u]*s,r[c]+=r[u]*s}}function swap(n,r,e,a,o){for(var s=0;s<o;++s){var l=e+s*o,c=a+s*o,u=n[l],f=r[l];n[l]=n[c],n[c]=u,r[l]=r[c],r[c]=f}}function divide(n,r,e,a,o){for(var s=0;s<a;++s){var l=e+s*a;n[l]/=o,r[l]/=o}}function ignoreDimension(n,r,e){e===void 0&&(e=Math.sqrt(n.length));for(var a=n.slice(),o=0;o<e;++o)a[o*e+r-1]=0,a[(r-1)*e+o]=0;return a[(r-1)*(e+1)]=1,a}function invert(n,r){r===void 0&&(r=Math.sqrt(n.length));for(var e=n.slice(),a=createIdentityMatrix(r),o=0;o<r;++o){var s=r*o+o;if(!throttle(e[s],TINY_NUM)){for(var l=o+1;l<r;++l)if(e[r*o+l]){swap(e,a,o,l,r);break}}if(!throttle(e[s],TINY_NUM))return[];divide(e,a,o,r,e[s]);for(var l=0;l<r;++l){var c=l,u=l+o*r,f=e[u];!throttle(f,TINY_NUM)||o===l||add(e,a,c,o,r,-f)}}return a}function transpose(n,r){r===void 0&&(r=Math.sqrt(n.length));for(var e=[],a=0;a<r;++a)for(var o=0;o<r;++o)e[o*r+a]=n[r*a+o];return e}function getOrigin(n,r){r===void 0&&(r=Math.sqrt(n.length));for(var e=[],a=n[r*r-1],o=0;o<r-1;++o)e[o]=n[r*(r-1)+o]/a;return e[r-1]=0,e}function fromTranslation(n,r){for(var e=createIdentityMatrix(r),a=0;a<r-1;++a)e[r*(r-1)+a]=n[a]||0;return e}function convertPositionMatrix(n,r){for(var e=n.slice(),a=n.length;a<r-1;++a)e[a]=0;return e[r-1]=1,e}function convertDimension(n,r,e){if(r===void 0&&(r=Math.sqrt(n.length)),r===e)return n;for(var a=createIdentityMatrix(e),o=Math.min(r,e),s=0;s<o-1;++s){for(var l=0;l<o-1;++l)a[s*e+l]=n[s*r+l];a[(s+1)*e-1]=n[(s+1)*r-1],a[(e-1)*e+s]=n[(r-1)*r+s]}return a[e*e-1]=n[r*r-1],a}function multiplies(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var a=createIdentityMatrix(n);return r.forEach(function(o){a=multiply(a,o,n)}),a}function multiply(n,r,e){e===void 0&&(e=Math.sqrt(n.length));var a=[],o=n.length/e,s=r.length/o;if(o){if(!s)return n}else return r;for(var l=0;l<e;++l)for(var c=0;c<s;++c){a[c*e+l]=0;for(var u=0;u<o;++u)a[c*e+l]+=n[u*e+l]*r[c*o+u]}return a}function plus(n,r){for(var e=Math.min(n.length,r.length),a=n.slice(),o=0;o<e;++o)a[o]=a[o]+r[o];return a}function minus(n,r){for(var e=Math.min(n.length,r.length),a=n.slice(),o=0;o<e;++o)a[o]=a[o]-r[o];return a}function convertCSStoMatrix(n,r){return r===void 0&&(r=n.length===6),r?[n[0],n[1],0,n[2],n[3],0,n[4],n[5],1]:n}function convertMatrixtoCSS(n,r){return r===void 0&&(r=n.length===9),r?[n[0],n[1],n[3],n[4],n[6],n[7]]:n}function calculate(n,r,e){e===void 0&&(e=r.length);var a=multiply(n,r,e),o=a[e-1];return a.map(function(s){return s/o})}function rotateX3d(n,r){return multiply(n,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function rotateY3d(n,r){return multiply(n,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function rotateZ3d(n,r){return multiply(n,createRotateMatrix(r,4))}function scale3d(n,r){var e=r[0],a=e===void 0?1:e,o=r[1],s=o===void 0?1:o,l=r[2],c=l===void 0?1:l;return multiply(n,[a,0,0,0,0,s,0,0,0,0,c,0,0,0,0,1],4)}function rotate(n,r){return calculate(createRotateMatrix(r,3),convertPositionMatrix(n,3))}function translate3d(n,r){var e=r[0],a=e===void 0?0:e,o=r[1],s=o===void 0?0:o,l=r[2],c=l===void 0?0:l;return multiply(n,[1,0,0,0,0,1,0,0,0,0,1,0,a,s,c,1],4)}function matrix3d(n,r){return multiply(n,r,4)}function createRotateMatrix(n,r){var e=Math.cos(n),a=Math.sin(n),o=createIdentityMatrix(r);return o[0]=e,o[1]=a,o[r]=-a,o[r+1]=e,o}function createIdentityMatrix(n){for(var r=n*n,e=[],a=0;a<r;++a)e[a]=a%(n+1)?0:1;return e}function createScaleMatrix(n,r){for(var e=createIdentityMatrix(r),a=Math.min(n.length,r-1),o=0;o<a;++o)e[(r+1)*o]=n[o];return e}function createOriginMatrix(n,r){for(var e=createIdentityMatrix(r),a=Math.min(n.length,r-1),o=0;o<a;++o)e[r*(r-1)+o]=n[o];return e}function createWarpMatrix(n,r,e,a,o,s,l,c){var u=n[0],f=n[1],d=r[0],g=r[1],v=e[0],p=e[1],y=a[0],m=a[1],x=o[0],A=o[1],_=s[0],b=s[1],S=l[0],C=l[1],E=c[0],T=c[1],w=[u,0,d,0,v,0,y,0,f,0,g,0,p,0,m,0,1,0,1,0,1,0,1,0,0,u,0,d,0,v,0,y,0,f,0,g,0,p,0,m,0,1,0,1,0,1,0,1,-x*u,-A*u,-_*d,-b*d,-S*v,-C*v,-E*y,-T*y,-x*f,-A*f,-_*g,-b*g,-S*p,-C*p,-E*m,-T*m],L=invert(w,8);if(!L.length)return[];var M=multiply(L,[x,A,_,b,S,C,E,T],8);return M[8]=1,convertDimension(transpose(M),3,4)}var __assign$3=function(){return __assign$3=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$3.apply(this,arguments)};function createMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function parseMat(n,r){return r===void 0&&(r=0),toMat(parse(n,r))}function calculateMatrixDist(n,r){var e=calculate(n,[r[0],r[1]||0,r[2]||0,1],4),a=e[3]||1;return[e[0]/a,e[1]/a,e[2]/a]}function getDistElementMatrix(n,r){r===void 0&&(r=document.body);for(var e=n,a=createMatrix();e;){var o=getComputedStyle(e).transform;if(a=matrix3d(parseMat(o),a),e===r)break;e=e.parentElement}return a=invert(a,4),a[12]=0,a[13]=0,a[14]=0,a}function toMat(n){var r=createMatrix();return n.forEach(function(e){var a=e.matrixFunction,o=e.functionValue;a&&(r=a(r,o))}),r}function parse(n,r){r===void 0&&(r=0);var e=isArray(n)?n:splitSpace(n);return e.map(function(a){var o=splitBracket(a),s=o.prefix,l=o.value,c=null,u=s,f="";if(s==="translate"||s==="translateX"||s==="translate3d"){var d=isObject(r)?__assign$3(__assign$3({},r),{"o%":r["%"]}):{"%":r,"o%":r},g=splitComma(l).map(function(N,G){return G===0&&"x%"in d?d["%"]=r["x%"]:G===1&&"y%"in d?d["%"]=r["y%"]:d["%"]=r["o%"],convertUnitSize(N,d)}),v=g[0],p=g[1],y=p===void 0?0:p,m=g[2],x=m===void 0?0:m;c=translate3d,f=[v,y,x]}else if(s==="translateY"){var A=isObject(r)?__assign$3({"%":r["y%"]},r):{"%":r},y=convertUnitSize(l,A);c=translate3d,f=[0,y,0]}else if(s==="translateZ"){var x=parseFloat(l);c=translate3d,f=[0,0,x]}else if(s==="scale"||s==="scale3d"){var _=splitComma(l).map(function(N){return parseFloat(N)}),b=_[0],S=_[1],C=S===void 0?b:S,E=_[2],T=E===void 0?1:E;c=scale3d,f=[b,C,T]}else if(s==="scaleX"){var b=parseFloat(l);c=scale3d,f=[b,1,1]}else if(s==="scaleY"){var C=parseFloat(l);c=scale3d,f=[1,C,1]}else if(s==="scaleZ"){var T=parseFloat(l);c=scale3d,f=[1,1,T]}else if(s==="rotate"||s==="rotateZ"||s==="rotateX"||s==="rotateY"){var w=splitUnit(l),L=w.unit,M=w.value,O=L==="rad"?M:M*Math.PI/180;s==="rotate"||s==="rotateZ"?(u="rotateZ",c=rotateZ3d):s==="rotateX"?c=rotateX3d:s==="rotateY"&&(c=rotateY3d),f=O}else if(s==="matrix3d")c=matrix3d,f=splitComma(l).map(function(N){return parseFloat(N)});else if(s==="matrix"){var P=splitComma(l).map(function(N){return parseFloat(N)});c=matrix3d,f=[P[0],P[1],0,0,P[2],P[3],0,0,0,0,1,0,P[4],P[5],0,1]}else u="";return{name:s,functionName:u,value:l,matrixFunction:c,functionValue:f}})}function hash(n){for(var r=5381,e=n.length;e;)r=r*33^n.charCodeAt(--e);return r>>>0}var stringHash=hash;function getHash(n){return stringHash(n).toString(36)}function getShadowRoot(n){if(n&&n.getRootNode){var r=n.getRootNode();if(r.nodeType===11)return r}}function replaceStyle(n,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(a,o){var s=o.trim();return(s?splitComma(s):[""]).map(function(l){var c=l.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(n))):c?".".concat(n," ").concat(c):".".concat(n)}).join(", ")+" {"})}function injectStyle(n,r,e,a,o){var s=getDocument(a),l=s.createElement("style");return l.setAttribute("type","text/css"),l.setAttribute("data-styled-id",n),l.setAttribute("data-styled-count","1"),e.nonce&&l.setAttribute("nonce",e.nonce),l.innerHTML=replaceStyle(n,r,e),(o||s.head||s.body).appendChild(l),l}function styled(n){var r="rCS"+getHash(n);return{className:r,inject:function(e,a){a===void 0&&(a={});var o=getShadowRoot(e),s=(o||e.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!s)s=injectStyle(r,n,a,e,o);else{var l=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(l+1))}return{destroy:function(){var c,u=parseFloat(s.getAttribute("data-styled-count"))||0;u<=1?(s.remove?s.remove():(c=s.parentNode)===null||c===void 0||c.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(u-1))}}}}}var extendStatics$1=function(n,r){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])},extendStatics$1(n,r)};function __extends$1(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");extendStatics$1(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var __assign$2=function(){return __assign$2=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$2.apply(this,arguments)};function __rest(n,r){var e={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&r.indexOf(a)<0&&(e[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)r.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(e[a[o]]=n[a[o]]);return e}function __decorate$1(n,r,e,a){var o=arguments.length,s=o<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,r,e,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(s=(o<3?l(s):o>3?l(r,e,s):l(r,e))||s);return o>3&&s&&Object.defineProperty(r,e,s),s}function __spreadArray(n,r,e){if(e||arguments.length===2)for(var a=0,o=r.length,s;a<o;a++)(s||!(a in r))&&(s||(s=Array.prototype.slice.call(r,0,a)),s[a]=r[a]);return n.concat(s||Array.prototype.slice.call(r))}function getClient(n){if("touches"in n){var r=n.touches[0]||n.changedTouches[0];return{clientX:r.clientX,clientY:r.clientY}}else return{clientX:n.clientX,clientY:n.clientY}}function filterDuplicated(n){if(typeof Map>"u")return n.filter(function(e,a){return n.indexOf(e)===a});var r=new Map;return n.filter(function(e){return r.has(e)?!1:(r.set(e,!0),!0)})}function elementFromPoint(n,r,e){var a=getDocument(n);return a.elementFromPoint&&a.elementFromPoint(r,e)||null}function createElement(n,r,e){var a=n.tag,o=n.children,s=n.attributes,l=n.className,c=n.style,u=r||getDocument(e).createElement(a);for(var f in s)u.setAttribute(f,s[f]);var d=u.children;if(o.forEach(function(v,p){createElement(v,d[p],u)}),l&&l.split(" ").forEach(function(v){hasClass(u,v)||addClass(u,v)}),c){var g=u.style;for(var f in c)g[f]=c[f]}return!r&&e&&e.appendChild(u),u}function h(n,r){for(var e=[],a=2;a<arguments.length;a++)e[a-2]=arguments[a];var o=r||{},s=o.className,l=s===void 0?"":s,c=o.style,u=c===void 0?{}:c,f=__rest(o,["className","style"]);return{tag:n,className:l,style:u,attributes:f,children:e}}function diffValue(n,r,e){n!==r&&e(n,r)}function getRect(n,r,e){var a;e===void 0&&(e=n.data.boundArea);var o=n.distX,s=o===void 0?0:o,l=n.distY,c=l===void 0?0:l,u=n.data,f=u.startX,d=u.startY;if(r>0){var g=Math.sqrt((s*s+c*c)/(1+r*r)),v=r*g;s=(s>=0?1:-1)*v,c=(c>=0?1:-1)*g}var p=Math.abs(s),y=Math.abs(c),m=s<0?f-e.left:e.right-f,x=c<0?d-e.top:e.bottom-d;a=calculateBoundSize([p,y],[0,0],[m,x],!!r),p=a[0],y=a[1],s=(s>=0?1:-1)*p,c=(c>=0?1:-1)*y;var A=Math.min(0,s),_=Math.min(0,c),b=f+A,S=d+_;return{left:b,top:S,right:b+p,bottom:S+y,width:p,height:y}}function getDefaultElementRect(n){var r=n.getBoundingClientRect(),e=r.left,a=r.top,o=r.width,s=r.height;return{pos1:[e,a],pos2:[e+o,a],pos3:[e,a+s],pos4:[e+o,a+s]}}function passTargets(n,r,e){var a=diff(n,r),o=a.list,s=a.prevList,l=a.added,c=a.removed,u=a.maintained;return __spreadArray(__spreadArray(__spreadArray([],l.map(function(f){return o[f]}),!0),c.map(function(f){return s[f]}),!0),e?u.map(function(f){var d=f[1];return o[d]}):[],!0)}function getLineSize(n){for(var r=0,e=n.length,a=1;a<e;++a)r=Math.max(getDist$1(n[a],n[a-1]),r);return r}var injector=styled(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),CLASS_NAME="selecto-selection ".concat(injector.className),PROPERTIES=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],OPTIONS=__spreadArray(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],PROPERTIES,!0),EVENTS=["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll","innerScroll"],METHODS=["clickTarget","getSelectableElements","setSelectedTargets","getElementPoints","getSelectedTargets","findSelectableTargets","triggerDragStart","checkScroll","selectTargetsByPoints","setSelectedTargetsByPoints"],Selecto$2=function(n){__extends$1(r,n);function r(a){a===void 0&&(a={});var o=n.call(this)||this;o.selectedTargets=[],o.dragScroll=new DragScroll$1,o._onDragStart=function(c,u){var f=c.data,d=c.clientX,g=c.clientY,v=c.inputEvent,p=o.options,y=p.selectFromInside,m=p.selectByClick,x=p.rootContainer,A=p.boundContainer,_=p.preventDragFromInside,b=_===void 0?!0:_,S=p.clickBySelectEnd,C=p.dragCondition;if(C&&!C(c)){c.stop();return}f.data={};var E=getWindow(o.container);f.innerWidth=E.innerWidth,f.innerHeight=E.innerHeight,o.findSelectableTargets(f),f.startSelectedTargets=o.selectedTargets,f.scaleMatrix=createMatrix(),f.containerX=0,f.containerY=0;var T=o.container,w={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(x){var L=o.container.getBoundingClientRect();f.containerX=L.left,f.containerY=L.top,f.scaleMatrix=getDistElementMatrix(o.container,x)}if(A){var M=isObject(A)&&"element"in A?__assign$2({left:!0,top:!0,bottom:!0,right:!0},A):{element:A,left:!0,top:!0,bottom:!0,right:!0},O=M.element,P=void 0;if(O){isString(O)?P=getDocument(T).querySelector(O):O===!0?P=o.container:P=O;var N=P.getBoundingClientRect();M.left&&(w.left=N.left),M.top&&(w.top=N.top),M.right&&(w.right=N.right),M.bottom&&(w.bottom=N.bottom)}}f.boundArea=w;var G={left:d,top:g,right:d,bottom:g,width:0,height:0},Y=[];if(!y||m&&!S){var F=o._findElement(u||v.target,f.selectableTargets);Y=F?[F]:[]}var z=Y.length>0,W=!y&&z;if(W&&!m)return c.stop(),!1;var j=v.type,U=j==="mousedown"||j==="touchstart",X=!c.isClick&&U?o.emit("dragStart",__assign$2(__assign$2({},c),{data:f.data})):!0;if(!X)return c.stop(),!1;if(o.continueSelect?(Y=passTargets(o.selectedTargets,Y,o.continueSelectWithoutDeselect),f.startPassedTargets=o.selectedTargets):f.startPassedTargets=[],o._select(Y,G,c,!0),f.startX=d,f.startY=g,f.selectFlag=!1,f.preventDragFromInside=!1,v.target){var tt=calculateMatrixDist(f.scaleMatrix,[d-f.containerX,g-f.containerY]);o.target.style.cssText+="position: ".concat(x?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(tt[0],"px, ").concat(tt[1],"px)")}if(W&&m&&!S)v.preventDefault(),b&&(o._selectEnd(f.startSelectedTargets,f.startPassedTargets,G,c),f.preventDragFromInside=!0);else{f.selectFlag=!0;var rt=o.options,J=rt.scrollOptions,et=rt.innerScrollOptions,it=!1;if(et){for(var ot=c.inputEvent,st=ot.target,ut=null,ft=st;ft&&ft!==getDocument(T).body;){var gt=getComputedStyle(ft).overflow!=="visible";if(gt){ut=ft;break}ft=ft.parentElement}ut&&(f.innerScrollOptions=__assign$2({container:ut,checkScrollEvent:!0},et===!0?{}:et),o.dragScroll.dragStart(c,f.innerScrollOptions),it=!0)}!it&&J&&J.container&&o.dragScroll.dragStart(c,J),S&&(f.selectFlag=!1,c.preventDrag())}return!0},o._onDrag=function(c){if(c.data.selectFlag){var u=o.scrollOptions,f=c.data.innerScrollOptions,d=f||(u==null?void 0:u.container);if(d&&!c.isScroll&&o.dragScroll.drag(c,f||u))return}o._checkSelected(c)},o._onDragEnd=function(c){var u=c.data,f=c.inputEvent,d=getRect(c,o.options.ratio),g=u.selectFlag,v=o.container;if(f&&o.emit("dragEnd",__assign$2(__assign$2({isDouble:!!c.isDouble,isClick:!!c.isClick,isDrag:!1,isSelect:g},c),{data:u.data,rect:d})),o.target.style.cssText+="display: none;",g)u.selectFlag=!1,o.dragScroll.dragEnd();else if(o.selectByClick&&o.clickBySelectEnd){var p=o._findElement((f==null?void 0:f.target)||elementFromPoint(v,c.clientX,c.clientY),u.selectableTargets);o._select(p?[p]:[],d,c)}u.preventDragFromInside||o._selectEnd(u.startSelectedTargets,u.startPassedTargets,d,c)},o._onKeyDown=function(c){var u=o.options,f=!1;if(!o._keydownContinueSelect){var d=o._sameCombiKey(c,u.toggleContinueSelect);o._keydownContinueSelect=d,f||(f=d)}if(!o._keydownContinueSelectWithoutDeselection){var d=o._sameCombiKey(c,u.toggleContinueSelectWithoutDeselect);o._keydownContinueSelectWithoutDeselection=d,f||(f=d)}f&&o.emit("keydown",{keydownContinueSelect:o._keydownContinueSelect,keydownContinueSelectWithoutDeselection:o._keydownContinueSelectWithoutDeselection})},o._onKeyUp=function(c){var u=o.options,f=!1;if(o._keydownContinueSelect){var d=o._sameCombiKey(c,u.toggleContinueSelect,!0);o._keydownContinueSelect=!d,f||(f=d)}if(o._keydownContinueSelectWithoutDeselection){var d=o._sameCombiKey(c,u.toggleContinueSelectWithoutDeselect,!0);o._keydownContinueSelectWithoutDeselection=!d,f||(f=d)}f&&o.emit("keyup",{keydownContinueSelect:o._keydownContinueSelect,keydownContinueSelectWithoutDeselection:o._keydownContinueSelectWithoutDeselection})},o._onBlur=function(){(o._keydownContinueSelect||o._keydownContinueSelectWithoutDeselection)&&(o._keydownContinueSelect=!1,o._keydownContinueSelectWithoutDeselection=!1,o.emit("keyup",{keydownContinueSelect:o._keydownContinueSelect,keydownContinueSelectWithoutDeselection:o._keydownContinueSelectWithoutDeselection}))},o._onDocumentSelectStart=function(c){var u=getDocument(o.container);if(o.gesto.isFlag()){var f=o.dragContainer;f===getWindow(o.container)&&(f=u.documentElement);var d=isNode(f)?[f]:[].slice.call(f),g=c.target;d.some(function(v){if(v===g||v.contains(g))return c.preventDefault(),!0})}},o.target=a.portalContainer;var s=a.container;o.options=__assign$2({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:getDefaultElementRect,cspNonce:"",ratio:0},a);var l=o.options.portalContainer;return l&&(s=l.parentElement),o.container=s||document.body,o.initElement(),o.initDragScroll(),o.setKeyController(),o}var e=r.prototype;return e.setSelectedTargets=function(a){var o=this.selectedTargets,s=diff(o,a),l=s.added,c=s.removed,u=s.prevList,f=s.list;return this.selectedTargets=a,{added:l.map(function(d){return f[d]}),removed:c.map(function(d){return u[d]}),beforeSelected:o,selected:a}},e.setSelectedTargetsByPoints=function(a,o){var s=Math.min(a[0],o[0]),l=Math.min(a[1],o[1]),c=Math.max(a[0],o[0]),u=Math.max(a[1],o[1]),f={left:s,top:l,right:c,bottom:u,width:c-s,height:u-l},d={ignoreClick:!0};this.findSelectableTargets(d);var g=this.hitTest(f,d),v=this.setSelectedTargets(g);return __assign$2(__assign$2({},v),{rect:f})},e.selectTargetsByPoints=function(a,o){var s=new MouseEvent("mousedown",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),l=new MouseEvent("mousemove",{clientX:o[0],clientY:o[1],cancelable:!0,bubbles:!0}),c=new MouseEvent("mousemove",{clientX:o[0],clientY:o[1],cancelable:!0,bubbles:!0}),u=this.gesto,f=u.onDragStart(s);f!==!1&&(u.onDrag(l),u.onDragEnd(c))},e.getSelectedTargets=function(){return this.selectedTargets},e.triggerDragStart=function(a){return this.gesto.triggerDragStart(a),this},e.destroy=function(){var a;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),removeEvent(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(a=this.target.parentElement)===null||a===void 0||a.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},e.getElementPoints=function(a){var o=this.getElementRect||getDefaultElementRect,s=o(a),l=[s.pos1,s.pos2,s.pos4,s.pos3];if(o!==getDefaultElementRect){var c=a.getBoundingClientRect();return fitPoints(l,c)}return l},e.getSelectableElements=function(){var a=this.container,o=[];return this.options.selectableTargets.forEach(function(s){if(isFunction(s)){var l=s();l&&o.push.apply(o,[].slice.call(l))}else if(isNode(s))o.push(s);else if(isObject(s))o.push(s.value||s.current);else{var c=[].slice.call(getDocument(a).querySelectorAll(s));o.push.apply(o,c)}}),o},e.checkScroll=function(){if(this.gesto.isFlag()){var a=this.scrollOptions,o=this.gesto.getEventData().innerScrollOptions,s=o||(a==null?void 0:a.container);s&&this.dragScroll.checkScroll(__assign$2({inputEvent:this.gesto.getCurrentEvent()},o||a))}},e.findSelectableTargets=function(a){var o=this;a===void 0&&(a=this.gesto.getEventData());var s=this.getSelectableElements(),l=s.map(function(g){return o.getElementPoints(g)});a.selectableTargets=s,a.selectablePoints=l,a.selectableParentMap=null;var c=this.options,u=c.checkOverflow||c.innerScrollOptions,f=getDocument(this.container);if(u){var d=new Map;a.selectableInnerScrollParentMap=d,a.selectableInnerScrollPathsList=s.map(function(g,v){for(var p=g.parentElement,y=[],m=[],x=function(){var A=d.get(p);if(!A){var _=getComputedStyle(p).overflow!=="visible";if(_){var b=getDefaultElementRect(p);A={parentElement:p,indexes:[],points:[b.pos1,b.pos2,b.pos4,b.pos3],paths:__spreadArray([],m,!0)},y.push(p),y.forEach(function(S){d.set(S,A)}),y=[]}}A?(p=A.parentElement,d.get(p).indexes.push(v),m.push(p)):y.push(p),p=p.parentElement};p&&p!==f.body;)x();return m})}return c.checkOverflow||(a.selectableInners=s.map(function(){return!0})),this._refreshGroups(a),s},e.clickTarget=function(a,o){var s=getClient(a),l=s.clientX,c=s.clientY,u={data:{selectFlag:!1},clientX:l,clientY:c,inputEvent:a,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(u,o)&&this._onDragEnd(u),this},e.setKeyController=function(){var a=this.options,o=a.keyContainer,s=a.toggleContinueSelect,l=a.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(s||l)&&(this.keycon=new KeyController$1(o||getWindow(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},e.setKeyEvent=function(){var a=this.options,o=a.toggleContinueSelect,s=a.toggleContinueSelectWithoutDeselect;!o&&!s||this.keycon||this.setKeyController()},e.setKeyContainer=function(a){var o=this,s=this.options;diffValue(s.keyContainer,a,function(){s.keyContainer=a,o.setKeyController()})},e.getContinueSelect=function(){var a=this.options,o=a.continueSelect,s=a.toggleContinueSelect;return!s||!this._keydownContinueSelect?o:!o},e.getContinueSelectWithoutDeselect=function(){var a=this.options,o=a.continueSelectWithoutDeselect,s=a.toggleContinueSelectWithoutDeselect;return!s||!this._keydownContinueSelectWithoutDeselection?o:!o},e.setToggleContinueSelect=function(a){var o=this,s=this.options;diffValue(s.toggleContinueSelect,a,function(){s.toggleContinueSelect=a,o.setKeyEvent()})},e.setToggleContinueSelectWithoutDeselect=function(a){var o=this,s=this.options;diffValue(s.toggleContinueSelectWithoutDeselect,a,function(){s.toggleContinueSelectWithoutDeselect=a,o.setKeyEvent()})},e.setPreventDefault=function(a){this.gesto.options.preventDefault=a},e.setCheckInput=function(a){this.gesto.options.checkInput=a},e.initElement=function(){var a=this.container;this.target=createElement(h("div",{className:CLASS_NAME}),this.target,a);var o=this.target,s=this.options,l=s.dragContainer,c=s.checkInput,u=s.preventDefault,f=s.preventClickEventOnDragStart,d=s.preventClickEventOnDrag,g=s.preventClickEventByCondition,v=s.preventRightClick,p=v===void 0?!0:v;this.dragContainer=typeof l=="string"?[].slice.call(getDocument(a).querySelectorAll(l)):l||this.target.parentNode,this.gesto=new Gesto(this.dragContainer,{checkWindowBlur:!0,container:getWindow(a),checkInput:c,preventDefault:u,preventClickEventOnDragStart:f,preventClickEventOnDrag:d,preventClickEventByCondition:g,preventRightClick:p}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),addEvent(document,"selectstart",this._onDocumentSelectStart),this.injectResult=injector.inject(o,{nonce:this.options.cspNonce})},e.hitTest=function(a,o,s){var l=this.options,c=l.hitRate,u=l.selectByClick,f=a.left,d=a.top,g=a.right,v=a.bottom,p=o.innerGroups,y=o.innerWidth,m=o.innerHeight,x=s==null?void 0:s.clientX,A=s==null?void 0:s.clientY,_=o.ignoreClick,b=[[f,d],[g,d],[g,v],[f,v]],S=splitUnit("".concat(c)),C=function(W,j){var U=_?!1:isInside([x,A],W);if(u&&U)return!0;var X=getOverlapPoints(b,W);if(!X.length)return!1;var tt=getAreaSize(X),rt=0;if(tt===0&&getAreaSize(W)===0?(rt=getLineSize(W),tt=getLineSize(X)):rt=getAreaSize(W),S.unit==="px")return tt>=S.value;var J=between(Math.round(tt/rt*100),0,100);return J>=Math.min(100,S.value)},E=o.selectableTargets,T=o.selectablePoints,w=o.selectableInners;if(!p)return E.filter(function(W,j){return w[j]?C(T[j],E[j]):!1});for(var L=[],M=Math.floor(f/y),O=Math.floor(g/y),P=Math.floor(d/m),N=Math.floor(v/m),G=M;G<=O;++G){var Y=p[G];if(Y)for(var F=P;F<=N;++F){var z=Y[F];z&&z.forEach(function(W){var j=T[W],U=w[W],X=E[W];U&&C(j)&&L.push(X)})}}return filterDuplicated(L)},e.initDragScroll=function(){var a=this;this.dragScroll.on("scrollDrag",function(o){var s=o.next;s(a.gesto.getCurrentEvent())}).on("scroll",function(o){var s=o.container,l=o.direction,c=a.gesto.getEventData().innerScrollOptions;c?a.emit("innerScroll",{container:s,direction:l}):a.emit("scroll",{container:s,direction:l})}).on("move",function(o){var s=o.offsetX,l=o.offsetY,c=o.inputEvent,u=a.gesto;if(!(!u||!u.isFlag())){var f=a.gesto.getEventData(),d=f.boundArea;f.startX-=s,f.startY-=l;var g=a.gesto.getEventData().innerScrollOptions,v=g==null?void 0:g.container,p=!1;if(v){var y=f.selectableInnerScrollParentMap,m=y.get(v);m&&(m.paths.forEach(function(x){var A=y.get(x);A.points.forEach(function(_){_[0]-=s,_[1]-=l})}),m.indexes.forEach(function(x){f.selectablePoints[x].forEach(function(A){A[0]-=s,A[1]-=l})}),p=!0)}p||f.selectablePoints.forEach(function(x){x.forEach(function(A){A[0]-=s,A[1]-=l})}),a._refreshGroups(f),d.left-=s,d.right-=s,d.top-=l,d.bottom-=l,a.gesto.scrollBy(s,l,c.inputEvent),a._checkSelected(a.gesto.getCurrentEvent())}})},e._select=function(a,o,s,l){var c=s.inputEvent,u=s.data,f=this.setSelectedTargets(a);l&&this.emit("selectStart",__assign$2(__assign$2({},f),{rect:o,inputEvent:c,data:u.data,isTrusted:s.isTrusted})),(f.added.length||f.removed.length)&&this.emit("select",__assign$2(__assign$2({},f),{rect:o,inputEvent:c,data:u.data,isTrusted:s.isTrusted}))},e._selectEnd=function(a,o,s,l){var c=l.inputEvent,u=l.isDouble,f=l.data,d=diff(a,this.selectedTargets),g=d.added,v=d.removed,p=d.prevList,y=d.list,m=diff(o,this.selectedTargets),x=m.added,A=m.removed,_=m.prevList,b=m.list,S=c&&c.type,C=S==="mousedown"||S==="touchstart";this.emit("selectEnd",{startSelected:a,beforeSelected:o,selected:this.selectedTargets,added:g.map(function(E){return y[E]}),removed:v.map(function(E){return p[E]}),afterAdded:x.map(function(E){return b[E]}),afterRemoved:A.map(function(E){return _[E]}),isDragStart:C,isClick:!!l.isClick,isDouble:!!u,rect:s,inputEvent:c,data:f.data,isTrusted:l.isTrusted})},e._checkSelected=function(a,o){o===void 0&&(o=getRect(a,this.options.ratio));var s=a.data,l=o.top,c=o.left,u=o.width,f=o.height,d=s.selectFlag,g=s.containerX,v=s.containerY,p=s.scaleMatrix,y=calculateMatrixDist(p,[c-g,l-v]),m=calculateMatrixDist(p,[u,f]),x=[];if(d){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(y[0],"px, ").concat(y[1],"px);")+"width:".concat(m[0],"px;height:").concat(m[1],"px;");var A=this.hitTest(o,s,a);x=passTargets(s.startPassedTargets,A,this.continueSelect&&this.continueSelectWithoutDeselect)}var _=this.emit("drag",__assign$2(__assign$2({},a),{data:s.data,isSelect:d,rect:o}));if(_===!1){this.target.style.cssText+="display: none;",a.stop();return}d&&this._select(x,o,a)},e._sameCombiKey=function(a,o,s){if(!o)return!1;var l=getCombi(a.inputEvent,a.key),c=[].concat(o),u=isArray(c[0])?c:[c];if(s){var f=a.key;return u.some(function(d){return d.some(function(g){return g===f})})}return u.some(function(d){return d.every(function(g){return l.indexOf(g)>-1})})},e._findElement=function(a,o){for(var s=a;s&&!(o.indexOf(s)>-1);)s=s.parentElement;return s},e._refreshGroups=function(a){var o,s=a.innerWidth,l=a.innerHeight,c=a.selectablePoints;if(this.options.checkOverflow){var u=(o=this.gesto.getEventData().innerScrollOptions)===null||o===void 0?void 0:o.container,f=a.selectableInnerScrollParentMap,d=a.selectableInnerScrollPathsList;a.selectableInners=d.map(function(p,y){var m=!1;return p.every(function(x){if(m)return!0;if(x===u)return m=!0,!0;var A=f.get(x);if(A){var _=c[y],b=A.points,S=getOverlapPoints(_,b);if(!S.length)return!1}return!0})})}if(!s||!l)a.innerGroups=null;else{var g=a.selectablePoints,v={};g.forEach(function(p,y){var m=1/0,x=-1/0,A=1/0,_=-1/0;p.forEach(function(C){var E=Math.floor(C[0]/s),T=Math.floor(C[1]/l);m=Math.min(E,m),x=Math.max(E,x),A=Math.min(T,A),_=Math.max(T,_)});for(var b=m;b<=x;++b)for(var S=A;S<=_;++S)v[b]=v[b]||{},v[b][S]=v[b][S]||[],v[b][S].push(y)}),a.innerGroups=v}},r=__decorate$1([Properties(PROPERTIES,function(a,o){var s={enumerable:!0,configurable:!0,get:function(){return this.options[o]}},l=camelize("get ".concat(o));a[l]?s.get=function(){return this[l]()}:s.get=function(){return this.options[o]};var c=camelize("set ".concat(o));a[c]?s.set=function(f){this[c](f)}:s.set=function(f){this.options[o]=f},Object.defineProperty(a,o,s)})],r),r}(EventEmitter$1),Selecto$1$1=function(n){__extends$1(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(Selecto$2);const VanillaSelecto=Selecto$1$1;var extendStatics=function(n,r){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])},extendStatics(n,r)};function __extends(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");extendStatics(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var __assign$1=function(){return __assign$1=Object.assign||function(r){for(var e,a=1,o=arguments.length;a<o;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},__assign$1.apply(this,arguments)};function __decorate(n,r,e,a){var o=arguments.length,s=o<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,r,e,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(s=(o<3?l(s):o>3?l(r,e,s):l(r,e))||s);return o>3&&s&&Object.defineProperty(r,e,s),s}var REACT_EVENTS=EVENTS.map(function(n){return camelize("on ".concat(n))}),Selecto=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}var e=r.prototype;return e.render=function(){return reactExports.createElement("div",{className:CLASS_NAME,ref:ref(this,"selectionElement")})},e.componentDidMount=function(){var a=this,o=this.props,s={};OPTIONS.forEach(function(l){l in o&&(s[l]=o[l])}),this.selecto=new VanillaSelecto(__assign$1(__assign$1({},s),{portalContainer:this.selectionElement})),EVENTS.forEach(function(l,c){a.selecto.on(l,function(u){var f=a.props,d=f[REACT_EVENTS[c]]&&f[REACT_EVENTS[c]](u);d===!1&&u.stop()})})},e.componentDidUpdate=function(a){var o=this.props,s=this.selecto;PROPERTIES.forEach(function(l){a[l]!==o[l]&&(s[l]=o[l])})},e.componentWillUnmount=function(){this.selecto.destroy()},__decorate([withMethods(METHODS)],r.prototype,"selecto",void 0),r}(reactExports.PureComponent);const Selecto$1=Selecto,pt=class pt{static iterateLayerLink(r,e){const{layerConfigs:a}=designerStore$1;let o=a[r];if(o){e.push(o.id),o.childHeader&&pt.iterateLayerLink(o.childHeader,e);let s=a[o.next];for(;s;)s.childHeader&&pt.iterateLayerLink(s.childHeader,e),e.push(s.id),s=a[s.next]}}};R(pt,"findPathGroupLayer",r=>{const e=new Set,{layerConfigs:a}=designerStore$1;return r.forEach(o=>{const s=a[o];s.type==="group"&&e.add(o);let l=s==null?void 0:s.pid;for(;l;){const{pid:c,id:u,type:f}=a[l];l=c,f==="group"&&e.add(u)}}),Array.from(e)}),R(pt,"findTopGroupLayer",(r,e=!1)=>{const a=new Set,{layerConfigs:o}=designerStore$1;return r.forEach(s=>{var u;let l=s,c=(u=o[s])==null?void 0:u.pid;for(;c;){const{pid:f,id:d}=o[c];c=f,l=d}(e||l!==s)&&a.add(l)}),Array.from(a)}),R(pt,"findAllChildLayerBySubId",(r,e=!1)=>{const a=pt.findTopGroupLayer(r,e);return pt.findAllChildLayer(a)}),R(pt,"findAllChildLayer",(r,e=!0)=>{let a=[];const{layerConfigs:o}=designerStore$1;return r.forEach(s=>{a.push(s);let l=o[s];l.childHeader&&pt.iterateLayerLink(l.childHeader,a)}),e||(a=a.filter(s=>!r.includes(s))),[...new Set(a)]}),R(pt,"hasSameGroup",r=>{if(r.length<=1)return!1;const{layerConfigs:e}=designerStore$1;if(r.some(o=>e[o].type!=="group"&&!e[o].pid))return!1;const a=new Set;return r.filter(o=>e[o].type!=="group").forEach(o=>{pt.findTopGroupLayer([o],!0).forEach(s=>a.add(s))}),a.size===1});let LayerUtil=pt;function setControlPointLineColor(n){const{targetIds:r}=eventOperateStore$1;if(r.length===0)return;const e=document.querySelectorAll(".moveable-control,.moveable-line");e&&(n?e.forEach(a=>{a.style.backgroundColor="#ff4b29"}):e.forEach(a=>{a.style.backgroundColor="#00bbffff"}))}class DesignerSelectable extends reactExports.Component{constructor(){super(...arguments);R(this,"selectorRef",React.createRef());R(this,"onSelectEnd",e=>{var v;const{selected:a}=e,{movableRef:o,setTargetIds:s}=eventOperateStore$1;if(!o)return;const l=o;if(e.isDragStart){e.inputEvent.preventDefault();const p=setTimeout(()=>{l.dragStart(e.inputEvent),clearTimeout(p)})}const{layerConfigs:c}=designerStore$1;let u=a.map(p=>p.id),f=!!((v=c[u[0]])!=null&&v.lock);if(u.length===1)e.inputEvent.shiftKey||c[u[0]].pid&&(u=LayerUtil.findAllChildLayerBySubId(u));else if(u.length>1){const p=LayerUtil.findAllChildLayerBySubId(u,!0);for(let y=0;y<p.length;y++){const m=c[p[y]];if(m.lock!==f&&m.type!=="group"){f=!1;break}}u=p.filter(y=>c[y].lock===f)}s(u);const{layerInstances:d}=layerListStore$1,{menu:g}=designerLeftStore;g==="layer-list"&&u.forEach(p=>{var y;(y=d[p])==null||y.setState({selected:!0})}),setControlPointLineColor(f)});R(this,"onDragStart",e=>{const{movableRef:a,targets:o}=eventOperateStore$1,s=a,l=e.inputEvent.target;(s.isMoveableElement(l)||o.some(c=>c===l||c.contains(l)))&&e.stop()})}componentDidMount(){const{setSelectorRef:e}=eventOperateStore$1;e(this.selectorRef.current)}render(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[this.props.children,jsxRuntimeExports.jsx(Selecto$1,{ref:this.selectorRef,dragContainer:".lc-event-container",selectableTargets:[".lc-comp-item"],hitRate:0,selectByClick:!0,selectFromInside:!1,toggleContinueSelect:["ctrl"],ratio:0,onDragStart:this.onDragStart,onSelectEnd:this.onSelectEnd})]})}}const GroupSelectable=observer(DesignerSelectable);class LayerListStore{constructor(){R(this,"layerInstances",{});R(this,"searchContent","");R(this,"setContent",r=>this.searchContent=r);R(this,"lockChange",(r,e)=>{const a=[],{layerConfigs:o}=designerStore$1,{type:s}=o[r];s==="group"?LayerUtil.findAllChildLayer([r]).forEach(l=>a.push({id:l,lock:e})):a.push({id:r,lock:e}),historyRecordOperateProxy$1.doLockUpd(a)});R(this,"selectedChange",(r,e)=>{var p;const{targetIds:a,setTargetIds:o}=eventOperateStore$1,{layerConfigs:s}=designerStore$1,{type:l,lock:c}=s[r];if(!l)return;const u=l==="group";let f=[];if(e.ctrlKey)if(a.includes(r))if(u){const y=LayerUtil.findAllChildLayer([r]);f=a.filter(m=>!y.includes(m))}else f=a.filter(y=>y!==r);else if(a.length===0)u?f=LayerUtil.findAllChildLayer([r]):f=[r];else{const y=s[a[0]].lock;c!==y?u?f=[...a,...LayerUtil.findAllChildLayer([r])].filter(m=>!s[m].lock):f=[...a,r].filter(m=>!s[m].lock):u?f=[...a,...LayerUtil.findAllChildLayer([r])]:f=[...a,r],f=[...new Set(f)]}else u?f=LayerUtil.findAllChildLayer([r]):f=[r];const d=setTimeout(()=>{o(f),clearTimeout(d)},0),g=(p=s[f[0]])==null?void 0:p.lock,v=setTimeout(()=>{setControlPointLineColor(g),clearTimeout(v)},0)});R(this,"hideChange",(r,e)=>{const a=[],{layerConfigs:o}=designerStore$1,{type:s}=o[r];s==="group"?LayerUtil.findAllChildLayer([r]).forEach(l=>a.push({id:l,hide:e})):a.push({id:r,hide:e}),historyRecordOperateProxy$1.doHideUpd(a)});makeObservable(this,{searchContent:observable,setContent:action})}}const layerListStore=new LayerListStore,layerListStore$1=layerListStore;class BaseInfo extends reactExports.Component{constructor(e){super(e);R(this,"init",()=>{var s;const{activeElem:e}=rightStore$1,{layerConfigs:a}=designerStore$1,o=a[e.id];if(o)if(o.type==="group"){const l=LayerUtil.findAllChildLayer([o.id]).filter(u=>a[u].type!=="group"),c=this.calculateGroupRect(l);this.state={...o,...c}}else{const l=(s=editorDesignerLoader$1.definitionMap[o.type])==null?void 0:s.getBaseInfo();this.state={...o,version:l==null?void 0:l.version}}});R(this,"calculateGroupRect",e=>{const{layerConfigs:a}=designerStore$1;let o=1/0,s=1/0,l=-1/0,c=-1/0;return e.forEach(u=>{const{x:f=0,y:d=0,width:g=0,height:v=0}=a[u];o=Math.min(o,f),s=Math.min(s,d),l=Math.max(l,f+g),c=Math.max(c,d+v)}),{x:o,y:s,width:l-o,height:c-s}});R(this,"changeName",e=>{const{controller:a}=this.props;a.update({base:{name:e}},{reRender:!1});const{updateLayer:o}=designerStore$1;o&&o([{id:this.state.id,name:e}]);const{layerInstances:s}=layerListStore$1,l=s[this.state.id];l&&l.setState({name:e})});R(this,"handleMap",{name:this.changeName,width:e=>{var a;return(a=eventOperateStore$1.movableRef)==null?void 0:a.request("resizable",{offsetWidth:e,direction:[1,1]},!0)},height:e=>{var a;return(a=eventOperateStore$1.movableRef)==null?void 0:a.request("resizable",{offsetHeight:e,direction:[1,1]},!0)},posX:e=>{var a;return(a=eventOperateStore$1.movableRef)==null?void 0:a.request("draggable",{x:e},!0)},posY:e=>{var a;return(a=eventOperateStore$1.movableRef)==null?void 0:a.request("draggable",{y:e},!0)},align:e=>this.handleMap[e](),left:()=>{var e;return(e=eventOperateStore$1.movableRef)==null?void 0:e.request("draggable",{x:0},!0)},horizontally:()=>{var e;return(e=eventOperateStore$1.movableRef)==null?void 0:e.request("draggable",{x:designerStore$1.canvasConfig.width/2-this.state.width/2},!0)},right:()=>{var e;return(e=eventOperateStore$1.movableRef)==null?void 0:e.request("draggable",{x:designerStore$1.canvasConfig.width-this.state.width},!0)},top:()=>{var e;return(e=eventOperateStore$1.movableRef)==null?void 0:e.request("draggable",{y:0},!0)},vertically:()=>{var e;return(e=eventOperateStore$1.movableRef)==null?void 0:e.request("draggable",{y:designerStore$1.canvasConfig.height/2-this.state.height/2},!0)},bottom:()=>{var e;return(e=eventOperateStore$1.movableRef)==null?void 0:e.request("draggable",{y:designerStore$1.canvasConfig.height-this.state.height},!0)}});R(this,"onFieldChange",e=>{const{id:a,data:o}=e,{targetIds:s,setTargetIds:l}=eventOperateStore$1;if(!s.includes(this.state.id)){const{type:u}=this.state;if(u==="group"){const{layerConfigs:f}=designerStore$1,d=LayerUtil.findAllChildLayer([this.state.id]).filter(g=>f[g].type!=="group");l(d)}else l([this.state.id])}const c=setTimeout(()=>{this.handleMap[a](o),clearTimeout(c)},1)});R(this,"buildSchema",()=>{const{name:e,width:a,height:o,x:s,y:l}=this.state;return{type:"grid",config:{columns:2},children:[{id:"name",key:"name",label:"名称",type:"input",value:e,config:{containerStyle:{gridColumn:"1/3"}}},{type:"grid",label:"尺寸",config:{columns:2,containerStyle:{gridColumn:"1/3"}},children:[{id:"width",key:"width",type:"number-input",label:"宽度",value:a,reRender:!0},{id:"height",key:"height",type:"number-input",label:"高度",value:o,reRender:!0}]},{type:"grid",label:"位置",config:{columns:2,containerStyle:{gridColumn:"1/3"}},children:[{id:"posX",key:"posX",type:"number-input",label:"X轴",reRender:!0,value:s},{id:"posY",key:"posY",type:"number-input",label:"Y轴",reRender:!0,value:l}]},{id:"align",label:"对齐",type:"group-button",config:{containerStyle:{gridColumn:"1/3"},items:[{value:"left",content:jsxRuntimeExports.jsx("img",{src:alignLeft,alt:"left"})},{value:"horizontally",content:jsxRuntimeExports.jsx("img",{src:alignHorizontally,alt:"horizontally"})},{value:"right",content:jsxRuntimeExports.jsx("img",{src:alignRight,alt:"right"})},{value:"top",content:jsxRuntimeExports.jsx("img",{src:alignTop,alt:"top"})},{value:"vertically",content:jsxRuntimeExports.jsx("img",{src:alignVertically,alt:"vertically"})},{value:"bottom",content:jsxRuntimeExports.jsx("img",{src:alignBottom,alt:"bottom"})}]}}]}});this.init()}componentDidMount(){const{setBaseConfigRef:e}=baseInfoStore;e&&e(this)}componentWillUnmount(){const{setBaseConfigRef:e}=baseInfoStore;e&&e(null)}render(){const{type:e,version:a}=this.state,o=this.buildSchema();return jsxRuntimeExports.jsxs("div",{className:"base-info-config",children:[jsxRuntimeExports.jsx("div",{className:"version-info",children:jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(InfoCircleOutlined$1,{})," ",e," | ",a?`版本: ${a}`:"无版本信息"]})}),jsxRuntimeExports.jsx(LCGUI,{schema:o,onFieldChange:this.onFieldChange})]})}}const BaseInfo$1=Object.freeze(Object.defineProperty({__proto__:null,default:BaseInfo},Symbol.toStringTag,{value:"Module"}));class GroupLayerDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"",compKey:"group"}}getChartImg(){return null}getController(){return null}getInitConfig(){return{base:{id:"",name:"分组图层",type:"group"}}}getMenuList(){return[{icon:AppstoreFilled$1,key:"base",name:"基础"}]}getMenuToConfigContentMap(){return{base:BaseInfo}}getActionList(){return[{name:"显示",id:"show",handler:r=>{r.show()}},{name:"隐藏",id:"hide",handler:r=>{r.hide()}}]}}const __vite_glob_0_50=Object.freeze(Object.defineProperty({__proto__:null,default:GroupLayerDefinition},Symbol.toStringTag,{value:"Module"})),BaseColorBlockComponent=React.forwardRef((n,r)=>{const[e,a]=reactExports.useState({...n}),o=reactExports.useRef({});reactExports.useImperativeHandle(r,()=>({updateConfig:c=>a({...c}),setEventHandler:c=>o.current=c}));const s=()=>{"click"in o.current&&o.current.click()},{style:l}=e;return jsxRuntimeExports.jsx("div",{style:{height:"100%",display:"flex",...l},onClick:s})});class BaseColorBlockController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BaseColorBlockComponent,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(r,e){var a;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((a=this.instance)==null||a.updateConfig(this.config))}updateTheme(r){}registerEvent(){var e,a,o;const r=(a=(e=this.config)==null?void 0:e.base)==null?void 0:a.id;(o=this.instance)==null||o.setEventHandler({click:()=>BPExecutor.triggerComponentEvent(r,"click",this.config)})}}const __vite_glob_0_51=Object.freeze(Object.defineProperty({__proto__:null,BaseColorBlockController},Symbol.toStringTag,{value:"Module"})),baseColorBlockImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZoAAAEFCAIAAABVVLaiAAAF10lEQVR4Xu3UsaoWBADH0W/Oq7uDi+QNmuSCDermkCgOQoOJXpcKQeSCgpPQJkpDQ0GTTrb3iL3E9/9NB84znMP5kzPIPHxy54enP549fwBHd3jz8vTzpxNovPj4/dU/H1/+5xkcnc5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMbO4e356Zd3J9D45f3Nax9eXP7jFRzd4d39038fXYLGxfO7377+/eTibzi6w/v7N/579A003v50+/qvHy5dfIWj0xkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfsHF7f++6ve1eg8dvDWzd+fnPl/BMc3f+ZJNyrpdScRwAAAABJRU5ErkJggg==";class AnimationConfig extends reactExports.Component{render(){return jsxRuntimeExports.jsx("div",{className:"lc-animation-config",children:"动画设置"})}}const AnimationConfig$1=Object.freeze(Object.defineProperty({__proto__:null,default:AnimationConfig},Symbol.toStringTag,{value:"Module"}));class Dialog extends reactExports.Component{constructor(){super(...arguments);R(this,"onClose",()=>{const{onClose:e}=this.props;e&&e()})}render(){const{title:e="设置",visible:a=!1,children:o,width:s=400,height:l,className:c}=this.props;return a?ReactDOM.createPortal(jsxRuntimeExports.jsx("div",{className:`lc-dialog lc-dialog-mask ${c}`,children:jsxRuntimeExports.jsxs("div",{className:"dialog-body",children:[jsxRuntimeExports.jsxs("div",{className:"dialog-header",children:[jsxRuntimeExports.jsx("div",{className:"dialog-title",children:e}),jsxRuntimeExports.jsx("div",{className:"dialog-close",children:jsxRuntimeExports.jsx(LineOutlined$1,{onClick:this.onClose})})]}),jsxRuntimeExports.jsx("div",{className:"dialog-content",style:{width:s,height:l,minHeight:100},children:o})]})}),document.body):null}}const closeIcon="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='25'%20height='25'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%208L40%2040'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2040L40%208'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";class ThemeItem extends reactExports.Component{constructor(){super(...arguments);R(this,"onSelected",()=>{const{onSelected:e,id:a="",name:o="",colors:s}=this.props;e&&e({id:a,name:o,colors:s})})}render(){const{colors:e,selected:a=!1,itemStyle:o,name:s,id:l,showOperator:c=!1,onDel:u}=this.props;return jsxRuntimeExports.jsxs("div",{id:l,className:`lc-theme-item ${a?"lc-theme-item-active":""}`,style:o,onClick:this.onSelected,children:[jsxRuntimeExports.jsxs("div",{className:"lc-theme-item-header",children:[jsxRuntimeExports.jsx("div",{className:"lc-theme-item-title",children:s}),c&&jsxRuntimeExports.jsx("div",{className:"lc-theme-item-operators",children:jsxRuntimeExports.jsx("div",{className:"operator-item",onClick:f=>{f.stopPropagation(),u&&u(l||"")},children:jsxRuntimeExports.jsx("img",{src:closeIcon,alt:"删除"})})})]}),jsxRuntimeExports.jsx("div",{className:"lc-theme-item-body",children:Object.keys(this.props.colors).map((f,d)=>jsxRuntimeExports.jsx(ColorPicker,{disabled:!0,value:e[f]},d))})]})}}class ThemeList extends reactExports.Component{constructor(){super(...arguments);R(this,"state",{activeId:""});R(this,"onDel",e=>{const{onDel:a}=this.props,{themeConfig:o,updateThemeConfig:s}=designerStore$1,l=o.filter(c=>c.id!==e);s(l),a&&a(e)});R(this,"onSelected",e=>{this.setState({activeId:e.id});const{onSelected:a}=this.props;a&&a(e)})}render(){const{activeId:e}=this.state,{showOperator:a}=this.props,o=designerStore$1.themeConfig,s=[];for(let l=0;l<o.length;l++)s.push(jsxRuntimeExports.jsx(ThemeItem,{id:o[l].id,selected:o[l].id===e,name:o[l].name,showOperator:a,onDel:this.onDel,onSelected:this.onSelected,colors:o[l].colors},l));return jsxRuntimeExports.jsx("div",{className:"lc-theme-list",style:{width:"100%"},children:s})}}const ThemeList$1=observer(ThemeList);class ThemeEditor extends reactExports.Component{constructor(e){super(e);R(this,"initThemeConfig",{id:"",name:"",colors:{main:"#000000",mainText:"#000000",background:"#000000",subText:"#000000",supplementFirst:"#000000",supplementSecond:"#000000"}});R(this,"state",{data:[],themeConfig:this.initThemeConfig});R(this,"nameChanged",e=>{this.setState({themeConfig:{...this.state.themeConfig,name:e}})});R(this,"mainColorChanged",e=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,main:e}}})});R(this,"mainTextChanged",e=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,mainText:e}}})});R(this,"subTextChanged",e=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,subText:e}}})});R(this,"backgroundChanged",e=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,background:e}}})});R(this,"supplementFirstChanged",e=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,supplementFirst:e}}})});R(this,"supplementSecondChanged",e=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,supplementSecond:e}}})});R(this,"doSaveOrUpd",e=>{e==null||e.preventDefault();const{data:a,themeConfig:o}=this.state;if(o.id===""){a.length>20&&alert("主题数量已达上限");for(let l=0;l<a.length;l++)if(a[l].name===o.name){alert("主题名称重复");return}o.id=this.state.data.length+1+"",a.push({...o})}else{for(let l=0;l<a.length;l++)if(a[l].id===o.id){a[l]={...o};break}o.id=""}this.setState({data:a,themeConfig:this.initThemeConfig});const{updateThemeConfig:s}=designerStore$1;s(a)});R(this,"onDel",e=>{const{data:a}=this.state,o=a.filter(s=>s.id!==e);this.setState({data:o})});R(this,"onSelected",e=>{const{themeConfig:a}=this.state;a.id===e.id?this.setState({themeConfig:this.initThemeConfig}):this.setState({themeConfig:e})});const a=designerStore$1.themeConfig;this.state.data=lodashExports.cloneDeep(a)||[]}render(){const{themeConfig:e}=this.state;return jsxRuntimeExports.jsxs("div",{className:"lc-theme-editor",children:[jsxRuntimeExports.jsx("div",{className:"editor-left",children:jsxRuntimeExports.jsxs("form",{onSubmit:this.doSaveOrUpd,children:[jsxRuntimeExports.jsx(CardPanel,{label:"主题信息",children:jsxRuntimeExports.jsx(UIContainer,{label:"名称",children:jsxRuntimeExports.jsx(Input,{value:e.name,onChange:this.nameChanged})})}),jsxRuntimeExports.jsx(CardPanel,{label:"颜色定义",children:jsxRuntimeExports.jsxs(Grid,{columns:3,gridGap:"15px",children:[jsxRuntimeExports.jsx(UIContainer,{label:"主体色",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.mainColorChanged,showText:!0,value:e.colors.main})}),jsxRuntimeExports.jsx(UIContainer,{label:"主文字",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.mainTextChanged,showText:!0,value:e.colors.mainText})}),jsxRuntimeExports.jsx(UIContainer,{label:"辅文字",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.subTextChanged,showText:!0,value:e.colors.subText})}),jsxRuntimeExports.jsx(UIContainer,{label:"背景色",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.backgroundChanged,showText:!0,value:e.colors.background})}),jsxRuntimeExports.jsx(UIContainer,{label:"补充一",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.supplementFirstChanged,showText:!0,value:e.colors.supplementFirst})}),jsxRuntimeExports.jsx(UIContainer,{label:"补充二",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.supplementSecondChanged,showText:!0,value:e.colors.supplementSecond})})]})}),jsxRuntimeExports.jsx("p",{style:{color:"#6e6e6e"},children:"说明：自定义主题色的色值应该保持在同一色系。以确保整体统一的风格。主题色占据主要面积"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("div",{className:"theme-operate-btn",children:jsxRuntimeExports.jsx(Button,{type:"submit",children:"添加 / 更新"})})]})}),jsxRuntimeExports.jsx("div",{className:"editor-right",children:jsxRuntimeExports.jsx(CardPanel,{label:"主题列表",children:jsxRuntimeExports.jsx(ThemeList$1,{showOperator:!0,onSelected:this.onSelected,onDel:this.onDel})})})]})}}class ThemeConfig extends reactExports.Component{constructor(){super(...arguments);R(this,"state",{editTheme:!1});R(this,"openThemeEditor",()=>this.setState({editTheme:!0}));R(this,"closeEditor",()=>this.setState({editTheme:!1}));R(this,"themeChange",e=>{if(!e)return;const{activeElem:{id:a}}=rightStore$1,{compController:o}=designerStore$1,s=o[a+""];s&&s.updateTheme(e)})}render(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"lc-theme-config",children:[jsxRuntimeExports.jsx("div",{className:"lc-theme-custom",children:jsxRuntimeExports.jsx(Button,{onClick:this.openThemeEditor,style:{width:"100%"},children:"+ 自定义主题"})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(ThemeList$1,{onSelected:this.themeChange})]}),jsxRuntimeExports.jsx(Dialog,{onClose:this.closeEditor,title:"编辑主题",visible:this.state.editTheme,width:860,children:jsxRuntimeExports.jsx(ThemeEditor,{})})]})}}const ThemeConfig$1=Object.freeze(Object.defineProperty({__proto__:null,default:ThemeConfig},Symbol.toStringTag,{value:"Module"})),BaseColorBlockConfig=({controller:n})=>{var u;const{background:r,borderWidth:e,borderColor:a,borderStyle:o,borderRadius:s}=(u=n.getConfig())==null?void 0:u.style,l=f=>{const{dataFragment:d}=f;n.update(d)},c={key:"style",type:"grid",config:{columns:2},children:[{key:"background",type:"color-picker",label:"背景色",value:r,config:{showText:!0}},{key:"borderWidth",type:"number-input",label:"边框宽",value:e,config:{min:0,max:10,step:1}},{key:"borderColor",type:"color-picker",label:"边框色",value:a,config:{showText:!0}},{key:"borderStyle",type:"select",label:"样式",value:o,config:{options:[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"点线",value:"dotted"},{label:"双线",value:"double"},{label:"3D凹槽",value:"groove"},{label:"3D垄状",value:"ridge"},{label:"3D内嵌",value:"inset"},{label:"3D外嵌",value:"outset"},{label:"无边框",value:"none"}]}},{key:"borderRadius",type:"number-input",label:"圆角",value:s,config:{min:0}}]};return jsxRuntimeExports.jsx(LCGUI,{schema:c,onFieldChange:l})};class BaseColorBlockDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础色块",compKey:"BaseColorBlock",categorize:"ornament"}}getChartImg(){return baseColorBlockImg}getController(){return BaseColorBlockController}getInitConfig(){return{base:{id:"",name:"基础色块",type:"BaseColorBlock"},style:{background:"#009DFF33",borderRadius:0,borderWidth:0,borderColor:"#74747400",borderStyle:"none"}}}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="theme"&&r.key!=="data"&&r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseColorBlockConfig,animation:AnimationConfig,theme:ThemeConfig}}getEventList(){return super.getEventList().concat([{id:"click",name:"点击时"}])}}const __vite_glob_0_52=Object.freeze(Object.defineProperty({__proto__:null,default:BaseColorBlockDefinition},Symbol.toStringTag,{value:"Module"}));class BaseIframeComponent extends reactExports.Component{constructor(e){super(e);R(this,"eventHandlerMap",{});R(this,"onLoad",()=>{"load"in this.eventHandlerMap&&this.eventHandlerMap.load()});this.state={...e}}render(){const{src:e}=this.state.style;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e===""?jsxRuntimeExports.jsx("div",{style:{color:"#9a9a9a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx("div",{children:"请设置iframe地址"})}):jsxRuntimeExports.jsx("div",{style:{height:"100%",display:"flex"},children:jsxRuntimeExports.jsx("iframe",{title:"lc标准iframe组件",src:e,onLoad:this.onLoad,style:{width:"100%",height:"100%",border:"none"}})})})}}class BaseIframeController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BaseIframeComponent,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(r,e){var a;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((a=this.instance)==null||a.setState(this.config))}registerEvent(){var r,e;if(this.instance){const a=(e=(r=this.config)==null?void 0:r.base)==null?void 0:e.id;this.instance.eventHandlerMap={load:()=>BPExecutor.triggerComponentEvent(a,"load",this.config)}}}}const __vite_glob_0_53=Object.freeze(Object.defineProperty({__proto__:null,BaseIframeController},Symbol.toStringTag,{value:"Module"})),baseIframeImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPwAAACeCAIAAACZ9fBhAAAHQElEQVR4Xu3b72vaeADH8ftDfBDoYMjtZMhYB9mDHsi4spWjlrPggzA492BgjvrEHpajUB8YaPZAhqVIwYKF/ptnYn4ZbZvUbov7vF9PRk1M7HwnfvM1/eUlIOaXFy9elAAlRA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RJ+BUakdWtZhrWKkl2ATEf2DjPp/09u5c6ucXloy3jQ6g9EkWGU6/Gym10DBaEf/2h7dXXPItC+C5m8vO6miK83+JFw4Nz4i+qKTjr52PC92enpw38ClctAb39ze3ox7B5XFJXu96yh2t9u2WkeO0yb6ohOO3qifzsckV91aelk2bzvjIHn3nk8KFI1u9OWP7jzYUXs7vSyjKPqlYQ+KTDb6bfvr2idpot9Mmx298XzHOhud/pV+/GHvuuFwvn7fcN5nHgVtRxep0SNLnKa/QnOQ+NnYbp6N/JHUyA4PDuPVbuvYHV2Fsz6zV3I57H1amhVdPK4M0+p/DZ4yHbudP8PVt0zrZDieL7iZjgb23svVv5ZhJuea/J1a5upVV3pru+ed+qsczyigjY3ef5vn4Qah5RFewk6679KLlq0XfaU5iMIed976iw/64SNp00Fz4WI5Ef1e04k2FJrOtl/6relE19OR634j/Qlm1I6CyaoUb6cZMw5fz/ju46r4NjD6LbNx7MYThRO39Ta9ygOiS9ivdpbh/HL05Z2GNdN2gpcxcWzv55ndqr9CHP1psCtfGH3Tmf0wvfAmfBrvTfN9wz6ZfxR43I+JWqPop1NvhUun88myj11vNil43HG+eP+OB52WZXe/xEfj5Hjh+tz8Jyz+Ztxv12tVc9fqDsOjZfRPtgFatXF6Ge5gttOzVm0D09+o6Leq9SN3Er3fV273MM9Hcyi6hF3I627L0QfuHtNH0XsmTmvn2cLrPLC70cgkYOz+Gx7Ig2a8KJ4gur0d2tvhAuOPXvL7AfdTtLXEdi6iwVSp9PrzMHh01Pk9sef4cSex1/sZlXet/kU8LhudWTvPsz65CDYk+lTul469X33sf3N4CZtlOO9bL/rh59eLy+4SdZzcWhz9pPdHYuVSNao1PeUaHw/xuC/6FSYne6mDzf/U8fTzXRoZz3asRPqT4YllbqVXKqbCR29U9tpO/Gl+2W+9yzr+XC28hE19+t9jreiTp+1Fxq+1utXq/Nfvn48mV4lB0Oro01cu0S4m/+4uLCi3gg+y+Cnllj8E8g70/YV1S/f8dpl46feCa6tbb6x53Ch++kWPPr5kvHY+r5m7JxrOj+yMJ+B7ssgQffopPuNloxefI5esjD7HLqJzdxS92UkMxO+ytJ0cDLN5Gv1Gg/wTC99X0aMv73fj88h01P+0W13nRFK2grPgfTfbpK0Tffr8PFNu9KPJlqth/6hlHe6a1cqz31dtLcMu0q/qO0c/O9cfdpxo+zdj5+OjtvMdFT16n2Eedt2r6N2ZDR8fOWmw3Z7PYDxws03K00YfDcb96caEbxl9eM/cpLdfvUsl78Xoltk4cuJZJ++UtPQ9QyFtRPRzRnXfjs8oXvs9KzUr8oBad37k5LzZ5mmjjxa5fy982JT/DofiTx99Kbo7+vH3XCQYr+r2IK7dn0bL9078WBsU/Vzqysn7H884T28chMP5nG/8N4p+YSIl+QXTN4i+9KEXNDp1W2/WyLNcX7gaWWsa7YfZuOgDhtnongfpL4e1Stk6n6+e+2abp40+Mdc4HZ34X2q1/aP42v/6KbW1DLtIv6qV0ZeSXwxPR943WaF21xmOhxm/nApfz/Ri7Wm0H2dTo5/z7mDJeO9N+PcimWfnY08bfcnY6UR/lRK5dpofVm0twy7Sr2p19N5+w3vsVljayB28e2+6jcd8JVggmx19drlutkl54uhL/o1DZ+FdX9H9YSu3tvJBX+7oPYZ52HHCW9Y808nkq9tt14s/uf6ENKLPebMNfm4S0ee92QY/N4Xoc99sg5+bQvTAAqKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHnP8B1pcLr7NqN7oAAAAASUVORK5CYII=",BaseIframeStyleConfig=({controller:n})=>{var o;const{src:r}=(o=n.getConfig())==null?void 0:o.style,e=s=>{const{dataFragment:l}=s;n.update(l)},a={key:"style",type:"grid",children:[{key:"src",type:"input",label:"地址",value:r}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:e})};class BaseIframeDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础iframe",compKey:"BaseIframe",categorize:"web"}}getChartImg(){return baseIframeImg}getController(){return BaseIframeController}getInitConfig(){return{base:{id:"",name:"基础iframe",type:"BaseIframe"},style:{src:""}}}getMenuList(){return[{icon:AppstoreFilled$1,name:"基础",key:"base"},{icon:HighlightFilled$1,name:"样式",key:"style"}]}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseIframeStyleConfig}}getEventList(){return super.getEventList().concat([{id:"load",name:"ifram加载完成时"}])}}const __vite_glob_0_54=Object.freeze(Object.defineProperty({__proto__:null,default:BaseIframeDefinition},Symbol.toStringTag,{value:"Module"}));class BaseImageComponent extends reactExports.Component{constructor(e){super(e);R(this,"eventHandlerMap",{});R(this,"onClick",()=>{"click"in this.eventHandlerMap&&this.eventHandlerMap.click()});this.state={...e}}render(){const{type:e,onLineUrl:a,localUrl:o,opacity:s}=this.state,l=e==="online"?a:o;return jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},onClick:this.onClick,children:l?jsxRuntimeExports.jsx("img",{alt:"图片组件",style:{opacity:s},width:"100%",height:"100%",src:l}):jsxRuntimeExports.jsx("div",{style:{color:"#9a9a9a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx("div",{children:"请配置图片连接或上传图片"})})})}}class BaseImageController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BaseImageComponent,e.style)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(r,e){var a,o;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((o=this.instance)==null||o.setState((a=this.config)==null?void 0:a.style))}updateTheme(r){}registerEvent(){var r,e;if(this.instance){const a=(e=(r=this.config)==null?void 0:r.base)==null?void 0:e.id;this.instance.eventHandlerMap={click:()=>BPExecutor.triggerComponentEvent(a,"click",this.config)}}}}const __vite_glob_0_55=Object.freeze(Object.defineProperty({__proto__:null,default:BaseImageController},Symbol.toStringTag,{value:"Module"}));class AbstractConvert{}class AbstractCache{constructor(){R(this,"cachePool",new Map)}addCache(r,e){this.cachePool.set(r,e)}getCache(r){return this.cachePool.get(r)||null}removeCache(r){this.cachePool.delete(r)}clearCache(){this.cachePool.clear()}isExistCache(r){return this.cachePool.has(r)}getCachePool(){return this.cachePool}}class ImageSourceCache extends AbstractCache{getAllImageCache(){return Array.from(this.getCachePool().values())||[]}}const imageSourceCache=new ImageSourceCache;class BaseImageConvert extends AbstractConvert{getKey(){return"BaseImage"}convert(r){}async convertBack(r){const{hash:e,type:a}=r.style;if(a==="local"){const o=await imageSourceCache.getCache(e);if(!o)return;r.style.localUrl=o.url}}}const __vite_glob_0_56=Object.freeze(Object.defineProperty({__proto__:null,default:BaseImageConvert},Symbol.toStringTag,{value:"Module"})),baseImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZoAAAEFCAIAAABVVLaiAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAy4SURBVHic7d29b1vnFQfgm7ZoFl4CRVogIggUTRER4Cho0JTAQ40CdjVpCJAtf1i2ABk8Gc6iRXAmDYI6tCBAeSWozKSWZOrwmteqRF5RFHk/jp9nMCSTpq9E6Kdz3o/7ftL7Yj8DaL/f1X0BANshzoAgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEIQ4A4IQZ0AQ4gwIQpwBQYgzIAhxBgQhzoAgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEIQ4A4IQZ0AQ4gwIQpwBQYgzIAhxBgTxh7ovgP/TzTtZlg0H++mDbp4v/j6v87I+SrP5PP05mf6y+OC67ouijOoMCOKT3hf7dV8D2dHhQXarKKOZZvObLMtG46vzi8u6r4UlxFmd+r29LMueP/tairVLyrXTs7faz0bRbAJBqM5qMxzsP3/2Vd1XweZm85vR+CrLMr1nQ5jZrEFKseHAL5J26+adNOiZSbRm0GwCQajOqjYc7K9Tl6XBZmud6tLNO2mtX5quKadGawhxVp3FPGbZeFkKr1evf6romlhDsba5iK370q+oyfTar58aaTaBIMxsVufk+EW2onmxjqkVUgl2dHiwap3gbH7z/Q8/VntRfKDZrMhwsF8yCuNnoBXSsozJdHpy/DJbNKG3dfNOirz0TCqm2QSC+H3+p8/qvoaPwr/++Y9PP/3j0odevf4pNZu0wq+//fbrb79Nptd//9tf7z/6lz9/1u/t/fs//63+wtBsVmTpaEsaKTNe1jqpl+z3Pr+/5ia90f3enre1eppNIAjV2c6VLJo9PXtb5ZWwXecXl6veXNVZLcTZzvV7n696yJBZq5W8fe74VAvNJhCEOKuNpUkBrNrV5GyHWmg2d67f69V9CexKyrL7C6TFWS1UZ0AQ4qw25gFguzSbMRX3tEmf9nt7Rftz5/jIyXQqWIlBdQYEoToLJRVlR4cHJWt3F0ui9ornuD0RMYizOI4OD0pul1oiBdzJ8Yu0duT07OctXxlUQrMJBKE6a71u3nn+7OtsvUM6yqX2s9/rvXr9JjP3StuIsxZLTeJ3336z9ZdNd1t99fqNRKNFNJtAEKqzFks9Zrn753WmnrS8M11MDrx0iAEtIs7a6vmzr0oiaZ21F0VmrbqbTTfvpFNBzXXSCppNIAjVWfvc2cB032h8tU49lSq4V6/fFMdH3n/O4pi1d1bY0nzirH1K1sqm0HlUbzib35xfXJa/8tHhwavXPz3mGqEGmk0gCNVZ+6xqM2fzm6fUUKPx1apJTzcjpBVUZy1TMmRW9Iybmc1vTs/eLj1cqpt3+r29p+86gJ0SZ0AQms2WKTnxbDKdPvHFS7Y0DQdfZg5sp9lUZy1TEmfb2l+56mgiI2g0nDgDgtBsRrDdIzsn02uj/rSROGuZpR3fdtvAkn4WmkyzCQShOmuZpZ3gdquzpce2p+PsuE0Z2zTiLIL0c9XNO1uZ3PzIf0qLL79Ysbz49uaLT/OP/FvUWJpNIAjVWcuMxler7nsxHOw/cZ9TyQ6qdGR6MN28k2quYguXyqvVxFnLzOY3aZnr/RG04WA/PbTZ2v3i3rNLbXctSF2KW8Wtc4dxWkezCQShOmuf0fhdtvw2Pu8P3NzsvJKSg1RaXZoVjeRmR8TTIuKsfdJW89n85v4oT3Hy5vrn/q5z6vATh+QqVnSU8utjo9kEglCdtU+quc4vLleN3BfHmI/GV6smB7p5p+TEk0Kqy5p/Fnrx5QwH+9udmpzNb9IS4tl8XnwfitNL032TSmaEqZI4a6vR+Cr93C7NozsPFT+T2WOm8ybT64a3mWuG8oOK70+R+5Pp9ToTxOZGG0WzCQShOmuxNOG4zl38u3nnUS3Y4gjOhh5G9/SiLH2BJc04bSTOWiz9TJ6evd1Kw1WYTK+bGWQbp5jw+khoNoEgVGetd/sY81S8bDa1N5vfpO61gcP/qRzbuChr4FfELoizOM4vLlMePWpPYpNTLOXyyfHL9QO6+HJG46vmry9huzSbQBCqs1CKFbbp027eSbeWvT2zWdQsqYppYAmzwS6lJteYVEacRVb8kLdIv7d3cvxizSdLMW7TbAJBqM5oivWnLxVlLCXOqFkaKXv+7Ot15mFTfkkxltJsAkGozqjTmgP/xXYu+5MoIc6oxzojZZb18yiaTSAI1Rk1ODl+8eDAf2Nv7EFjiTOqs84xK5npSzal2QSCUJ1RhXUWl5m+5InEGTvXzTvffftN+XNm85v1zwaFpTSbQBCqM3YotZblC2VTa2kSk6cTZ+xKN+88uOJ/NL46Pfu5mushPM0mEITqjO0r7vFf8hyLy9g6ccb2pbWyJeeVnJ793Lrb5NJ8mk0gCNUZW1a+HzPNYFooyy6IM7YmzWOWZNn5xaUgY3c0m0AQqjO24+jwoKQuc1IJFRBnPFVKsZL7yk6m19bKUgHNJhCE6ownKd/JZD8mVRJnPElaMbvUbH4jyKiSZhMIQnXGhtLYf8ls5unZ2wovB8QZG+n39kqmMi39pxaaTSAI1RmbKF9lpi6jFuKMxxkO9rMVQ2bp1BKzmdRFswkEoTprn3RbxG6eLz7N7zxhNp/P5vNsB4e8dfPO82dfrXrUVCb1EmdNl9q6fm+v+GD9f1vE2WQ6nUx/yRZbwTdWsmh2NL4yZEa9NJtAEKqzJurmnTTiXjKBuObrpA+Gg/3iBVMfOpleP+p2PQ/Whu6ZQe3EWYMcHR6k0Ck5NOSJunknvXi/t5f+r9H4ap1ce3DRLNROswkEoTqrXzfvpCH2Rw3zb+X/zW6VhCVl2nCwv+raLJqlOcRZbbp5J3VwTxwgyxYzmBu3qHdy7dXrN3dWeAwHX676t+6XTXNoNoEgVGe1SaXQ+lLFVCzvms3n91fJFgVaWlvbzfN+7/P1/6/0z0+OXxYnlZRsaUrP0WnSHOKs0c4vLosUW+f5RcAtPri+c4RSsWKjpDMtuuDyENRm0jSaTSAI1VkTTabXaf/jtjZdFq9zfnGZ6rXhYP/BKYiSCm40vtr6hlB4InHWIFtPsaXSiz8q1+7TadJAmk0gCNVZI6Rip+KS506ZdnL8cp2Va+nJOk0aSJzVKYXC6dnbepc7LO4i+2adCc3R+F1FlwWPpNkEglCd1WY2v/n+hx/rvooPZvOb1O3O5jerJgfs0KTJxFltnnhj2F1IXWfJuJhOkybTbAJBiDPuSts8l2pgRQkFzSZ3LZ3ZFGQ0n+oMCEJ1xgclK87SuXbQZOKMD4ya0WqaTSAI1Rkf9Hu9pX+vNKMVxBnv9Xt7q7agGzijFTSbQBDijPfSaSlLTabTKq8ENqPZ5L2l05qLU6Pc3YwWUJ0BQajOeG/ptOZsPq/+SmAz4oz3lk5rmtOkRTSbQBCqM8q3aprTpDXEGSu3as7mN+Y0aRHNJhCEOGMlnSbtotlk5c5zaBfVGRCE6ozlK84yi85oG9UZK9kSQLuIMyAIzebOpRpnVUNXu35vb9VDqrMHrXpbfetqoTqrTUmOVKnkNmfW0G5MnNVCnAFBaDZ3bvGL+m4tVlIWVWlpu6QuW5Mle42iOtu5yfSXpSseunmn39trSMvJZrp5x42VmkOcAUFoNneuZOfjcPBltrgff6MYyV7HyfGLVQ/Z7loLcbZzaRxqMr2+31emG41Npr/UeC5vY1eQNFl6K5cOFDgspkaaTSAI1VlFRuN3q0b9jw4PUm/SnF/pms0S3bxT0maOxu+qvBhuE2cVGY2v0kjZ/VDr5p2T45fpOecXlzVcHOtJ713pkNl1jeMGaDaBIFRn1UmV19Lf7Wk8/ujwIH0wGr+rbLqzIat5myy9Kc+fff3gIkHFdb0+6X2x8hQfdmE42H/+7KsHn5bG0WbzeRrG2t2w2tKlvClMG7iCpEol05f3nZ79nGWZTrNemk0gCNVZDY4OD4o/CWA0vkrVGfUydlaDYoRForWdHrNRNJtAEJrNOq0/ZUajpJmZ07O3H/lsSdOIs0ZImzeHgy/lWpOlFLPaubE0m0AQqrNmSe1nv9fr9z7Pbq1xtdi1eosVf/NUlKnImk+cAUFoNoEgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEIQ4A4IQZ0AQ4gwIQpwBQYgzIAhxBgQhzoAgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEMT/AEj3mqGP6JRpAAAAAElFTkSuQmCC",BaseImageStyleConfig=({controller:n})=>{const{style:r}=n.getConfig(),{type:e,onLineUrl:a,localUrl:o,opacity:s}=r,[,l]=reactExports.useState(0),c=f=>{const{id:d,data:g,dataFragment:v,reRender:p}=f;if(d==="localUrl"){const{hash:y,url:m}=g;n.update({style:{localUrl:m,hash:y}})}else n.update(v);p&&l(y=>y+1)},u={key:"style",type:"grid",config:{columns:2},children:[{key:"type",type:"radio",label:"来源",value:e,reRender:!0,config:{options:[{label:"本地",value:"local"},{label:"在线",value:"online"}],containerStyle:{gridColumn:"1/3"}}},{key:"onLineUrl",rules:"{type} === 'online'",type:"input",label:"链接",value:a,config:{containerStyle:{gridColumn:"1/3"}}},{id:"localUrl",key:"localUrl",rules:"{type} === 'local'",type:"image-upload",label:"上传",value:o,config:{accept:"image/*",size:3,containerStyle:{gridColumn:"1/3"}}},{key:"opacity",type:"number-input",label:"透明度",value:s,config:{min:0,max:1,step:.1}}]};return jsxRuntimeExports.jsx(LCGUI,{schema:u,onFieldChange:c})};class BaseImageDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础图片",compKey:"BaseImage",categorize:"media"}}getChartImg(){return baseImage}getController(){return BaseImageController}getInitConfig(){return{base:{id:"",name:"基础图片",type:"BaseImage"},style:{type:"online",localUrl:"",onLineUrl:"",opacity:1}}}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="theme"&&r.key!=="data"&&r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseImageStyleConfig}}getEventList(){return super.getEventList().concat([{id:"click",name:"点击时"}])}}const __vite_glob_0_57=Object.freeze(Object.defineProperty({__proto__:null,default:BaseImageDefinition},Symbol.toStringTag,{value:"Module"}));class BaseTableComponent extends reactExports.Component{constructor(e){super(e);R(this,"tableRef",null);R(this,"theadRef",null);R(this,"tbodyRef1",null);R(this,"tbodyRef2",null);R(this,"resizeObserver",null);R(this,"contentHeight",null);R(this,"eventHandlerMap",{});R(this,"onClick",()=>{"dataChange"in this.eventHandlerMap&&this.eventHandlerMap.dataChange()});R(this,"changeTableTrHeight",()=>{var a;const{pageSize:e=0}=this.state.style.body;if(e){const o=((a=this.tableRef)==null?void 0:a.getElementsByClassName("base-table-tr"))||[],s=this.contentHeight/e;for(let l=0;l<o.length;l++)o[l].style.height=`${s}px`}});this.state={...e}}componentDidMount(){this.tableRef&&(this.contentHeight=this.tableRef.clientHeight-this.theadRef.clientHeight,this.resizeObserver=new ResizeObserver(lodashExports.debounce(e=>{for(const a of e){const{height:o}=a.contentRect;this.contentHeight=o-this.theadRef.clientHeight,this.tbodyRef1&&(this.tbodyRef1.style.height=`${this.contentHeight}px`),this.tbodyRef2&&(this.tbodyRef2.style.height=`${this.contentHeight}px`)}this.changeTableTrHeight()},100)),this.resizeObserver.observe(this.tableRef),this.changeTableTrHeight())}componentWillUnmount(){this.tableRef&&(this.tableRef=null),this.theadRef&&(this.theadRef=null),this.tbodyRef1&&(this.tbodyRef1=null),this.tbodyRef2&&(this.tbodyRef2=null),this.resizeObserver&&this.resizeObserver.disconnect()}render(){const{columns:e,data:a,header:o,body:s}=this.state.style,{enableCarousel:l,carouselSpeed:c=3,pageSize:u,...f}=s,d=l?`scroll ${c}s linear infinite`:"none";return u&&this.changeTableTrHeight(),jsxRuntimeExports.jsx("div",{className:"base-table",ref:g=>this.tableRef=g,children:jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{style:{...o},ref:g=>this.theadRef=g,children:jsxRuntimeExports.jsx("tr",{children:e&&e.map((g,v)=>jsxRuntimeExports.jsx("th",{style:{width:g.width,fontWeight:o==null?void 0:o.fontWeight,textAlign:g.textAlign},children:g.label},v))})}),jsxRuntimeExports.jsx("tbody",{style:{...f,animation:d},className:"scroll-body",ref:g=>this.tbodyRef1=g,children:a&&a.map((g,v)=>jsxRuntimeExports.jsx("tr",{className:"base-table-tr",children:e&&e.map((p,y)=>jsxRuntimeExports.jsx("td",{style:{textAlign:p.textAlign},children:g[p.key]},y))},v))}),jsxRuntimeExports.jsx("tbody",{style:{...f,animation:d},className:"scroll-body",ref:g=>this.tbodyRef2=g,children:a&&a.map((g,v)=>jsxRuntimeExports.jsx("tr",{className:"base-table-tr",children:e&&e.map((p,y)=>jsxRuntimeExports.jsx("td",{style:{textAlign:p.textAlign},children:g[p.key]},y))},v))})]})})}}class BaseTableController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BaseTableComponent,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}changeData(r){var a,o;const e=ObjectUtil.merge((a=this.config)==null?void 0:a.style,{data:r});(o=this.instance)==null||o.setState(e)}update(r,e){var a;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((a=this.instance)==null||a.setState(this.config))}}const __vite_glob_0_58=Object.freeze(Object.defineProperty({__proto__:null,BaseTableController},Symbol.toStringTag,{value:"Module"})),baseTableImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAABZCAIAAACIZuD2AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAi1SURBVHic7Z1bUFP5Hcd/hhPMyeWQeIAkco1glPtFUEFwNax4ic5sdHULebBTnc507E6nXV+6sy/t6OPah9pxH9idMg5k2B1Fq1Anu6Zd2PVYZdEoBD3LAhIxCRgJIXCAnGb7gBdqO3U4YXLyn/4/b2EOv/lOPjn/c/vN76xKqXh7wvxbiA+kk4/DmnSxU7xCOuUNJ+nETvGc1L/8ngAAWLVK7CRLiKswEF95JGIHwCwDbAslsC2UwLZQghD6j9oLh1WHvhj9YLveoFfdaOtrBQBKf+FoJgxOegBg0v/Lm/6Vy/kGDh4qP8mHehcWP3Gdf41U1yWp5b4WZtq8t1B2vffkk5hlgcZdufDlpL46qTpDcqhtEABOHCjdp4xA4kInMzUXUuQVDJ78UkhlgbZMNfoyndRlVXp0inJCcuhXldXME82GlMnbD47fDJ+wbNxH+oRVFkKm8RiMVV/2Nb5XWN7WdxIAko0frE30zskM2SllQX+gNreqbZCJTZjcLFOyJt+qlKmlagI6GooHBu6BEm7cHoOqNEMWbfDNDQutLdCWI7DAuCYhW8N9/e2dnMLetj5Hvrb6MqvZW+TZNN/ytz6za0FopGWjIyaGZcbrDVoyVSFrKO6Ym/rYOd35KKIH8pCB61xQ5N2fM5UD0xuTNFmr9cHJC7xEdmWqfK9qcd/aRywcK5Jd+N5/R6U5FkVtoSuhDHTpdOCJH9YXl6cqqhvy62Yl2TvX5fNc77NIXkm+qyyY3zIURbDlMAsyybzjH2NQlWG4PXYRgNNr9Clyk4yYjATyQrzhLcpzLkZZ4DrbsisXJiJWc1peakJHQ/4NZtSrSjSkJplTEz1DfDS1hZ5lsJ6ByGqDkj9lu+fwTp+1uY5d7qtjp28wd822e2abZ4CP6fnLRcZ959/+ICmTTP3paQIsEHq1bG5w+HQs0wDA3UGzbeyOd9Jsc50eCXVw/MB9V0eAh0f+zqfCqwo9bm1KCXzNlK/J7WgoliVK8hryDYzrNA/69cazaQBA6GFOeKhl4vVOdgIAgLpISw76OwFgNpGhVGXKfwaesSd8xlPJ4ZiFAQDgI+W7i61rQJYo6WgoDrg5SJvtDRQf40MfyRUf79S4hB5CV6VUvD2x/8MVDSsc6TN3eE2G2CleIQ14wmq92Cmek3r5d/h6CyWwLZTAtlAC20IJAgDIke/EjvGcyGpF/IQBgEiinAzE8J7Vm1iVnh5Hz2ox/xu8EqIEtoUS2BZKYFsogW2hBLaFEtgWSmBbKCHw+Ra92bJ/Ax0e7Ye1ZKutq6Cm9KkzaKzKJl9uMTvCfMNOr1DK5UCQSuBCPKGkaXLWP8FF9bA2KgyWX+ynQkFKTQUDQUoZvHquXXBHxiICbfmdX117tGOPiQwTugM/Pz5/ramfk/LOqVflIkEuumSCMB742TvruS/O2NKtP4FrwxusgaZm8e5kkTIphECaKAUAqYx84/ZvROhKuG1vHX2r60GSLpmaHx2CjVVGkqDXl7zEqCHE+FGzVz7r8QIAuDzzG+qywkNR/phXgvDCij25FrhvkVNh+aYjlT9c9XoLQaMYsNndQJAPnVMv7PMzYuxaL8muywy0N31b3bhNC1di2Cu3FJXU3d9HQiaVNOLxzXt8vtmoSwrct7jv2pvsj8MyAEI1Nk69855RpkyilhQjFEmk4M7S6PF7IGt3/a40mIhdB+rrTLPddscYDSOXrtjt9u/pgoKoSwq9B280Ha1JZi89TN4lv3WJ4XMKUn5ck5mxdGnmRphuUU4z4oU1pqPvJg/ZL3YHSy3mAjrEtrUzUX4f+IkJSuDrLZTAtlAC20IJbAslsC2UwLZQAttCCWwLJbAtlMC2UALbQglsCyWwLZTAtlAC20IJbAslhD6NJ0iapgjI2LwZbt1yQyTol1RYD5dSr7Z47Djb3r8iGZcVK4WWc35/XHSoAQCozMcPDDS1rtCclwSKot681X8ikcrp3J3m7QZdVq56ZtTtDSq25IU/dUhyw3/nEsKfOiTl6X33Y91xpC0qTQ6l7j5ouC/fbKEnNLsPJPU4PTEO8QKj6ei+7TUb0ySUoaCisrKkSD3rHI6uTUTgSkhutRwuI/s7r153XO14CKX1lioKAIAK8+K1rQD4nD0u/+wMx2UaCB8zfI0NGw2ihWEdzZeeeR80f3K+uWsm+PDPzQ422pJCe56+af2kvbv/sQfSK6rSgl3nW7uDINVativd/TPTVNnxKnFmB9O11iNyx8WexU8E8HPRt4VFkWZbtm6eJFNMdYnuFZngJnAlVBlrd2zamJNTtDVPOTr+49qctQlzSTqivfnCKD/D9jC9IUORJvYrYY31XaVnSq1L+OHZ2h3V2YU6vrubDcY4xCu4wd4+ct+Jo0ZuqG94aIKLRFswmp6nisaP9uv6m88sdndnW47Xzoy+6LRU5CR7z7XGaCRgfFJkeX+L9G7XFYblIKXiYD3FtDjc0ZXEHWooga+3UALbQglsCyWwLZTAtlAC20IJbAslsC2UwLZQAttCCWwLJbAtlMC2UALbQglsCyWwLZTAtlBCaD+hylj72ny78fSDWzJgtVQ6Hw4DALiZ89E3+SyXJf2Eai0Nfl9AxHbCuJl4B9Nst50FMP3m13DmDw4AAGCbWTA1NA7bWkUbXKYtKKC90q1W4rMubiP4dXuO3G3+fESsNCs/8U74O1lL6ku0kEmpoL6egAmnfaLk/Z9WZyjksznreInc+9WHTTeij7dMfM4eH1FSxElhuOcm0HsqOVEnuS0i/sQ7AP+Q0+mF1YVF4HQ6Yd4PAfsfT3GNDb5WGwvrGhuzVyrhsqBrrbt5++cMEEazdcNwi1jT7gDiaeIdAD/t8/l8MxCZ8fl8zw8P2mR+PFZv9vyv1Fgq+aeqsipj/kFTmmc+3VQi4ovp4mfi3WsnGQDc+DikpuKJd0vAE+/+z8HXWyiBbaEEtoUS2BZKYFsogW2hBLaFEtgWSvwLmSM+VkgCs7QAAAAASUVORK5CYII=",BaseTableStyleConfig=({controller:n})=>{var c;const{columns:r,header:e,body:a}=((c=n.getConfig())==null?void 0:c.style)||{},[,o]=React.useState(0),s={key:"style",children:[{key:"header",type:"accordion",label:"表头",children:[{type:"grid",config:{columns:2},children:[{key:"height",type:"number-input",label:"高度",value:e==null?void 0:e.height,config:{min:0}},{key:"background",type:"color-picker",label:"背景",value:e==null?void 0:e.background,config:{showText:!0}},{key:"color",type:"color-picker",label:"字色",value:e==null?void 0:e.color,config:{showText:!0}},{key:"fontSize",type:"number-input",label:"字号",value:e==null?void 0:e.fontSize,config:{min:0}},{key:"fontWeight",type:"number-input",label:"加粗",value:e==null?void 0:e.fontWeight,config:{min:0,max:900,step:100}}]}]},{key:"body",type:"accordion",label:"表体",children:[{type:"grid",config:{columns:2},children:[{key:"background",type:"color-picker",label:"背景",value:a==null?void 0:a.background,config:{showText:!0}},{key:"color",type:"color-picker",label:"字色",value:a==null?void 0:a.color,config:{showText:!0}},{key:"fontSize",type:"number-input",label:"字号",value:a==null?void 0:a.fontSize,config:{min:0}},{key:"fontWeight",type:"number-input",label:"加粗",value:a==null?void 0:a.fontWeight,config:{min:0,max:900,step:100}},{type:"switch",label:"轮播",key:"enableCarousel",reRender:!0,value:a==null?void 0:a.enableCarousel},{rules:"{enableCarousel}==='true'",type:"number-input",label:"速度",key:"carouselSpeed",value:a==null?void 0:a.carouselSpeed,config:{min:0,max:100,step:.1}},{type:"number-input",label:"页行数",key:"pageSize",value:a==null?void 0:a.pageSize,config:{min:0,max:100}}]}]},{key:"columns",type:"control-group",label:"表格列",value:r,config:{itemName:"列",template:{type:"grid",config:{columns:2},children:[{key:"key",type:"input",label:"列字段名",value:"newColumn"},{key:"width",type:"number-input",label:"列宽",config:{min:0}},{key:"label",type:"input",label:"列显示名",value:"新建字段"},{key:"textAlign",type:"select",label:"对齐",value:"center",config:{options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}]}}]}}}]},l=u=>{const{dataFragment:f,reRender:d}=u;n.update(f),d&&o(g=>g+1)};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:l})},defaultData={sourceType:"static",staticData:[],apiData:{url:"",method:"get",header:{},params:{},frequency:5}},DataConfig=n=>{var p,y,m,x,A,_,b,S,C,E,T,w,L;const{controller:r}=n,e=ObjectUtil.merge(lodashExports.cloneDeep(defaultData),(p=r.getConfig())==null?void 0:p.data),a=reactExports.useRef(e),o=reactExports.useRef(""),[s,l]=reactExports.useState(0),c=()=>{var M,O,P,N,G,Y;if(!((M=a.current.apiData)!=null&&M.url))return(O=globalMessage.messageApi)==null||O.error("接口地址不能为空"),!1;if(!((P=a.current.apiData)!=null&&P.method))return(N=globalMessage.messageApi)==null||N.error("请求方式不能为空"),!1;if(typeof a.current.apiData.header=="string"){const F=ObjectUtil.stringToJsObj(a.current.apiData.header);if(F)a.current.apiData.header=F;else return(G=globalMessage.messageApi)==null||G.error("请求头不符合json格式"),!1}if(typeof a.current.apiData.params=="string"){const F=ObjectUtil.stringToJsObj(a.current.apiData.params);if(F)a.current.apiData.params=F;else return(Y=globalMessage.messageApi)==null||Y.error("请求参数不符合json格式"),!1}return!0},u=()=>{if(!c())return;let{params:M,header:O,url:P,method:N}=a.current.apiData;HttpUtil.sendHttpRequest(P,N,O,M).then(G=>{o.current=JSON.stringify(G,null,2)}).catch(()=>{o.current=JSON.stringify({msg:"请求错误"},null,2)}).finally(()=>l(s+1))},f=()=>{if(!c())return;r.update({data:a.current},{reRender:!1});const M=ObjectUtil.stringToJsObj(o.current);M&&r.changeData(M)},d=()=>{var M;if(typeof a.current.staticData=="string"){const O=ObjectUtil.stringToJsObj(a.current.staticData);O?(r.update({data:{staticData:O}},{reRender:!1}),r.changeData(O)):(M=globalMessage.messageApi)==null||M.error("格式错误，请检查")}},g=M=>{const{reRender:O,id:P,dataFragment:N}=M;if(P==="doTest")u();else if(P==="doStaticSave")d();else if(P==="doSave")f();else{if(P==="apiTestRes")return;a.current=ObjectUtil.merge(a.current,N)}O&&l(s+1)},v={type:"grid",config:{gridGap:"10px"},children:[{key:"sourceType",label:"数据源",type:"select",reRender:!0,value:((y=a.current)==null?void 0:y.sourceType)||"static",config:{options:[{value:"static",label:"静态数据"},{value:"api",label:"接口(API)"}]}},{rules:"{sourceType} === 'static'",children:[{id:"staticData",key:"staticData",type:"code-editor",config:{height:500},value:JSON.stringify((m=a.current)==null?void 0:m.staticData,null,2)||""},{id:"doStaticSave",type:"button",config:{children:"保存并刷新数据",style:{width:"100%"}}}]},{key:"apiData",rules:"{sourceType} === 'api'",children:[{key:"url",type:"input",label:"接口地址",value:((A=(x=a.current)==null?void 0:x.apiData)==null?void 0:A.url)||""},{key:"method",label:"请求方式",type:"select",value:(b=(_=a.current)==null?void 0:_.apiData)==null?void 0:b.method,config:{options:[{value:"get",label:"GET"},{value:"post",label:"POST"}]}},{key:"frequency",label:"刷新频率",type:"number-input",config:{prefix:"每",suffix:"秒",min:5},value:((C=(S=a.current)==null?void 0:S.apiData)==null?void 0:C.frequency)||5},{type:"card-panel",label:"请求头",tip:"请求头信息，json格式",children:[{id:"header",key:"header",type:"code-editor",config:{height:100},value:JSON.stringify((T=(E=a.current)==null?void 0:E.apiData)==null?void 0:T.header,null,2)||""}]},{type:"card-panel",tip:"请求参数，json格式",label:"请求参数",children:[{id:"params",key:"params",type:"code-editor",config:{height:100},value:JSON.stringify((L=(w=a.current)==null?void 0:w.apiData)==null?void 0:L.params,null,2)||""}]},{type:"card-panel",label:"响应结果",children:[{id:"apiTestRes",type:"code-editor",config:{readonly:!0,height:160},reRender:!0,value:o.current}]},{type:"grid",config:{columns:2},children:[{id:"doTest",type:"button",config:{children:"测试接口",style:{width:"100%"}}},{id:"doSave",type:"button",config:{children:"保存",style:{width:"100%"}}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:v,onFieldChange:g})},DataConfig$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataConfig},Symbol.toStringTag,{value:"Module"}));class BaseTableDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础表格",compKey:"LcBaseTable",categorize:"web"}}getChartImg(){return baseTableImg}getController(){return BaseTableController}getInitConfig(){const r=[{name:"张三",age:18,sex:"男"},{name:"李四",age:20,sex:"女"},{name:"王五",age:22,sex:"男"}];return{base:{id:"",name:"基础表格",type:"LcBaseTable"},style:{columns:[{key:"name",label:"姓名",width:void 0,textAlign:"center"},{key:"age",label:"年龄",width:void 0,textAlign:"center"},{key:"sex",label:"性别",width:void 0,textAlign:"center"}],data:r,header:{height:40,background:"#0080be",color:"#fff",fontSize:14,fontWeight:900},body:{background:"#141414",color:"#acacac",fontSize:14,fontWeight:500,enableCarousel:!1,carouselSpeed:3}},data:{sourceType:"static",staticData:r}}}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="theme"&&r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseTableStyleConfig,animation:AnimationConfig,data:DataConfig}}getEventList(){const r=super.getEventList();return r.push({id:"dataChange",name:"数据变更时"}),r}}const __vite_glob_0_59=Object.freeze(Object.defineProperty({__proto__:null,default:BaseTableDefinition},Symbol.toStringTag,{value:"Module"}));class BaseTextComponent extends reactExports.Component{constructor(e){super(e);R(this,"eventHandlerMap",{});R(this,"onClick",()=>{"click"in this.eventHandlerMap&&this.eventHandlerMap.click()});this.state={...e,edit:!1}}render(){const{style:e,data:a,edit:o}=this.state;return jsxRuntimeExports.jsx("div",{onDoubleClick:()=>this.setState({edit:!0}),className:"base-text-component",style:{...e},onKeyDown:s=>s.stopPropagation(),onClick:this.onClick,children:o?jsxRuntimeExports.jsx("input",{ref:s=>s==null?void 0:s.select(),onChange:s=>a.staticData.data=s.target.value,onBlur:()=>this.setState({edit:!1}),autoFocus:!0,type:"text",defaultValue:a==null?void 0:a.staticData}):a==null?void 0:a.staticData})}}class URLUtil{static parseUrlParams(){const r=new URLSearchParams(window.location.hash.split("?")[1]),e={};for(const[a,o]of r)e[a]=o;return e}}class BaseTextController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BaseTextComponent,e);const{mode:a}=URLUtil.parseUrlParams();a===DesignerMode.EDIT&&(this.container.style.pointerEvents="auto")}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(r,e){var a;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((a=this.instance)==null||a.setState(this.config))}updateTheme(r){}registerEvent(){var r,e;if(this.instance){const a=(e=(r=this.config)==null?void 0:r.base)==null?void 0:e.id;this.instance.eventHandlerMap={click:()=>BPExecutor.triggerComponentEvent(a,"click",this.config)}}}}const __vite_glob_0_60=Object.freeze(Object.defineProperty({__proto__:null,BaseTextController},Symbol.toStringTag,{value:"Module"})),baseTextImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARAAAACqCAIAAADqToflAAAGs0lEQVR4Xu3bXWsTWQCHcT9ILwYsLGVpVoJYIb2IEMSgZTHFCkGCYEQCWjoiUQISMBeZixTJRUoJQgpT6NfceZ/JvP9bd9mL50cv2sx0OoV5es6ZSe89fvz4LwD13HOC2QFQD8EAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBARTV+fDbPbD+Rh10lscnZG7aTb7kLexTPPki/SNxl6z0xt8GuefRqXwPL+cNNObUAvB1NWf33isfnqLo2/5G+fbG+/vNTMafxiJPVrmZd43FupNbf8n2dPj5HFqCs/z0mylN6EWgqnQOlv715hkfeZdkOH1ub2p2341cHQfuodPBrPXPnE3PC/769/7HhTjfIteDMHcFcFU+BeC6fuReEPVVjDBz/I+b74eezPAzMfPTXSkRXbrj9n4tdfb8XTza5P5CGO7sTOb3I/pceI3Rx6Cqes2UzJPMCaszXbwQhBJeTC3C/WmtNVKub8bkgimrjCYUjnBdCfekLD51g1f+U+CyRth7OvEftc5gwwjTCWCqSsMZrPMzIJmP5bBPCkbzNOxt8mevoxeqhVMLDhC3sLDiO4B3Cze7qU2ph1+WgX7+pajR+ldUIlg6gqDWU3chXnKJLgW08HEV7Qd/BWf9sJINj+d0qyVv/3X0gnPuvC+SB+kM/7lH2Mzeba1zt97u/A3OD32yu8AGG3zItg3dmG2y78LGQRT122mZI9Gy/QezrgSjipF0sHsHHwMx4bzYSN+OT7O5mv5U5lGfx4t9z227X9tz/uJA6IawdSlL/obfSu8TNeTo+bQ28cNZnSeWFf4OyRXFN97iYN49gbRUDJ7FUy9Gu/C124Ww/3t/bcY7bOgt/VnM7qt3P8crJFWZwwzAoIpd6ubTS4njGgq5S8//EOleqv74DK+B3Bl9fd3jCdmtCAJVvn5jPZoGTTpTsASz2ESk7TVWYdmaiKYcncJJjGVSgbTGi3ckWQxcq/z7WCCW1vTzBDjLUKiidzFYnkVfV6yDjE64djiRGE+MdIPLveH0SC1/n7SKDwOYgRTz/3W0PJvVtmWO+0P3wPmvSmr0Z/52zbn5lFydnQ4Mi1vFZMM5tD0Bou1ebiTDia4nnNnfVujSsjPII9xEJ7wTXjOO+lgnDM/nsZ3ry8nJw8KjoYQwVQxdtuD2Tp4gmEvRm3vHWFHE/9Ccxcnrva7cL1yvbY+HsV/rf1L9HcE45xK99vWw5nV54LRZTc8Pc/6W+8geCObv46KT9s98/fRSss5+cWgbDkEgim3P4ivpqvgzlIhe72OZkq2FVx5vycYr9q8e2vOmNZ7mK0mXuivToN34hSa9xtv/N8yGohQiGAqtE7dK8+ba/WmiYfiYTyJu1vno9b+kXnuToRWp+FC3G/AXlnBw001GKP5fDjzn89Erjab5DN792HqZPi8ud1Noz9fL94dGPXuYjdejGenBeMVEgimUrPzNLseDq/C7NP3HaPxtBO/3zh91yAOZvIiMbWzhu706H0cjPGwO/y6CB5rJqxng9Z9Z+gLytxyvVnOx6NnqTc7G7sPwulX3pSs+Wfml0MxgqlU9Rc6K1lR4QhTwgsmu8S/nA3au4mr22j8bS5S1Xg3nYulF/1QEUyl3xGM+4r/346jTr1gkusQ+8L69DI144oYrdemFZxh/FizAMHcFcH8n6Sewxjt4VfzpFVQyjZ3CvemW7Ur/6J8VwQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEPwDp7rmXPlnA2sAAAAASUVORK5CYII=",BaseTextStyleConfig=({controller:n})=>{const{data:r,style:e}=n.getConfig(),a=s=>{const{dataFragment:l}=s;n.update(l)},o={type:"grid",config:{columns:2},children:[{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:e==null?void 0:e.fontSize,config:{min:1}},{key:"fontWeight",type:"number-input",label:"加粗",value:(e==null?void 0:e.fontWeight)||400,config:{min:100,max:900,step:100}},{key:"color",type:"color-picker",label:"颜色",value:"#1c1c1c",config:{showText:!0}},{key:"fontFamily",type:"select",label:"字体",value:"",config:{options:[{label:"钉钉进步体",value:"DingTalk JinBuTi"},{label:"抖音美好体",value:"DouyinSansBold"},{label:"优设标题黑",value:"优设标题黑"},{label:"庞门正道标题",value:"庞门正道标题体免费版"}]}}]},{key:"data",children:[{key:"staticData",children:[{key:"data",type:"text-area",label:"内容",value:r==null?void 0:r.staticData,config:{containerStyle:{gridColumn:"1 / 3"}}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:o,onFieldChange:a})};class BaseTextDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础文本",compKey:"BaseText",categorize:"info",width:64,height:26}}getChartImg(){return baseTextImg}getController(){return BaseTextController}getInitConfig(){return{base:{id:"",name:"基础文本",type:"BaseText"},style:{color:"#a7a7a7",fontSize:16,alignItems:"center",justifyContent:"center"},data:{sourceType:"static",staticData:"基础文本"}}}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="theme"&&r.key!=="mapping"&&r.key!=="data")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseTextStyleConfig,animation:AnimationConfig,theme:ThemeConfig}}getEventList(){return super.getEventList().concat([{id:"click",name:"点击时"}])}}const __vite_glob_0_61=Object.freeze(Object.defineProperty({__proto__:null,default:BaseTextDefinition},Symbol.toStringTag,{value:"Module"})),BaseVideoComponent=reactExports.forwardRef((n,r)=>{var s,l,c,u;const[e,a]=reactExports.useState({...n}),o=reactExports.useRef({});return reactExports.useImperativeHandle(r,()=>({updateConfig:f=>a({...f}),setEventHandler:f=>o.current=f})),console.log("config",e),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:(s=e==null?void 0:e.style)!=null&&s.src?jsxRuntimeExports.jsxs("video",{width:"100%",height:"100%",controls:!0,autoPlay:!0,children:[jsxRuntimeExports.jsx("source",{src:(l=e==null?void 0:e.style)==null?void 0:l.src,type:"video/mp4"}),jsxRuntimeExports.jsx("source",{src:(c=e==null?void 0:e.style)==null?void 0:c.src,type:"video/webm"}),jsxRuntimeExports.jsx("source",{src:(u=e==null?void 0:e.style)==null?void 0:u.src,type:"video/ogg"}),"您的浏览器不支持 video 标签。"]}):jsxRuntimeExports.jsx("div",{style:{color:"#9a9a9a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx("div",{children:"请配置视频连接..."})})})});class BaseVideoController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,BaseVideoComponent,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(r,e){var a;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((a=this.instance)==null||a.updateConfig(this.config))}updateTheme(r){}registerEvent(){var r,e;if(this.instance){const a=(e=(r=this.config)==null?void 0:r.base)==null?void 0:e.id;this.instance.setEventHandler({click:()=>BPExecutor.triggerComponentEvent(a,"click",this.config)})}}}const __vite_glob_0_62=Object.freeze(Object.defineProperty({__proto__:null,default:BaseVideoController},Symbol.toStringTag,{value:"Module"})),baseVideo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAT0AAADFCAIAAACpT7IKAAAJ2ElEQVR4Xu3dMW8TaRCA4fshVrqIJpYosUWDUliO0yAUiyJVJDqQOySiSFCiKBKgCAuU8F9vzjPmnGHXrJ3EuzPf+xRXHLt449k3/r44If/0AETzj/8fADqPboF46BaIh26BeOgWiIdugXjoFoiHboF46BaIh26BeOgWiIdugXjoFoiHboF46BaIh26BeOgWiIdugXjoFoiHbmv1+/3hcDgajSbYOXnaB4OBjMBPBQt0e8fe3t54PJ7NZvP5/BYdIIOQcchQZDR+WgWj2/9Np9Pr62t/46AbZDQyID+zUtHtfw4PDy8vL/2dgu6RMcmw/PzKQ7e9k5MTf3eg22RkfoqFKb3bs7Mzf1MgAhmcn2VJiu6WV9rQSn7VLbdb2Sb5GwHRFLvXLbfbhl+Ims/nV6368eOHv6alm5ubL1+++BMe37dv3/ylrPj+/bs/YXMN34eTIfq5lqHQbqfTqb8F7jo/P59MJvv7+/7M3To9PfVXtuLVq1f+hMf35MmTNd1+/vz5od5olSdfRiCD8I9xV5lvDpXYrdxYa96nlRexo6Mjf04bnj175i9uxfv37/0JO/Hu3Tt/KStevHjhT7g3GYcMxT/SkozyoT5TBFJit+Px2A9/Se6PwWDgT2jJx48f/fUt/fz58+nTp/6ExycJ+UtZ8ebNG3/CA5GhrElXBupPyK7EbmezmZ/8UkdeaXtlr5ArrfmUIQP1R2dXYrd1X/OQrZQ/tCWskCvV7XVloP7Q7Irrtt/v+7EvTSYTf3RLWCFXkgH5B14q7SeHiutWdkp+5kutf/VYsUKuIwPyj700HA790akV1+1oNPIzX+jIWosV8np1exwZqz80teK6rVtrXV1d+UPbwAp5PRmTv4KF7uxxdoNuTRe6ZYX8V3Sr6Na03i0r5CboVtGtab1bVshN0K2iW9Nut6yQG6JbRbemxW5ZITdHt4puTYvdskJujm4V3Zq2umWFvBG6VXRrWumWFfKm6FbRrWmlW1bIm6JbRbdm992yQt4C3Sq6NTvulhXyduhW0a3ZcbeskLdDt4puzS67ZYW8NbpVdGt21i0r5PugW0W3ZmfdskK+D7pVdGt20y0r5HuiW0W3ZgfdskK+P7pVdGt20C0r5PujW0W35rG7ZYX8IOhW0a35+vXr80fz8uVL/3grPn365E/YiQ8fPvhLWfH69Wt/QgfImPyFLtBtcnXdtmXNr89Ac3SbXNe6xYOg2+ToNiW6Ta473XZkhdyRy7gnuk2u9W5zdNI1dJtc693++vXL/69uCP0JhW6Ta73bzursJ5Qm6DY5uk2JbpOr6/axv18KD4Lvl1J0a+g2BLpVdGvoNgS6VXRr6DYEulV0a+g2BLpVdGvoNgS6VXRr6DYEulV0a+g2BLpVdGvoNgS6VXRr6DYEulV0a+g2BLpVdGvoNgS6VXRr6DYEulV0a+g2BLpVdGvoNgS6VXRr6DYEulV0a+g2BLpVdGvoNgS6VXRr6DYEulV0a+g2BLpVdGvoNgS6VXRrAnV7enoqVyv/9X9QALpVdGtCdPv8+fPVG7fAeulW0a3peLcHBwcXFxf+ohfkyqVnf0JSdKvo1nS52+PjY3+5f3j79q207c9Mh24V3ZoudytN+sutUsKymW4V3ZoE3arc9dKtoluTpluVddNLt4puTbJuVb5NL90qujUpu71Nt2ymW0W3Jmu3Kk29dKvo1kTstu4mrpNg01v3IdNtcpm61e2rvJD6P6inL7xxN710q+jWBO1WD5AO627oSnGXzXUfJt0ml7Lb3iLdjV54bxcf8vHx8crjBEC3im5N9G7VFvVeXFwEWjbTraJbk6NbteaHECoFWjbTraJbk6lbJWvguru8Uoh66z4iuk2unG57Wy2br7r9XhHdKro1KbtVW9Sr7zD5v6gD6FbRrUncrcqx6aVbRbcmfbcq+qa37uLpNrnCu+1ttWzuzqaXbhXdmnK6VVvU24VNL90qujWldavCbXrpVtGtKbPb3vKFt66HSi3WW3eddJsc3VbadNnc1tNFt4puTVs3YhM76FZJvXWP5bT1dNGtolvT1o3YRF1LD96tOmjwU4FtPV11F0a3ydFtE39Nt62nq+6q6DY5uv0r91uIKrX1dNVdGN0mR7drNH9bqK2ni24V3Zq2bsQmdtAtX0+OhW5NWzdiE4/d7UbF3i6eq7a+7ZFuFd2aMrttvjD+ra3vuFB0q+jWlNZt87dqf7vPwz0UulV0a4rqNtDC2KFbRbemkG4lP/+3rHXV3rciV6JbRbcmfbfhtrKV6FbRrUnc7abv8dx2+B9VpltFtyZrt5sW252tbCW6VXRr8nXb5NsVV3VtK1up7iOi2+RK6DbHVrYS3Sq6NTm6zbSVrUS3im5Ngm43LbbjW9lKdKvo1oTuNuVWtlLdh0m3ySXrNvFWthLdKro1Ebutu4nryPGBtrKV6j5kuk0uU7fNXQX81fKV6FbRrUncbeiFsUO3im5Nym7/fKMoOrpVdGuSdXsV8D2eJuhW0a1J0+1V2Pd4mqBbRbcmR7eJi1V0q+jWdLnb4+Njf7l/iPXtilujW0W3psvd9tb+c1BZt7KV6FbRrel4t+rg7q//yL2VrUS3im5NiG57Kz/xU1qxim4V3Zoo3RaObhXdGroNgW4V3Rq6DYFuFd0aug2BbhXdGroNgW4V3Rq6DYFuFd0aug2BbhXdGroNgW4V3Rq6DYFuFd0aug2BbhXdGroNgW4V3Rq6DYFuFd0aug2BbhXdGroNgW4V3Rq6DYFuFd0aug2BbhXdGroNgW5Vcd2ORiM/84X5fO4PRffImPzkFmSs/tDUiut2OBz6mS/t7+/7o9ElMiA/s6XBYOCPTq24bvv9vp/5UmlrrXDq9jhCxuqPTq24bnv1a63z83N/KLpEBuRntlDgHqfEbmezmZ/80tHRkT8a3SCj8dNakoH6o7MrsdvxeOwnv3Rzc1PaTikEGYqMxk9rSQbqT8iuxG739vaur6/98Jfk/uBVt1NkHGuilVHKQP052ZXYrZhOp37+d8lWajKZ8BXmFsmTLyOo29P+JqP0Zxag0G7F5eWlvwWqzOfzK+xc3dcOHRmin2sZyu328PDQ3wWIRobo51qGcrsVJycn/kZAHDI+P9FiFN2tODs787cDIpDB+VmWpPRue7zqBlTyK62i2//INqnhl6nQLhlTsXvaVXT7v+l0uuZ9XbRLRlPmWz6V6PaOvb298Xg8m80avg+BxyaDkHHIUAr85oo16LZWv98fDAaj0WiCnZOnfTgclvZTPs3RLRAP3QLx0C0QD90C8dAtEA/dAvHQLRAP3QLx0C0QD90C8dAtEA/dAvHQLRAP3QLx0C0QD90C8dAtEA/dAvHQLRDPvxiRu31YyvmoAAAAAElFTkSuQmCC",BaseVideoStyleConfig=({controller:n})=>{var o;const r=(o=n.getConfig())==null?void 0:o.style,e=s=>{const{dataFragment:l}=s;n.update(l)},a={type:"grid",key:"style",children:[{type:"input",label:"视频地址",key:"src",value:r==null?void 0:r.src}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:e})};class BaseVideoDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"视频",compKey:"BaseVideo",categorize:"media"}}getChartImg(){return baseVideo}getController(){return BaseVideoController}getInitConfig(){return{base:{id:"",name:"视频",type:"BaseVideo"},style:{src:void 0}}}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="theme"&&r.key!=="data"&&r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseVideoStyleConfig}}getEventList(){return super.getEventList().concat([{id:"click",name:"点击时"}])}}const __vite_glob_0_63=Object.freeze(Object.defineProperty({__proto__:null,default:BaseVideoDefinition},Symbol.toStringTag,{value:"Module"}));var t=function(){return t=Object.assign||function(n){for(var r,e=1,a=arguments.length;e<a;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n},t.apply(this,arguments)},i=function(){function n(r,e,a){var o=this;this.endVal=e,this.options=a,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(s){o.startTime||(o.startTime=s);var l=s-o.startTime;o.remaining=o.duration-l,o.useEasing?o.countDown?o.frameVal=o.startVal-o.easingFn(l,0,o.startVal-o.endVal,o.duration):o.frameVal=o.easingFn(l,o.startVal,o.endVal-o.startVal,o.duration):o.frameVal=o.startVal+(o.endVal-o.startVal)*(l/o.duration);var c=o.countDown?o.frameVal<o.endVal:o.frameVal>o.endVal;o.frameVal=c?o.endVal:o.frameVal,o.frameVal=Number(o.frameVal.toFixed(o.options.decimalPlaces)),o.printValue(o.frameVal),l<o.duration?o.rAF=requestAnimationFrame(o.count):o.finalEndVal!==null?o.update(o.finalEndVal):o.options.onCompleteCallback&&o.options.onCompleteCallback()},this.formatNumber=function(s){var l,c,u,f,d=s<0?"-":"";l=Math.abs(s).toFixed(o.options.decimalPlaces);var g=(l+="").split(".");if(c=g[0],u=g.length>1?o.options.decimal+g[1]:"",o.options.useGrouping){f="";for(var v=3,p=0,y=0,m=c.length;y<m;++y)o.options.useIndianSeparators&&y===4&&(v=2,p=1),y!==0&&p%v==0&&(f=o.options.separator+f),p++,f=c[m-y-1]+f;c=f}return o.options.numerals&&o.options.numerals.length&&(c=c.replace(/[0-9]/g,function(x){return o.options.numerals[+x]}),u=u.replace(/[0-9]/g,function(x){return o.options.numerals[+x]})),d+o.options.prefix+c+u+o.options.suffix},this.easeOutExpo=function(s,l,c,u){return c*(1-Math.pow(2,-10*s/u))*1024/1023+l},this.options=t(t({},this.defaults),a),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(e),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof r=="string"?document.getElementById(r):r,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,r):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return o.handleScroll(o)}),window.onscroll=function(){window.onScrollFns.forEach(function(s){return s()})},this.handleScroll(this)))}return n.prototype.handleScroll=function(r){if(r&&window&&!r.once){var e=window.innerHeight+window.scrollY,a=r.el.getBoundingClientRect(),o=a.top+window.pageYOffset,s=a.top+a.height+window.pageYOffset;s<e&&s>window.scrollY&&r.paused?(r.paused=!1,setTimeout(function(){return r.start()},r.options.scrollSpyDelay),r.options.scrollSpyOnce&&(r.once=!0)):(window.scrollY>s||o>e)&&!r.paused&&r.reset()}},n.prototype.determineDirectionAndSmartEasing=function(){var r=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>r;var e=r-this.startVal;if(Math.abs(e)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=r;var a=this.countDown?1:-1;this.endVal=r+a*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=r,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},n.prototype.start=function(r){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),r&&(this.options.onCompleteCallback=r),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},n.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},n.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},n.prototype.update=function(r){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(r),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},n.prototype.printValue=function(r){var e;if(this.el){var a=this.formattingFn(r);!((e=this.options.plugin)===null||e===void 0)&&e.render?this.options.plugin.render(this.el,a):this.el.tagName==="INPUT"?this.el.value=a:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=a:this.el.innerHTML=a}},n.prototype.ensureNumber=function(r){return typeof r=="number"&&!isNaN(r)},n.prototype.validateValue=function(r){var e=Number(r);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: ".concat(r),null)},n.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},n}(),__assign=function(){return(__assign=Object.assign||function(n){for(var r,e=1,a=arguments.length;e<a;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n}).apply(this,arguments)},rAF=window.requestAnimationFrame||function(n){window.setTimeout(n,1e3/60)},Odometer=function(){function n(r){this.version="1.0",this.defaults={duration:.8,lastDigitDelay:.25},this.cell_digits=null,this.options=__assign(__assign({},this.defaults),r),this.cell_digits=null}return n.prototype.render=function(r,e){for(var a,o=this.options,s=!1,l=(this.cell_digits||(s=!0,document.querySelector("style[odometer]")||((a=document.createElement("style")).setAttribute("odometer","odometer"),a.innerHTML=".odometer-numbers{display:inline-flex;line-height:100%;overflow-y:hidden}.odometer-numbers>span{display:flex;flex-direction:column;justify-content:start;align-items:center;height:1em;will-change:transform;transform:translateY(0)}",document.head.appendChild(a)),r.innerHTML='<div class="odometer-numbers"></div>',this.cell_digits=[]),'<span style="color:transparent">0</span>'),c="transform ".concat(o.duration,"s ease-out"),u=this.cell_digits.length;u<e.length;u++){var f=document.createElement("span");f.style.transition=c,f.innerHTML=s?"":l,r.firstChild&&r.firstChild.appendChild(f),this.cell_digits.push({container:f,current:void 0,position:s?1:0,new:!0})}function d(x,A){x.position--,x.container.appendChild(A),x.lastTimeAdd=+new Date,x.new?(x.new=!1,rAF(function(){x.container.style.transform="translateY(".concat(x.position,"em)")})):x.container.style.transform="translateY(".concat(x.position,"em)")}function g(){v=u<e.length?e.charAt(u):null;var x,A,_,b,S=m.cell_digits[u];S.current!=v&&(S.current=v,(p=document.createElement("span")).innerHTML=v===null?l:v,S.container.children.length<4?d(S,p):(A=p,(x=S).nextToAdd&&(d(x,x.nextToAdd),clearTimeout(x.lastTimer),x.nextToAdd=null),_=+new Date,b=1e3*o.lastDigitDelay-(_-x.lastTimeAdd),o.lastDigitDelay<=0||_-x.lastTimeAdd>=1.05*b?(d(x,A),x.nextToAdd=null):(x.nextToAdd=A,x.lastTimer=setTimeout(function(){d(x,x.nextToAdd),x.nextToAdd=null},1e3*o.duration))),clearTimeout(S.timerClean),S.timerClean=setTimeout(function(){S.timerClean=null,S.container.children.length<3||(S.container.style.transition="none",rAF(function(){for(S.position=-1;1<S.container.children.length;)S.container.removeChild(S.container.firstChild);var C=document.createElement("span");C.innerHTML=l,S.container.insertBefore(C,S.container.firstChild),S.container.style.transform="translateY(".concat(S.position,"em)"),rAF(function(){S.container.style.transition=c})}))},1e3*((o.duration||.8)+(o.duration||.25))+2500))}for(var v,p,y=Math.max(e.length,this.cell_digits.length),m=this,u=0;u<y;u++)g()},n}();const DigitalFlipperComponent=React.forwardRef((n,r)=>{const[e,a]=reactExports.useState({...n}),o=reactExports.useRef({}),s=reactExports.useRef(null);let l;reactExports.useEffect(()=>{var f,d;l=new i(s.current,(f=e.data)==null?void 0:f.staticData,{plugin:((d=e.style)==null?void 0:d.type)==="slide"?new Odometer({duration:1,lastDigitDelay:0}):void 0,duration:1}),l.error?console.error(l.error):l.start()},[]),reactExports.useImperativeHandle(r,()=>({updateConfig:f=>a({...f}),changeData:f=>l.update(f),setEventHandler:f=>o.current=f}));const c=()=>{"click"in o.current&&o.current.click()},{style:u}=e;return jsxRuntimeExports.jsx("div",{ref:s,style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",...u},onClick:c})});class DigitalFlipperController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,DigitalFlipperComponent,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}changeData(r){var e;this.config.data.staticData=r,(e=this.instance)==null||e.changeData(r)}update(r,e){var a;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((a=this.instance)==null||a.updateConfig(this.config))}updateTheme(r){}registerEvent(){var e,a,o;const r=(a=(e=this.config)==null?void 0:e.base)==null?void 0:a.id;(o=this.instance)==null||o.setEventHandler({click:()=>BPExecutor.triggerComponentEvent(r,"click",this.config)})}}const __vite_glob_0_64=Object.freeze(Object.defineProperty({__proto__:null,DigitalFlipperController},Symbol.toStringTag,{value:"Module"})),digitalFlipperImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAABeCAIAAABdDzqYAAAGWElEQVR4Xu2Y20uVWRTA+0OOmdLFW2pFF6MysybpBtmp9CHtbmXRQw9dICMqu5CFFUUEURZlQZC+iCIV2c1yEmsI7EJpZUWOXayjVCPzm2/j7vPLbBiYc3Sxfk/HdfbZ57R/a629vvr5FKH08wYUKahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasahasYRM7fz582/fvl1WVmYjCxYsqK+v//z5c3t7+4MHD+bOnUswNjb2ypUrnz59Ivj27dtt27b179//+y4/Yffu3a9fv/b7/ebPs2fP/tlJQ0NDVFSUiU+ZMuXOnTtszpc+e/YsJibm+xYuoqOjHz58aHcw5Obm8tbixYvZMBAIfPz48eLFi2bnAQMGHD16tKWlpa2trba2dsaMGd4dg0Jo1GKL0+SAysvLbXDPnj1bt27lXMaMGXP37t1Hjx4NHjwYtZs2bRo4cCDxkydPcoJxcXGunbphxIgRz58/JxUyMzNNpLq6urS09DeHyZMnh4eHExw5cmRjY+OlS5d4weZz5syJiIjoslEnJNOkSZPMx2Hv3r388tGjRw8fPvzVq1fkzZAhQ0gjvnHNmjVsfvjw4Q8fPmRkZPDj/3CIjIz0bvr/Exq1BQUFiYmJV69edat1s2XLlnfv3g0dOtQdXLRoEXWQkJDgDnpAUmVl5c2bN9+/f2/V3rt3j+PuuvCfymYNP8MT7xnygH5AFvJ64sSJra2tycnJPqeyyacjR47worm5mSw06ylZ1mRnZ7s3CQ6hUQtkdw9qi4uLOSnbOW2Qtkkpu4MeqBuOcu3atVYtsh8/frxr166pU6e6V16/fp0fQBFv3749KyvL/VYP7Ny5s6mpCX+8HjRo0I0bN6h7/ly6dOmXL1+mT5/Ob6a1HDx40KynXsnRDRs2dNklKPRGtbRlxGzcuNH8uXDhQsqOHoih2bNnd13bhdTUVEqKD9I2rVr689OnT0mUVoeioiLTeLkj79+/zyWKHuKY9mTSj9BgmQZoAGFhYSbCV3CzfP369du3b1VVVaQdmcT9zU+lpvFaWFjIu9wpXTYKCr1LLR341KlTpDlFZoNcrrS1vLw8LuCXL1+OGjXKnqwbzh1JFRUVmHOrdbNv3z5qa9myZVyfXLQvXrwwN3dOTk5HR8e8efM86z2sX7+eUS4pKcn8iTwK9Pz58/Hx8UuWLOF+pcmjlmuYyv7LgTZDf7ZpGkx6kdphw4Y9efKEwZIjcy38ztixYzlK7mmOz/uez3fhwgUK6HeHuro6FFLr5lK08BWU9YkTJ9iBQz937pyJM7gxBPUsgHziCid1bIROjjY71lGg9AaahM9Jx1QHk2QM//ZTQaMXqT1z5gzt0RxNt6CWYzKV4X3PeZLJ7ITyosfu2LEjJSXFvcbUGfclO/DcxSMW9yVxllFhjGnuxR4odE/95efn83vsWHfs2DHUkj12AdnApUvn98yDwaEXqaWMbt26ldfJ5s2bzXhy+vRpGuaKFSuQ8ebNm/Hjx9uGfOjQIXcZWdwNOS0t7fjx4+ywatUqrkOqlimXHZhambcPHDjAW4xCtFA7LSOeul+5cqV7z+XLl9MVZs2aZSM8EdGES0pKeLplPuDd/fv381nmtfT0dEp29erVBPmHuLYJHqFUy7VKptvI5cuXzVOggXaKg5kzZ9bU1DQ4MOngya7nEOm92LURy4QJE8gSo4GKrK2tNTuQTGSGXYY8xiLi165dc3cLxGB63LhxNuJzhjsyw/OwNG3aNIYmdmBu4smH52+CVDajE5d3IBBYt26de30wCZnafw8VFuHgmZ4YRynBX84+PqeXdruDz8kP4p7/4eI6pxn8uLhbzM/z3BExMTE0amM6VPQBtT+D06Rd//KJ5T/g9/tp6d5oX6MPq1V6RtWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWKRdWK5W/9sJBzPMhZ0gAAAABJRU5ErkJggg==",DigitalFlipperConfig=({controller:n})=>{var o,s,l,c;const r=n.getConfig(),e=u=>{const{dataFragment:f}=u;n.update(f)},a={type:"grid",key:"style",config:{columns:2},children:[{key:"fontSize",type:"number-input",label:"字号",value:(o=r==null?void 0:r.style)==null?void 0:o.fontSize,config:{min:0}},{key:"fontWeight",type:"number-input",label:"粗细",value:(s=r==null?void 0:r.style)==null?void 0:s.fontWeight,config:{min:0,max:900,step:100}},{key:"color",type:"color-picker",label:"颜色",value:(l=r==null?void 0:r.style)==null?void 0:l.color,config:{showText:!0}},{key:"type",type:"select",label:"类型",tip:"该设置项效果请刷新预览界面查看",value:(c=r==null?void 0:r.style)==null?void 0:c.type,config:{options:[{label:"滑动",value:"slide"},{label:"跳动",value:"caper"}]}},{key:"fontFamily",type:"select",label:"字体",value:"",config:{options:[{label:"钉钉进步体",value:"DingTalk JinBuTi"},{label:"抖音美好体",value:"DouyinSansBold"},{label:"优设标题黑",value:"优设标题黑"},{label:"庞门正道标题",value:"庞门正道标题体免费版"}]}}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:e})};class DigitalFlipperDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"数字翻牌器",compKey:"DigitalFlipper",categorize:"info",width:200,height:50}}getChartImg(){return digitalFlipperImg}getController(){return DigitalFlipperController}getInitConfig(){return{base:{id:"",name:"数字翻牌器",type:"DigitalFlipper"},style:{fontSize:20,fontWeight:500,fontFamily:"Microsoft YaHei",color:"#ffffff",type:"caper"},data:{staticData:123456789}}}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="theme"&&r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:DigitalFlipperConfig,data:DataConfig,theme:ThemeConfig}}getEventList(){return super.getEventList().concat([{id:"click",name:"点击时"}])}}const __vite_glob_0_65=Object.freeze(Object.defineProperty({__proto__:null,default:DigitalFlipperDefinition},Symbol.toStringTag,{value:"Module"})),FourAngleGlowBorder=reactExports.forwardRef((n,r)=>{const[e]=reactExports.useState({...n}),a=reactExports.useRef(null),o=reactExports.useRef({}),s=l=>{var c,u,f,d;(c=a.current)==null||c.style.setProperty("--fagb-length",`${l==null?void 0:l.length}px`),(u=a.current)==null||u.style.setProperty("--fagb-color",l.color),(f=a.current)==null||f.style.setProperty("--fagb-radius",`${l==null?void 0:l.radius}px`),(d=a.current)==null||d.style.setProperty("--fagb-width",`${l==null?void 0:l.width}px`)};return reactExports.useImperativeHandle(r,()=>({updateConfig:l=>s({...l}),setEventHandler:l=>o.current=l})),reactExports.useEffect(()=>{s(e.style)}),jsxRuntimeExports.jsxs("div",{className:"four-angle-glow",ref:a,children:[jsxRuntimeExports.jsx("span",{className:"angle angle-tl"}),jsxRuntimeExports.jsx("span",{className:"angle angle-tr"}),jsxRuntimeExports.jsx("span",{className:"angle angle-bl"}),jsxRuntimeExports.jsx("span",{className:"angle angle-br"})]})});class FourAngleGlowBorderController extends AbstractDesignerController{async create(r,e){this.config=e,this.container=r,this.instance=await ComponentUtil.createAndRender(r,FourAngleGlowBorder,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(r,e){var a;this.config=ObjectUtil.merge(this.config,r),e=e||{reRender:!0},e.reRender&&((a=this.instance)==null||a.updateConfig(this.config.style))}updateTheme(r){}registerEvent(){var e,a,o;const r=(a=(e=this.config)==null?void 0:e.base)==null?void 0:a.id;(o=this.instance)==null||o.setEventHandler({click:()=>BPExecutor.triggerComponentEvent(r,"click",this.config)})}}const __vite_glob_0_66=Object.freeze(Object.defineProperty({__proto__:null,FourAngleGlowBorderController},Symbol.toStringTag,{value:"Module"})),fourAngleGlowBorderImg="/light-chaser-app/assets/four-angle-glow-border-FLITQCMP.png",FourAngleGlowBorderConfig=({controller:n})=>{var o;const r=(o=n.getConfig())==null?void 0:o.style,e=s=>{const{dataFragment:l}=s;n.update(l)},a={key:"style",type:"grid",config:{columns:2},children:[{key:"width",type:"number-input",label:"宽度",value:r==null?void 0:r.width,config:{min:0,max:10}},{key:"length",type:"number-input",label:"长度",value:r==null?void 0:r.length,config:{min:0,max:100}},{key:"radius",type:"number-input",label:"圆角",value:r==null?void 0:r.radius,config:{min:0,max:100}},{key:"color",type:"color-picker",label:"颜色",value:r==null?void 0:r.color,config:{showText:!0}}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:e})};class FourAngleGlowBorderDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"四角辉光边框",compKey:"FourAngleGlowBorder",categorize:"ornament"}}getChartImg(){return fourAngleGlowBorderImg}getController(){return FourAngleGlowBorderController}getInitConfig(){return{base:{id:"",name:"基础色块",type:"BaseColorBlock"},style:{color:"#34e4ff",width:2,radius:4,length:10}}}getMenuList(){return getDefaultMenuList().filter(r=>r.key!=="theme"&&r.key!=="data"&&r.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:FourAngleGlowBorderConfig}}getEventList(){return super.getEventList().concat([{id:"click",name:"点击时"}])}}const __vite_glob_0_67=Object.freeze(Object.defineProperty({__proto__:null,default:FourAngleGlowBorderDefinition},Symbol.toStringTag,{value:"Module"}));class AbstractLoader{}const componentCategorize=[{key:"all",name:"所有",icon:AppstoreOutlined$1},{key:"chart",name:"图表",icon:PieChartOutlined$1},{key:"info",name:"信息",icon:FontSizeOutlined$1},{key:"map",name:"地图",icon:EnvironmentOutlined$1},{key:"ornament",name:"装饰",icon:FormatPainterOutlined$1},{key:"model",name:"模型",icon:DeploymentUnitOutlined$1},{key:"media",name:"媒体",icon:VideoCameraOutlined$1},{key:"web",name:"web元素",icon:CodeSandboxOutlined$1},{key:"other",name:"其他",icon:GoldOutlined$1}],componentSubCategorize=[{key:"all",name:"所有"},{key:"bar",name:"条形图",parentKey:"chart"},{key:"column",name:"柱状图",parentKey:"chart"},{key:"line",name:"折线图",parentKey:"chart"},{key:"pie",name:"饼图",parentKey:"chart"},{key:"scatter",name:"散点图",parentKey:"chart"},{key:"wordCloud",name:"词云图",parentKey:"chart"},{key:"area",name:"面积图",parentKey:"chart"},{key:"radar",name:"雷达图",parentKey:"chart"},{key:"funnel",name:"漏斗图",parentKey:"chart"},{key:"progress",name:"进度图",parentKey:"chart"},{key:"rose",name:"玫瑰图",parentKey:"chart"}];class AbstractDesignerLoader extends AbstractLoader{constructor(){super(...arguments);R(this,"definitionMap",{});R(this,"headerItemInstances",[]);R(this,"convertMap",{})}load(){this.scanComponents(),this.initProject()}scannerCustomComponents(){const e=Object.assign({"../../comps/antd-common/AntdBaseDesignerController.ts":__vite_glob_0_0,"../../comps/antd-common/AntdCommonDefinition.ts":__vite_glob_0_1,"../../comps/antd-common/AntdCommonUtil.ts":__vite_glob_0_2,"../../comps/antd-common/area/AbstractAreaDefinition.ts":__vite_glob_0_3,"../../comps/antd-common/area/AntdCommonAreaController.ts":__vite_glob_0_4,"../../comps/antd-common/bar/AbstractBarDefinition.ts":__vite_glob_0_5,"../../comps/antd-common/bar/AntdCommonBarController.ts":__vite_glob_0_6,"../../comps/antd-common/column/AbstractColumnDefinition.ts":__vite_glob_0_7,"../../comps/antd-common/column/AntdCommonColumnController.ts":__vite_glob_0_8,"../../comps/antd-common/line/AbstractLineDefinition.ts":__vite_glob_0_9,"../../comps/antd-common/line/AntdCommonLineController.ts":__vite_glob_0_10,"../../comps/antd-common/rose/AbstractRoseDefinition.ts":__vite_glob_0_11,"../../comps/antd-common/rose/AntdCommonRoseController.ts":__vite_glob_0_12,"../../comps/antd-common/scatter/AbstractScatterDefinition.ts":__vite_glob_0_13,"../../comps/antd-common/scatter/AntdCommonScatterController.ts":__vite_glob_0_14,"../../comps/antd-common/types.ts":__vite_glob_0_15,"../../comps/antd/area-base/AntdBaseAreaDefinition.ts":__vite_glob_0_16,"../../comps/antd/area-percent/AntdPercentAreaDefinition.ts":__vite_glob_0_17,"../../comps/antd/area-stack/AntdStackAreaDefinition.ts":__vite_glob_0_18,"../../comps/antd/bar-base/AntdBaseBarDefinition.ts":__vite_glob_0_19,"../../comps/antd/bar-group/AntdGroupBarDefinition.ts":__vite_glob_0_20,"../../comps/antd/bar-percent/AntdPercentBarDefinition.ts":__vite_glob_0_21,"../../comps/antd/bar-range/AntdRangeBarDefinition.ts":__vite_glob_0_22,"../../comps/antd/bar-stack/AntdStackBarDefinition.ts":__vite_glob_0_23,"../../comps/antd/column-base/AntdBaseColumnDefinition.ts":__vite_glob_0_24,"../../comps/antd/column-group/AntdGroupColumnDefinition.ts":__vite_glob_0_25,"../../comps/antd/column-percent/AntdPercentColumnDefinition.ts":__vite_glob_0_26,"../../comps/antd/column-range/AntdRangeColumnDefinition.ts":__vite_glob_0_27,"../../comps/antd/column-stack/AntdStackColumnDefinition.ts":__vite_glob_0_28,"../../comps/antd/gauge/AntdGaugeController.ts":__vite_glob_0_29,"../../comps/antd/gauge/AntdGaugeDefinition.ts":__vite_glob_0_30,"../../comps/antd/line-base/AntdBaseLineDefinition.ts":__vite_glob_0_31,"../../comps/antd/line-multi/AntdMultiLineDefinition.ts":__vite_glob_0_32,"../../comps/antd/line-step/AntdStepLineDefinition.ts":__vite_glob_0_33,"../../comps/antd/liquid/AntdLiquidController.ts":__vite_glob_0_34,"../../comps/antd/liquid/AntdLiquidDefinition.ts":__vite_glob_0_35,"../../comps/antd/pie/AntdPieController.ts":__vite_glob_0_36,"../../comps/antd/pie/AntdPieDefinition.ts":__vite_glob_0_37,"../../comps/antd/radar/AntdRadarController.ts":__vite_glob_0_38,"../../comps/antd/radar/AntdRadarDefinition.ts":__vite_glob_0_39,"../../comps/antd/ring-progress/AntdRingProgressController.ts":__vite_glob_0_40,"../../comps/antd/ring-progress/AntdRingProgressDefinition.ts":__vite_glob_0_41,"../../comps/antd/rose-base/AntdBaseRoseDefinition.ts":__vite_glob_0_42,"../../comps/antd/rose-group/AntdGroupRoseDefinition.ts":__vite_glob_0_43,"../../comps/antd/rose-stack/AntdStackRoseDefinition.ts":__vite_glob_0_44,"../../comps/antd/scatter-bubble/AntdScatterBubbleDefinition.ts":__vite_glob_0_45,"../../comps/antd/scatter-point/AntdScatterPointDefinition.ts":__vite_glob_0_46,"../../comps/common-component/base-info/BaseInfoStore.ts":__vite_glob_0_47,"../../comps/common-component/common-types.ts":__vite_glob_0_48,"../../comps/group-layer/GroupLayerController.ts":__vite_glob_0_49,"../../comps/group-layer/GroupLayerDefinition.ts":__vite_glob_0_50,"../../comps/lc/base-color-block/BaseColorBlockController.ts":__vite_glob_0_51,"../../comps/lc/base-color-block/BaseColorBlockDefinition.ts":__vite_glob_0_52,"../../comps/lc/base-iframe/BaseIframeController.ts":__vite_glob_0_53,"../../comps/lc/base-iframe/BaseIframeDefinition.ts":__vite_glob_0_54,"../../comps/lc/base-image/BaseImageController.ts":__vite_glob_0_55,"../../comps/lc/base-image/BaseImageConvert.ts":__vite_glob_0_56,"../../comps/lc/base-image/BaseImageDefinition.ts":__vite_glob_0_57,"../../comps/lc/base-table/BaseTableController.ts":__vite_glob_0_58,"../../comps/lc/base-table/BaseTableDefinition.ts":__vite_glob_0_59,"../../comps/lc/base-text/BaseTextController.ts":__vite_glob_0_60,"../../comps/lc/base-text/BaseTextDefinition.ts":__vite_glob_0_61,"../../comps/lc/base-video/BaseVideoController.ts":__vite_glob_0_62,"../../comps/lc/base-video/BaseVideoDefinition.ts":__vite_glob_0_63,"../../comps/lc/digital-flipper/DigitalFlipperController.ts":__vite_glob_0_64,"../../comps/lc/digital-flipper/DigitalFlipperDefinition.ts":__vite_glob_0_65,"../../comps/lc/four-angle-glow-border/FourAngleGlowBorderController.ts":__vite_glob_0_66,"../../comps/lc/four-angle-glow-border/FourAngleGlowBorderDefinition.ts":__vite_glob_0_67});Object.keys(e).forEach(a=>{var s;const o=(s=e[a])==null?void 0:s.default;if(o&&AbstractDefinition.isPrototypeOf(o)){const l=new o;if(typeof l.getBaseInfo=="function"){const c=l.getBaseInfo().compKey;c&&(this.definitionMap[c]=l)}if(typeof l.getCategorize=="function"){const c=l.getCategorize();if(c)if(c.icon)componentCategorize.push(c);else{console.error("自定义组件的分类必须指定icon");return}}if(typeof l.getSubCategorize=="function"){const c=l.getSubCategorize();if(c)if(c.parentKey)componentCategorize.push(c);else{console.error("自定义组件的子类型必须指定parentKey");return}}}else if(o&&AbstractConvert.isPrototypeOf(o)){const l=new o,c=l.getKey();this.convertMap[c]=l}})}}class BPLeftStore{constructor(){R(this,"activeMenu","layer");R(this,"usedLayerNodes",{});R(this,"setActiveMenu",r=>{this.activeMenu=r});R(this,"setUsedLayerNodes",(r,e)=>{this.usedLayerNodes[r]=e});R(this,"initUsedLayerNodes",r=>{this.usedLayerNodes=r});makeObservable(this,{activeMenu:observable,setActiveMenu:action,usedLayerNodes:observable,setUsedLayerNodes:action})}}const bpLeftStore=new BPLeftStore;function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage$1={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(n,r){(function(e){n.exports=e()})(function(){return function e(a,o,s){function l(f,d){if(!o[f]){if(!a[f]){var g=typeof commonjsRequire=="function"&&commonjsRequire;if(!d&&g)return g(f,!0);if(c)return c(f,!0);var v=new Error("Cannot find module '"+f+"'");throw v.code="MODULE_NOT_FOUND",v}var p=o[f]={exports:{}};a[f][0].call(p.exports,function(y){var m=a[f][1][y];return l(m||y)},p,p.exports,e,a,o,s)}return o[f].exports}for(var c=typeof commonjsRequire=="function"&&commonjsRequire,u=0;u<s.length;u++)l(s[u]);return l}({1:[function(e,a,o){(function(s){var l=s.MutationObserver||s.WebKitMutationObserver,c;if(l){var u=0,f=new l(y),d=s.document.createTextNode("");f.observe(d,{characterData:!0}),c=function(){d.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var g=new s.MessageChannel;g.port1.onmessage=y,c=function(){g.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?c=function(){var x=s.document.createElement("script");x.onreadystatechange=function(){y(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:c=function(){setTimeout(y,0)};var v,p=[];function y(){v=!0;for(var x,A,_=p.length;_;){for(A=p,p=[],x=-1;++x<_;)A[x]();_=p.length}v=!1}a.exports=m;function m(x){p.push(x)===1&&!v&&c()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,a,o){var s=e(1);function l(){}var c={},u=["REJECTED"],f=["FULFILLED"],d=["PENDING"];a.exports=g;function g(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,C!==l&&m(this,C)}g.prototype.catch=function(C){return this.then(null,C)},g.prototype.then=function(C,E){if(typeof C!="function"&&this.state===f||typeof E!="function"&&this.state===u)return this;var T=new this.constructor(l);if(this.state!==d){var w=this.state===f?C:E;p(T,w,this.outcome)}else this.queue.push(new v(T,C,E));return T};function v(C,E,T){this.promise=C,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(C){c.resolve(this.promise,C)},v.prototype.otherCallFulfilled=function(C){p(this.promise,this.onFulfilled,C)},v.prototype.callRejected=function(C){c.reject(this.promise,C)},v.prototype.otherCallRejected=function(C){p(this.promise,this.onRejected,C)};function p(C,E,T){s(function(){var w;try{w=E(T)}catch(L){return c.reject(C,L)}w===C?c.reject(C,new TypeError("Cannot resolve promise with itself")):c.resolve(C,w)})}c.resolve=function(C,E){var T=x(y,E);if(T.status==="error")return c.reject(C,T.value);var w=T.value;if(w)m(C,w);else{C.state=f,C.outcome=E;for(var L=-1,M=C.queue.length;++L<M;)C.queue[L].callFulfilled(E)}return C},c.reject=function(C,E){C.state=u,C.outcome=E;for(var T=-1,w=C.queue.length;++T<w;)C.queue[T].callRejected(E);return C};function y(C){var E=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof E=="function")return function(){E.apply(C,arguments)}}function m(C,E){var T=!1;function w(P){T||(T=!0,c.reject(C,P))}function L(P){T||(T=!0,c.resolve(C,P))}function M(){E(L,w)}var O=x(M);O.status==="error"&&w(O.value)}function x(C,E){var T={};try{T.value=C(E),T.status="success"}catch(w){T.status="error",T.value=w}return T}g.resolve=A;function A(C){return C instanceof this?C:c.resolve(new this(l),C)}g.reject=_;function _(C){var E=new this(l);return c.reject(E,C)}g.all=b;function b(C){var E=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=C.length,w=!1;if(!T)return this.resolve([]);for(var L=new Array(T),M=0,O=-1,P=new this(l);++O<T;)N(C[O],O);return P;function N(G,Y){E.resolve(G).then(F,function(z){w||(w=!0,c.reject(P,z))});function F(z){L[Y]=z,++M===T&&!w&&(w=!0,c.resolve(P,L))}}}g.race=S;function S(C){var E=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=C.length,w=!1;if(!T)return this.resolve([]);for(var L=-1,M=new this(l);++L<T;)O(C[L]);return M;function O(P){E.resolve(P).then(function(N){w||(w=!0,c.resolve(M,N))},function(N){w||(w=!0,c.reject(M,N))})}}},{1:1}],3:[function(e,a,o){(function(s){typeof s.Promise!="function"&&(s.Promise=e(2))}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,a,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I};function l(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=c();function f(){try{if(!u||!u.open)return!1;var I=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),D=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!I||D)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(I,D){I=I||[],D=D||{};try{return new Blob(I,D)}catch(k){if(k.name!=="TypeError")throw k;for(var $=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,B=new $,V=0;V<I.length;V+=1)B.append(I[V]);return B.getBlob(D.type)}}typeof Promise>"u"&&e(3);var g=Promise;function v(I,D){D&&I.then(function($){D(null,$)},function($){D($)})}function p(I,D,$){typeof D=="function"&&I.then(D),typeof $=="function"&&I.catch($)}function y(I){return typeof I!="string"&&(console.warn(I+" used as a key, but it is not a string."),I=String(I)),I}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",A=void 0,_={},b=Object.prototype.toString,S="readonly",C="readwrite";function E(I){for(var D=I.length,$=new ArrayBuffer(D),B=new Uint8Array($),V=0;V<D;V++)B[V]=I.charCodeAt(V);return $}function T(I){return new g(function(D){var $=I.transaction(x,C),B=d([""]);$.objectStore(x).put(B,"key"),$.onabort=function(V){V.preventDefault(),V.stopPropagation(),D(!1)},$.oncomplete=function(){var V=navigator.userAgent.match(/Chrome\/(\d+)/),k=navigator.userAgent.match(/Edge\//);D(k||!V||parseInt(V[1],10)>=43)}}).catch(function(){return!1})}function w(I){return typeof A=="boolean"?g.resolve(A):T(I).then(function(D){return A=D,A})}function L(I){var D=_[I.name],$={};$.promise=new g(function(B,V){$.resolve=B,$.reject=V}),D.deferredOperations.push($),D.dbReady?D.dbReady=D.dbReady.then(function(){return $.promise}):D.dbReady=$.promise}function M(I){var D=_[I.name],$=D.deferredOperations.pop();if($)return $.resolve(),$.promise}function O(I,D){var $=_[I.name],B=$.deferredOperations.pop();if(B)return B.reject(D),B.promise}function P(I,D){return new g(function($,B){if(_[I.name]=_[I.name]||tt(),I.db)if(D)L(I),I.db.close();else return $(I.db);var V=[I.name];D&&V.push(I.version);var k=u.open.apply(u,V);D&&(k.onupgradeneeded=function(H){var K=k.result;try{K.createObjectStore(I.storeName),H.oldVersion<=1&&K.createObjectStore(x)}catch(q){if(q.name==="ConstraintError")console.warn('The database "'+I.name+'" has been upgraded from version '+H.oldVersion+" to version "+H.newVersion+', but the storage "'+I.storeName+'" already exists.');else throw q}}),k.onerror=function(H){H.preventDefault(),B(k.error)},k.onsuccess=function(){var H=k.result;H.onversionchange=function(K){K.target.close()},$(H),M(I)}})}function N(I){return P(I,!1)}function G(I){return P(I,!0)}function Y(I,D){if(!I.db)return!0;var $=!I.db.objectStoreNames.contains(I.storeName),B=I.version<I.db.version,V=I.version>I.db.version;if(B&&(I.version!==D&&console.warn('The database "'+I.name+`" can't be downgraded from version `+I.db.version+" to version "+I.version+"."),I.version=I.db.version),V||$){if($){var k=I.db.version+1;k>I.version&&(I.version=k)}return!0}return!1}function F(I){return new g(function(D,$){var B=new FileReader;B.onerror=$,B.onloadend=function(V){var k=btoa(V.target.result||"");D({__local_forage_encoded_blob:!0,data:k,type:I.type})},B.readAsBinaryString(I)})}function z(I){var D=E(atob(I.data));return d([D],{type:I.type})}function W(I){return I&&I.__local_forage_encoded_blob}function j(I){var D=this,$=D._initReady().then(function(){var B=_[D._dbInfo.name];if(B&&B.dbReady)return B.dbReady});return p($,I,I),$}function U(I){L(I);for(var D=_[I.name],$=D.forages,B=0;B<$.length;B++){var V=$[B];V._dbInfo.db&&(V._dbInfo.db.close(),V._dbInfo.db=null)}return I.db=null,N(I).then(function(k){return I.db=k,Y(I)?G(I):k}).then(function(k){I.db=D.db=k;for(var H=0;H<$.length;H++)$[H]._dbInfo.db=k}).catch(function(k){throw O(I,k),k})}function X(I,D,$,B){B===void 0&&(B=1);try{var V=I.db.transaction(I.storeName,D);$(null,V)}catch(k){if(B>0&&(!I.db||k.name==="InvalidStateError"||k.name==="NotFoundError"))return g.resolve().then(function(){if(!I.db||k.name==="NotFoundError"&&!I.db.objectStoreNames.contains(I.storeName)&&I.version<=I.db.version)return I.db&&(I.version=I.db.version+1),G(I)}).then(function(){return U(I).then(function(){X(I,D,$,B-1)})}).catch($);$(k)}}function tt(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function rt(I){var D=this,$={db:null};if(I)for(var B in I)$[B]=I[B];var V=_[$.name];V||(V=tt(),_[$.name]=V),V.forages.push(D),D._initReady||(D._initReady=D.ready,D.ready=j);var k=[];function H(){return g.resolve()}for(var K=0;K<V.forages.length;K++){var q=V.forages[K];q!==D&&k.push(q._initReady().catch(H))}var Z=V.forages.slice(0);return g.all(k).then(function(){return $.db=V.db,N($)}).then(function(Q){return $.db=Q,Y($,D._defaultConfig.version)?G($):Q}).then(function(Q){$.db=V.db=Q,D._dbInfo=$;for(var nt=0;nt<Z.length;nt++){var at=Z[nt];at!==D&&(at._dbInfo.db=$.db,at._dbInfo.version=$.version)}})}function J(I,D){var $=this;I=y(I);var B=new g(function(V,k){$.ready().then(function(){X($._dbInfo,S,function(H,K){if(H)return k(H);try{var q=K.objectStore($._dbInfo.storeName),Z=q.get(I);Z.onsuccess=function(){var Q=Z.result;Q===void 0&&(Q=null),W(Q)&&(Q=z(Q)),V(Q)},Z.onerror=function(){k(Z.error)}}catch(Q){k(Q)}})}).catch(k)});return v(B,D),B}function et(I,D){var $=this,B=new g(function(V,k){$.ready().then(function(){X($._dbInfo,S,function(H,K){if(H)return k(H);try{var q=K.objectStore($._dbInfo.storeName),Z=q.openCursor(),Q=1;Z.onsuccess=function(){var nt=Z.result;if(nt){var at=nt.value;W(at)&&(at=z(at));var lt=I(at,nt.key,Q++);lt!==void 0?V(lt):nt.continue()}else V()},Z.onerror=function(){k(Z.error)}}catch(nt){k(nt)}})}).catch(k)});return v(B,D),B}function it(I,D,$){var B=this;I=y(I);var V=new g(function(k,H){var K;B.ready().then(function(){return K=B._dbInfo,b.call(D)==="[object Blob]"?w(K.db).then(function(q){return q?D:F(D)}):D}).then(function(q){X(B._dbInfo,C,function(Z,Q){if(Z)return H(Z);try{var nt=Q.objectStore(B._dbInfo.storeName);q===null&&(q=void 0);var at=nt.put(q,I);Q.oncomplete=function(){q===void 0&&(q=null),k(q)},Q.onabort=Q.onerror=function(){var lt=at.error?at.error:at.transaction.error;H(lt)}}catch(lt){H(lt)}})}).catch(H)});return v(V,$),V}function ot(I,D){var $=this;I=y(I);var B=new g(function(V,k){$.ready().then(function(){X($._dbInfo,C,function(H,K){if(H)return k(H);try{var q=K.objectStore($._dbInfo.storeName),Z=q.delete(I);K.oncomplete=function(){V()},K.onerror=function(){k(Z.error)},K.onabort=function(){var Q=Z.error?Z.error:Z.transaction.error;k(Q)}}catch(Q){k(Q)}})}).catch(k)});return v(B,D),B}function st(I){var D=this,$=new g(function(B,V){D.ready().then(function(){X(D._dbInfo,C,function(k,H){if(k)return V(k);try{var K=H.objectStore(D._dbInfo.storeName),q=K.clear();H.oncomplete=function(){B()},H.onabort=H.onerror=function(){var Z=q.error?q.error:q.transaction.error;V(Z)}}catch(Z){V(Z)}})}).catch(V)});return v($,I),$}function ut(I){var D=this,$=new g(function(B,V){D.ready().then(function(){X(D._dbInfo,S,function(k,H){if(k)return V(k);try{var K=H.objectStore(D._dbInfo.storeName),q=K.count();q.onsuccess=function(){B(q.result)},q.onerror=function(){V(q.error)}}catch(Z){V(Z)}})}).catch(V)});return v($,I),$}function ft(I,D){var $=this,B=new g(function(V,k){if(I<0){V(null);return}$.ready().then(function(){X($._dbInfo,S,function(H,K){if(H)return k(H);try{var q=K.objectStore($._dbInfo.storeName),Z=!1,Q=q.openKeyCursor();Q.onsuccess=function(){var nt=Q.result;if(!nt){V(null);return}I===0||Z?V(nt.key):(Z=!0,nt.advance(I))},Q.onerror=function(){k(Q.error)}}catch(nt){k(nt)}})}).catch(k)});return v(B,D),B}function gt(I){var D=this,$=new g(function(B,V){D.ready().then(function(){X(D._dbInfo,S,function(k,H){if(k)return V(k);try{var K=H.objectStore(D._dbInfo.storeName),q=K.openKeyCursor(),Z=[];q.onsuccess=function(){var Q=q.result;if(!Q){B(Z);return}Z.push(Q.key),Q.continue()},q.onerror=function(){V(q.error)}}catch(Q){V(Q)}})}).catch(V)});return v($,I),$}function vt(I,D){D=m.apply(this,arguments);var $=this.config();I=typeof I!="function"&&I||{},I.name||(I.name=I.name||$.name,I.storeName=I.storeName||$.storeName);var B=this,V;if(!I.name)V=g.reject("Invalid arguments");else{var k=I.name===$.name&&B._dbInfo.db,H=k?g.resolve(B._dbInfo.db):N(I).then(function(K){var q=_[I.name],Z=q.forages;q.db=K;for(var Q=0;Q<Z.length;Q++)Z[Q]._dbInfo.db=K;return K});I.storeName?V=H.then(function(K){if(K.objectStoreNames.contains(I.storeName)){var q=K.version+1;L(I);var Z=_[I.name],Q=Z.forages;K.close();for(var nt=0;nt<Q.length;nt++){var at=Q[nt];at._dbInfo.db=null,at._dbInfo.version=q}var lt=new g(function(ct,dt){var ht=u.open(I.name,q);ht.onerror=function(xt){var Tt=ht.result;Tt.close(),dt(xt)},ht.onupgradeneeded=function(){var xt=ht.result;xt.deleteObjectStore(I.storeName)},ht.onsuccess=function(){var xt=ht.result;xt.close(),ct(xt)}});return lt.then(function(ct){Z.db=ct;for(var dt=0;dt<Q.length;dt++){var ht=Q[dt];ht._dbInfo.db=ct,M(ht._dbInfo)}}).catch(function(ct){throw(O(I,ct)||g.resolve()).catch(function(){}),ct})}}):V=H.then(function(K){L(I);var q=_[I.name],Z=q.forages;K.close();for(var Q=0;Q<Z.length;Q++){var nt=Z[Q];nt._dbInfo.db=null}var at=new g(function(lt,ct){var dt=u.deleteDatabase(I.name);dt.onerror=function(){var ht=dt.result;ht&&ht.close(),ct(dt.error)},dt.onblocked=function(){console.warn('dropInstance blocked for database "'+I.name+'" until all open connections are closed')},dt.onsuccess=function(){var ht=dt.result;ht&&ht.close(),lt(ht)}});return at.then(function(lt){q.db=lt;for(var ct=0;ct<Z.length;ct++){var dt=Z[ct];M(dt._dbInfo)}}).catch(function(lt){throw(O(I,lt)||g.resolve()).catch(function(){}),lt})})}return v(V,D),V}var yt={_driver:"asyncStorage",_initStorage:rt,_support:f(),iterate:et,getItem:J,setItem:it,removeItem:ot,clear:st,length:ut,key:ft,keys:gt,dropInstance:vt};function At(){return typeof openDatabase=="function"}var _t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt="~~local_forage_type~",St=/^~~local_forage_type~([^~]+)~/,It="__lfsc__:",$t=It.length,Mt="arbf",Lt="blob",Bt="si08",Nt="ui08",Vt="uic8",zt="si16",Gt="si32",Ht="ur16",jt="ui32",Yt="fl32",Wt="fl64",Ut=$t+Mt.length,Xt=Object.prototype.toString;function Kt(I){var D=I.length*.75,$=I.length,B,V=0,k,H,K,q;I[I.length-1]==="="&&(D--,I[I.length-2]==="="&&D--);var Z=new ArrayBuffer(D),Q=new Uint8Array(Z);for(B=0;B<$;B+=4)k=_t.indexOf(I[B]),H=_t.indexOf(I[B+1]),K=_t.indexOf(I[B+2]),q=_t.indexOf(I[B+3]),Q[V++]=k<<2|H>>4,Q[V++]=(H&15)<<4|K>>2,Q[V++]=(K&3)<<6|q&63;return Z}function Ot(I){var D=new Uint8Array(I),$="",B;for(B=0;B<D.length;B+=3)$+=_t[D[B]>>2],$+=_t[(D[B]&3)<<4|D[B+1]>>4],$+=_t[(D[B+1]&15)<<2|D[B+2]>>6],$+=_t[D[B+2]&63];return D.length%3===2?$=$.substring(0,$.length-1)+"=":D.length%3===1&&($=$.substring(0,$.length-2)+"=="),$}function re(I,D){var $="";if(I&&($=Xt.call(I)),I&&($==="[object ArrayBuffer]"||I.buffer&&Xt.call(I.buffer)==="[object ArrayBuffer]")){var B,V=It;I instanceof ArrayBuffer?(B=I,V+=Mt):(B=I.buffer,$==="[object Int8Array]"?V+=Bt:$==="[object Uint8Array]"?V+=Nt:$==="[object Uint8ClampedArray]"?V+=Vt:$==="[object Int16Array]"?V+=zt:$==="[object Uint16Array]"?V+=Ht:$==="[object Int32Array]"?V+=Gt:$==="[object Uint32Array]"?V+=jt:$==="[object Float32Array]"?V+=Yt:$==="[object Float64Array]"?V+=Wt:D(new Error("Failed to get type for BinaryArray"))),D(V+Ot(B))}else if($==="[object Blob]"){var k=new FileReader;k.onload=function(){var H=mt+I.type+"~"+Ot(this.result);D(It+Lt+H)},k.readAsArrayBuffer(I)}else try{D(JSON.stringify(I))}catch(H){console.error("Couldn't convert value into a JSON string: ",I),D(null,H)}}function ne(I){if(I.substring(0,$t)!==It)return JSON.parse(I);var D=I.substring(Ut),$=I.substring($t,Ut),B;if($===Lt&&St.test(D)){var V=D.match(St);B=V[1],D=D.substring(V[0].length)}var k=Kt(D);switch($){case Mt:return k;case Lt:return d([k],{type:B});case Bt:return new Int8Array(k);case Nt:return new Uint8Array(k);case Vt:return new Uint8ClampedArray(k);case zt:return new Int16Array(k);case Ht:return new Uint16Array(k);case Gt:return new Int32Array(k);case jt:return new Uint32Array(k);case Yt:return new Float32Array(k);case Wt:return new Float64Array(k);default:throw new Error("Unkown type: "+$)}}var Pt={serialize:re,deserialize:ne,stringToBuffer:Kt,bufferToString:Ot};function qt(I,D,$,B){I.executeSql("CREATE TABLE IF NOT EXISTS "+D.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],$,B)}function ie(I){var D=this,$={db:null};if(I)for(var B in I)$[B]=typeof I[B]!="string"?I[B].toString():I[B];var V=new g(function(k,H){try{$.db=openDatabase($.name,String($.version),$.description,$.size)}catch(K){return H(K)}$.db.transaction(function(K){qt(K,$,function(){D._dbInfo=$,k()},function(q,Z){H(Z)})},H)});return $.serializer=Pt,V}function bt(I,D,$,B,V,k){I.executeSql($,B,V,function(H,K){K.code===K.SYNTAX_ERR?H.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[D.storeName],function(q,Z){Z.rows.length?k(q,K):qt(q,D,function(){q.executeSql($,B,V,k)},k)},k):k(H,K)},k)}function ae(I,D){var $=this;I=y(I);var B=new g(function(V,k){$.ready().then(function(){var H=$._dbInfo;H.db.transaction(function(K){bt(K,H,"SELECT * FROM "+H.storeName+" WHERE key = ? LIMIT 1",[I],function(q,Z){var Q=Z.rows.length?Z.rows.item(0).value:null;Q&&(Q=H.serializer.deserialize(Q)),V(Q)},function(q,Z){k(Z)})})}).catch(k)});return v(B,D),B}function oe(I,D){var $=this,B=new g(function(V,k){$.ready().then(function(){var H=$._dbInfo;H.db.transaction(function(K){bt(K,H,"SELECT * FROM "+H.storeName,[],function(q,Z){for(var Q=Z.rows,nt=Q.length,at=0;at<nt;at++){var lt=Q.item(at),ct=lt.value;if(ct&&(ct=H.serializer.deserialize(ct)),ct=I(ct,lt.key,at+1),ct!==void 0){V(ct);return}}V()},function(q,Z){k(Z)})})}).catch(k)});return v(B,D),B}function Zt(I,D,$,B){var V=this;I=y(I);var k=new g(function(H,K){V.ready().then(function(){D===void 0&&(D=null);var q=D,Z=V._dbInfo;Z.serializer.serialize(D,function(Q,nt){nt?K(nt):Z.db.transaction(function(at){bt(at,Z,"INSERT OR REPLACE INTO "+Z.storeName+" (key, value) VALUES (?, ?)",[I,Q],function(){H(q)},function(lt,ct){K(ct)})},function(at){if(at.code===at.QUOTA_ERR){if(B>0){H(Zt.apply(V,[I,q,$,B-1]));return}K(at)}})})}).catch(K)});return v(k,$),k}function se(I,D,$){return Zt.apply(this,[I,D,$,1])}function le(I,D){var $=this;I=y(I);var B=new g(function(V,k){$.ready().then(function(){var H=$._dbInfo;H.db.transaction(function(K){bt(K,H,"DELETE FROM "+H.storeName+" WHERE key = ?",[I],function(){V()},function(q,Z){k(Z)})})}).catch(k)});return v(B,D),B}function ce(I){var D=this,$=new g(function(B,V){D.ready().then(function(){var k=D._dbInfo;k.db.transaction(function(H){bt(H,k,"DELETE FROM "+k.storeName,[],function(){B()},function(K,q){V(q)})})}).catch(V)});return v($,I),$}function ue(I){var D=this,$=new g(function(B,V){D.ready().then(function(){var k=D._dbInfo;k.db.transaction(function(H){bt(H,k,"SELECT COUNT(key) as c FROM "+k.storeName,[],function(K,q){var Z=q.rows.item(0).c;B(Z)},function(K,q){V(q)})})}).catch(V)});return v($,I),$}function fe(I,D){var $=this,B=new g(function(V,k){$.ready().then(function(){var H=$._dbInfo;H.db.transaction(function(K){bt(K,H,"SELECT key FROM "+H.storeName+" WHERE id = ? LIMIT 1",[I+1],function(q,Z){var Q=Z.rows.length?Z.rows.item(0).key:null;V(Q)},function(q,Z){k(Z)})})}).catch(k)});return v(B,D),B}function he(I){var D=this,$=new g(function(B,V){D.ready().then(function(){var k=D._dbInfo;k.db.transaction(function(H){bt(H,k,"SELECT key FROM "+k.storeName,[],function(K,q){for(var Z=[],Q=0;Q<q.rows.length;Q++)Z.push(q.rows.item(Q).key);B(Z)},function(K,q){V(q)})})}).catch(V)});return v($,I),$}function de(I){return new g(function(D,$){I.transaction(function(B){B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(V,k){for(var H=[],K=0;K<k.rows.length;K++)H.push(k.rows.item(K).name);D({db:I,storeNames:H})},function(V,k){$(k)})},function(B){$(B)})})}function ge(I,D){D=m.apply(this,arguments);var $=this.config();I=typeof I!="function"&&I||{},I.name||(I.name=I.name||$.name,I.storeName=I.storeName||$.storeName);var B=this,V;return I.name?V=new g(function(k){var H;I.name===$.name?H=B._dbInfo.db:H=openDatabase(I.name,"","",0),I.storeName?k({db:H,storeNames:[I.storeName]}):k(de(H))}).then(function(k){return new g(function(H,K){k.db.transaction(function(q){function Z(lt){return new g(function(ct,dt){q.executeSql("DROP TABLE IF EXISTS "+lt,[],function(){ct()},function(ht,xt){dt(xt)})})}for(var Q=[],nt=0,at=k.storeNames.length;nt<at;nt++)Q.push(Z(k.storeNames[nt]));g.all(Q).then(function(){H()}).catch(function(lt){K(lt)})},function(q){K(q)})})}):V=g.reject("Invalid arguments"),v(V,D),V}var ve={_driver:"webSQLStorage",_initStorage:ie,_support:At(),iterate:oe,getItem:ae,setItem:se,removeItem:le,clear:ce,length:ue,key:fe,keys:he,dropInstance:ge};function pe(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Qt(I,D){var $=I.name+"/";return I.storeName!==D.storeName&&($+=I.storeName+"/"),$}function ye(){var I="_localforage_support_test";try{return localStorage.setItem(I,!0),localStorage.removeItem(I),!1}catch{return!0}}function me(){return!ye()||localStorage.length>0}function xe(I){var D=this,$={};if(I)for(var B in I)$[B]=I[B];return $.keyPrefix=Qt(I,D._defaultConfig),me()?(D._dbInfo=$,$.serializer=Pt,g.resolve()):g.reject()}function Ae(I){var D=this,$=D.ready().then(function(){for(var B=D._dbInfo.keyPrefix,V=localStorage.length-1;V>=0;V--){var k=localStorage.key(V);k.indexOf(B)===0&&localStorage.removeItem(k)}});return v($,I),$}function _e(I,D){var $=this;I=y(I);var B=$.ready().then(function(){var V=$._dbInfo,k=localStorage.getItem(V.keyPrefix+I);return k&&(k=V.serializer.deserialize(k)),k});return v(B,D),B}function Se(I,D){var $=this,B=$.ready().then(function(){for(var V=$._dbInfo,k=V.keyPrefix,H=k.length,K=localStorage.length,q=1,Z=0;Z<K;Z++){var Q=localStorage.key(Z);if(Q.indexOf(k)===0){var nt=localStorage.getItem(Q);if(nt&&(nt=V.serializer.deserialize(nt)),nt=I(nt,Q.substring(H),q++),nt!==void 0)return nt}}});return v(B,D),B}function be(I,D){var $=this,B=$.ready().then(function(){var V=$._dbInfo,k;try{k=localStorage.key(I)}catch{k=null}return k&&(k=k.substring(V.keyPrefix.length)),k});return v(B,D),B}function Ce(I){var D=this,$=D.ready().then(function(){for(var B=D._dbInfo,V=localStorage.length,k=[],H=0;H<V;H++){var K=localStorage.key(H);K.indexOf(B.keyPrefix)===0&&k.push(K.substring(B.keyPrefix.length))}return k});return v($,I),$}function Ee(I){var D=this,$=D.keys().then(function(B){return B.length});return v($,I),$}function Te(I,D){var $=this;I=y(I);var B=$.ready().then(function(){var V=$._dbInfo;localStorage.removeItem(V.keyPrefix+I)});return v(B,D),B}function Ie(I,D,$){var B=this;I=y(I);var V=B.ready().then(function(){D===void 0&&(D=null);var k=D;return new g(function(H,K){var q=B._dbInfo;q.serializer.serialize(D,function(Z,Q){if(Q)K(Q);else try{localStorage.setItem(q.keyPrefix+I,Z),H(k)}catch(nt){(nt.name==="QuotaExceededError"||nt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&K(nt),K(nt)}})})});return v(V,$),V}function we(I,D){if(D=m.apply(this,arguments),I=typeof I!="function"&&I||{},!I.name){var $=this.config();I.name=I.name||$.name,I.storeName=I.storeName||$.storeName}var B=this,V;return I.name?V=new g(function(k){I.storeName?k(Qt(I,B._defaultConfig)):k(I.name+"/")}).then(function(k){for(var H=localStorage.length-1;H>=0;H--){var K=localStorage.key(H);K.indexOf(k)===0&&localStorage.removeItem(K)}}):V=g.reject("Invalid arguments"),v(V,D),V}var $e={_driver:"localStorageWrapper",_initStorage:xe,_support:pe(),iterate:Se,getItem:_e,setItem:Ie,removeItem:Te,clear:Ae,length:Ee,key:be,keys:Ce,dropInstance:we},Me=function(D,$){return D===$||typeof D=="number"&&typeof $=="number"&&isNaN(D)&&isNaN($)},Le=function(D,$){for(var B=D.length,V=0;V<B;){if(Me(D[V],$))return!0;V++}return!1},Jt=Array.isArray||function(I){return Object.prototype.toString.call(I)==="[object Array]"},Et={},te={},Ct={INDEXEDDB:yt,WEBSQL:ve,LOCALSTORAGE:$e},Oe=[Ct.INDEXEDDB._driver,Ct.WEBSQL._driver,Ct.LOCALSTORAGE._driver],wt=["dropInstance"],Dt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(wt),Pe={description:"",driver:Oe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function De(I,D){I[D]=function(){var $=arguments;return I.ready().then(function(){return I[D].apply(I,$)})}}function Rt(){for(var I=1;I<arguments.length;I++){var D=arguments[I];if(D)for(var $ in D)D.hasOwnProperty($)&&(Jt(D[$])?arguments[0][$]=D[$].slice():arguments[0][$]=D[$])}return arguments[0]}var Re=function(){function I(D){l(this,I);for(var $ in Ct)if(Ct.hasOwnProperty($)){var B=Ct[$],V=B._driver;this[$]=V,Et[V]||this.defineDriver(B)}this._defaultConfig=Rt({},Pe),this._config=Rt({},this._defaultConfig,D),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return I.prototype.config=function($){if((typeof $>"u"?"undefined":s($))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var B in $){if(B==="storeName"&&($[B]=$[B].replace(/\W/g,"_")),B==="version"&&typeof $[B]!="number")return new Error("Database version must be a number.");this._config[B]=$[B]}return"driver"in $&&$.driver?this.setDriver(this._config.driver):!0}else return typeof $=="string"?this._config[$]:this._config},I.prototype.defineDriver=function($,B,V){var k=new g(function(H,K){try{var q=$._driver,Z=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!$._driver){K(Z);return}for(var Q=Dt.concat("_initStorage"),nt=0,at=Q.length;nt<at;nt++){var lt=Q[nt],ct=!Le(wt,lt);if((ct||$[lt])&&typeof $[lt]!="function"){K(Z);return}}var dt=function(){for(var Tt=function(Be){return function(){var Ne=new Error("Method "+Be+" is not implemented by the current driver"),ee=g.reject(Ne);return v(ee,arguments[arguments.length-1]),ee}},Ft=0,ke=wt.length;Ft<ke;Ft++){var kt=wt[Ft];$[kt]||($[kt]=Tt(kt))}};dt();var ht=function(Tt){Et[q]&&console.info("Redefining LocalForage driver: "+q),Et[q]=$,te[q]=Tt,H()};"_support"in $?$._support&&typeof $._support=="function"?$._support().then(ht,K):ht(!!$._support):ht(!0)}catch(xt){K(xt)}});return p(k,B,V),k},I.prototype.driver=function(){return this._driver||null},I.prototype.getDriver=function($,B,V){var k=Et[$]?g.resolve(Et[$]):g.reject(new Error("Driver not found."));return p(k,B,V),k},I.prototype.getSerializer=function($){var B=g.resolve(Pt);return p(B,$),B},I.prototype.ready=function($){var B=this,V=B._driverSet.then(function(){return B._ready===null&&(B._ready=B._initDriver()),B._ready});return p(V,$,$),V},I.prototype.setDriver=function($,B,V){var k=this;Jt($)||($=[$]);var H=this._getSupportedDrivers($);function K(){k._config.driver=k.driver()}function q(nt){return k._extend(nt),K(),k._ready=k._initStorage(k._config),k._ready}function Z(nt){return function(){var at=0;function lt(){for(;at<nt.length;){var ct=nt[at];return at++,k._dbInfo=null,k._ready=null,k.getDriver(ct).then(q).catch(lt)}K();var dt=new Error("No available storage method found.");return k._driverSet=g.reject(dt),k._driverSet}return lt()}}var Q=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=Q.then(function(){var nt=H[0];return k._dbInfo=null,k._ready=null,k.getDriver(nt).then(function(at){k._driver=at._driver,K(),k._wrapLibraryMethodsWithReady(),k._initDriver=Z(H)})}).catch(function(){K();var nt=new Error("No available storage method found.");return k._driverSet=g.reject(nt),k._driverSet}),p(this._driverSet,B,V),this._driverSet},I.prototype.supports=function($){return!!te[$]},I.prototype._extend=function($){Rt(this,$)},I.prototype._getSupportedDrivers=function($){for(var B=[],V=0,k=$.length;V<k;V++){var H=$[V];this.supports(H)&&B.push(H)}return B},I.prototype._wrapLibraryMethodsWithReady=function(){for(var $=0,B=Dt.length;$<B;$++)De(this,Dt[$])},I.prototype.createInstance=function($){return new I($)},I}(),Fe=new Re;a.exports=Fe},{3:3}]},{},[4])(4)})})(localforage$1);var localforageExports=localforage$1.exports;const localforage=getDefaultExportFromCjs(localforageExports);class AbstractOperator{}let random=n=>crypto.getRandomValues(new Uint8Array(n)),customRandom=(n,r,e)=>{let a=(2<<Math.log(n.length-1)/Math.LN2)-1,o=-~(1.6*a*r/n.length);return(s=r)=>{let l="";for(;;){let c=e(o),u=o;for(;u--;)if(l+=n[c[u]&a]||"",l.length===s)return l}}},customAlphabet=(n,r=21)=>customRandom(n,r,random);class IdGenerate{static generateId(){return customAlphabet("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",10)()}}class FileUtil{static async getFileHash(r){const e=await r.arrayBuffer(),a=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(a)).map(o=>o.toString(16).padStart(2,"0")).join("").substring(0,16)}}class LocalCoverCache extends AbstractCache{getAllCoverCache(){return Array.from(this.getCachePool().values())||[]}clearCoverCache(){this.getAllCoverCache().forEach(r=>{URL.revokeObjectURL(r)})}}const localCoverCache=new LocalCoverCache,LIGHT_CHASER_PROJECT_LIST="light_chaser_project_list",IMAGE_SOURCE_PREFIX="image_source_",COVER_PREFIX="cover_";class LocalOperator extends AbstractOperator{async createProject(r){r.id=IdGenerate.generateId();const e=r.dataJson,a=await localforage.getItem(LIGHT_CHASER_PROJECT_LIST)||[];return r.dataJson=void 0,a.push(r),await localforage.setItem(LIGHT_CHASER_PROJECT_LIST,a),await localforage.setItem(r.id,e),Promise.resolve(r.id)}async updateProject(r){var l,c;r=lodashExports.cloneDeep(r);const e=r.dataJson;delete r.dataJson;const a=await localforage.getItem(LIGHT_CHASER_PROJECT_LIST)||[],o=a.findIndex(u=>u.id===r.id);if(o===-1){(l=globalMessage.messageApi)==null||l.error("项目不存在");return}const s=a[o];r=ObjectUtil.merge(s,r),a[o]=r,await localforage.setItem(LIGHT_CHASER_PROJECT_LIST,a),e&&await localforage.setItem(r.id,e),(c=globalMessage.messageApi)==null||c.success("保存成功")}async deleteProject(r){const e=await localforage.getItem(LIGHT_CHASER_PROJECT_LIST)||[],a=e.findIndex(s=>s.id===r);if(a===-1)return!1;const o=e[a];return o.cover&&await localforage.removeItem(o.cover),e.splice(a,1),await localforage.setItem(LIGHT_CHASER_PROJECT_LIST,e),await localforage.removeItem(r),!0}async getProjectData(r){const e=await localforage.getItem(r);if(!e)return null;const a=await localforage.getItem(IMAGE_SOURCE_PREFIX+r)||[];for(const c of a){const u=await localforage.getItem(c);if(u){const{blob:f,name:d}=u,g=URL.createObjectURL(f);imageSourceCache.addCache(c,{url:g,name:d,hash:c,id:c})}}const o=JSON.parse(e),{elemConfigs:s}=o,{convertMap:l}=DesignerLoaderFactory.getLoader();if(s)for(const c of Object.values(s)){const{type:u}=c==null?void 0:c.base;u&&l[u]&&await l[u].convertBack(c)}return o}async getProjectInfoList(){const r=await localforage.getItem(LIGHT_CHASER_PROJECT_LIST)||[];for(const e of r){const{cover:a}=e;if(a){const o=await localforage.getItem(a);o?(e.cover=URL.createObjectURL(o),localCoverCache.addCache(e.id,e.cover)):e.cover=void 0}}return r}async copyProject(r,e){const a=await localforage.getItem(LIGHT_CHASER_PROJECT_LIST)||[],o=a.findIndex(u=>u.id===r);if(o===-1)return"";const s=a[o],l=lodashExports.cloneDeep(s);l.id=IdGenerate.generateId(),l.name=e||l.name+"-副本",l.createTime=new Date().getTime()+"",l.updateTime=new Date().getTime()+"",a.push(l),await localforage.setItem(LIGHT_CHASER_PROJECT_LIST,a);const c=await localforage.getItem(r);return c&&await localforage.setItem(l.id,c),l.id}async uploadImage(r){return new Promise(e=>{let a=null;FileUtil.getFileHash(r).then(o=>{var s;if(imageSourceCache.isExistCache(o))a=(s=imageSourceCache.getCache(o))==null?void 0:s.url,e(a&&a!==""?{url:a,hash:o}:!1);else{const l=new FileReader;l.onload=async c=>{const u=new Blob([c.target.result],{type:r.type});localforage.setItem(o,{name:r.name,blob:u});const{id:f}=URLUtil.parseUrlParams(),d=IMAGE_SOURCE_PREFIX+f,g=await localforage.getItem(d)||[];g.push(o),localforage.setItem(d,g),a=URL.createObjectURL(u),imageSourceCache.addCache(o,{url:a,name:r.name,hash:o,id:o}),e({url:a,hash:o})},l.readAsArrayBuffer(r)}})})}async getImageSourceList(r){return new Promise(e=>{e(imageSourceCache.getAllImageCache())})}async delImageSource(r){await localforage.removeItem(r);const{id:e}=URLUtil.parseUrlParams(),a=IMAGE_SOURCE_PREFIX+e,o=await localforage.getItem(a)||[],s=o.findIndex(l=>l===r);if(s!==-1)o.splice(s,1),await localforage.setItem(a,o);else return!1;return imageSourceCache.removeCache(r),!0}async uploadCover(r){const e=new FileReader,{id:a}=URLUtil.parseUrlParams(),o=COVER_PREFIX+a;e.onload=async u=>{const f=new Blob([u.target.result],{type:r.type});await localforage.setItem(o,f)},e.readAsArrayBuffer(r);const s=await localforage.getItem(LIGHT_CHASER_PROJECT_LIST)||[],l=s.findIndex(u=>u.id===a);if(l===-1)return!1;const c=s[l];return c.cover=o,await localforage.setItem(LIGHT_CHASER_PROJECT_LIST,s),!0}}class ServerOperator extends AbstractOperator{async createProject(r){const a=await(await fetch("/api/project/create",{method:"post",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})).json();return a.code===200?a.data:""}async copyProject(r){const a=await(await fetch(`/api/project/copy/${r}`,{method:"get"})).json();return a.code===200?a.data:""}async deleteProject(r){return(await(await fetch(`/api/project/del/${r}`,{method:"get"})).json()).code===200}async getProjectData(r){var o;const a=await(await fetch(`/api/project/getProjectData/${r}`,{method:"get"})).json();return a.code===200?JSON.parse(a.data):((o=globalMessage.messageApi)==null||o.error(a.msg),null)}async getProjectInfoList(){var a;const e=await(await fetch("/api/project/list",{method:"get"})).json();return e.code===200?e.data:((a=globalMessage.messageApi)==null||a.error(e.msg),[])}async updateProject(r){var o,s;const a=await(await fetch("/api/project/update",{method:"post",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})).json();a.code===200?(o=globalMessage.messageApi)==null||o.success("保存成功"):(s=globalMessage.messageApi)==null||s.error(a.msg)}async uploadImage(r){const{id:e}=URLUtil.parseUrlParams(),a=new FormData;a.append("file",r),a.append("projectId",e);const s=await(await fetch("/api/sourceImage/upload",{method:"post",body:a})).json();return s.code===200?{url:s.data}:!1}async getImageSourceList(r){var o;const a=await(await fetch(`/api/sourceImage/getList/${r}`,{method:"get"})).json();return a.code===200?a.data:((o=globalMessage.messageApi)==null||o.error(a.msg),[])}async delImageSource(r){var o;const a=await(await fetch(`/api/sourceImage/del/${r}`,{method:"get"})).json();return a.code===200?!0:((o=globalMessage.messageApi)==null||o.error(a.msg),!1)}async uploadCover(r){const{id:e}=URLUtil.parseUrlParams(),a=new FormData;return a.append("file",r),a.append("id",e),(await(await fetch("/api/project/cover",{method:"post",body:a})).json()).code===200}}const operatorMap={[SaveType.LOCAL]:new LocalOperator,[SaveType.SERVER]:new ServerOperator};class EditorDesignerLoader extends AbstractDesignerLoader{scanComponents(){this.scannerCustomComponents()}initProject(){const{saveType:r,id:e}=URLUtil.parseUrlParams();operatorMap[r].getProjectData(e).then(a=>{if(a){const{doInit:o,setLoaded:s}=designerStore$1;o({id:e,canvasConfig:a==null?void 0:a.canvasConfig,elemConfigs:a==null?void 0:a.elemConfigs,layerConfigs:a==null?void 0:a.layerConfigs,themeConfig:a==null?void 0:a.themeConfig,layerHeader:a==null?void 0:a.layerHeader,layerTail:a==null?void 0:a.layerTail});const{setAPMap:l,setLines:c,setAPLineMap:u,setBpNodeLayoutMap:f,setBpNodeConfigMap:d}=bpStore;l((a==null?void 0:a.bpAPMap)||{}),c((a==null?void 0:a.bpLines)||{}),u((a==null?void 0:a.bpAPLineMap)||{}),f((a==null?void 0:a.bpNodeLayoutMap)||{}),d((a==null?void 0:a.bpNodeConfigMap)||{});const{initUsedLayerNodes:g}=bpLeftStore,v={};Object.keys((a==null?void 0:a.bpNodeLayoutMap)||{}).forEach(p=>{v[p]=!0}),g(v),s(!0)}else message.error("项目不存在")})}}const editorDesignerLoader=new EditorDesignerLoader,editorDesignerLoader$1=editorDesignerLoader;class ViewDesignerLoader extends AbstractDesignerLoader{scanComponents(){this.scannerCustomComponents()}initProject(){const{saveType:r,id:e}=URLUtil.parseUrlParams();operatorMap[r].getProjectData(e).then(a=>{if(a){const{doInit:o,setLoaded:s}=designerStore$1;o({id:e,canvasConfig:a==null?void 0:a.canvasConfig,elemConfigs:a==null?void 0:a.elemConfigs,layerConfigs:a==null?void 0:a.layerConfigs,themeConfig:a==null?void 0:a.themeConfig,layerHeader:a==null?void 0:a.layerHeader,layerTail:a==null?void 0:a.layerTail});const{setAPMap:l,setLines:c,setAPLineMap:u,setBpNodeConfigMap:f,setBpNodeControllerInsMap:d}=bpStore;l((a==null?void 0:a.bpAPMap)||{}),c((a==null?void 0:a.bpLines)||{}),u((a==null?void 0:a.bpAPLineMap)||{}),f((a==null?void 0:a.bpNodeConfigMap)||{});const g={};Object.values(a==null?void 0:a.bpNodeLayoutMap).forEach(y=>{const{type:m,id:x}=y,A=bpNodeControllerMap.get(m),_=a==null?void 0:a.bpNodeConfigMap[x];g[x]=new A(_)}),d(g);const{initUsedLayerNodes:v}=bpLeftStore,p={};Object.keys((a==null?void 0:a.bpNodeLayoutMap)||{}).forEach(y=>{p[y]=!0}),v(p),s(!0)}else message.error("项目不存在")})}}const viewDesignerLoader=new ViewDesignerLoader,loaderMap=new Map;loaderMap.set(DesignerMode.EDIT,editorDesignerLoader$1);loaderMap.set(DesignerMode.VIEW,viewDesignerLoader);class DesignerLoaderFactory{static getLoader(){const{mode:r}=URLUtil.parseUrlParams();return r&&loaderMap.has(r)?loaderMap.get(r):editorDesignerLoader$1}}class RightStore{constructor(){R(this,"activeElem",{});R(this,"menus",[]);R(this,"activeMenu","");R(this,"visible",!1);R(this,"setActiveMenu",r=>this.activeMenu=r);R(this,"setContentVisible",r=>this.visible=r);R(this,"activeConfig",(r,e)=>{var a,o;if(!r||!e){this.activeMenu="",this.activeElem={},this.menus=[],this.visible&&(this.visible=!1);return}if(this.menus=((o=(a=DesignerLoaderFactory.getLoader())==null?void 0:a.definitionMap[e])==null?void 0:o.getMenuList())||[],this.menus.length>0){let s=!0;for(let l=0;l<this.menus.length;l++)if(this.menus[l].key===this.activeMenu){s=!1;break}s&&this.visible&&(this.activeMenu=this.menus[0].key)}if(this.activeElem={id:r,type:e},this.visible){this.visible=!1;const s=setTimeout(()=>{runInAction(()=>this.visible=!0),clearTimeout(s)},0)}});makeObservable(this,{menus:observable,activeMenu:observable,visible:observable,setActiveMenu:action,setContentVisible:action,activeConfig:action})}}const rightStore=new RightStore,rightStore$1=rightStore;class HistoryRecordOperateProxy{doDrag(r){const{layerConfigs:e,updateLayer:a}=designerStore$1,o=[];let s,l;if(r.length===1){const u=e[r[0].id];s={ids:[r[0].id],x:u.x,y:u.y};const{id:f,x:d=0,y:g=0}=r[0];l={ids:[f],x:d,y:g}}else{const u=[];r.forEach(v=>o.push(v.id)),o.forEach(v=>u.push(e[v]));let f=1/0,d=1/0;u.forEach(v=>{v.x<f&&(f=v.x),v.y<d&&(d=v.y)}),s={ids:o,x:f,y:d};const{groupCoordinate:g}=eventOperateStore$1;l={ids:o,x:g.minX,y:g.minY}}const c={type:OperateType.DRAG,prev:s,next:l};a(r,!1),historyOperator.put({actions:[c]})}doResize(r,e){const{layerConfigs:a,updateLayer:o}=designerStore$1,s=[];let l,c;if(r.length===1){const{width:f=0,height:d=0}=a[r[0].id];l={ids:[r[0].id],width:f,height:d,direction:e};const{id:g}=r[0];c={ids:[g],width:r[0].width,height:r[0].height,direction:e}}else{const f=[];r.forEach(A=>s.push(A.id)),s.forEach(A=>f.push(a[A]));let d=1/0,g=1/0,v=-1/0,p=-1/0;f.forEach(A=>{const{x:_=0,y:b=0}=A;_<d&&(d=_),b<g&&(g=b),_+A.width>v&&(v=_+A.width),b+A.height>p&&(p=b+A.height)});const y=v-d,m=p-g;l={ids:s,width:y,height:m,direction:e};const{groupCoordinate:x}=eventOperateStore$1;c={ids:s,width:x.groupWidth,height:x.groupHeight,direction:e}}const u={type:OperateType.RESIZE,prev:l,next:c};o(r,!1),historyOperator.put({actions:[u]})}doAdd(r){const e=[],a=[],o=[],s=[],{layerConfigs:l,updateLayer:c}=designerStore$1;if(!designerStore$1.layerHeader)e.push({layerHeader:void 0,layerTail:void 0}),designerStore$1.layerHeader=r.id,designerStore$1.layerTail=r.id;else{e.push({layerHeader:designerStore$1.layerHeader});const d=l[designerStore$1.layerHeader];o.push({id:d.id,prev:d.prev}),d.prev=r.id,r.next=d.id,designerStore$1.layerHeader=r.id,s.push({id:d.id,prev:r.id})}a.push({id:r.id,layerConfig:lodashExports.cloneDeep(r),layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail});const{addRecordCompId:u,setAddRecordCompId:f}=eventOperateStore$1;u&&u===r.id&&(historyOperator.put({actions:[{type:OperateType.ADD,prev:e,next:a},{type:OperateType.UPDATE_LAYER,prev:o,next:s}]}),f(null)),l[r.id+""]=r,c(s)}doDelete(){let{targetIds:r,setTargetIds:e}=eventOperateStore$1;if(r.length===0)return;const{delItem:a,layerConfigs:o,compController:s}=designerStore$1,{setContentVisible:l,activeConfig:c,activeElem:u}=rightStore$1;r.includes(u.id)&&(l(!1),c(null,""));const f=[],d=[],g=[],v=[],p=new Set;r.forEach(m=>{const x=o[m];if(p.add(m),x.next&&p.add(x.next),x.prev&&p.add(x.prev),x.pid){const A=o[x.pid];A.childHeader===m&&p.add(A.id),A.childTail===m&&p.add(A.id)}});const y=Array.from(p).filter(m=>!r.includes(m));r.forEach(m=>{const x=o[m],A=s[m]&&s[m].getConfig();f.push({id:m,layerConfig:lodashExports.cloneDeep(x),elemConfig:A})}),g.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),y.forEach(m=>{const x=o[m],{next:A,prev:_,childHeader:b,childTail:S,pid:C}=x;g.push({id:m,next:A,prev:_,childHeader:b,childTail:S,pid:C})}),runInAction(()=>{r.forEach(m=>{const x=o[m],A=o[x.prev],_=o[x.next];if(x.id===designerStore$1.layerHeader&&(designerStore$1.layerHeader=x.next),x.id===designerStore$1.layerTail&&(designerStore$1.layerTail=x.prev),A&&(A.next=x==null?void 0:x.next),_&&(_.prev=x==null?void 0:x.prev),x.pid){const b=o[x.pid];b.childHeader===m&&(b.childHeader=void 0),b.childTail===m&&(b.childTail=void 0)}}),a(r)}),y.forEach(m=>{const x=o[m],{next:A,prev:_,childHeader:b,childTail:S,pid:C}=x;v.push({id:m,next:A,prev:_,childHeader:b,childTail:S,pid:C})}),d.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),historyOperator.put({actions:[{type:OperateType.DEL,prev:f,next:d},{type:OperateType.UPDATE_LAYER,prev:g,next:v}]}),e([]),eventOperateStore$1==null||eventOperateStore$1.focusDesignerCanvas()}doCopy(r){if(r.length===0)return[];const e=[],a=[],o=[],s=[],l={},c=[],u=[],f=new Set;if(r.forEach(d=>{const g=designerStore$1.layerConfigs[d];if(f.add(d),g.prev&&f.add(g.prev),g.pid){const v=designerStore$1.layerConfigs[g.pid];v&&(f.add(v.id),f.add(v.childHeader))}}),o.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),f.forEach(d=>{const g=designerStore$1.layerConfigs[d],{prev:v,next:p,childHeader:y,childTail:m,pid:x}=g;o.push({id:d,prev:v,next:p,childHeader:y,childTail:m,pid:x})}),runInAction(()=>{const{layerConfigs:d,compController:g,elemConfigs:v}=designerStore$1;r.forEach(p=>{const y=d[p],m=lodashExports.cloneDeep(y);m.id=IdGenerate.generateId(),m.name=m.name+"-副本",m.prev=void 0,m.next=void 0,m.type!=="group"&&(m.x=m.x+10,m.y=m.y+10),d[m.id]=m,l[p]=m.id;const x=g[y.id];if(x){const A=lodashExports.cloneDeep(x.getConfig());A.base.id=m.id,v[m.id]=A}u.push(m.id),c.push(m)}),r.forEach(p=>{const y=d[p],m=d[l[p]];if(y.type==="group"&&(m.childHeader=l[y.childHeader],m.childTail=l[y.childTail]),y.pid)if(y.pid&&r.includes(y.pid))m.prev=l[y.prev],m.next=l[y.next],m.pid=l[y.pid];else{const x=d[y.prev];m.prev=x==null?void 0:x.id,m.next=y==null?void 0:y.id,y&&(y.prev=m.id),x&&(x.next=m.id);const A=d[y.pid];A.childHeader===y.id&&(A.childHeader=m.id)}else{const x=d[y.prev];m.prev=x==null?void 0:x.id,m.next=y==null?void 0:y.id,y&&(y.prev=m.id),x&&(x.next=m.id),y.id===designerStore$1.layerHeader&&(designerStore$1.layerHeader=m.id)}})}),s.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),f.forEach(d=>{const g=designerStore$1.layerConfigs[d],{prev:v,next:p,childHeader:y,childTail:m,pid:x}=g;s.push({id:d,prev:v,next:p,childHeader:y,childTail:m,pid:x})}),u.forEach(d=>{const g=designerStore$1.layerConfigs[d],v=designerStore$1.elemConfigs[d];g.type==="group"?a.push({id:d,layerConfig:lodashExports.cloneDeep(g)}):a.push({id:d,layerConfig:lodashExports.cloneDeep(g),elemConfig:v})}),historyOperator.put({actions:[{type:OperateType.ADD,prev:e,next:a},{type:OperateType.UPDATE_LAYER,prev:o,next:s}]}),c.length>1){const{groupCoordinate:d,setGroupCoordinate:g}=eventOperateStore$1;g({minX:d.minX+10,minY:d.minY+10})}return u}doHideUpd(r){const e=[],a=[],{layerConfigs:o,updateLayer:s}=designerStore$1;r.forEach(d=>{const{id:g,hide:v}=d;a.push({id:g,hide:v});const p=o[g];e.push({id:g,hide:p.hide})});const l={type:OperateType.HIDE,prev:e,next:a};historyOperator.put({actions:[l]}),s(r);const{setTargetIds:c}=eventOperateStore$1;c([]);const{layerInstances:u}=layerListStore$1,{menu:f}=designerLeftStore;f==="layer-list"&&r.forEach(d=>{var g;(g=u[d.id])==null||g.setState({hide:d.hide,selected:!1})})}doLockUpd(r){const e=[],a=[],{layerConfigs:o,updateLayer:s}=designerStore$1;r.forEach(f=>{const{id:d,lock:g}=f;a.push({id:d,lock:g});const v=o[d];e.push({id:d,lock:v.lock})});const l={type:OperateType.LOCK,prev:e,next:a};historyOperator.put({actions:[l]}),s(r);const{layerInstances:c}=layerListStore$1,{menu:u}=designerLeftStore;u==="layer-list"&&r.forEach(f=>{var d;(d=c[f.id])==null||d.setState({lock:f.lock})})}doLayerToTop(){const{targetIds:r}=eventOperateStore$1;if(r.length===0)return;const e=[],a=[],{layerConfigs:o}=designerStore$1;let s=r.filter(c=>{const u=o[c];return!u.pid||u.pid&&!r.includes(u.pid)});const l=new Set;l.add(designerStore$1.layerHeader),s.forEach(c=>{const u=o[c];l.add(c),u.next&&l.add(u.next),u.prev&&l.add(u.prev),u.pid&&l.add(u.pid)}),e.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),l.forEach(c=>{const{prev:u,next:f,childHeader:d,childTail:g}=o[c];e.push({id:c,prev:u,next:f,childHeader:d,childTail:g})}),s=s.sort((c,u)=>{const f=o[c],d=o[u];return f.order-d.order}),runInAction(()=>{for(let c=0;c<s.length;c++){const u=s[c],f=o[u],d=o[f.prev],g=o[f.next];if(f.pid){const v=o[f.pid];if(v.childHeader===u)continue;const p=o[v.childHeader];f.prev=void 0,f.next=v==null?void 0:v.childHeader,d&&(d.next=g==null?void 0:g.id),g&&(g.prev=d==null?void 0:d.id),p&&(p.prev=u),v.childHeader=u,u===v.childTail&&(v.childTail=d==null?void 0:d.id)}else{if(designerStore$1.layerHeader===u)continue;f.prev=void 0,f.next=designerStore$1.layerHeader,d&&(d.next=g==null?void 0:g.id),g&&(g.prev=d==null?void 0:d.id);const v=o[designerStore$1.layerHeader];v&&(v.prev=u),designerStore$1.layerHeader=u,u===designerStore$1.layerTail&&(designerStore$1.layerTail=d==null?void 0:d.id)}}}),a.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),l.forEach(c=>{const{prev:u,next:f,childHeader:d,childTail:g}=o[c];a.push({id:c,prev:u,next:f,childHeader:d,childTail:g})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:e,next:a}]}),designerStore$1.reRenderLayer()}doLayerToBottom(){const{targetIds:r}=eventOperateStore$1;if(r.length===0)return;const e=[],a=[],{layerConfigs:o}=designerStore$1;let s=r.filter(c=>{const u=o[c];return!u.pid||u.pid&&!r.includes(u.pid)});const l=new Set;l.add(designerStore$1.layerTail),s.forEach(c=>{const u=o[c];l.add(c),u.next&&l.add(u.next),u.prev&&l.add(u.prev),u.pid&&l.add(u.pid)}),e.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),l.forEach(c=>{const{prev:u,next:f,childHeader:d,childTail:g}=o[c];e.push({id:c,prev:u,next:f,childHeader:d,childTail:g})}),s=s.sort((c,u)=>{const f=o[c];return o[u].order-f.order}),runInAction(()=>{for(let c=0;c<s.length;c++){const u=s[c],f=o[u],d=o[f.prev],g=o[f.next];if(f.pid){const v=o[f.pid];if(u===v.childTail)continue;const p=o[v.childTail];f.prev=v.childTail,f.next=void 0,d&&(d.next=g==null?void 0:g.id),g&&(g.prev=d==null?void 0:d.id),p&&(p.next=u),v.childTail=u,u===v.childHeader&&(v.childHeader=g==null?void 0:g.id)}else{if(designerStore$1.layerTail===u)continue;f.prev=designerStore$1.layerTail,f.next=void 0,d&&(d.next=g==null?void 0:g.id),g&&(g.prev=d==null?void 0:d.id);const v=o[designerStore$1.layerTail];v&&(v.next=u),designerStore$1.layerTail=u,u===designerStore$1.layerHeader&&(designerStore$1.layerHeader=g==null?void 0:g.id)}}}),a.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),l.forEach(c=>{const{prev:u,next:f,childHeader:d,childTail:g}=o[c];a.push({id:c,prev:u,next:f,childHeader:d,childTail:g})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:e,next:a}]}),designerStore$1.reRenderLayer()}doLayerMoveUp(){let{targetIds:r}=eventOperateStore$1;if(r.length===0)return;const{layerConfigs:e}=designerStore$1;if(r.includes(designerStore$1.layerHeader)){let l=1,c=e[designerStore$1.layerHeader];for(;c.next&&(c=e[c.next],r.includes(c.id));)l++;if(l>=r.length)return}const a=[],o=[],s=new Set;r.forEach(l=>{const c=e[l],u=e[c.prev];s.add(l),c&&c.next&&s.add(c.next),c&&c.prev&&s.add(c.prev),u&&u.prev&&s.add(u.prev)}),r=r.sort((l,c)=>{const u=e[l];return e[c].order-u.order}),a.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),s.forEach(l=>{const c=e[l],{childTail:u,childHeader:f}=c;a.push({id:l,prev:c.prev,next:c.next,childHeader:f,childTail:u})}),runInAction(()=>{r.forEach(l=>{const c=e[l],u=e[c.prev],f=e[u==null?void 0:u.prev],d=e[c.next];if(c.pid){const g=e[c.pid];l!==g.childHeader&&(c.prev===g.childHeader&&(g.childHeader=l),l===g.childTail&&(g.childTail=c.prev),c.prev=f==null?void 0:f.id,c.next=u==null?void 0:u.id,u&&(u.prev=c.id,u.next=d==null?void 0:d.id),f&&(f.next=c.id),d&&(d.prev=u==null?void 0:u.id))}else l!==designerStore$1.layerHeader&&(c.prev===designerStore$1.layerHeader&&(designerStore$1.layerHeader=l),l===designerStore$1.layerTail&&(designerStore$1.layerTail=c.prev),c.prev=f==null?void 0:f.id,c.next=u==null?void 0:u.id,u&&(u.prev=c.id,u.next=d==null?void 0:d.id),f&&(f.next=c.id),d&&(d.prev=u==null?void 0:u.id))})}),o.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),s.forEach(l=>{const c=e[l],{childTail:u,childHeader:f}=c;o.push({id:l,prev:c.prev,next:c.next,childHeader:f,childTail:u})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:a,next:o}]}),designerStore$1.reRenderLayer()}doLayerMoveDown(){let{targetIds:r}=eventOperateStore$1;if(r.length===0)return;const{layerConfigs:e}=designerStore$1;if(r.includes(designerStore$1.layerTail)){let l=1,c=e[designerStore$1.layerTail];for(;c.prev&&(c=e[c.prev],r.includes(c.id));)l++;if(l>=r.length)return}const a=[],o=[],s=new Set;r.forEach(l=>{const c=e[l],u=e[c.next];s.add(l),c&&c.next&&s.add(c.next),c&&c.prev&&s.add(c.prev),u&&u.next&&s.add(u.next)}),r=r.sort((l,c)=>{const u=e[l],f=e[c];return u.order-f.order}),a.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),s.forEach(l=>{const c=e[l],{childTail:u,childHeader:f}=c;a.push({id:l,prev:c.prev,next:c.next,childHeader:f,childTail:u})}),runInAction(()=>{r.forEach(l=>{const c=e[l],u=e[c.prev],f=e[c.next],d=e[f==null?void 0:f.next];if(c.pid){const g=e[c.pid];l!==g.childTail&&(c.next===g.childTail&&(g.childTail=l),l===g.childHeader&&(g.childHeader=c.next),c.prev=f==null?void 0:f.id,c.next=d==null?void 0:d.id,f&&(f.prev=u==null?void 0:u.id,f.next=c.id),u&&(u.next=f==null?void 0:f.id),d&&(f.prev=c==null?void 0:c.id))}else l!==designerStore$1.layerTail&&(c.next===designerStore$1.layerTail&&(designerStore$1.layerTail=l),l===designerStore$1.layerHeader&&(designerStore$1.layerHeader=c.next),c.prev=f==null?void 0:f.id,c.next=d==null?void 0:d.id,f&&(f.prev=u==null?void 0:u.id,f.next=c.id),u&&(u.next=f==null?void 0:f.id),d&&(d.prev=c==null?void 0:c.id))})}),o.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),s.forEach(l=>{const c=e[l],{childTail:u,childHeader:f}=c;o.push({id:l,prev:c.prev,next:c.next,childHeader:f,childTail:u})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:a,next:o}]}),designerStore$1.reRenderLayer()}doStyleUpd(r,e){const{activeElem:{id:a}}=rightStore$1,o={type:OperateType.UPD_STYLE,prev:{id:a,data:e},next:{id:a,data:r}};historyOperator.put({actions:[o]})}doGrouping(){const{targetIds:r,setTargetIds:e}=eventOperateStore$1;if(!r||r.length<=1||LayerUtil.hasSameGroup(r))return;let a=LayerUtil.findTopGroupLayer(r,!0);const{layerConfigs:o,addItem:s}=designerStore$1,l=IdGenerate.generateId();let c=o[a[0]].lock;for(let A=1;A<a.length;A++)if(c!==o[a[A]].lock){c=!1;break}const u={id:l,type:"group",name:"新建分组",hide:!1,lock:c},f=new Set;f.add(designerStore$1.layerHeader),a.forEach(A=>{const _=o[A];f.add(A),_.next&&f.add(_.next),_.prev&&f.add(_.prev)});const d=[],g=[],v=[];d.push({layerHeader:designerStore$1.layerHeader}),f.forEach(A=>{const _=o[A];d.push({id:A,pid:_.pid,prev:_.prev,next:_.next})});let p="",y="";runInAction(()=>{a=a.sort((A,_)=>{const b=o[A],S=o[_];return b.order-S.order}),a.forEach(A=>{const _=o[A],b=o[_.prev],S=o[_.next];if(designerStore$1.layerHeader===A&&(designerStore$1.layerHeader=_.next),designerStore$1.layerTail===A&&(designerStore$1.layerTail=_.prev),_.pid=l,b&&(b.next=_.next),S&&(S.prev=_.prev),_.prev=void 0,_.next=void 0,p){const C=o[p];C.prev=A,_.next=p}else y=A;p=A})}),u.childHeader=p,u.childTail=y,u.next=designerStore$1.layerHeader;const m=o[designerStore$1.layerHeader];m&&(m.prev=l),s(u),designerStore$1.layerHeader=l,g.push({layerHeader:l}),f.forEach(A=>{const _=o[A];g.push({id:A,pid:_.pid,prev:_.prev,next:_.next})}),v.push({id:l,layerConfig:u});const x=[{type:OperateType.ADD,prev:null,next:v},{type:OperateType.UPDATE_LAYER,prev:d,next:g}];if(historyOperator.put({actions:x}),e([]),c){const{layerInstances:A}=layerListStore$1,_=setTimeout(()=>{A[l].setState({lock:!0}),clearTimeout(_)},10)}}doUnGrouping(){const{targetIds:r,setTargetIds:e}=eventOperateStore$1;if(r.length===0)return;let a=LayerUtil.findTopGroupLayer(r,!0);const{layerConfigs:o,delLayout:s}=designerStore$1;a=a.filter(y=>o[y].type==="group");const l=[],c=[],u=[],f=new Set;a.forEach(y=>{const m=o[y];if(m.next&&f.add(m.next),m.prev&&f.add(m.prev),m.childHeader){let x=o[m.childHeader];for(x&&f.add(x.id);x!=null&&x.next;)x=o[x.next],x&&f.add(x.id)}}),l.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),f.forEach(y=>{const m=o[y],{prev:x,next:A,pid:_,childHeader:b,childTail:S}=m;l.push({id:y,prev:x,next:A,pid:_,childHeader:b,childTail:S})}),a.forEach(y=>{u.push({id:y,layerConfig:lodashExports.cloneDeep(o[y])})}),runInAction(()=>{a.forEach(y=>{const m=o[y],x=o[m.prev],A=o[m.next],_=o[m.childHeader],b=o[m.childTail];_&&(_.prev=x==null?void 0:x.id),b&&(b.next=A==null?void 0:A.id),x&&(x.next=m==null?void 0:m.childHeader),A&&(A.prev=m==null?void 0:m.childTail);let S=m.childHeader;for(;S;){const C=o[S];C&&(C.pid=void 0),S=C==null?void 0:C.next}y===designerStore$1.layerHeader&&(designerStore$1.layerHeader=m.childHeader),y===designerStore$1.layerTail&&(designerStore$1.layerTail=m.childTail)}),s(a)}),c.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),f.forEach(y=>{const m=o[y],{prev:x,next:A,pid:_,childHeader:b,childTail:S}=m;c.push({id:y,prev:x,next:A,pid:_,childHeader:b,childTail:S})});const d=[{type:OperateType.UPDATE_LAYER,prev:l,next:c},{type:OperateType.DEL,prev:u,next:null}];historyOperator.put({actions:d}),e([]);const{activeElem:g,activeConfig:v,setContentVisible:p}=rightStore$1;g&&a.includes(g.id)&&(p(!1),v(null,""))}doRemoveFromGroup(){let{targetIds:r}=eventOperateStore$1;if(r.length===0)return;const{layerConfigs:e}=designerStore$1,a=r.filter(c=>{const u=e[c];return u.pid&&!r.includes(u.pid)}),o=[],s=[],l=new Set;l.add(designerStore$1.layerHeader),a.forEach(c=>{const u=e[c],f=e[u.pid];l.add(u.id),u.prev&&l.add(u.prev),u.next&&l.add(u.next),(f.childHeader===c||f.childTail===c)&&l.add(f.id)}),o.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),l.forEach(c=>{const u=e[c],{prev:f,next:d,pid:g,childHeader:v,childTail:p}=u;o.push({id:c,prev:f,next:d,pid:g,childHeader:v,childTail:p})}),runInAction(()=>{a.forEach(c=>{const u=e[c],f=e[u.prev],d=e[u.next],g=e[u.pid],v=e[designerStore$1.layerHeader];g.childHeader===c&&(g.childHeader=d==null?void 0:d.id),g.childTail===c&&(g.childTail=f==null?void 0:f.id),u.pid=void 0,u.prev=void 0,u.next=designerStore$1.layerHeader,v.prev=u.id,designerStore$1.layerHeader=u.id,f&&(f.next=d==null?void 0:d.next),d&&(d.prev=f==null?void 0:f.prev)})}),s.push({layerHeader:designerStore$1.layerHeader,layerTail:designerStore$1.layerTail}),l.forEach(c=>{const u=e[c],{prev:f,next:d,pid:g,childHeader:v,childTail:p}=u;s.push({id:c,prev:f,next:d,pid:g,childHeader:v,childTail:p})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:o,next:s}]}),designerStore$1.reRenderLayer()}}const historyRecordOperateProxy=new HistoryRecordOperateProxy,historyRecordOperateProxy$1=historyRecordOperateProxy;class DesignerStore{constructor(){R(this,"id","");R(this,"loaded",!1);R(this,"canvasConfig",{rasterize:!1,dragStep:1,resizeStep:1,width:1920,height:1080});R(this,"projectConfig",{name:"",des:"",state:ProjectState.DRAFT,createTime:"",updateTime:"",saveType:SaveType.LOCAL});R(this,"elemConfigs",{});R(this,"compController",{});R(this,"layerConfigs",{});R(this,"themeConfig",[{id:"0",name:"科技风格(默认主题)",colors:{main:"#00dfff",mainText:"#62edff",subText:"#4ca4b1",background:"#00dfff33",supplementFirst:"#38929f",supplementSecond:"#1790a2"}}]);R(this,"layerHeader");R(this,"layerTail");R(this,"doInit",r=>{this.id=r.id??this.id,this.canvasConfig=r.canvasConfig?{...this.canvasConfig,...r.canvasConfig}:this.canvasConfig,this.elemConfigs=r.elemConfigs?{...this.elemConfigs,...r.elemConfigs}:this.elemConfigs,this.layerConfigs=r.layerConfigs||this.layerConfigs,this.themeConfig=r.themeConfig||this.themeConfig,this.layerHeader=r.layerHeader||this.layerHeader,this.layerTail=r.layerTail||this.layerTail});R(this,"setLoaded",r=>this.loaded=r);R(this,"addItem",r=>this.layerConfigs[r.id+""]=r);R(this,"delItem",r=>{for(const e of r){const a=this.compController[e];a&&a.destroy(),delete this.layerConfigs[e],delete this.compController[e]}});R(this,"updateLayer",(r,e=!0)=>{for(const a of r){const o=this.layerConfigs[a.id+""];lodashExports.isEqual(o,a)||(this.layerConfigs[a.id+""]=e?{...ObjectUtil.merge(o,a)}:ObjectUtil.merge(o,a))}});R(this,"reRenderLayer",()=>runInAction(()=>this.layerConfigs={...this.layerConfigs}));R(this,"delLayout",r=>{for(const e of r)this.layerConfigs[e]&&this.layerConfigs[e].type==="group"&&delete this.layerConfigs[e]});R(this,"updateThemeConfig",r=>this.themeConfig=r);R(this,"flashGlobalTheme",r=>{this.compController&&Object.keys(this.compController).forEach(e=>{const a=this.compController[e];a&&a.updateTheme(r)})});R(this,"updateCanvasConfig",r=>this.canvasConfig={...this.canvasConfig,...r});R(this,"updateProjectConfig",r=>this.projectConfig={...this.projectConfig,...r});R(this,"copyItem",r=>historyRecordOperateProxy$1.doCopy(r));makeObservable(this,{canvasConfig:observable,projectConfig:observable,layerConfigs:observable.shallow,themeConfig:observable,loaded:observable,doInit:action,addItem:action,delItem:action,setLoaded:action,updateLayer:action,updateThemeConfig:action,flashGlobalTheme:action,updateCanvasConfig:action,updateProjectConfig:action,copyItem:action,delLayout:action})}getData(){const r={};return Object.keys(this.compController).forEach(e=>{r[e]=this.compController[e].getConfig()}),{canvasConfig:toJS(this.canvasConfig),elemConfigs:r,layerConfigs:toJS(this.layerConfigs),themeConfig:toJS(this.themeConfig),layerHeader:this.layerHeader,layerTail:this.layerTail}}}const designerStore=new DesignerStore,designerStore$1=designerStore;class EventOperateStore{constructor(){R(this,"movableRef",null);R(this,"selectorRef",null);R(this,"rulerRef",null);R(this,"dsContentRef",null);R(this,"targets",[]);R(this,"targetIds",[]);R(this,"pointerTarget",null);R(this,"groupCoordinate",{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});R(this,"backoff",!1);R(this,"addRecordCompId",null);R(this,"scale",1);R(this,"ratio",1);R(this,"setDsContentRef",r=>this.dsContentRef=r);R(this,"setRuleRef",r=>this.rulerRef=r);R(this,"setRatio",r=>this.ratio=r);R(this,"setScale",r=>this.scale=r);R(this,"setAddRecordCompId",r=>this.addRecordCompId=r);R(this,"setBackoff",r=>this.backoff=r);R(this,"setMovableRef",r=>this.movableRef=r);R(this,"setSelectorRef",r=>this.selectorRef=r);R(this,"setTargetIds",r=>{const e=[...this.targetIds];this.targetIds=r;const a=[];r.forEach(l=>{const c=document.getElementById(l);c&&a.push(c)}),this.targets=a;const{layerInstances:o}=layerListStore$1,{menu:s}=designerLeftStore;if(s==="layer-list"&&(e.forEach(l=>{const c=o[l];c&&c.setState({selected:!1})}),this.targetIds.forEach(l=>{const c=o[l];c&&c.setState({selected:!0})})),this.targets.length>1){const{calculateGroupCoordinate:l}=eventOperateStore;l(this.targets)}});R(this,"setPointerTarget",r=>this.pointerTarget=r);R(this,"setGroupCoordinate",r=>{this.groupCoordinate=ObjectUtil.merge(this.groupCoordinate,r)});R(this,"calculateGroupCoordinate",r=>{const{layerConfigs:e}=designerStore$1,a={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};r.forEach(o=>{const s=e[o.id],{x:l=0,y:c=0,width:u,height:f}=s;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),l+u>a.maxX&&(a.maxX=l+u),c+f>a.maxY&&(a.maxY=c+f)}),a.groupWidth=a.maxX-a.minX,a.groupHeight=a.maxY-a.minY,this.setGroupCoordinate(a)});R(this,"focusDesignerCanvas",()=>{const r=document.querySelector(".lc-ruler-content");this.setPointerTarget(r)});makeObservable(this,{targets:observable,scale:observable,setScale:action,setTargetIds:action})}}const eventOperateStore=new EventOperateStore,eventOperateStore$1=eventOperateStore;export{requestAnimationFrame$1 as $,AnchorPointType as A,BlockOutlined$1 as B,CodeSandboxOutlined$1 as C,DesignerLoaderFactory as D,parseMat as E,FunctionOutlined$1 as F,convertDimension as G,calculateBoundSize as H,IdGenerate as I,isArray as J,getDist$1 as K,LayerUtil as L,convertMatrixtoCSS as M,calculate as N,convertPositionMatrix as O,isObject as P,getKeys as Q,decamelize as R,convertUnitSize as S,isNumber as T,URLUtil as U,ignoreDimension as V,invert as W,createIdentityMatrix as X,multiply as Y,ref as Z,addClass as _,editorDesignerLoader$1 as a,SaveType as a$,DragScroll$1 as a0,splitSpace as a1,parse as a2,refs as a3,ChildrenDiffer$1 as a4,prefixCSS as a5,find as a6,withMethods as a7,fromTranslation as a8,dot as a9,TINY_NUM as aA,getDocumentBody as aB,getDocumentElement as aC,isUndefined as aD,Gesto as aE,average as aF,getIntersectionPointsByConstants as aG,convertCSStoMatrix as aH,between as aI,Selecto$1 as aJ,bpNodeControllerMap as aK,OperateType as aL,historyOperator as aM,DesignerMode as aN,findLast as aO,baseInfoStore as aP,UngroupOutlined$1 as aQ,GroupSelectable as aR,BPExecutor as aS,GroupLayerController as aT,ProjectState as aU,ThemeList$1 as aV,ThemeEditor as aW,AntdLegend as aX,AntdCartesianCoordinateSys as aY,AntdCommonUtil as aZ,localCoverCache as a_,createRotateMatrix as aa,getOrigin as ab,rotate as ac,diff as ad,multiplies as ae,createOriginMatrix as af,toMat as ag,isNode as ah,isFunction as ai,isWindow as aj,calculateMatrixDist as ak,counter as al,removeClass as am,splitBracket as an,splitComma as ao,getMinMaxs as ap,splitUnit as aq,EventEmitter$1 as ar,cancelAnimationFrame$1 as as,fitPoints as at,getOverlapSize as au,getAreaSize as av,isInside as aw,diff$1 as ax,getWindow as ay,createScaleMatrix as az,componentSubCategorize as b,componentCategorize as c,designerLeftStore as d,eventOperateStore$1 as e,designerStore$1 as f,LineOutlined$1 as g,historyRecordOperateProxy$1 as h,Dialog as i,bpStore as j,bpLeftStore as k,layerListStore$1 as l,BranchesOutlined$1 as m,minus as n,operatorMap as o,prefixNames as p,createWarpMatrix as q,rightStore$1 as r,styled as s,findIndex as t,hasClass as u,getRad$1 as v,throttle as w,plus as x,throttleArray as y,isString as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AntdLineCommonConfig-8-wFweE8.js","assets/index-AnGvN2i1.js","assets/index-k5NwcpoD.css","assets/LCGUI-myOdFqK5.js","assets/mobxreact.esm-Bs6BHgzT.js","assets/ObjectUtil-dSQYWY1O.js","assets/AntdIcon-PoCzGYsr.js","assets/MonacoEditor-UjgAnvCY.js","assets/MonacoEditor-prUb3zzj.css","assets/Accordion-ssKtHro7.js","assets/Switch-3B4Sd6aL.js","assets/UIContainer-rjd2PosK.js","assets/index-apReSwS8.js","assets/QuestionCircleOutlined-gF1WDF51.js","assets/UIContainer-2wM5o6qv.css","assets/Switch-sX9zyvHK.css","assets/RightOutlined-9Q6vRlBe.js","assets/Accordion-i35kZnIZ.css","assets/Radio-y-H3t4-e.js","assets/Radio-scZDuxp-.css","assets/ColorPicker-IzKjYEBO.js","assets/Overflow-Ht49bRMo.js","assets/ColorPicker-V9ASUd98.css","assets/CardPanel-pAVw3vrc.js","assets/CardPanel-8U9SL0-G.css","assets/Input-o-bDlRtT.js","assets/Input-kjLITG7W.css","assets/Grid-T7Ta9Pvg.js","assets/Grid-p4FjUlc6.css","assets/Button-MoQkZLqZ.js","assets/Button-Vi-JaWc8.css","assets/AntdScatterCommonConfig-k7pbCd-z.js","assets/AntdBaseAreaConfig-Zw_XeZmE.js","assets/AntdGaugeConfig-c1hh3SM0.js","assets/AntdBaseLineConfig-8GRpywLB.js","assets/AntdStepLineConfig-hx5qO748.js","assets/AntdLiquidConfig-lyh2pNsP.js","assets/AntdPieStyleConfig-SSzKtAXL.js","assets/AntdRadarStyleConfig-pb7Ms3r_.js","assets/AntdRingProgressConfig-ftCRuZUY.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}