import{r as j,j as e}from"./index-uVTr4DkP.js";import{U as v}from"./UIContainer-QclyxjV1.js";import{o as P}from"./index-kdYyXKyi.js";import{U as w}from"./LocalOperator-7SvlDKB4.js";import{g as c}from"./GlobalMessage-JdhJioSt.js";import{A,P as I}from"./Plus-qX-9qqto.js";import"./index-M4LYRhyC.js";import"./MainRouter-g_j_Is0t.js";import"./useZIndex-GVasLPt8.js";import"./FetchUtil-Ivd_z0Im.js";import"./CheckOutlined-nvg4YJ5D.js";import"./collapse-aS6vX33V.js";import"./useForceUpdate-nSRhn62x.js";import"./EyeOutlined-Tg_W9365.js";import"./omit-r5LB95NT.js";const q=d=>{const{onChange:o,defaultValue:t,accept:f,size:r,...g}=d,i={uid:"-1",name:"image.png",status:"done"},[s,p]=j.useState(t?[{...i,url:t}]:[]),h=n=>{var l;if(r&&n.size>r*1024*1024)return(l=c.messageApi)==null||l.warning(`文件大小不能超过${r}M`),!1;const{saveType:U}=w.parseUrlParams();return P[U].uploadImage(n).then(m=>{var u;if(!m)(u=c.messageApi)==null||u.error("上传失败");else{const{url:a,hash:x}=m;console.log(a),o&&o({url:a,hash:x}),p([{...i,url:a}])}}),!1};return e.jsx(v,{...g,className:"image-upload",children:e.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:s,accept:f,onRemove:()=>{p([]),o&&o({url:"",hash:""})},onPreview:()=>window.open(s[0].url),children:s.length>0?null:e.jsxs("div",{className:"upload-btn",children:[e.jsx(I,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{q as ImageUpload};
