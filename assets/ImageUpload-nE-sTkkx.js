import{r as j,j as r,g as d}from"./index-AnGvN2i1.js";import{U as v}from"./UIContainer-rjd2PosK.js";import{U as P,o as w}from"./EventOperateStore-mXvGxp-z.js";import{A,P as I}from"./PlusOutlined-P0GdQWRm.js";import"./index-apReSwS8.js";import"./QuestionCircleOutlined-gF1WDF51.js";import"./AntdIcon-PoCzGYsr.js";import"./mobxreact.esm-Bs6BHgzT.js";import"./ObjectUtil-dSQYWY1O.js";import"./MonacoEditor-UjgAnvCY.js";import"./LCGUI-myOdFqK5.js";import"./Accordion-ssKtHro7.js";import"./Switch-3B4Sd6aL.js";import"./RightOutlined-9Q6vRlBe.js";import"./Radio-y-H3t4-e.js";import"./ColorPicker-IzKjYEBO.js";import"./Overflow-Ht49bRMo.js";import"./CardPanel-pAVw3vrc.js";import"./Input-o-bDlRtT.js";import"./Grid-T7Ta9Pvg.js";import"./Button-MoQkZLqZ.js";import"./PlusOutlined-VdblB-UP.js";const K=c=>{const{onChange:e,defaultValue:i,accept:g,size:o,...f}=c,s={uid:"-1",name:"image.png",status:"done"},[t,a]=j.useState(i?[{...s,url:i}]:[]),h=p=>{var m;if(o&&p.size>o*1024*1024)return(m=d.messageApi)==null||m.warning(`文件大小不能超过${o}M`),!1;const{saveType:U}=P.parseUrlParams();return w[U].uploadImage(p).then(n=>{var l;if(!n)(l=d.messageApi)==null||l.error("上传失败");else{const{url:u,hash:x}=n;e&&e({url:u,hash:x}),a([{...s,url:u}])}}),!1};return r.jsx(v,{...f,className:"image-upload",children:r.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:t,accept:g,onRemove:()=>{a([]),e&&e({url:"",hash:""})},onPreview:()=>window.open(t[0].url),children:t.length>0?null:r.jsxs("div",{className:"upload-btn",children:[r.jsx(I,{}),r.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{K as ImageUpload};
