import{r as s}from"./index-BfEWyzAb.js";import{e as h}from"./ViewDesignerLoader-DOY4imTA.js";import{H as m}from"./DesignerPage-BcmwFPRu.js";import"./mobxreact.esm-DlPXlBwO.js";import"./MainRouter-B5MsqwcC.js";import"./zoom-DptOfjG4.js";import"./asyncToGenerator-BwK-PoBO.js";import"./Compact-DpzX4qzh.js";import"./useZIndex-jvd8916L.js";import"./pickAttrs-DOLnfwLO.js";import"./button-COGh-Ntl.js";import"./render-CSpp3gCb.js";import"./NumberInput-B8RVTREX.js";import"./index-D2h4uPFP.js";import"./GlobalMessage-B8A-9qUt.js";import"./FetchUtil-Ds2Z9fRh.js";import"./Overflow-BfdRSfO5.js";import"./index-Cq3rmf-u.js";import"./index-6P79lCOj.js";import"./Input-vfK5BJxB.js";import"./Data-BV7eYUTW.js";import"./collapse-BbEVqHco.js";import"./Button-CotjFEre.js";import"./FontGlobal-DH0JMUO0.js";import"./System-CHxY6wg2.js";import"./ThemeEditor-BSMWH6cd.js";import"./Info-BJKY6MOO.js";const v=["alt","tab","control + s","control + l","control + shift + l","control + h","control + f","control + k","control + 1","control + 2","control + 3","control + 4","control + 5","control + g","control + d","control + shift + g"];function Q(a){const f=s.useRef(a.handlerMapping??{}),e=s.useRef([]),p=s.useRef({}),d=o=>{const r=p.current[o];if(r)return r;{const t=document.querySelector(o);return t?(p.current[o]=t,t):null}},y=(o,r)=>{const{handler:t,triggerType:i=m.SINGLE,range:n}=f.current[r]||{};if(t&&(i===m.SINGLE||i===m.COILED)){const{pointerTarget:g}=h;if(n){const c=d(n);if(!c||!c.contains(g))return}Array.isArray(t)?t.forEach(c=>c(o)):t(o)}},u=o=>{var i;const r=(i=o.key)==null?void 0:i.toLowerCase();if(!r)return;e.current.some(n=>n===r)||e.current.push(r);const t=e.current.join(" + ");v.some(n=>n===t)&&o.preventDefault(),y(o,t)},l=o=>{const r=o.key.toLowerCase();e.current.some(t=>t===r)&&(e.current=e.current.filter(t=>t!==r))};return s.useEffect(()=>(document.addEventListener("keydown",u),document.addEventListener("keyup",l),document.onvisibilitychange=()=>{document.visibilityState==="visible"&&(e.current=[])},window.onfocus=()=>e.current=[],()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",l),document.onvisibilitychange=null,window.onfocus=null}),[]),null}export{Q as default};
