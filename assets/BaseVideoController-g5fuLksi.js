import{A as h,B as p}from"./FontGlobal-I0xzNbJH.js";import{r as i,j as s}from"./index-OsS9UfkW.js";import{C as u}from"./LayerManager-yWnDoBOm.js";import{O as f}from"./ObjectUtil-nMvTrJhh.js";import"./mobxreact.esm-rNVktGB7.js";import"./PreviewOpen-nQ2Iv4_U.js";import"./index-K2O65-hP.js";import"./LocalOperator-BbYzoZ36.js";import"./GlobalMessage-FQtvcjbG.js";import"./MainRouter-Z3gK7D7G.js";import"./useZIndex-g2cfol2D.js";import"./FetchUtil-Ivd_z0Im.js";import"./index-APrWN4Qi.js";const g=i.forwardRef((o,t)=>{var a,c,d,l;const[e,r]=i.useState({...o}),m=i.useRef({});return i.useImperativeHandle(t,()=>({updateConfig:n=>r({...n}),setEventHandler:n=>m.current=n})),s.jsx("div",{style:{width:"100%",height:"100%"},children:(a=e==null?void 0:e.style)!=null&&a.src?s.jsxs("video",{width:"100%",height:"100%",controls:!0,autoPlay:!0,children:[s.jsx("source",{src:(c=e==null?void 0:e.style)==null?void 0:c.src,type:"video/mp4"}),s.jsx("source",{src:(d=e==null?void 0:e.style)==null?void 0:d.src,type:"video/webm"}),s.jsx("source",{src:(l=e==null?void 0:e.style)==null?void 0:l.src,type:"video/ogg"}),"您的浏览器不支持 video 标签。"]}):s.jsx("div",{style:{color:"#9a9a9a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsx("div",{children:"请配置视频连接..."})})})}),v=g;class k extends h{async create(t,e){this.config=e,this.container=t,this.instance=await u.createAndRender(t,v,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(t,e){var r;this.config=f.merge(this.config,t),e=e||{reRender:!0},e.reRender&&((r=this.instance)==null||r.updateConfig(this.config))}updateTheme(t){}registerEvent(){var t,e;if(this.instance){const r=(e=(t=this.config)==null?void 0:t.base)==null?void 0:e.id;this.instance.setEventHandler({click:()=>p.triggerComponentEvent(r,"click",this.config)})}}}export{k as default};
