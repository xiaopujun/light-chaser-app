import{A as g,B as x}from"./FontGlobal-I0xzNbJH.js";import{C as R}from"./LayerManager-yWnDoBOm.js";import{R as C,r as s,j as f}from"./index-OsS9UfkW.js";import{l as v,O as E}from"./ObjectUtil-nMvTrJhh.js";import"./mobxreact.esm-rNVktGB7.js";import"./PreviewOpen-nQ2Iv4_U.js";import"./index-K2O65-hP.js";import"./LocalOperator-BbYzoZ36.js";import"./GlobalMessage-FQtvcjbG.js";import"./MainRouter-Z3gK7D7G.js";import"./useZIndex-g2cfol2D.js";import"./FetchUtil-Ivd_z0Im.js";import"./index-APrWN4Qi.js";const y=C.forwardRef((c,t)=>{var l;const[e,n]=s.useState({...c}),{speed:i,...d}=e.style,u=s.useRef({}),p=s.useRef(null),o=s.useRef(null),a=s.useRef(null);return s.useImperativeHandle(t,()=>({updateConfig:r=>n({...r}),setEventHandler:r=>u.current=r})),s.useEffect(()=>{o.current&&(a.current=new ResizeObserver(v.debounce(r=>{for(const m of r){const{width:h}=m.contentRect;o.current.style.setProperty("--container-width",`${h}px`)}},100)),a.current.observe(o.current))},[]),s.useEffect(()=>{var r;(r=o.current)==null||r.style.setProperty("--speed",`${i||5}s`)},[e]),f.jsx("div",{className:"text-scroller-container",ref:o,children:f.jsx("div",{className:"text-scroller",style:{...d},ref:p,children:(l=e==null?void 0:e.data)==null?void 0:l.staticData})})});class N extends g{async create(t,e){this.config=e,this.container=t,this.instance=await R.createAndRender(t,y,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}changeData(t){var e;this.config.data.staticData=t,(e=this.instance)==null||e.updateConfig(this.config)}update(t,e){var n;this.config=E.merge(this.config,t),e=e||{reRender:!0},e.reRender&&((n=this.instance)==null||n.updateConfig(this.config))}updateTheme(t){}registerEvent(){var e,n,i;const t=(n=(e=this.config)==null?void 0:e.base)==null?void 0:n.id;(i=this.instance)==null||i.setEventHandler({click:()=>x.triggerComponentEvent(t,"click",this.config)})}}export{N as TextScrollerController};
