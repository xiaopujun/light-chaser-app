import{r as j,j as e}from"./index-GgIRiX8R.js";import{U as v}from"./Button-rnRTSJbC.js";import{U as P,o as w}from"./LayerManager-S2EXieq1.js";import{g as c}from"./GlobalMessage-mWsH3gwQ.js";import{A,P as I}from"./PlusOutlined-BMdvnWPI.js";import"./AntdIcon-VOxU8Y5T.js";import"./MainRouter-hXsbV2Mr.js";import"./useZIndex-P8KKfqMZ.js";import"./Dialog-SXVfEtoy.js";import"./Overflow-xN1J9DWZ.js";import"./FetchUtil-ndUM9feu.js";import"./Accordion-AGqLsd51.js";import"./Switch-wPNP9v-y.js";import"./Radio-FoqnTKRW.js";import"./ColorPicker-e3RAA9n0.js";import"./CardPanel-7Nfhc2nH.js";import"./Grid-oyN83WHM.js";import"./useForceUpdate-hlPPRyYB.js";import"./PlusOutlined-VdblB-UP.js";const G=d=>{const{onChange:o,defaultValue:i,accept:g,size:r,...f}=d,a={uid:"-1",name:"image.png",status:"done"},[s,p]=j.useState(i?[{...a,url:i}]:[]),h=m=>{var n;if(r&&m.size>r*1024*1024)return(n=c.messageApi)==null||n.warning(`文件大小不能超过${r}M`),!1;const{saveType:U}=P.parseUrlParams();return w[U].uploadImage(m).then(l=>{var u;if(!l)(u=c.messageApi)==null||u.error("上传失败");else{const{url:t,hash:x}=l;console.log(t),o&&o({url:t,hash:x}),p([{...a,url:t}])}}),!1};return e.jsx(v,{...f,className:"image-upload",children:e.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:s,accept:g,onRemove:()=>{p([]),o&&o({url:"",hash:""})},onPreview:()=>window.open(s[0].url),children:s.length>0?null:e.jsxs("div",{className:"upload-btn",children:[e.jsx(I,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{G as ImageUpload};
