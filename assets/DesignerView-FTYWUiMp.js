import{r as a,j as s,L as $}from"./index--8X3ERCh.js";import{D as z,f as j}from"./EventOperateStore-axzi2N-T.js";import{o as C}from"./mobxreact.esm-M-Jt1EhE.js";import{l as E}from"./ObjectUtil-Q_sH6kav.js";import{l as L}from"./LayerBuilder-pIKseYMk.js";import"./AntdIcon-XkPc6D7I.js";import"./MonacoEditor-eoy4qeDw.js";import"./LCGUI-NUkdrhnQ.js";import"./Accordion-Vqns3gRp.js";import"./Switch-wLC4YXHi.js";import"./UIContainer-CFSq1isU.js";import"./index-q1cTw6o4.js";import"./QuestionCircleOutlined-xlC2lqrD.js";import"./RightOutlined-9Q6vRlBe.js";import"./Radio-ujNLoyj0.js";import"./ColorPicker-0m0NZG9p.js";import"./Overflow-B6v4saUZ.js";import"./CardPanel-46fSVR_f.js";import"./Input-ob89oATZ.js";import"./Grid-plFPd-Do.js";import"./Button-puLvTLa0.js";import"./EyeFilled---Q9Q-wr.js";function D(i){const{width:o,height:c,bodyOverflowHidden:n=!0,delay:h=100}=i;let y;const t=a.useRef(null),[e,S]=a.useState({width:o,height:c,originalHeight:0,originalWidth:0}),b={box:{overflow:"hidden",backgroundSize:"100% 100%",backgroundColor:"#545454",width:"100vw",height:"100vh"},wrapper:{transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms",position:"relative",overflow:"hidden",transformOrigin:"left top"}};let u;function v(){e.width&&e.height?(t.current.style.width=`${e.width}px`,t.current.style.height=`${e.height}px`):(t.current.style.width=`${e.originalWidth}px`,t.current.style.height=`${e.originalHeight}px`)}function H(r){t.current.style.transform=`scale(${r},${r})`;const g=t.current.clientWidth,p=t.current.clientHeight,f=document.body.clientWidth,d=document.body.clientHeight,l=Math.max((f-g*r)/2,0),w=Math.max((d-p*r)/2,0);t.current.style.margin=`${w}px ${l}px`}function x(){const r=document.body.clientWidth,g=document.body.clientHeight,p=e.width||e.originalWidth,f=e.height||e.originalHeight,d=r/+p,l=g/+f;if(i.fullScreen){t.current.style.transform=`scale(${d},${l})`;return}const w=Math.min(d,l);H(w)}const m=E.debounce(()=>{t.current&&(v(),x())},h);function W(){n&&(y=document.body.style.overflow,document.body.style.overflow="hidden"),u=new MutationObserver(()=>m()),u.observe(t.current,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),S({...e,originalWidth:window.screen.width,originalHeight:window.screen.height}),v(),x(),window.addEventListener("resize",m)}return a.useEffect(()=>(W(),()=>{u.disconnect(),window.removeEventListener("resize",m),n&&(document.body.style.overflow=y)}),[]),s.jsx("div",{style:{...b.box,...i.boxStyle},className:"react-screen-box",children:s.jsx("div",{className:"screen-wrapper",style:{...b.wrapper,...i.wrapperStyle},ref:t,children:i.children})})}class O extends a.Component{constructor(o){super(o),z.getLoader().load()}render(){const{loaded:o,canvasConfig:{width:c,height:n},layerConfigs:h}=j;return o?s.jsx(D,{width:c,height:n,children:s.jsx("div",{style:{width:c,height:n,background:"black",overflow:"hidden",position:"relative"},children:L.buildCanvasComponents(h)})}):s.jsx($,{})}}const et=C(O);export{et as default};
