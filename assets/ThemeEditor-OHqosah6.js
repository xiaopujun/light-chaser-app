var T=Object.defineProperty;var C=(e,r,t)=>r in e?T(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var y=(e,r,t)=>C(e,typeof r!="symbol"?r+"":r,t);import{b as j,r as x,j as s}from"./index-CRmipDYU.js";import{aV as w,aJ as k,aL as S,B as L,aW as D}from"./ViewDesignerLoader-2ZaNa5mi.js";import{I as N}from"./index-Di7-uBEQ.js";import{o as R}from"./mobxreact.esm-Dn-2uaKK.js";import{l as g,O as E}from"./NumberInput-DwA_3ebS.js";import{globalMessage as v}from"./GlobalMessage-CFWlAJYU.js";const O=N("close",!1,function(e){return j.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},j.createElement("path",{d:"M8 8L40 40",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),j.createElement("path",{d:"M8 40L40 8",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))});class I extends x.Component{constructor(){super(...arguments);y(this,"onSelected",()=>{const{onSelected:t,id:i="",name:a="",colors:d}=this.props;t&&t({id:i,name:a,colors:d})})}render(){const{colors:t,selected:i=!1,itemStyle:a,name:d,id:h,showOperator:p=!1,onDel:l}=this.props;return s.jsxs("div",{id:h,className:`lc-theme-item ${i?"lc-theme-item-active":""}`,style:a,onClick:this.onSelected,children:[s.jsxs("div",{className:"lc-theme-item-header",children:[s.jsx("div",{className:"lc-theme-item-title",children:d}),p&&s.jsx("div",{className:"lc-theme-item-operators",children:s.jsx("div",{className:"operator-item",onClick:n=>{n.stopPropagation(),l&&l(h||"")},children:s.jsx(O,{})})})]}),s.jsx("div",{className:"lc-theme-item-body",children:Object.keys(this.props.colors).map((n,o)=>s.jsx(w,{disabled:!0,value:t[n]},o))})]})}}const W=R(e=>{const{onSelected:r,showOperator:t,onDel:i}=e,[a,d]=x.useState(""),h=o=>{const{themeConfig:m,updateThemeConfig:u}=k,f=m.filter(c=>c.id!==o);u(f),i&&i(o)},p=o=>{r&&r(o),o.id!==a?d(o.id):d("")},{themeConfig:l}=k,n=[];for(let o=0;o<l.length;o++)n.push(s.jsx(I,{id:l[o].id,selected:l[o].id===a,name:l[o].name,showOperator:t,onDel:h,onSelected:p,colors:l[o].colors},o));return s.jsx("div",{className:"lc-theme-list",style:{width:"100%"},children:n})}),b={id:"",name:"",colors:{main:"#000000",mainText:"#000000",background:"#000000",subText:"#000000",supplementFirst:"#000000",supplementSecond:"#000000"}},G=()=>{const[e,r]=x.useState(g.cloneDeep(k.themeConfig)||[]),[t,i]=x.useState(g.cloneDeep(b)),a=n=>{var m,u,f;if(n==null||n.preventDefault(),t.name===""){(m=v.messageApi)==null||m.warning("请输入主题名称");return}if(t.id===""){e.length>20&&((u=v.messageApi)==null||u.warning("主题数量不能超过20"));for(let c=0;c<e.length;c++)if(e[c].name===t.name){(f=v.messageApi)==null||f.warning("主题名称不能重复");return}t.id=e.length+1+"",e.push({...t})}else{for(let c=0;c<e.length;c++)if(e[c].id===t.id){e[c]={...t};break}t.id=""}r(e),i(g.cloneDeep(b));const{updateThemeConfig:o}=k;o(e)},d=n=>{const o=e.filter(m=>m.id!==n);r(o)},h=n=>{t.id===n.id?i(g.cloneDeep(b)):i(n)},p=n=>{const{dataFragment:o}=n,m={...E.merge(t,o)};i(m)},l=[{type:"card-panel",label:"主题信息",children:[{type:"grid",children:[{key:"name",type:"input",label:"主题名称",value:t.name,reRender:!0}]}]},{type:"card-panel",label:"颜色定义",key:"colors",children:[{type:"grid",config:{columns:2,gridGap:"20px"},children:[{key:"main",type:"color-picker",label:"主体色",value:t.colors.main,config:{showText:!0},reRender:!0},{key:"mainText",type:"color-picker",label:"主文字",value:t.colors.mainText,config:{showText:!0},reRender:!0},{key:"subText",type:"color-picker",label:"副文字",value:t.colors.subText,config:{showText:!0},reRender:!0},{key:"background",type:"color-picker",label:"背景色",value:t.colors.background,config:{showText:!0},reRender:!0},{key:"supplementFirst",type:"color-picker",label:"辅助色1",value:t.colors.supplementFirst,config:{showText:!0},reRender:!0},{key:"supplementSecond",type:"color-picker",label:"辅助色2",value:t.colors.supplementSecond,config:{showText:!0},reRender:!0}]}]}];return s.jsxs("div",{className:"lc-theme-editor",children:[s.jsxs("div",{className:"editor-left",children:[s.jsx(S,{schema:l,onFieldChange:p}),s.jsx("p",{style:{color:"#6e6e6e",fontSize:12},children:"说明：自定义主题色的色值应该保持在同一色系。以确保整体统一的风格。主题色占据主要面积"}),s.jsx("div",{className:"theme-operate-btn",children:s.jsx(L,{onClick:a,children:"添加 / 更新"})})]}),s.jsx("div",{className:"editor-right",children:s.jsx(D,{label:"主题列表",children:s.jsx(W,{showOperator:!0,onSelected:h,onDel:d})})})]})};export{O as C,W as T,G as a};
