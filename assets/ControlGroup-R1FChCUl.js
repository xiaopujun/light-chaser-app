import{r as s,b as v,j as e,L as D}from"./index-iCZTP-IQ.js";import{b6 as x,s as k,b4 as E,O as L}from"./LayerManager-3yuLGPiW.js";import{A as h,_ as i}from"./AntdIcon-zgNTTfGj.js";import{D as P}from"./DeleteFilled-TpY6kVm6.js";import"./Button-jnQH9M57.js";import"./GlobalMessage-WsCOzKv8.js";import"./MainRouter-TLmFUNhG.js";import"./render-RO1Jm6GY.js";import"./AntdIcon-Rd3SO3V6.js";import"./useZIndex-efm0wnDD.js";import"./button-B5djIpAo.js";import"./omit-k9ShT0Nc.js";import"./Compact-oDknFkFq.js";import"./Overflow-hRFeWmQp.js";var $={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};const G=$;var j=function(o,n){return s.createElement(h,i(i({},o),{},{ref:n,icon:G}))};j.displayName="CaretDownFilled";const z=s.forwardRef(j);var U={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"filled"};const A=U;var F=function(o,n){return s.createElement(h,i(i({},o),{},{ref:n,icon:A}))};F.displayName="CaretRightFilled";const B=s.forwardRef(F);var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]},name:"plus-circle",theme:"filled"};const I=H;var b=function(o,n){return s.createElement(h,i(i({},o),{},{ref:n,icon:I}))};b.displayName="PlusCircleFilled";const M=s.forwardRef(b),re=c=>{const{label:o,defaultValue:n=[],template:p,itemName:u}=c,[m,w]=v.useState(!1),N=x.parseSchemaData(p),g={children:[]};n.forEach((a,t)=>{var l;(l=g.children)==null||l.push({type:"accordion",key:t+"",label:(u||"系列")+(t+1),children:[{...x.schemaStructureAssignment(a,k.cloneDeep(p))}]})});const r=s.useRef(n),[d,f]=v.useState(g),R=()=>{var l;const{template:a}=c;if(!a)return;(l=d.children)==null||l.push({type:"accordion",key:r.current.length+"",label:(u||"系列")+(r.current.length+1),children:[a]}),f({...d}),r.current=[...r.current,{...N}];const{onChange:t}=c;t&&t(r.current)},S=()=>{var t;(t=d.children)==null||t.pop(),f({...d}),r.current.pop();const{onChange:a}=c;a&&a(r.current)},y=a=>{const{dataFragment:t}=a,l=Number(Object.keys(t)[0]);r.current[l]=L.merge(r.current[l],t[l]);const{onChange:C}=c;C&&C(r.current)};return e.jsxs("div",{className:"control-group",children:[e.jsxs("div",{className:"control-group-header",children:[e.jsx("div",{className:"cgh-label",children:e.jsx("span",{children:o})}),e.jsxs("div",{className:"cgh-operate",children:[e.jsx("span",{className:"operate-icon",onClick:S,children:e.jsx(P,{})}),e.jsx("span",{className:"operate-icon",onClick:R,children:e.jsx(M,{})}),e.jsx("span",{className:"operate-icon toggle-icon",onClick:()=>w(!m),children:m?e.jsx(z,{}):e.jsx(B,{})})]})]}),m&&e.jsx("div",{className:"control-group-body",style:{display:m?"block":"none"},children:e.jsx(s.Suspense,{fallback:e.jsx(D,{}),children:e.jsx(E,{schema:d,onFieldChange:y})})})]})};export{re as default};
