import{r as j,j as o}from"./index-Vy1Yw5o7.js";import{U as v}from"./UIContainer-Yl49M_pF.js";import{U as P,o as w}from"./LayerManager-GjyFNgYQ.js";import{g as c}from"./GlobalMessage-xEmdGiIb.js";import{A,P as I}from"./PlusOutlined-waRpC5HH.js";import"./AntdIcon-H26mUnTY.js";import"./MainRouter-JVC0j7bk.js";import"./useZIndex-j0u8NYY7.js";import"./QuestionCircleOutlined-QjJiUeOP.js";import"./Dialog-Zv92ba_c.js";import"./Overflow-kXLebS6p.js";import"./Accordion-3459iFJP.js";import"./Switch-JT6W9IDW.js";import"./Radio-WoN3Ah2C.js";import"./ColorPicker-EgERoCQ7.js";import"./CardPanel-WUJ30tpk.js";import"./Input-cgMnXtOp.js";import"./Grid-0zq_maPI.js";import"./Button-TSqYfOPg.js";import"./useForceUpdate-D171fb5-.js";import"./PlusOutlined-VdblB-UP.js";const J=d=>{const{onChange:e,defaultValue:i,accept:g,size:r,...f}=d,a={uid:"-1",name:"image.png",status:"done"},[t,p]=j.useState(i?[{...a,url:i}]:[]),h=m=>{var n;if(r&&m.size>r*1024*1024)return(n=c.messageApi)==null||n.warning(`文件大小不能超过${r}M`),!1;const{saveType:U}=P.parseUrlParams();return w[U].uploadImage(m).then(l=>{var u;if(!l)(u=c.messageApi)==null||u.error("上传失败");else{const{url:s,hash:x}=l;console.log(s),e&&e({url:s,hash:x}),p([{...a,url:s}])}}),!1};return o.jsx(v,{...f,className:"image-upload",children:o.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:t,accept:g,onRemove:()=>{p([]),e&&e({url:"",hash:""})},onPreview:()=>window.open(t[0].url),children:t.length>0?null:o.jsxs("div",{className:"upload-btn",children:[o.jsx(I,{}),o.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{J as ImageUpload};
