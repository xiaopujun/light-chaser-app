var ws=Object.defineProperty;var Ms=(t,e,r)=>e in t?ws(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var dt=(t,e,r)=>(Ms(t,typeof e!="symbol"?e+"":e,r),r);import{r as q,b as Y,j as S,_ as ce,L as Qe,c as Ts}from"./index-uVTr4DkP.js";import{D as Sr,U as nn,P as Vr,S as Is,F as Di}from"./LocalOperator-7SvlDKB4.js";import{o as Ot,m as an,a as me,b as xe,t as ki}from"./LCGUI-Ssa8gIoP.js";import{a as ee,e as it,D as Jn,b as Os,f as zs,l as K,g as Ne,r as Qt,h as Pt,i as Oe,O as ue,s as Ls,p as Ps,m as nt,j as Qn,k as vr,n as kt,o as Mt,t as pt,q as vt,u as Ga,v as _e,w as gr,x as re,y as Ri,z as zt,A as Te,B as wi,C as Nt,E as Ye,F as Er,G as tr,H as js,I as yt,J as hr,K as Mi,L as se,M as It,N as wt,P as Ie,Q as Ti,R as Ii,T as _s,U as ze,V as mr,W as Oi,X as zi,Y as Bs,Z as ye,_ as Gs,$ as As,a0 as De,a1 as ta,a2 as Li,a3 as Dr,a4 as Ns,a5 as qr,a6 as Le,a7 as ar,a8 as ea,a9 as Ws,aa as Vs,ab as Hs,ac as Fs,ad as Pi,ae as qs,af as Aa,ag as xr,ah as ra,ai as Ys,aj as Xs,ak as Na,al as Us,am as $s,an as Ks,ao as Zs,ap as yr,aq as na,ar as ie,as as Ee,at as aa,au as ia,av as Js,aw as Wa,ax as Qs,ay as tl,az as Va,aA as ne,aB as el,d as on,aC as Yr,aD as ji,c as Et,aE as sn,aF as rl,aG as nl,aH as Ir}from"./LayerManager-4wFtoUMN.js";import{S as al}from"./System-pYXQSDsU.js";import{u as il,c as ol,I as Wt,T as zn}from"./index-M4LYRhyC.js";import{C as ln,D as be}from"./Dialog-Jl5m87zi.js";import{l as _i,r as sl,c as cn}from"./FontGlobal-xcXzFch0.js";import{Grid as oa}from"./Grid-oNz44FEP.js";import Xr from"./Input-9780NKUC.js";import{M as ll}from"./MonacoEditor-sSMvmeEj.js";import le from"./Button-7AqZH3Ej.js";import{P as cl,A as ul}from"./Plus-qX-9qqto.js";import{E as Bi,g as Kt}from"./GlobalMessage-JdhJioSt.js";import{u as fl,C as sa,d as dl,c as la}from"./MainRouter-g_j_Is0t.js";import{g as pl,K as vl}from"./useZIndex-GVasLPt8.js";import{o as gl}from"./omit-r5LB95NT.js";import{g as Ha,P as hl,a as ml}from"./index-ukWxjxRQ.js";import{B as Gi,c as Ai}from"./EyeOutlined-Tg_W9365.js";import{u as xl}from"./CheckOutlined-nvg4YJ5D.js";import{H as yl,O as bl,l as Xe}from"./UIContainer-QclyxjV1.js";import{I as Cl}from"./Info-C4FehWbX.js";import{o as Ni}from"./index-kdYyXKyi.js";import Sl from"./Switch-QMPoZeAy.js";import Or from"./NumberInput-NcCS6SvK.js";import Wi from"./Select-_cu9XWlQ.js";import El from"./Radio-sQVTRydY.js";import{T as Dl,a as kl}from"./ThemeEditor-3B7v3kji.js";function Fa(t){return!!(t&&t.then)}const Rl=t=>{const{type:e,children:r,prefixCls:n,buttonProps:a,close:i,autoFocus:o,emitEvent:s,isSilent:l,quitOnNullishReturnValue:c,actionFn:u}=t,f=q.useRef(!1),d=q.useRef(null),[p,v]=fl(!1),g=function(){i==null||i.apply(void 0,arguments)};q.useEffect(()=>{let x=null;return o&&(x=setTimeout(()=>{var y;(y=d.current)===null||y===void 0||y.focus()})),()=>{x&&clearTimeout(x)}},[]);const h=x=>{Fa(x)&&(v(!0),x.then(function(){v(!1,!0),g.apply(void 0,arguments),f.current=!1},y=>{if(v(!1,!0),f.current=!1,!(l!=null&&l()))return Promise.reject(y)}))},m=x=>{if(f.current)return;if(f.current=!0,!u){g();return}let y;if(s){if(y=u(x),c&&!Fa(y)){f.current=!1,g(x);return}}else if(u.length)y=u(i),f.current=!1;else if(y=u(),!y){g();return}h(y)};return q.createElement(Gi,Object.assign({},Ai(e),{onClick:m,loading:p,prefixCls:n},a,{ref:d}),r)},wl=Rl,Ml=t=>{const{componentCls:e,iconCls:r,antCls:n,zIndexPopup:a,colorText:i,colorWarning:o,marginXXS:s,marginXS:l,fontSize:c,fontWeightStrong:u,colorTextHeading:f}=t;return{[e]:{zIndex:a,[`&${n}-popover`]:{fontSize:c},[`${e}-message`]:{marginBottom:l,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e}-message-icon ${r}`]:{color:o,fontSize:c,lineHeight:1,marginInlineEnd:l},[`${e}-title`]:{fontWeight:u,color:f,"&:only-child":{fontWeight:"normal"}},[`${e}-description`]:{marginTop:s,color:i}},[`${e}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:l}}}}},Tl=t=>{const{zIndexPopupBase:e}=t;return{zIndexPopup:e+60}},Vi=pl("Popconfirm",t=>Ml(t),Tl,{resetStyle:!1});var Il=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const Hi=t=>{const{prefixCls:e,okButtonProps:r,cancelButtonProps:n,title:a,description:i,cancelText:o,okText:s,okType:l="primary",icon:c=q.createElement(Bi,null),showCancel:u=!0,close:f,onConfirm:d,onCancel:p,onPopupClick:v}=t,{getPrefixCls:g}=q.useContext(sa),[h]=xl("Popconfirm",dl.Popconfirm),m=Ha(a),x=Ha(i);return q.createElement("div",{className:`${e}-inner-content`,onClick:v},q.createElement("div",{className:`${e}-message`},c&&q.createElement("span",{className:`${e}-message-icon`},c),q.createElement("div",{className:`${e}-message-text`},m&&q.createElement("div",{className:la(`${e}-title`)},m),x&&q.createElement("div",{className:`${e}-description`},x))),q.createElement("div",{className:`${e}-buttons`},u&&q.createElement(Gi,Object.assign({onClick:p,size:"small"},n),o??(h==null?void 0:h.cancelText)),q.createElement(wl,{buttonProps:Object.assign(Object.assign({size:"small"},Ai(l)),r),actionFn:d,close:f,prefixCls:g("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},s??(h==null?void 0:h.okText))))},Ol=t=>{const{prefixCls:e,placement:r,className:n,style:a}=t,i=Il(t,["prefixCls","placement","className","style"]),{getPrefixCls:o}=q.useContext(sa),s=o("popconfirm",e),[l]=Vi(s);return l(q.createElement(hl,{placement:r,className:la(s,n),style:a,content:q.createElement(Hi,Object.assign({prefixCls:s},i))}))},zl=Ol;var Ll=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const Fi=q.forwardRef((t,e)=>{var r,n;const{prefixCls:a,placement:i="top",trigger:o="click",okType:s="primary",icon:l=q.createElement(Bi,null),children:c,overlayClassName:u,onOpenChange:f,onVisibleChange:d}=t,p=Ll(t,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:v}=q.useContext(sa),[g,h]=il(!1,{value:(r=t.open)!==null&&r!==void 0?r:t.visible,defaultValue:(n=t.defaultOpen)!==null&&n!==void 0?n:t.defaultVisible}),m=(M,z)=>{h(M,!0),d==null||d(M),f==null||f(M,z)},x=M=>{m(!1,M)},y=M=>{var z;return(z=t.onConfirm)===null||z===void 0?void 0:z.call(void 0,M)},C=M=>{var z;m(!1,M),(z=t.onCancel)===null||z===void 0||z.call(void 0,M)},D=M=>{M.keyCode===vl.ESC&&g&&m(!1,M)},b=M=>{const{disabled:z=!1}=t;z||m(M)},E=v("popconfirm",a),k=la(E,u),[T]=Vi(E);return T(q.createElement(ml,Object.assign({},gl(p,["title"]),{trigger:o,placement:i,onOpenChange:b,open:g,ref:e,overlayClassName:k,content:q.createElement(Hi,Object.assign({okType:s,icon:l},t,{prefixCls:E,close:x,onConfirm:y,onCancel:C})),"data-popover-inject":!0}),ol(c,{onKeyDown:M=>{var z,O;q.isValidElement(c)&&((O=c==null?void 0:(z=c.props).onKeyDown)===null||O===void 0||O.call(z,M)),D(M)}})))});Fi._InternalPanelDoNotUseOrYouWillBeFired=zl;const Pl=Fi,jl=Wt("afferent-four",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M21 5L10 5C8.89543 5 8 5.89543 8 7L8 41C8 42.1046 8.89543 43 10 43L38 43C39.1046 43 40 42.1046 40 41L40 24.75",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M33 24H21V12",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M21.0001 23.9998L39 6",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),_l=Wt("connect",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C10.2091 12 12 10.2091 12 8C12 5.79086 10.2091 4 8 4C5.79086 4 4 5.79086 4 8C4 10.2091 5.79086 12 8 12Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 42C13.3137 42 16 39.3137 16 36C16 32.6863 13.3137 30 10 30C6.68629 30 4 32.6863 4 36C4 39.3137 6.68629 42 10 42Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38 44C41.3137 44 44 41.3137 44 38C44 34.6863 41.3137 32 38 32C34.6863 32 32 34.6863 32 38C32 41.3137 34.6863 44 38 44Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 28C26.4183 28 30 24.4183 30 20C30 15.5817 26.4183 12 22 12C17.5817 12 14 15.5817 14 20C14 24.4183 17.5817 28 22 28Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34 12C36.2091 12 38 10.2091 38 8C38 5.79086 36.2091 4 34 4C31.7909 4 30 5.79086 30 8C30 10.2091 31.7909 12 34 12Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M11 11L15 15",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M30 12L28 14",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M34 33.5L28 26",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M14 31L18 27",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Bl=Wt("connection-point-two",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M36 8L13 8C10 8 4 10 4 16C4 22 10 24 13 24H35C38 24 44 26 44 32C44 38 38 40 35 40H12",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M40 12C42.2091 12 44 10.2091 44 8C44 5.79086 42.2091 4 40 4C37.7909 4 36 5.79086 36 8C36 10.2091 37.7909 12 40 12Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M8 44C10.2091 44 12 42.2091 12 40C12 37.7909 10.2091 36 8 36C5.79086 36 4 37.7909 4 40C4 42.2091 5.79086 44 8 44Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),Gl=Wt("efferent-four",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M20 5L10 5C8.89543 5 8 5.89543 8 7L8 41C8 42.1046 8.89543 43 10 43L38 43C39.1046 43 40 42.1046 40 41L40 24.75",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M28 5H40V17",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M21.0001 23.9998L39 6",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Al=Wt("eyes",!1,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 41C33.9411 41 42 32.678 42 27C42 21.322 33.9411 13 24 13C14.0589 13 6 21.3278 6 27C6 32.6722 14.0589 41 24 41Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M24 33C27.3137 33 30 30.3137 30 27C30 23.6863 27.3137 21 24 21C20.6863 21 18 23.6863 18 27C18 30.3137 20.6863 33 24 33Z",fill:t.colors[3],stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M13.2637 11.2661L15.8582 14.8863",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap}),Y.createElement("path",{d:"M35.625 11.7104L33.0304 15.3307",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap}),Y.createElement("path",{d:"M24.0088 7V13",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap}))}),Nl=Wt("filter",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M6 9L20.4 25.8178V38.4444L27.6 42V25.8178L42 9H6Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),Wl=Wt("hard-disk-one",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z",stroke:t.colors[0],strokeWidth:t.strokeWidth}),Y.createElement("path",{d:"M32 6H16V16H32V6Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M17 36H31",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Vl=Wt("keyboard",!1,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 19C16.3807 19 17.5 17.8807 17.5 16.5C17.5 15.1193 16.3807 14 15 14C13.6193 14 12.5 15.1193 12.5 16.5C12.5 17.8807 13.6193 19 15 19Z",fill:t.colors[2]}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 27C16.3807 27 17.5 25.8807 17.5 24.5C17.5 23.1193 16.3807 22 15 22C13.6193 22 12.5 23.1193 12.5 24.5C12.5 25.8807 13.6193 27 15 27Z",fill:t.colors[2]}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 19C25.3807 19 26.5 17.8807 26.5 16.5C26.5 15.1193 25.3807 14 24 14C22.6193 14 21.5 15.1193 21.5 16.5C21.5 17.8807 22.6193 19 24 19Z",fill:t.colors[2]}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 27C25.3807 27 26.5 25.8807 26.5 24.5C26.5 23.1193 25.3807 22 24 22C22.6193 22 21.5 23.1193 21.5 24.5C21.5 25.8807 22.6193 27 24 27Z",fill:t.colors[2]}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33 19C34.3807 19 35.5 17.8807 35.5 16.5C35.5 15.1193 34.3807 14 33 14C31.6193 14 30.5 15.1193 30.5 16.5C30.5 17.8807 31.6193 19 33 19Z",fill:t.colors[2]}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33 27C34.3807 27 35.5 25.8807 35.5 24.5C35.5 23.1193 34.3807 22 33 22C31.6193 22 30.5 23.1193 30.5 24.5C30.5 25.8807 31.6193 27 33 27Z",fill:t.colors[2]}),Y.createElement("path",{d:"M17 33H31",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Hl=Wt("layers",!1,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M4 11.9143L24 19L44 11.9143L24 5L4 11.9143Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M4 20L24 27L44 20",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M4 28L24 35L44 28",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M4 36L24 43L44 36",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Fl=Wt("lightning",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M19 4H37L26 18H41L17 44L22 25H8L19 4Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),ql=Wt("magnet",!1,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M6 10V26C6 35.9411 14.0589 44 24 44C33.9411 44 42 35.9411 42 26V10M14 10V26C14 31.5228 18.4772 36 24 36C29.5228 36 34 31.5228 34 26V10",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M14 4H6V10H14V4Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M34 4H42V10H34V4Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Yl=Wt("material-three",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M9 15V9.56389C9 8.67237 9.08702 8.34908 9.25044 8.02315C9.41385 7.69723 9.65365 7.44144 9.95921 7.26713C10.2648 7.09283 10.5678 7 11.4036 7H36.5964C37.4322 7 37.7352 7.09283 38.0408 7.26713C38.3463 7.44144 38.5862 7.69723 38.7496 8.02315C38.913 8.34908 39 8.67237 39 9.56389V15",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M5 15H43V41H5V15Z",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 26C14.6569 26 16 24.6569 16 23C16 21.3431 14.6569 20 13 20C11.3431 20 10 21.3431 10 23C10 24.6569 11.3431 26 13 26Z",fill:t.colors[0]}),Y.createElement("path",{d:"M5.56934 40.39L15.0004 30L20.0004 34L26.0004 27L42.3941 40.39",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Xl=Wt("page-template",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M23 4H4V26H23V4Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M44 34H4V43H44V34Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M44 4H31V12H44V4Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M44 18H31V26H44V18Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),Ul=Wt("upload-laptop",!0,function(t){return Y.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},Y.createElement("path",{d:"M25 9H11C9.34315 9 8 10.3431 8 12V33H40V24",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M4 33H44V35C44 38.3137 41.3137 41 38 41H10C6.68629 41 4 38.3137 4 35V33Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M37 19L37 7",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),Y.createElement("path",{d:"M32 12L37 7L42 12",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),qa=[{icon:S.jsx(al,{theme:"filled",size:20,strokeWidth:2,strokeLinecap:"square"}),name:"组件库",key:"components"},{icon:S.jsx(_l,{theme:"filled",size:20,strokeWidth:2,strokeLinecap:"square"}),name:"资源库",key:"source-list"},{icon:S.jsx(Nl,{theme:"filled",size:20,strokeWidth:2,strokeLinecap:"square"}),name:"过滤器",key:"filter-list"},{icon:S.jsx(Hl,{theme:"filled",size:20,strokeWidth:2,strokeLinecap:"square"}),name:"图层",key:"layer-list"}],$l=()=>{const t=r=>{if(!r||r==="")return;const{setMenu:n}=ee;n(r);const{rulerRef:a}=it;a&&a.ruleWheel()},e=()=>{const{menu:r}=ee,n=[];for(let a=0;a<qa.length;a++){const{icon:i,name:o,key:s}=qa[a];n.push(S.jsxs("div",{className:`menu-item ${s===r?"menu-item-active":""}`,onClick:()=>t(s),children:[S.jsx("div",{className:"menu-item-icon",children:i}),S.jsx("span",{className:"menu-item-content",children:o})]},a+""))}return n};return S.jsx("div",{className:"designer-left-menus",style:{overflowY:"scroll"},children:e()})},Kl=Ot($l);class Zl{constructor(){dt(this,"compInfoArr",[]);dt(this,"categories","all");dt(this,"subCategories","all");dt(this,"search","");dt(this,"setCategories",e=>this.categories=e);dt(this,"setSubCategories",e=>this.subCategories=e);dt(this,"setSearch",e=>this.search=e);dt(this,"doInit",()=>{const e=[],{definitionMap:r}=Jn.getLoader(Sr.EDIT);r&&Object.keys(r).forEach(n=>{const a=r[n].getBaseInfo();a.compKey!=="group"&&e.push(a)}),this.compInfoArr=e});an(this,{categories:me,subCategories:me,search:me,setCategories:xe,setSubCategories:xe,setSearch:xe})}}const qi=new Zl,Jl=q.lazy(()=>ce(()=>import("./CompList-7aOsxhvy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]))),Ql=Ot(()=>{const{categories:t,setCategories:e,setSubCategories:r}=qi;return S.jsx(S.Fragment,{children:Os.map((n,a)=>{const{icon:i,name:o,key:s}=n,l=i;return S.jsx(zn,{className:`clo-item ${t===s?"clo-item-active":""}`,placement:"right",title:o,children:S.jsx(l,{theme:"outline",strokeWidth:4,onClick:()=>{e(s),r("all")}})},a)})})}),tc=Ot(()=>{const{categories:t,subCategories:e,setSubCategories:r}=qi;return S.jsx(S.Fragment,{children:zs.map((n,a)=>{const{name:i,key:o,parentKey:s}=n;if(t==="all"||o==="all"||s===t)return S.jsx("div",{onClick:()=>r(o),className:`clt-item ${e===o?" clt-item-active":""}`,children:i},a)})})}),ec=()=>S.jsxs("div",{className:"dl-component-list",children:[S.jsxs("div",{className:"dl-cl-header",children:[S.jsx("div",{className:"dl-cl-header-title",children:"组件列表"}),S.jsx("div",{className:"dl-cl-header-operate",children:S.jsx(ln,{style:{cursor:"pointer"},onClick:()=>{const{setMenu:t}=ee;t("");const{rulerRef:e}=it;e==null||e.ruleWheel()}})})]}),S.jsx("div",{className:"dl-cl-body",children:S.jsxs(q.Suspense,{fallback:S.jsx(Qe,{}),children:[S.jsx("div",{className:"main-categories",children:S.jsx(Ql,{})}),S.jsx("div",{className:"sub-categories",children:S.jsx(tc,{})}),S.jsx("div",{className:"component-list",children:S.jsx(Jl,{})})]})})]});class rc extends q.Component{constructor(){super(...arguments);dt(this,"layerListRef",null);dt(this,"layerItemsContainerRef",null);dt(this,"cancelSelected",r=>{var n;if(this.layerListRef&&this.layerListRef.contains(r.target)&&!((n=this.layerItemsContainerRef)!=null&&n.contains(r.target))){const{setTargetIds:a,targetIds:i}=it;i.length>0&&a([])}});dt(this,"buildLayerList",()=>{const{layerConfigs:r}=K;return _i.buildLayerList(r)})}componentDidMount(){var r;(r=this.layerListRef)==null||r.addEventListener("click",this.cancelSelected)}componentWillUnmount(){var r;(r=this.layerListRef)==null||r.removeEventListener("click",this.cancelSelected)}render(){return S.jsxs("div",{className:"layer-list",ref:r=>this.layerListRef=r,children:[S.jsxs("div",{className:"dl-ll-header",children:[S.jsx("div",{className:"dl-ll-header-title",children:"图层列表"}),S.jsx("div",{className:"dl-ll-header-operate",children:S.jsx(ln,{style:{cursor:"pointer"},onClick:()=>{const{setMenu:r}=ee;r("");const{rulerRef:n}=it;n==null||n.ruleWheel()}})})]}),S.jsx("div",{className:"layer-items",children:S.jsx("div",{ref:r=>this.layerItemsContainerRef=r,children:this.buildLayerList()})})]})}}const nc=Ot(rc),ac=q.lazy(()=>ce(()=>import("./ImageSource-_925WT-0.js"),__vite__mapDeps([60,1,2,11,5,6,7,8,9,12,21,10,4,3,13,14,15,16,17,18,19,20,22,25,27,28,26,29,30,31,32,33,23,24,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,61])));function ic(){return S.jsxs("div",{className:"source-library",children:[S.jsx("div",{className:"source-categorize",children:S.jsx("div",{className:"categorize-item",children:"图片"})}),S.jsx("div",{className:"source-library-content",children:S.jsx(q.Suspense,{fallback:S.jsx(Qe,{}),children:S.jsx(ac,{})})})]})}const oc=Ot(()=>{const{setVisibility:t,addFilter:e,updateFilter:r}=Ne,n=q.useRef(Ne.editFilter),a=()=>{n.current.id?r(n.current):e(n.current),t(!1)};return S.jsxs(be,{title:"新增过滤器",visible:!0,width:600,className:"add-filter-dialog",onClose:()=>Ne.setVisibility(!1),children:[S.jsxs(oa,{children:[S.jsx(Xr,{label:"名称",defaultValue:n.current.name,onChange:i=>n.current.name=i}),S.jsxs("code",{className:"code-start",children:[S.jsx("span",{style:{color:"#569cd6"},children:"function"})," filter",S.jsx("span",{style:{color:"#ffd700"},children:"("}),S.jsx("span",{style:{color:"#8c8c8c"},children:"data"}),S.jsxs("span",{style:{color:"#ffd700"},children:[") ","{"]})]}),S.jsx(ll,{defaultValue:n.current.func,language:"javascript",onChange:i=>n.current.func=i,height:400}),S.jsx("code",{style:{color:"#ffd700"},children:"}"})]}),S.jsxs("div",{className:"add-filter-dialog-footer",children:[S.jsx(le,{onClick:a,children:"保存"}),"  ",S.jsx(le,{onClick:()=>Ne.setVisibility(!1),children:"取消"})]})]})}),sc=Ot(()=>{const{filters:t,setEditFilter:e,delFilter:r,setVisibility:n}=Ne;return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"dl-filter-list",children:[S.jsxs("div",{className:"dl-fl-header",children:[S.jsx("div",{children:"全局过滤器"}),S.jsxs("div",{className:"oerate-btn",children:[S.jsx(cl,{className:"add",size:16,onClick:()=>n(!0)}),"  ",S.jsx(ln,{className:"close",onClick:()=>{const{setMenu:a}=ee;a("");const{rulerRef:i}=it;i==null||i.ruleWheel()}})]})]}),S.jsx("div",{className:"dl-fl-body",children:Object.values(t).map(a=>S.jsxs("div",{className:"filter-item",children:[S.jsx("div",{className:"filter-name",children:a.name}),S.jsxs("div",{className:"filter-operate",children:[S.jsx("span",{onClick:()=>{e(a),n(!0)},children:"编辑"}),"  ",S.jsx(Pl,{title:"提示信息",icon:S.jsx(yl,{style:{color:"red"}}),description:"删除后无法撤销，确认删除嘛？",onConfirm:()=>r(a.id),okText:"是",cancelText:"否",children:S.jsx("span",{children:"删除"})})]})]},a.id))})]}),Ne.visible&&S.jsx(oc,{})]})}),lc=Ot(()=>{const{menu:t,setDesignerLeftRef:e}=ee,r=q.useRef(null);return q.useEffect(()=>{e(r.current)},[]),S.jsxs("div",{className:"designer-left",ref:r,children:[S.jsx(Kl,{}),t==="components"&&S.jsx(ec,{}),t==="layer-list"&&S.jsx(nc,{}),t==="source-list"&&S.jsx(ic,{}),t==="filter-list"&&S.jsx(sc,{})]})});class cc extends q.Component{constructor(){super(...arguments);dt(this,"menuChange",r=>{const{setActiveMenu:n,setContentVisible:a}=Qt;n&&n(r.currentTarget.id),a&&a(!0)});dt(this,"buildMenuList",()=>{const{menus:r,activeMenu:n}=Qt;return r.length===0?S.jsxs("div",{style:{writingMode:"vertical-rl",color:"#bababa",letterSpacing:"8px",padding:7,fontSize:12},children:[S.jsx(Cl,{theme:"filled",style:{fontSize:16,position:"relative",left:-1,marginBottom:7}}),"双击组件激活..."]}):r.map(a=>{const i=a.icon;return S.jsxs("div",{className:`menu-item ${n===a.key?"menu-item-active":""}`,id:a.key,onClick:this.menuChange,children:[S.jsx("div",{className:"item-icon",children:S.jsx(i,{theme:"filled"})}),S.jsx("div",{className:"item-content",children:a.name})]},a.key)})})}render(){return S.jsx("div",{className:"lc-config-menu",children:S.jsx("div",{className:"menu-list",children:this.buildMenuList()})})}}const uc=Ot(cc),fc=()=>{const t=o=>new Proxy(o,{get(s,l){const c=s[l];return typeof c=="function"&&c.name==="update"?new Proxy(c,{apply(u,f,d){const p=d[0],v=bl.getOriginValue(f.config,d[0]);return Pt.doStyleUpd(p,v),u.apply(f,d)}}):c}}),e=()=>{const{compController:o}=K,{activeMenu:s,activeElem:l}=Qt,c=Jn.getLoader(Sr.EDIT).definitionMap[l.type+""];if(!c)return;const f=c.getMenuToConfigContentMap()[s],d=t(o[l.id+""]);if(f)return S.jsx(q.Suspense,{fallback:S.jsx(Qe,{}),children:S.jsx(f,{controller:d})})},r=()=>{const{setContentVisible:o,setActiveMenu:s}=Qt;o&&o(!1),s&&s("")},{activeMenu:n,menus:a}=Qt;let i="";for(let o=0;o<a.length;o++)if(a[o].key===n){i=a[o].name;break}return S.jsxs("div",{className:"lc-config-panel",children:[S.jsxs("div",{className:"lc-panel-top",children:[S.jsx("div",{className:"panel-title",children:S.jsx("span",{children:i})}),S.jsx("div",{className:"panel-operate",onClick:r,children:S.jsx(ln,{})})]}),S.jsx("div",{className:"lc-panel-content",children:e()})]})},dc=Ot(fc),pc=Ot(()=>{const{visible:t}=Qt;return S.jsxs(S.Fragment,{children:[S.jsx(uc,{}),t&&S.jsx(dc,{})]})}),vc=[{name:"保存项目",windows:"ctrl + s",mac:"ctrl + s"},{name:"复制组件",windows:"ctrl + v",mac:"ctrl + v"},{name:"锁定组件",windows:"ctrl + l",mac:"ctrl + l"},{name:"解锁组件",windows:"ctrl + shift + l",mac:"ctrl + shift + l"},{name:"隐藏组件",windows:"ctrl + h",mac:"ctrl + h"},{name:"开/关辅助边框",windows:"ctrl + k",mac:"ctrl + k"},{name:"图层置顶",windows:"ctrl + up-arrow(方向上键)",mac:"ctrl + up-arrow(方向上键)"},{name:"图层置底",windows:"ctrl + down-arrow(方向下键)",mac:"ctrl + down-arrow(方向下键)"},{name:"图层上移",windows:"alt + up-arrow(方向上键)",mac:"options + up-arrow(方向上键)"},{name:"图层下移",windows:"alt + down-arrow(方向下键)",mac:"options + down-arrow(方向下键)"},{name:"删除组件",windows:"delete",mac:"command + backspace"},{name:"缩放画布",windows:"alt + wheel(鼠标滑轮)",mac:"options + wheel(鼠标滑轮)"},{name:"拖拽画布",windows:"长按鼠标右键",mac:"长按鼠标右键"},{name:"组件上移",windows:"方向上键",mac:"方向上键"},{name:"组件下移",windows:"方向下键",mac:"方向下键"},{name:"组件左移",windows:"方向左键",mac:"方向左键"},{name:"组件右移",windows:"方向右键",mac:"方向右键"},{name:"组件上扩大",windows:"ctrl + shift + 方向上键",mac:"ctrl + shift + 方向上键"},{name:"组件下扩大",windows:"ctrl + shift + 方向下键",mac:"ctrl + shift + 方向下键"},{name:"组件左扩大",windows:"ctrl + shift + 方向左键",mac:"ctrl + shift + 方向左键"},{name:"组件右扩大",windows:"ctrl + shift + 方向右键",mac:"ctrl + shift + 方向右键"},{name:"组件上缩小",windows:"ctrl + alt + 方向上键",mac:"ctrl + options + 方向上键"},{name:"组件下缩小",windows:"ctrl + alt + 方向下键",mac:"ctrl + options + 方向下键"},{name:"组件左缩小",windows:"ctrl + alt + 方向左键",mac:"ctrl + options + 方向左键"},{name:"组件右缩小",windows:"ctrl + alt + 方向右键",mac:"ctrl + options + 方向右键"},{name:"撤销",windows:"ctrl + z",mac:"ctrl + z"},{name:"重做",windows:"ctrl + shift + z",mac:"ctrl + shift + z"},{name:"打开/关闭项目设置",windows:"ctrl + 1",mac:"ctrl + 1"},{name:"打开/关闭画布设置",windows:"ctrl + 2",mac:"ctrl + 2"},{name:"打开/关闭全局主题设置",windows:"ctrl + 3",mac:"ctrl + 3"},{name:"打开/关闭快捷键说明",windows:"ctrl + 4",mac:"ctrl + 4"},{name:"编组",windows:"ctrl + g",mac:"ctrl + g"},{name:"解除编组",windows:"ctrl + shift + g",mac:"ctrl + shift + g"},{name:"从分组中移除",windows:"alt + shift + g",mac:"options + shift + g"},{name:"搜索图层",windows:"ctrl + f",mac:"ctrl + f"}],gc=t=>{const{onClose:e}=t;return S.jsx(be,{title:"快捷键说明",visible:!0,width:800,onClose:e,children:S.jsx("div",{className:"lc-hotkey-des",style:{color:"white"},children:S.jsxs("table",{className:"hotkey-des-table",children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{style:{width:"10%"},children:"编号"}),S.jsx("th",{style:{textAlign:"left"},children:"功能"}),S.jsx("th",{style:{textAlign:"left"},children:"Windows"}),S.jsx("th",{style:{textAlign:"left"},children:"Mac"})]})}),S.jsx("tbody",{children:vc.map((r,n)=>S.jsxs("tr",{children:[S.jsx("td",{children:n+1}),S.jsx("td",{style:{textAlign:"left"},children:r.name}),S.jsx("td",{style:{textAlign:"left"},children:r.windows}),S.jsx("td",{style:{textAlign:"left"},children:r.mac})]},n))})]})})})};class hc{constructor(){dt(this,"hotKeyVisible",!1);dt(this,"snapShotVisible",!1);dt(this,"setHotKeyVisible",e=>this.hotKeyVisible=e);dt(this,"setSnapShotVisible",e=>this.snapShotVisible=e);an(this,{hotKeyVisible:me,snapShotVisible:me,setHotKeyVisible:xe,setSnapShotVisible:xe})}}const Hr=new hc,mc=t=>{const{onClose:e}=t,r=q.useRef(null),n=q.useRef(null),a={uid:"-1",name:"image.png",status:"done"},[i,o]=q.useState([]),s=()=>{var f;if(!n.current){(f=Kt.messageApi)==null||f.warning("请先上传封面");return}const{saveType:u}=nn.parseUrlParams();Ni[u].uploadCover(n.current).then(d=>{var p,v;d?((p=Kt.messageApi)==null||p.info("封面生成成功！"),l()):(v=Kt.messageApi)==null||v.error("封面生成失败！")})},l=()=>{r.current&&(URL.revokeObjectURL(r.current),n.current=null),e()},c=u=>{n.current=u;const f=new FileReader;return f.onload=async d=>{const p=new Blob([d.target.result],{type:u.type}),v=URL.createObjectURL(p);r.current=v,o([{...a,url:v}])},f.readAsArrayBuffer(u),!1};return S.jsx(be,{title:"封面",className:"cover-config",visible:!0,width:500,onClose:l,children:S.jsxs("div",{className:"cover-content",children:[S.jsx("div",{className:"cover-left",children:S.jsx(ul,{name:"file",beforeUpload:c,listType:"picture-card",fileList:i,accept:"image/*",onRemove:()=>o([]),onPreview:()=>window.open(i[0].url),children:i.length>0?null:S.jsxs("div",{className:"upload-btn",children:[S.jsx(Ul,{size:30,strokeWidth:2}),S.jsx("div",{style:{marginTop:8},children:"选择文件上传"})]})})}),S.jsx("div",{className:"cover-right",children:S.jsx(le,{onClick:s,children:"保存"})})]})})},xc=()=>{const[t,e]=q.useState(!1),r=()=>{const{hotKeyVisible:f,setHotKeyVisible:d}=Hr;d(!f)},n=()=>{const{snapShotVisible:f,setSnapShotVisible:d}=Hr;d(!f)},a=()=>{K.setEnableEvent(!t),e(!t)},i=()=>{K.setEnableAdsorption(!K.enableAdsorption)},{layerConfigs:o,enableAdsorption:s}=K,{hotKeyVisible:l,snapShotVisible:c}=Hr,{scale:u}=it;return S.jsxs("div",{className:"lc-designer-footer",children:[S.jsxs("div",{className:"footer-left",children:[S.jsxs("div",{className:"footer-item",onClick:r,children:[S.jsx(Vl,{}),S.jsx("span",{children:"快捷键"})]}),S.jsxs("div",{className:"footer-item",onClick:n,children:[S.jsx(Yl,{}),S.jsx("span",{children:"封面"})]})]}),S.jsxs("div",{className:"footer-center",children:[S.jsx("div",{className:`footer-center-item ${t?"footer-center-item-active":""}`,onClick:a,children:S.jsx(zn,{mouseEnterDelay:1,title:"编辑模式下允许触发组件原生事件",children:S.jsx(Fl,{})})}),S.jsx("div",{className:`footer-center-item ${s?"footer-center-item-active":""}`,onClick:i,children:S.jsx(zn,{mouseEnterDelay:1,title:"开启后排版会有吸附效果",children:S.jsx(ql,{})})})]}),S.jsxs("div",{className:"footer-right",children:[S.jsxs("div",{className:"right-info-item",children:["缩放 : ",(u*100).toFixed(0),"%"]}),S.jsxs("div",{className:"right-info-item",children:["图层 : ",Object.keys(o).length]})]}),l&&S.jsx(gc,{onClose:r}),c&&S.jsx(mc,{onClose:n})]})},yc=Ot(xc);class fe{}class bc extends fe{redo(e){if(!e)return;const{movableRef:r,setBackoff:n,setTargetIds:a}=it,{next:i}=e,o=i;a(o.ids),n(!0),Promise.resolve().then(()=>{r==null||r.request("draggable",{x:o.x,y:o.y},!0)})}undo(e){if(!e)return;const{movableRef:r,setBackoff:n,setTargetIds:a}=it,{prev:i}=e,o=i;a(o.ids),n(!0),Promise.resolve().then(()=>{r==null||r.request("draggable",{x:o.x,y:o.y},!0)})}}const Cc=new bc;class Sc extends fe{redo(e){if(!e)return;const{movableRef:r,setBackoff:n,setTargetIds:a}=it,{next:i}=e,o=i;a(o.ids),n(!0),Promise.resolve().then(()=>{r==null||r.request("resizable",{offsetWidth:o.width,offsetHeight:o.height,direction:o.direction},!0)})}undo(e){if(!e)return;const{movableRef:r,setBackoff:n,setTargetIds:a}=it,{prev:i}=e,o=i;a(o.ids),n(!0),Promise.resolve().then(()=>{r==null||r.request("resizable",{offsetWidth:o.width,offsetHeight:o.height,direction:o.direction},!0)})}}const Ec=new Sc;class Dc extends fe{redo(e){if(!e)return;const{next:r}=e,{addItem:n}=K;r.forEach(a=>{"id"in a&&(n(Xe.cloneDeep(a.layerConfig)),"elemConfig"in a&&(K.elemConfigs[a.id]=Xe.cloneDeep(a.elemConfig))),"layerHeader"in a&&(K.layerHeader=a.layerHeader),"layerTail"in a&&(K.layerTail=a.layerTail)})}undo(e){if(!e)return;const{setTargetIds:r,focusDesignerCanvas:n}=it,{prev:a,next:i}=e,{delItem:o}=K,s=[];i&&i.forEach(f=>s.push(f.id)),o(s),a&&a.forEach(f=>{"layerHeader"in f&&(K.layerHeader=f.layerHeader),"layerTail"in f&&(K.layerTail=f.layerTail)}),r([]);const{setContentVisible:l,activeConfig:c,activeElem:u}=Qt;s.includes(u.id)&&(l(!1),c(null,"")),n()}}const kc=new Dc;class Rc extends fe{redo(e){if(!e)return;const{prev:r,next:n}=e,a=[];r.forEach(c=>{"id"in c&&a.push(c)});const{delItem:i}=K,o=[];a.forEach(c=>o.push(c.id)),i(o),n&&n.forEach(c=>{"layerHeader"in c&&(K.layerHeader=c.layerHeader),"layerTail"in c&&(K.layerTail=c.layerTail)});const{setTargetIds:s,focusDesignerCanvas:l}=it;s([]),l()}undo(e){if(!e)return;const{setTargetIds:r}=it,{prev:n}=e,a=[],i=[];n.forEach(c=>{"id"in c?a.push(c):i.push(c)});const{addItem:o,elemConfigs:s}=K,l=[];a.forEach(c=>{o(Xe.cloneDeep(c.layerConfig)),s[c.id]=c.elemConfig,l.push(c.id)}),i.forEach(c=>{"layerHeader"in c&&(K.layerHeader=c.layerHeader),"layerTail"in c&&(K.layerTail=c.layerTail)}),Promise.resolve().then(()=>r(l)),console.log("del undo",ki(K.layerConfigs),K.layerHeader,K.layerTail)}}const wc=new Rc;class Mc extends fe{redo(e){const{next:r}=e;if(r){const{id:n,data:a}=r,{compController:i}=K,o=i[n];o&&o.update(a);const{visible:s,setContentVisible:l}=Qt;if(s){l(!1);const c=setTimeout(()=>{l(!0),clearTimeout(c)},1)}}}undo(e){const{prev:r}=e;if(r){const{id:n,data:a}=r,{compController:i}=K,o=i[n];o&&o.update(a);const{visible:s,setContentVisible:l}=Qt;if(s){l(!1);const c=setTimeout(()=>{l(!0),clearTimeout(c)},1)}}}}const Tc=new Mc;class Ic extends fe{redo(e){if(!e)return;const{next:r}=e,{updateLayer:n}=K;r&&n(r);const{layerInstances:a}=Oe,{menu:i}=ee;i==="layer-list"&&(r==null||r.forEach(o=>{const{id:s,hide:l}=o;a[s].setState({hide:l})}))}undo(e){if(!e)return;const{prev:r}=e,{updateLayer:n}=K;r&&n(r);const{layerInstances:a}=Oe,{menu:i}=ee;i==="layer-list"&&(r==null||r.forEach(o=>{const{id:s,hide:l}=o;a[s].setState({hide:l})}))}}const Oc=new Ic;class zc extends fe{redo(e){const{next:r}=e,{updateLayer:n}=K;r&&n(r);const{layerInstances:a}=Oe,{menu:i}=ee;i==="layer-list"&&(r==null||r.forEach(o=>{const{id:s,lock:l}=o;a[s].setState({lock:l})}))}undo(e){const{prev:r}=e,{updateLayer:n}=K;r&&n(r);const{layerInstances:a}=Oe,{menu:i}=ee;i==="layer-list"&&(r==null||r.forEach(o=>{const{id:s,lock:l}=o;a[s].setState({lock:l})}))}}const Lc=new zc;class Pc extends fe{redo(e){const{next:r}=e,{updateLayer:n}=K;r&&n(r)}undo(e){const{prev:r}=e,{updateLayer:n}=K;r&&n(r)}}const jc=new Pc;class _c extends fe{redo(e){const{next:r}=e;if(r){const n=[];r.forEach(i=>{"id"in i&&n.push(Xe.cloneDeep(i)),"layerHeader"in i&&(K.layerHeader=i.layerHeader),"layerTail"in i&&(K.layerTail=i.layerTail)});const{updateLayer:a}=K;a(n)}}undo(e){const{prev:r}=e;if(r){const n=[];r.forEach(i=>{"id"in i&&n.push(Xe.cloneDeep(i)),"layerHeader"in i&&(K.layerHeader=i.layerHeader),"layerTail"in i&&(K.layerTail=i.layerTail)});const{updateLayer:a}=K;a(n)}}}const Bc=new _c,Jt=new Map;Jt.set(ue.DRAG,Cc);Jt.set(ue.RESIZE,Ec);Jt.set(ue.ADD,kc);Jt.set(ue.DEL,wc);Jt.set(ue.UPD_STYLE,Tc);Jt.set(ue.HIDE,Oc);Jt.set(ue.LOCK,Lc);Jt.set(ue.ORDER,jc);Jt.set(ue.UPDATE_LAYER,Bc);function ca(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return!0;return!1}function Yi(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return t[n];return null}function Xi(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function ua(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Gc(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Ac(t,e){var r=ua("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return r?r[3]:""}function Ln(t){return t.replace(/_/g,".")}function or(t,e){var r=null,n="-1";return ca(t,function(a){var i=ua("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!i||a.brand?!1:(r=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=Ac(a.versionTest.toLowerCase(),e)||n),n=Ln(n),!0)}),{preset:r,version:n}}function ir(t,e){var r={brand:"",version:"-1"};return ca(t,function(n){var a=Ui(e,n);return a?(r.brand=n.id,r.version=n.versionAlias||a.version,r.version!=="-1"):!1}),r}function Ui(t,e){return Yi(t,function(r){var n=r.brand;return ua(""+e.test,n.toLowerCase())})}var Pn=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],$i=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],jn=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ki=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Zi=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Ji(t){return!!or(Ki,t).preset}function Nc(t){var e=Xi(t),r=!!/mobi/g.exec(e),n={name:"unknown",version:"-1",majorVersion:-1,webview:Ji(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=or(Pn,e),o=i.preset,s=i.version,l=or(Zi,e),c=l.preset,u=l.version,f=or($i,e);if(n.chromium=!!f.preset,n.chromiumVersion=f.version,!n.chromium){var d=or(jn,e);n.webkit=!!d.preset,n.webkitVersion=d.version}return c&&(a.name=c.id,a.version=u,a.majorVersion=parseInt(u,10)),o&&(n.name=o.id,n.version=s,n.webview&&a.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:r,isHints:!1}}function Wc(t){var e=navigator.userAgentData,r=(e.uaList||e.brands).slice(),n=t&&t.fullVersionList,a=e.mobile||!1,i=r[0],o=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ir(Ki,r).brand||Ji(Xi())},l={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&ca(jn,function(v){return Ui(r,v)});var c=ir($i,r);if(s.chromium=!!c.brand,s.chromiumVersion=c.version,!s.chromium){var u=ir(jn,r);s.webkit=!!u.brand,s.webkitVersion=u.version}var f=Yi(Zi,function(v){return new RegExp(""+v.test,"g").exec(o)});if(l.name=f?f.id:"",t&&(l.version=t.platformVersion),n&&n.length){var d=ir(Pn,n);s.name=d.brand||s.name,s.version=d.version||s.version}else{var p=ir(Pn,r);s.name=p.brand||s.name,s.version=p.brand&&t?t.uaFullVersion:p.version}return s.webkit&&(l.name=a?"ios":"mac"),l.name==="ios"&&s.webview&&(s.version="-1"),l.version=Ln(l.version),s.version=Ln(s.version),l.majorVersion=parseInt(l.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:l,isMobile:a,isHints:!0}}function Vc(t){return typeof t>"u"&&Gc()?Wc():Nc(t)}var _n=function(){return _n=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_n.apply(this,arguments)};function Hc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function Qi(t,e){var r=Ls(e),n=r.className;return q.forwardRef(function(a,i){var o=a.className,s=o===void 0?"":o;a.cspNonce;var l=Hc(a,["className","cspNonce"]),c=q.useRef();return q.useImperativeHandle(i,function(){return c.current},[]),q.useEffect(function(){var u=r.inject(c.current,{nonce:a.cspNonce});return function(){u.destroy()}},[]),q.createElement(t,_n({ref:c,"data-styled-id":n,className:"".concat(s," ").concat(n)},l))})}var Bn=function(t,e){return Bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Bn(t,e)};function kr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Bn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var R=function(){return R=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},R.apply(this,arguments)};function Fc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function qc(t,e,r,n){var a=arguments.length,i=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function Yc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function A(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function Rr(t,e){return R({events:[],props:[],name:t},e)}var Xc=["n","w","s","e"],fa=["n","w","s","e","nw","ne","sw","se"];function Uc(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function $c(t){var e=Uc(1,t),r=Math.round(t/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}var er=Vc(),to=er.browser.webkit,eo=to&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),ro=er.browser.name,no=parseInt(er.browser.version,10),Kc=ro==="chrome",Zc=er.browser.chromium,Jc=parseInt(er.browser.chromiumVersion,10)||0,Qc=Kc&&no>=109||Zc&&Jc>=109,tu=ro==="firefox",eu=parseInt(er.browser.webkitVersion,10)>=612||no>=15,da="moveable-",ru=fa.map(function(t){var e="",r="",n="center",a="center",i="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(i,";"),a="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",a="top"),t.indexOf("w")>-1&&(r="left: ".concat(i,";"),n="right"),t.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(r).concat(e,`
        transform-origin: `).concat(n," ").concat(a,`;
    }`)}).join(`
`),nu=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(ru,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat($c(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(eo?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),au=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Gn=1e-4,At=1e-7,zr=1e-9,An=Math.pow(10,10),Ya=-An,iu={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},pa={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},ao={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},ou=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function wr(t,e,r,n,a,i){var o,s;i===void 0&&(i="draggable");var l=(s=(o=e.gestos[i])===null||o===void 0?void 0:o.move(r,t.inputEvent))!==null&&s!==void 0?s:{},c=l.originalDatas||l.datas,u=c[i]||(c[i]={});return R(R({},a?qo(e,l):l),{isPinch:!!n,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var Ue=function(){function t(e){var r;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[e]={},r)}return t.prototype.dragStart=function(e,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),R(R({},this.move(e,r.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,r){return this.move([e[0]-this.prevX,e[1]-this.prevY],r)},t.prototype.move=function(e,r){var n,a,i=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],n=e[0],a=e[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+e[0],a=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(i=!0)}return this.prevX=n,this.prevY=a,{type:"drag",clientX:n,clientY:a,inputEvent:r,isFirstDrag:i,isDrag:this.isDrag,distX:n-this.startX,distY:a-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function qe(t,e,r,n){var a=t.length===16,i=a?4:3,o=Ge(t,r,n,i),s=w(o,4),l=w(s[0],2),c=l[0],u=l[1],f=w(s[1],2),d=f[0],p=f[1],v=w(s[2],2),g=v[0],h=v[1],m=w(s[3],2),x=m[0],y=m[1],C=w(Ct(t,e,i),2),D=C[0],b=C[1],E=Math.min(c,d,g,x),k=Math.min(u,p,h,y),T=Math.max(c,d,g,x),M=Math.max(u,p,h,y);c=c-E||0,d=d-E||0,g=g-E||0,x=x-E||0,u=u-k||0,p=p-k||0,h=h-k||0,y=y-k||0,D=D-E||0,b=b-k||0;var z=t[0],O=t[i+1],I=qt(z*O);return{left:E,top:k,right:T,bottom:M,origin:[D,b],pos1:[c,u],pos2:[d,p],pos3:[g,h],pos4:[x,y],direction:I}}function io(t,e){var r=e.clientX,n=e.clientY,a=e.datas,i=t.state,o=i.moveableClientRect,s=i.rootMatrix,l=i.is3d,c=i.pos1,u=o.left,f=o.top,d=l?4:3,p=w(nt(Ze(s,[r-u,n-f],d),c),2),v=p[0],g=p[1],h=w(ae({datas:a,distX:v,distY:g}),2),m=h[0],x=h[1];return[m,x]}function Be(t,e){var r=e.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,l=n.top,c=n.origin,u=n.offsetMatrix,f=n.targetMatrix,d=n.transformOrigin,p=o?4:3;r.is3d=o,r.matrix=a,r.targetMatrix=f,r.beforeMatrix=i,r.offsetMatrix=u,r.transformOrigin=d,r.inverseMatrix=se(a,p),r.inverseBeforeMatrix=se(i,p),r.absoluteOrigin=Ye(vt([s,l],c),p),r.startDragBeforeDist=Nt(r.inverseBeforeMatrix,r.absoluteOrigin,p),r.startDragDist=Nt(r.inverseMatrix,r.absoluteOrigin,p)}function su(t){return qe(t.datas.beforeTransform,[50,50],100,100).direction}function un(t,e,r){var n=e.datas,a=e.originalDatas.beforeRenderable,i=n.transformIndex,o=a.nextTransforms,s=o.length,l=a.nextTransformAppendedIndexes,c=-1;i===-1?(r==="translate"?c=0:r==="rotate"&&(c=vr(o,function(p){return p.match(/scale\(/g)})),c===-1&&(c=o.length),n.transformIndex=c):ye(l,function(p){return p.index===i&&p.functionName===r})?c=i:c=i+l.filter(function(p){return p.index<i}).length;var u=Lf(o,t.state,c),f=u.targetFunction,d=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=u.beforeFunctionTexts,n.afterFunctionTexts=u.afterFunctionTexts,n.beforeTransform=u.beforeFunctionMatrix,n.beforeTransform2=u.beforeFunctionMatrix2,n.targetTansform=u.targetFunctionMatrix,n.afterTransform=u.afterFunctionMatrix,n.afterTransform2=u.afterFunctionMatrix2,n.targetAllTransform=u.allFunctionMatrix,f.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>c&&(n.isAppendTransform=!0,a.nextTransformAppendedIndexes=A(A([],w(l),!1),[{functionName:r,index:c,isAppend:!0}],!1))}function fn(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function lu(t){var e=t.datas,r=t.distX,n=t.distY,a=w(so({datas:e,distX:r,distY:n}),2),i=a[0],o=a[1],s=oo(e,As([i,o],4));return Nt(s,Ye([0,0,0],4),4)}function oo(t,e,r){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,l=r?wt(s,e,4):wt(e,s,4),c=wt(se(r?i:n,4),l,4),u=wt(c,se(r?o:a,4),4);return u}function so(t){var e=t.datas,r=t.distX,n=t.distY,a=e.inverseBeforeMatrix,i=e.is3d,o=e.startDragBeforeDist,s=e.absoluteOrigin,l=i?4:3;return nt(Nt(a,vt(s,[r,n]),l),o)}function ae(t,e){var r=t.datas,n=t.distX,a=t.distY,i=r.inverseBeforeMatrix,o=r.inverseMatrix,s=r.is3d,l=r.startDragBeforeDist,c=r.startDragDist,u=r.absoluteOrigin,f=s?4:3;return nt(Nt(e?i:o,vt(u,[n,a]),f),e?l:c)}function cu(t,e){var r=t.datas,n=t.distX,a=t.distY,i=r.beforeMatrix,o=r.matrix,s=r.is3d,l=r.startDragBeforeDist,c=r.startDragDist,u=r.absoluteOrigin,f=s?4:3;return nt(Nt(e?i:o,vt(e?l:c,[n,a]),f),u)}function uu(t,e,r,n,a,i){return n===void 0&&(n=e),a===void 0&&(a=r),i===void 0&&(i=[0,0]),t?t.map(function(o,s){var l=ra(o),c=l.value,u=l.unit,f=s?a:n,d=s?r:e;if(o==="%"||isNaN(c)){var p=f?i[s]/f:0;return d*p}else if(u!=="%")return c;return d*c/100}):i}function lo(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function fu(t,e){return lo(e).map(function(r){return t[r]})}function Rt(t,e){var r=(e[0]+1)/2,n=(e[1]+1)/2,a=[De(t[0][0],t[1][0],r,1-r),De(t[0][1],t[1][1],r,1-r)],i=[De(t[2][0],t[3][0],r,1-r),De(t[2][1],t[3][1],r,1-r)];return[De(a[0],i[0],n,1-n),De(a[1],i[1],n,1-n)]}function du(t,e,r,n,a,i){var o=Ge(e,r,n,a),s=Rt(o,i),l=t[0]-s[0],c=t[1]-s[1];return[l,c]}function Mr(t,e,r,n){return wt(t,ur(e,n,r),n)}function pu(t,e,r,n){var a=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,s=o?4:3,l;if(_e(r)){var c=e.beforeTransform,u=e.afterTransform;n?l=re(gr(r),4,s):l=re(wt(wt(c,gr([r]),4),u,4),4,s)}else l=r;return Mr(i,l,a,s)}function vu(t,e){var r=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,o=t.targetAllTransform,s=a?4:3;return Mr(n,wt(o||i,na(e,s),s),r,s)}function dn(t,e){var r=rr(e);return{setTransform:function(n,a){a===void 0&&(a=-1),r.startTransforms=zt(n)?n:ze(n),Nn(t,e,a)},setTransformIndex:function(n){Nn(t,e,n)}}}function pn(t,e,r){var n=rr(e),a=n.startTransforms;Nn(t,e,vr(a,function(i){return i.indexOf("".concat(r,"("))===0}))}function Nn(t,e,r){var n=rr(e),a=e.datas;if(a.transformIndex=r,r!==-1){var i=n.startTransforms[r];if(i){var o=t.state,s=mr([i],{"x%":function(l){return l/100*o.offsetWidth},"y%":function(l){return l/100*o.offsetHeight}});a.startValue=s[0].functionValue}}}function va(t,e){var r=rr(t);r.nextTransforms=ze(e)}function rr(t){return t.originalDatas.beforeRenderable}function Ur(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Lr(t){return(Ur(t)||[]).join(" ")}function Pr(t){return rr(t).nextStyle}function co(t,e,r,n,a){va(a,e);var i=Bt.drag(t,wr(a,t.state,r,n,!1)),o=i?i.transform:e;return R(R({transform:e,drag:i},Gt({transform:o},a)),{afterTransform:o})}function ga(t,e,r,n,a,i){var o=pu(t.state,a,e,i),s=mu(t,r,n,o);return s}function uo(t,e,r,n,a,i,o){var s=ga(t,e,r,a,i,o),l=t.state,c=l.left,u=l.top,f=t.props.groupable,d=f?c:0,p=f?u:0,v=nt(n,s);return nt(v,[d,p])}function gu(t,e,r,n,a,i,o){var s=uo(t,e,r,n,a,i,o);return s}function hu(t,e,r){return[e?-1+t[0]/(e/2):0,r?-1+t[1]/(r/2):0]}function mu(t,e,r,n){n===void 0&&(n=t.state.allMatrix);var a=t.state,i=a.width,o=a.height,s=a.is3d,l=s?4:3,c=[i/2*(1+e[0])+r[0],o/2*(1+e[1])+r[1]];return Ct(n,c,l)}function xu(t,e,r){var n=r.fixedDirection,a=r.fixedPosition,i=r.fixedOffset;return uo(t,"rotate(".concat(e,"deg)"),n,a,i,r)}function yu(t,e,r,n,a,i){var o=t.props.groupable,s=t.state,l=s.transformOrigin,c=s.offsetMatrix,u=s.is3d,f=s.width,d=s.height,p=s.left,v=s.top,g=i.fixedDirection,h=i.nextTargetMatrix||s.targetMatrix,m=u?4:3,x=uu(a,e,r,f,d,l),y=o?p:0,C=o?v:0,D=Mr(c,h,x,m),b=du(n,D,e,r,m,g);return nt(b,[y,C])}function bu(t,e){return Rt(Ut(t.state),e)}function Cu(t,e){var r=t.targetGesto,n=t.controlGesto,a;return r!=null&&r.isFlag()&&(a=r.getEventData()[e]),!a&&(n!=null&&n.isFlag())&&(a=n.getEventData()[e]),a||{}}function Su(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Eu(t){var e=t("scale"),r=t("rotate"),n=t("translate"),a=[];return n&&n!=="0px"&&n!=="none"&&a.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&a.push("rotate(".concat(r,")")),e&&e!=="1"&&e!=="none"&&a.push("scale(".concat(e.split(/\s+/).join(","),")")),a}function fo(t,e,r){for(var n=t,a=[],i=aa(t)||Ee(t),o=!r&&t===e||t===i,s=o,l=!1,c=3,u,f,d,p=!1,v=Cr(e,e,!0).offsetParent,g=1;n&&!s;){s=o;var h=Ht(n),m=h("position"),x=Po(n),y=m==="fixed",C=Eu(h),D=tl(bf(x)),b=void 0,E=!1,k=!1,T=0,M=0,z=0,O=0,I={hasTransform:!1,fixedContainer:null};y&&(p=!0,I=kf(n),v=I.fixedContainer);var P=D.length;!l&&(P===16||C.length)&&(l=!0,c=4,Yn(a),d&&(d=re(d,3,4))),l&&P===9&&(D=re(D,3,4));var L=Df(n,t),N=L.tagName,G=L.hasOffset,j=L.isSVG,F=L.origin,W=L.targetOrigin,B=L.offset,Z=w(B,2),J=Z[0],H=Z[1];N==="svg"&&d&&(a.push({type:"target",target:n,matrix:Rf(n,c)}),a.push({type:"offset",target:n,matrix:It(c)}));var X=parseFloat(h("zoom"))||1;if(y)b=I.fixedContainer,E=!0;else{var V=Cr(n,e,!1,!0,h),$=V.offsetZoom;if(b=V.offsetParent,E=V.isEnd,k=V.isStatic,g*=$,(V.isCustomElement||$!==1)&&k)J-=b.offsetLeft,H-=b.offsetTop;else if(tu||Qc){var et=V.parentSlotElement;if(et){for(var ot=b,at=0,tt=0;ot&&Su(ot);)at+=ot.offsetLeft,tt+=ot.offsetTop,ot=ot.offsetParent;J-=at,H-=tt}}}if(to&&!eu&&G&&!j&&k&&(m==="relative"||m==="static")&&(J-=b.offsetLeft,H-=b.offsetTop,o=o||E),y)G&&I.hasTransform&&(z=b.clientLeft,O=b.clientTop);else if(G&&v!==b&&(T=b.clientLeft,M=b.clientTop),G&&b===i){var Q=jo(n,!1);J+=Q[0],H+=Q[1]}if(a.push({type:"target",target:n,matrix:ur(D,c,F)}),C.length&&(a.push({type:"offset",target:n,matrix:It(c)}),a.push({type:"target",target:n,matrix:ur(gr(C),c,F)})),G){var gt=n===t,lt=gt?0:n.scrollLeft,ct=gt?0:n.scrollTop;a.push({type:"offset",target:n,matrix:Le([J-lt+T-z,H-ct+M-O],c)})}else a.push({type:"offset",target:n,origin:F});if(X!==1&&a.push({type:"zoom",target:n,matrix:ur(na([X,X],c),c,[0,0])}),d||(d=D),u||(u=F),f||(f=W),s||y)break;n=b,o=E,(!r||n===i)&&(s=o)}return d||(d=It(c)),u||(u=[0,0]),f||(f=[0,0]),{zoom:g,offsetContainer:v,matrixes:a,targetMatrix:d,transformOrigin:u,targetOrigin:f,is3d:l,hasFixed:p}}var ke=null,Re=null,We=null;function $e(t){t?(window.Map&&(ke=new Map,Re=new Map),We=[]):(ke=null,We=null,Re=null)}function Du(t){var e=Re==null?void 0:Re.get(t);if(e)return e;var r=fr(t,!0);return Re&&Re.set(t,r),r}function ku(t,e){if(We){var r=ye(We,function(a){return a[0][0]==t&&a[0][1]==e});if(r)return r[1]}var n=fo(t,e,!0);return We&&We.push([[t,e],n]),n}function Ht(t){var e=ke==null?void 0:ke.get(t);if(!e){var r=yr(t).getComputedStyle(t);if(!ke)return function(i){return r[i]};e={style:r,cached:{}},ke.set(t,e)}var n=e.cached,a=e.style;return function(i){return i in n||(n[i]=a[i]),n[i]}}function Zt(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][e]=i[s][e]||{},R(R({},r),{isRequestChild:!0,datas:i[s][e],originalDatas:i[s]})})}function Dn(t,e,r,n,a,i,o){var s=!!r.match(/Start$/g),l=!!r.match(/End$/g),c=a.isPinch,u=a.datas,f=Zt(t,e.name,a),d=t.moveables,p=f.map(function(v,g){var h=d[g],m=h.state,x=m.gestos,y=v;if(s)y=new Ue(o).dragStart(n,v);else{if(x[o]||(x[o]=u.childGestos[g]),!x[o])return;y=wr(v,m,n,c,i,o)}var C=e[r](h,R(R({},y),{parentFlag:!0}));return l&&(x[o]=null),C});return s&&(u.childGestos=d.map(function(v){return v.state.gestos[o]})),p}function oe(t,e,r,n,a,i){a===void 0&&(a=function(u,f){return f});var o=!!r.match(/End$/g),s=Zt(t,e.name,n),l=t.moveables,c=s.map(function(u,f){var d=l[f],p=u;p=a(d,u);var v=e[r](d,R(R({},p),{parentFlag:!0}));return v&&i&&i(d,u,v,f),o&&(d.state.gestos={}),v});return c}function $r(t,e,r,n){var a=r.fixedDirection,i=r.fixedPosition,o=n.datas.startPositions||Ut(e.state),s=Rt(o,a),l=w(Nt(ta(-t.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),2),c=l[0],u=l[1];return n.datas.originalX=c,n.datas.originalY=u,n}function po(t,e,r,n){var a=t.getState(),i=a.renderPoses,o=a.rotation,s=a.direction,l=Pe(t.props,e).zoom,c=cr(o/Math.PI*180),u={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;r.forEach(function(v){var g=v.dir;u[g]=!0});var p=qt(s);return r.map(function(v){var g=v.data,h=v.classNames,m=v.dir,x=pa[m];if(!x||!u[m])return null;d[m]=!0;var y=(pt(c,15)+p*ao[m]+720)%180,C={};return tr(g).forEach(function(D){C["data-".concat(D)]=g[D]}),n.createElement("div",R({className:rt.apply(void 0,A(["control","direction",m,e],w(h),!1)),"data-rotation":y,"data-direction":m},C,{key:"direction-".concat(m),style:Qr.apply(void 0,A([o,l],w(x.map(function(D){return i[D]})),!1))}))})}function vo(t,e,r,n){var a=Pe(t.props,r),i=a.renderDirections,o=i===void 0?e:i,s=a.displayAroundControls;if(!o)return[];var l=o===!0?fa:o;return A(A([],w(s?xo(t,n,r,l):[]),!1),w(po(t,r,l.map(function(c){return{data:{},classNames:[],dir:c}}),n)),!1)}function br(t,e,r,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var l=Mt(r,n),c=e?pt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:rt.apply(void 0,A(["line","direction",e?"edge":"",e],w(o),!1)),"data-rotation":c,"data-line-key":i,"data-direction":e,style:lr(r,n,a,l)})}function go(t,e,r,n,a){var i=r===!0?Xc:r;return i.map(function(o,s){var l=w(pa[o],2),c=l[0],u=l[1];if(u!=null)return br(t,o,n[c],n[u],a,"".concat(e,"Edge").concat(s),e)}).filter(Boolean)}function ho(t){return function(e,r){var n=Pe(e.props,t).edge;return n&&(n===!0||n.length)?A(A([],w(go(r,t,n,e.getState().renderPoses,e.props.zoom)),!1),w(Ru(e,t,r)),!1):mo(e,t,r)}}function mo(t,e,r){return vo(t,fa,e,r)}function Ru(t,e,r){return vo(t,["nw","ne","sw","se"],e,r)}function xo(t,e,r,n){var a=t.renderState;a.renderDirectionMap||(a.renderDirectionMap={});var i=t.getState(),o=i.renderPoses,s=i.rotation,l=i.direction,c=a.renderDirectionMap,u=t.props.zoom,f=qt(l),d=s/Math.PI*180;return(n||tr(c)).map(function(p){var v=pa[p];if(!v)return null;var g=(pt(d,15)+f*ao[p]+720)%180,h=["around-control"];return r&&h.push("direction",r),e.createElement("div",{className:rt.apply(void 0,A([],w(h),!1)),"data-rotation":g,"data-direction":p,key:"direction-around-".concat(p),style:Qr.apply(void 0,A([s,u],w(v.map(function(m){return o[m]})),!1))})})}function ha(t,e,r){var n=t||{},a=n.position,i=a===void 0?"client":a,o=n.left,s=o===void 0?-1/0:o,l=n.top,c=l===void 0?-1/0:l,u=n.right,f=u===void 0?1/0:u,d=n.bottom,p=d===void 0?1/0:d,v={position:i,left:s,top:c,right:f,bottom:p};return{vertical:Xa(v,e,!0),horizontal:Xa(v,r,!1)}}function vn(t,e){var r=t.state,n=r.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,l=r.snapOffset,c=l.left,u=l.top,f=l.right,d=l.bottom,p=e||t.props.bounds||{},v=p.position||"client",g=v==="css",h=p.left,m=h===void 0?-1/0:h,x=p.top,y=x===void 0?-1/0:x,C=p.right,D=C===void 0?g?-1/0:1/0:C,b=p.bottom,E=b===void 0?g?-1/0:1/0:b;return g&&(D=i+f-c-D,E=a+d-u-E),{left:m+c-o,right:D+c-o,top:y+u-s,bottom:E+u-s}}function wu(t,e,r){var n=vn(t),a=n.left,i=n.top,o=n.right,s=n.bottom,l=w(r,2),c=l[0],u=l[1],f=w(nt(r,e),2),d=f[0],p=f[1];_(d)<At&&(d=0),_(p)<At&&(p=0);var v=p>0,g=d>0,h={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(d===0&&p===0)return{vertical:h,horizontal:m};if(d===0)v?s<u&&(m.pos=s,m.offset=u-s):i>u&&(m.pos=i,m.offset=u-i);else if(p===0)g?o<c&&(h.pos=o,h.offset=c-o):a>c&&(h.pos=a,h.offset=c-a);else{var x=p/d,y=r[1]-x*c,C=0,D=0,b=!1;g&&o<=c?(C=x*o+y,D=o,b=!0):!g&&c<=a&&(C=x*a+y,D=a,b=!0),b&&(C<i||C>s)&&(b=!1),b||(v&&s<=u?(C=s,D=(C-y)/x,b=!0):!v&&u<=i&&(C=i,D=(C-y)/x,b=!0)),b&&(h.isBound=!0,h.pos=D,h.offset=c-D,m.isBound=!0,m.pos=C,m.offset=u-C)}return{vertical:h,horizontal:m}}function Xa(t,e,r){var n=t[r?"left":"top"],a=t[r?"right":"bottom"],i=Math.min.apply(Math,A([],w(e),!1)),o=Math.max.apply(Math,A([],w(e),!1)),s=[];return n+1>i&&s.push({direction:"start",isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({direction:"end",isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(l,c){return _(c.offset)-_(l.offset)})}function Ua(t,e,r){var n=r?t.map(function(a){return Dr(a,r)}):t;return n.some(function(a){return a[0]<e.left&&_(a[0]-e.left)>.1||a[0]>e.right&&_(a[0]-e.right)>.1||a[1]<e.top&&_(a[1]-e.top)>.1||a[1]>e.bottom&&_(a[1]-e.bottom)>.1})}function Mu(t,e,r){var n=Xt(t),a=Math.sqrt(n*n-e*e)||0;return[a,-a].sort(function(i,o){return _(i-t[r?0:1])-_(o-t[r?0:1])}).map(function(i){return Mt([0,0],r?[i,e]:[e,i])})}function Tu(t,e,r,n,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,o=vn(t),s=o.left,l=o.top,c=o.right,u=o.bottom,f=s-n[0],d=c-n[0],p=l-n[1],v=u-n[1],g={left:f,top:p,right:d,bottom:v};if(!Ua(r,g,0))return[];var h=[];return[[f,0],[d,0],[p,1],[v,1]].forEach(function(m){var x=w(m,2),y=x[0],C=x[1];r.forEach(function(D){var b=Mt([0,0],D);h.push.apply(h,A([],w(Mu(D,y,C).map(function(E){return i+E-b}).filter(function(E){return!Ua(e,g,E)}).map(function(E){return pt(E*180/Math.PI,At)})),!1))})}),h}var Iu=["left","right","center"],Ou=["top","bottom","middle"],$a={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Ce={start:"left",end:"right",center:"center"},Se={start:"top",end:"bottom",center:"middle"};function Ve(){return{left:!1,top:!1,right:!1,bottom:!1}}function nr(t,e){var r=t.props,n=r.snappable,a=r.bounds,i=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,l=r.snapGridWidth,c=r.snapGridHeight,u=t.state,f=u.guidelines,d=u.enableSnap;return!n||!d||e&&n!==!0&&n.indexOf(e)<0?!1:!!(l||c||a||i||f&&f.length||o&&o.length||s&&s.length)}function ma(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function zu(t,e){var r=ma(t),n={};for(var a in r)a in e&&r[a]&&(n[a]=e[a]);return n}function xa(t,e){var r=zu(t,e),n=Ou.filter(function(i){return i in r}),a=Iu.filter(function(i){return i in r});return{horizontalNames:n,verticalNames:a,horizontal:n.map(function(i){return r[i]}),vertical:a.map(function(i){return r[i]})}}function Lu(t,e,r){var n=Ct(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}function Pu(t){var e=w(t,2),r=e[0],n=e[1],a=n[0]-r[0],i=n[1]-r[1];Math.abs(a)<ie&&(a=0),Math.abs(i)<ie&&(i=0);var o=0,s=0,l=0;return a?i?(o=-i/a,s=1,l=o*r[0]-r[1]):(s=1,l=-r[1]):(o=-1,l=r[0]),[o,s,l].map(function(c){return pt(c,ie)})}function gn(t,e,r,n,a,i){n===void 0&&(n=[]),a===void 0&&(a=[]);var o=t.props,s=Of(i,o.snapThreshold,5);return yo(t.state.guidelines,e,r,n,a,s)}function yo(t,e,r,n,a,i){return{vertical:Za(t,"vertical",e,i,n),horizontal:Za(t,"horizontal",r,i,a)}}function ju(t,e,r){var n=w(r,2),a=n[0],i=n[1],o=w(e,2),s=o[0],l=o[1],c=w(nt(r,e),2),u=c[0],f=c[1],d=f>0,p=u>0;u=tn(u),f=tn(f);var v={isSnap:!1,offset:0,pos:0},g={isSnap:!1,offset:0,pos:0};if(u===0&&f===0)return{vertical:v,horizontal:g};var h=gn(t,u?[a]:[],f?[i]:[]),m=h.vertical,x=h.horizontal;m.posInfos.filter(function(N){var G=N.pos;return p?G>=s:G<=s}),x.posInfos.filter(function(N){var G=N.pos;return d?G>=l:G<=l}),m.isSnap=m.posInfos.length>0,x.isSnap=x.posInfos.length>0;var y=Wn(m),C=y.isSnap,D=y.guideline,b=Wn(x),E=b.isSnap,k=b.guideline,T=E?k.pos[1]:0,M=C?D.pos[0]:0;if(u===0)E&&(g.isSnap=!0,g.pos=k.pos[1],g.offset=i-g.pos);else if(f===0)C&&(v.isSnap=!0,v.pos=M,v.offset=a-M);else{var z=f/u,O=r[1]-z*a,I=0,P=0,L=!1;C?(P=M,I=z*P+O,L=!0):E&&(I=T,P=(I-O)/z,L=!0),L&&(v.isSnap=!0,v.pos=P,v.offset=a-P,g.isSnap=!0,g.pos=I,g.offset=i-I)}return{vertical:v,horizontal:g}}function ge(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function Ka(t,e,r){var n=xa(t.props.snapDirections,e),a=gn(t,n.vertical,n.horizontal,n.verticalNames.map(function(s){return ge(s)}),n.horizontalNames.map(function(s){return ge(s)}),r),i=ge(n.horizontalNames[a.horizontal.index]),o=ge(n.verticalNames[a.vertical.index]);return{vertical:R(R({},a.vertical),{direction:o}),horizontal:R(R({},a.horizontal),{direction:i})}}function Wn(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:e,offset:a,dist:i,pos:r.pos,guideline:o}}function Za(t,e,r,n,a){var i,o;if(a===void 0&&(a=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=e==="vertical",l=s?0:1,c=r.map(function(f,d){var p=a[d]||"",v=t.map(function(g){var h=g.pos,m=f-h[l];return{offset:m,dist:_(m),guideline:g,direction:p}}).filter(function(g){var h=g.guideline,m=g.dist,x=h.type;return!(x!==e||m>n)}).sort(function(g,h){return g.dist-h.dist});return{pos:f,index:d,guidelineInfos:v,direction:p}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,d){return f.guidelineInfos[0].dist-d.guidelineInfos[0].dist}),u=c.length>0;return{isSnap:u,index:u?c[0].index:-1,direction:(o=(i=c[0])===null||i===void 0?void 0:i.direction)!==null&&o!==void 0?o:"",posInfos:c}}function _u(t,e,r,n){n===void 0&&(n=1);var a=[];r[0]&&r[1]?a=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,d,p){var v=p[d+1]||p[0];a.push(f),a.push([(f[0]+v[0])/2,(f[1]+v[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],r):(a.push.apply(a,A([],w(fu([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var i=a.map(function(f){return Rt(e,f)}),o=i.map(function(f){return f[0]}),s=i.map(function(f){return f[1]}),l=gn(t,o,s,a.map(function(f){return ge(f[0])}),a.map(function(f){return ge(f[1])}),n),c=ge(a.map(function(f){return f[0]})[l.vertical.index]),u=ge(a.map(function(f){return f[1]})[l.horizontal.index]);return{vertical:R(R({},l.vertical),{direction:c}),horizontal:R(R({},l.horizontal),{direction:u})}}function bo(t,e){var r=_(t.offset),n=_(e.offset);return t.isBound&&e.isBound?n-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-r:t.isSnap?-1:e.isSnap||r<At?1:n<At?-1:r-n}function Kr(t,e){return t.slice().sort(function(r,n){var a=r.sign[e],i=n.sign[e],o=r.offset[e],s=n.offset[e];if(a){if(!i)return-1}else return 1;return bo({isBound:r.isBound,isSnap:r.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Bu(t,e,r){var n=[];if(r)_(e[0])!==1||_(e[1])!==1?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var l=[o*a[0],s*a[1]];e[0]===l[0]&&e[1]===l[1]||n.push([e,l])})})}else if(t[0]){var i=_(e[0])===1?[1]:[1,-1];i.forEach(function(o){n.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var i=_(e[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,e[1]],[-1,s*t[1]]],[[0,e[1]],[0,s*t[1]]],[[1,e[1]],[1,s*t[1]]])})}return n}function Co(t,e){var r=Wa([e[0][0],e[1][0]]),n=Wa([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function ya(t,e){var r=w(e,2),n=r[0],a=r[1],i=a[0]-n[0],o=a[1]-n[1];_(i)<At&&(i=0),_(o)<At&&(o=0);var s,l;if(!i)s=n[0],l=t[0];else if(!o)s=n[1],l=t[1];else{var c=o/i;s=c*(t[0]-n[0])+n[1],l=t[1]}return s-l}function So(t,e,r,n){return n===void 0&&(n=At),t.every(function(a){var i=ya(a,e),o=i<=0;return o===r||_(i)<=n})}function Ja(t,e,r,n,a){return a===void 0&&(a=0),n&&e-a<=t||!n&&t<=r+a?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function Gu(t,e){var r=e.line,n=e.centerSign,a=e.verticalSign,i=e.horizontalSign,o=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,c=s.top,u=s.width,f=s.height,d=[[l,c],[l,c+f]],p=[[l,c],[l+u,c]],v=[[l+u,c],[l+u,c+f]],g=[[l,c+f],[l+u,c+f]];if(So([[l,c],[l+u,c],[l,c+f],[l+u,c+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var h=he(r,o,p,a),m=he(r,o,g,a),x=he(r,o,d,i),y=he(r,o,v,i),C=h.isBound&&m.isBound,D=h.isBound||m.isBound,b=x.isBound&&y.isBound,E=x.isBound||y.isBound,k=Ke(h.offset,m.offset),T=Ke(x.offset,y.offset),M=[0,0],z=!1,O=!1;return _(T)<_(k)?(M=[k,0],z=D,O=C):(M=[0,T],z=E,O=b),{isAllBound:O,isVerticalBound:D,isHorizontalBound:E,isBound:z,offset:M}}function he(t,e,r,n,a,i){var o=w(e,2),s=o[0],l=o[1],c=t[0],u=r[0],f=r[1],d=tn(f[1]-u[1]),p=tn(f[0]-u[0]),v=l,g=s,h=-s/l;if(p){if(!d){if(i&&!v)return{isBound:!1,offset:0};if(g){var C=(u[1]-c[1])/h+c[0];return Ja(C,u[0],f[0],n,a)}else{var x=u[1]-c[1],y=_(x)<=(a||0);return{isBound:y,offset:y?x:0}}}}else{if(i&&!g)return{isBound:!1,offset:0};if(v){var m=h*(u[0]-c[0])+c[1];return Ja(m,u[1],f[1],n,a)}else{var x=u[0]-c[0],y=_(x)<=(a||0);return{isBound:y,offset:y?x:0}}}return{isBound:!1,offset:0}}function Eo(t,e,r){return e.map(function(n){var a=Gu(t,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,l=a.isHorizontalBound,c=n.multiple,u=ae({datas:r,distX:o[0],distY:o[1]}).map(function(f,d){return f*(c[d]?2/c[d]:0)});return{sign:c,isBound:i,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:u}})}function Au(t,e,r){var n,a=ba(t,e,[0,0],!1).map(function(d){return R(R({},d),{multiple:d.multiple.map(function(p){return _(p)*2})})}),i=Eo(t,a,r),o=Kr(i,0),s=Kr(i,1),l=0,c=0,u=o.isVerticalBound||s.isVerticalBound,f=o.isHorizontalBound||s.isHorizontalBound;return(u||f)&&(n=w(cu({datas:r,distX:-o.offset[0],distY:-s.offset[1]}),2),l=n[0],c=n[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:f,offset:c}}}function Nu(t,e){var r=[],n=t[0],a=t[1];return n&&a?r.push([[0,a*2],t,[-n,a]],[[n*2,0],t,[n,-a]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(r.push([[0,a*2],[1,a],[-1,a]]),e&&r.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function ba(t,e,r,n){var a=t.state,i=a.allMatrix,o=a.is3d,s=Ge(i,100,100,o?4:3),l=Rt(s,[0,0]);return Nu(r,n).map(function(c){var u=w(c,3),f=u[0],d=u[1],p=u[2],v=[Rt(s,d),Rt(s,p)],g=Pu(v),h=Co(l,v),m=h.vertical,x=h.horizontal,y=ya(l,v)<=0;return{multiple:f,centerSign:y,verticalSign:m,horizontalSign:x,lineConstants:g,line:[Rt(e,d),Rt(e,p)]}})}function Qa(t,e,r,n){var a=n?t.map(function(i){return Dr(i,n)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=ya(r,i)<=0;return!So(e,i,o)})}function Wu(t){var e=w(t,2),r=e[0],n=e[1],a=n[0]-r[0],i=n[1]-r[1];if(!a)return _(r[0]);if(!i)return _(r[1]);var o=i/a;return _((-o*r[0]+r[1])/Math.sqrt(Math.pow(o,2)+1))}function Vu(t){var e=w(t,2),r=e[0],n=e[1],a=n[0]-r[0],i=n[1]-r[1];if(!a)return[r[0],0];if(!i)return[0,r[1]];var o=i/a,s=-o*r[0]+r[1];return[-s/(o+1/o),s/(o*o+1)]}function Hu(t,e,r,n,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,l=i.top,c=i.width,u=i.height,f=s-n[0],d=s+c-n[0],p=l-n[1],v=l+u-n[1],g=[[f,p],[d,p],[f,v],[d,v]],h=Rt(r,[0,0]);if(!Qa(r,g,h,0))return[];var m=[],x=g.map(function(y){return[Xt(y),Mt([0,0],y)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(y){var C=Mt([0,0],Vu(y)),D=Wu(y);m.push.apply(m,A([],w(x.filter(function(b){var E=w(b,1),k=E[0];return k&&D<=k}).map(function(b){var E=w(b,2),k=E[0],T=E[1],M=Math.acos(k?D/k:0),z=T+M,O=T-M;return[o+z-C,o+O-C]}).reduce(function(b,E){return b.push.apply(b,A([],w(E),!1)),b},[]).filter(function(b){return!Qa(e,g,h,b)}).map(function(b){return pt(b*180/Math.PI,At)})),!1))}),m}function Fu(t){var e=t.props.innerBounds,r=Ve();if(!e)return{boundMap:r,vertical:[],horizontal:[]};var n=t.getRect(),a=n.pos1,i=n.pos2,o=n.pos3,s=n.pos4,l=[a,i,o,s],c=Rt(l,[0,0]),u=e.left,f=e.top,d=e.width,p=e.height,v=[[u,f],[u,f+p]],g=[[u,f],[u+d,f]],h=[[u+d,f],[u+d,f+p]],m=[[u,f+p],[u+d,f+p]],x=ba(t,l,[0,0],!1),y=[],C=[];return x.forEach(function(D){var b=D.line,E=D.lineConstants,k=Co(c,b),T=k.horizontal,M=k.vertical,z=he(b,E,g,M,1,!0),O=he(b,E,m,M,1,!0),I=he(b,E,v,T,1,!0),P=he(b,E,h,T,1,!0);z.isBound&&!r.top&&(y.push(f),r.top=!0),O.isBound&&!r.bottom&&(y.push(f+p),r.bottom=!0),I.isBound&&!r.left&&(C.push(u),r.left=!0),P.isBound&&!r.right&&(C.push(u+d),r.right=!0)}),{boundMap:r,horizontal:y,vertical:C}}function qu(t,e,r,n){var a=e[0]-t[0],i=e[1]-t[1];if(_(a)<ie&&(a=0),_(i)<ie&&(i=0),!a)return n?[0,0]:[0,r];if(!i)return n?[r,0]:[0,0];var o=i/a,s=t[1]-o*t[0];if(n){var l=o*(e[0]+r)+s;return[r,l-e[1]]}else{var c=(e[1]+r-s)/o;return[c-e[0],r]}}function Vn(t,e,r,n,a){var i=qu(t,e,r,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=Te(t,e),s=Te(i,t),l=Te(i,e),c=s>o||l>o,u=w(ae({datas:a,distX:i[0],distY:i[1]}),2),f=u[0],d=u[1];return{offset:[f,d],isOutside:c}}function Zr(t,e){return t.isBound?t.offset:e.isSnap?Wn(e).offset:0}function Yu(t,e,r,n,a){var i=w(e,2),o=i[0],s=i[1],l=w(r,2),c=l[0],u=l[1],f=w(n,2),d=f[0],p=f[1],v=w(a,2),g=v[0],h=v[1],m=-g,x=-h;if(t&&o&&s){m=0,x=0;var y=[];if(c&&u?y.push([0,h],[g,0]):c?y.push([g,0]):u?y.push([0,h]):d&&p?y.push([0,h],[g,0]):d?y.push([g,0]):p&&y.push([0,h]),y.length){y.sort(function(E,k){return Xt(nt([o,s],E))-Xt(nt([o,s],k))});var C=y[0];if(C[0]&&_(o)>ie)m=-C[0],x=s*_(o+m)/_(o)-s;else if(C[1]&&_(s)>ie){var D=s;x=-C[1],m=o*_(s+x)/_(D)-o}if(t&&u&&c)if(_(m)>ie&&_(m)<_(g)){var b=_(g)/_(m);m*=b,x*=b}else if(_(x)>ie&&_(x)<_(h)){var b=_(h)/_(x);m*=b,x*=b}else m=Ke(-g,m),x=Ke(-h,x)}}else m=o||c?-g:0,x=s||u?-h:0;return[m,x]}function Xu(t,e,r,n,a,i){if(!nr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Ea(i.absolutePoses,[e,r]),s=Yt(o),l=s.left,c=s.right,u=s.top,f=s.bottom,d={horizontal:o.map(function(P){return P[1]}),vertical:o.map(function(P){return P[0]})},p=ma(t.props.snapDirections),v=xa(p,{left:l,right:c,top:u,bottom:f,center:(l+c)/2,middle:(u+f)/2}),g=hn(t,a,v,d),h=g.vertical,m=g.horizontal,x=Au(t,o,i),y=x.vertical,C=x.horizontal,D=h.isSnap,b=m.isSnap,E=h.isBound||y.isBound,k=m.isBound||C.isBound,T=Ke(h.offset,y.offset),M=Ke(m.offset,C.offset),z=w(Yu(n,[e,r],[E,k],[D,b],[T,M]),2),O=z[0],I=z[1];return[{isBound:E,isSnap:D,offset:O},{isBound:k,isSnap:b,offset:I}]}function hn(t,e,r,n){n===void 0&&(n=r);var a=ha(vn(t),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:gn(t,r.vertical,r.horizontal),l=s.horizontal,c=s.vertical,u=Zr(i[0],l),f=Zr(o[0],c),d=_(u),p=_(f);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:d,bounds:i,snap:l},vertical:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:p,bounds:o,snap:c}}}function ti(t,e,r,n,a){var i=ha(e,r,n),o=i.horizontal,s=i.vertical,l=yo(t,r,n,[],[],a),c=l.horizontal,u=l.vertical,f=Zr(o[0],c),d=Zr(s[0],u),p=_(f),v=_(d);return{horizontal:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:p,bounds:o,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:v,bounds:s,snap:u}}}function Uu(t,e,r,n){var a=Mt(t,e)/Math.PI*180,i=r.vertical,o=i.isBound,s=i.isSnap,l=i.dist,c=r.horizontal,u=c.isBound,f=c.isSnap,d=c.dist,p=a%180,v=p<3||p>177,g=p>87&&p<93;return d<l&&(o||s&&!g&&(!n||!v))?"vertical":u||f&&!v&&(!n||!g)?"horizontal":""}function $u(t,e,r,n,a,i){return r.map(function(o){var s=w(o,2),l=s[0],c=s[1],u=Rt(e,l),f=Rt(e,c),d=n?Ku(t,u,f,a):hn(t,a,{vertical:[f[0]],horizontal:[f[1]]}),p=d.horizontal,v=p.offset,g=p.isBound,h=p.isSnap,m=d.vertical,x=m.offset,y=m.isBound,C=m.isSnap,D=nt(c,l);if(!x&&!v)return{isBound:y||g,isSnap:C||h,sign:D,offset:[0,0]};var b=Uu(u,f,d,n);if(!b)return{sign:D,isBound:!1,isSnap:!1,offset:[0,0]};var E=b==="vertical",k=[0,0];return!n&&_(c[0])===1&&_(c[1])===1&&l[0]!==c[0]&&l[1]!==c[1]?k=ae({datas:i,distX:-x,distY:-v}):k=Vn(u,f,-(E?x:v),E,i).offset,k=k.map(function(T,M){return T*(D[M]?2/D[M]:0)}),{sign:D,isBound:E?y:g,isSnap:E?C:h,offset:k}})}function ei(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Ku(t,e,r,n){var a=wu(t,e,r),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:ju(t,e,r),l=s.horizontal,c=s.vertical,u=ei(i,l),f=ei(o,c),d=_(u),p=_(f);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:u,dist:d},vertical:{isBound:o.isBound,isSnap:c.isSnap,offset:f,dist:p}}}function Zu(t,e,r,n,a){var i=[-r[0],-r[1]],o=t.state,s=o.width,l=o.height,c=t.props.bounds,u=1/0,f=1/0;if(c){var d=[[r[0],-r[1]],[-r[0],r[1]]],p=c.left,v=p===void 0?-1/0:p,g=c.top,h=g===void 0?-1/0:g,m=c.right,x=m===void 0?1/0:m,y=c.bottom,C=y===void 0?1/0:y;d.forEach(function(D){var b=D[0]!==i[0],E=D[1]!==i[1],k=Rt(e,D),T=Mt(n,k)*360/Math.PI;if(E){var M=k.slice();(_(T-360)<2||_(T-180)<2)&&(M[1]=n[1]);var z=Vn(n,M,(n[1]<k[1]?C:h)-k[1],!1,a),O=w(z.offset,2),I=O[1],P=z.isOutside;isNaN(I)||(f=l+(P?1:-1)*_(I))}if(b){var M=k.slice();(_(T-90)<2||_(T-270)<2)&&(M[0]=n[0]);var L=Vn(n,M,(n[0]<k[0]?x:v)-k[0],!0,a),N=w(L.offset,1),G=N[0],j=L.isOutside;isNaN(G)||(u=s+(j?1:-1)*_(G))}})}return{maxWidth:u,maxHeight:f}}var Bt={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,n=r.hideThrottleDragRotateLine,a=r.throttleDragRotate,i=r.zoom,o=t.getState(),s=o.dragInfo,l=o.beforeOrigin;if(n||!a||!s)return[];var c=s.dist;if(!c[0]&&!c[1])return[];var u=Xt(c),f=Mt(c,[0,0]);return[e.createElement("div",{className:rt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,a=e.parentGesto,i=t.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=a||t.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],Be(t,e),pn(t,e,"translate"),hf(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=st(t,e,R({set:function(u){r.startValue=u}},dn(t,e))),c=n||U(t,"onDragStart",l);return c!==!1?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(t,e){if(e){un(t,e,"translate");var r=e.datas,n=e.parentEvent,a=e.parentFlag,i=e.isPinch,o=e.deltaOffset,s=e.useSnap,l=e.isRequest,c=e.distX,u=e.distY,f=r.isDrag,d=r.prevDist,p=r.prevBeforeDist,v=r.startValue;if(f){o&&(c+=o[0],u+=o[1]);var g=t.props,h=g.parentMoveable,m=n?0:g.throttleDrag||0,x=n?0:g.throttleDragRotate||0,y=0,C=!1,D=!1,b=!1,E=!1;if(!n&&x>0&&(c||u)){var k=g.startDragRotate||0,T=pt(k+Mt([0,0],[c,u])*180/Math.PI,x)-k,M=u*Math.abs(Math.cos((T-90)/180*Math.PI)),z=c*Math.abs(Math.cos(T/180*Math.PI)),O=Xt([z,M]);y=T*Math.PI/180,c=O*Math.cos(y),u=O*Math.sin(y)}if(!i&&!n&&!a){var I=w(Xu(t,c,u,x,!s&&l||o,r),2),P=I[0],L=I[1];C=P.isSnap,D=P.isBound,b=L.isSnap,E=L.isBound;var N=P.offset,G=L.offset;c+=N,u+=G}var j=vt(so({datas:r,distX:c,distY:u}),v),F=vt(lu({datas:r,distX:c,distY:u}),v);Ga(F,At),Ga(j,At),x||(!C&&!D&&(F[0]=pt(F[0],m),j[0]=pt(j[0],m)),!b&&!E&&(F[1]=pt(F[1],m),j[1]=pt(j[1],m)));var W=nt(j,v),B=nt(F,v),Z=nt(B,d),J=nt(W,p);r.prevDist=B,r.prevBeforeDist=W,r.passDelta=Z,r.passDist=B;var H=r.left+W[0],X=r.top+W[1],V=r.right-W[0],$=r.bottom-W[1],et=fn(r,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(B[0],"px, ").concat(B[1],"px)"));if(va(e,et),t.state.dragInfo.dist=n?[0,0]:B,!(!n&&!h&&Z.every(function(gt){return!gt})&&J.some(function(gt){return!gt}))){var ot=t.state,at=ot.width,tt=ot.height,Q=st(t,e,R({transform:et,dist:B,delta:Z,translate:F,beforeDist:W,beforeDelta:J,beforeTranslate:j,left:H,top:X,right:V,bottom:$,width:at,height:tt,isPinch:i},Gt({transform:et},e)));return!n&&U(t,"onDrag",Q),Q}}}},dragAfter:function(t,e){var r=e.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(t,R(R({},e),{deltaOffset:n}))):!1},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var a=Ft(t,e,{});return!r&&U(t,"onDragEnd",a),a}},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var o=Dn(t,this,"dragStart",[n||0,a||0],e,!1,"draggable"),s=R(R({},i),{targets:t.props.targets,events:o}),l=U(t,"onDragGroupStart",s);return r.isDrag=l!==!1,r.isDrag?i:!1},dragGroup:function(t,e){var r=e.datas;if(r.isDrag){var n=this.drag(t,e),a=e.datas.passDelta,i=Dn(t,this,"drag",a,e,!1,"draggable");if(n){var o=R({targets:t.props.targets,events:i},n);return U(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isDrag){this.dragEnd(t,e);var a=Dn(t,this,"dragEnd",[0,0],e,!1,"draggable");return U(t,"onDragGroupEnd",Ft(t,e,{targets:t.props.targets,events:a})),r}},request:function(t){var e={},r=t.getRect(),n=0,a=0,i=!1;return{isControl:!1,requestStart:function(o){return i=o.useSnap,{datas:e,useSnap:i}},request:function(o){return"x"in o?n=o.x-r.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?a=o.y-r.top:"deltaY"in o&&(a+=o.deltaY),{datas:e,distX:n,distY:a,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Do(t,e){var r=Rt(t,e),n=[0,0];return{fixedPosition:r,fixedDirection:e,fixedOffset:n}}function Ju(t,e){var r=t.allMatrix,n=t.is3d,a=t.width,i=t.height,o=n?4:3,s=[a/2*(1+e[0]),i/2*(1+e[1])],l=Ct(r,s,o),c=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:c}}function ko(t,e){var r=t.allMatrix,n=t.is3d,a=t.width,i=t.height,o=n?4:3,s=hu(e,a,i),l=Ct(r,e,o),c=[a?0:e[0],i?0:e[1]];return{fixedPosition:l,fixedDirection:s,fixedOffset:c}}var ri=Ra("resizable"),Hn={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:ho("resizable"),dragControlCondition:ri,viewClassName:ka("resizable"),dragControlStart:function(t,e){var r,n=e.inputEvent,a=e.isPinch,i=e.isGroup,o=e.parentDirection,s=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,f=No(o,a,n,l),d=t.state,p=d.target,v=d.width,g=d.height,h=d.gestos;if(!f||!p||h.resizable)return!1;h.resizable=s||t.controlGesto,!a&&Be(t,e),l.datas={},l.direction=f,l.startOffsetWidth=v,l.startOffsetHeight=g,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&_e(m)?m.split(" "):m,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=(r=e==null?void 0:e.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1];function x(T){l.ratio=T&&isFinite(T)?T:0}l.startPositions=Ut(t.state);function y(T){var M=Do(l.startPositions,T);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function C(T){var M=ko(t.state,T);l.fixedDirection=M.fixedDirection,l.fixedPosition=M.fixedPosition,l.fixedOffset=M.fixedOffset}function D(T){l.minSize=[yt("".concat(T[0]),0)||0,yt("".concat(T[1]),0)||0]}function b(T){var M=[T[0]||1/0,T[1]||1/0];(!hr(M[0])||isFinite(M[0]))&&(M[0]=yt("".concat(M[0]),0)||1/0),(!hr(M[1])||isFinite(M[1]))&&(M[1]=yt("".concat(M[1]),0)||1/0),l.maxSize=M}x(v/g),y(c||[-f[0],-f[1]]),l.setFixedDirection=y,l.setFixedPosition=C,l.setMin=D,l.setMax=b;var E=st(t,e,{direction:f,startRatio:l.ratio,set:function(T){var M=w(T,2),z=M[0],O=M[1];l.startWidth=z,l.startHeight=O},setMin:D,setMax:b,setRatio:x,setFixedDirection:y,setFixedPosition:C,setOrigin:function(T){l.transformOrigin=T},dragStart:Bt.dragStart(t,new Ue().dragStart([0,0],e))}),k=u||U(t,"onResizeStart",E);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,k!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),l.isResize?E:!1},dragControl:function(t,e){var r,n=e.datas,a=e.parentFlag,i=e.isPinch,o=e.parentKeepRatio,s=e.dragClient,l=e.parentDist,c=e.useSnap,u=e.isRequest,f=e.isGroup,d=e.parentEvent,p=e.resolveMatrix,v=n.isResize,g=n.transformOrigin,h=n.startWidth,m=n.startHeight,x=n.prevWidth,y=n.prevHeight,C=n.minSize,D=n.maxSize,b=n.ratio,E=n.startOffsetWidth,k=n.startOffsetHeight,T=n.isWidth;if(!v)return;if(p){var M=t.state.is3d,z=n.startOffsetMatrix,O=n.startTransformOrigin,I=M?4:3,P=gr(Ur(e)),L=Math.sqrt(P.length);I!==L&&(P=re(P,L,I));var N=Mr(z,P,O,I),G=Ge(N,E,k,I);n.startPositions=G,n.nextTargetMatrix=P,n.nextAllMatrix=N}var j=Pe(t.props,"resizable"),F=j.resizeFormat,W=j.throttleResize,B=W===void 0?a?0:1:W,Z=j.parentMoveable,J=j.keepRatioFinally,H=n.direction,X=H,V=0,$=0;!H[0]&&!H[1]&&(X=[1,1]);var et=b&&(o??j.keepRatio)||!1;function ot(){var St=n.fixedDirection,Dt=Xo(X,et,n,e);V=Dt.distWidth,$=Dt.distHeight;var de=X[0]-St[0]||et?Math.max(E+V,At):E,pe=X[1]-St[1]||et?Math.max(k+$,At):k;return et&&E&&k&&(T?pe=de/b:de=pe*b),[de,pe]}var at=w(ot(),2),tt=at[0],Q=at[1];d||(n.setFixedDirection(n.fixedDirection),U(t,"onBeforeResize",st(t,e,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(St){var Dt;return n.setFixedDirection(St),Dt=w(ot(),2),tt=Dt[0],Q=Dt[1],[tt,Q]},setFixedPosition:function(St){var Dt;return n.setFixedPosition(St),Dt=w(ot(),2),tt=Dt[0],Q=Dt[1],[tt,Q]},boundingWidth:tt,boundingHeight:Q,setSize:function(St){var Dt;Dt=w(St,2),tt=Dt[0],Q=Dt[1]}},!0)));var gt=s;s||(!a&&i?gt=bu(t,[0,0]):gt=n.fixedPosition);var lt=[0,0];i||(lt=vf(t,tt,Q,H,gt,!c&&u,n)),l&&(!l[0]&&(lt[0]=0),!l[1]&&(lt[1]=0));function ct(){var St;F&&(St=w(F([tt,Q]),2),tt=St[0],Q=St[1]),tt=pt(tt,B),Q=pt(Q,B)}if(et){X[0]&&X[1]&&lt[0]&&lt[1]&&(_(lt[0])>_(lt[1])?lt[1]=0:lt[0]=0);var ft=!lt[0]&&!lt[1];ft&&ct(),X[0]&&!X[1]||lt[0]&&!lt[1]||ft&&T?(tt+=lt[0],Q=tt/b):(!X[0]&&X[1]||!lt[0]&&lt[1]||ft&&!T)&&(Q+=lt[1],tt=Q*b)}else tt+=lt[0],Q+=lt[1],tt=Math.max(0,tt),Q=Math.max(0,Q);r=w(Ri([tt,Q],C,D,et?b:!1),2),tt=r[0],Q=r[1],ct(),et&&(f||J)&&(T?Q=tt/b:tt=Q*b),V=tt-E,$=Q-k;var bt=[V-x,$-y];n.prevWidth=V,n.prevHeight=$;var mt=yu(t,tt,Q,gt,g,n);if(!(!Z&&bt.every(function(St){return!St})&&mt.every(function(St){return!St}))){var ut=Bt.drag(t,wr(e,t.state,mt,!!i,!1,"draggable")),ht=ut.transform,Tt=h+V,jt=m+$,Lt=st(t,e,R({width:Tt,height:jt,offsetWidth:Math.round(tt),offsetHeight:Math.round(Q),startRatio:b,boundingWidth:tt,boundingHeight:Q,direction:H,dist:[V,$],delta:bt,isPinch:!!i,drag:ut},Vo({style:{width:"".concat(Tt,"px"),height:"".concat(jt,"px")},transform:ht},ut,e)));return!d&&U(t,"onResize",Lt),Lt}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,a=r.startOffsetWidth,i=r.startOffsetHeight,o=r.prevWidth,s=r.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var l=t.state,c=l.width,u=l.height,f=c-(a+o),d=u-(i+s),p=_(f)>3,v=_(d)>3;if(p&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),v&&(r.startHeight+=d,r.startOffsetHeight+=d,r.prevHeight+=d),p||v)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var r=e.datas,n=e.parentEvent;if(r.isResize){r.isResize=!1;var a=Ft(t,e,{});return!n&&U(t,"onResizeEnd",a),a}},dragGroupControlCondition:ri,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,R(R({},e),{isGroup:!0}));if(!n)return!1;var a=Zt(t,"resizable",e),i=r.startOffsetWidth,o=r.startOffsetHeight;function s(){var p=r.minSize;a.forEach(function(v){var g=v.datas,h=g.minSize,m=g.startOffsetWidth,x=g.startOffsetHeight,y=i*(m?h[0]/m:0),C=o*(x?h[1]/x:0);p[0]=Math.max(p[0],y),p[1]=Math.max(p[1],C)})}function l(){var p=r.maxSize;a.forEach(function(v){var g=v.datas,h=g.maxSize,m=g.startOffsetWidth,x=g.startOffsetHeight,y=i*(m?h[0]/m:0),C=o*(x?h[1]/x:0);p[0]=Math.min(p[0],y),p[1]=Math.min(p[1],C)})}var c=oe(t,this,"dragControlStart",e,function(p,v){return $r(t,p,r,v)});s(),l();var u=function(p){n.setFixedDirection(p),c.forEach(function(v,g){v.setFixedDirection(p),$r(t,v.moveable,r,a[g])})};r.setFixedDirection=u;var f=R(R({},n),{targets:t.props.targets,events:c.map(function(p){return R(R({},p),{setMin:function(v){p.setMin(v),s()},setMax:function(v){p.setMax(v),l()}})}),setFixedDirection:u,setMin:function(p){n.setMin(p),s()},setMax:function(p){n.setMax(p),l()}}),d=U(t,"onResizeGroupStart",f);return r.isResize=d!==!1,r.isResize?n:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=Pe(t.props,"resizable");xn(t,"onBeforeResize",function(p){U(t,"onBeforeResizeGroup",st(t,e,R(R({},p),{targets:n.targets}),!0))});var a=this.dragControl(t,R(R({},e),{isGroup:!0}));if(a){var i=a.boundingWidth,o=a.boundingHeight,s=a.dist,l=n.keepRatio,c=[i/(i-s[0]),o/(o-s[1])],u=r.fixedPosition,f=oe(t,this,"dragControl",e,function(p,v){var g=w(Nt(ta(t.rotation/180*Math.PI,3),[v.datas.originalX*c[0],v.datas.originalY*c[1],1],3),2),h=g[0],m=g[1];return R(R({},v),{parentDist:null,parentScale:c,dragClient:vt(u,[h,m]),parentKeepRatio:l})}),d=R({targets:n.targets,events:f},a);return U(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isResize){this.dragControlEnd(t,e);var a=oe(t,this,"dragControlEnd",e),i=Ft(t,e,{targets:t.props.targets,events:a});return U(t,"onResizeGroupEnd",i),r}},request:function(t){var e={},r=0,n=0,a=!1,i=t.getRect();return{isControl:!0,requestStart:function(o){var s;return a=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(s=o==null?void 0:o.horizontal)!==null&&s!==void 0?s:!0,useSnap:a}},request:function(o){return"offsetWidth"in o?r=o.offsetWidth-i.offsetWidth:"deltaWidth"in o&&(r+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-i.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:e,parentDist:[r,n],parentKeepRatio:o.keepRatio,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.resizable=null}};function kn(t,e,r,n,a){var i=t.props.groupable,o=t.state,s=o.is3d?4:3,l=e.origin,c=Ct(t.state.rootMatrix,nt([l[0],l[1]],i?[0,0]:[o.left,o.top]),s),u=vt([a.left,a.top],c);e.startAbsoluteOrigin=u,e.prevDeg=Mt(u,[r,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Te(u,[r,n])}function Fr(t,e,r){var n=r.defaultDeg,a=r.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=e*(o*360+t-n);return r.prevDeg=n+s,s}function Rn(t,e,r,n){return Fr(Mt(n.startAbsoluteOrigin,[t,e])/Math.PI*180,r,n)}function wn(t,e,r,n,a,i){var o=t.props.throttleRotate,s=o===void 0?0:o,l=r.prevSnapDeg,c=0,u=!1;if(i){var f=pf(t,e,n,a+n);u=f.isSnap,c=a+f.dist}u||(c=pt(a+n,s));var d=c-a;return r.prevSnapDeg=d,[d-l,d,c]}function Ro(t,e,r){var n=w(e,4),a=n[0],i=n[1],o=n[2],s=n[3];if(t==="none")return[];if(zt(t))return t.map(function(h){return Ro(h,[a,i,o,s],r)[0]});var l=w((t||"top").split("-"),2),c=l[0],u=l[1],f=[a,i];c==="left"?f=[o,a]:c==="right"?f=[i,s]:c==="bottom"&&(f=[s,o]);var d=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],p=Go(f,r);if(u){var v=u==="top"||u==="left",g=c==="bottom"||c==="left";d=f[v&&!g||!v&&g?0:1]}return[[d,p]]}function Fn(t,e){if(e.isRequest)return e.requestAble==="rotatable";var r=e.inputEvent.target;if(kt(r,rt("rotation-control"))||t.props.rotateAroundControls&&kt(r,rt("around-control"))||kt(r,rt("control"))&&kt(r,rt("rotatable")))return!0;var n=t.props.rotationTarget;return n?wa(n,!0).some(function(a){return a?r===a||r.contains(a):!1}):!1}var Qu=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,tf={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Qu],viewClassName:function(t){return t.isDragging("rotatable")?rt("view-rotation-dragging"):""},render:function(t,e){var r=Pe(t.props,"rotatable"),n=r.rotatable,a=r.rotationPosition,i=r.zoom,o=r.renderDirections,s=r.rotateAroundControls,l=r.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,f=c.direction;if(!n)return null;var d=Ro(a,u,f),p=[];if(d.forEach(function(m,x){var y=w(m,2),C=y[0],D=y[1];p.push(e.createElement("div",{key:"rotation".concat(x),className:rt("rotation"),style:{transform:"translate(-50%) translate(".concat(C[0],"px, ").concat(C[1],"px) rotate(").concat(D,"rad)")}},e.createElement("div",{className:rt("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),e.createElement("div",{className:rt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),o){var v=tr(l||{}),g={};v.forEach(function(m){l[m].forEach(function(x){g[x]=m})});var h=[];zt(o)&&(h=o.map(function(m){var x=g[m];return{data:x?{resolve:x}:{},classNames:x?["move"]:[],dir:m}})),p.push.apply(p,A([],w(po(t,"rotatable",h,e)),!1))}return s&&p.push.apply(p,A([],w(xo(t,e)),!1)),p},dragControlCondition:Fn,dragControlStart:function(t,e){var r,n,a=e.datas,i=e.clientX,o=e.clientY,s=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,f=t.state,d=f.target,p=f.left,v=f.top,g=f.direction,h=f.beforeDirection,m=f.targetTransform,x=f.moveableClientRect,y=f.offsetMatrix,C=f.targetMatrix,D=f.allMatrix,b=f.width,E=f.height;if(!u&&!d)return!1;var k=t.getRect();a.rect=k,a.transform=m,a.left=p,a.top=v;var T=function(X){var V=ko(t.state,X);a.fixedDirection=V.fixedDirection,a.fixedOffset=V.fixedOffset,a.fixedPosition=V.fixedPosition,B&&B.setFixedPosition(X)},M=function(X){var V=Ju(t.state,X);a.fixedDirection=V.fixedDirection,a.fixedOffset=V.fixedOffset,a.fixedPosition=V.fixedPosition,B&&B.setFixedDirection(X)},z=i,O=o;if(u||c||l){var I=s||0;a.beforeInfo={origin:k.beforeOrigin,prevDeg:I,defaultDeg:I,prevSnapDeg:0,startDist:0},a.afterInfo=R(R({},a.beforeInfo),{origin:k.origin}),a.absoluteInfo=R(R({},a.beforeInfo),{origin:k.origin,startValue:I})}else{var P=(n=e.inputEvent)===null||n===void 0?void 0:n.target;if(P){var L=P.getAttribute("data-direction")||"",N=iu[L];if(N){a.isControl=!0,a.isAroundControl=kt(P,rt("around-control")),a.controlDirection=N;var G=P.getAttribute("data-resolve");G&&(a.resolveAble=G);var j=Tf(f.rootMatrix,f.renderPoses,x);r=w(Rt(j,N),2),z=r[0],O=r[1]}}a.beforeInfo={origin:k.beforeOrigin},a.afterInfo={origin:k.origin},a.absoluteInfo={origin:k.origin,startValue:k.rotation};var F=T;T=function(X){var V=f.is3d?4:3,$=w(vt(Li(C,V),X),2),et=$[0],ot=$[1],at=Nt(y,Ye([et,ot],V)),tt=Nt(D,Ye([X[0],X[1]],V));F(X);var Q=f.posDelta;a.beforeInfo.origin=nt(at,Q),a.afterInfo.origin=nt(tt,Q),a.absoluteInfo.origin=nt(tt,Q),kn(t,a.beforeInfo,z,O,x),kn(t,a.afterInfo,z,O,x),kn(t,a.absoluteInfo,z,O,x)},M=function(X){var V=Rt([[0,0],[b,0],[0,E],[b,E]],X);T(V)}}a.startClientX=z,a.startClientY=O,a.direction=g,a.beforeDirection=h,a.startValue=0,a.datas={},pn(t,e,"rotate");var W=!1,B=!1;if(a.isControl&&a.resolveAble){var Z=a.resolveAble;Z==="resizable"&&(B=Hn.dragControlStart(t,R(R({},new Ue("resizable").dragStart([0,0],e)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}B||(W=Bt.dragStart(t,new Ue().dragStart([0,0],e))),T(If(t));var J=st(t,e,R(R({set:function(X){a.startValue=X*Math.PI/180},setFixedDirection:M,setFixedPosition:T},dn(t,e)),{dragStart:W,resizeStart:B})),H=U(t,"onRotateStart",J);return a.isRotate=H!==!1,f.snapRenderInfo={request:e.isRequest},a.isRotate?J:!1},dragControl:function(t,e){var r,n,a,i=e.datas,o=e.clientDistX,s=e.clientDistY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.groupDelta,d=e.resolveMatrix,p=i.beforeDirection,v=i.beforeInfo,g=i.afterInfo,h=i.absoluteInfo,m=i.isRotate,x=i.startValue,y=i.rect,C=i.startClientX,D=i.startClientY;if(m){un(t,e,"rotate");var b=su(e),E=p*b,k=t.props.parentMoveable,T=0,M,z,O=0,I,P,L=0,N,G,j=180/Math.PI*x,F=h.startValue,W=!1,B=C+o,Z=D+s;if(!c&&"parentDist"in e){var J=e.parentDist;M=J,I=J,N=J}else u||c?(M=Fr(l,p,v),I=Fr(l,E,g),N=Fr(l,E,h)):(M=Rn(B,Z,p,v),I=Rn(B,Z,E,g),N=Rn(B,Z,E,h),W=!0);if(z=j+M,P=j+I,G=F+N,U(t,"onBeforeRotate",st(t,e,{beforeRotation:z,rotation:P,absoluteRotation:G,setRotation:function(gt){I=gt-j,M=I,N=I}},!0)),r=w(wn(t,y,v,M,j,W),3),T=r[0],M=r[1],z=r[2],n=w(wn(t,y,g,I,j,W),3),O=n[0],I=n[1],P=n[2],a=w(wn(t,y,h,N,F,W),3),L=a[0],N=a[1],G=a[2],!(!L&&!O&&!T&&!k&&!d)){var H=fn(i,"rotate(".concat(P,"deg)"),"rotate(".concat(I,"deg)"));d&&(i.fixedPosition=ga(t,i.targetAllTransform,i.fixedDirection,i.fixedOffset,i));var X=xu(t,I,i),V=nt(vt(f||[0,0],X),i.prevInverseDist||[0,0]);i.prevInverseDist=X,i.requestValue=null;var $=co(t,H,V,u,e),et=$,ot=Te([B,Z],h.startAbsoluteOrigin)-h.startDist,at=void 0;if(i.resolveAble==="resizable"){var tt=Hn.dragControl(t,R(R({},wr(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:ot}));tt&&(at=tt,et=Vo(et,tt,e))}var Q=st(t,e,R(R({delta:O,dist:I,rotate:P,rotation:P,beforeDist:M,beforeDelta:T,beforeRotate:z,beforeRotation:z,absoluteDist:N,absoluteDelta:L,absoluteRotate:G,absoluteRotation:G,isPinch:!!u,resize:at},$),et));return U(t,"onRotate",Q),Q}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var n=Ft(t,e,{});return U(t,"onRotateEnd",n),n}},dragGroupControlCondition:Fn,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(r.beforeDirection*t.rotation);var l=oe(t,this,"dragControlStart",e,function(f,d){var p=f.state,v=p.left,g=p.top,h=p.beforeOrigin,m=vt(nt([v,g],[a,i]),nt(h,o));return d.datas.startGroupClient=m,d.datas.groupClient=m,R(R({},d),{parentRotate:0})}),c=R(R({},s),{targets:t.props.targets,events:l}),u=U(t,"onRotateGroupStart",c);return r.isRotate=u!==!1,r.isRotate?s:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){xn(t,"onBeforeRotate",function(c){U(t,"onBeforeRotateGroup",st(t,e,R(R({},c),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var a=r.beforeDirection,i=n.beforeDist,o=i/180*Math.PI,s=oe(t,this,"dragControl",e,function(c,u){var f=u.datas.startGroupClient,d=w(u.datas.groupClient,2),p=d[0],v=d[1],g=w(Dr(f,o*a),2),h=g[0],m=g[1],x=[h-p,m-v];return u.datas.groupClient=[h,m],R(R({},u),{parentRotate:i,groupDelta:x})});t.rotation=a*n.beforeRotation;var l=R({targets:t.props.targets,events:s,set:function(c){t.rotation=c},setGroupRotation:function(c){t.rotation=c}},n);return U(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isRotate){this.dragControlEnd(t,e);var a=oe(t,this,"dragControlEnd",e),i=Ft(t,e,{targets:t.props.targets,events:a});return U(t,"onRotateGroupEnd",i),r}},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaRotate"in a?r+=a.deltaRotate:"rotate"in a&&(r=a.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function ef(t,e){var r,n=t.direction,a=t.classNames,i=t.size,o=t.pos,s=t.zoom,l=t.key,c=n==="horizontal",u=c?"Y":"X";return e.createElement("div",{key:l,className:a.join(" "),style:(r={},r[c?"width":"height"]="".concat(i),r.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(s,")"),r)})}function Ca(t,e){return ef(R(R({},t),{classNames:A([rt("line","guideline",t.direction)],w(t.classNames),!1).filter(function(r){return r}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(r){return"".concat(pt(r,.1),"px")})}),e)}function ni(t,e,r,n,a,i,o,s){var l=t.props.zoom;return r.map(function(c,u){var f=c.type,d=c.pos,p=[0,0];return p[o]=n,p[o?0:1]=-a+d,Ca({key:"".concat(e,"TargetGuideline").concat(u),classNames:[rt("target","bold",f)],posValue:p,sizeValue:i,zoom:l,direction:e},s)})}function ai(t,e,r,n,a,i){var o=t.props,s=o.zoom,l=o.isDisplayInnerSnapDigit,c=e==="horizontal"?Ce:Se,u=a[c.start],f=a[c.end];return r.filter(function(d){var p=d.hide,v=d.elementRect;if(p)return!1;if(l&&v){var g=v.rect;if(g[c.start]<=u&&f<=g[c.end])return!1}return!0}).map(function(d,p){var v=d.pos,g=d.size,h=d.element,m=d.className,x=[-n[0]+v[0],-n[1]+v[1]];return Ca({key:"".concat(e,"-default-guideline-").concat(p),classNames:h?[rt("bold"),m]:[rt("normal"),m],direction:e,posValue:x,sizeValue:g,zoom:s},i)})}function sr(t,e,r,n,a,i,o,s){var l,c=t.props,u=c.snapDigit,f=u===void 0?0:u,d=c.isDisplaySnapDigit,p=d===void 0?!0:d,v=c.snapDistFormat,g=v===void 0?function(D,b){return D}:v,h=c.zoom,m=e==="horizontal"?"X":"Y",x=e==="vertical"?"height":"width",y=Math.abs(a),C=p?parseFloat(y.toFixed(f)):0;return s.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(n),className:rt("guideline-group",e),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[x]="".concat(y,"px"),l)},Ca({direction:e,classNames:[rt(r),o],size:"100%",posValue:[0,0],sizeValue:y,zoom:h},s),s.createElement("div",{className:rt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(h,")")}},C>0?g(C,e):""))}function rf(t,e,r,n){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,o=a?Ce:Se,s=r[o.start],l=r[o.end];return Ho(e,function(c){return c.pos[a]}).map(function(c){var u=[],f=[],d=[];return c.forEach(function(p){var v,g,h=p.element,m=p.elementRect.rect;if(m[o.end]<s)u.push(p);else if(l<m[o.start])f.push(p);else if(m[o.start]<=s&&l<=m[o.end]&&n){var x=p.pos,y={element:h,rect:R(R({},m),(v={},v[o.end]=m[o.start],v))},C={element:h,rect:R(R({},m),(g={},g[o.start]=m[o.end],g))},D=[0,0],b=[0,0];D[a]=x[a],D[i]=x[i],b[a]=x[a],b[i]=x[i]+p.size,u.push({type:t,pos:D,size:0,elementRect:y,direction:"",elementDirection:"end"}),f.push({type:t,pos:b,size:0,elementRect:C,direction:"",elementDirection:"start"})}}),u.sort(function(p,v){return v.pos[i]-p.pos[i]}),f.sort(function(p,v){return p.pos[i]-v.pos[i]}),{total:c,start:u,end:f,inner:d}})}function nf(t,e,r,n,a){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var l=e.filter(function(h){return h.type===s}),c=s==="vertical"?1:0,u=c?0:1,f=rf(s,l,n,i),d=c?Se:Ce,p=c?Ce:Se,v=n[d.start],g=n[d.end];f.forEach(function(h){var m=h.total,x=h.start,y=h.end,C=h.inner,D=r[u]+m[0].pos[u]-n[p.start],b=n;x.forEach(function(E){var k=E.elementRect.rect,T=b[d.start]-k[d.end];if(T>0){var M=[0,0];M[c]=r[c]+b[d.start]-v-T,M[u]=D,o.push(sr(t,s,"dashed",o.length,T,M,E.className,a))}b=k}),b=n,y.forEach(function(E){var k=E.elementRect.rect,T=k[d.start]-b[d.end];if(T>0){var M=[0,0];M[c]=r[c]+b[d.end]-v,M[u]=D,o.push(sr(t,s,"dashed",o.length,T,M,E.className,a))}b=k}),C.forEach(function(E){var k=E.elementRect.rect,T=v-k[d.start],M=k[d.end]-g,z=[0,0],O=[0,0];z[c]=r[c]-T,z[u]=D,O[c]=r[c]+g-v,O[u]=D,o.push(sr(t,s,"dashed",o.length,T,z,E.className,a)),o.push(sr(t,s,"dashed",o.length,M,O,E.className,a))})})}),o}function af(t,e,r,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=e.filter(function(h){return h.type===o}).slice(0,1),l=o==="vertical"?0:1,c=l?0:1,u=l?Se:Ce,f=l?Ce:Se,d=n[u.start],p=n[u.end],v=n[f.start],g=n[f.end];s.forEach(function(h){var m=h.gap,x=h.gapRects,y=Math.max.apply(Math,A([v],w(x.map(function(b){var E=b.rect;return E[f.start]})),!1)),C=Math.min.apply(Math,A([g],w(x.map(function(b){var E=b.rect;return E[f.end]})),!1)),D=(y+C)/2;y===C||D===(v+g)/2||x.forEach(function(b){var E=b.rect,k=b.className,T=[r[0],r[1]];if(E[u.end]<d)T[l]+=E[u.end]-d;else if(p<E[u.start])T[l]+=E[u.start]-d-m;else return;T[c]+=D-v,i.push(sr(t,l?"vertical":"horizontal","gap",i.length,m,T,k,a))})})}),i}function qn(t){var e=t.state,r=e.containerClientRect,n=e.hasFixed,a=r.overflow,i=r.scrollHeight,o=r.scrollWidth,s=r.clientHeight,l=r.clientWidth,c=r.clientLeft,u=r.clientTop,f=t.props,d=f.snapGap,p=d===void 0?!0:d,v=f.verticalGuidelines,g=f.horizontalGuidelines,h=f.snapThreshold,m=h===void 0?5:h,x=f.snapGridWidth,y=x===void 0?0:x,C=f.snapGridHeight,D=C===void 0?0:C,b=f.maxSnapElementGuidelineDistance,E=b===void 0?1/0:b,k=f.isDisplayGridGuidelines,T=Yt(Ut(t.state)),M=T.top,z=T.left,O=T.bottom,I=T.right,P={top:M,left:z,bottom:O,right:I,center:(z+I)/2,middle:(M+O)/2},L=lf(t),N=A([],w(L),!1);p&&N.push.apply(N,A([],w(of(t,P,m)),!1));var G=R({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(N.push.apply(N,A([],w(sf(y,D,a?o:l,a?i:s,c,u,G,k)),!1)),n){var j=r.left,F=r.top;G.left+=j,G.top+=F,G.right+=j,G.bottom+=F}return N.push.apply(N,A([],w(Mo(g||!1,v||!1,a?o:l,a?i:s,c,u,G)),!1)),N=N.filter(function(W){var B=W.element,Z=W.elementRect,J=W.type;if(!B||!Z)return!0;var H=Z.rect;return wo(P,H,J,E)}),N}function of(t,e,r){var n=t.props,a=n.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,l=t.state.elementRects,c=[];return[["vertical",Ce,Se],["horizontal",Se,Ce]].forEach(function(u){var f=w(u,3),d=f[0],p=f[1],v=f[2],g=e[p.start],h=e[p.end],m=e[p.center],x=e[v.start],y=e[v.end];function C(E){var k=E.rect;return k[p.end]<g+r?g-k[p.end]:h-r<k[p.start]?k[p.start]-h:-1}var D=l.filter(function(E){var k=E.rect;return k[v.start]>y||k[v.end]<x?!1:C(E)>0}).sort(function(E,k){return C(E)-C(k)}),b=[];D.forEach(function(E){D.forEach(function(k){if(E!==k){var T=E.rect,M=k.rect,z=T[v.start],O=T[v.end],I=M[v.start],P=M[v.end];z>P||I>O||b.push([E,k])}})}),b.forEach(function(E){var k=w(E,2),T=k[0],M=k[1],z=T.rect,O=M.rect,I=z[p.start],P=z[p.end],L=O[p.start],N=O[p.end],G=0,j=0,F=!1,W=!1,B=!1;if(P<=g&&h<=L){if(W=!0,G=(L-P-(h-g))/2,j=P+G+(h-g)/2,_(j-m)>r)return}else if(P<L&&N<g+r){if(F=!0,G=L-P,j=N+G,_(j-g)>r)return}else if(P<L&&h-r<I){if(B=!0,G=L-P,j=I-G,_(j-h)>r)return}else return;G&&wo(e,O,d,i)&&(G>s||c.push({type:d,pos:d==="vertical"?[j,0]:[0,j],element:M.element,size:0,className:M.className,isStart:F,isCenter:W,isEnd:B,gap:G,hide:!0,gapRects:[T,M],direction:"",elementDirection:""}))})}),c}function sf(t,e,r,n,a,i,o,s){a===void 0&&(a=0),i===void 0&&(i=0);var l=[],c=o.left,u=o.top;if(e)for(var f=0;f<=n;f+=e)l.push({type:"horizontal",pos:[c,pt(f-i+u,.1)],className:rt("grid-guideline"),size:r,hide:!s,direction:""});if(t)for(var f=0;f<=r;f+=t)l.push({type:"vertical",pos:[pt(f-a+c,.1),u],className:rt("grid-guideline"),size:n,hide:!s,direction:""});return l}function wo(t,e,r,n){return r==="horizontal"?_(t.right-e.left)<=n||_(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:r==="vertical"?_(t.bottom-e.top)<=n||_(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom:!0}function lf(t){var e=t.state,r=t.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return e.elementRects=[],[];var a=(e.elementRects||[]).filter(function(d){return!d.refresh}),i=n.map(function(d){return Er(d)&&"element"in d?R(R({},d),{element:te(d.element,!0)}):{element:te(d,!0)}}).filter(function(d){return d.element}),o=Ns(a.map(function(d){return d.element}),i.map(function(d){return d.element})),s=o.maintained,l=o.added,c=[];s.forEach(function(d){var p=w(d,2),v=p[0],g=p[1];c[g]=a[v]}),cf(t,l.map(function(d){return i[d]})).map(function(d,p){c[l[p]]=d}),e.elementRects=c;var u=ma(t.props.elementSnapDirections),f=[];return c.forEach(function(d){var p=d.element,v=d.top,g=v===void 0?u.top:v,h=d.left,m=h===void 0?u.left:h,x=d.right,y=x===void 0?u.right:x,C=d.bottom,D=C===void 0?u.bottom:C,b=d.center,E=b===void 0?u.center:b,k=d.middle,T=k===void 0?u.middle:k,M=d.className,z=d.rect,O=xa({top:g,right:y,left:m,bottom:D,center:E,middle:T},z),I=O.horizontal,P=O.vertical,L=O.horizontalNames,N=O.verticalNames,G=z.top,j=z.left,F=z.right-j,W=z.bottom-G,B=[F,W];P.forEach(function(Z,J){f.push({type:"vertical",element:p,pos:[pt(Z,.1),G],size:W,sizes:B,className:M,elementRect:d,elementDirection:$a[N[J]]||N[J],direction:""})}),I.forEach(function(Z,J){f.push({type:"horizontal",element:p,pos:[j,pt(Z,.1)],size:F,sizes:B,className:M,elementRect:d,elementDirection:$a[L[J]]||L[J],direction:""})})}),f}function ii(t,e){return t?t.map(function(r){var n=Er(r)?r:{pos:r},a=n.pos;return hr(a)?n:R(R({},n),{pos:yt(a,e)})}):[]}function Mo(t,e,r,n,a,i,o){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],l=o.left,c=o.top,u=o.bottom,f=o.right,d=r+f-l,p=n+u-c;return ii(t,p).forEach(function(v){s.push({type:"horizontal",pos:[l,pt(v.pos-i+c,.1)],size:d,className:v.className,direction:""})}),ii(e,d).forEach(function(v){s.push({type:"vertical",pos:[pt(v.pos-a+l,.1),c],size:p,className:v.className,direction:""})}),s}function cf(t,e){if(!e.length)return[];var r=t.props.groupable,n=t.state,a=n.containerClientRect,i=n.rootMatrix,o=n.is3d,s=n.offsetDelta,l=o?4:3,c=w(Lu(i,a,l),2),u=c[0],f=c[1],d=r?0:s[0],p=r?0:s[1];return e.map(function(v){var g=v.element.getBoundingClientRect(),h=g.left-u-d,m=g.top-f-p,x=m+g.height,y=h+g.width,C=w(Ze(i,[h,m],l),2),D=C[0],b=C[1],E=w(Ze(i,[y,x],l),2),k=E[0],T=E[1];return R(R({},v),{rect:{left:D,right:k,top:b,bottom:T,center:(D+k)/2,middle:(b+T)/2}})})}function jr(t){var e=t.state,r=e.container,n=t.props.snapContainer||r;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var a=e.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(r!==n){var o=te(n,!0);if(o){var s=fr(o),l=ui(e,[s.left-a.left,s.top-a.top]),c=ui(e,[s.right-a.right,s.bottom-a.bottom]);i.left=pt(l[0],1e-5),i.top=pt(l[1],1e-5),i.right=pt(c[0],1e-5),i.bottom=pt(c[1],1e-5)}}return e.snapContainer=n,e.snapOffset=i,e.guidelines=qn(t),e.enableSnap=!0,!0}function To(t,e,r,n,a,i){var o=Ge(t,e,r,i?4:3),s=Rt(o,n);return Ea(o,nt(a,s))}function oi(t){return t?t/_(t):0}function uf(t,e,r,n,a,i){var o=i.fixedDirection,s=Bu(r,o,n),l=ba(t,e,r,n),c=A(A([],w($u(t,e,s,n,a,i)),!1),w(Eo(t,l,i)),!1),u=Kr(c,0),f=Kr(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function ff(t,e,r,n,a,i,o,s,l){var c=Rt(e,o),u=hn(t,s,{vertical:[c[0]],horizontal:[c[1]]}),f=u.horizontal.offset,d=u.vertical.offset;if(pt(d,Gn)||pt(f,Gn)){var p=w(ae({datas:l,distX:-d,distY:-f}),2),v=p[0],g=p[1],h=Math.min(a||1/0,r+o[0]*v),m=Math.min(i||1/0,n+o[1]*g);return[h-r,m-n]}return[0,0]}function Io(t,e,r,n,a,i,o,s){for(var l=Ut(t.state),c=t.props.keepRatio,u=0,f=0,d=0;d<2;++d){var p=e(u,f),v=uf(t,p,a,c,o,s),g=v.width,h=v.height,m=g.isBound,x=h.isBound,y=g.offset,C=h.offset;if(d===1&&(m||(y=0),x||(C=0)),d===0&&o&&!m&&!x)return[0,0];if(c){var D=_(y)*(r?1/r:1),b=_(C)*(n?1/n:1),E=m&&x?D<b:x||!m&&D<b;E?y=r*C/n:C=n*y/r}u+=y,f+=C}if(!c&&a[0]&&a[1]){var k=Zu(t,l,a,i,s),T=k.maxWidth,M=k.maxHeight,z=w(ff(t,e(u,f).map(function(P){return P.map(function(L){return pt(L,Gn)})}),r+u,n+f,T,M,a,o,s),2),y=z[0],C=z[1];u+=y,f+=C}return[u,f]}function cr(t){return t<0&&(t=t%360+360),t%=360,t}function df(t,e){e=cr(e);var r=Math.floor(t/360),n=r*360+360-e,a=r*360+e;return _(t-n)<_(t-a)?n:a}function Mn(t,e){t=cr(t),e=cr(e);var r=cr(t-e);return Math.min(r,360-r)}function pf(t,e,r,n){var a,i=t.props,o=(a=i[Oo])!==null&&a!==void 0?a:5,s=i[zo];if(nr(t,"rotatable")){var l=e.pos1,c=e.pos2,u=e.pos3,f=e.pos4,d=e.origin,p=r*Math.PI/180,v=[l,c,u,f].map(function(C){return nt(C,d)}),g=v.map(function(C){return Dr(C,p)}),h=A(A([],w(Tu(t,v,g,d,r)),!1),w(Hu(t,v,g,d,r)),!1);h.sort(function(C,D){return _(C-r)-_(D-r)});var m=h.length>0;if(m)return{isSnap:m,dist:m?h[0]:r}}if(s!=null&&s.length&&o){var x=s.slice().sort(function(C,D){return Mn(C,n)-Mn(D,n)}),y=x[0];if(Mn(y,n)<=o)return{isSnap:!0,dist:r+df(n,y)-n}}return{isSnap:!1,dist:r}}function vf(t,e,r,n,a,i,o){if(!nr(t,"resizable"))return[0,0];var s=o.fixedDirection,l=o.nextAllMatrix,c=t.state,u=c.allMatrix,f=c.is3d;return Io(t,function(d,p){return To(l||u,e+d,r+p,s,a,f)},e,r,n,a,i,o)}function gf(t,e,r,n,a){if(!nr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,l=a.fixedDirection,c=a.is3d,u=Io(t,function(f,d){return To(vu(a,vt(e,[f/i,d/o])),i,o,l,s,c)},i,o,r,s,n,a);return[u[0]/i,u[1]/o]}function hf(t,e){e.absolutePoses=Ut(t.state)}function si(t){var e=[];return t.forEach(function(r){r.guidelineInfos.forEach(function(n){var a=n.guideline;ye(e,function(i){return i.guideline===a})||(a.direction="",e.push({guideline:a,posInfo:r}))})}),e.map(function(r){var n=r.guideline,a=r.posInfo;return R(R({},n),{direction:a.direction})})}function li(t,e,r,n,a,i){var o=ha(vn(t,i),e,r),s=o.vertical,l=o.horizontal,c=Ve();s.forEach(function(v){v.isBound&&(v.direction==="start"&&(c.left=!0),v.direction==="end"&&(c.right=!0),n.push({type:"bounds",pos:v.pos}))}),l.forEach(function(v){v.isBound&&(v.direction==="start"&&(c.top=!0),v.direction==="end"&&(c.bottom=!0),a.push({type:"bounds",pos:v.pos}))});var u=Fu(t),f=u.boundMap,d=u.vertical,p=u.horizontal;return d.forEach(function(v){vr(n,function(g){var h=g.type,m=g.pos;return h==="bounds"&&m===v})>=0||n.push({type:"bounds",pos:v})}),p.forEach(function(v){vr(a,function(g){var h=g.type,m=g.pos;return h==="bounds"&&m===v})>=0||a.push({type:"bounds",pos:v})}),{boundMap:c,innerBoundMap:f}}var mf=Ra("",["resizable","scalable"]),Oo="snapRotationThreshold",zo="snapRotationDegrees",xf={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold",Oo,zo,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var r=t.state,n=r.top,a=r.left,i=r.pos1,o=r.pos2,s=r.pos3,l=r.pos4,c=r.snapRenderInfo,u=t.props.snapRenderThreshold,f=u===void 0?1:u;if(!c||!c.render||!nr(t,""))return Fe(t,"boundMap",Ve(),function(H){return JSON.stringify(H)}),Fe(t,"innerBoundMap",Ve(),function(H){return JSON.stringify(H)}),[];r.guidelines=qn(t);var d=Math.min(i[0],o[0],s[0],l[0]),p=Math.min(i[1],o[1],s[1],l[1]),v=c.externalPoses||[],g=Ut(t.state),h=[],m=[],x=[],y=[],C=[],D=Yt(g),b=D.width,E=D.height,k=D.top,T=D.left,M=D.bottom,z=D.right,O={left:T,right:z,top:k,bottom:M,center:(T+z)/2,middle:(k+M)/2},I=v.length>0,P=I?Yt(v):{};if(!c.request){if(c.direction&&C.push(_u(t,g,c.direction,f)),c.snap){var L=Yt(g);c.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),C.push(Ka(t,L,f))}I&&(c.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),C.push(Ka(t,P,f))),C.forEach(function(H){var X=H.vertical.posInfos,V=H.horizontal.posInfos;h.push.apply(h,A([],w(X.filter(function($){var et=$.guidelineInfos;return et.some(function(ot){var at=ot.guideline;return!at.hide})}).map(function($){return{type:"snap",pos:$.pos}})),!1)),m.push.apply(m,A([],w(V.filter(function($){var et=$.guidelineInfos;return et.some(function(ot){var at=ot.guideline;return!at.hide})}).map(function($){return{type:"snap",pos:$.pos}})),!1)),x.push.apply(x,A([],w(si(X)),!1)),y.push.apply(y,A([],w(si(V)),!1))})}var N=li(t,[T,z],[k,M],h,m),G=N.boundMap,j=N.innerBoundMap;I&&li(t,[P.left,P.right],[P.top,P.bottom],h,m,c.externalBounds);var F=A(A([],w(x),!1),w(y),!1),W=F.filter(function(H){return H.element&&!H.gapRects}),B=F.filter(function(H){return H.gapRects}).sort(function(H,X){return H.gap-X.gap});U(t,"onSnap",{guidelines:F.filter(function(H){var X=H.element;return!X}),elements:W,gaps:B},!0);var Z=Fe(t,"boundMap",G,function(H){return JSON.stringify(H)},Ve()),J=Fe(t,"innerBoundMap",j,function(H){return JSON.stringify(H)},Ve());return(G===Z||j===J)&&U(t,"onBound",{bounds:G,innerBounds:j},!0),A(A(A(A(A(A([],w(nf(t,W,[d,p],O,e)),!1),w(af(t,B,[d,p],O,e)),!1),w(ai(t,"horizontal",y,[a,n],O,e)),!1),w(ai(t,"vertical",x,[a,n],O,e)),!1),w(ni(t,"horizontal",m,d,n,b,0,e)),!1),w(ni(t,"vertical",h,p,a,E,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},jr(t)},drag:function(t){var e=t.state;jr(t)||(e.guidelines=qn(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(mf(t,e)||Fn(t,e))return!0;if(!e.isRequest&&e.inputEvent)return kt(e.inputEvent.target,rt("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,jr(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,jr(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function yf(t,e){return[t[0]*e[0],t[1]*e[1]]}function rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ps.apply(void 0,A([da],w(t),!1))}function Lo(t){t()}function bf(t){return!t||t==="none"?[1,0,0,1,0,0]:Er(t)?t:gr(t)}function ur(t,e,r){return qr(e,Le(r,e),t,Le(r.map(function(n){return-n}),e))}function Cf(t,e,r){if(e==="%"){var n=Sa(t.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function Sf(t){var e=Ef(Da(t,":before"));return e.map(function(r,n){var a=ra(r),i=a.value,o=a.unit;return i*Cf(t,o,n===0)})}function Jr(t){return t?t.split(" "):["0","0"]}function Ef(t){return Jr(t.transformOrigin)}function Po(t){var e=Ht(t),r=e("transform");if(r&&r!=="none")return r;if("transform"in t){var n=t.transform,a=n.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(c){var u=a[c].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return u[f]}).join(", "),")"))},l=0;l<i;++l)s(l);return o.join(" ")}return""}function Cr(t,e,r,n,a){var i,o,s=aa(t)||Ee(t),l=!1,c,u;if(!t||r)c=t;else{var f=(i=t==null?void 0:t.assignedSlot)===null||i===void 0?void 0:i.parentElement,d=t.parentElement;f?(l=!0,u=d,c=f):c=d}for(var p=!1,v=t===e||c===e,g="relative",h=1,m=parseFloat(a==null?void 0:a("zoom"))||1,x=a==null?void 0:a("position");c&&c!==s;){e===c&&(v=!0);var y=Ht(c),C=c.tagName.toLowerCase(),D=Po(c),b=y("willChange"),E=parseFloat(y("zoom"))||1;if(g=y("position"),n&&E!==1){h=E;break}if(!r&&n&&m!==1&&x&&x!=="absolute"||C==="svg"||g!=="static"||D&&D!=="none"||b==="transform")break;var k=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentNode,T=c.parentNode;k&&(l=!0,u=T);var M=T;if(M&&M.nodeType===11){c=M.host,p=!0,g=Ht(c)("position");break}c=M,g="relative"}return{offsetZoom:h,hasSlot:l,parentSlotElement:u,isCustomElement:p,isStatic:g==="static",isEnd:v||!c||c===s,offsetParent:c||s}}function Df(t,e){var r,n=t.tagName.toLowerCase(),a=t.offsetLeft,i=t.offsetTop,o=Ht(t),s=ia(a),l=!s,c,u;return!l&&n!=="svg"?(c=eo?Sf(t):Jr(o("transformOrigin")).map(function(f){return parseFloat(f)}),u=c.slice(),l=!0,r=w(wf(t,c,t===e&&e.tagName.toLowerCase()==="g"),4),a=r[0],i=r[1],c[0]=r[2],c[1]=r[3]):(c=Jr(o("transformOrigin")).map(function(f){return parseFloat(f)}),u=c.slice()),{tagName:n,isSVG:s,hasOffset:l,offset:[a||0,i||0],origin:c,targetOrigin:u}}function jo(t,e){var r=Ht(t),n=Ht(Ee(t)),a=n("position");if(!e&&(!a||a==="static"))return[0,0];var i=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(o=0),(r("left")!=="auto"||r("right")!=="auto")&&(i=0)),[i,o]}function Yn(t){t.forEach(function(e){var r=e.matrix;r&&(e.matrix=re(r,3,4))})}function kf(t){for(var e=t.parentElement,r=!1,n=Ee(t);e;){var a=Da(e).transform;if(a&&a!=="none"){r=!0;break}if(e===n)break;e=e.parentElement}return{fixedContainer:e||n,hasTransform:r}}function mn(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(wi(t,!e).join(","),")")}function Sa(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||r,clientWidth:e,clientHeight:r}}function Rf(t,e){var r,n=Sa(t),a=n.width,i=n.height,o=n.clientWidth,s=n.clientHeight,l=o/a,c=s/i,u=t.preserveAspectRatio.baseVal,f=u.align,d=u.meetOrSlice,p=[0,0],v=[l,c],g=[0,0];if(f!==1){var h=(f-2)%3,m=Math.floor((f-2)/3);p[0]=a*h/2,p[1]=i*m/2;var x=d===2?Math.max(c,l):Math.min(l,c);v[0]=x,v[1]=x,g[0]=(o-a)/2*h,g[1]=(s-i)/2*m}var y=na(v,e);return r=w(g,2),y[e*(e-1)]=r[0],y[e*(e-1)+1]=r[1],ur(y,e,p)}function wf(t,e,r){if(!t.getBBox||!r&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var n=t.getBBox(),a=Sa(t.ownerSVGElement),i=n.x-a.x,o=n.y-a.y;return[i,o,e[0]-i,e[1]-o]}function Ct(t,e,r){return Nt(t,Ye(e,r),r)}function Ge(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map(function(a){return Ct(t,a,n)})}function Yt(t){var e=t.map(function(c){return c[0]}),r=t.map(function(c){return c[1]}),n=Math.min.apply(Math,A([],w(e),!1)),a=Math.min.apply(Math,A([],w(r),!1)),i=Math.max.apply(Math,A([],w(e),!1)),o=Math.max.apply(Math,A([],w(r),!1)),s=i-n,l=o-a;return{left:n,top:a,right:i,bottom:o,width:s,height:l}}function ci(t,e,r,n){var a=Ge(t,e,r,n);return Yt(a)}function Mf(t,e,r,n,a){var i,o=t.target,s=t.origin,l=e.matrix,c=Bo(o),u=c.offsetWidth,f=c.offsetHeight,d=r.getBoundingClientRect(),p=[0,0];r===Ee(r)&&(p=jo(o,!0));for(var v=o.getBoundingClientRect(),g=v.left-d.left+r.scrollLeft-(r.clientLeft||0)+p[0],h=v.top-d.top+r.scrollTop-(r.clientTop||0)+p[1],m=v.width,x=v.height,y=qr(n,a,l),C=ci(y,u,f,n),D=C.left,b=C.top,E=C.width,k=C.height,T=Ct(y,s,n),M=nt(T,[D,b]),z=[g+M[0]*m/E,h+M[1]*x/k],O=[0,0],I=0;++I<10;){var P=se(a,n);i=w(nt(Ct(P,z,n),Ct(P,T,n)),2),O[0]=i[0],O[1]=i[1];var L=qr(n,a,Le(O,n),l),N=ci(L,u,f,n),G=N.left,j=N.top,F=G-g,W=j-h;if(_(F)<2&&_(W)<2)break;z[0]-=F,z[1]-=W}return O.map(function(B){return Math.round(B)})}function Tf(t,e,r){var n=t.length===16,a=n?4:3,i=e.map(function(l){return Ct(t,l,a)}),o=r.left,s=r.top;return i.map(function(l){return[l[0]+o,l[1]+s]})}function Xt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function _o(t,e){return Xt([e[0]-t[0],e[1]-t[1]])}function lr(t,e,r,n){r===void 0&&(r=1),n===void 0&&(n=Mt(t,e));var a=_o(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(a,"px")}}function Qr(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=r.length,i=r.reduce(function(s,l){return s+l[0]},0)/a,o=r.reduce(function(s,l){return s+l[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Pe(t,e){var r=t[e];return Er(r)?R(R({},t),r):t}function Bo(t){var e=t&&!ia(t.offsetWidth),r=0,n=0,a=0,i=0,o=0,s=0,l=0,c=0,u=0,f=0,d=0,p=0,v=1/0,g=1/0,h=1/0,m=1/0,x=0,y=0,C=!1;if(t)if(!e&&t.tagName.toLowerCase()!=="svg"){var D=t.getBBox();C=!0,r=D.width,n=D.height,o=r,s=n,l=r,c=n,a=r,i=n}else{var b=Ht(t),E=t.style,k=b("boxSizing")==="border-box",T=parseFloat(b("borderLeftWidth"))||0,M=parseFloat(b("borderRightWidth"))||0,z=parseFloat(b("borderTopWidth"))||0,O=parseFloat(b("borderBottomWidth"))||0,I=parseFloat(b("paddingLeft"))||0,P=parseFloat(b("paddingRight"))||0,L=parseFloat(b("paddingTop"))||0,N=parseFloat(b("paddingBottom"))||0,G=I+P,j=L+N,F=T+M,W=z+O,B=G+F,Z=j+W,J=b("position"),H=0,X=0;if("clientLeft"in t){var V=null;if(J==="absolute"){var $=Cr(t,Ee(t));V=$.offsetParent}else V=t.parentElement;if(V){var et=Ht(V);H=parseFloat(et("width")),X=parseFloat(et("height"))}}u=Math.max(G,yt(b("minWidth"),H)||0),f=Math.max(j,yt(b("minHeight"),X)||0),v=yt(b("maxWidth"),H),g=yt(b("maxHeight"),X),isNaN(v)&&(v=1/0),isNaN(g)&&(g=1/0),x=yt(E.width,0)||0,y=yt(E.height,0)||0,o=parseFloat(b("width"))||0,s=parseFloat(b("height"))||0,l=_(o-x)<1?Va(u,x||o,v):o,c=_(s-y)<1?Va(f,y||s,g):s,r=l,n=c,a=l,i=c,k?(h=v,m=g,d=u,p=f,l=r-B,c=n-Z):(h=v+B,m=g+Z,d=u+B,p=f+Z,r=l+B,n=c+Z),a=l+G,i=c+j}return{svg:C,offsetWidth:r,offsetHeight:n,clientWidth:a,clientHeight:i,contentWidth:l,contentHeight:c,inlineCSSWidth:x,inlineCSSHeight:y,cssWidth:o,cssHeight:s,minWidth:u,minHeight:f,maxWidth:v,maxHeight:g,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:h,maxOffsetHeight:m}}function Go(t,e){return Mt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function _r(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Ao(t,e){var r=t===Ee(t)||t===aa(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow=Ht(t)("overflow")!=="visible",R(R({},e),n)}function Tn(t,e,r,n){var a=t.left,i=t.right,o=t.top,s=t.bottom,l=e.top,c=e.left,u={left:c+a,top:l+o,right:c+i,bottom:l+s,width:i-a,height:s-o};return r&&n?Ao(r,u):u}function fr(t,e){var r=0,n=0,a=0,i=0;if(t){var o=t.getBoundingClientRect();r=o.left,n=o.top,a=o.width,i=o.height}var s={left:r,top:n,width:a,height:i,right:r+a,bottom:n+i};return t&&e?Ao(t,s):s}function If(t){var e=t.props,r=e.groupable,n=e.svgOrigin,a=t.getState(),i=a.offsetWidth,o=a.offsetHeight,s=a.svg,l=a.transformOrigin;return!r&&s&&n?Ma(n,i,o):l}function No(t,e,r,n){var a;if(t)a=t;else if(e)a=[0,0];else{var i=r.target;a=Wo(i,n)}return a}function Wo(t,e){if(t){var r=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(e.deg=r,!!n){var a=[0,0];return n.indexOf("w")>-1&&(a[0]=-1),n.indexOf("e")>-1&&(a[0]=1),n.indexOf("n")>-1&&(a[1]=-1),n.indexOf("s")>-1&&(a[1]=1),a}}}function Ea(t,e){return[vt(e,t[0]),vt(e,t[1]),vt(e,t[2]),vt(e,t[3])]}function Ut(t){var e=t.left,r=t.top,n=t.pos1,a=t.pos2,i=t.pos3,o=t.pos4;return Ea([n,a,i,o],[e,r])}function Xn(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(t)})}function He(t,e){var r=e?"controlGesto":"targetGesto",n=t[r];(n==null?void 0:n.isIdle())===!1&&Xn(t,e),n==null||n.unset(),t[r]=null}function Gt(t,e){if(e){var r=rr(e);r.nextStyle=R(R({},r.nextStyle),t)}return{style:t,cssText:tr(t).map(function(n){return"".concat(js(n,"-"),": ").concat(t[n],";")}).join("")}}function Vo(t,e,r){var n=e.afterTransform||e.transform;return R(R({},Gt(R(R(R({},t.style),e.style),{transform:n}),r)),{afterTransform:n,transform:t.transform})}function st(t,e,r,n){var a=e.datas;a.datas||(a.datas={});var i=R(R({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function Ft(t,e,r){var n=e.datas,a="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),R(R({isDrag:a},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function xn(t,e,r){t._emitter.on(e,r)}function U(t,e,r,n,a){return t.triggerEvent(e,r,n,a)}function Da(t,e){return yr(t).getComputedStyle(t,e)}function Br(t,e,r){var n={},a={};return t.filter(function(i){var o=i.name;if(n[o]||!e.some(function(s){return i[s]}))return!1;if(!r&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function Un(t,e){return t===e||t==null&&e==null}function Of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var a=t[n];if(!ia(a))return a}return t[r]}function Ho(t,e){var r=[],n=[];return t.forEach(function(a,i){var o=e(a,i,t),s=n.indexOf(o),l=r[s]||[];s===-1&&(n.push(o),r.push(l)),l.push(a)}),r}function zf(t,e){var r=[],n={};return t.forEach(function(a,i){var o=e(a,i,t),s=n[o];s||(s=[],n[o]=s,r.push(s)),s.push(a)}),r}function Fo(t){return t.reduce(function(e,r){return e.concat(r)},[])}function Ke(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(r,n){return _(n)-_(r)}),t[0]}function Ze(t,e,r){return Nt(se(t,r),Ye(e,r),r)}function qo(t,e){var r,n=t.is3d,a=t.rootMatrix,i=n?4:3;return r=w(Ze(a,[e.distX,e.distY],i),2),e.distX=r[0],e.distY=r[1],e}function Gr(t,e,r,n){if(!r[0]&&!r[1])return e;var a=Ct(t,[oi(r[0]),0],n),i=Ct(t,[0,oi(r[1])],n),o=Ct(t,[r[0]/Xt(a),r[1]/Xt(i)],n);return vt(e,o)}function $t(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function tn(t){return _(t)<=At?0:t}function ka(t){return function(e){if(!e.isDragging(t))return"";var r=Cu(e,t),n=r.deg;return n?rt("view-control-rotation".concat(n)):""}}function Ra(t,e){return e===void 0&&(e=[t]),function(r,n){if(n.isRequest)return e.some(function(i){return n.requestAble===i})?n.parentDirection:!1;var a=n.inputEvent.target;return kt(a,rt("direction"))&&(!t||kt(a,rt(t)))}}function Lf(t,e,r){var n,a=mr(t,{"x%":function(D){return D/100*e.offsetWidth},"y%":function(D){return D/100*e.offsetHeight}}),i=t.slice(0,r<0?void 0:r),o=t.slice(0,r<0?void 0:r+1),s=t[r]||"",l=r<0?[]:t.slice(r),c=r<0?[]:t.slice(r+1),u=a.slice(0,r<0?void 0:r),f=a.slice(0,r<0?void 0:r+1),d=(n=a[r])!==null&&n!==void 0?n:mr([""])[0],p=r<0?[]:a.slice(r),v=r<0?[]:a.slice(r+1),g=d?[d]:[],h=ar(u),m=ar(f),x=ar(p),y=ar(v),C=wt(h,x,4);return{transforms:t,beforeFunctionMatrix:h,beforeFunctionMatrix2:m,targetFunctionMatrix:ar(g),afterFunctionMatrix:x,afterFunctionMatrix2:y,allFunctionMatrix:C,beforeFunctions:u,beforeFunctions2:f,targetFunction:g[0],afterFunctions:p,afterFunctions2:v,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:l,afterFunctionTexts2:c}}function Pf(t){return!t||!Er(t)||ea(t)?!1:zt(t)||"length"in t}function te(t,e){return t?ea(t)?t:_e(t)?e?document.querySelector(t):t:Ws(t)?t():Vs(t)?t:"current"in t?t.current:t:null}function wa(t,e){if(!t)return[];var r=Pf(t)?[].slice.call(t):[t];return r.reduce(function(n,a){return _e(a)&&e?A(A([],w(n),!1),w([].slice.call(document.querySelectorAll(a))),!1):(zt(a)?n.push(wa(a,e)):n.push(te(a,e)),n)},[])}function jf(t,e,r){var n=Mt(t,e)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function ui(t,e){var r=t.rootMatrix,n=t.is3d,a=n?4:3,i=se(r,a);return n||(i=re(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Hs(i,e)}function Yo(t,e,r,n,a){var i=w(t,2),o=i[0],s=i[1],l=0,c=0;if(a&&o&&s){var u=Mt([0,0],e),f=Mt([0,0],n),d=Xt(e),p=Math.cos(u-f)*d;if(!n[0])c=p,l=c*r;else if(!n[1])l=p,c=l/r;else{var v=n[0]*o,g=n[1]*s,h=Math.atan2(v+e[0],g+e[1]),m=Math.atan2(v,g);h<0&&(h+=Math.PI*2),m<0&&(m+=Math.PI*2);var x=0;_(h-m)<Math.PI/2||_(h-m)>Math.PI/2*3||(m+=Math.PI),x=h-m,x>Math.PI*2?x-=Math.PI*2:x>Math.PI?x=2*Math.PI-x:x<-Math.PI&&(x=-2*Math.PI-x);var y=Xt([v+e[0],g+e[1]])*Math.cos(x);l=y*Math.sin(m)-v,c=y*Math.cos(m)-g,n[0]<0&&(l*=-1),n[1]<0&&(c*=-1)}}else l=n[0]*e[0],c=n[1]*e[1];return[l,c]}function Xo(t,e,r,n){var a,i=r.ratio,o=r.startOffsetWidth,s=r.startOffsetHeight,l=0,c=0,u=n.distX,f=n.distY,d=n.pinchScale,p=n.parentDistance,v=n.parentDist,g=n.parentScale,h=r.fixedDirection,m=[0,1].map(function(E){return _(t[E]-h[E])}),x=[0,1].map(function(E){var k=m[E];return k!==0&&(k=2/k),k});if(v)l=v[0],c=v[1],e&&(l?c||(c=l/i):l=c*i);else if(hr(d))l=(d-1)*o,c=(d-1)*s;else if(g)l=(g[0]-1)*o,c=(g[1]-1)*s;else if(p){var y=o*m[0],C=s*m[1],D=Xt([y,C]);l=p/D*y*x[0],c=p/D*C*x[1]}else{var b=ae({datas:r,distX:u,distY:f});b=x.map(function(E,k){return b[k]*E}),a=w(Yo([o,s],b,i,t,e),2),l=a[0],c=a[1]}return{distWidth:l,distHeight:c}}function $n(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var r=w(t.split(" "),2),n=r[0],a=r[1],i=$n(n||""),o=$n(a||""),s=R(R({},i),o),l={x:"50%",y:"50%"};return s.x&&(l.x=s.x),s.y&&(l.y=s.y),s.value&&(s.x&&!s.y&&(l.y=s.value),!s.x&&s.y&&(l.x=s.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Ma(t,e,r){var n=$n(t,!0),a=n.x,i=n.y;return[yt(a,e)||0,yt(i,r)||0]}function _f(t,e,r){var n=t.map(function(i){return nt(i,e)}),a=n.map(function(i){return Dr(i,r)});return{prev:n,next:a,result:a.map(function(i){return vt(i,e)})}}function Uo(t,e){return t.length===e.length&&t.every(function(r,n){var a=e[n],i=zt(r),o=zt(a);return i&&o?Uo(r,a):!i&&!o?r===a:!1})}function Fe(t,e,r,n,a){var i=t._store,o=i[e];if(!(e in i))if(a!=null)i[e]=a,o=a;else return i[e]=r,r;return o===r||n(o)===n(r)?o:(i[e]=r,r)}function qt(t){return t>=0?1:-1}function _(t){return Math.abs(t)}function In(t,e){return Fs(t).map(function(r){return e(r)})}function $o(t){return hr(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var Bf=Rr("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,a=e.angle,i=e.originalDatas,o=t.props,s=o.pinchable,l=o.ables;if(!s)return!1;var c="onPinch".concat(n?"Group":"","Start"),u="drag".concat(n?"Group":"","ControlStart"),f=(s===!0?t.controlAbles:l.filter(function(g){return s.indexOf(g.name)>-1})).filter(function(g){return g.canPinch&&g[u]}),d=st(t,e,{});n&&(d.targets=n);var p=U(t,c,d);r.isPinch=p!==!1,r.ables=f;var v=r.isPinch;return v?(f.forEach(function(g){if(i[g.name]=i[g.name]||{},!!g[u]){var h=R(R({},e),{datas:i[g.name],parentRotate:a,isPinch:!0});g[u](t,h)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},v):!1},pinch:function(t,e){var r=e.datas,n=e.scale,a=e.distance,i=e.originalDatas,o=e.inputEvent,s=e.targets,l=e.angle;if(r.isPinch){var c=a*(1-1/n),u=st(t,e,{});s&&(u.targets=s);var f="onPinch".concat(s?"Group":"");U(t,f,u);var d=r.ables,p="drag".concat(s?"Group":"","Control");return d.forEach(function(v){v[p]&&v[p](t,R(R({},e),{datas:i[v.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,a=e.inputEvent,i=e.targets,o=e.originalDatas;if(r.isPinch){var s="onPinch".concat(i?"Group":"","End"),l=Ft(t,e,{isDrag:n});i&&(l.targets=i),U(t,s,l);var c=r.ables,u="drag".concat(i?"Group":"","ControlEnd");return c.forEach(function(f){f[u]&&f[u](t,R(R({},e),{isDrag:n,datas:o[f.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,R(R({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,R(R({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,R(R({},e),{targets:t.props.targets}))}}),fi=Ra("scalable"),Gf={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:ho("scalable"),dragControlCondition:fi,viewClassName:ka("scalable"),dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,a=e.inputEvent,i=e.parentDirection,o=No(i,n,a,r),s=t.state,l=s.width,c=s.height,u=s.targetTransform,f=s.target,d=s.pos1,p=s.pos2,v=s.pos4;if(!o||!f)return!1;n||Be(t,e),r.datas={},r.transform=u,r.prevDist=[1,1],r.direction=o,r.startOffsetWidth=l,r.startOffsetHeight=c,r.startValue=[1,1];var g=!o[0]&&!o[1]||o[0]||!o[1];pn(t,e,"scale"),r.isWidth=g;function h(b){r.ratio=b&&isFinite(b)?b:0}r.startPositions=Ut(t.state);function m(b){var E=Do(r.startPositions,b);r.fixedDirection=E.fixedDirection,r.fixedPosition=E.fixedPosition,r.fixedOffset=E.fixedOffset}r.setFixedDirection=m,h(Te(d,p)/Te(p,v)),m([-o[0],-o[1]]);var x=function(b){r.minScaleSize=b},y=function(b){r.maxScaleSize=b};x([-1/0,-1/0]),y([1/0,1/0]);var C=st(t,e,R(R({direction:o,set:function(b){r.startValue=b},setRatio:h,setFixedDirection:m,setMinScaleSize:x,setMaxScaleSize:y},dn(t,e)),{dragStart:Bt.dragStart(t,new Ue().dragStart([0,0],e))})),D=U(t,"onScaleStart",C);return r.startFixedDirection=r.fixedDirection,D!==!1&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),r.isScale?C:!1},dragControl:function(t,e){un(t,e,"scale");var r=e.datas,n=e.parentKeepRatio,a=e.parentFlag,i=e.isPinch,o=e.dragClient,s=e.isRequest,l=e.useSnap,c=e.resolveMatrix,u=r.prevDist,f=r.direction,d=r.startOffsetWidth,p=r.startOffsetHeight,v=r.isScale,g=r.startValue,h=r.isWidth,m=r.ratio;if(!v)return!1;var x=t.props,y=x.throttleScale,C=x.parentMoveable,D=f;!f[0]&&!f[1]&&(D=[1,1]);var b=m&&(n??x.keepRatio)||!1,E=t.state,k=[g[0],g[1]];function T(){var at=Xo(D,b,r,e),tt=at.distWidth,Q=at.distHeight,gt=d?(d+tt)/d:1,lt=p?(p+Q)/p:1;g[0]||(k[0]=tt/d),g[1]||(k[1]=Q/p);var ct=(D[0]||b?gt:1)*k[0],ft=(D[1]||b?lt:1)*k[1];return ct===0&&(ct=qt(u[0])*zr),ft===0&&(ft=qt(u[1])*zr),[ct,ft]}var M=T();if(!i&&t.props.groupable){var z=E.snapRenderInfo||{},O=z.direction;zt(O)&&(O[0]||O[1])&&(E.snapRenderInfo={direction:f,request:e.isRequest})}U(t,"onBeforeScale",st(t,e,{scale:M,setFixedDirection:function(at){return r.setFixedDirection(at),M=T(),M},startFixedDirection:r.startFixedDirection,setScale:function(at){M=at}},!0));var I=[M[0]/k[0],M[1]/k[1]],P=o,L=[0,0],N=!o&&!a&&i;if(N||c?P=ga(t,r.targetAllTransform,[0,0],[0,0],r):o||(P=r.fixedPosition),i||(L=gf(t,I,f,!l&&s,r)),b){D[0]&&D[1]&&L[0]&&L[1]&&(Math.abs(L[0]*d)>Math.abs(L[1]*p)?L[1]=0:L[0]=0);var G=!L[0]&&!L[1];if(G&&(h?I[0]=pt(I[0]*k[0],y)/k[0]:I[1]=pt(I[1]*k[1],y)/k[1]),D[0]&&!D[1]||L[0]&&!L[1]||G&&h){I[0]+=L[0];var j=d*I[0]*k[0]/m;I[1]=j/p/k[1]}else if(!D[0]&&D[1]||!L[0]&&L[1]||G&&!h){I[1]+=L[1];var F=p*I[1]*k[1]*m;I[0]=F/d/k[0]}}else I[0]+=L[0],I[1]+=L[1],L[0]||(I[0]=pt(I[0]*k[0],y)/k[0]),L[1]||(I[1]=pt(I[1]*k[1],y)/k[1]);I[0]===0&&(I[0]=qt(u[0])*zr),I[1]===0&&(I[1]=qt(u[1])*zr),M=yf(I,[k[0],k[1]]);var W=[d,p],B=[d*M[0],p*M[1]];B=Ri(B,r.minScaleSize,r.maxScaleSize,b?m:!1),M=In(2,function(at){return W[at]?B[at]/W[at]:B[at]}),I=In(2,function(at){return M[at]/k[at]});var Z=In(2,function(at){return u[at]?I[at]/u[at]:I[at]}),J="scale(".concat(I.join(", "),")"),H="scale(".concat(M.join(", "),")"),X=fn(r,H,J),V=!g[0]||!g[1],$=gu(t,V?H:J,r.fixedDirection,P,r.fixedOffset,r,V),et=N?$:nt($,r.prevInverseDist||[0,0]);if(r.prevDist=I,r.prevInverseDist=$,M[0]===u[0]&&M[1]===u[1]&&et.every(function(at){return!at})&&!C&&!N)return!1;var ot=st(t,e,R({offsetWidth:d,offsetHeight:p,direction:f,scale:M,dist:I,delta:Z,isPinch:!!i},co(t,X,et,i,e)));return U(t,"onScale",ot),ot},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var n=Ft(t,e,{});return U(t,"onScaleEnd",n),n},dragGroupControlCondition:fi,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var a=Zt(t,"resizable",e);r.moveableScale=t.scale;var i=oe(t,this,"dragControlStart",e,function(c,u){return $r(t,c,r,u)}),o=function(c){n.setFixedDirection(c),i.forEach(function(u,f){u.setFixedDirection(c),$r(t,u.moveable,r,a[f])})};r.setFixedDirection=o;var s=R(R({},n),{targets:t.props.targets,events:i,setFixedDirection:o}),l=U(t,"onScaleGroupStart",s);return r.isScale=l!==!1,r.isScale?s:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){xn(t,"onBeforeScale",function(u){U(t,"onBeforeScaleGroup",st(t,e,R(R({},u),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var a=n.dist,i=r.moveableScale;t.scale=[a[0]*i[0],a[1]*i[1]];var o=t.props.keepRatio,s=r.fixedPosition,l=oe(t,this,"dragControl",e,function(u,f){var d=w(Nt(ta(t.rotation/180*Math.PI,3),[f.datas.originalX*a[0],f.datas.originalY*a[1],1],3),2),p=d[0],v=d[1];return R(R({},f),{parentDist:null,parentScale:a,parentKeepRatio:o,dragClient:vt(s,[p,v])})}),c=R({targets:t.props.targets,events:l},n);return U(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isScale){this.dragControlEnd(t,e);var a=oe(t,this,"dragControlEnd",e),i=Ft(t,e,{targets:t.props.targets,events:a});return U(t,"onScaleGroupEnd",i),r}},request:function(){var t={},e=0,r=0,n=!1;return{isControl:!0,requestStart:function(a){return n=a.useSnap,{datas:t,parentDirection:a.direction||[1,1],useSnap:n}},request:function(a){return e+=a.deltaWidth,r+=a.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:a.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function ve(t,e){return t.map(function(r,n){return De(r,e[n],1,2)})}function di(t,e,r){var n=Mt(t,e),a=Mt(t,r),i=a-n;return i>=0?i:i+2*Math.PI}function Af(t,e){var r=di(t[0],t[1],t[2]),n=di(e[0],e[1],e[2]),a=Math.PI;return!(r>=a&&n<=a||r<=a&&n>=a)}var Nf={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:ka("warpable"),render:function(t,e){var r=t.props,n=r.resizable,a=r.scalable,i=r.warpable,o=r.zoom;if(n||a||!i)return[];var s=t.state,l=s.pos1,c=s.pos2,u=s.pos3,f=s.pos4,d=ve(l,c),p=ve(c,l),v=ve(l,u),g=ve(u,l),h=ve(u,f),m=ve(f,u),x=ve(c,f),y=ve(f,c);return A([e.createElement("div",{className:rt("line"),key:"middeLine1",style:lr(d,h,o)}),e.createElement("div",{className:rt("line"),key:"middeLine2",style:lr(p,m,o)}),e.createElement("div",{className:rt("line"),key:"middeLine3",style:lr(v,x,o)}),e.createElement("div",{className:rt("line"),key:"middeLine4",style:lr(g,y,o)})],w(mo(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return kt(r,rt("direction"))&&kt(r,rt("warpable"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,a=t.props.target,i=n.target,o=Wo(i,r);if(!o||!a)return!1;var s=t.state,l=s.transformOrigin,c=s.is3d,u=s.targetTransform,f=s.targetMatrix,d=s.width,p=s.height,v=s.left,g=s.top;r.datas={},r.targetTransform=u,r.warpTargetMatrix=c?f:re(f,3,4),r.targetInverseMatrix=Mi(se(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=v,r.top=g,r.poses=[[0,0],[d,0],[0,p],[d,p]].map(function(x){return nt(x,l)}),r.nextPoses=r.poses.map(function(x){var y=w(x,2),C=y[0],D=y[1];return Nt(r.warpTargetMatrix,[C,D,0,1],4)}),r.startValue=It(4),r.prevMatrix=It(4),r.absolutePoses=Ut(s),r.posIndexes=lo(o),Be(t,e),pn(t,e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o};var h=st(t,e,R({set:function(x){r.startValue=x}},dn(t,e))),m=U(t,"onWarpStart",h);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,a=e.distX,i=e.distY,o=r.targetInverseMatrix,s=r.prevMatrix,l=r.isWarp,c=r.startValue,u=r.poses,f=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(un(t,e,"matrix3d"),nr(t,"warpable")){var p=f.map(function(T){return d[T]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var v=hn(t,n,{horizontal:p.map(function(T){return T[1]+i}),vertical:p.map(function(T){return T[0]+a})}),g=v.horizontal,h=v.vertical;i-=g.offset,a-=h.offset}var m=ae({datas:r,distX:a,distY:i},!0),x=r.nextPoses.slice();if(f.forEach(function(T){x[T]=vt(x[T],m)}),!au.every(function(T){return Af(T.map(function(M){return u[M]}),T.map(function(M){return x[M]}))}))return!1;var y=Qn(u[0],u[2],u[1],u[3],x[0],x[2],x[1],x[3]);if(!y.length)return!1;var C=wt(o,y,4),D=oo(r,C,!0),b=wt(se(s,4),D,4);r.prevMatrix=D;var E=wt(c,D,4),k=fn(r,"matrix3d(".concat(E.join(", "),")"),"matrix3d(".concat(D.join(", "),")"));return va(e,k),U(t,"onWarp",st(t,e,R({delta:b,matrix:E,dist:D,multiply:wt,transform:k},Gt({transform:k},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return r.isWarp?(r.isWarp=!1,U(t,"onWarpEnd",Ft(t,e,{})),n):!1}},Wf=rt("area-pieces"),Ar=rt("area-piece"),Ko=rt("avoid"),Vf=rt("view-dragging");function On(t){var e=t.areaElement;if(e){var r=t.state,n=r.width,a=r.height;Pi(e,Ko),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function pi(t){return t.createElement("div",{key:"area_pieces",className:Wf},t.createElement("div",{className:Ar}),t.createElement("div",{className:Ar}),t.createElement("div",{className:Ar}),t.createElement("div",{className:Ar}))}var Zo={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,n=r.target,a=r.dragArea,i=r.groupable,o=r.passDragArea,s=t.getState(),l=s.width,c=s.height,u=s.renderPoses,f=o?rt("area","pass"):rt("area");if(i)return[e.createElement("div",{key:"area",ref:Ie(t,"areaElement"),className:f}),pi(e)];if(!n||!a)return[];var d=Qn([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),p=d.length?mn(d,!0):"none";return[e.createElement("div",{key:"area",ref:Ie(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:p}}),pi(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,a=e.clientY,i=e.inputEvent;if(!i)return!1;r.isDragArea=!1;var o=t.areaElement,s=t.state,l=s.moveableClientRect,c=s.renderPoses,u=s.rootMatrix,f=s.is3d,d=l.left,p=l.top,v=Yt(c),g=v.left,h=v.top,m=v.width,x=v.height,y=f?4:3,C=w(Ze(u,[n-d,a-p],y),2),D=C[0],b=C[1];D-=g,b-=h;var E=[{left:g,top:h,width:m,height:b-10},{left:g,top:h,width:D-10,height:x},{left:g,top:h+b+10,width:m,height:x-b-10},{left:g+D+10,top:h,width:m-D-10,height:x}],k=[].slice.call(o.nextElementSibling.children);E.forEach(function(T,M){k[M].style.cssText="left: ".concat(T.left,"px;top: ").concat(T.top,"px; width: ").concat(T.width,"px; height: ").concat(T.height,"px;")}),Ti(o,Ko),s.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;r.isDragArea||(r.isDragArea=!0,On(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,n=e.datas;if(!r)return!1;n.isDragArea||On(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){On(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Ii(function(){e.disableNativeEvent=!1})}},Hf=Rr("origin",{props:["origin","svgOrigin"],render:function(t,e){var r=t.props,n=r.zoom,a=r.svgOrigin,i=r.groupable,o=t.getState(),s=o.beforeOrigin,l=o.rotation,c=o.svg,u=o.allMatrix,f=o.is3d,d=o.left,p=o.top,v=o.offsetWidth,g=o.offsetHeight,h;if(!i&&c&&a){var m=w(Ma(a,v,g),2),x=m[0],y=m[1],C=f?4:3,D=Ct(u,[x,y],C);h=Qr(l,n,nt(D,[d,p]))}else h=Qr(l,n,s);return[e.createElement("div",{className:rt("control","origin"),style:h,key:"beforeOrigin"})]}});function Ff(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var qf={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,n=r.scrollContainer,a=n===void 0?t.getContainer():n,i=r.scrollOptions,o=new _s,s=te(a,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var l=e.isControl?"controlGesto":"targetGesto",c=e.targets;o.on("scroll",function(u){var f=u.container,d=u.direction,p=st(t,e,{scrollContainer:f,direction:d}),v=c?"onScrollGroup":"onScroll";c&&(p.targets=c),U(t,v,p)}).on("move",function(u){var f=u.offsetX,d=u.offsetY,p=u.inputEvent;t[l].scrollBy(f,d,p.inputEvent,!0)}).on("scrollDrag",function(u){var f=u.next;f(t[l].getCurrentEvent())}),o.dragStart(e,R({container:s},i))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,a=n.scrollContainer,i=a===void 0?t.getContainer():a,o=n.scrollThreshold,s=o===void 0?0:o,l=n.scrollThrottleTime,c=l===void 0?0:l,u=n.getScrollPosition,f=u===void 0?Ff:u,d=n.scrollOptions;return r.drag(e,R({container:i,threshold:s,throttleTime:c,getScrollPosition:function(p){return f({scrollContainer:p.container,direction:p.direction})}},d)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,R(R({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,R(R({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,R(R({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,R(R({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,R(R({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,R(R({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,R(R({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;(e=r.dragScroll)===null||e===void 0||e.dragEnd(),r.dragScroll=null}},Jo={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","requestStyles"],events:["changeTargets"]},Yf=Rr("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=$o(r.padding||{}),a=n.left,i=n.top,o=n.right,s=n.bottom,l=t.getState(),c=l.renderPoses,u=l.pos1,f=l.pos2,d=l.pos3,p=l.pos4,v=[u,f,d,p],g=[];return a>0&&g.push([0,2]),i>0&&g.push([0,1]),o>0&&g.push([1,3]),s>0&&g.push([2,3]),g.map(function(h,m){var x=w(h,2),y=x[0],C=x[1],D=v[y],b=v[C],E=c[y],k=c[C],T=Qn([0,0],[100,0],[0,100],[100,100],D,b,E,k);if(T.length)return e.createElement("div",{key:"padding".concat(m),className:rt("padding"),style:{transform:mn(T,!0)}})})}}),vi=["nw","ne","se","sw"];function Nr(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var Xf=[1,2,5,6],Uf=[0,3,4,7],we=[1,-1,-1,1],Me=[1,1,-1,-1];function Ta(t,e,r,n,a,i,o,s){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=r),s===void 0&&(s=n);var l=[],c=!1,u=t.filter(function(d){return!d.virtual}),f=u.map(function(d){var p=d.horizontal,v=d.vertical,g=d.pos;if(v&&!c&&(c=!0,l.push("/")),c){var h=Math.max(0,v===1?g[1]-i:s-g[1]);return l.push($t(h,n,e)),h}else{var h=Math.max(0,p===1?g[0]-a:o-g[0]);return l.push($t(h,r,e)),h}});return{radiusPoses:u,styles:l,raws:f}}function Qo(t){for(var e=[0,0],r=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];i.sub&&(i.horizontal&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1,r[0]=a+1),i.vertical&&(r[1]===0&&(r[0]=a),r[1]=a-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function ts(t,e,r,n,a,i,o){var s,l,c,u;i===void 0&&(i=[0,0]),o===void 0&&(o=!1);var f=t.indexOf("/"),d=(f>-1?t.slice(0,f):t).length,p=t.slice(0,d),v=t.slice(d+1),g=p.length,h=v.length,m=h>0,x=w(p,4),y=x[0],C=y===void 0?"0px":y,D=x[1],b=D===void 0?C:D,E=x[2],k=E===void 0?C:E,T=x[3],M=T===void 0?b:T,z=w(v,4),O=z[0],I=O===void 0?C:O,P=z[1],L=P===void 0?m?I:b:P,N=z[2],G=N===void 0?m?I:k:N,j=z[3],F=j===void 0?m?L:M:j,W=[C,b,k,M].map(function(V){return yt(V,e)}),B=[I,L,G,F].map(function(V){return yt(V,r)}),Z=W.slice(),J=B.slice();s=w(Nr([Z[0],Z[1]],e),2),Z[0]=s[0],Z[1]=s[1],l=w(Nr([Z[3],Z[2]],e),2),Z[3]=l[0],Z[2]=l[1],c=w(Nr([J[0],J[3]],r),2),J[0]=c[0],J[3]=c[1],u=w(Nr([J[1],J[2]],r),2),J[1]=u[0],J[2]=u[1];var H=o?Z:Z.slice(0,Math.max(i[0],g)),X=o?J:J.slice(0,Math.max(i[1],h));return A(A([],w(H.map(function(V,$){var et=vi[$];return{virtual:$>=g,horizontal:we[$],vertical:0,pos:[n+V,a+(Me[$]===-1?r:0)],sub:!0,raw:W[$],direction:et}})),!1),w(X.map(function(V,$){var et=vi[$];return{virtual:$>=h,horizontal:0,vertical:Me[$],pos:[n+(we[$]===-1?e:0),a+V],sub:!0,raw:B[$],direction:et}})),!1)}function $f(t,e,r,n,a){a===void 0&&(a=e.length);var i=Qo(t.slice(n)),o=i.horizontalRange,s=i.verticalRange,l=r-n,c=0;if(l===0)c=a;else if(l>0&&l<o[1])c=o[1]-l;else if(l>=s[0])c=s[0]+s[1]-l;else return;t.splice(r,c),e.splice(r,c)}function Kf(t,e,r,n,a,i,o,s,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var f=Qo(t.slice(r)),d=f.horizontalRange,p=f.verticalRange;if(n>-1)for(var v=we[n]===1?i-c:s-i,g=d[1];g<=n;++g){var h=Me[g]===1?u:l,m=0;if(n===g?m=i:g===0?m=c+v:we[g]===-1&&(m=s-(e[r][0]-c)),t.splice(r+g,0,{horizontal:we[g],vertical:0,pos:[m,h]}),e.splice(r+g,0,[m,h]),g===0)break}else if(a>-1){var x=Me[a]===1?o-u:l-o;if(d[1]===0&&p[1]===0){var y=[c+x,u];t.push({horizontal:we[0],vertical:0,pos:y}),e.push(y)}for(var C=p[0],g=p[1];g<=a;++g){var m=we[g]===1?c:s,h=0;if(a===g?h=o:g===0?h=u+x:Me[g]===1?h=e[r+C][1]:Me[g]===-1&&(h=l-(e[r+C][1]-u)),t.push({horizontal:0,vertical:Me[g],pos:[m,h]}),e.push([m,h]),g===0)break}}}function Zf(t,e){e===void 0&&(e=t.map(function(a){return a.raw}));var r=t.map(function(a,i){return a.horizontal?e[i]:null}).filter(function(a){return a!=null}),n=t.map(function(a,i){return a.vertical?e[i]:null}).filter(function(a){return a!=null});return{horizontals:r,verticals:n}}var Jf=[[0,-1,"n"],[1,0,"e"]],Qf=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ia(t,e,r){var n=t.props.clipRelative,a=t.state,i=a.width,o=a.height,s=e,l=s.type,c=s.poses,u=l==="rect",f=l==="circle";if(l==="polygon")return r.map(function(b){return"".concat($t(b[0],i,n)," ").concat($t(b[1],o,n))});if(u||l==="inset"){var d=r[1][1],p=r[3][0],v=r[7][0],g=r[5][1];if(u)return[d,p,g,v].map(function(b){return"".concat(b,"px")});var h=[d,i-p,o-g,v].map(function(b,E){return $t(b,E%2?i:o,n)});if(r.length>8){var m=w(nt(r[4],r[0]),2),x=m[0],y=m[1];h.push.apply(h,A(["round"],w(Ta(c.slice(8).map(function(b,E){return R(R({},b),{pos:r[E]})}),n,x,y,v,d,p,g).styles),!1))}return h}else if(f||l==="ellipse"){var C=r[0],D=$t(_(r[1][1]-C[1]),f?Math.sqrt((i*i+o*o)/2):o,n),h=f?[D]:[$t(_(r[2][0]-C[0]),i,n),D];return h.push("at",$t(C[0],i,n),$t(C[1],o,n)),h}}function en(t,e,r,n){var a=[n,(n+e)/2,e],i=[t,(t+r)/2,r];return Qf.map(function(o){var s=w(o,3),l=s[0],c=s[1],u=s[2],f=a[l+1],d=i[c+1];return{vertical:_(c),horizontal:_(l),direction:u,pos:[f,d]}})}function es(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(n){var a=n.pos;e[0]=Math.min(e[0],a[0]),e[1]=Math.max(e[1],a[0]),r[0]=Math.min(r[0],a[1]),r[1]=Math.max(r[1],a[1])}),[_(e[1]-e[0]),_(r[1]-r[0])]}function gi(t,e,r,n,a){var i,o,s,l,c,u,f,d,p;if(t){var v=a;if(!v){var g=Ht(t),h=g("clipPath");v=h!=="none"?h:g("clip")}if(!((!v||v==="none"||v==="auto")&&(v=n,!v))){var m=qs(v),x=m.prefix,y=x===void 0?v:x,C=m.value,D=C===void 0?"":C,b=y==="circle",E=" ";if(y==="polygon"){var k=Aa(D||"0% 0%, 100% 0%, 100% 100%, 0% 100%");E=",";var T=k.map(function(Tt){var jt=w(Tt.split(" "),2),Lt=jt[0],St=jt[1];return{vertical:1,horizontal:1,pos:[yt(Lt,e),yt(St,r)]}}),M=xr(T.map(function(Tt){return Tt.pos}));return{type:y,clipText:v,poses:T,splitter:E,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(b||y==="ellipse"){var z="",O="",I=0,P=0,k=ze(D);if(b){var L="";i=w(k,4),o=i[0],L=o===void 0?"50%":o,s=i[2],z=s===void 0?"50%":s,l=i[3],O=l===void 0?"50%":l,I=yt(L,Math.sqrt((e*e+r*r)/2)),P=I}else{var N="",G="";c=w(k,5),u=c[0],N=u===void 0?"50%":u,f=c[1],G=f===void 0?"50%":f,d=c[3],z=d===void 0?"50%":d,p=c[4],O=p===void 0?"50%":p,I=yt(N,e),P=yt(G,r)}var j=[yt(z,e),yt(O,r)],T=A([{vertical:1,horizontal:1,pos:j,direction:"nesw"}],w(Jf.slice(0,b?1:2).map(function(Lt){return{vertical:_(Lt[1]),horizontal:Lt[0],direction:Lt[2],sub:!0,pos:[j[0]+Lt[0]*I,j[1]+Lt[1]*P]}})),!1);return{type:y,clipText:v,radiusX:I,radiusY:P,left:j[0]-I,top:j[1]-P,right:j[0]+I,bottom:j[1]+P,poses:T,splitter:E}}else if(y==="inset"){var k=ze(D||"0 0 0 0"),F=k.indexOf("round"),W=(F>-1?k.slice(0,F):k).length,B=k.slice(W+1),Z=w(k.slice(0,W),4),J=Z[0],H=Z[1],X=H===void 0?J:H,V=Z[2],$=V===void 0?J:V,et=Z[3],ot=et===void 0?X:et,at=w([J,$].map(function(Lt){return yt(Lt,r)}),2),tt=at[0],Q=at[1],gt=w([ot,X].map(function(Lt){return yt(Lt,e)}),2),lt=gt[0],ct=gt[1],ft=e-ct,bt=r-Q,mt=ts(B,ft-lt,bt-tt,lt,tt),T=A(A([],w(en(tt,ft,bt,lt)),!1),w(mt),!1);return{type:"inset",clipText:v,poses:T,top:tt,left:lt,right:ft,bottom:bt,radius:B,splitter:E}}else if(y==="rect"){var k=Aa(D||"0px, ".concat(e,"px, ").concat(r,"px, 0px"));E=",";var ut=w(k.map(function(de){var pe=ra(de).value;return pe}),4),ht=ut[0],ct=ut[1],Q=ut[2],lt=ut[3],T=en(ht,ct,Q,lt);return{type:"rect",clipText:v,poses:T,top:ht,right:ct,bottom:Q,left:lt,values:k,splitter:E}}}}}function td(t,e,r,n,a){var i=t[e],o=i.direction,s=i.sub,l=t.map(function(){return[0,0]}),c=o?o.split(""):[];if(n&&e<8){var u=c.filter(function(I){return I==="w"||I==="e"}),f=c.filter(function(I){return I==="n"||I==="s"}),d=u[0],p=f[0];l[e]=r;var v=w(es(t),2),g=v[0],h=v[1],m=g&&h?g/h:0;if(m&&a){var x=(e+4)%8,y=t[x].pos,C=[0,0];o.indexOf("w")>-1?C[0]=-1:o.indexOf("e")>-1&&(C[0]=1),o.indexOf("n")>-1?C[1]=-1:o.indexOf("s")>-1&&(C[1]=1);var D=Yo([g,h],r,m,C,!0),b=g+D[0],E=h+D[1],k=y[1],T=y[1],M=y[0],z=y[0];C[0]===-1?M=z-b:C[0]===1?z=M+b:(M=M-b/2,z=z+b/2),C[1]===-1?k=T-E:(C[1]===1||(k=T-E/2),T=k+E);var O=en(k,z,T,M);t.forEach(function(I,P){l[P][0]=O[P].pos[0]-I.pos[0],l[P][1]=O[P].pos[1]-I.pos[1]})}else t.forEach(function(I,P){var L=I.direction;L&&(L.indexOf(d)>-1&&(l[P][0]=r[0]),L.indexOf(p)>-1&&(l[P][1]=r[1]))}),d&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),p&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else o&&!s?c.forEach(function(I){var P=I==="n"||I==="s";t.forEach(function(L,N){var G=L.direction,j=L.horizontal,F=L.vertical;!G||G.indexOf(I)===-1||(l[N]=[P||!j?0:r[0],!P||!F?0:r[1]])})}):l[e]=r;return l}function ed(t,e){var r=w(io(t,e),2),n=r[0],a=r[1],i=e.datas,o=i.clipPath,s=i.clipIndex,l=o,c=l.type,u=l.poses,f=l.splitter,d=u.map(function(x){return x.pos});if(c==="polygon")d.splice(s,0,[n,a]);else if(c==="inset"){var p=Xf.indexOf(s),v=Uf.indexOf(s),g=u.length;if(Kf(u,d,8,p,v,n,a,d[4][0],d[4][1],d[0][0],d[0][1]),g===u.length)return}else return;var h=Ia(t,o,d),m="".concat(c,"(").concat(h.join(f),")");U(t,"onClip",st(t,e,R({clipEventType:"added",clipType:c,poses:d,clipStyles:h,clipStyle:m,distX:0,distY:0},Gt({clipPath:m},e))))}function rd(t,e){var r=e.datas,n=r.clipPath,a=r.clipIndex,i=n,o=i.type,s=i.poses,l=i.splitter,c=s.map(function(p){return p.pos}),u=c.length;if(o==="polygon")s.splice(a,1),c.splice(a,1);else if(o==="inset"){if(a<8||($f(s,c,a,8,u),u===s.length))return}else return;var f=Ia(t,n,c),d="".concat(o,"(").concat(f.join(l),")");U(t,"onClip",st(t,e,R({clipEventType:"removed",clipType:o,poses:c,clipStyles:f,clipStyle:d,distX:0,distY:0},Gt({clipPath:d},e))))}var nd={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var r=t.props,n=r.customClipPath,a=r.defaultClipPath,i=r.clipArea,o=r.zoom,s=r.groupable,l=t.getState(),c=l.target,u=l.width,f=l.height,d=l.allMatrix,p=l.is3d,v=l.left,g=l.top,h=l.pos1,m=l.pos2,x=l.pos3,y=l.pos4,C=l.clipPathState,D=l.snapBoundInfos,b=l.rotation;if(!c||s)return[];var E=gi(c,u,f,a||"inset",C||n);if(!E)return[];var k=p?4:3,T=E.type,M=E.poses,z=M.map(function(ct){var ft=Ct(d,ct.pos,k);return[ft[0]-v,ft[1]-g]}),O=[],I=[],P=T==="rect",L=T==="inset",N=T==="polygon";if(P||L||N){var G=L?z.slice(0,8):z;I=G.map(function(ct,ft){var bt=ft===0?G[G.length-1]:G[ft-1],mt=Mt(bt,ct),ut=_o(bt,ct);return e.createElement("div",{key:"clipLine".concat(ft),className:rt("line","clip-line","snap-control"),"data-clip-index":ft,style:{width:"".concat(ut,"px"),transform:"translate(".concat(bt[0],"px, ").concat(bt[1],"px) rotate(").concat(mt,"rad) scaleY(").concat(o,")")}})})}if(O=z.map(function(ct,ft){return e.createElement("div",{key:"clipControl".concat(ft),className:rt("control","clip-control","snap-control"),"data-clip-index":ft,style:{transform:"translate(".concat(ct[0],"px, ").concat(ct[1],"px) rotate(").concat(b,"rad) scale(").concat(o,")")}})}),L&&O.push.apply(O,A([],w(z.slice(8).map(function(ct,ft){return e.createElement("div",{key:"clipRadiusControl".concat(ft),className:rt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ft,style:{transform:"translate(".concat(ct[0],"px, ").concat(ct[1],"px) rotate(").concat(b,"rad) scale(").concat(o,")")}})})),!1)),T==="circle"||T==="ellipse"){var j=E.left,F=E.top,W=E.radiusX,B=E.radiusY,Z=w(nt(Ct(d,[j,F],k),Ct(d,[0,0],k)),2),J=Z[0],H=Z[1],X="none";if(!i){for(var V=Math.max(10,W/5,B/5),$=[],et=0;et<=V;++et){var ot=Math.PI*2/V*et;$.push([W+(W-o)*Math.cos(ot),B+(B-o)*Math.sin(ot)])}$.push([W,-2]),$.push([-2,-2]),$.push([-2,B*2+2]),$.push([W*2+2,B*2+2]),$.push([W*2+2,-2]),$.push([W,-2]),X="polygon(".concat($.map(function(ct){return"".concat(ct[0],"px ").concat(ct[1],"px")}).join(", "),")")}O.push(e.createElement("div",{key:"clipEllipse",className:rt("clip-ellipse","snap-control"),style:{width:"".concat(W*2,"px"),height:"".concat(B*2,"px"),clipPath:X,transform:"translate(".concat(-v+J,"px, ").concat(-g+H,"px) ").concat(mn(d))}}))}if(i){var at=Yt(A([h,m,x,y],w(z),!1)),tt=at.width,Q=at.height,gt=at.left,lt=at.top;if(N||P||L){var $=L?z.slice(0,8):z;O.push(e.createElement("div",{key:"clipArea",className:rt("clip-area","snap-control"),style:{width:"".concat(tt,"px"),height:"".concat(Q,"px"),transform:"translate(".concat(gt,"px, ").concat(lt,"px)"),clipPath:"polygon(".concat($.map(function(ft){return"".concat(ft[0]-gt,"px ").concat(ft[1]-lt,"px")}).join(", "),")")}}))}}return D&&["vertical","horizontal"].forEach(function(ct){var ft=D[ct],bt=ct==="horizontal";ft.isSnap&&I.push.apply(I,A([],w(ft.snap.posInfos.map(function(mt,ut){var ht=mt.pos,Tt=nt(Ct(d,bt?[0,ht]:[ht,0],k),[v,g]),jt=nt(Ct(d,bt?[u,ht]:[ht,f],k),[v,g]);return br(e,"",Tt,jt,o,"clip".concat(ct,"snap").concat(ut),"guideline")})),!1)),ft.isBound&&I.push.apply(I,A([],w(ft.bounds.map(function(mt,ut){var ht=mt.pos,Tt=nt(Ct(d,bt?[0,ht]:[ht,0],k),[v,g]),jt=nt(Ct(d,bt?[u,ht]:[ht,f],k),[v,g]);return br(e,"",Tt,jt,o,"clip".concat(ct,"bounds").concat(ut),"guideline","bounds","bold")})),!1))}),A(A([],w(O),!1),w(I),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props,n=r.dragWithClip,a=n===void 0?!0:n;return a?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,R(R({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=r.target,s=r.width,l=r.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",f=e.datas,d=gi(o,s,l,a||"inset",i);if(!d)return!1;var p=d.clipText,v=d.type,g=d.poses,h=U(t,"onClipStart",st(t,e,{clipType:v,clipStyle:p,poses:g.map(function(m){return m.pos})}));return h===!1?(f.isClipStart=!1,!1):(f.isControl=u&&u.indexOf("clip-control")>-1,f.isLine=u.indexOf("clip-line")>-1,f.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,f.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,r.clipPathState=p,Be(t,e),!0)},dragControl:function(t,e){var r,n,a,i=e.datas,o=e.originalDatas,s=e.isDragTarget;if(!i.isClipStart)return!1;var l=i,c=l.isControl,u=l.isLine,f=l.isArea,d=l.clipIndex,p=l.clipPath;if(!p)return!1;var v=Pe(t.props,"clippable"),g=v.keepRatio,h=0,m=0,x=o.draggable,y=ae(e);s&&x?(r=w(x.prevBeforeDist,2),h=r[0],m=r[1]):(n=w(y,2),h=n[0],m=n[1]);var C=[h,m],D=t.state,b=D.width,E=D.height,k=!f&&!c&&!u,T=p.type,M=p.poses,z=p.splitter,O=M.map(function(xt){return xt.pos});k&&(h=-h,m=-m);var I=!c||M[d].direction==="nesw",P=T==="inset"||T==="rect",L=M.map(function(){return[0,0]});if(c&&!I){var N=M[d],G=N.horizontal,j=N.vertical,F=[h*_(G),m*_(j)];L=td(M,d,F,P,g)}else I&&(L=O.map(function(){return[h,m]}));var W=O.map(function(xt,_t){return vt(xt,L[_t])}),B=A([],w(W),!1);D.snapBoundInfos=null;var Z=p.type==="circle",J=p.type==="ellipse";if(Z||J){var H=Yt(W),X=_(H.bottom-H.top),V=_(J?H.right-H.left:X),$=W[0][1]+X,et=W[0][0]-V,ot=W[0][0]+V;Z&&(B.push([ot,H.bottom]),L.push([1,0])),B.push([H.left,$]),L.push([0,1]),B.push([et,H.bottom]),L.push([1,0])}var at=Mo((v.clipHorizontalGuidelines||[]).map(function(xt){return yt("".concat(xt),E)}),(v.clipVerticalGuidelines||[]).map(function(xt){return yt("".concat(xt),b)}),b,E),tt=[],Q=[];if(Z||J)tt=[B[4][0],B[2][0]],Q=[B[1][1],B[3][1]];else if(P){var gt=[B[0],B[2],B[4],B[6]],lt=[L[0],L[2],L[4],L[6]];tt=gt.filter(function(xt,_t){return lt[_t][0]}).map(function(xt){return xt[0]}),Q=gt.filter(function(xt,_t){return lt[_t][1]}).map(function(xt){return xt[1]})}else tt=B.filter(function(xt,_t){return L[_t][0]}).map(function(xt){return xt[0]}),Q=B.filter(function(xt,_t){return L[_t][1]}).map(function(xt){return xt[1]});var ct=[0,0],ft=ti(at,v.clipTargetBounds&&{left:0,top:0,right:b,bottom:E},tt,Q,5),bt=ft.horizontal,mt=ft.vertical,ut=bt.offset,ht=mt.offset;if(bt.isBound&&(ct[1]+=ut),mt.isBound&&(ct[0]+=ht),(J||Z)&&L[0][0]===0&&L[0][1]===0){var H=Yt(W),Tt=H.bottom-H.top,jt=J?H.right-H.left:Tt,Lt=mt.isBound?_(ht):mt.snapIndex===0?-ht:ht,St=bt.isBound?_(ut):bt.snapIndex===0?-ut:ut;jt-=Lt,Tt-=St,Z&&(Tt=bo(mt,bt)>0?Tt:jt,jt=Tt);var Dt=B[0];B[1][1]=Dt[1]-Tt,B[2][0]=Dt[0]+jt,B[3][1]=Dt[1]+Tt,B[4][0]=Dt[0]-jt}else if(P&&g&&c){var de=w(es(M),2),pe=de[0],La=de[1],Pa=pe&&La?pe/La:0,Cs=M[d],Tr=Cs.direction||"",bn=B[1][1],$=B[5][1],et=B[7][0],ot=B[3][0];_(ut)<=_(ht)?ut=qt(ut)*_(ht)/Pa:ht=qt(ht)*_(ut)*Pa,Tr.indexOf("w")>-1?et-=ht:Tr.indexOf("e")>-1?ot-=ht:(et+=ht/2,ot-=ht/2),Tr.indexOf("n")>-1?bn-=ut:Tr.indexOf("s")>-1?$-=ut:(bn+=ut/2,$-=ut/2);var Ss=en(bn,ot,$,et);B.forEach(function(Ba,Rs){var En;En=w(Ss[Rs].pos,2),Ba[0]=En[0],Ba[1]=En[1]})}else B.forEach(function(xt,_t){var _a=L[_t];_a[0]&&(xt[0]-=ht),_a[1]&&(xt[1]-=ut)});var ja=Ia(t,p,W),Cn="".concat(T,"(").concat(ja.join(z),")");if(D.clipPathState=Cn,Z||J)tt=[B[4][0],B[2][0]],Q=[B[1][1],B[3][1]];else if(P){var gt=[B[0],B[2],B[4],B[6]];tt=gt.map(function(_t){return _t[0]}),Q=gt.map(function(_t){return _t[1]})}else tt=B.map(function(xt){return xt[0]}),Q=B.map(function(xt){return xt[1]});if(D.snapBoundInfos=ti(at,v.clipTargetBounds&&{left:0,top:0,right:b,bottom:E},tt,Q,1),x){var Es=D.is3d,Ds=D.allMatrix,ks=Es?4:3,Sn=ct;s&&(Sn=[C[0]+ct[0]-y[0],C[1]+ct[1]-y[1]]),x.deltaOffset=wt(Ds,[Sn[0],Sn[1],0,0],ks)}return U(t,"onClip",st(t,e,R({clipEventType:"changed",clipType:T,poses:W,clipStyle:Cn,clipStyles:ja,distX:h,distY:m},Gt((a={},a[T==="rect"?"clip":"clipPath"]=Cn,a),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,a=e.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return o?(U(t,"onClipEnd",Ft(t,e,{})),a&&(s?rd(t,e):i&&ed(t,e)),a||r):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},ad={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":kt(e.inputEvent.target,rt("origin"))},dragControlStart:function(t,e){var r=e.datas;Be(t,e);var n=st(t,e,{dragStart:Bt.dragStart(t,new Ue().dragStart([0,0],e))}),a=U(t,"onDragOriginStart",n);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,a===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,a=e.isRequest;if(!r.isDragOrigin)return!1;var i=w(ae(e),2),o=i[0],s=i[1],l=t.state,c=l.width,u=l.height,f=l.offsetMatrix,d=l.targetMatrix,p=l.is3d,v=t.props.originRelative,g=v===void 0?!0:v,h=p?4:3,m=[o,s];if(a){var x=e.distOrigin;(x[0]||x[1])&&(m=x)}var y=vt(r.startOrigin,m),C=vt(r.startTargetOrigin,m),D=nt(m,r.prevOrigin),b=Mr(f,d,y,h),E=t.getRect(),k=Yt(Ge(b,c,u,h)),T=[E.left-k.left,E.top-k.top];r.prevOrigin=m;var M=[$t(C[0],c,g),$t(C[1],u,g)].join(" "),z=Bt.drag(t,wr(e,t.state,T,!!n,!1)),O=st(t,e,R(R({width:c,height:u,origin:y,dist:m,delta:D,transformOrigin:M,drag:z},Gt({transformOrigin:M,transform:z.transform},e)),{afterTransform:z.transform}));return U(t,"onDragOrigin",O),O},dragControlEnd:function(t,e){var r=e.datas;return r.isDragOrigin?(U(t,"onDragOriginEnd",Ft(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);return!!r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return r?(t.transformOrigin=r.transformOrigin,!0):!1},request:function(t){var e={},r=t.getRect(),n=0,a=0,i=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-r.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-r.top:"deltaY"in s&&(a+=s.deltaY)),{datas:e,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function id(t,e,r,n){var a=t.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,i=t.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,o=-1;if(e===0&&(a===0?o=0:a===1&&(o=1)),e===2&&(a<=2?o=2:a<=3&&(o=3)),e===3&&(i===0?o=4:i<4&&(o=7)),e===1&&(i<=1?o=5:i<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];od(t,o),o<4?s.pos[0]=r:s.pos[1]=n}}function od(t,e){e<4?t.slice(0,e+1).forEach(function(r){r.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(r){r.virtual=!1}))}function sd(t,e){e<4?t.slice(e,4).forEach(function(r){r.virtual=!0}):t.slice(e).forEach(function(r){r.virtual=!0})}function hi(t,e,r,n,a){n===void 0&&(n=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=ze(t),ts(i,e,r,0,0,n,a)}function mi(t,e,r,n,a){var i=t.state,o=i.width,s=i.height,l=Ta(a,t.props.roundRelative,o,s),c=l.raws,u=l.styles,f=l.radiusPoses,d=Zf(f,c),p=d.horizontals,v=d.verticals,g=u.join(" ");i.borderRadiusState=g;var h=st(t,e,R({horizontals:p,verticals:v,borderRadius:g,width:o,height:s,delta:n,dist:r},Gt({borderRadius:g},e)));return U(t,"onRound",h),h}function xi(t){var e,r,n=t.getState().style,a=n.borderRadius||"";if(!a&&t.props.groupable){var i=t.moveables[0],o=t.getTargets()[0];o&&((i==null?void 0:i.props.target)===o?(a=(r=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=a):(a=Da(o).borderRadius,n.borderRadius=a))}return a}var ld={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?rt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),n=r.target,a=r.width,i=r.height,o=r.allMatrix,s=r.is3d,l=r.left,c=r.top,u=r.borderRadiusState,f=t.props,d=f.minRoundControls,p=d===void 0?[0,0]:d,v=f.maxRoundControls,g=v===void 0?[4,4]:v,h=f.zoom,m=f.roundPadding,x=m===void 0?0:m,y=f.isDisplayShadowRoundControls,C=f.groupable;if(!n)return null;var D=u||xi(t),b=s?4:3,E=hi(D,a,i,p,!0);if(!E)return null;var k=0,T=0,M=C?[0,0]:[l,c];return E.map(function(z,O){var I=z.horizontal,P=z.vertical,L=z.direction||"",N=A([],w(z.pos),!1);T+=Math.abs(I),k+=Math.abs(P),I&&L.indexOf("n")>-1&&(N[1]-=x),P&&L.indexOf("w")>-1&&(N[0]-=x),I&&L.indexOf("s")>-1&&(N[1]+=x),P&&L.indexOf("e")>-1&&(N[0]+=x);var G=nt(Ct(o,N,b),M),j=z.vertical?k<=g[1]&&(y||!z.virtual):T<=g[0]&&(y||!z.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(O),className:rt("control","border-radius",z.vertical?"vertical":"",z.virtual?"virtual":""),"data-radius-index":O,style:{display:j?"block":"none",transform:"translate(".concat(G[0],"px, ").concat(G[1],"px) scale(").concat(h,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,n=e.datas,a=r.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=o?parseInt(a.getAttribute("data-radius-index"),10):-1,c=-1;if(s){var u=a.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!o&&!s)return!1;var f=st(t,e,{}),d=U(t,"onRoundStart",f);if(d===!1)return!1;n.lineIndex=c,n.controlIndex=l,n.isControl=o,n.isLine=s,Be(t,e);var p=t.props,v=p.roundRelative,g=p.minRoundControls,h=g===void 0?[0,0]:g,m=t.state,x=m.width,y=m.height;n.isRound=!0,n.prevDist=[0,0];var C=xi(t),D=hi(C||"",x,y,h,!0)||[];return n.controlPoses=D,m.borderRadiusState=Ta(D,v,x,y).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var a=r.controlIndex,i=w(ae(e),2),o=i[0],s=i[1],l=[o,s],c=nt(l,r.prevDist),u=t.props.maxRoundControls,f=u===void 0?[4,4]:u,d=t.state,p=d.width,v=d.height,g=n[a],h=g.vertical,m=g.horizontal,x=n.map(function(C){var D=C.horizontal,b=C.vertical,E=[D*m*l[0],b*h*l[1]];if(D){if(f[0]===1)return E;if(f[0]<4&&D!==m)return E}else{if(f[1]===0)return E[1]=b*m*l[0]/p*v,E;if(h){if(f[1]===1)return E;if(f[1]<4&&b!==h)return E}}return[0,0]});x[a]=l;var y=n.map(function(C,D){return R(R({},C),{pos:vt(C.pos,x[D])})});return a<4?y.slice(0,a+1).forEach(function(C){C.virtual=!1}):y.slice(4,a+1).forEach(function(C){C.virtual=!1}),r.prevDist=[o,s],mi(t,e,l,c,y)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,a=e.isDouble;if(!n.isRound)return!1;var i=n.isControl,o=n.controlIndex,s=n.isLine,l=n.lineIndex,c=n.controlPoses,u=c.filter(function(m){var x=m.virtual;return x}).length,f=t.props.roundClickable,d=f===void 0?!0:f;if(a&&d){if(i&&(d===!0||d==="control"))sd(c,o);else if(s&&(d===!0||d==="line")){var p=w(io(t,e),2),v=p[0],g=p[1];id(c,l,v,g)}u!==c.filter(function(m){var x=m.virtual;return x}).length&&mi(t,e,[0,0],[0,0],c)}var h=Ft(t,e,{});return U(t,"onRoundEnd",h),r.borderRadiusState="",h},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var n=t.moveables,a=t.props.targets,i=Zt(t,"roundable",e),o=R({targets:t.props.targets,events:i.map(function(s,l){return R(R({},s),{target:a[l],moveable:n[l],currentTarget:n[l]})})},r);return U(t,"onRoundGroupStart",o),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var n=t.moveables,a=t.props.targets,i=Zt(t,"roundable",e),o=R({targets:t.props.targets,events:i.map(function(s,l){return R(R(R({},s),{target:a[l],moveable:n[l],currentTarget:n[l]}),Gt({borderRadius:r.borderRadius},s))})},r);return U(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var r=t.moveables,n=t.props.targets,a=Zt(t,"roundable",e);xn(t,"onRound",function(s){var l=R({targets:t.props.targets,events:a.map(function(c,u){return R(R(R({},c),{target:n[u],moveable:r[u],currentTarget:r[u]}),Gt({borderRadius:s.borderRadius},c))})},s);U(t,"onRoundGroup",l)});var i=this.dragControlEnd(t,e);if(!i)return!1;var o=R({targets:t.props.targets,events:a.map(function(s,l){var c;return R(R({},s),{target:n[l],moveable:r[l],currentTarget:r[l],lastEvent:(c=s.datas)===null||c===void 0?void 0:c.lastEvent})})},i);return U(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function cd(t,e){var r=e?4:3,n=It(r),a="matrix".concat(e?"3d":"","(").concat(n.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var rs={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var r=t.state,n=r.is3d,a=r.targetMatrix,i=r.inlineTransform,o=n?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(wi(a,!0),")"),s=!i||i==="none"?o:i;e.datas.startTransforms=cd(s,n)?[]:ze(s)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return st(t,e,{setTransform:function(r){e.datas.startTransforms=zt(r)?r:ze(r)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return st(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),U(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),U(t,"onBeforeRender",st(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),U(t,"onBeforeRenderEnd",st(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=Zt(t,"beforeRenderable",e),a=t.moveables,i=n.map(function(o,s){var l=a[s];return r.setTransform(l,o),r.resetStyle(o),r.fillDragStartParams(l,o)});U(t,"onBeforeRenderGroupStart",st(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=Zt(t,"beforeRenderable",e),a=t.moveables,i=n.map(function(o,s){var l=a[s];return r.resetStyle(o),r.fillDragParams(l,o)});U(t,"onBeforeRenderGroup",st(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),U(t,"onBeforeRenderGroupEnd",st(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},ns={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){U(t,"onRenderStart",st(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){U(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){U(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){U(t,"onRenderGroupStart",st(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=Zt(t,"beforeRenderable",e),a=t.moveables,i=n.map(function(o,s){var l=a[s];return r.fillDragParams(l,o)});U(t,"onRenderGroup",st(t,e,R(R({isPinch:!!e.isPinch,targets:t.props.targets,transform:Lr(e),transformObject:{}},Gt(Pr(e))),{events:i})))},dragGroupEnd:function(t,e){var r=this,n=Zt(t,"beforeRenderable",e),a=t.moveables,i=n.map(function(o,s){var l=a[s];return r.fillDragEndParams(l,o)});U(t,"onRenderGroupEnd",st(t,e,R({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:i,transformObject:{},transform:Lr(e)},Gt(Pr(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return mr(Ur(e)||[]).forEach(function(n){r[n.name]=n.functionValue}),st(t,e,R({isPinch:!!e.isPinch,transformObject:r,transform:Lr(e)},Gt(Pr(e))))},fillDragEndParams:function(t,e){var r={};return mr(Ur(e)||[]).forEach(function(n){r[n.name]=n.functionValue}),st(t,e,R({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:Lr(e)},Gt(Pr(e))))}};function dr(t,e,r,n,a,i,o){i.clientDistX=i.distX,i.clientDistY=i.distY;var s=a==="Start",l=a==="End",c=a==="After",u=t.state.target,f=i.isRequest,d=n.indexOf("Control")>-1;if(!u||s&&d&&!f&&t.areaElement===i.inputEvent.target)return!1;var p=A([],w(e),!1);if(f){var v=i.requestAble;p.some(function(O){return O.name===v})||p.push.apply(p,A([],w(t.props.ables.filter(function(O){return O.name===v})),!1))}if(!p.length||p.every(function(O){return O.dragRelation}))return!1;var g=i.inputEvent,h;l&&g&&(h=document.elementFromPoint(i.clientX,i.clientY)||g.target);var m=!1,x=function(){var O;m=!0,(O=i.stop)===null||O===void 0||O.call(i)},y=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());y&&t.updateRect(a,!0,!1);var C=i.datas,D=d?"controlGesto":"targetGesto",b=t[D],E=function(O,I,P){if(!(I in O)||b!==t[D])return!1;var L=O.name,N=C[L]||(C[L]={});if(s&&(N.isEventStart=!P||!O[P]||O[P](t,i)),!N.isEventStart)return!1;var G=O[I](t,R(R({},i),{stop:x,datas:N,originalDatas:C,inputTarget:h}));return t._emitter.off(),s&&G===!1&&(N.isEventStart=!1),G};y&&p.forEach(function(O){O.unset&&O.unset(t)}),E(rs,"drag".concat(n).concat(a));var k=0,T=0;r.forEach(function(O){if(m)return!1;var I="".concat(O).concat(n).concat(a),P="".concat(O).concat(n,"Condition");a===""&&!f&&qo(t.state,i);var L=p.filter(function(j){return j[I]});L=L.filter(function(j,F){return j.name&&L.indexOf(j)===F});var N=L.filter(function(j){return E(j,I,P)}),G=N.length;m&&++k,G&&++T,!m&&s&&L.length&&!G&&(k+=L.filter(function(j){var F=j.name,W=C[F];return W.isEventStart?j.dragRelation!=="strong":!1}).length?1:0)}),(!c||T)&&E(ns,"drag".concat(n).concat(a));var M=b!==t[D]||k===r.length;if((l||m||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(O){O.state.gestos={}}),p.forEach(function(O){O.unset&&O.unset(t)})),s&&!M&&!f&&T&&t.props.preventDefault&&(i==null||i.preventDefault()),t.isUnmounted||M)return!1;if(!s&&T&&!o||l){var z=t.props.flushSync||Lo;z(function(){t.updateRect(l?a:"",!0,!1),t.forceUpdate()})}return!s&&!l&&!c&&T&&!o&&dr(t,e,r,n,a+"After",i),!0}function Kn(t){return function(e){var r,n=e.inputEvent.target,a=t.areaElement,i=t._dragTarget;return!i||!((r=t.controlGesto)===null||r===void 0)&&r.isFlag()?!1:n===i||i.contains(n)||n===a||!t.isMoveableElement(n)&&!t.controlBox.contains(n)||kt(n,"moveable-area")||kt(n,"moveable-padding")||kt(n,"moveable-edgeDraggable")}}function as(t,e,r){var n=t.controlBox,a=[],i=t.props,o=i.dragArea,s=t.state.target,l=i.dragTarget;return a.push(n),(!o||l)&&a.push(e),!o&&l&&s&&e!==s&&i.dragTargetSelf&&a.push(s),Oa(t,a,"targetAbles",r,{dragStart:Kn(t),pinchStart:Kn(t)})}function Oa(t,e,r,n,a){a===void 0&&(a={});var i=r==="targetAbles",o=t.props,s=o.pinchOutside,l=o.pinchThreshold,c=o.preventClickEventOnDrag,u=o.preventClickDefault,f=o.checkInput,d=o.dragFocusedInput,p=o.preventDefault,v=p===void 0?!0:p,g=o.dragContainer,h=te(g,!0),m={preventDefault:v,preventRightClick:!0,preventWheelClick:!0,container:h||yr(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:s,preventClickEventOnDrag:i?c:!1,preventClickEventOnDragStart:i?u:!1,preventClickEventByCondition:i?null:function(C){return t.controlBox.contains(C.target)},checkInput:i?f:!1,dragFocusedInput:d},x=new Js(e,m),y=n==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(D){x.on("".concat(C).concat(D),function(b){var E,k=b.eventType,T=C==="drag"&&b.isPinch;if(a[k]&&!a[k](b)){b.stop();return}if(!T){var M=C==="drag"?[C]:["drag",C],z=A([],w(t[r]),!1),O=dr(t,z,M,n,D,b);O?(t.props.stopPropagation||D==="Start"&&y)&&((E=b==null?void 0:b.inputEvent)===null||E===void 0||E.stopPropagation()):b.stop()}})})}),x}var ud=function(){function t(e,r,n){var a=this;this.target=e,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(i){var o=a.eventName,s=a.moveable;s.state.disableNativeEvent||a.ables.forEach(function(l){l[o](s,{inputEvent:i})})},e.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function fd(t,e,r,n){var a;r===void 0&&(r=e);var i=fo(t,e),o=i.matrixes,s=i.is3d,l=i.targetMatrix,c=i.transformOrigin,u=i.targetOrigin,f=i.offsetContainer,d=i.hasFixed,p=i.zoom,v=ku(f,r),g=v.matrixes,h=v.is3d,m=v.offsetContainer,x=v.zoom,y=n||h||s,C=y?4:3,D=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,b=l,E=It(C),k=It(C),T=It(C),M=It(C),z=o.length,O=g.map(function(F){return R(R({},F),{matrix:F.matrix?A([],w(F.matrix),!1):void 0})}).reverse();o.reverse(),!s&&y&&(b=re(b,3,4),Yn(o)),!h&&y&&Yn(O),O.forEach(function(F){k=wt(k,F.matrix,C)});var I=r||Ee(t),P=((a=O[0])===null||a===void 0?void 0:a.target)||Cr(I,I,!0).offsetParent,L=O.slice(1).reduce(function(F,W){return wt(F,W.matrix,C)},It(C));o.forEach(function(F,W){if(z-2===W&&(T=E.slice()),z-1===W&&(M=E.slice()),!F.matrix){var B=o[W+1],Z=Mf(F,B,P,C,wt(L,E,C));F.matrix=Le(Z,C)}E=wt(E,F.matrix,C)});var N=!D&&s;b||(b=It(N?4:3));var G=mn(D&&b.length===16?re(b,4,3):b,N),j=k;return k=Mi(k,C,C),{hasZoom:p!==1||x!==1,hasFixed:d,matrixes:o,rootMatrix:k,originalRootMatrix:j,beforeMatrix:T,offsetMatrix:M,allMatrix:E,targetMatrix:b,targetTransform:G,inlineTransform:t.style.transform,transformOrigin:c,targetOrigin:u,is3d:y,offsetContainer:f,offsetRootContainer:m}}function dd(t,e,r,n){r===void 0&&(r=e);var a=0,i=0,o=0,s={},l=Bo(t);if(t&&(a=l.offsetWidth,i=l.offsetHeight),t){var c=fd(t,e,r,n),u=qe(c.allMatrix,c.transformOrigin,a,i);s=R(R({},c),u);var f=qe(c.allMatrix,[50,50],100,100);o=Go([f.pos1,f.pos2],f.direction)}var d=n?4:3;return R(R(R({hasZoom:!1,width:a,height:i,rotation:o},l),{originalRootMatrix:It(d),rootMatrix:It(d),beforeMatrix:It(d),offsetMatrix:It(d),allMatrix:It(d),targetMatrix:It(d),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function Zn(t,e,r,n,a,i){i===void 0&&(i=[]);var o=1,s=[0,0],l=_r(),c=_r(),u=_r(),f=_r(),d=[0,0],p={},v=dd(e,r,a,!0);if(e){var g=Ht(e);i.forEach(function(O){p[O]=g(O)});var h=v.is3d?4:3,m=qe(v.offsetMatrix,vt(v.transformOrigin,Li(v.targetMatrix,h)),v.width,v.height);o=m.direction,s=vt(m.origin,[m.left-v.left,m.top-v.top]),f=fr(v.offsetRootContainer);var x=Cr(n,n,!0).offsetParent||v.offsetRootContainer;if(v.hasZoom){var y=qe(wt(v.originalRootMatrix,v.allMatrix),v.transformOrigin,v.width,v.height),C=qe(v.originalRootMatrix,Jr(Ht(x)("transformOrigin")).map(function(O){return parseFloat(O)}),x.offsetWidth,x.offsetHeight);if(l=Tn(y,f),u=Tn(C,f,x,!0),t){var D=y.left,b=y.top;c=Tn({left:D,top:b,bottom:b,right:b},f)}}else{l=fr(e),u=Du(x),t&&(c=fr(t));var E=u.left,k=u.top,T=u.clientLeft,M=u.clientTop,z=[l.left-E,l.top-k];d=nt(Ze(v.rootMatrix,z,4),[T+v.left,M+v.top])}}return R({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:f,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:e,style:p,offsetDelta:d},v)}function yi(t){var e=t.pos1,r=t.pos2,n=t.pos3,a=t.pos4;if(!e||!r||!n||!a)return null;var i=xr([e,r,n,a]),o=[i.minX,i.minY],s=nt(t.origin,o);return e=nt(e,o),r=nt(r,o),n=nt(n,o),a=nt(a,o),R(R({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:r,pos3:n,pos4:a,origin:s,beforeOrigin:s,isPersisted:!0})}var Je=function(t){kr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=R({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Zn(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new Ys,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}Xs(r._observerId),r._observerId=Ii(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return e.prototype.render=function(){var r=this.props,n=this.getState(),a=r.parentPosition,i=r.className,o=r.target,s=r.zoom,l=r.cspNonce,c=r.translateZ,u=r.cssStyled,f=r.groupable,d=r.linePadding,p=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var v=w(a||[0,0],2),g=v[0],h=v[1],m=n.left,x=n.top,y=n.target,C=n.direction,D=n.hasFixed,b=n.offsetDelta,E=r.targets,k=this.isDragging(),T={};this.getEnabledAbles().forEach(function(L){T["data-able-".concat(L.name.toLowerCase())]=!0});var M=this._getAbleClassName(),z=E&&E.length&&(y||f)||o||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,I=[m-g,x-h];!f&&r.useAccuratePosition&&(I[0]+=b[0],I[1]+=b[1]);var P={position:D?"fixed":"absolute",display:z?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(I[0],"px, ").concat(I[1],"px, ").concat(c,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return d&&(P["--moveable-line-padding"]=d),p&&(P["--moveable-control-padding"]=p),q.createElement(u,R({cspNonce:l,ref:Ie(this,"controlBox"),className:"".concat(rt("control-box",C===-1?"reverse":"",k?"dragging":"")," ").concat(M," ").concat(i)},T,{onClick:this._onPreventClick,style:P}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,a=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!a&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},e.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var a=this._viewContainer;a&&this._changeAbleViewClassNames([]),He(this,!1),He(this,!0);var i=this.events;for(var o in i){var s=i[o];s&&s.destroy()}},e.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},e.prototype.getAble=function(r){var n=this.props.ables||[];return ye(n,function(a){return a.name===r})},e.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,a=r.wrapperMoveable,i=r.container;return i||a&&a.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(da)>-1},e.prototype.dragStart=function(r){var n=this.targetGesto,a=this.controlGesto;return n&&Kn(this)({inputEvent:r})?n.isFlag()||n.triggerDragStart(r):a&&this.isMoveableElement(r.target)&&(a.isFlag()||a.triggerDragStart(r)),this},e.prototype.hitTest=function(r){var n=this.state,a=n.target,i=n.pos1,o=n.pos2,s=n.pos3,l=n.pos4,c=n.targetClientRect;if(!a)return 0;var u;if(ea(r)){var f=r.getBoundingClientRect();u={left:f.left,top:f.top,width:f.width,height:f.height}}else u=R({width:0,height:0},r);var d=u.left,p=u.top,v=u.width,g=u.height,h=Na([i,o,l,s],c),m=Us(h,[[d,p],[d+v,p],[d+v,p+g],[d,p+g]]),x=$s(h);return!m||!x?0:Math.min(100,m/x*100)},e.prototype.isInside=function(r,n){var a=this.state,i=a.target,o=a.pos1,s=a.pos2,l=a.pos3,c=a.pos4,u=a.targetClientRect;return i?Ks([r,n],Na([o,s,c,l],u)):!1},e.prototype.updateRect=function(r,n,a){a===void 0&&(a=!0);var i=this.props,o=!i.parentPosition&&!i.wrapperMoveable;o&&$e(!0);var s=i.parentMoveable,l=this.state,c=l.target||i.target,u=this.getContainer(),f=s?s._rootContainer:this._rootContainer,d=Zn(this.controlBox,c,u,u,f||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&i.persistData){var p=yi(i.persistData);for(var v in p)d[v]=p[v]}o&&$e(),this.updateState(d,s?!1:a)},e.prototype.isDragging=function(r){var n,a,i=this.targetGesto,o=this.controlGesto;if(i!=null&&i.isFlag()){if(!r)return!0;var s=i.getEventData();return!!(!((n=s[r])===null||n===void 0)&&n.isEventStart)}if(o!=null&&o.isFlag()){if(!r)return!0;var s=o.getEventData();return!!(!((a=s[r])===null||a===void 0)&&a.isEventStart)}return!1},e.prototype.updateTarget=function(r){this.updateRect(r,!0)},e.prototype.getRect=function(){var r=this.state,n=Ut(this.state),a=w(n,4),i=a[0],o=a[1],s=a[2],l=a[3],c=Yt(n),u=r.width,f=r.height,d=c.width,p=c.height,v=c.left,g=c.top,h=[r.left,r.top],m=vt(h,r.origin),x=vt(h,r.beforeOrigin),y=r.transformOrigin;return{width:d,height:p,left:v,top:g,pos1:i,pos2:o,pos3:s,pos4:l,offsetWidth:u,offsetHeight:f,beforeOrigin:x,origin:m,transformOrigin:y,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&Xn(this,!1),n==null||n.stop()}if(!r||r==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&Xn(this,!0),n==null||n.stop()}},e.prototype.getRotation=function(){var r=this.state,n=r.pos1,a=r.pos2,i=r.direction;return jf(n,a,i)},e.prototype.request=function(r,n,a){n===void 0&&(n={});var i=this,o=i.props,s=o.parentMoveable||o.wrapperMoveable||i,l=s.props.ables,c=o.groupable,u=ye(l,function(m){return m.name===r});if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var f=u.request(i),d=a||n.isInstant,p=f.isControl?"controlAbles":"targetAbles",v="".concat(c?"Group":"").concat(f.isControl?"Control":""),g=A([],w(s[p]),!1),h={request:function(m){return dr(i,g,["drag"],v,"",R(R({},f.request(m)),{requestAble:r,isRequest:!0}),d),h},requestEnd:function(){return dr(i,g,["drag"],v,"End",R(R({},f.requestEnd()),{requestAble:r,isRequest:!0}),d),h}};return dr(i,g,["drag"],v,"Start",R(R({},f.requestStart(n)),{requestAble:r,isRequest:!0}),d),d?h.request(n).requestEnd():h},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,a=n.padding,i=r.originalBeforeOrigin,o=r.transformOrigin,s=r.allMatrix,l=r.is3d,c=r.pos1,u=r.pos2,f=r.pos3,d=r.pos4,p=r.left,v=r.top,g=r.isPersisted;if(!a){r.renderPoses=[c,u,f,d];return}var h=$o(a),m=h.left,x=h.top,y=h.bottom,C=h.right,D=l?4:3,b=[];g?b=o:this.controlBox&&n.groupable?b=i:b=vt(i,[p,v]);var E=qr(D,Le(b.map(function(k){return-k}),D),s,Le(o,D));r.renderPoses=[Gr(E,c,[-m,-x],D),Gr(E,u,[C,-x],D),Gr(E,f,[-m,y],D),Gr(E,d,[C,y],D)]},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,a=r.container,i=r.parentMoveable,o=this.state,s=o.target,l=o.container;if(!(!s&&!n)){this.updateAbles();var c=!Un(s,n),u=c||!Un(l,a);if(u){var f=a||this.controlBox;f&&this.unsetAbles(),this.updateState({target:n,container:a}),!i&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=c}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(r,n){var a=this.props;if(this._emitter.trigger(r,n),a.parentMoveable&&n.isRequest&&!n.isRequestChild)return a.parentMoveable.triggerEvent(r,n,!0);var i=a[r];return i&&i(n)},e.prototype.useCSS=function(r,n){var a=this.props.customStyledMap,i=r+n;return a[i]||(a[i]=Qi(r,n)),a[i]},e.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var a=this.controlBox,i=n.persistData,o=n.firstRenderState;if(o&&!a)return o;if(!this._hasFirstTarget&&i){var s=yi(i);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},e.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var a=this.props,i=a.triggerAblesSimultaneously,o=this.getEnabledAbles(r),s="drag".concat(n,"Start"),l="pinch".concat(n,"Start"),c="drag".concat(n,"ControlStart"),u=Br(o,[s,l],i),f=Br(o,[c],i);this.enabledAbles=o,this.targetAbles=u,this.controlAbles=f},e.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var a=this.state;for(var i in r)a[i]=r[i]}},e.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(a){return a&&(a.always&&n[a.name]!==!1||n[a.name])})},e.prototype.renderAbles=function(){var r=this,n=this.props,a=n.triggerAblesSimultaneously,i={createElement:q.createElement};return this.renderState={},zf(Fo(Br(this.getEnabledAbles(),["render"],a).map(function(o){var s=o.render;return s(r,i)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return A(A([],w(n),!1),w(s),!1)},A([],w(this.props.requestStyles||[]),!1));return r},e.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},e.prototype._updateEvents=function(){var r=this.controlBox,n=this.targetAbles.length,a=this.controlAbles.length,i=this._dragTarget,o=!n&&this.targetGesto||this._isTargetChanged(!0);o&&(He(this,!1),this.updateState({gestos:{}})),a||He(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=as(this,i,"")),!this.controlGesto&&a&&(this.controlGesto=Oa(this,r,"controlAbles","Control"))},e.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=te(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var r=this.props,n=r,a=n.zoom,i=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(i||s&&o)return[];var l=this.getState().renderPoses,c={createElement:q.createElement};return[[0,1],[1,3],[3,2],[2,0]].map(function(u,f){var d=w(u,2),p=d[0],v=d[1];return br(c,"",l[p],l[v],a,"render-line-".concat(f))})},e.prototype._isTargetChanged=function(r){var n=this.props,a=n.dragTarget||n.target,i=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea,l=!s&&i!==a,c=(r||s)&&o!==s;return l||c||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var r=this,n=this.props,a=n.dragArea?this.areaElement:this.state.target,i=this.events,o=tr(i);if(this._isTargetChanged())for(var s in i){var l=i[s];l&&l.destroy(),i[s]=null}if(a){var c=this.enabledAbles;o.forEach(function(u){var f=Br(c,[u]),d=f.length>0,p=i[u];if(!d){p&&(p.destroy(),i[u]=null);return}p||(p=new ud(a,r,u),i[u]=p),p.setAbles(f)})}},e.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=te(r,!0))},e.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=te(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(A(A([],w(this._getAbleViewClassNames()),!1),[this.isDragging()?Vf:""],!1))},e.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,a=Ho(r.filter(Boolean),function(c){return c}).map(function(c){var u=w(c,1),f=u[0];return f}),i=this._viewClassNames,o=Zs(i,a),s=o.removed,l=o.added;s.forEach(function(c){Pi(n,i[c])}),l.forEach(function(c){Ti(n,a[c])}),this._viewClassNames=a},e.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var a;return((a=n.viewClassName)===null||a===void 0?void 0:a.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var a=this.getEnabledAbles(),i=this.targetGesto,o=this.controlGesto,s=i!=null&&i.isFlag()?i.getEventData():{},l=o!=null&&o.isFlag()?o.getEventData():{};return a.map(function(c){var u,f,d,p=c.name,v=((u=c.className)===null||u===void 0?void 0:u.call(c,n))||"";return(!((f=s[p])===null||f===void 0)&&f.isEventStart||!((d=l[p])===null||d===void 0)&&d.isEventStart)&&(v+=" ".concat(rt("".concat(p).concat(r,"-dragging")))),v.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(r){var n,a=this.props,i=a.target,o=yr(this.getControlBoxElement());if(!o.ResizeObserver||!i||!a.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===i&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(i,{box:"border-box"}),this._reiszeObserver=s}},e.prototype._updateMutationObserver=function(r){var n=this,a,i=this.props,o=i.target,s=yr(this.getControlBoxElement());if(!s.MutationObserver||!o||!i.useMutationObserver){(a=this._mutationObserver)===null||a===void 0||a.disconnect();return}if(!(r.target===o&&this._mutationObserver)){var l=new s.MutationObserver(function(c){var u,f;try{for(var d=Yc(c),p=d.next();!p.done;p=d.next()){var v=p.value;v.type==="attributes"&&v.attributeName==="style"&&n.checkUpdateRect()}}catch(g){u={error:g}}finally{try{p&&!p.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}});l.observe(o,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Lo,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(q.PureComponent),za={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,n=t.props,a=n.targets||[],i=t.getState(),o=i.left,s=i.top,l=i.isPersisted,c=n.zoom||1,u=t.renderGroupRects,f=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];l?a=f.map(function(){return null}):f=[];var d=Fe(t,"parentPosition",[o,s],function(v){return v.join(",")}),p=Fe(t,"requestStyles",t.getRequestChildStyles(),function(v){return v.join(",")});return t.moveables=t.moveables.slice(0,a.length),A(A([],w(a.map(function(v,g){return e.createElement(Je,{key:"moveable"+g,ref:Oi(t,"moveables",g),target:v,origin:!1,requestStyles:p,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,s],persistData:f[g],zoom:c})})),!1),w(Fo(u.map(function(v,g){var h=v.pos1,m=v.pos2,x=v.pos3,y=v.pos4,C=[h,m,x,y];return[[0,1],[1,3],[3,2],[2,0]].map(function(D,b){var E=w(D,2),k=E[0],T=E[1];return br(e,"",nt(C[k],d),nt(C[T],d),c,"group-rect-".concat(g,"-").concat(b))})}))),!1)}},pd=Rr("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,n=e.inputEvent,a=e.inputTarget,i=t.isMoveableElement(a),o=!i&&t.controlBox.contains(a);if(!(!n||!a||e.isDrag||t.isMoveableElement(a)||o)){var s=r.contains(a);U(t,"onClick",st(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:r===a,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.inputTarget;if(!(!r||!n||e.isDrag||t.isMoveableElement(n)||e.datas.inputTarget===n)){var a=t.props.targets,i=a.indexOf(n),o=i>-1,s=!1;i===-1&&(i=vr(a,function(l){return l.contains(n)}),s=i>-1),U(t,"onClickGroup",st(t,e,{isDouble:e.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s,moveableTarget:a[i]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Ae(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),R(R({},t),{datas:e})}var vd=Rr("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var r=t.props,n=r.edgeDraggable;return n?go(e,"edgeDraggable",n,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,n=t.props,a=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!a?!1:!n.draggable&&kt(a,rt("direction"))&&kt(a,rt("edge"))&&kt(a,rt("edgeDraggable"))},dragStart:function(t,e){return Bt.dragStart(t,Ae(e))},drag:function(t,e){return Bt.drag(t,Ae(e))},dragEnd:function(t,e){return Bt.dragEnd(t,Ae(e))},dragGroupCondition:function(t,e){var r,n=t.props,a=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!a?!1:!n.draggable&&kt(a,rt("direction"))&&kt(a,rt("line"))},dragGroupStart:function(t,e){return Bt.dragGroupStart(t,Ae(e))},dragGroup:function(t,e){return Bt.dragGroup(t,Ae(e))},dragGroupEnd:function(t,e){return Bt.dragGroupEnd(t,Ae(e))},unset:function(t){return Bt.unset(t)}}),is={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},gd=[rs,Jo,xf,Bf,Bt,vd,Hn,Gf,Nf,tf,qf,Yf,Hf,ad,nd,ld,za,is,pd,Zo,ns];function bi(t,e){var r=w(t,3),n=r[0],a=r[1],i=r[2];return(n*e[0]+a*e[1]+i)/Math.sqrt(n*n+a*a)}function Wr(t,e){var r=w(t,2),n=r[0],a=r[1];return-n*e[0]-a*e[1]}function Ci(t,e){return Math.max.apply(Math,A([],w(t.map(function(r){var n=w(r,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.max(a[e],i[e],o[e],s[e])})),!1))}function Si(t,e){return Math.min.apply(Math,A([],w(t.map(function(r){var n=w(r,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.min(a[e],i[e],o[e],s[e])})),!1))}function hd(t,e){var r,n,a,i=[0,0],o=[0,0],s=[0,0],l=[0,0],c=0,u=0;if(!t.length)return{pos1:i,pos2:o,pos3:s,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:c,height:u,rotation:e};var f=pt(e,At);if(f%90){var d=f/180*Math.PI,p=Math.tan(d),v=-1/p,g=[An,Ya],h=[[0,0],[0,0]],m=[An,Ya],x=[[0,0],[0,0]];t.forEach(function(J){J.forEach(function(H){var X=bi([-p,1,0],H),V=bi([-v,1,0],H);g[0]>X&&(h[0]=H,g[0]=X),g[1]<X&&(h[1]=H,g[1]=X),m[0]>V&&(x[0]=H,m[0]=V),m[1]<V&&(x[1]=H,m[1]=V)})});var y=w(h,2),C=y[0],D=y[1],b=w(x,2),E=b[0],k=b[1],T=[-p,1,Wr([-p,1],C)],M=[-p,1,Wr([-p,1],D)],z=[-v,1,Wr([-v,1],E)],O=[-v,1,Wr([-v,1],k)];r=w([[T,z],[T,O],[M,z],[M,O]].map(function(J){var H=w(J,2),X=H[0],V=H[1];return Qs(X,V)[0]}),4),i=r[0],o=r[1],s=r[2],l=r[3],c=m[1]-m[0],u=g[1]-g[0]}else{var I=Si(t,0),P=Si(t,1),L=Ci(t,0),N=Ci(t,1);if(i=[I,P],o=[L,P],s=[I,N],l=[L,N],c=L-I,u=N-P,f%180){var G=[s,i,l,o];n=w(G,4),i=n[0],o=n[1],s=n[2],l=n[3],c=N-P,u=L-I}}if(f%360>180){var G=[l,s,o,i];a=w(G,4),i=a[0],o=a[1],s=a[2],l=a[3]}var j=xr([i,o,s,l]),F=j.minX,W=j.minY,B=j.maxX,Z=j.maxY;return{pos1:i,pos2:o,pos3:s,pos4:l,width:c,height:u,minX:F,minY:W,maxX:B,maxY:Z,rotation:e}}function os(t,e){var r=e.map(function(n){if(zt(n)){var a=os(t,n),i=a.length;return i>1?a:i===1?a[0]:null}else{var o=ye(t,function(s){var l=s.manager;return l.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return r.length===1&&zt(r[0])?r[0]:r}var md=function(t){kr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new zi,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,n,a){var i;a===void 0&&(a=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;$e(!0),this.moveables.forEach(function(et){et.updateRect(r,!1,!1)});var s=this.props,l=this.moveables,c=o.target||s.target,u=l.map(function(et){return{finded:!1,manager:et}}),f=this.props.targetGroups||[],d=os(u,f),p=s.useDefaultGroupRotate;d.push.apply(d,A([],w(u.filter(function(et){var ot=et.finded;return!ot}).map(function(et){var ot=et.manager;return ot})),!1));var v=[],g=!n||r!==""&&s.updateGroup,h=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(i=s.persistData)===null||i===void 0?void 0:i.rotation;m!=null&&(h=m)}function x(et,ot,at){var tt=et.map(function(mt){if(zt(mt)){var ut=x(mt,ot),ht=[ut.pos1,ut.pos2,ut.pos3,ut.pos4];return v.push(ut),{poses:ht,rotation:ut.rotation}}else return{poses:Ut(mt.state),rotation:mt.getRotation()}}),Q=tt.map(function(mt){var ut=mt.rotation;return ut}),gt=0,lt=Q[0],ct=Q.every(function(mt){return Math.abs(lt-mt)<.1});g?gt=!p&&ct?lt:h:gt=!p&&!at&&ct?lt:ot;var ft=tt.map(function(mt){var ut=mt.poses;return ut}),bt=hd(ft,gt);return bt}var y=x(d,this.rotation,!0);g&&(this.rotation=y.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=v;var C=this.transformOrigin,D=this.rotation,b=this.scale,E=y.width,k=y.height,T=y.minX,M=y.minY,z=_f([[0,0],[E,0],[0,k],[E,k]],Ma(C,E,k),this.rotation/180*Math.PI),O=xr(z.result),I=O.minX,P=O.minY,L=" rotate(".concat(D,"deg)")+" scale(".concat(qt(b[0]),", ").concat(qt(b[1]),")"),N="translate(".concat(-I,"px, ").concat(-P,"px)").concat(L);this.controlBox.style.transform="translate3d(".concat(T,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(C,";")+"width:".concat(E,"px;height:").concat(k,"px;")+"transform: ".concat(N),o.width=E,o.height=k;var G=this.getContainer(),j=Zn(this.controlBox,c,this.controlBox,this.getContainer(),this._rootContainer||G,[]),F=[j.left,j.top],W=w(Ut(j),4),B=W[0],Z=W[1],J=W[2],H=W[3],X=xr([B,Z,J,H]),V=[X.minX,X.minY],$=qt(b[0]*b[1]);j.pos1=nt(B,V),j.pos2=nt(Z,V),j.pos3=nt(J,V),j.pos4=nt(H,V),j.left=T-j.left+V[0],j.top=M-j.top+V[1],j.origin=nt(vt(F,j.origin),V),j.beforeOrigin=nt(vt(F,j.beforeOrigin),V),j.originalBeforeOrigin=vt(F,j.originalBeforeOrigin),j.transformOrigin=nt(vt(F,j.transformOrigin),V),c.style.transform="translate(".concat(-I-V[0],"px, ").concat(-P-V[1],"px)")+L,$e(),this.updateState(R(R({},j),{posDelta:V,direction:$,beforeDirection:$}),a)},e.prototype.getRect=function(){return R(R({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.triggerEvent=function(r,n,a){if(a||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},e.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestChildStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return A(A([],w(n),!1),w(s),!1)},[]);return r},e.prototype.getMoveables=function(){return A([],w(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,A(A([],w(this.props.ables),!1),[za],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=te(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var r=this.state,n=this.props,a=this._prevDragTarget,i=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),l=s.added,c=s.changed,u=s.removed,f=l.length||u.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(He(this,!1),He(this,!0),this.updateState({gestos:{}})),a!==i&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=as(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Oa(this,this.controlBox,"controlAbles","GroupControl")));var d=!Un(r.container,n.container);d&&(r.container=n.container),(d||f||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||c.length||o.length&&!Uo(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},e.prototype._updateObserver=function(){},e.defaultProps=R(R({},Je.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Je),xd=function(t){kr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}return e.prototype.render=function(){var r=this,n,a=this.props,i=a.cspNonce,o=a.cssStyled,s=a.persistData,l=a.targets||[],c=l.length,u=this.isUnmounted||!c,f=(n=s==null?void 0:s.children)!==null&&n!==void 0?n:[];return u&&!c&&f.length?l=f.map(function(){return null}):u||(f=[]),q.createElement(o,{cspNonce:i,ref:Ie(this,"controlBox"),className:rt("control-box")},l.map(function(d,p){var v,g,h=(g=(v=a.individualGroupableProps)===null||v===void 0?void 0:v.call(a,d,p))!==null&&g!==void 0?g:{};return q.createElement(Je,R({key:"moveable"+p,ref:Oi(r,"moveables",p)},a,h,{target:d,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[p]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,n,a){a===void 0&&(a=!0),$e(!0),this.moveables.forEach(function(i){i.updateRect(r,n,a)}),$e()},e.prototype.getRect=function(){return R(R({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.request=function(r,n,a){n===void 0&&(n={});var i=this.moveables.map(function(l){return l.request(r,R(R({},n),{isInstant:!1}),!1)}),o=a||n.isInstant,s={request:function(l){return i.forEach(function(c){return c.request(l)}),this},requestEnd:function(){return i.forEach(function(l){return l.requestEnd()}),this}};return o?s.request(n).requestEnd():s},e.prototype.dragStart=function(r){var n=r.target,a=ye(this.moveables,function(i){var o=i.getTargets()[0],s=i.getControlBoxElement(),l=i.getDragElement();return!o||!l?!1:l===n||l.contains(n)||l!==o&&o===n||o.contains(n)||s===n||s.contains(n)});return a&&a.dragStart(r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return A([],w(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Je);function ss(t,e){var r=[];return t.forEach(function(n){if(n){if(_e(n)){e[n]&&r.push.apply(r,A([],w(e[n]),!1));return}zt(n)?r.push.apply(r,A([],w(ss(n,e)),!1)):r.push(n)}}),r}function ls(t,e){var r=[];return t.forEach(function(n){if(n){if(_e(n)){e[n]&&r.push.apply(r,A([],w(e[n]),!1));return}zt(n)?r.push(ls(n,e)):r.push(n)}}),r}function cs(t,e){return t.length!==e.length||t.some(function(r,n){var a=e[n];return!r&&!a?!1:r!=a?zt(r)&&zt(a)?cs(r,a):!0:!1})}var yd=function(t){kr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new zi,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return e.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(i){var o=i.css;o&&o.forEach(function(s){r[s]=!0})});var a=tr(r).join(`
`);this.defaultStyled=Qi("div",Bs(da,nu+a))},e.getTotalAbles=function(){return A([Jo,za,is,Zo],w(this.defaultAbles),!1)},e.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var a=this.props,i=a.ables,o=a.props,s=Fc(a,["ables","props"]),l=w(this._updateRefs(!0),2),c=l[0],u=l[1],f=ss(c,u),d=f.length>1,p=n.getTotalAbles(),v=A(A([],w(p),!1),w(i||[]),!1),g=R(R(R({},s),o||{}),{ables:v,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=f;var h=null,m=this.moveable,x=s.persistData;if(x!=null&&x.children&&(d=!0),s.individualGroupable)return q.createElement(xd,R({key:"individual-group",ref:Ie(this,"moveable")},g,{target:null,targets:f}));if(d){var y=ls(c,u);if(m&&!m.props.groupable&&!m.props.individualGroupable){var C=m.props.target;C&&f.indexOf(C)>-1&&(h=R({},m.state))}return q.createElement(md,R({key:"group",ref:Ie(this,"moveable")},g,(r=s.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:f,targetGroups:y,firstRenderState:h}))}else{var D=f[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var b=m.moveables||[],E=ye(b,function(k){return k.props.target===D});E&&(h=R({},E.state))}return q.createElement(Je,R({key:"single",ref:Ie(this,"moveable")},g,{target:D,firstRenderState:h}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs()},e.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(a){n=a})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(r){var n=this.refTargets,a=wa(this.props.target||this.props.targets),i=typeof document<"u",o=cs(n,a),s=this.selectorMap,l={};return this.refTargets.forEach(function c(u){if(_e(u)){var f=s[u];f?l[u]=s[u]:i&&(o=!0,l[u]=[].slice.call(document.querySelectorAll(u)))}else zt(u)&&u.forEach(c)}),this._tmpRefTargets=a,this._tmpSelectorMap=l,[a,l,!r&&o]},e.prototype._checkChangeTargets=function(){var r,n,a;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var i=this._differ.update(this._elementTargets),o=i.added,s=i.removed,l=o.length||s.length;l&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(a=this._onChangeTargets)===null||a===void 0||a.call(this));var c=w(this._updateRefs(),3),u=c[0],f=c[1],d=c[2];this.refTargets=u,this.selectorMap=f,d&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,qc([Gs(ou)],e.prototype,"moveable",void 0),e}(q.PureComponent),us=function(t){kr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=gd,e}(yd);class je{static drawBezierCurves(e,r){e.beginPath();for(let n=0;n<r.length;n++){const{startPoint:a,endPoint:i,firstCP:o,secondCP:s,color:l,lineWidth:c,lineDash:u}=r[n];e.strokeStyle=l,e.lineWidth=c,e.moveTo(a.x,a.y),e.setLineDash(u),e.lineDashOffset=0,e.bezierCurveTo(o.x,o.y,s.x,s.y,i.x,i.y)}e.stroke()}static calculateControlPoint(e,r){const n=r.x<e.x?"left":"right",a=Math.abs(r.x-e.x),i={x:0,y:0},o={x:0,y:0};return n==="right"?(i.x=e.x+a*.5,i.y=e.y,o.x=r.x-a*.5,o.y=r.y):(i.x=e.x+a*.8,i.y=e.y,o.x=r.x-a*.8,o.y=r.y),{firstCP:i,secondCP:o}}static sampleBezierCurve(e,r,n,a,i){const o=[];for(let s=0;s<=i;s++){const l=s/i,c=(1-l)**3*e.x+3*(1-l)**2*l*r.x+3*(1-l)*l**2*n.x+l**3*a.x,u=(1-l)**3*e.y+3*(1-l)**2*l*r.y+3*(1-l)*l**2*n.y+l**3*a.y;o.push({x:c,y:u})}return o}static drawPoint(e,r,n,a){e.fillStyle=a,e.fillRect(r.x-n/2,r.y-n/2,n,n)}static isMouseInRectangle(e,r,n){const a=Math.abs(n.x-r.x);let i,o;n.x<r.x?(i=Math.min(r.x+a*.2,n.x-a*.2),o=Math.max(r.x+a*.2,n.x-a*.2)):(i=Math.min(r.x,n.x),o=Math.max(r.x,n.x));const s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);return e.x>=i&&e.x<=o&&e.y>=s&&e.y<=l}static distanceBetweenPointAndLine(e,r,n){const a=e.x-r.x,i=e.y-r.y,o=n.x-r.x,s=n.y-r.y,l=a*o+i*s,c=o*o+s*s;let u=-1;c!==0&&(u=l/c);let f,d;u<0?(f=r.x,d=r.y):u>1?(f=n.x,d=n.y):(f=r.x+u*o,d=r.y+u*s);const p=e.x-f,v=e.y-d;return Math.sqrt(p*p+v*v)}static isMouseOnLine(e,r,n){for(let a=0;a<r.length-1;a++)if(je.distanceBetweenPointAndLine(e,r[a],r[a+1])<=n)return!0;return!1}static updSegmentSamplingPoint(){const{bpLines:e}=ne;Object.values(e).forEach(r=>{const{startPoint:n,firstCP:a,secondCP:i,endPoint:o}=r;r.samplePoints=je.sampleBezierCurve(n,a,i,o,20)})}}const rn=()=>{const{bpLines:t}=ne;bd(Object.values(t))},bd=t=>{const{downCtx:e,canvasOffset:r,nodeContainerRef:n}=ne,{width:a,height:i}=n==null?void 0:n.getBoundingClientRect();t.forEach(o=>{const{startAnchorId:s,endAnchorId:l}=o,c=document.getElementById(s),u=document.getElementById(l),{x:f,y:d,width:p,height:v}=c.getBoundingClientRect(),{x:g,y:h,width:m,height:x}=u.getBoundingClientRect();o.startPoint={x:f+p/2-r.x,y:d+v/2-r.y},o.endPoint={x:g+m/2-r.x,y:h+x/2-r.y};const y=je.calculateControlPoint(o.startPoint,o.endPoint);o.firstCP=y.firstCP,o.secondCP=y.secondCP}),e.clearRect(0,0,a+10,i+10),je.drawBezierCurves(e,t)},Ei=(t,e)=>{const{bpNodeControllerInsMap:r,bpAPLineMap:n,bpLines:a,updLinePos:i,updBpNodeLayout:o,canvasOffset:s}=ne;o({id:t,position:{x:e.x,y:e.y}});const l=r[t],{input:c=[],output:u=[]}=l.getConfig(),f=[...c,...u];f&&f.forEach(d=>{const p=n[d.id];p&&p.forEach(v=>{const g=a[v];if(g){const{startAnchorId:h,endAnchorId:m}=g,x=document.getElementById(h),y=document.getElementById(m),{x:C,y:D,width:b,height:E}=x.getBoundingClientRect(),{x:k,y:T,width:M,height:z}=y.getBoundingClientRect();i({id:v,startPoint:{x:C+b/2-s.x,y:D+E/2-s.y},endPoint:{x:k+M/2-s.x,y:T+z/2-s.y}})}})})},sv=Ot(t=>{const{children:e}=t,r=Y.createRef();q.useEffect(()=>{const{setBpMovableRef:c}=ne;c(r.current)});const n=c=>{const{target:u,beforeTranslate:f}=c;u.style.transform=`translate(${f[0]}px, ${f[1]}px)`,rn()},a=c=>{const{inputEvent:{target:u}}=c;if(u.classList.contains("ap-circle"))return!1},i=c=>{const{target:u,lastEvent:f}=c;if(!f)return;const{beforeTranslate:d}=f,p=u.id.split(":")[1];Ei(p,{x:d[0],y:d[1]}),je.updSegmentSamplingPoint()},o=c=>{c.events.forEach(u=>u.target.style.transform=u.transform),rn()},s=c=>{c.events.forEach(u=>{const{target:f,lastEvent:d}=u;if(d){const p=f.id.split(":")[1],{beforeTranslate:v}=d;Ei(p,{x:v[0],y:v[1]})}}),je.updSegmentSamplingPoint()},{selectedNodes:l}=ne;return S.jsxs(S.Fragment,{children:[e,S.jsx(us,{ref:r,target:l,draggable:!0,origin:!1,hideDefaultLines:!0,onDragStart:a,onDrag:n,onDragEnd:i,onDragGroup:o,onDragGroupEnd:s})]})});class Cd{constructor(){dt(this,"bluePrintVisible",!1);dt(this,"setBluePrintVisible",e=>this.bluePrintVisible=e);an(this,{bluePrintVisible:me,setBluePrintVisible:xe})}}const yn=new Cd;class Sd extends el{constructor(){super();dt(this,"projectVisible",!1);dt(this,"setProjectVisible",r=>this.projectVisible=r);dt(this,"projectConfig",{name:"",des:"",state:Vr.DRAFT,createTime:"",updateTime:"",saveType:Is.LOCAL});dt(this,"updateProjectConfig",r=>this.projectConfig={...this.projectConfig,...r});an(this,{projectVisible:me,setProjectVisible:xe,projectConfig:me,updateProjectConfig:xe})}destroy(){}getData(){return ki(this.projectConfig)}init(r){}}const pr=new Sd,Ed=()=>{var a;const{layerConfigs:t}=K,{setTargetIds:e,calculateGroupCoordinate:r}=it,n=Object.values(t).map(i=>{if(!i.lock&&!i.hide)return i.id});e(n),n.length>0&&r((a=n.map(i=>document.getElementById(i)))==null?void 0:a.filter(i=>!!i))},Dd=()=>{const{targetIds:t,setTargetIds:e}=it;if(!t||t.length===0)return;const{copyItem:r}=K,n=r(t),a=setTimeout(()=>{e(n),clearTimeout(a)},10)},kd=()=>{const{targetIds:t,setTargetIds:e}=it;if(!t||t.length===0)return;const{layerConfigs:r}=K,n=[];for(const a of t){const i=r[a];n.push({...i,lock:!0})}Pt.doLockUpd(n),e([])},Rd=()=>{const{setTargetIds:t,targetIds:e}=it;if(!e||e.length===0)return;const{layerConfigs:r}=K,n=[];e.filter(a=>r[a].lock).forEach(a=>{n.push({id:a,lock:!1})}),Pt.doLockUpd(n),t([])},wd=()=>{Pt.doLayerToTop()},Md=()=>{Pt.doLayerToBottom()},Td=()=>{Pt.doLayerMoveUp()},Id=()=>{Pt.doLayerMoveDown()},fs=()=>{const{targetIds:t}=it;if(t&&t.length>0){const{delNode:e,bpNodeLayoutMap:r}=ne,n=[];t.forEach(a=>{r[a]&&n.push(a)}),n.length>0&&e(n)}Pt.doDelete()},ds=Xe.throttle(()=>new Promise(()=>{const{saveType:t,id:e}=nn.parseUrlParams(),r=on.getData(),n={id:e,dataJson:JSON.stringify(r)};Ni[t].updateProject(n)}),5e3),Od=()=>{const{targetIds:t,setTargetIds:e}=it;if(!t||t.length===0)return;const{layerConfigs:r}=K,n=[];t.forEach(a=>{const i=r[a];n.push({...i,hide:!0})}),Pt.doHideUpd(n),e([])},zd=()=>{Pt.doGrouping()},Ld=()=>{let{targetIds:t}=it;const e=new Set;if(Yr.findTopGroupLayer(t,!1).forEach(r=>e.add(r)),t=Array.from(e),t&&t.length>0){const{delNode:r,bpNodeLayoutMap:n}=ne,a=[];t.forEach(i=>{n[i]&&a.push(i)}),a.length>0&&r(a)}Pt.doUnGrouping()},Pd=()=>{Pt.doRemoveFromGroup()},jd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{dragStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=(n[o].y||0)-a}else i=((r==null?void 0:r.minY)||0)-a;e==null||e.request("draggable",{y:i},!0)},_d=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{dragStep:a=1}}=Et;if(t.length===1){const i=t[0].id,o=n[i].y+a;e==null||e.request("draggable",{y:o},!0)}else{const i=(r==null?void 0:r.minY)+a;e==null||e.request("draggable",{y:i},!0)}},Bd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{dragStep:a=1}}=Et;if(t.length===1){const i=t[0].id,o=n[i].x;e==null||e.request("draggable",{x:o-a},!0)}else{const i=(r==null?void 0:r.minX)-a;e==null||e.request("draggable",{x:i},!0)}},Gd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{dragStep:a=1}}=Et;if(t.length===1){const i=t[0].id,o=n[i].x;e==null||e.request("draggable",{x:o+a},!0)}else{const i=(r==null?void 0:r.minX)+a;e==null||e.request("draggable",{x:i},!0)}},Ad=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=n[o].height+a}else i=r.groupHeight+a;e==null||e.request("resizable",{offsetHeight:i,direction:[1,-1]},!0)},Nd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=n[o].height+a}else i=r.groupHeight+a;e==null||e.request("resizable",{offsetHeight:i,direction:[1,1]},!0)},Wd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=n[o].width+a}else i=r.groupWidth+a;e==null||e.request("resizable",{offsetWidth:i,direction:[-1,1]},!0)},Vd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=n[o].width+a}else i=r.groupWidth+a;e==null||e.request("resizable",{offsetWidth:i,direction:[1,1]},!0)},Hd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;t.length===1?i=n[t[0].id].height-a:i=r.groupHeight-a,e==null||e.request("resizable",{offsetHeight:i,direction:[1,-1]},!0)},Fd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=n[o].height-a}else i=r.groupHeight-a;e==null||e.request("resizable",{offsetHeight:i,direction:[1,1]},!0)},qd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=n[o].width-a}else i=r.groupWidth-a;e==null||e.request("resizable",{offsetWidth:i,direction:[-1,1]},!0)},Yd=()=>{const{targets:t,movableRef:e,groupCoordinate:r}=it;if(!t||t.length===0)return;const{layerConfigs:n}=K,{canvasConfig:{resizeStep:a=1}}=Et;let i;if(t.length===1){const o=t[0].id;i=n[o].width-a}else i=r.groupWidth-a;e==null||e.request("resizable",{offsetWidth:i,direction:[1,1]},!0)},Xd=()=>{const t=ji.backoff();if(!t)return;const{actions:e}=t;e.forEach(r=>{var a;const{type:n}=r;(a=Jt.get(n))==null||a.undo(r)})},Ud=()=>{const t=ji.forward();if(!t)return;const{actions:e}=t;e.forEach(r=>{var a;const{type:n}=r;(a=Jt.get(n))==null||a.redo(r)})},$d=()=>{const{auxiliaryBorder:t,setAuxiliaryBorder:e}=sl;if(!t){const n=document.getElementsByClassName("lc-comp-item");n&&Array.from(n).forEach(a=>{a.style.border="1px solid #65eafc"})}else{const n=document.getElementsByClassName("lc-comp-item");n&&Array.from(n).forEach(a=>{a.style.border="none"})}e(!t)},Kd=()=>{const{projectVisible:t,setProjectVisible:e}=pr;e(!t)},Zd=()=>{const{canvasVisible:t,setCanvasVisible:e}=Et;e(!t)},Jd=()=>{const{themeVisible:t,setThemeVisible:e}=sn;e(!t)},Qd=()=>{const{hotKeyVisible:t,setHotKeyVisible:e}=Hr;e(!t)},tp=()=>{var e;(e=Kt.messageApi)==null||e.open({type:"loading",content:"正在导出项目数据..."});const t=setTimeout(()=>{var i;const r=on.getData(),n=(i=r.layerManager)==null?void 0:i.elemConfigs,a=[];n&&Object.keys(n).forEach(o=>{var l;const s=n[o];s.base.type==="BaseImage"&&((l=s.style.localUrl)!=null&&l.startsWith("blob"))&&a.push(Di.blobToBase64(s.style.localUrl).then(c=>{c?s.style.localUrl=c:console.error(`${s.base.id+"_"+s.base.name} 图片blob转换失败, ${s.style.localUrl}`)}))}),Promise.all(a).then(()=>{var f,d;const s=JSON.stringify({flag:"pyz_tt",version:"v1.1.0",data:r}),l=new Blob([s],{type:"application/json"}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=`project-${new Date().getTime()}.json`,u.click(),URL.revokeObjectURL(c),(f=Kt.messageApi)==null||f.destroy(),(d=Kt.messageApi)==null||d.success("项目数据导出成功")}),clearTimeout(t)},1e3)},ep=()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=e=>{var a;(a=Kt.messageApi)==null||a.open({type:"loading",content:"正在导入项目数据..."});const r=e.target.files[0];if(!r)return;const n=[];r.text().then(i=>{const o=setTimeout(()=>{var u,f,d;const s=JSON.parse(i);if(!("flag"in s)||s.flag!=="pyz_tt"){(u=Kt.messageApi)==null||u.destroy(),(f=Kt.messageApi)==null||f.info("数据格式错误，请检查导入文件内容。");return}const l=s.data,c=(d=l.layerManager)==null?void 0:d.elemConfigs;c&&Object.keys(c).forEach(p=>{var g;const v=c[p];v.base.type==="BaseImage"&&((g=v.style.localUrl)!=null&&g.startsWith("blob"))&&n.push(Di.base64ToBlob(v.style.localUrl).then(h=>{h?v.style.localUrl=h:console.error(`${v.base.id+"_"+v.base.name} 图片blob转换失败, ${v.style.localUrl}`)}))}),Promise.all(n).then(()=>{var p,v;on.init(l,Sr.EDIT),(p=Kt.messageApi)==null||p.destroy(),(v=Kt.messageApi)==null||v.success("项目数据导入成功"),clearTimeout(o)})},500)})},t.click()},rp=()=>{const{searchLayer:t,setSearchLayer:e}=Oe;e(!t)},ps=()=>{if(!yn.bluePrintVisible)return;const{selectedNodes:t,delNode:e}=ne;if(t.length===0)return;const r=t.map(i=>i.id.split(":")[1]);e(r);const{setUsedLayerNodes:n,usedLayerNodes:a}=rl;r.forEach(i=>{i in a&&n(i,!1)}),rn()},vs=()=>{if(!yn.bluePrintVisible)return;const{selectedLines:t,delLine:e}=ne;if(t.length===0)return;const r=t.map(n=>n.id);e(r),rn()},np=()=>{const t=q.useRef({...Et.canvasConfig}),[e,r]=q.useState(Et.canvasConfig.rasterize||!1),{canvasVisible:n,setCanvasVisible:a}=Et,{width:i,height:o,rasterize:s,dragStep:l,resizeStep:c}=t.current,u=()=>{a(!1)},f=d=>{Et.updateCanvasConfig(t.current),d.preventDefault(),u()};return S.jsx(be,{className:"lc-header-canvas",title:"画布设置",visible:n,onClose:u,children:S.jsxs("form",{onSubmit:f,children:[S.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:S.jsxs(oa,{gridGap:"15px",columns:2,children:[S.jsx(Or,{label:"宽度",defaultValue:i,min:500,onChange:d=>t.current.width=d}),S.jsx(Or,{label:"高度",defaultValue:o,min:300,onChange:d=>t.current.height=d}),S.jsx(Wi,{label:"屏幕适配",options:[{label:"自适应",value:"scale"},{label:"撑满宽度",value:"full-x"},{label:"撑满高度",value:"full-y"},{label:"撑满全屏",value:"full-screen"}],defaultValue:t.current.adaptationType,onChange:d=>t.current.adaptationType=d}),S.jsx(Sl,{label:"栅格化",defaultValue:s,onChange:d=>{t.current.rasterize=d,r(d)}}),S.jsx(Or,{label:"拖拽",disabled:!e,defaultValue:l,min:1,onChange:d=>t.current.dragStep=d}),S.jsx(Or,{label:"缩放",disabled:!e,defaultValue:c,min:1,onChange:d=>t.current.resizeStep=d})]})}),S.jsx("p",{className:"canvas-config-desc",children:"说明：修改画布设置，会对整体效果产生较大影响，建议先调试好画布设置后再进行大屏设计"}),S.jsxs("div",{className:"lc-header-canvas-footer",children:[S.jsx(le,{type:"submit",children:"保存"}),"  ",S.jsx(le,{type:"button",onClick:u,children:"取消"})]})]})})},ap=Ot(np),ip=()=>{const t=q.useRef({...pr.projectConfig}),{projectVisible:e,setProjectVisible:r}=pr,{name:n,des:a,state:i,saveType:o}=t.current,s=()=>r(!1),l=c=>{c.preventDefault();const{updateProjectConfig:u}=pr;u(t.current),s()};return S.jsx(be,{title:"项目设置",className:"lc-header-project-set",visible:e,onClose:s,children:S.jsxs("form",{onSubmit:l,children:[S.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:S.jsxs(oa,{gridGap:"15px",columns:2,children:[S.jsx(Xr,{label:"项目名称",maxLength:20,defaultValue:n,onChange:c=>t.current.name=c}),S.jsx(Xr,{label:"项目描述",maxLength:60,defaultValue:a,onChange:c=>t.current.des=c}),S.jsx(El,{label:"项目状态",onChange:c=>t.current.state=c,containerStyle:{gridColumn:"1/3"},defaultValue:i,options:[{label:"草稿",value:Vr.DRAFT},{label:"发布",value:Vr.PUBLISH},{label:"封存",value:Vr.SEALED}]}),S.jsx(Wi,{label:"存储类型",options:[{value:"1",label:"本地存储"}],defaultValue:o})]})}),S.jsxs("div",{className:"lc-header-project-footer",children:[S.jsx(le,{type:"submit",children:"保存"}),S.jsx(le,{type:"button",onClick:s,children:"取消"})]})]})})},op=()=>{const t=q.useRef(),[e,r]=q.useState(!1),{themeVisible:n,setThemeVisible:a}=sn,i=()=>a(!1),o=()=>{const{flashGlobalTheme:s}=K;t.current&&(s(t.current),i())};return S.jsxs(S.Fragment,{children:[S.jsxs(be,{title:"主题设置(全局)",className:"lc-theme-config-global",visible:n,onClose:i,width:450,children:[S.jsx(le,{style:{width:"100%",height:50,margin:"5px 0 10px 0"},onClick:()=>r(!0),children:"+ 自定义主题"}),S.jsx("div",{style:{maxHeight:360,overflowY:"scroll",padding:"3px 0 6px 0"},children:S.jsx(Dl,{onSelected:s=>t.current=s})}),S.jsx("p",{style:{color:"#6e6e6e"},children:"警告：全局主题设置在更新后，会影响到当前项目的所有组件。请谨慎操作！"}),S.jsx(le,{style:{width:"100%",margin:"10px 0 5px 0"},onClick:o,children:"更新全局主题"})]}),S.jsx(be,{onClose:()=>r(!1),title:"编辑主题",visible:e,width:860,children:S.jsx(kl,{})})]})},sp=q.lazy(()=>ce(()=>import("./BluePrint-GmCzlJ_s.js"),__vite__mapDeps([62,1,2])));function lp(){return Ts.createPortal(S.jsx("div",{style:{position:"relative",top:-window.innerHeight,zIndex:2,width:"100%",height:"100%",backgroundColor:"#151515"},children:S.jsx(q.Suspense,{fallback:S.jsx(Qe,{}),children:S.jsx(sp,{})})}),document.body)}const cp=[{icon:S.jsx(Bl,{theme:"filled",style:{marginTop:2},strokeWidth:4,strokeLinecap:"square"}),name:"蓝图",key:"blue-print",onClick:()=>{const{setTargetIds:t}=it;t([]),yn.setBluePrintVisible(!0)}},{icon:S.jsx(Xl,{theme:"filled",style:{marginTop:2},strokeWidth:3,strokeLinecap:"square"}),name:"画布",key:"canvas",onClick:()=>Et.setCanvasVisible(!0)},{icon:S.jsx(nl,{theme:"filled",style:{marginTop:2},strokeWidth:4,strokeLinecap:"square"}),name:"主题",key:"theme",onClick:()=>sn.setThemeVisible(!0)}],up=[{icon:S.jsx(jl,{theme:"filled",style:{marginTop:2},strokeLinecap:"square"}),name:"导入",key:"import",onClick:()=>ep()},{icon:S.jsx(Gl,{theme:"filled",style:{marginTop:2},strokeLinecap:"square"}),name:"导出",key:"export",onClick:()=>tp()},{icon:S.jsx(Wl,{theme:"filled",style:{marginTop:2},strokeLinecap:"square"}),name:"保存",key:"save",onClick:()=>ds()},{icon:S.jsx(Al,{theme:"outline",style:{marginTop:2},strokeWidth:4,strokeLinecap:"square"}),name:"预览",key:"preview",onClick:()=>{const{saveType:t,id:e}=nn.parseUrlParams();window.open(`/light-chaser-app/#/view?id=${e}&saveType=${t}&mode=${Sr.VIEW}`,"_blank")}}],fp=Ot(()=>{const t=e=>{const r=[];for(let n=0;n<e.length;n++){const{icon:a,name:i,key:o,onClick:s}=e[n];r.push(S.jsxs("div",{className:"header-item",onClick:s,children:[a,S.jsx("span",{className:"item-span",children:i})]},o))}return r};return S.jsx(S.Fragment,{children:S.jsxs("div",{className:"designer-header",children:[S.jsx("div",{className:"header-left",children:S.jsx("div",{className:"header-title",children:"LIGHT CHASER"})}),S.jsx("div",{className:"header-center",children:t(cp)}),S.jsx("div",{className:"header-right",children:t(up)}),Et.canvasVisible&&S.jsx(ap,{}),pr.projectVisible&&S.jsx(ip,{}),sn.themeVisible&&S.jsx(op,{}),yn.bluePrintVisible&&S.jsx(lp,{})]})})});var Vt=(t=>(t[t.SINGLE=0]="SINGLE",t[t.COILED=1]="COILED",t))(Vt||{});const gs={"control + a":{handler:Ed,range:".lc-ruler-content"},"control + v":{handler:Dd,range:".lc-ruler-content"},"control + l":{handler:kd},"control + shift + l":{handler:Rd},"control + h":{handler:Od},"control + arrowup":{handler:wd},"control + arrowdown":{handler:Md},"alt + arrowup":{handler:Td},"alt + arrowdown":{handler:Id},"control + s":{handler:ds},"control + z":{handler:Xd},"control + shift + z":{handler:Ud},"control + k":{handler:$d},"control + 1":{handler:Kd},"control + 2":{handler:Zd},"control + 3":{handler:Jd},"control + 4":{handler:Qd},arrowup:{handler:jd,triggerType:Vt.COILED,range:".lc-ruler-content"},arrowdown:{handler:_d,triggerType:Vt.COILED,range:".lc-ruler-content"},arrowleft:{handler:Bd,triggerType:Vt.COILED,range:".lc-ruler-content"},arrowright:{handler:Gd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + shift + arrowup":{handler:Ad,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + shift + arrowdown":{handler:Nd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + shift + arrowleft":{handler:Wd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + shift + arrowright":{handler:Vd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + alt + arrowup":{handler:Hd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + alt + arrowdown":{handler:Fd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + alt + arrowleft":{handler:qd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + alt + arrowright":{handler:Yd,triggerType:Vt.COILED,range:".lc-ruler-content"},"control + g":{handler:zd},"control + shift + g":{handler:Ld},"alt + shift + g":{handler:Pd},"control + f":{handler:rp}},dp=/macintosh|mac os x/i.test(navigator.userAgent),pp={delete:{handler:[vs,ps,fs]},...gs},vp={"meta + backspace":{handler:[vs,ps,fs]},...gs},gp=dp?vp:pp;class hp extends q.Component{constructor(r){super(r);dt(this,"movableRef",q.createRef());dt(this,"onDragStart",r=>{const{target:n,inputEvent:a}=r,{layerConfigs:i}=K,{lock:o}=i[n.id];if(o)return!1;a&&a.shiftKey&&this.setState({throttleDragRotate:90})});dt(this,"onDrag",r=>{const{target:n,beforeTranslate:a}=r;n.style.transform=`translate(${a[0]}px, ${a[1]}px)`});dt(this,"onDragEnd",r=>{const{updateLayer:n}=K,{backoff:a,setBackoff:i}=it,{lastEvent:o,target:s}=r;if(o){const{beforeTranslate:c}=o,u=[{id:s.id,width:s.offsetWidth,height:s.offsetHeight,type:s.dataset.type,x:c[0],y:c[1]}];a?(n(u,!1),i(!1)):Pt.doDrag(u);const{updateBaseConfig:f}=Ir;f(u[0])}const{throttleDragRotate:l}=this.state;l!==0&&this.setState({throttleDragRotate:0})});dt(this,"onDragGroupStart",r=>{const{inputEvent:n}=r;n&&n.shiftKey&&this.setState({throttleDragRotate:90})});dt(this,"onDragGroup",r=>{const{targets:n}=r,{layerConfigs:a}=K;if(a[n[0].id].lock)return!1;r.events.forEach(o=>o.target.style.transform=o.transform)});dt(this,"onDragGroupEnd",r=>{var x;const{targets:n}=r,{updateLayer:a,layerConfigs:i}=K;if(i[n[0].id].lock)return!1;const{backoff:s,setBackoff:l,setGroupCoordinate:c,groupCoordinate:u,targetIds:f}=it,d=[];r.events.forEach(y=>{const{target:C,lastEvent:D}=y;if(D){const{beforeTranslate:b}=D;d.push({id:C.id,width:C.offsetWidth,height:C.offsetHeight,type:C.dataset.type,x:b[0],y:b[1]})}});const p=((x=r==null?void 0:r.lastEvent)==null?void 0:x.beforeTranslate)||[0,0],v=u.minX+p[0],g=u.minY+p[1];c({minX:v,minY:g}),d.length>0&&(s?(a(d,!1),l(!1)):Pt.doDrag(d));const{throttleDragRotate:h}=this.state;h!==0&&this.setState({throttleDragRotate:0});const m=Yr.findTopGroupLayer(f,!0);if(m.length===1){const{updateBaseConfig:y}=Ir;y({id:m[0],x:Math.round(v),y:Math.round(g)})}});dt(this,"onResizeStart",r=>{const{target:n,inputEvent:a}=r,{layerConfigs:i}=K,{lock:o}=i[n.id];if(o)return!1;a&&a.ctrlKey&&this.setState({keepRatio:!0})});dt(this,"onResize",r=>{const{target:n,width:a,height:i,drag:o}=r;n.style.width=`${a}px`,n.style.height=`${i}px`,n.style.transform=`translate(${o.beforeTranslate[0]}px, ${o.beforeTranslate[1]}px)`});dt(this,"onResizeEnd",r=>{const{updateLayer:n}=K,{backoff:a,setBackoff:i}=it,{target:o,lastEvent:s}=r;if(s){const{width:c,height:u,drag:{translate:f},direction:d}=s,p=[{id:o.id,width:c,height:u,type:o.dataset.type,x:f[0],y:f[1]}];a?(n(p,!1),i(!1)):Pt.doResize(p,d);const{updateBaseConfig:v}=Ir;v(p[0])}const{keepRatio:l}=this.state;l&&this.setState({keepRatio:!1})});dt(this,"onResizeGroupStart",r=>{const{targets:n,inputEvent:a}=r,{layerConfigs:i}=K;if(i[n[0].id].lock)return!1;a&&a.ctrlKey&&this.setState({keepRatio:!0})});dt(this,"onResizeGroup",r=>{r.events.forEach(n=>{n.target.style.width=`${n.width}px`,n.target.style.height=`${n.height}px`,n.target.style.transform=n.drag.transform})});dt(this,"onResizeGroupEnd",r=>{const{updateLayer:n}=K,{backoff:a,setBackoff:i,targetIds:o}=it,s=[];if(r.events.forEach(f=>{const{target:d,lastEvent:p}=f;if(p){const{drag:{translate:v}}=p;s.push({id:d.id,width:d.offsetWidth,height:d.offsetHeight,type:d.dataset.type,x:v[0],y:v[1]})}}),!r.lastEvent)return;const{dist:l,direction:c}=r.lastEvent;if(s.length>0){a?(n(s,!1),i(!1)):Pt.doResize(s,c);const{setGroupCoordinate:f,groupCoordinate:d}=it;c[0]===-1||c[1]===-1?f({minX:d.minX-l[0],minY:d.minY-l[1],groupWidth:d.groupWidth+l[0],groupHeight:d.groupHeight+l[1]}):f({groupWidth:d.groupWidth+l[0],groupHeight:d.groupHeight+l[1]});const p=Yr.findTopGroupLayer(o,!0);if(p.length===1){const{updateBaseConfig:v}=Ir;v({id:p[0],x:Math.round(d.minX),y:Math.round(d.minY),width:Math.round(d.groupWidth),height:Math.round(d.groupHeight)})}}const{keepRatio:u}=this.state;u&&this.setState({keepRatio:!1})});this.state={throttleDragRotate:0,keepRatio:!1}}componentDidMount(){const{setMovableRef:r}=it;r(this.movableRef.current)}render(){const{throttleDragRotate:r,keepRatio:n}=this.state,{selectorRef:a,targets:i}=it,{canvasConfig:{rasterize:o,dragStep:s,resizeStep:l}}=Et,c=Array.from(document.getElementsByClassName("lc-comp-item")).filter(u=>!i.includes(u));return S.jsxs(S.Fragment,{children:[this.props.children,S.jsx(us,{ref:this.movableRef,target:i,draggable:!0,resizable:!0,keepRatio:n,throttleDragRotate:r,hideChildMoveableDefaultLines:!0,maxSnapElementGuidelineDistance:200,isDisplaySnapDigit:!0,snappable:!0,snapGap:!1,snapThreshold:K.enableAdsorption?5:0,snapDirections:{top:!0,right:!0,bottom:!0,left:!0,center:!0,middle:!0},elementSnapDirections:{top:!0,right:!0,bottom:!0,left:!0,center:!0,middle:!0},verticalGuidelines:["0","100%"],horizontalGuidelines:["0","100%"],isDisplayInnerSnapDigit:!0,elementGuidelines:Array.from(c),ables:[xp],dimensionViewable:!0,throttleDrag:o?s:1,throttleResize:o?l:1,onClickGroup:u=>a==null?void 0:a.clickTarget(u.inputEvent,u.inputTarget),onDrag:this.onDrag,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragGroupStart:this.onDragGroupStart,onDragGroup:this.onDragGroup,onDragGroupEnd:this.onDragGroupEnd,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeEnd:this.onResizeEnd,onResizeGroupStart:this.onResizeGroupStart,onResizeGroup:this.onResizeGroup,onResizeGroupEnd:this.onResizeGroupEnd})]})}}const mp=Ot(hp),xp={name:"dimensionViewable",props:{dimensionViewable:Boolean},events:{},render(t){const e=t.getRect();return S.jsx("div",{className:"moveable-dimension",style:{left:"-125px",top:"-60px",color:"#cacacaff",fontSize:"14px",position:"absolute",boxSizing:"content-box",borderRadius:"5px",padding:"5px",pointerEvents:"none"},children:S.jsxs("div",{children:[S.jsxs("p",{children:["位置: ",Math.round(e.left)," x ",Math.round(e.top)]}),S.jsxs("p",{children:["尺寸: ",Math.round(e.offsetWidth)," x ",Math.round(e.offsetHeight)]})]})},"dimension-viewer")}},yp=Ot(()=>{const[t,e]=q.useState([]),{searchLayer:r}=Oe,n=()=>{Oe.setSearchLayer(!1),e([])},a=o=>{if(!o||o===""){e([]);return}const{layerConfigs:s}=K,l=[];Object.keys(s).forEach(c=>{var u;(u=s[c].name)!=null&&u.includes(o)&&l.push({id:c,name:s[c].name})}),e(l)},i=o=>{it.setTargetIds([o]),n()};return S.jsxs(be,{title:"搜索图层",className:"search-layer-dialog",visible:r,onClose:n,children:[S.jsx("div",{className:"search-layer-input",children:S.jsx(Xr,{placeholder:"请输入图层名称",autoFocus:!0,onChange:a})}),S.jsx("div",{className:"search-layer-body",children:t.length!==0&&t.map(o=>S.jsx("div",{className:"search-item",onClick:()=>i(o.id),children:o.name},o.id))})]})}),bp=q.lazy(()=>ce(()=>import("./DesignerContainer--sr1u0uN.js"),__vite__mapDeps([63,1,2]))),Cp=q.lazy(()=>ce(()=>import("./DesignerRuler-traTsz85.js"),__vite__mapDeps([64,1,2,4,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Sp=q.lazy(()=>ce(()=>import("./LayerManager-4wFtoUMN.js").then(t=>t.aY),__vite__mapDeps([4,3,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Ep=q.lazy(()=>ce(()=>import("./CanvasContextMenu-mQENXLXb.js"),__vite__mapDeps([65,1,2,3,29,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,30,31,66,26,27,28,32,33,23,24,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,67]))),Dp=q.lazy(()=>ce(()=>import("./HotKey-5lj4J_2k.js"),__vite__mapDeps([68,1,2,4,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,26,27,28,29,30,31,32,33,23,24,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58]))),kp=q.lazy(()=>ce(()=>import("./DesignerDragScaleContainer-fnTcgKSW.js"),__vite__mapDeps([69,1,2,70,4,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Rp=q.memo(Ot(()=>{const t=r=>{let{targetIds:n}=it;const{activeElem:a,activeConfig:i}=Qt;if(n.length===0){i(null,"");return}if(r.shiftKey||(n=Yr.findTopGroupLayer(n,!0)),n.length!==1)return;const o=n[0],{layerConfigs:s}=K,l=s[o];o!==a.id&&i(o,l.type)},{layerConfigs:e}=K;return S.jsxs(q.Suspense,{fallback:S.jsx(Qe,{}),children:[S.jsx(bp,{children:S.jsx(Sp,{children:S.jsx(Cp,{children:S.jsx(kp,{onDoubleClick:t,children:S.jsx(mp,{children:_i.buildCanvasComponents(e)})})})})}),S.jsx(Ep,{}),S.jsx(Dp,{handlerMapping:gp}),S.jsx(yp,{})]})})),hs=t=>{const{header:e,footer:r,left:n,right:a,content:i}=t;return S.jsxs("div",{className:"frame-layout",children:[S.jsx("div",{className:"fl-header",children:e}),S.jsxs("div",{className:"fl-body",children:[S.jsx("div",{className:"fl-left",children:n}),S.jsxs("div",{className:"fl-crf-box",children:[S.jsxs("div",{className:"fl-cr-box",children:[S.jsx("div",{className:"fl-content",children:i}),S.jsx("div",{className:"fl-right",children:a})]}),S.jsx("div",{className:"fl-footer",children:r})]})]})]})},lv=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"}));function wp(){document.addEventListener("click",ms),document.addEventListener("contextmenu",xs),document.addEventListener("pointerdown",ys),document.addEventListener("pointerup",bs)}function Mp(){document.removeEventListener("click",ms),document.removeEventListener("contextmenu",xs),document.removeEventListener("pointerdown",ys),document.removeEventListener("pointerup",bs)}const ms=t=>{const{visible:e,updateVisible:r}=cn;if(e&&t.button===0){const n=setTimeout(()=>{r(!1),clearTimeout(n)})}},xs=t=>{t.preventDefault();const{mouseDownTime:e,mouseUpTime:r,setPosition:n,updateVisible:a}=cn,{targetIds:i}=it,o=document.querySelector(".lc-event-container"),s=document.querySelector(".layer-items");i&&i.length>0&&(o!=null&&o.contains(t.target)||s!=null&&s.contains(t.target))&&r-e<200?(a&&a(!0),n([t.clientX,t.clientY])):a&&a(!1)},ys=()=>{const{setMouseDownTime:t}=cn;t(Date.now())},bs=t=>{const{setMouseUpTime:e}=cn;e(Date.now());const{setPointerTarget:r}=it;r(t.target)},Tp=t=>{const{id:e,type:r}=t;q.useEffect(()=>(Jn.getLoader(Sr.EDIT).load(e,r),wp(),()=>Mp()),[]);const{loaded:n}=on;return n?S.jsx("div",{style:{backgroundColor:"#1f1f1f"},children:S.jsx(hs,{header:S.jsx(fp,{}),left:S.jsx(lc,{}),content:S.jsx(Rp,{}),right:S.jsx(pc,{}),footer:S.jsx(yc,{})})}):S.jsx(Qe,{})},Ip=Ot(Tp);function Op(){const{saveType:t,id:e}=nn.parseUrlParams();return S.jsx(Ip,{id:e,type:t})}const cv=Object.freeze(Object.defineProperty({__proto__:null,default:Op},Symbol.toStringTag,{value:"Module"}));export{sv as B,je as C,cv as D,Nl as F,Vt as H,Pl as P,kd as a,zd as b,Ld as c,Rd as d,Dd as e,Id as f,wd as g,Md as h,fs as i,Od as j,qi as k,Td as l,yn as m,rn as n,lv as o,Pd as r};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/CompList-7aOsxhvy.js","assets/index-uVTr4DkP.js","assets/index-IyM4ICh1.css","assets/LCGUI-Ssa8gIoP.js","assets/LayerManager-4wFtoUMN.js","assets/UIContainer-QclyxjV1.js","assets/index-M4LYRhyC.js","assets/MainRouter-g_j_Is0t.js","assets/useZIndex-GVasLPt8.js","assets/UIContainer-2wM5o6qv.css","assets/FetchUtil-Ivd_z0Im.js","assets/LocalOperator-7SvlDKB4.js","assets/GlobalMessage-JdhJioSt.js","assets/Data-UXmzX42n.js","assets/Accordion-NfD7KWQm.js","assets/Switch-QMPoZeAy.js","assets/Switch-mqJvRLec.css","assets/Right-qoStPUum.js","assets/Accordion-SU6xlX8W.css","assets/Radio-sQVTRydY.js","assets/Radio-scZDuxp-.css","assets/index-kdYyXKyi.js","assets/LayerManager-jW1_BfPE.css","assets/Input-9780NKUC.js","assets/Input-ulYyAdl_.css","assets/DragAddProvider-_IIQLnDx.js","assets/System-pYXQSDsU.js","assets/Dialog-Jl5m87zi.js","assets/Dialog-IKScJss1.css","assets/FontGlobal-xcXzFch0.js","assets/PreviewOpen-ENcHxuXp.js","assets/FontGlobal-KAAIpN4X.css","assets/Grid-oNz44FEP.js","assets/Grid-p4FjUlc6.css","assets/MonacoEditor-sSMvmeEj.js","assets/MonacoEditor-yJ9UOCHw.css","assets/Button-7AqZH3Ej.js","assets/Button-Vi-JaWc8.css","assets/Plus-qX-9qqto.js","assets/CheckOutlined-nvg4YJ5D.js","assets/collapse-aS6vX33V.js","assets/useForceUpdate-nSRhn62x.js","assets/EyeOutlined-Tg_W9365.js","assets/omit-r5LB95NT.js","assets/index-ukWxjxRQ.js","assets/Info-C4FehWbX.js","assets/NumberInput-NcCS6SvK.js","assets/NumberInput-A_zfvH9I.css","assets/Select-_cu9XWlQ.js","assets/Select-fufuxCpP.css","assets/ThemeEditor-3B7v3kji.js","assets/ColorPicker-DxCpxgin.js","assets/index-qddGI14O.js","assets/Overflow-b4M-0-ow.js","assets/index-SZ5J42lB.js","assets/ColorPicker-V9ASUd98.css","assets/CardPanel-weG97GHY.js","assets/CardPanel-CjUkb6la.css","assets/ThemeEditor-G8RSs6OM.css","assets/CompList-zkHso7eT.css","assets/ImageSource-_925WT-0.js","assets/ImageSource-rrjS9xjn.css","assets/BluePrint-GmCzlJ_s.js","assets/DesignerContainer--sr1u0uN.js","assets/DesignerRuler-traTsz85.js","assets/CanvasContextMenu-mQENXLXb.js","assets/Down-tHO6iZoC.js","assets/CanvasContextMenu-CBU8e1pe.css","assets/HotKey-5lj4J_2k.js","assets/DesignerDragScaleContainer-fnTcgKSW.js","assets/DragScaleProvider-Xr3oGa7d.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}