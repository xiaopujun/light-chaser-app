import{R as n,r as j,j as t,L as N}from"./index-OsS9UfkW.js";import{a as u,L as b}from"./LCGUI-GANd_WR1.js";import{l as y,O as M}from"./ObjectUtil-nMvTrJhh.js";import{I as g}from"./index-K2O65-hP.js";import{D as R}from"./Down-uvD6wECP.js";import{R as S}from"./Right-PZN-lE1P.js";const w=g("add-one",!1,function(e){return n.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},n.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M24 16V32",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M16 24L32 24",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),z=g("delete-five",!1,function(e){return n.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},n.createElement("path",{d:"M8 11L40 11",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M18 5L30 5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M12 17H36V40C36 41.6569 34.6569 43 33 43H15C13.3431 43 12 41.6569 12 40V17Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M20 25L28 33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M28 25L20 33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),F=e=>{const{label:f,defaultValue:l=[],template:d,itemName:h}=e,[c,x]=n.useState(!1),W=u.parseSchemaData(d),k={children:[]};l.forEach((s,o)=>{var r;(r=k.children)==null||r.push({type:"accordion",key:o+"",label:(h||"系列")+(o+1),children:[{...u.schemaStructureAssignment(s,y.cloneDeep(d))}]})});const i=j.useRef(l),[a,m]=n.useState(k),C=()=>{var r;const{template:s}=e;if(!s)return;(r=a.children)==null||r.push({type:"accordion",key:i.current.length+"",label:(h||"系列")+(i.current.length+1),children:[s]}),m({...a}),i.current=[...i.current,{...W}];const{onChange:o}=e;o&&o(i.current)},E=()=>{var o;(o=a.children)==null||o.pop(),m({...a}),i.current.pop();const{onChange:s}=e;s&&s(i.current)},v=s=>{const{dataFragment:o}=s,r=Number(Object.keys(o)[0]);i.current[r]=M.merge(i.current[r],o[r]);const{onChange:L}=e;L&&L(i.current)};return t.jsxs("div",{className:"control-group",children:[t.jsxs("div",{className:"control-group-header",children:[t.jsx("div",{className:"cgh-label",children:t.jsx("span",{children:f})}),t.jsxs("div",{className:"cgh-operate",children:[t.jsx("span",{className:"operate-icon",onClick:E,children:t.jsx(z,{})}),t.jsx("span",{className:"operate-icon",onClick:C,children:t.jsx(w,{})}),t.jsx("span",{className:"operate-icon toggle-icon",onClick:()=>x(!c),children:c?t.jsx(R,{size:16}):t.jsx(S,{size:16})})]})]}),c&&t.jsx("div",{className:"control-group-body",style:{display:c?"block":"none"},children:t.jsx(j.Suspense,{fallback:t.jsx(N,{}),children:t.jsx(b,{schema:a,onFieldChange:v})})})]})};export{F as default};
