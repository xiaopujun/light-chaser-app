var j=Object.defineProperty;var w=(l,e,t)=>e in l?j(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var m=(l,e,t)=>(w(l,typeof e!="symbol"?e+"":e,t),t);import{r as T,j as c}from"./index-xvHtpy0-.js";import{aY as G,aZ as O}from"./EventOperateStore-IQvFHd5q.js";import{L as F,a as B}from"./LCGUI-SNiMvEtY.js";import"./mobxreact.esm-bhbgzqYc.js";import"./ObjectUtil-chSHfPRu.js";import"./AntdIcon-4A_YrOev.js";import"./MonacoEditor-tUSWqGwb.js";import"./Accordion-8bf0R7L0.js";import"./Switch-Ejz7uFg-.js";import"./UIContainer-1y1wcmMZ.js";import"./index-s96thRN1.js";import"./QuestionCircleOutlined-ABMv3OQq.js";import"./RightOutlined-9Q6vRlBe.js";import"./Radio-AHrpdyKb.js";import"./ColorPicker--GVXJx_9.js";import"./Overflow-dWkOYbs3.js";import"./CardPanel-tTg3SYyz.js";import"./Input-LFSkQmW6.js";import"./Grid-l48sKNap.js";import"./Button-8dQiU8Jj.js";class y{static colorConversion(e){if(e.length>=4&&e.length<=9&&e[0]==="#"){const t=y.hexToRgba(e,1);return{hex:e,rgba:t}}else return e.includes("rgb")?{hex:y.rgbaToHex(e),rgba:e}:(console.warn("color is not valid",e),{hex:"#000000",rgba:"rgba(0,0,0,1)"})}static hexToRgba(e,t){e=e.replace("#","");const r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return`rgba(${r}, ${n}, ${s}, ${t})`}static rgbaToHex(e){const t=e.substring(e.indexOf("(")).split(","),r=parseInt(t[0].substring(1).trim()),n=parseInt(t[1].trim()),s=parseInt(t[2].trim()),a=parseFloat(t[3]?t[3].substring(0,t[3].length-1).trim():"1"),o=r.toString(16).length===1?"0"+r.toString(16):r.toString(16),p=n.toString(16).length===1?"0"+n.toString(16):n.toString(16),d=s.toString(16).length===1?"0"+s.toString(16):s.toString(16),g=Math.round(a*255).toString(16).length===1?"0"+Math.round(a*255).toString(16):Math.round(a*255).toString(16);return"#"+o+p+d+g}static parseGradient(e){const t=e.match(/-?\d+deg/),r=t?parseInt(t[0]):0,n=e.match(/rgba?\([^)]+\) \d+(\.\d+)?%?/g),s=n==null?void 0:n.map(a=>{const o=a.lastIndexOf(" ");return{color:a.substring(0,o),pos:parseFloat(a.substring(o))/100}});return{angle:r,colors:s}}static parseAntdGradientToCss(e){const t=e.match(/l\((\d+)\)/),r=t?parseInt(t[1]):0,n=e.match(/(\d+):rgba?\([^)]+\)/g),s=n==null?void 0:n.map(a=>{const[o,p]=a.split(":");return{color:p,pos:parseFloat(o)/100}});return`linear-gradient(${r}deg,${s==null?void 0:s.map(a=>`${a.color} ${a.pos*100}%`).join(", ")})`}}class re extends T.Component{constructor(){super(...arguments);m(this,"AreaCoordinateSysChange",t=>{this.props.controller.update({style:t})});m(this,"baseAreaGraphicsChange",t=>{this.props.controller.update({style:t})})}render(){const{controller:t}=this.props,r=t.getConfig().style;return c.jsxs(c.Fragment,{children:[c.jsx(z,{controller:t}),c.jsx(G,{onChange:this.AreaCoordinateSysChange,config:r})]})}}const z=({controller:l})=>{var n,s,a,o,p,d,g,h,b,x,k,f;const e=l.getConfig().style,t=S=>{var v;let{id:A,data:i,dataKeyPath:$}=S;if(A==="areaColor")if(typeof i=="string"&&i.indexOf("linear-gradient")!==-1){const u=y.parseGradient(i.toLowerCase()),I=(v=u==null?void 0:u.colors)==null?void 0:v.map(C=>`${C.pos}:${C.color}`).join(" ");i=`l(${u.angle}) ${I}`,l.update(B.createObjectFromArray($,i))}else typeof i=="string"&&i.indexOf("radial-gradient")===-1?console.log("暂不径向渐变"):l.update({areaStyle:i});else l.update(S.dataFragment)},r={key:"style",type:"accordion",label:"图形",children:[{type:"grid",config:{containerStyle:{marginBottom:10}},children:[{label:"基准填充",type:"switch",key:"startOnZero",value:!!(e!=null&&e.startOnZero),config:{containerStyle:{marginBottom:10}}}]},{label:"数据点",type:"card-panel",children:[{type:"grid",config:{columns:2},children:[{key:"point",children:[{label:"尺寸",type:"number-input",key:"size",value:((n=e==null?void 0:e.point)==null?void 0:n.size)||0,config:{min:0,max:10}},{key:"style",children:[{key:"fill",type:"color-picker",label:"颜色",value:(a=(s=e==null?void 0:e.point)==null?void 0:s.style)==null?void 0:a.fill,config:{showText:!0}},{key:"lineWidth",type:"number-input",label:"描边宽",value:(p=(o=e==null?void 0:e.point)==null?void 0:o.style)==null?void 0:p.lineWidth,config:{min:0}},{key:"stroke",type:"color-picker",label:"描边色",value:(g=(d=e==null?void 0:e.point)==null?void 0:d.style)==null?void 0:g.stroke,config:{showText:!0}}]},{key:"shape",type:"select",label:"形状",value:((h=e==null?void 0:e.point)==null?void 0:h.shape)||"circle",config:{options:[{value:"circle",label:"圈形"},{value:"square",label:"方形"},{value:"bowtie",label:"领结"},{value:"diamond",label:"钻石"},{value:"hexagon",label:"六角形"},{value:"triangle",label:"三角形"}]}}]}]}]},{label:"数据线",type:"card-panel",children:[{type:"grid",config:{gridGap:"15px",columns:2},children:[{label:"平滑",type:"switch",key:"smooth",value:!!(e!=null&&e.smooth)},{key:"line",children:[{key:"size",type:"number-input",label:"宽度",value:((b=e==null?void 0:e.line)==null?void 0:b.size)||0,config:{min:0,max:10}},{key:"color",type:"color-picker",label:"颜色",value:((x=e==null?void 0:e.line)==null?void 0:x.color)||"#fff",config:{showText:!0}}]}]}]},{label:"数据面",type:"card-panel",children:[{key:"areaStyle",children:[{type:"grid",config:{columns:2},children:[{id:"areaColor",key:"fill",type:"color-picker",label:"颜色",value:((f=(k=e==null?void 0:e.point)==null?void 0:k.style)==null?void 0:f.fill)||"#fff",config:{showText:!0}}]}]}]}]};return c.jsx(F,{schema:r,onFieldChange:t})},ne=l=>{var a;const{controller:e}=l,t=(a=e==null?void 0:e.config)==null?void 0:a.style,r=O.getDataFieldOptions(e),n={key:"style",type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:t==null?void 0:t.xField,config:{options:r}},{key:"yField",type:"select",label:"Y字段",value:t==null?void 0:t.yField,config:{options:r}}]},s=o=>{e.update(o.dataFragment)};return c.jsx(F,{schema:n,onFieldChange:s})};export{ne as AntdBaseAreaFieldMapping,z as AntdBaseAreaGraphics,re as AntdBaseAreaStyleConfig};
