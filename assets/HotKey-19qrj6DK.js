import{r as m}from"./index-D6TBVxtY.js";import{e as h}from"./ViewDesignerLoader-CNRtTEkR.js";import{H as s}from"./DesignerPage-D-bu7JiD.js";import"./mobxreact.esm-JD4dsIZD.js";import"./MainRouter-P8gdG0Bh.js";import"./zoom-CntXMyuy.js";import"./asyncToGenerator-D9auTsc5.js";import"./Compact-D4tWohay.js";import"./useZIndex-3ZqMTx_f.js";import"./pickAttrs-DFSuEiRl.js";import"./index-iX9Jx9cy.js";import"./button-DegSlPI3.js";import"./render-D4mr46_6.js";import"./NumberInput-Cmrm0tNn.js";import"./index-mp9x8JDr.js";import"./GlobalMessage-axQKYq8I.js";import"./FetchUtil-DGFO2YFu.js";import"./Overflow-zjdP-BIA.js";import"./index-CtupgoPG.js";import"./index-BAAI1CD0.js";import"./Input-3EOJ10a0.js";import"./Data-HJtzqNGY.js";import"./collapse-BbEVqHco.js";import"./CheckBox-CSDxIqSw.js";import"./FontGlobal-BHni4hQg.js";import"./System-Dw03ZM9Z.js";import"./ThemeEditor-BgywPbtB.js";import"./Info-B9OU6uGK.js";const v=["alt","tab","control + s","control + l","control + shift + l","control + h","control + f","control + k","control + 1","control + 2","control + 3","control + 4","control + 5","control + g","control + d","control + shift + g"];function V(a){const f=m.useRef(a.handlerMapping??{}),e=m.useRef([]),p=m.useRef({}),d=o=>{const r=p.current[o];if(r)return r;{const t=document.querySelector(o);return t?(p.current[o]=t,t):null}},y=(o,r)=>{const{handler:t,triggerType:i=s.SINGLE,range:n}=f.current[r]||{};if(t&&(i===s.SINGLE||i===s.COILED)){const{pointerTarget:g}=h;if(n){const c=d(n);if(!c||!c.contains(g))return}Array.isArray(t)?t.forEach(c=>c(o)):t(o)}},u=o=>{var i;const r=(i=o.key)==null?void 0:i.toLowerCase();if(!r)return;e.current.some(n=>n===r)||e.current.push(r);const t=e.current.join(" + ");v.some(n=>n===t)&&o.preventDefault(),y(o,t)},l=o=>{const r=o.key.toLowerCase();e.current.some(t=>t===r)&&(e.current=e.current.filter(t=>t!==r))};return m.useEffect(()=>(document.addEventListener("keydown",u),document.addEventListener("keyup",l),document.onvisibilitychange=()=>{document.visibilityState==="visible"&&(e.current=[])},window.onfocus=()=>e.current=[],()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",l),document.onvisibilitychange=null,window.onfocus=null}),[]),null}export{V as default};
