import{r as s}from"./index-DF8CslTw.js";import{e as h}from"./ViewDesignerLoader-DbcV-Vl2.js";import{H as m}from"./DesignerPage-DNDAjh-o.js";import"./mobxreact.esm-BsmDqX7Y.js";import"./MainRouter-7T0Xhwoi.js";import"./ContextIsolator-B5tzl4j5.js";import"./asyncToGenerator-Bz8-zIuE.js";import"./Compact-b6VVnuNf.js";import"./pickAttrs-CpeCievI.js";import"./useZIndex-D4Xbk62X.js";import"./button-DAMZkvNG.js";import"./render-CAu_nbjN.js";import"./NumberInput-Daws4vqT.js";import"./zoom-DQjgxqMp.js";import"./index-rkab9nn3.js";import"./index-D7m8Erxe.js";import"./GlobalMessage-CdlqTxpH.js";import"./FetchUtil-CVmkh-II.js";import"./index-SIbFl28w.js";import"./index-Cx9NaC3k.js";import"./Data-CocKkqs0.js";import"./collapse-BbEVqHco.js";import"./FontGlobal-dpta2fGe.js";import"./logo-B79VZn9p.js";import"./ThemeEditor-Dsiq4NNk.js";import"./Info-BwR3h6bd.js";const v=["alt","tab","control + s","control + l","control + shift + l","control + h","control + f","control + k","control + 1","control + 2","control + 3","control + 4","control + 5","control + g","control + d","control + shift + g"];function P(a){const f=s.useRef(a.handlerMapping??{}),e=s.useRef([]),p=s.useRef({}),d=o=>{const r=p.current[o];if(r)return r;{const t=document.querySelector(o);return t?(p.current[o]=t,t):null}},y=(o,r)=>{const{handler:t,triggerType:i=m.SINGLE,range:n}=f.current[r]||{};if(t&&(i===m.SINGLE||i===m.COILED)){const{pointerTarget:g}=h;if(n){const c=d(n);if(!c||!c.contains(g))return}Array.isArray(t)?t.forEach(c=>c(o)):t(o)}},u=o=>{var i;const r=(i=o.key)==null?void 0:i.toLowerCase();if(!r)return;e.current.some(n=>n===r)||e.current.push(r);const t=e.current.join(" + ");v.some(n=>n===t)&&o.preventDefault(),y(o,t)},l=o=>{const r=o.key.toLowerCase();e.current.some(t=>t===r)&&(e.current=e.current.filter(t=>t!==r))};return s.useEffect(()=>(document.addEventListener("keydown",u),document.addEventListener("keyup",l),document.onvisibilitychange=()=>{document.visibilityState==="visible"&&(e.current=[])},window.onfocus=()=>e.current=[],()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",l),document.onvisibilitychange=null,window.onfocus=null}),[]),null}export{P as default};
