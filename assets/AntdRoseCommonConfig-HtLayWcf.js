var S=Object.defineProperty;var I=(l,e,t)=>e in l?S(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var v=(l,e,t)=>(I(l,typeof e!="symbol"?e+"":e,t),t);import{r as A,j as n}from"./index-_9qr0oWN.js";import{L as F,c as M}from"./LCGUI-_TxVjmqL.js";import{aK as P,aM as G}from"./LayerManager-hIg0IjRX.js";import"./UIContainer-XLRf6mqQ.js";import"./index-kZDLYPiu.js";import"./MainRouter-7hcCaRBx.js";import"./useZIndex-qhr_DBEB.js";import"./FetchUtil-Ivd_z0Im.js";import"./LocalOperator-eQcKoynI.js";import"./GlobalMessage-8PLQKfhk.js";import"./Data-YIYOaBPp.js";import"./Accordion-RLCicqYQ.js";import"./Switch-CeJKAgHc.js";import"./Right-Gw903mhU.js";import"./Radio-RVHVghPP.js";import"./index-4MusYDFh.js";class Q extends A.Component{constructor(){super(...arguments);v(this,"roseGraphicsChange",t=>{this.props.controller.update({style:t})})}render(){const t=this.props.controller,a=t.getConfig().style;return n.jsxs(n.Fragment,{children:[n.jsx(P,{controller:t}),n.jsx(L,{onChange:this.roseGraphicsChange,config:a})]})}}const L=({config:l,onChange:e})=>{var o,c,u,d,m,y,b,g,f,h,k;const[t,a]=A.useState(l),s=C=>{let{id:p,data:r,dataKeyPath:R,dataFragment:x,reRender:j}=C;p==="startAngle"||p==="endAngle"?(r=Math.PI*r/180,e&&e(M.createObjectFromArray(R,r))):p==="labelRotate"?e({label:{rotate:r*Math.PI}}):e&&e(x),j&&a({...t,...x})},i={children:[{type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2},children:[{key:"radius",type:"number-input",label:"外径",value:l.radius,config:{min:0,max:1,step:.01}},{id:"startAngle",key:"startAngle",type:"number-input",label:"起始角",value:(l.startAngle||0)/Math.PI*180,config:{suffix:"°"}},{key:"innerRadius",type:"number-input",label:"内径",value:l.innerRadius,config:{min:0,max:1,step:.01}},{id:"endAngle",key:"endAngle",type:"number-input",label:"结束角",value:(l.endAngle||2*Math.PI)/Math.PI*180,config:{suffix:"°"}},{key:"sectorStyle",children:[{key:"stroke",type:"color-picker",label:"描边色",value:(o=l.sectorStyle)==null?void 0:o.stroke,config:{showText:!0}},{key:"lineWidth",type:"number-input",label:"描边宽",value:(c=l.sectorStyle)==null?void 0:c.lineWidth,config:{min:0,max:30}}]},{key:"color",type:"color-mode",label:"颜色",value:"#1c1c1c",config:{containerStyle:{gridColumn:"1 / 3"}}}]}]},{type:"accordion",label:"标签",children:[{key:"label",type:"grid",config:{columns:2},children:[{key:"offset",type:"number-input",label:"偏移",value:((u=t.label)==null?void 0:u.offset)||0},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:((m=(d=t.label)==null?void 0:d.style)==null?void 0:m.fontSize)||12,config:{min:0,max:100}},{key:"fontWeight",type:"number-input",label:"加粗",value:((b=(y=t.label)==null?void 0:y.style)==null?void 0:b.fontWeight)||500,config:{min:100,max:900,step:100}},{key:"fill",type:"color-picker",label:"颜色",value:(f=(g=t.label)==null?void 0:g.style)==null?void 0:f.fill,config:{showText:!0}}]},{key:"autoRotate",type:"switch",label:"自动旋转",reRender:!0,value:(h=t.label)==null?void 0:h.autoRotate},{id:"labelRotate",key:"rotate",type:"number-input",label:"旋转角度",rules:"{autoRotate} === 'false'",value:((k=t.label)==null?void 0:k.rotate)||0,config:{min:0,max:2,step:.01}}]}]}]};return n.jsx(F,{schema:i,onFieldChange:s})},V=({controller:l})=>{var i;const e=(i=l.getConfig())==null?void 0:i.style,t=G.getDataFieldOptions(l),a={type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:e==null?void 0:e.xField,config:{options:t}},{key:"yField",type:"select",label:"Y字段",value:e==null?void 0:e.yField,config:{options:t}},{key:"seriesField",type:"select",label:"分组字段",value:e==null?void 0:e.seriesField,config:{options:t}}]},s=o=>{l.update(o.dataFragment)};return n.jsx(F,{schema:a,onFieldChange:s})};export{V as AntdRoseFieldMapping,L as AntdRoseGraphicsConfig,Q as default};
