import{r as j,j as e}from"./index-CIZzpp4t.js";import{U as v}from"./UIContainer-NEWVGUQ0.js";import{U as P,o as w}from"./index-Ky8VuNT2.js";import{g as c}from"./GlobalMessage-b_IUatJJ.js";import{A,P as I}from"./Plus-rhd2lwa8.js";import"./index-za7E6pLK.js";import"./MainRouter-LJqlNU58.js";import"./ResizeObserver.es-B32NGzNS.js";import"./useZIndex-C48Dwtsu.js";import"./Help-nAWCz3FQ.js";import"./index-PQsxm07c.js";import"./FetchUtil-FMEOVjjY.js";import"./CheckOutlined-nCXWjWxa.js";import"./collapse-aS6vX33V.js";import"./useForceUpdate-tvLBK-w1.js";import"./EyeOutlined-c7TT5NI5.js";import"./omit-avBY8roT.js";const D=d=>{const{onChange:o,defaultValue:a,accept:g,size:r,...f}=d,i={uid:"-1",name:"image.png",status:"done"},[s,p]=j.useState(a?[{...i,url:a}]:[]),h=n=>{var l;if(r&&n.size>r*1024*1024)return(l=c.messageApi)==null||l.warning(`文件大小不能超过${r}M`),!1;const{saveType:U}=P.parseUrlParams();return w[U].uploadImage(n).then(m=>{var u;if(!m)(u=c.messageApi)==null||u.error("上传失败");else{const{url:t,hash:x}=m;console.log(t),o&&o({url:t,hash:x}),p([{...i,url:t}])}}),!1};return e.jsx(v,{...f,className:"image-upload",children:e.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:s,accept:g,onRemove:()=>{p([]),o&&o({url:"",hash:""})},onPreview:()=>window.open(s[0].url),children:s.length>0?null:e.jsxs("div",{className:"upload-btn",children:[e.jsx(I,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{D as ImageUpload};
