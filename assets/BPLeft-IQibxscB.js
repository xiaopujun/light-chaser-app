import{r as i,j as e}from"./index-3GqucBfC.js";import{o,aS as d,bm as j,bn as N,bh as O,l as L,bo as H,bp as B,aM as v}from"./LayerManager-Id64Dr7s.js";import{D as w}from"./DragAddProvider-_IIQLnDx.js";import{A as m,_ as l}from"./AntdIcon-OHmKKYpl.js";import"./Button-BktP6eFA.js";import"./MainRouter-5S0GgxtQ.js";import"./useZIndex-9IcJXe4E.js";import"./button-bA6D7oLy.js";import"./omit-snSLv_vL.js";import"./Compact-PqrPY0tm.js";import"./AntdIcon-BYoPKEuB.js";import"./render-IWbIHfGq.js";import"./Overflow-blYa_Cc8.js";import"./GlobalMessage-uqw5jbrt.js";var V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};const z=V;var h=function(n,a){return i.createElement(m,l(l({},n),{},{ref:a,icon:z}))};h.displayName="ApartmentOutlined";const A=i.forwardRef(h);var M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};const S=M;var b=function(n,a){return i.createElement(m,l(l({},n),{},{ref:a,icon:S}))};b.displayName="FilterOutlined";const F=i.forwardRef(b);var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 392c8.8 0 16-7.2 16-16V192c0-8.8-7.2-16-16-16H744c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h56v240H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16V648c0-8.8-7.2-16-16-16h-56V392h56zM792 240h88v88h-88v-88zm-648 88v-88h88v88h-88zm88 456h-88v-88h88v88zm648-88v88h-88v-88h88zm-80-64h-56c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16h-56V392h56c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h56v240z"}}]},name:"gateway",theme:"outlined"};const E=k;var g=function(n,a){return i.createElement(m,l(l({},n),{},{ref:a,icon:E}))};g.displayName="GatewayOutlined";const G=i.forwardRef(g),le=()=>e.jsxs("div",{className:"bp-left",children:[e.jsx(I,{}),e.jsx(R,{})]}),I=o(()=>{const{activeMenu:t}=d,n=[{icon:e.jsx(N,{}),label:"图层节点",key:"layer"},{icon:e.jsx(A,{}),label:"逻辑节点",key:"logical"},{icon:e.jsx(G,{}),label:"全局变量",key:"global"},{icon:e.jsx(F,{}),label:"过滤器",key:"filter"}];return e.jsx("div",{className:"bp-node-sort-list",children:n.map((a,r)=>e.jsxs("div",{className:`bp-left-item ${t===a.key?"bp-left-item-active":""}`,onClick:()=>{d.setActiveMenu(a.key)},children:[e.jsx("div",{className:"bp-item-icon",children:a.icon}),e.jsx("div",{className:"bp-item-label",children:a.label})]},r))})}),P=t=>{var n,a;if(t.target.classList.contains("bp-drag-node")){const r=t.target;(n=t.dataTransfer)==null||n.setData("nodeId",r.getAttribute("data-id")),(a=t.dataTransfer)==null||a.setData("type",r.getAttribute("data-type"))}},$=t=>{t.preventDefault()},D=t=>{var p,u;t.preventDefault();let n=(p=t.dataTransfer)==null?void 0:p.getData("nodeId");const a=(u=t.dataTransfer)==null?void 0:u.getData("type"),{bpDragContentRef:r,canvasScale:c}=v,s=r==null?void 0:r.getBoundingClientRect(),f={x:(t.clientX-((s==null?void 0:s.x)||0))/c,y:(t.clientY-((s==null?void 0:s.y)||0))/c};if(a==="layer-node"){const{setUsedLayerNodes:x}=d;x(n,!0)}else n=O.generateId();const{addBPNodeLayout:y}=v;y({id:n,type:a,position:f})},R=o(()=>{const{activeMenu:t}=d,n=X[t],a=i.useRef(null);return i.useEffect(()=>(a.current=new w(document.getElementById("bp-node-draggable"),document.getElementById("bp-ds-container"),P,$,D),()=>{var r;return(r=a.current)==null?void 0:r.destroy()}),[t]),e.jsx("div",{className:"bp-node-list",children:e.jsx("div",{className:"bp-node-list-body",children:e.jsx("div",{className:"bp-node-list-container",id:"bp-node-draggable",style:{overflow:"scroll"},children:n&&e.jsx(n,{})})})})}),T=o(()=>{const{layerConfigs:t}=L,{usedLayerNodes:n}=d;return e.jsx(e.Fragment,{children:t&&Object.keys(t).map((a,r)=>{const c=t[a],s=n[a];return e.jsxs("div",{className:`bp-node-list-item bp-drag-node ${s?"bp-node-list-item-used":""}`,"data-id":c.id,"data-type":"layer-node",draggable:!s,children:[e.jsx("div",{className:"bpn-li-icon",children:e.jsx(j,{})}),e.jsx("div",{className:"bpn-li-label",children:c.name})]},r)})})}),C=()=>{const t=[{name:"条件判断",icon:H,type:"condition-node"},{name:"逻辑处理",icon:B,type:"logical-process-node"}];return e.jsx(e.Fragment,{children:t.map((n,a)=>e.jsxs("div",{className:"bp-node-list-item bp-drag-node","data-type":n.type,draggable:!0,children:[e.jsx("div",{className:"bpn-li-icon",children:e.jsx(n.icon,{})}),e.jsx("div",{className:"bpn-li-label",children:n.name})]},a))})},_=()=>e.jsx("div",{children:"开发中..."}),U=()=>e.jsx("div",{children:"开发中..."}),X={layer:T,logical:C,global:_,filter:U};export{U as BPFilterNodeList,_ as BPGlobalVariablesNodeList,T as BPLayerNodeList,C as BPLogicalNodeList,R as BPNodeList,I as BPNodeSortList,le as default,X as nodeListMapping};
