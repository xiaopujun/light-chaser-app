var We=Object.defineProperty;var Ue=(e,t,s)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var ve=(e,t,s)=>(Ue(e,typeof t!="symbol"?t+"":t,s),s);import{r as a,b as U,e as ze,j as ge}from"./index-Duc4ZoM_.js";import{f as j,g as le,c as F,h as ce,o as Be,y as Xe,_ as Se,m as z,p as D,r as Qe,C as Oe,k as Ve,R as Ye,U as Pe}from"./MainRouter-l7Z1Z1jr.js";import{C as qe,a as Je,E as Ze,L as et,r as tt}from"./render-8hUH_M6B.js";import{I as nt,C as ot}from"./InfoCircleFilled-JfnNzh3b.js";import{K as st,b as pe,C as at,u as rt}from"./useZIndex-c7eQO3Zz.js";import{g as it,m as lt}from"./AntdIcon-jwWmiLqW.js";var ke=a.forwardRef(function(e,t){var s=e.prefixCls,n=e.style,o=e.className,r=e.duration,m=r===void 0?4.5:r,S=e.eventKey,c=e.content,v=e.closable,p=e.closeIcon,d=p===void 0?"x":p,y=e.props,g=e.onClick,h=e.onNoticeClose,N=e.times,E=e.hovering,b=a.useState(!1),M=j(b,2),O=M[0],k=M[1],x=E||O,P=function(){h(S)},C=function(i){(i.key==="Enter"||i.code==="Enter"||i.keyCode===st.ENTER)&&P()};a.useEffect(function(){if(!x&&m>0){var l=setTimeout(function(){P()},m*1e3);return function(){clearTimeout(l)}}},[m,x,N]);var u="".concat(s,"-notice");return a.createElement("div",le({},y,{ref:t,className:F(u,o,ce({},"".concat(u,"-closable"),v)),style:n,onMouseEnter:function(i){var f;k(!0),y==null||(f=y.onMouseEnter)===null||f===void 0||f.call(y,i)},onMouseLeave:function(i){var f;k(!1),y==null||(f=y.onMouseLeave)===null||f===void 0||f.call(y,i)},onClick:g}),a.createElement("div",{className:"".concat(u,"-content")},c),v&&a.createElement("a",{tabIndex:0,className:"".concat(u,"-close"),onKeyDown:C,onClick:function(i){i.preventDefault(),i.stopPropagation(),P()}},d))}),Me=U.createContext({}),ct=function(t){var s=t.children,n=t.classNames;return U.createElement(Me.Provider,{value:{classNames:n}},s)},ye=8,Ce=3,he=16,ut=function(t){var s={offset:ye,threshold:Ce,gap:he};if(t&&Be(t)==="object"){var n,o,r;s.offset=(n=t.offset)!==null&&n!==void 0?n:ye,s.threshold=(o=t.threshold)!==null&&o!==void 0?o:Ce,s.gap=(r=t.gap)!==null&&r!==void 0?r:he}return[!!t,s]},ft=["className","style","classNames","styles"],dt=function(t){var s,n=t.configList,o=t.placement,r=t.prefixCls,m=t.className,S=t.style,c=t.motion,v=t.onAllNoticeRemoved,p=t.onNoticeClose,d=t.stack,y=a.useContext(Me),g=y.classNames,h=a.useRef({}),N=a.useState(null),E=j(N,2),b=E[0],M=E[1],O=a.useState([]),k=j(O,2),x=k[0],P=k[1],C=n.map(function($){return{config:$,key:String($.key)}}),u=ut(d),l=j(u,2),i=l[0],f=l[1],I=f.offset,A=f.threshold,G=f.gap,H=i&&(x.length>0||C.length<=A),Ae=typeof c=="function"?c(o):c;return a.useEffect(function(){i&&x.length>1&&P(function($){return $.filter(function(_){return C.some(function(X){var ee=X.key;return _===ee})})})},[x,C,i]),a.useEffect(function(){var $;if(i&&h.current[($=C[C.length-1])===null||$===void 0?void 0:$.key]){var _;M(h.current[(_=C[C.length-1])===null||_===void 0?void 0:_.key])}},[C,i]),U.createElement(Xe,le({key:o,className:F(r,"".concat(r,"-").concat(o),g==null?void 0:g.list,m,(s={},ce(s,"".concat(r,"-stack"),!!i),ce(s,"".concat(r,"-stack-expanded"),H),s)),style:S,keys:C,motionAppear:!0},Ae,{onAllRemoved:function(){v(o)}}),function($,_){var X=$.config,ee=$.className,je=$.style,Fe=$.index,fe=X,te=fe.key,_e=fe.times,R=String(te),K=X,Le=K.className,Te=K.style,Q=K.classNames,V=K.styles,He=Se(K,ft),ne=C.findIndex(function(q){return q.key===R}),Y={};if(i){var W=C.length-1-(ne>-1?ne:Fe-1),de=o==="top"||o==="bottom"?"-50%":"0";if(W>0){var oe,se,ae;Y.height=H?(oe=h.current[R])===null||oe===void 0?void 0:oe.offsetHeight:b==null?void 0:b.offsetHeight;for(var me=0,re=0;re<W;re++){var ie;me+=((ie=h.current[C[C.length-1-re].key])===null||ie===void 0?void 0:ie.offsetHeight)+G}var De=(H?me:W*I)*(o.startsWith("top")?1:-1),Ge=!H&&b!==null&&b!==void 0&&b.offsetWidth&&(se=h.current[R])!==null&&se!==void 0&&se.offsetWidth?((b==null?void 0:b.offsetWidth)-I*2*(W<3?W:3))/((ae=h.current[R])===null||ae===void 0?void 0:ae.offsetWidth):1;Y.transform="translate3d(".concat(de,", ").concat(De,"px, 0) scaleX(").concat(Ge,")")}else Y.transform="translate3d(".concat(de,", 0, 0)")}return U.createElement("div",{ref:_,className:F("".concat(r,"-notice-wrapper"),ee,Q==null?void 0:Q.wrapper),style:z(z(z({},je),Y),V==null?void 0:V.wrapper),onMouseEnter:function(){return P(function(L){return L.includes(R)?L:[].concat(D(L),[R])})},onMouseLeave:function(){return P(function(L){return L.filter(function(Ke){return Ke!==R})})}},U.createElement(ke,le({},He,{ref:function(L){ne>-1?h.current[R]=L:delete h.current[R]},prefixCls:r,classNames:Q,styles:V,className:F(Le,g==null?void 0:g.notice),style:Te,times:_e,key:te,eventKey:te,onNoticeClose:p,hovering:i&&x.length>0})))})},mt=a.forwardRef(function(e,t){var s=e.prefixCls,n=s===void 0?"rc-notification":s,o=e.container,r=e.motion,m=e.maxCount,S=e.className,c=e.style,v=e.onAllRemoved,p=e.stack,d=e.renderNotifications,y=a.useState([]),g=j(y,2),h=g[0],N=g[1],E=function(l){var i,f=h.find(function(I){return I.key===l});f==null||(i=f.onClose)===null||i===void 0||i.call(f),N(function(I){return I.filter(function(A){return A.key!==l})})};a.useImperativeHandle(t,function(){return{open:function(l){N(function(i){var f=D(i),I=f.findIndex(function(H){return H.key===l.key}),A=z({},l);if(I>=0){var G;A.times=(((G=i[I])===null||G===void 0?void 0:G.times)||0)+1,f[I]=A}else A.times=0,f.push(A);return m>0&&f.length>m&&(f=f.slice(-m)),f})},close:function(l){E(l)},destroy:function(){N([])}}});var b=a.useState({}),M=j(b,2),O=M[0],k=M[1];a.useEffect(function(){var u={};h.forEach(function(l){var i=l.placement,f=i===void 0?"topRight":i;f&&(u[f]=u[f]||[],u[f].push(l))}),Object.keys(O).forEach(function(l){u[l]=u[l]||[]}),k(u)},[h]);var x=function(l){k(function(i){var f=z({},i),I=f[l]||[];return I.length||delete f[l],f})},P=a.useRef(!1);if(a.useEffect(function(){Object.keys(O).length>0?P.current=!0:P.current&&(v==null||v(),P.current=!1)},[O]),!o)return null;var C=Object.keys(O);return ze.createPortal(a.createElement(a.Fragment,null,C.map(function(u){var l=O[u],i=a.createElement(dt,{key:u,configList:l,placement:u,prefixCls:n,className:S==null?void 0:S(u),style:c==null?void 0:c(u),motion:r,onNoticeClose:E,onAllNoticeRemoved:x,stack:p});return d?d(i,{prefixCls:n,key:u}):i})),o)}),vt=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],gt=function(){return document.body},xe=0;function pt(){for(var e={},t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return s.forEach(function(o){o&&Object.keys(o).forEach(function(r){var m=o[r];m!==void 0&&(e[r]=m)})}),e}function yt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,s=t===void 0?gt:t,n=e.motion,o=e.prefixCls,r=e.maxCount,m=e.className,S=e.style,c=e.onAllRemoved,v=e.stack,p=e.renderNotifications,d=Se(e,vt),y=a.useState(),g=j(y,2),h=g[0],N=g[1],E=a.useRef(),b=a.createElement(mt,{container:h,ref:E,prefixCls:o,motion:n,maxCount:r,className:m,style:S,onAllRemoved:c,stack:v,renderNotifications:p}),M=a.useState([]),O=j(M,2),k=O[0],x=O[1],P=a.useMemo(function(){return{open:function(u){var l=pt(d,u);(l.key===null||l.key===void 0)&&(l.key="rc-notification-".concat(xe),xe+=1),x(function(i){return[].concat(D(i),[{type:"open",config:l}])})},close:function(u){x(function(l){return[].concat(D(l),[{type:"close",key:u}])})},destroy:function(){x(function(u){return[].concat(D(u),[{type:"destroy"}])})}}},[]);return a.useEffect(function(){N(s())}),a.useEffect(function(){E.current&&k.length&&(k.forEach(function(C){switch(C.type){case"open":E.current.open(C.config);break;case"close":E.current.close(C.key);break;case"destroy":E.current.destroy();break}}),x(function(C){return C.filter(function(u){return!k.includes(u)})}))},[k]),[P,b]}const Ct=e=>{const{componentCls:t,iconCls:s,boxShadow:n,colorText:o,colorSuccess:r,colorError:m,colorWarning:S,colorInfo:c,fontSizeLG:v,motionEaseInOutCirc:p,motionDurationSlow:d,marginXS:y,paddingXS:g,borderRadiusLG:h,zIndexPopup:N,contentPadding:E,contentBg:b}=e,M=`${t}-notice`,O=new pe("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:g,transform:"translateY(0)",opacity:1}}),k=new pe("MessageMoveOut",{"0%":{maxHeight:e.height,padding:g,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),x={padding:g,textAlign:"center",[`${t}-custom-content > ${s}`]:{verticalAlign:"text-bottom",marginInlineEnd:y,fontSize:v},[`${M}-content`]:{display:"inline-block",padding:E,background:b,borderRadius:h,boxShadow:n,pointerEvents:"all"},[`${t}-success > ${s}`]:{color:r},[`${t}-error > ${s}`]:{color:m},[`${t}-warning > ${s}`]:{color:S},[`${t}-info > ${s},
      ${t}-loading > ${s}`]:{color:c}};return[{[t]:Object.assign(Object.assign({},Qe(e)),{color:o,position:"fixed",top:y,width:"100%",pointerEvents:"none",zIndex:N,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:O,animationDuration:d,animationPlayState:"paused",animationTimingFunction:p},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:k,animationDuration:d,animationPlayState:"paused",animationTimingFunction:p},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${M}-wrapper`]:Object.assign({},x)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},x),{padding:0,textAlign:"start"})}]},ht=e=>({zIndexPopup:e.zIndexPopupBase+at+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),$e=it("Message",e=>{const t=lt(e,{height:150});return[Ct(t)]},ht);var xt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(s[n[o]]=e[n[o]]);return s};const Nt={info:a.createElement(nt,null),success:a.createElement(qe,null),error:a.createElement(Je,null),warning:a.createElement(Ze,null),loading:a.createElement(et,null)},Ie=e=>{let{prefixCls:t,type:s,icon:n,children:o}=e;return a.createElement("div",{className:F(`${t}-custom-content`,`${t}-${s}`)},n||Nt[s],a.createElement("span",null,o))},Et=e=>{const{prefixCls:t,className:s,type:n,icon:o,content:r}=e,m=xt(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:S}=a.useContext(Oe),c=t||S("message"),v=rt(c),[p,d]=$e(c,v);return p(a.createElement(ke,Object.assign({},m,{prefixCls:c,className:F(s,d,`${c}-notice-pure-panel`,v),eventKey:"pure",duration:null,content:a.createElement(Ie,{prefixCls:c,type:n,icon:o},r)})))},bt=Et;function St(e,t){return{motionName:t??`${e}-move-up`}}function ue(e){let t;const s=new Promise(o=>{t=e(()=>{o(!0)})}),n=()=>{t==null||t()};return n.then=(o,r)=>s.then(o,r),n.promise=s,n}var Ot=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(s[n[o]]=e[n[o]]);return s};const Pt=8,kt=3,Mt=e=>{let{children:t,prefixCls:s}=e;const[n,o]=$e(s);return n(a.createElement(ct,{classNames:{list:o,notice:o}},t))},$t=(e,t)=>{let{prefixCls:s,key:n}=t;return a.createElement(Mt,{prefixCls:s,key:n},e)},It=a.forwardRef((e,t)=>{const{top:s,prefixCls:n,getContainer:o,maxCount:r,duration:m=kt,rtl:S,transitionName:c,onAllRemoved:v}=e,{getPrefixCls:p,getPopupContainer:d,message:y}=a.useContext(Oe),g=n||p("message"),h=()=>({left:"50%",transform:"translateX(-50%)",top:s??Pt}),N=()=>F({[`${g}-rtl`]:S}),E=()=>St(g,c),b=a.createElement("span",{className:`${g}-close-x`},a.createElement(ot,{className:`${g}-close-icon`})),[M,O]=yt({prefixCls:g,style:h,className:N,motion:E,closable:!1,closeIcon:b,duration:m,getContainer:()=>(o==null?void 0:o())||(d==null?void 0:d())||document.body,maxCount:r,onAllRemoved:v,renderNotifications:$t});return a.useImperativeHandle(t,()=>Object.assign(Object.assign({},M),{prefixCls:g,message:y})),O});let Ne=0;function we(e){const t=a.useRef(null);return Ve(),[a.useMemo(()=>{const n=c=>{var v;(v=t.current)===null||v===void 0||v.close(c)},o=c=>{if(!t.current){const P=()=>{};return P.then=()=>{},P}const{open:v,prefixCls:p,message:d}=t.current,y=`${p}-notice`,{content:g,icon:h,type:N,key:E,className:b,style:M,onClose:O}=c,k=Ot(c,["content","icon","type","key","className","style","onClose"]);let x=E;return x==null&&(Ne+=1,x=`antd-message-${Ne}`),ue(P=>(v(Object.assign(Object.assign({},k),{key:x,content:a.createElement(Ie,{prefixCls:p,type:N,icon:h},g),placement:"top",className:F(N&&`${y}-${N}`,b,d==null?void 0:d.className),style:Object.assign(Object.assign({},d==null?void 0:d.style),M),onClose:()=>{O==null||O(),P()}})),()=>{n(x)}))},m={open:o,destroy:c=>{var v;c!==void 0?n(c):(v=t.current)===null||v===void 0||v.destroy()}};return["info","success","warning","error","loading"].forEach(c=>{const v=(p,d,y)=>{let g;p&&typeof p=="object"&&"content"in p?g=p:g={content:p};let h,N;typeof d=="function"?N=d:(h=d,N=y);const E=Object.assign(Object.assign({onClose:N,duration:h},g),{type:c});return o(E)};m[c]=v}),m},[]),a.createElement(It,Object.assign({key:"message-holder"},e,{ref:t}))]}function wt(e){return we(e)}let w=null,T=e=>e(),B=[],J={};function Ee(){const{prefixCls:e,getContainer:t,duration:s,rtl:n,maxCount:o,top:r}=J,m=e??Pe().getPrefixCls("message"),S=(t==null?void 0:t())||document.body;return{prefixCls:m,getContainer:()=>S,duration:s,rtl:n,maxCount:o,top:r}}const Rt=a.forwardRef((e,t)=>{const[s,n]=a.useState(Ee),[o,r]=we(s),m=Pe(),S=m.getRootPrefixCls(),c=m.getIconPrefixCls(),v=m.getTheme(),p=()=>{n(Ee)};return a.useEffect(p,[]),a.useImperativeHandle(t,()=>{const d=Object.assign({},o);return Object.keys(d).forEach(y=>{d[y]=function(){return p(),o[y].apply(o,arguments)}}),{instance:d,sync:p}}),a.createElement(Ye,{prefixCls:S,iconPrefixCls:c,theme:v},r)});function Z(){if(!w){const e=document.createDocumentFragment(),t={fragment:e};w=t,T(()=>{tt(a.createElement(Rt,{ref:s=>{const{instance:n,sync:o}=s||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=o,Z())})}}),e)});return}w.instance&&(B.forEach(e=>{const{type:t,skipped:s}=e;if(!s)switch(t){case"open":{T(()=>{const n=w.instance.open(Object.assign(Object.assign({},J),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":T(()=>{w==null||w.instance.destroy(e.key)});break;default:T(()=>{var n;const o=(n=w.instance)[t].apply(n,D(e.args));o==null||o.then(e.resolve),e.setCloseFn(o)})}}),B=[])}function At(e){J=Object.assign(Object.assign({},J),e),T(()=>{var t;(t=w==null?void 0:w.sync)===null||t===void 0||t.call(w)})}function jt(e){const t=ue(s=>{let n;const o={type:"open",config:e,resolve:s,setCloseFn:r=>{n=r}};return B.push(o),()=>{n?T(()=>{n()}):o.skipped=!0}});return Z(),t}function Ft(e,t){const s=ue(n=>{let o;const r={type:e,args:t,resolve:n,setCloseFn:m=>{o=m}};return B.push(r),()=>{o?T(()=>{o()}):r.skipped=!0}});return Z(),s}function _t(e){B.push({type:"destroy",key:e}),Z()}const Lt=["success","info","warning","error","loading"],Tt={open:jt,destroy:_t,config:At,useMessage:wt,_InternalPanelDoNotUseOrYouWillBeFired:bt},Re=Tt;Lt.forEach(e=>{Re[e]=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return Ft(e,s)}});const Ht=Re;class Dt{constructor(){ve(this,"messageApi",null)}setMessageApi(t){this.messageApi=t}}const be=new Dt;function Qt(){const[e,t]=Ht.useMessage();return a.useEffect(()=>(be.setMessageApi(e),()=>{be.setMessageApi(null)}),[]),ge.jsx(ge.Fragment,{children:t})}export{Qt as default,be as globalMessage};
