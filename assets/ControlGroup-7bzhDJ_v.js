import{b as n,r as j,j as t,L as b}from"./index-Duc4ZoM_.js";import{aW as u,aN as v}from"./ViewDesignerLoader-8rMP9FZs.js";import{l as y,O as M}from"./LocalOperator-t4oOcFvM.js";import{I as g}from"./index-AfMii643.js";import{D as S}from"./Down-X5z7RGv2.js";import{R as w}from"./Right-5BVu1toC.js";import"./mobxreact.esm-AXuQb6fD.js";import"./FetchUtil-5ZwtxN_0.js";import"./Data-_fslVRGK.js";import"./index--SWnmJ5Q.js";import"./GlobalMessage-I0KrOayq.js";import"./MainRouter-l7Z1Z1jr.js";import"./render-8hUH_M6B.js";import"./AntdIcon-jwWmiLqW.js";import"./InfoCircleFilled-JfnNzh3b.js";import"./useZIndex-c7eQO3Zz.js";const z=g("add-one",!1,function(e){return n.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},n.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M24 16V32",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M16 24L32 24",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),D=g("delete-five",!1,function(e){return n.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},n.createElement("path",{d:"M8 11L40 11",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M18 5L30 5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M12 17H36V40C36 41.6569 34.6569 43 33 43H15C13.3431 43 12 41.6569 12 40V17Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M20 25L28 33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M28 25L20 33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),Q=e=>{const{label:f,defaultValue:l=[],template:d,itemName:h}=e,[c,x]=n.useState(!1),W=u.parseSchemaData(d),k={children:[]};l.forEach((r,o)=>{var s;(s=k.children)==null||s.push({type:"accordion",key:o+"",label:(h||"系列")+(o+1),children:[{...u.schemaStructureAssignment(r,y.cloneDeep(d))}]})});const i=j.useRef(l),[a,m]=n.useState(k),C=()=>{var s;const{template:r}=e;if(!r)return;(s=a.children)==null||s.push({type:"accordion",key:i.current.length+"",label:(h||"系列")+(i.current.length+1),children:[r]}),m({...a}),i.current=[...i.current,{...W}];const{onChange:o}=e;o&&o(i.current)},E=()=>{var o;(o=a.children)==null||o.pop(),m({...a}),i.current.pop();const{onChange:r}=e;r&&r(i.current)},N=r=>{const{dataFragment:o}=r,s=Number(Object.keys(o)[0]);i.current[s]=M.merge(i.current[s],o[s]);const{onChange:L}=e;L&&L(i.current)};return t.jsxs("div",{className:"control-group",children:[t.jsxs("div",{className:"control-group-header",children:[t.jsx("div",{className:"cgh-label",children:t.jsx("span",{children:f})}),t.jsxs("div",{className:"cgh-operate",children:[t.jsx("span",{className:"operate-icon",onClick:E,children:t.jsx(D,{})}),t.jsx("span",{className:"operate-icon",onClick:C,children:t.jsx(z,{})}),t.jsx("span",{className:"operate-icon toggle-icon",onClick:()=>x(!c),children:c?t.jsx(S,{size:16}):t.jsx(w,{size:16})})]})]}),c&&t.jsx("div",{className:"control-group-body",style:{display:c?"block":"none"},children:t.jsx(j.Suspense,{fallback:t.jsx(b,{}),children:t.jsx(v,{schema:a,onFieldChange:N})})})]})};export{Q as default};
