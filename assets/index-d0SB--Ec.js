var kt=Object.defineProperty;var qt=(g,v,m)=>v in g?kt(g,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):g[v]=m;var Ve=(g,v,m)=>(qt(g,typeof v!="symbol"?v+"":v,m),m);import{r as q,A as Ee,_ as te,b as Zt,j as k,X as fe,g as er}from"./index-n_baRMQq.js";import{l as Je,O as tr}from"./lodash-PKoA678W.js";var rr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"};const nr=rr;var Ge=function(v,m){return q.createElement(Ee,te(te({},v),{},{ref:m,icon:nr}))};Ge.displayName="EditFilled";const Er=q.forwardRef(Ge);var or={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M396 512a112 112 0 10224 0 112 112 0 10-224 0zm546.2-25.8C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}}]},name:"eye",theme:"filled"};const ar=or;var Ke=function(v,m){return q.createElement(Ee,te(te({},v),{},{ref:m,icon:ar}))};Ke.displayName="EyeFilled";const Ir=q.forwardRef(Ke);var ir={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 476H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"line",theme:"outlined"};const sr=ir;var Qe=function(v,m){return q.createElement(Ee,te(te({},v),{},{ref:m,icon:sr}))};Qe.displayName="LineOutlined";const fr=q.forwardRef(Qe);var we=(g=>(g.LOCAL="0",g.SERVER="1",g))(we||{}),ur=(g=>(g.DRAFT="0",g.PUBLISH="1",g.SEALED="2",g))(ur||{});let cr=g=>crypto.getRandomValues(new Uint8Array(g)),lr=(g,v,m)=>{let y=(2<<Math.log(g.length-1)/Math.LN2)-1,D=-~(1.6*y*v/g.length);return(R=v)=>{let E="";for(;;){let w=m(D),N=D;for(;N--;)if(E+=g[w[N]&y]||"",E.length===R)return E}}},dr=(g,v=21)=>lr(g,v,cr);class He{static generateId(){return dr("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",10)()}}class Sr extends q.Component{constructor(){super(...arguments);Ve(this,"onClose",()=>{const{onClose:m}=this.props;m&&m()})}render(){const{title:m="设置",visible:y=!1,children:D,width:R=400,height:E,className:w}=this.props;return y?Zt.createPortal(k.jsx("div",{className:`lc-dialog lc-dialog-mask ${w}`,children:k.jsxs("div",{className:"dialog-body",children:[k.jsxs("div",{className:"dialog-header",children:[k.jsx("div",{className:"dialog-title",children:m}),k.jsx("div",{className:"dialog-close",children:k.jsx(fr,{onClick:this.onClose})})]}),k.jsx("div",{className:"dialog-content",style:{width:R,height:E,minHeight:100},children:D})]})}),document.body):null}}var vr=(g=>(g.EDIT="0",g.VIEW="1",g))(vr||{});class Rr{static parseUrlParams(){const v=new URLSearchParams(window.location.hash.split("?")[1]),m={};for(const[y,D]of v)m[y]=D;return m}static buildUrlParams(v){const m=new URLSearchParams;for(const y in v)v.hasOwnProperty(y)&&m.append(y,v[y]);return m.toString()}}function ue(g){throw new Error('Could not dynamically require "'+g+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(g,v){(function(m){g.exports=m()})(function(){return function m(y,D,R){function E(F,W){if(!D[F]){if(!y[F]){var d=typeof ue=="function"&&ue;if(!W&&d)return d(F,!0);if(w)return w(F,!0);var p=new Error("Cannot find module '"+F+"'");throw p.code="MODULE_NOT_FOUND",p}var L=D[F]={exports:{}};y[F][0].call(L.exports,function(C){var V=y[F][1][C];return E(V||C)},L,L.exports,m,y,D,R)}return D[F].exports}for(var w=typeof ue=="function"&&ue,N=0;N<R.length;N++)E(R[N]);return E}({1:[function(m,y,D){(function(R){var E=R.MutationObserver||R.WebKitMutationObserver,w;if(E){var N=0,F=new E(C),W=R.document.createTextNode("");F.observe(W,{characterData:!0}),w=function(){W.data=N=++N%2}}else if(!R.setImmediate&&typeof R.MessageChannel<"u"){var d=new R.MessageChannel;d.port1.onmessage=C,w=function(){d.port2.postMessage(0)}}else"document"in R&&"onreadystatechange"in R.document.createElement("script")?w=function(){var O=R.document.createElement("script");O.onreadystatechange=function(){C(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},R.document.documentElement.appendChild(O)}:w=function(){setTimeout(C,0)};var p,L=[];function C(){p=!0;for(var O,J,B=L.length;B;){for(J=L,L=[],O=-1;++O<B;)J[O]();B=L.length}p=!1}y.exports=V;function V(O){L.push(O)===1&&!p&&w()}}).call(this,typeof fe<"u"?fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(m,y,D){var R=m(1);function E(){}var w={},N=["REJECTED"],F=["FULFILLED"],W=["PENDING"];y.exports=d;function d(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=W,this.queue=[],this.outcome=void 0,l!==E&&V(this,l)}d.prototype.catch=function(l){return this.then(null,l)},d.prototype.then=function(l,I){if(typeof l!="function"&&this.state===F||typeof I!="function"&&this.state===N)return this;var _=new this.constructor(E);if(this.state!==W){var A=this.state===F?l:I;L(_,A,this.outcome)}else this.queue.push(new p(_,l,I));return _};function p(l,I,_){this.promise=l,typeof I=="function"&&(this.onFulfilled=I,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(l){w.resolve(this.promise,l)},p.prototype.otherCallFulfilled=function(l){L(this.promise,this.onFulfilled,l)},p.prototype.callRejected=function(l){w.reject(this.promise,l)},p.prototype.otherCallRejected=function(l){L(this.promise,this.onRejected,l)};function L(l,I,_){R(function(){var A;try{A=I(_)}catch(U){return w.reject(l,U)}A===l?w.reject(l,new TypeError("Cannot resolve promise with itself")):w.resolve(l,A)})}w.resolve=function(l,I){var _=O(C,I);if(_.status==="error")return w.reject(l,_.value);var A=_.value;if(A)V(l,A);else{l.state=F,l.outcome=I;for(var U=-1,M=l.queue.length;++U<M;)l.queue[U].callFulfilled(I)}return l},w.reject=function(l,I){l.state=N,l.outcome=I;for(var _=-1,A=l.queue.length;++_<A;)l.queue[_].callRejected(I);return l};function C(l){var I=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof I=="function")return function(){I.apply(l,arguments)}}function V(l,I){var _=!1;function A(Y){_||(_=!0,w.reject(l,Y))}function U(Y){_||(_=!0,w.resolve(l,Y))}function M(){I(U,A)}var $=O(M);$.status==="error"&&A($.value)}function O(l,I){var _={};try{_.value=l(I),_.status="success"}catch(A){_.status="error",_.value=A}return _}d.resolve=J;function J(l){return l instanceof this?l:w.resolve(new this(E),l)}d.reject=B;function B(l){var I=new this(E);return w.reject(I,l)}d.all=ce;function ce(l){var I=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=l.length,A=!1;if(!_)return this.resolve([]);for(var U=new Array(_),M=0,$=-1,Y=new this(E);++$<_;)H(l[$],$);return Y;function H(re,ae){I.resolve(re).then(le,function(Z){A||(A=!0,w.reject(Y,Z))});function le(Z){U[ae]=Z,++M===_&&!A&&(A=!0,w.resolve(Y,U))}}}d.race=X;function X(l){var I=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=l.length,A=!1;if(!_)return this.resolve([]);for(var U=-1,M=new this(E);++U<_;)$(l[U]);return M;function $(Y){I.resolve(Y).then(function(H){A||(A=!0,w.resolve(M,H))},function(H){A||(A=!0,w.reject(M,H))})}}},{1:1}],3:[function(m,y,D){(function(R){typeof R.Promise!="function"&&(R.Promise=m(2))}).call(this,typeof fe<"u"?fe:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(m,y,D){var R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function E(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function w(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var N=w();function F(){try{if(!N||!N.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function W(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(n){if(n.name!=="TypeError")throw n;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,a=0;a<e.length;a+=1)o.append(e[a]);return o.getBlob(r.type)}}typeof Promise>"u"&&m(3);var d=Promise;function p(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function L(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function C(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function V(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var O="local-forage-detect-blob-support",J=void 0,B={},ce=Object.prototype.toString,X="readonly",l="readwrite";function I(e){for(var r=e.length,t=new ArrayBuffer(r),o=new Uint8Array(t),a=0;a<r;a++)o[a]=e.charCodeAt(a);return t}function _(e){return new d(function(r){var t=e.transaction(O,l),o=W([""]);t.objectStore(O).put(o,"key"),t.onabort=function(a){a.preventDefault(),a.stopPropagation(),r(!1)},t.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);r(n||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function A(e){return typeof J=="boolean"?d.resolve(J):_(e).then(function(r){return J=r,J})}function U(e){var r=B[e.name],t={};t.promise=new d(function(o,a){t.resolve=o,t.reject=a}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function M(e){var r=B[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function $(e,r){var t=B[e.name],o=t.deferredOperations.pop();if(o)return o.reject(r),o.promise}function Y(e,r){return new d(function(t,o){if(B[e.name]=B[e.name]||Se(),e.db)if(r)U(e),e.db.close();else return t(e.db);var a=[e.name];r&&a.push(e.version);var n=N.open.apply(N,a);r&&(n.onupgradeneeded=function(i){var s=n.result;try{s.createObjectStore(e.storeName),i.oldVersion<=1&&s.createObjectStore(O)}catch(f){if(f.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+i.oldVersion+" to version "+i.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw f}}),n.onerror=function(i){i.preventDefault(),o(n.error)},n.onsuccess=function(){var i=n.result;i.onversionchange=function(s){s.target.close()},t(i),M(e)}})}function H(e){return Y(e,!1)}function re(e){return Y(e,!0)}function ae(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,a=e.version>e.db.version;if(o&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||t){if(t){var n=e.db.version+1;n>e.version&&(e.version=n)}return!0}return!1}function le(e){return new d(function(r,t){var o=new FileReader;o.onerror=t,o.onloadend=function(a){var n=btoa(a.target.result||"");r({__local_forage_encoded_blob:!0,data:n,type:e.type})},o.readAsBinaryString(e)})}function Z(e){var r=I(atob(e.data));return W([r],{type:e.type})}function Ie(e){return e&&e.__local_forage_encoded_blob}function qe(e){var r=this,t=r._initReady().then(function(){var o=B[r._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return L(t,e,e),t}function Ze(e){U(e);for(var r=B[e.name],t=r.forages,o=0;o<t.length;o++){var a=t[o];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,H(e).then(function(n){return e.db=n,ae(e)?re(e):n}).then(function(n){e.db=r.db=n;for(var i=0;i<t.length;i++)t[i]._dbInfo.db=n}).catch(function(n){throw $(e,n),n})}function G(e,r,t,o){o===void 0&&(o=1);try{var a=e.db.transaction(e.storeName,r);t(null,a)}catch(n){if(o>0&&(!e.db||n.name==="InvalidStateError"||n.name==="NotFoundError"))return d.resolve().then(function(){if(!e.db||n.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),re(e)}).then(function(){return Ze(e).then(function(){G(e,r,t,o-1)})}).catch(t);t(n)}}function Se(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function et(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var a=B[t.name];a||(a=Se(),B[t.name]=a),a.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=qe);var n=[];function i(){return d.resolve()}for(var s=0;s<a.forages.length;s++){var f=a.forages[s];f!==r&&n.push(f._initReady().catch(i))}var u=a.forages.slice(0);return d.all(n).then(function(){return t.db=a.db,H(t)}).then(function(c){return t.db=c,ae(t,r._defaultConfig.version)?re(t):c}).then(function(c){t.db=a.db=c,r._dbInfo=t;for(var h=0;h<u.length;h++){var b=u[h];b!==r&&(b._dbInfo.db=t.db,b._dbInfo.version=t.version)}})}function tt(e,r){var t=this;e=C(e);var o=new d(function(a,n){t.ready().then(function(){G(t._dbInfo,X,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=f.get(e);u.onsuccess=function(){var c=u.result;c===void 0&&(c=null),Ie(c)&&(c=Z(c)),a(c)},u.onerror=function(){n(u.error)}}catch(c){n(c)}})}).catch(n)});return p(o,r),o}function rt(e,r){var t=this,o=new d(function(a,n){t.ready().then(function(){G(t._dbInfo,X,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=f.openCursor(),c=1;u.onsuccess=function(){var h=u.result;if(h){var b=h.value;Ie(b)&&(b=Z(b));var S=e(b,h.key,c++);S!==void 0?a(S):h.continue()}else a()},u.onerror=function(){n(u.error)}}catch(h){n(h)}})}).catch(n)});return p(o,r),o}function nt(e,r,t){var o=this;e=C(e);var a=new d(function(n,i){var s;o.ready().then(function(){return s=o._dbInfo,ce.call(r)==="[object Blob]"?A(s.db).then(function(f){return f?r:le(r)}):r}).then(function(f){G(o._dbInfo,l,function(u,c){if(u)return i(u);try{var h=c.objectStore(o._dbInfo.storeName);f===null&&(f=void 0);var b=h.put(f,e);c.oncomplete=function(){f===void 0&&(f=null),n(f)},c.onabort=c.onerror=function(){var S=b.error?b.error:b.transaction.error;i(S)}}catch(S){i(S)}})}).catch(i)});return p(a,t),a}function ot(e,r){var t=this;e=C(e);var o=new d(function(a,n){t.ready().then(function(){G(t._dbInfo,l,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=f.delete(e);s.oncomplete=function(){a()},s.onerror=function(){n(u.error)},s.onabort=function(){var c=u.error?u.error:u.transaction.error;n(c)}}catch(c){n(c)}})}).catch(n)});return p(o,r),o}function at(e){var r=this,t=new d(function(o,a){r.ready().then(function(){G(r._dbInfo,l,function(n,i){if(n)return a(n);try{var s=i.objectStore(r._dbInfo.storeName),f=s.clear();i.oncomplete=function(){o()},i.onabort=i.onerror=function(){var u=f.error?f.error:f.transaction.error;a(u)}}catch(u){a(u)}})}).catch(a)});return p(t,e),t}function it(e){var r=this,t=new d(function(o,a){r.ready().then(function(){G(r._dbInfo,X,function(n,i){if(n)return a(n);try{var s=i.objectStore(r._dbInfo.storeName),f=s.count();f.onsuccess=function(){o(f.result)},f.onerror=function(){a(f.error)}}catch(u){a(u)}})}).catch(a)});return p(t,e),t}function st(e,r){var t=this,o=new d(function(a,n){if(e<0){a(null);return}t.ready().then(function(){G(t._dbInfo,X,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=!1,c=f.openKeyCursor();c.onsuccess=function(){var h=c.result;if(!h){a(null);return}e===0||u?a(h.key):(u=!0,h.advance(e))},c.onerror=function(){n(c.error)}}catch(h){n(h)}})}).catch(n)});return p(o,r),o}function ft(e){var r=this,t=new d(function(o,a){r.ready().then(function(){G(r._dbInfo,X,function(n,i){if(n)return a(n);try{var s=i.objectStore(r._dbInfo.storeName),f=s.openKeyCursor(),u=[];f.onsuccess=function(){var c=f.result;if(!c){o(u);return}u.push(c.key),c.continue()},f.onerror=function(){a(f.error)}}catch(c){a(c)}})}).catch(a)});return p(t,e),t}function ut(e,r){r=V.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,a;if(!e.name)a=d.reject("Invalid arguments");else{var n=e.name===t.name&&o._dbInfo.db,i=n?d.resolve(o._dbInfo.db):H(e).then(function(s){var f=B[e.name],u=f.forages;f.db=s;for(var c=0;c<u.length;c++)u[c]._dbInfo.db=s;return s});e.storeName?a=i.then(function(s){if(s.objectStoreNames.contains(e.storeName)){var f=s.version+1;U(e);var u=B[e.name],c=u.forages;s.close();for(var h=0;h<c.length;h++){var b=c[h];b._dbInfo.db=null,b._dbInfo.version=f}var S=new d(function(x,P){var T=N.open(e.name,f);T.onerror=function(z){var oe=T.result;oe.close(),P(z)},T.onupgradeneeded=function(){var z=T.result;z.deleteObjectStore(e.storeName)},T.onsuccess=function(){var z=T.result;z.close(),x(z)}});return S.then(function(x){u.db=x;for(var P=0;P<c.length;P++){var T=c[P];T._dbInfo.db=x,M(T._dbInfo)}}).catch(function(x){throw($(e,x)||d.resolve()).catch(function(){}),x})}}):a=i.then(function(s){U(e);var f=B[e.name],u=f.forages;s.close();for(var c=0;c<u.length;c++){var h=u[c];h._dbInfo.db=null}var b=new d(function(S,x){var P=N.deleteDatabase(e.name);P.onerror=function(){var T=P.result;T&&T.close(),x(P.error)},P.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},P.onsuccess=function(){var T=P.result;T&&T.close(),S(T)}});return b.then(function(S){f.db=S;for(var x=0;x<u.length;x++){var P=u[x];M(P._dbInfo)}}).catch(function(S){throw($(e,S)||d.resolve()).catch(function(){}),S})})}return p(a,r),a}var ct={_driver:"asyncStorage",_initStorage:et,_support:F(),iterate:rt,getItem:tt,setItem:nt,removeItem:ot,clear:at,length:it,key:st,keys:ft,dropInstance:ut};function lt(){return typeof openDatabase=="function"}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dt="~~local_forage_type~",Re=/^~~local_forage_type~([^~]+)~/,ie="__lfsc__:",de=ie.length,ve="arbf",he="blob",xe="si08",Ae="ui08",De="uic8",Ne="si16",Te="si32",Le="ur16",Pe="ui32",Ce="fl32",Oe="fl64",Be=de+ve.length,Fe=Object.prototype.toString;function Ue(e){var r=e.length*.75,t=e.length,o,a=0,n,i,s,f;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var u=new ArrayBuffer(r),c=new Uint8Array(u);for(o=0;o<t;o+=4)n=K.indexOf(e[o]),i=K.indexOf(e[o+1]),s=K.indexOf(e[o+2]),f=K.indexOf(e[o+3]),c[a++]=n<<2|i>>4,c[a++]=(i&15)<<4|s>>2,c[a++]=(s&3)<<6|f&63;return u}function me(e){var r=new Uint8Array(e),t="",o;for(o=0;o<r.length;o+=3)t+=K[r[o]>>2],t+=K[(r[o]&3)<<4|r[o+1]>>4],t+=K[(r[o+1]&15)<<2|r[o+2]>>6],t+=K[r[o+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function vt(e,r){var t="";if(e&&(t=Fe.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Fe.call(e.buffer)==="[object ArrayBuffer]")){var o,a=ie;e instanceof ArrayBuffer?(o=e,a+=ve):(o=e.buffer,t==="[object Int8Array]"?a+=xe:t==="[object Uint8Array]"?a+=Ae:t==="[object Uint8ClampedArray]"?a+=De:t==="[object Int16Array]"?a+=Ne:t==="[object Uint16Array]"?a+=Le:t==="[object Int32Array]"?a+=Te:t==="[object Uint32Array]"?a+=Pe:t==="[object Float32Array]"?a+=Ce:t==="[object Float64Array]"?a+=Oe:r(new Error("Failed to get type for BinaryArray"))),r(a+me(o))}else if(t==="[object Blob]"){var n=new FileReader;n.onload=function(){var i=dt+e.type+"~"+me(this.result);r(ie+he+i)},n.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),r(null,i)}}function ht(e){if(e.substring(0,de)!==ie)return JSON.parse(e);var r=e.substring(Be),t=e.substring(de,Be),o;if(t===he&&Re.test(r)){var a=r.match(Re);o=a[1],r=r.substring(a[0].length)}var n=Ue(r);switch(t){case ve:return n;case he:return W([n],{type:o});case xe:return new Int8Array(n);case Ae:return new Uint8Array(n);case De:return new Uint8ClampedArray(n);case Ne:return new Int16Array(n);case Le:return new Uint16Array(n);case Te:return new Int32Array(n);case Pe:return new Uint32Array(n);case Ce:return new Float32Array(n);case Oe:return new Float64Array(n);default:throw new Error("Unkown type: "+t)}}var pe={serialize:vt,deserialize:ht,stringToBuffer:Ue,bufferToString:me};function je(e,r,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function mt(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var a=new d(function(n,i){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(s){return i(s)}t.db.transaction(function(s){je(s,t,function(){r._dbInfo=t,n()},function(f,u){i(u)})},i)});return t.serializer=pe,a}function Q(e,r,t,o,a,n){e.executeSql(t,o,a,function(i,s){s.code===s.SYNTAX_ERR?i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(f,u){u.rows.length?n(f,s):je(f,r,function(){f.executeSql(t,o,a,n)},n)},n):n(i,s)},n)}function pt(e,r){var t=this;e=C(e);var o=new d(function(a,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(f,u){var c=u.rows.length?u.rows.item(0).value:null;c&&(c=i.serializer.deserialize(c)),a(c)},function(f,u){n(u)})})}).catch(n)});return p(o,r),o}function gt(e,r){var t=this,o=new d(function(a,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT * FROM "+i.storeName,[],function(f,u){for(var c=u.rows,h=c.length,b=0;b<h;b++){var S=c.item(b),x=S.value;if(x&&(x=i.serializer.deserialize(x)),x=e(x,S.key,b+1),x!==void 0){a(x);return}}a()},function(f,u){n(u)})})}).catch(n)});return p(o,r),o}function Me(e,r,t,o){var a=this;e=C(e);var n=new d(function(i,s){a.ready().then(function(){r===void 0&&(r=null);var f=r,u=a._dbInfo;u.serializer.serialize(r,function(c,h){h?s(h):u.db.transaction(function(b){Q(b,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,c],function(){i(f)},function(S,x){s(x)})},function(b){if(b.code===b.QUOTA_ERR){if(o>0){i(Me.apply(a,[e,f,t,o-1]));return}s(b)}})})}).catch(s)});return p(n,t),n}function yt(e,r,t){return Me.apply(this,[e,r,t,1])}function bt(e,r){var t=this;e=C(e);var o=new d(function(a,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){Q(s,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){a()},function(f,u){n(u)})})}).catch(n)});return p(o,r),o}function _t(e){var r=this,t=new d(function(o,a){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(i){Q(i,n,"DELETE FROM "+n.storeName,[],function(){o()},function(s,f){a(f)})})}).catch(a)});return p(t,e),t}function wt(e){var r=this,t=new d(function(o,a){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(i){Q(i,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(s,f){var u=f.rows.item(0).c;o(u)},function(s,f){a(f)})})}).catch(a)});return p(t,e),t}function Et(e,r){var t=this,o=new d(function(a,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(f,u){var c=u.rows.length?u.rows.item(0).key:null;a(c)},function(f,u){n(u)})})}).catch(n)});return p(o,r),o}function It(e){var r=this,t=new d(function(o,a){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(i){Q(i,n,"SELECT key FROM "+n.storeName,[],function(s,f){for(var u=[],c=0;c<f.rows.length;c++)u.push(f.rows.item(c).key);o(u)},function(s,f){a(f)})})}).catch(a)});return p(t,e),t}function St(e){return new d(function(r,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(a,n){for(var i=[],s=0;s<n.rows.length;s++)i.push(n.rows.item(s).name);r({db:e,storeNames:i})},function(a,n){t(n)})},function(o){t(o)})})}function Rt(e,r){r=V.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,a;return e.name?a=new d(function(n){var i;e.name===t.name?i=o._dbInfo.db:i=openDatabase(e.name,"","",0),e.storeName?n({db:i,storeNames:[e.storeName]}):n(St(i))}).then(function(n){return new d(function(i,s){n.db.transaction(function(f){function u(S){return new d(function(x,P){f.executeSql("DROP TABLE IF EXISTS "+S,[],function(){x()},function(T,z){P(z)})})}for(var c=[],h=0,b=n.storeNames.length;h<b;h++)c.push(u(n.storeNames[h]));d.all(c).then(function(){i()}).catch(function(S){s(S)})},function(f){s(f)})})}):a=d.reject("Invalid arguments"),p(a,r),a}var xt={_driver:"webSQLStorage",_initStorage:mt,_support:lt(),iterate:gt,getItem:pt,setItem:yt,removeItem:bt,clear:_t,length:wt,key:Et,keys:It,dropInstance:Rt};function At(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function $e(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function Dt(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Nt(){return!Dt()||localStorage.length>0}function Tt(e){var r=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=$e(e,r._defaultConfig),Nt()?(r._dbInfo=t,t.serializer=pe,d.resolve()):d.reject()}function Lt(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo.keyPrefix,a=localStorage.length-1;a>=0;a--){var n=localStorage.key(a);n.indexOf(o)===0&&localStorage.removeItem(n)}});return p(t,e),t}function Pt(e,r){var t=this;e=C(e);var o=t.ready().then(function(){var a=t._dbInfo,n=localStorage.getItem(a.keyPrefix+e);return n&&(n=a.serializer.deserialize(n)),n});return p(o,r),o}function Ct(e,r){var t=this,o=t.ready().then(function(){for(var a=t._dbInfo,n=a.keyPrefix,i=n.length,s=localStorage.length,f=1,u=0;u<s;u++){var c=localStorage.key(u);if(c.indexOf(n)===0){var h=localStorage.getItem(c);if(h&&(h=a.serializer.deserialize(h)),h=e(h,c.substring(i),f++),h!==void 0)return h}}});return p(o,r),o}function Ot(e,r){var t=this,o=t.ready().then(function(){var a=t._dbInfo,n;try{n=localStorage.key(e)}catch{n=null}return n&&(n=n.substring(a.keyPrefix.length)),n});return p(o,r),o}function Bt(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo,a=localStorage.length,n=[],i=0;i<a;i++){var s=localStorage.key(i);s.indexOf(o.keyPrefix)===0&&n.push(s.substring(o.keyPrefix.length))}return n});return p(t,e),t}function Ft(e){var r=this,t=r.keys().then(function(o){return o.length});return p(t,e),t}function Ut(e,r){var t=this;e=C(e);var o=t.ready().then(function(){var a=t._dbInfo;localStorage.removeItem(a.keyPrefix+e)});return p(o,r),o}function jt(e,r,t){var o=this;e=C(e);var a=o.ready().then(function(){r===void 0&&(r=null);var n=r;return new d(function(i,s){var f=o._dbInfo;f.serializer.serialize(r,function(u,c){if(c)s(c);else try{localStorage.setItem(f.keyPrefix+e,u),i(n)}catch(h){(h.name==="QuotaExceededError"||h.name==="NS_ERROR_DOM_QUOTA_REACHED")&&s(h),s(h)}})})});return p(a,t),a}function Mt(e,r){if(r=V.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,a;return e.name?a=new d(function(n){e.storeName?n($e(e,o._defaultConfig)):n(e.name+"/")}).then(function(n){for(var i=localStorage.length-1;i>=0;i--){var s=localStorage.key(i);s.indexOf(n)===0&&localStorage.removeItem(s)}}):a=d.reject("Invalid arguments"),p(a,r),a}var $t={_driver:"localStorageWrapper",_initStorage:Tt,_support:At(),iterate:Ct,getItem:Pt,setItem:jt,removeItem:Ut,clear:Lt,length:Ft,key:Ot,keys:Bt,dropInstance:Mt},Yt=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},zt=function(r,t){for(var o=r.length,a=0;a<o;){if(Yt(r[a],t))return!0;a++}return!1},Ye=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},ne={},ze={},ee={INDEXEDDB:ct,WEBSQL:xt,LOCALSTORAGE:$t},Wt=[ee.INDEXEDDB._driver,ee.WEBSQL._driver,ee.LOCALSTORAGE._driver],se=["dropInstance"],ge=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(se),Vt={description:"",driver:Wt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Jt(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function ye(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(Ye(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var Ht=function(){function e(r){E(this,e);for(var t in ee)if(ee.hasOwnProperty(t)){var o=ee[t],a=o._driver;this[t]=a,ne[a]||this.defineDriver(o)}this._defaultConfig=ye({},Vt),this._config=ye({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":R(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,a){var n=new d(function(i,s){try{var f=t._driver,u=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){s(u);return}for(var c=ge.concat("_initStorage"),h=0,b=c.length;h<b;h++){var S=c[h],x=!zt(se,S);if((x||t[S])&&typeof t[S]!="function"){s(u);return}}var P=function(){for(var oe=function(Qt){return function(){var Xt=new Error("Method "+Qt+" is not implemented by the current driver"),We=d.reject(Xt);return p(We,arguments[arguments.length-1]),We}},be=0,Kt=se.length;be<Kt;be++){var _e=se[be];t[_e]||(t[_e]=oe(_e))}};P();var T=function(oe){ne[f]&&console.info("Redefining LocalForage driver: "+f),ne[f]=t,ze[f]=oe,i()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(T,s):T(!!t._support):T(!0)}catch(z){s(z)}});return L(n,o,a),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,a){var n=ne[t]?d.resolve(ne[t]):d.reject(new Error("Driver not found."));return L(n,o,a),n},e.prototype.getSerializer=function(t){var o=d.resolve(pe);return L(o,t),o},e.prototype.ready=function(t){var o=this,a=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return L(a,t,t),a},e.prototype.setDriver=function(t,o,a){var n=this;Ye(t)||(t=[t]);var i=this._getSupportedDrivers(t);function s(){n._config.driver=n.driver()}function f(h){return n._extend(h),s(),n._ready=n._initStorage(n._config),n._ready}function u(h){return function(){var b=0;function S(){for(;b<h.length;){var x=h[b];return b++,n._dbInfo=null,n._ready=null,n.getDriver(x).then(f).catch(S)}s();var P=new Error("No available storage method found.");return n._driverSet=d.reject(P),n._driverSet}return S()}}var c=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=c.then(function(){var h=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(h).then(function(b){n._driver=b._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=u(i)})}).catch(function(){s();var h=new Error("No available storage method found.");return n._driverSet=d.reject(h),n._driverSet}),L(this._driverSet,o,a),this._driverSet},e.prototype.supports=function(t){return!!ze[t]},e.prototype._extend=function(t){ye(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],a=0,n=t.length;a<n;a++){var i=t[a];this.supports(i)&&o.push(i)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=ge.length;t<o;t++)Jt(this,ge[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Gt=new Ht;y.exports=Gt},{3:3}]},{},[4])(4)})})(Xe);var hr=Xe.exports;const j=er(hr);class ke{}class mr extends ke{async createProject(v){v.id=He.generateId();const m=v.dataJson;let y=await j.getItem("light-chaser-project-list")||[];return v.dataJson=void 0,y.push(v),await j.setItem("light-chaser-project-list",y),await j.setItem(v.id,m),Promise.resolve(v.id)}async updateProject(v){v=Je.cloneDeep(v);const m=v.dataJson;delete v.dataJson;let y=await j.getItem("light-chaser-project-list")||[];const D=y.findIndex(E=>E.id===v.id);if(D===-1)return!1;const R=y[D];return v=tr.merge(R,v),y[D]=v,await j.setItem("light-chaser-project-list",y),m&&await j.setItem(v.id,m),!0}async deleteProject(v){const m=await j.getItem("light-chaser-project-list")||[],y=m.findIndex(D=>D.id===v);return y===-1?!1:(m.splice(y,1),await j.setItem("light-chaser-project-list",m),await j.removeItem(v),!0)}async getProjectData(v){const m=await j.getItem(v);return m?JSON.parse(m):null}async getProjectInfoList(){return await j.getItem("light-chaser-project-list")||[]}async copyProject(v,m){const y=await j.getItem("light-chaser-project-list")||[],D=y.findIndex(N=>N.id===v);if(D===-1)return"";const R=y[D],E=Je.cloneDeep(R);E.id=He.generateId(),E.name=m||E.name+"-副本",E.createTime=new Date().getTime()+"",E.updateTime=new Date().getTime()+"",y.push(E),await j.setItem("light-chaser-project-list",y);const w=await j.getItem(v);return w&&await j.setItem(E.id,w),E.id}}class pr extends ke{async createProject(v){return await(await fetch("/api/project/create",{method:"post",body:JSON.stringify(v),headers:{"Content-Type":"application/json"}})).json()}async copyProject(v){return await(await fetch(`/api/project/copy/${v}`,{method:"get"})).json()}async deleteProject(v){return await(await fetch(`/api/project/del/${v}`,{method:"get"})).json()}async getProjectData(v){return await(await fetch(`/api/project/getProjectData/${v}`,{method:"get"})).json()}async getProjectInfoList(){return await(await fetch("/api/project/list",{method:"get"})).json()}async updateProject(v){return await(await fetch("/api/project/update",{method:"post",body:JSON.stringify(v),headers:{"Content-Type":"application/json"}})).json()}}const gr={[we.LOCAL]:new mr,[we.SERVER]:new pr},xr=gr;export{Sr as D,Ir as E,He as I,fr as L,ur as P,we as S,Rr as U,vr as a,Er as b,xr as o};
