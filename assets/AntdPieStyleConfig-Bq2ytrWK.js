import{r as $,j as l}from"./index-DF8CslTw.js";import{aU as ne,aM as ee,aW as ae,b4 as oe}from"./ViewDesignerLoader-DbcV-Vl2.js";import"./mobxreact.esm-BsmDqX7Y.js";import"./MainRouter-7T0Xhwoi.js";import"./ContextIsolator-B5tzl4j5.js";import"./asyncToGenerator-Bz8-zIuE.js";import"./Compact-b6VVnuNf.js";import"./pickAttrs-CpeCievI.js";import"./useZIndex-D4Xbk62X.js";import"./button-DAMZkvNG.js";import"./render-CAu_nbjN.js";import"./NumberInput-Daws4vqT.js";import"./zoom-DQjgxqMp.js";import"./index-rkab9nn3.js";import"./index-D7m8Erxe.js";import"./GlobalMessage-CdlqTxpH.js";import"./FetchUtil-CVmkh-II.js";import"./index-SIbFl28w.js";import"./index-Cx9NaC3k.js";import"./Data-CocKkqs0.js";import"./collapse-BbEVqHco.js";class Ce extends $.Component{render(){const t=this.props.controller;return l.jsxs(l.Fragment,{children:[l.jsx(se,{controller:t}),l.jsx(ne,{controller:t})]})}}const se=i=>{var p,y,u,d,f,m,b,h,g,k,v,x,S,w,A,F,I,R,j,C,P,z,W,M,U,T,X,Y,G,L,E,O,K,q,B,D,H,J,N,Q,V,Z;const{controller:t}=i,e=t.getConfig().style,[s,c]=$.useState(0),o=_=>{const{id:a,dataKeyPath:te,dataFragment:le,reRender:ie}=_;let{data:n}=_;a==="startAngle"||a==="endAngle"?(n=n/180*Math.PI,t.update(oe.createObjectFromArray(te,n))):a==="titleSwitch"?n?t.update({style:{statistic:{title:{style:{fontSize:"12px",color:"#fff"},content:"标题"}}}}):t.update({style:{statistic:{title:!1}}}):a==="contentSwitch"?n?t.update({style:{statistic:{content:{style:{fontSize:"12px",color:"#fff"},content:"内容"}}}}):t.update({style:{statistic:{content:!1}}}):a==="labelRotate"?t.update({style:{label:{rotate:n*Math.PI}}}):t.update(le),ie&&c(s+1)},r={key:"style",children:[{type:"accordion",label:"图形",children:[{type:"grid",children:[{key:"radius",type:"number-input",label:"外径",value:e.radius,config:{min:0,max:1,step:.01}},{id:"startAngle",key:"startAngle",type:"number-input",label:"起始角",value:(e.startAngle||0)/Math.PI*180},{key:"innerRadius",type:"number-input",label:"内径",value:e.innerRadius,config:{min:0,max:1,step:.01}},{id:"endAngle",key:"endAngle",type:"number-input",label:"结束角",value:(e.endAngle||2*Math.PI)/Math.PI*180},{key:"pieStyle",children:[{key:"stroke",type:"color-picker",label:"描边色",value:"#1c1c1c",config:{showText:!0}},{key:"lineWidth",type:"number-input",label:"描边宽",value:0,config:{min:0,max:30}}]},{key:"color",type:"color-mode",label:"颜色",value:"#1c1c1c"}]}]},{key:"statistic",type:"accordion",label:"标题",children:[{key:"title",type:"grid",children:[{id:"titleSwitch",key:"titleSwitch",type:"switch",label:"开启",value:!!((p=e.statistic)!=null&&p.title)},{rules:"{titleSwitch} === 'true'",children:[{key:"content",type:"input",label:"内容",value:(u=(y=e.statistic)==null?void 0:y.title)==null?void 0:u.content},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:parseInt(((m=(f=(d=e.statistic)==null?void 0:d.title)==null?void 0:f.style)==null?void 0:m.fontSize)+""),config:{min:0,max:100}},{key:"fontWeight",type:"number-input",label:"加粗",value:((g=(h=(b=e.statistic)==null?void 0:b.title)==null?void 0:h.style)==null?void 0:g.fontWeight)||500,config:{min:100,max:900,step:100}},{key:"color",type:"color-picker",label:"颜色",value:(x=(v=(k=e.statistic)==null?void 0:k.title)==null?void 0:v.style)==null?void 0:x.color,config:{showText:!0}}]},{key:"offsetX",type:"number-input",label:"x偏移",value:((w=(S=e.statistic)==null?void 0:S.title)==null?void 0:w.offsetX)||0},{key:"offsetY",type:"number-input",label:"y偏移",value:((F=(A=e.statistic)==null?void 0:A.title)==null?void 0:F.offsetY)||0}]}]}]},{key:"statistic",type:"accordion",label:"内容",children:[{key:"content",type:"grid",children:[{id:"contentSwitch",key:"contentSwitch",type:"switch",label:"开启",value:!!((I=e.statistic)!=null&&I.content)},{rules:"{contentSwitch} === 'true'",children:[{key:"content",type:"input",label:"内容",value:(j=(R=e.statistic)==null?void 0:R.content)==null?void 0:j.content},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:parseInt(((z=(P=(C=e.statistic)==null?void 0:C.content)==null?void 0:P.style)==null?void 0:z.fontSize)+""),config:{min:0,max:100}},{key:"fontWeight",type:"number-input",label:"加粗",value:((U=(M=(W=e.statistic)==null?void 0:W.content)==null?void 0:M.style)==null?void 0:U.fontWeight)||500,config:{min:100,max:900,step:100}},{key:"color",type:"color-picker",label:"颜色",value:(Y=(X=(T=e.statistic)==null?void 0:T.content)==null?void 0:X.style)==null?void 0:Y.color,config:{showText:!0}}]},{key:"offsetX",type:"number-input",label:"x偏移",value:((L=(G=e.statistic)==null?void 0:G.content)==null?void 0:L.offsetX)||0},{key:"offsetY",type:"number-input",label:"y偏移",value:((O=(E=e.statistic)==null?void 0:E.content)==null?void 0:O.offsetY)||0}]}]}]},{type:"accordion",label:"标签",children:[{key:"label",type:"grid",children:[{key:"type",type:"select",label:"位置",value:((K=e.label)==null?void 0:K.type)||"inner",config:{options:[{value:"inner",label:"内测"},{value:"outer",label:"外侧"}]}},{key:"offset",type:"number-input",label:"偏移",value:((q=e.label)==null?void 0:q.offset)||0,config:{min:0,max:100}},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:parseInt(((D=(B=e.label)==null?void 0:B.style)==null?void 0:D.fontSize)+""),config:{min:0,max:100}},{key:"fontWeight",type:"number-input",label:"加粗",value:((J=(H=e.label)==null?void 0:H.style)==null?void 0:J.fontWeight)||500,config:{min:100,max:900,step:100}},{key:"fill",type:"color-picker",label:"颜色",value:(Q=(N=e.label)==null?void 0:N.style)==null?void 0:Q.fill,config:{showText:!0}}]},{key:"autoRotate",type:"switch",label:"自动旋转",reRender:!0,value:(V=e.label)==null?void 0:V.autoRotate},{id:"labelRotate",key:"rotate",type:"number-input",label:"旋转角度",rules:"{autoRotate} === 'false'",value:((Z=e.label)==null?void 0:Z.rotate)||0,config:{min:0,max:2,step:.01}}]}]}]};return l.jsx(ee,{schema:r,onFieldChange:o})},Pe=({controller:i})=>{var o;const t=(o=i.config)==null?void 0:o.style,e=ae.getDataFieldOptions(i),s={type:"grid",key:"style",children:[{type:"select",key:"angleField",label:"角度字段",value:t==null?void 0:t.angleField,config:{options:e}},{type:"select",key:"colorField",label:"颜色字段",value:t==null?void 0:t.colorField,config:{options:e}}]},c=r=>{i.update(r.dataFragment)};return l.jsx("div",{style:{padding:10},children:l.jsx(ee,{schema:s,onFieldChange:c})})};export{Pe as AntdPieFieldMapping,se as AntdPieGraphicsConfig,Ce as default};
