import{A as m,B as p}from"./FontGlobal-OJzIEJBO.js";import{r as i,j as s}from"./index-CIZzpp4t.js";import{C as u}from"./LayerManager-9_OZ_v7l.js";import{O as f}from"./FetchUtil-FMEOVjjY.js";import"./mobxreact.esm-QmaNsbsC.js";import"./PreviewOpen-ZH2J-uf_.js";import"./index-PQsxm07c.js";import"./index-Ky8VuNT2.js";import"./GlobalMessage-b_IUatJJ.js";import"./MainRouter-LJqlNU58.js";import"./useZIndex-C48Dwtsu.js";const g=i.forwardRef((o,t)=>{var a,c,d,l;const[e,r]=i.useState({...o}),h=i.useRef({});return i.useImperativeHandle(t,()=>({updateConfig:n=>r({...n}),setEventHandler:n=>h.current=n})),s.jsx("div",{style:{width:"100%",height:"100%"},children:(a=e==null?void 0:e.style)!=null&&a.src?s.jsxs("video",{width:"100%",height:"100%",controls:!0,autoPlay:!0,children:[s.jsx("source",{src:(c=e==null?void 0:e.style)==null?void 0:c.src,type:"video/mp4"}),s.jsx("source",{src:(d=e==null?void 0:e.style)==null?void 0:d.src,type:"video/webm"}),s.jsx("source",{src:(l=e==null?void 0:e.style)==null?void 0:l.src,type:"video/ogg"}),"您的浏览器不支持 video 标签。"]}):s.jsx("div",{style:{color:"#9a9a9a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsx("div",{children:"请配置视频连接..."})})})}),v=g;class I extends m{async create(t,e){this.config=e,this.container=t,this.instance=await u.createAndRender(t,v,e)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(t,e){var r;this.config=f.merge(this.config,t),e=e||{reRender:!0},e.reRender&&((r=this.instance)==null||r.updateConfig(this.config))}updateTheme(t){}registerEvent(){var t,e;if(this.instance){const r=(e=(t=this.config)==null?void 0:t.base)==null?void 0:e.id;this.instance.setEventHandler({click:()=>p.triggerComponentEvent(r,"click",this.config)})}}}export{I as default};
