var N=Object.defineProperty;var D=(i,n,r)=>n in i?N(i,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[n]=r;var x=(i,n,r)=>(D(i,typeof n!="symbol"?n+"":n,r),r);import{r as u,j as s}from"./index-CIZzpp4t.js";import m from"./ColorPicker-03QYOEOg.js";import{C as k}from"./Dialog-ghulqU4P.js";import{o as y}from"./mobxreact.esm-QmaNsbsC.js";import{t as f}from"./LayerManager-9_OZ_v7l.js";import{l as I}from"./FetchUtil-FMEOVjjY.js";import{CardPanel as b}from"./CardPanel-wZh9GTN_.js";import O from"./Input-y8ttkQ4v.js";import{U as d}from"./UIContainer-NEWVGUQ0.js";import{Grid as E}from"./Grid-Ng_M152z.js";import F from"./Button-DQqSxazJ.js";class L extends u.Component{constructor(){super(...arguments);x(this,"onSelected",()=>{const{onSelected:r,id:e="",name:t="",colors:c}=this.props;r&&r({id:e,name:t,colors:c})})}render(){const{colors:r,selected:e=!1,itemStyle:t,name:c,id:l,showOperator:h=!1,onDel:j}=this.props;return s.jsxs("div",{id:l,className:`lc-theme-item ${e?"lc-theme-item-active":""}`,style:t,onClick:this.onSelected,children:[s.jsxs("div",{className:"lc-theme-item-header",children:[s.jsx("div",{className:"lc-theme-item-title",children:c}),h&&s.jsx("div",{className:"lc-theme-item-operators",children:s.jsx("div",{className:"operator-item",onClick:p=>{p.stopPropagation(),j&&j(l||"")},children:s.jsx(k,{})})})]}),s.jsx("div",{className:"lc-theme-item-body",children:Object.keys(this.props.colors).map((p,g)=>s.jsx(m,{disabled:!0,value:r[p]},g))})]})}}class P extends u.Component{constructor(){super(...arguments);x(this,"state",{activeId:""});x(this,"onDel",r=>{const{onDel:e}=this.props,{themeConfig:t,updateThemeConfig:c}=f,l=t.filter(h=>h.id!==r);c(l),e&&e(r)});x(this,"onSelected",r=>{this.setState({activeId:r.id});const{onSelected:e}=this.props;e&&e(r)})}render(){const{activeId:r}=this.state,{showOperator:e}=this.props,{themeConfig:t}=f,c=[];for(let l=0;l<t.length;l++)c.push(s.jsx(L,{id:t[l].id,selected:t[l].id===r,name:t[l].name,showOperator:e,onDel:this.onDel,onSelected:this.onSelected,colors:t[l].colors},l));return s.jsx("div",{className:"lc-theme-list",style:{width:"100%"},children:c})}}const R=y(P),V=()=>{const i=u.useRef({id:"",name:"",colors:{main:"#000000",mainText:"#000000",background:"#000000",subText:"#000000",supplementFirst:"#000000",supplementSecond:"#000000"}}),[n,r]=u.useState(I.cloneDeep(f.themeConfig)||[]),[e,t]=u.useState(i.current),c=o=>{t({...e,name:o})},l=o=>{t({...e,colors:{...e.colors,main:o}})},h=o=>{t({...e,colors:{...e.colors,mainText:o}})},j=o=>{t({...e,colors:{...e.colors,subText:o}})},p=o=>{t({...e,colors:{...e.colors,background:o}})},g=o=>{t({...e,colors:{...e.colors,supplementFirst:o}})},v=o=>{t({...e,colors:{...e.colors,supplementSecond:o}})},T=o=>{if(o==null||o.preventDefault(),e.id===""){n.length>20&&alert("主题数量已达上限");for(let a=0;a<n.length;a++)if(n[a].name===e.name){alert("主题名称重复");return}e.id=n.length+1+"",n.push({...e})}else{for(let a=0;a<n.length;a++)if(n[a].id===e.id){n[a]={...e};break}e.id=""}r(n),t(i.current);const{updateThemeConfig:C}=f;C(n)},S=o=>{const C=n.filter(a=>a.id!==o);r(C)},w=o=>{e.id===o.id?t(i.current):t(o)};return s.jsxs("div",{className:"lc-theme-editor",children:[s.jsx("div",{className:"editor-left",children:s.jsxs("form",{onSubmit:T,children:[s.jsx(b,{label:"主题信息",children:s.jsx(d,{label:"名称",children:s.jsx(O,{value:e.name,onChange:c})})}),s.jsx(b,{label:"颜色定义",children:s.jsxs(E,{columns:3,gridGap:"15px",children:[s.jsx(d,{label:"主体色",children:s.jsx(m,{onChange:l,showText:!0,value:e.colors.main})}),s.jsx(d,{label:"主文字",children:s.jsx(m,{onChange:h,showText:!0,value:e.colors.mainText})}),s.jsx(d,{label:"辅文字",children:s.jsx(m,{onChange:j,showText:!0,value:e.colors.subText})}),s.jsx(d,{label:"背景色",children:s.jsx(m,{onChange:p,showText:!0,value:e.colors.background})}),s.jsx(d,{label:"补充一",children:s.jsx(m,{onChange:g,showText:!0,value:e.colors.supplementFirst})}),s.jsx(d,{label:"补充二",children:s.jsx(m,{onChange:v,showText:!0,value:e.colors.supplementSecond})})]})}),s.jsx("p",{style:{color:"#6e6e6e"},children:"说明：自定义主题色的色值应该保持在同一色系。以确保整体统一的风格。主题色占据主要面积"}),s.jsx("br",{}),s.jsx("div",{className:"theme-operate-btn",children:s.jsx(F,{type:"submit",children:"添加 / 更新"})})]})}),s.jsx("div",{className:"editor-right",children:s.jsx(b,{label:"主题列表",children:s.jsx(R,{showOperator:!0,onSelected:w,onDel:S})})})]})};export{R as T,V as a};
