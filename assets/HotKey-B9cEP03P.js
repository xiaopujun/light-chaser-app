import{r as s}from"./index-DDhbyKiN.js";import{e as h}from"./ViewDesignerLoader-Bu4dtGiB.js";import{H as m}from"./DesignerPage-DP66XBu_.js";import"./mobxreact.esm-DJjal1U0.js";import"./MainRouter-COL-bEo6.js";import"./zoom-Bkip1pIz.js";import"./asyncToGenerator-DNJv1fTK.js";import"./Compact-BVh8e472.js";import"./useZIndex-DI91smsM.js";import"./pickAttrs-B5npe5C-.js";import"./button-BeEC9RRM.js";import"./render-BaIMFhTQ.js";import"./NumberInput-Dpg_dozs.js";import"./index-CeEkpsBz.js";import"./GlobalMessage-BJKItiwK.js";import"./FetchUtil-d5xnEsfz.js";import"./Overflow-6-fyyk5r.js";import"./index--ZD9EaDu.js";import"./index-0DM1odrY.js";import"./Input-p3YCiyAO.js";import"./Data-DzeXskEd.js";import"./collapse-BbEVqHco.js";import"./Button-CXDtVa-d.js";import"./FontGlobal-CRhENMok.js";import"./System-B6VPUeBR.js";import"./ThemeEditor-_xG4VGrt.js";import"./Info-D4ZPCjif.js";const v=["alt","tab","control + s","control + l","control + shift + l","control + h","control + f","control + k","control + 1","control + 2","control + 3","control + 4","control + 5","control + g","control + d","control + shift + g"];function Q(a){const f=s.useRef(a.handlerMapping??{}),e=s.useRef([]),p=s.useRef({}),d=o=>{const r=p.current[o];if(r)return r;{const t=document.querySelector(o);return t?(p.current[o]=t,t):null}},y=(o,r)=>{const{handler:t,triggerType:i=m.SINGLE,range:n}=f.current[r]||{};if(t&&(i===m.SINGLE||i===m.COILED)){const{pointerTarget:g}=h;if(n){const c=d(n);if(!c||!c.contains(g))return}Array.isArray(t)?t.forEach(c=>c(o)):t(o)}},u=o=>{var i;const r=(i=o.key)==null?void 0:i.toLowerCase();if(!r)return;e.current.some(n=>n===r)||e.current.push(r);const t=e.current.join(" + ");v.some(n=>n===t)&&o.preventDefault(),y(o,t)},l=o=>{const r=o.key.toLowerCase();e.current.some(t=>t===r)&&(e.current=e.current.filter(t=>t!==r))};return s.useEffect(()=>(document.addEventListener("keydown",u),document.addEventListener("keyup",l),document.onvisibilitychange=()=>{document.visibilityState==="visible"&&(e.current=[])},window.onfocus=()=>e.current=[],()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",l),document.onvisibilitychange=null,window.onfocus=null}),[]),null}export{Q as default};
