import{r as j,j as r}from"./index-Duc4ZoM_.js";import{U as v}from"./UIContainer-fqZbFePv.js";import{o as P}from"./index--SWnmJ5Q.js";import{U as w}from"./LocalOperator-t4oOcFvM.js";import{globalMessage as c}from"./GlobalMessage-I0KrOayq.js";import{A,P as I}from"./Plus-WQxU0q_G.js";import"./index-KGsAQAl1.js";import"./MainRouter-l7Z1Z1jr.js";import"./zoom-1qZDylxx.js";import"./Compact-BtIEhQqw.js";import"./AntdIcon-jwWmiLqW.js";import"./useZIndex-c7eQO3Zz.js";import"./index-AfMii643.js";import"./Help-Q6DYu7mz.js";import"./FetchUtil-5ZwtxN_0.js";import"./render-8hUH_M6B.js";import"./InfoCircleFilled-JfnNzh3b.js";import"./pickAttrs-UI4Ho79H.js";import"./collapse-aS6vX33V.js";import"./fade-CRG4MrDV.js";import"./useForceUpdate-rXHM3SwU.js";import"./button-cD7Pe9UH.js";import"./omit-zfc2TTl_.js";import"./EyeOutlined-R3RbAP4C.js";const W=d=>{const{onChange:o,defaultValue:i,accept:f,size:e,...g}=d,s={uid:"-1",name:"image.png",status:"done"},[t,a]=j.useState(i?[{...s,url:i}]:[]),h=p=>{var m;if(e&&p.size>e*1024*1024)return(m=c.messageApi)==null||m.warning(`文件大小不能超过${e}M`),!1;const{saveType:U}=w.parseUrlParams();return P[U].uploadImage(p).then(n=>{var l;if(!n)(l=c.messageApi)==null||l.error("上传失败");else{const{url:u,hash:x}=n;o&&o({url:u,hash:x}),a([{...s,url:u}])}}),!1};return r.jsx(v,{...g,className:"image-upload",children:r.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:t,accept:f,onRemove:()=>{a([]),o&&o({url:"",hash:""})},onPreview:()=>window.open(t[0].url),children:t.length>0?null:r.jsxs("div",{className:"upload-btn",children:[r.jsx(I,{}),r.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{W as ImageUpload};
