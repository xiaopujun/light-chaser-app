var T=Object.defineProperty;var C=(e,r,t)=>r in e?T(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var y=(e,r,t)=>C(e,typeof r!="symbol"?r+"":r,t);import{b as j,r as x,j as o}from"./index-Bt6dc0fX.js";import{aX as w,aK as k,aM as S,B as L,aY as N}from"./ViewDesignerLoader-D0E38GyN.js";import{I as D}from"./index-CVzf4nt6.js";import{o as R}from"./mobxreact.esm-CVpOJIJ4.js";import{c as g,O}from"./NumberInput-Drv0mbnr.js";import{globalMessage as v}from"./GlobalMessage-tDfkwclv.js";const E=D("close",!1,function(e){return j.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},j.createElement("path",{d:"M8 8L40 40",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),j.createElement("path",{d:"M8 40L40 8",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))});class I extends x.Component{constructor(){super(...arguments);y(this,"onSelected",()=>{const{onSelected:t,id:i="",name:a="",colors:d}=this.props;t&&t({id:i,name:a,colors:d})})}render(){const{colors:t,selected:i=!1,itemStyle:a,name:d,id:h,showOperator:p=!1,onDel:l}=this.props;return o.jsxs("div",{id:h,className:`lc-theme-item ${i?"lc-theme-item-active":""}`,style:a,onClick:this.onSelected,children:[o.jsxs("div",{className:"lc-theme-item-header",children:[o.jsx("div",{className:"lc-theme-item-title",children:d}),p&&o.jsx("div",{className:"lc-theme-item-operators",children:o.jsx("div",{className:"operator-item",onClick:n=>{n.stopPropagation(),l&&l(h||"")},children:o.jsx(E,{})})})]}),o.jsx("div",{className:"lc-theme-item-body",children:Object.keys(this.props.colors).map((n,s)=>o.jsx(w,{disabled:!0,value:t[n]},s))})]})}}const F=R(e=>{const{onSelected:r,showOperator:t,onDel:i}=e,[a,d]=x.useState(""),h=s=>{const{themeConfig:m,updateThemeConfig:u}=k,f=m.filter(c=>c.id!==s);u(f),i&&i(s)},p=s=>{r&&r(s),s.id!==a?d(s.id):d("")},{themeConfig:l}=k,n=[];for(let s=0;s<l.length;s++)n.push(o.jsx(I,{id:l[s].id,selected:l[s].id===a,name:l[s].name,showOperator:t,onDel:h,onSelected:p,colors:l[s].colors},s));return o.jsx("div",{className:"lc-theme-list",style:{width:"100%"},children:n})}),b={id:"",name:"",colors:{main:"#000000",mainText:"#000000",background:"#000000",subText:"#000000",supplementFirst:"#000000",supplementSecond:"#000000"}},G=()=>{const[e,r]=x.useState(g(k.themeConfig)||[]),[t,i]=x.useState(g(b)),a=n=>{var m,u,f;if(n==null||n.preventDefault(),t.name===""){(m=v.messageApi)==null||m.warning("请输入主题名称");return}if(t.id===""){e.length>20&&((u=v.messageApi)==null||u.warning("主题数量不能超过20"));for(let c=0;c<e.length;c++)if(e[c].name===t.name){(f=v.messageApi)==null||f.warning("主题名称不能重复");return}t.id=e.length+1+"",e.push({...t})}else{for(let c=0;c<e.length;c++)if(e[c].id===t.id){e[c]={...t};break}t.id=""}r(e),i(g(b));const{updateThemeConfig:s}=k;s(e)},d=n=>{const s=e.filter(m=>m.id!==n);r(s)},h=n=>{t.id===n.id?i(g(b)):i(n)},p=n=>{const{dataFragment:s}=n,m={...O.merge(t,s)};i(m)},l=[{type:"card-panel",label:"主题信息",children:[{type:"grid",children:[{key:"name",type:"input",label:"主题名称",value:t.name,reRender:!0}]}]},{type:"card-panel",label:"颜色定义",key:"colors",children:[{type:"grid",config:{columns:2,gridGap:"20px"},children:[{key:"main",type:"color-picker",label:"主体色",value:t.colors.main,config:{showText:!0},reRender:!0},{key:"mainText",type:"color-picker",label:"主文字",value:t.colors.mainText,config:{showText:!0},reRender:!0},{key:"subText",type:"color-picker",label:"副文字",value:t.colors.subText,config:{showText:!0},reRender:!0},{key:"background",type:"color-picker",label:"背景色",value:t.colors.background,config:{showText:!0},reRender:!0},{key:"supplementFirst",type:"color-picker",label:"辅助色1",value:t.colors.supplementFirst,config:{showText:!0},reRender:!0},{key:"supplementSecond",type:"color-picker",label:"辅助色2",value:t.colors.supplementSecond,config:{showText:!0},reRender:!0}]}]}];return o.jsxs("div",{className:"lc-theme-editor",children:[o.jsxs("div",{className:"editor-left",children:[o.jsx(S,{schema:l,onFieldChange:p}),o.jsx("p",{style:{color:"#6e6e6e",fontSize:12},children:"说明：自定义主题色的色值应该保持在同一色系。以确保整体统一的风格。主题色占据主要面积"}),o.jsx("div",{className:"theme-operate-btn",children:o.jsx(L,{onClick:a,children:"添加 / 更新"})})]}),o.jsx("div",{className:"editor-right",children:o.jsx(N,{label:"主题列表",children:o.jsx(F,{showOperator:!0,onSelected:h,onDel:d})})})]})};export{E as C,F as T,G as a};
