import{A as f,B as g}from"./FontGlobal-OJzIEJBO.js";import{C as h}from"./LayerManager-9_OZ_v7l.js";import{R as p,r as a,j as $}from"./index-CIZzpp4t.js";import{O as S}from"./FetchUtil-FMEOVjjY.js";var y=(r=>(r.DASH="0",r.SLASH="1",r.CN="2",r))(y||{});function d(r){const t=new Date,e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0"),l=t.getSeconds().toString().padStart(2,"0");switch(r){case"1":return`${e}/${n}/${s} ${i}:${c}:${l}`;case"2":return`${e}年${n}月${s}日 ${i}时${c}分${l}秒`;default:return`${e}-${n}-${s} ${i}:${c}:${l}`}}const C=p.forwardRef((r,t)=>{const[e,n]=a.useState({...r}),{formatType:s="2",...i}=e==null?void 0:e.style,[c,l]=a.useState(d(s)),u=a.useRef(null),m=a.useRef({});return a.useEffect(()=>{u.current=setInterval(()=>{l(()=>{var o;return d((o=e.style)==null?void 0:o.formatType)})},1e3)},[]),a.useImperativeHandle(t,()=>({updateConfig:o=>n({...o}),setEventHandler:o=>m.current=o,destroy:()=>{u.current&&clearInterval(u.current),u.current=null}})),$.jsx("div",{className:"date-time-component",style:{...i},children:c})});class v extends f{async create(t,e){this.config=e,this.container=t,this.instance=await h.createAndRender(t,C,e)}destroy(){var t;(t=this.instance)==null||t.destroy(),this.instance=null,this.config=null}getConfig(){return this.config}update(t,e){var n;this.config=S.merge(this.config,t),e=e||{reRender:!0},e.reRender&&((n=this.instance)==null||n.updateConfig(this.config))}updateTheme(t){}registerEvent(){var e,n,s;const t=(n=(e=this.config)==null?void 0:e.base)==null?void 0:n.id;(s=this.instance)==null||s.setEventHandler({click:()=>g.triggerComponentEvent(t,"click",this.config)})}}const x=Object.freeze(Object.defineProperty({__proto__:null,DateTimeController:v},Symbol.toStringTag,{value:"Module"}));export{v as D,y as F,x as a};
