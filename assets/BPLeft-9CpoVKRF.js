import{b as t,j as i,r as j}from"./index-Duc4ZoM_.js";import{aG as l,l as y,aB as x}from"./ViewDesignerLoader-8rMP9FZs.js";import{o as L}from"./mobxreact.esm-AXuQb6fD.js";import{I as u}from"./LocalOperator-t4oOcFvM.js";import{D as f}from"./DragAddProvider-_IIQLnDx.js";import g from"./Input-Fu5_43az.js";import{I as k}from"./index-AfMii643.js";import{F as b}from"./DesignerPage-hOKeX8hE.js";import"./FetchUtil-5ZwtxN_0.js";import"./Data-_fslVRGK.js";import"./index--SWnmJ5Q.js";import"./GlobalMessage-I0KrOayq.js";import"./MainRouter-l7Z1Z1jr.js";import"./render-8hUH_M6B.js";import"./AntdIcon-jwWmiLqW.js";import"./InfoCircleFilled-JfnNzh3b.js";import"./useZIndex-c7eQO3Zz.js";import"./UIContainer-fqZbFePv.js";import"./index-KGsAQAl1.js";import"./zoom-1qZDylxx.js";import"./Compact-BtIEhQqw.js";import"./Help-Q6DYu7mz.js";import"./FontGlobal-IF-0qGeT.js";import"./PreviewOpen-xNkBcbY-.js";import"./System-wlPeHLhg.js";import"./Dialog-vSMHMWDI.js";import"./Grid-qWvRWUZo.js";import"./MonacoEditor-AmRPsGTx.js";import"./Button-Tm3IfQtm.js";import"./Plus-WQxU0q_G.js";import"./pickAttrs-UI4Ho79H.js";import"./collapse-aS6vX33V.js";import"./fade-CRG4MrDV.js";import"./useForceUpdate-rXHM3SwU.js";import"./button-cD7Pe9UH.js";import"./omit-zfc2TTl_.js";import"./EyeOutlined-R3RbAP4C.js";import"./index-foMHq-FM.js";import"./ActionButton-AsinbvHa.js";import"./Info-kImE1q_J.js";import"./NumberInput-WrPaUvHm.js";import"./Select-wGR39UQA.js";import"./Radio-kbTZ0tv0.js";import"./ThemeEditor-2NmMzzG7.js";import"./ColorPicker-pyjWXEAx.js";import"./PurePanel-ruJ4o-iR.js";import"./index-tOmn1sxg.js";import"./Overflow-2V5ntg0K.js";import"./CardPanel-GnLi4EHp.js";const E=k("add-subset",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M10 28V35H18",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M18 28H42V42H18V35V28Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"6",y1:"13.5",x2:"6",y2:"12.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"19",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"6",y1:"7",x2:"6",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"13.5",x2:"32",y2:"12.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"20",x2:"32",y2:"19",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"7",x2:"32",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"20",x2:"31",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"7",y1:"20",x2:"6",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"7",y1:"6",x2:"6",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"13",y1:"6",x2:"12",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"19.5",y1:"6",x2:"18.5",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"19.5",y1:"20",x2:"18.5",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"26",y1:"6",x2:"25",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"13",y1:"20",x2:"12",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"26",y1:"20",x2:"25",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"6",x2:"31",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),v=k("application-one",!1,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M41 13.9997L24 4L7 13.9997V33.9998L24 44L41 33.9998V13.9997Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M16 18.9976L23.9932 24.0002L31.9951 18.9976",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M24 24V33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),M=k("bytedance-mini-app",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26.1215 21.8789L21.8789 26.1215",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M32.4851 26.8285L33.8993 25.4143C35.4614 23.8522 35.4614 21.3195 33.8993 19.7574L28.2425 14.1005C26.6804 12.5384 24.1477 12.5384 22.5856 14.1005L21.1714 15.5148",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26.8282 32.4853L25.414 33.8995C23.8519 35.4616 21.3193 35.4616 19.7572 33.8995L14.1003 28.2427C12.5382 26.6806 12.5382 24.1479 14.1003 22.5858L15.5145 21.1716",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),N=k("calculator",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M40 4H8.0002C6.89565 4 6.00022 4.89541 6.0002 5.99996L5.99955 42C5.99953 43.1045 6.89497 44 7.99955 44H40C41.1046 44 42 43.1046 42 42V6C42 4.89543 41.1046 4 40 4Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M35 10H13V19H35V10Z",fill:e.colors[3],stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M12 28L19 35",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M19 28L12 35",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M28 35H36",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M28 29H36",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),C=k("card-two",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M28 12V4L8 14V42L20 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M20 16L40 6V34L20 44V16Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),B=k("mindmap-map",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M26 24L42 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26 38H42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26 10H42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M18 24L6 24C6 24 7.65685 24 10 24M18 38C12 36 16 24 10 24M18 10C12 12 16 24 10 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),Ae=()=>i.jsxs("div",{className:"bp-left",children:[i.jsx(V,{}),i.jsx(H,{})]}),V=L(()=>{const{activeMenu:e}=l,n=[{icon:i.jsx(v,{}),label:"图层节点",key:"layer"},{icon:i.jsx(B,{}),label:"逻辑节点",key:"logical"},{icon:i.jsx(N,{}),label:"全局变量",key:"global"},{icon:i.jsx(b,{}),label:"过滤器",key:"filter"}];return i.jsx("div",{className:"bp-node-sort-list",children:n.map((o,r)=>i.jsxs("div",{className:`bp-left-item ${e===o.key?"bp-left-item-active":""}`,onClick:()=>{l.setActiveMenu(o.key)},children:[i.jsx("div",{className:"bp-item-icon",children:o.icon}),i.jsx("div",{className:"bp-item-label",children:o.label})]},r))})}),w=e=>{var n,o;if(e.target.classList.contains("bp-drag-node")){const r=e.target;(n=e.dataTransfer)==null||n.setData("nodeId",r.getAttribute("data-id")),(o=e.dataTransfer)==null||o.setData("type",r.getAttribute("data-type"))}},z=e=>{e.preventDefault()},I=e=>{var m,h;e.preventDefault();let n=(m=e.dataTransfer)==null?void 0:m.getData("nodeId");const o=(h=e.dataTransfer)==null?void 0:h.getData("type"),{bpDragContentRef:r,canvasScale:s}=x,a=r==null?void 0:r.getBoundingClientRect(),c={x:(e.clientX-((a==null?void 0:a.x)||0))/s,y:(e.clientY-((a==null?void 0:a.y)||0))/s};if(o==="layer-node"){const{setUsedLayerNodes:W}=l;W(n,!0)}else n=u.generateId();const{addBPNodeLayout:d}=x;d({id:n,type:o,position:c})},H=L(()=>{const{activeMenu:e,setSearchValue:n}=l,o=Z[e],r=j.useRef(null);return j.useEffect(()=>(r.current=new f(document.getElementById("bp-node-draggable"),document.getElementById("bp-ds-container"),w,z,I),()=>{var s;return(s=r.current)==null?void 0:s.destroy()}),[e]),i.jsxs("div",{className:"bp-node-list",children:[i.jsx("div",{className:"bp-node-list-header",children:i.jsx("div",{className:"bp-node-list-search",children:i.jsx(g,{placeholder:"搜索节点",containerStyle:{width:"100%"},onChange:s=>n(s)})})}),i.jsx("div",{className:"bp-node-list-body",children:i.jsx("div",{className:"bp-node-list-container",id:"bp-node-draggable",style:{overflow:"scroll"},children:o&&i.jsx(o,{})})})]})}),A=L(()=>{const{layerConfigs:e}=y,{usedLayerNodes:n,searchValue:o}=l;let r=e?Object.keys(e):[];return o!==""&&(r=r.filter(s=>{var c;return((c=e[s].name)==null?void 0:c.indexOf(l.searchValue))!==-1})),i.jsx(i.Fragment,{children:r.map((s,a)=>{const c=e[s],d=n[s];return i.jsxs("div",{className:`bp-node-list-item bp-drag-node ${d?"bp-node-list-item-used":""}`,"data-id":c.id,"data-type":"layer-node",draggable:!d,children:[i.jsx("div",{className:"bpn-li-icon",children:i.jsx(C,{})}),i.jsx("div",{className:"bpn-li-label",children:c.name})]},a)})})}),P=L(()=>{const e=[{name:"条件判断",icon:E,type:"condition-node"},{name:"逻辑处理",icon:M,type:"logical-process-node"}].filter(n=>n.name.indexOf(l.searchValue)!==-1);return i.jsx(i.Fragment,{children:e.map((n,o)=>i.jsxs("div",{className:"bp-node-list-item bp-drag-node","data-type":n.type,draggable:!0,children:[i.jsx("div",{className:"bpn-li-icon",children:i.jsx(n.icon,{})}),i.jsx("div",{className:"bpn-li-label",children:n.name})]},o))})}),S=()=>i.jsx("div",{children:"开发中..."}),D=()=>i.jsx("div",{children:"开发中..."}),Z={layer:A,logical:P,global:S,filter:D};export{D as BPFilterNodeList,S as BPGlobalVariablesNodeList,A as BPLayerNodeList,P as BPLogicalNodeList,H as BPNodeList,V as BPNodeSortList,Ae as default,Z as nodeListMapping};
