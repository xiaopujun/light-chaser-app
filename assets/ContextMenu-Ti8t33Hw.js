import{r as o,j as d}from"./index-4oef3wIY.js";import{V as D,X as B,o as G}from"./Dialog-tRlQLIuG.js";import{c as g}from"./LayerBuilder-a8E85J3y.js";import{d as N,a as U,b as R,c as j,r as I,e as T,l as F,f as X,g as _,h as P,i as W,j as q}from"./DesignerPage-B4g1DFhg.js";import{L as h,aU as J,e as K,l as Q}from"./LayerManager-O-NHhupi.js";import{A as a,_ as n}from"./AntdIcon-ARdFAb9m.js";import{U as Y}from"./ColorPicker-Scvcrhm4.js";import{D as Z}from"./PlusOutlined-U8cw8DE4.js";import"./MainRouter-axq8us8m.js";import"./KeyCode-BWhh4Nhe.js";import"./useZIndex-LzRx996R.js";import"./Overflow-OJAGrMgl.js";import"./GlobalMessage-UTf4T39H.js";import"./EyeFilled-4KLsYfpx.js";import"./Button-9bpKl4Q-.js";import"./UIContainer-tcDsE0Wl.js";import"./Grid-UCr4_kvw.js";import"./MonacoEditor--AqMib26.js";import"./Switch-OSE5hFL5.js";import"./NumberInput-4TNyGGVt.js";import"./Select-Iz7567QR.js";import"./Radio--M2EB03n.js";import"./AlertOutlined-gRnvjEw1.js";import"./FetchUtil-Ivd_z0Im.js";import"./Accordion-KOuhEsi2.js";import"./CardPanel-Y3EXopJj.js";import"./useForceUpdate-65h3fuxG.js";import"./PlusOutlined-VdblB-UP.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"};const te=ee;var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const oe=ne;var y=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:oe}))};y.displayName="CopyOutlined";const ie=o.forwardRef(y);var C=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:Z}))};C.displayName="DeleteOutlined";const ce=o.forwardRef(C);var V=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:D}))};V.displayName="DownOutlined";const re=o.forwardRef(V);var k=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:B}))};k.displayName="EyeInvisibleOutlined";const le=o.forwardRef(k);var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"};const se=ae;var H=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:se}))};H.displayName="GroupOutlined";const ue=o.forwardRef(H);var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const me=de;var z=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:me}))};z.displayName="LockOutlined";const O=o.forwardRef(z);var pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};const ve=pe;var M=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:ve}))};M.displayName="LogoutOutlined";const fe=o.forwardRef(M);var w=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:Y}))};w.displayName="UpOutlined";const ge=o.forwardRef(w);var he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}}]},name:"vertical-align-bottom",theme:"outlined"};const Oe=he;var L=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:Oe}))};L.displayName="VerticalAlignBottomOutlined";const ye=o.forwardRef(L);var x=function(e,t){return o.createElement(a,n(n({},e),{},{ref:t,icon:te}))};x.displayName="VerticalAlignTopOutlined";const Ce=o.forwardRef(x),Ve=[{name:"复制",icon:ie,onClick:T},{name:"上移",icon:ge,onClick:F},{name:"下移",icon:re,onClick:X},{name:"置顶",icon:Ce,onClick:_},{name:"置底",icon:ye,onClick:P},{name:"删除",icon:ce,onClick:W},{name:"隐藏",icon:le,onClick:q}],ke=()=>{const r=()=>{var p;const i=[...Ve],{targetIds:c}=K;if(c.length===0)return i;const{layerConfigs:l}=Q;!!((p=l[c[0]])!=null&&p.lock)?i.push({name:"解锁",icon:O,onClick:N}):i.push({name:"锁定",icon:O,onClick:U}),c.length>1&&!h.hasSameGroup(c)&&i.push({name:"编组",icon:ue,onClick:R});let s=h.findTopGroupLayer(c,!0);return s=s.filter(m=>l[m].type==="group"),s.length>0&&i.push({name:"解组",icon:J,onClick:j}),c.some(m=>!l[m].pid)||i.push({name:"移出分组",icon:fe,onClick:I}),i},e=()=>{const i=[],c=r();for(let l=0;l<c.length;l++){const u=c[l],s=u.icon;i.push(d.jsxs("div",{className:"menu-item",onClick:u.onClick,children:[d.jsx("label",{children:d.jsx(s,{})}),d.jsx("span",{children:u.name})]},l+""))}return i},t=(i,c)=>{const[l,u]=g.position,{innerWidth:s,innerHeight:v}=window;let p=l,m=u;return l+i>s&&(p=s-i),u+c>v&&(m=v-c),[p,m]},b=i=>[130,i*33],{visible:E}=g,S=e(),[$,A]=b(S.length),f=t($,A);return d.jsx(d.Fragment,{children:E&&d.jsx("div",{className:"context-menu",style:{position:"fixed",top:f[1],left:f[0]},children:e()})})},Qe=G(ke);export{Qe as default};
