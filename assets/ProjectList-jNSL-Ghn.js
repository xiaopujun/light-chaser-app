import{r as x,A as M,_ as N,j as e,R as m,m as w}from"./index-n_baRMQq.js";import{D as g,o as f,P as D,b as _,E as B,a as u}from"./index-d0SB--Ec.js";import d from"./Button-heKRj89e.js";import{Grid as V}from"./Grid-xGMZ5ABH.js";import v from"./Input-F0yORoWo.js";import{D as q}from"./DeleteFilled-p6OiCl4m.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM382 896h-.2L232 746.2v-.2h150v150z"}}]},name:"copy",theme:"filled"};const J=G;var k=function(a,l){return x.createElement(M,N(N({},a),{},{ref:l,icon:J}))};k.displayName="CopyFilled";const U=x.forwardRef(k),W=o=>{const a={name:"",des:"",width:500,height:300},l=t=>{t.preventDefault();const{onOk:h}=o;h&&h(a)},i=()=>{const{onCancel:t}=o;t&&t()},{visible:r=!1}=o;return e.jsx(g,{title:"新建大屏",visible:r,className:"add-new-screen-dialog",onClose:i,children:e.jsxs("form",{onSubmit:l,children:[e.jsx("div",{className:"lc-add-new-screen",children:e.jsxs(V,{gridGap:"15px",columns:2,children:[e.jsx(v,{label:"名称",required:!0,maxLength:20,onChange:t=>a.name=t}),e.jsx(v,{label:"描述",maxLength:20,onChange:t=>a.des=t}),e.jsx(v,{label:"宽度",type:"number",min:300,required:!0,onChange:t=>a.width=Number(t)}),e.jsx(v,{label:"高度",type:"number",min:300,required:!0,onChange:t=>a.height=Number(t)})]})}),e.jsxs("div",{className:"add-new-screen-explain",children:[e.jsx("p",{children:"说明："}),e.jsx("p",{children:"1、名称不超过20字，描述不超过60字"}),e.jsx("p",{children:"2、宽度必须≥500，高度必须≥300"})]}),e.jsxs("div",{className:"add-new-screen-footer",children:[e.jsx(d,{type:"submit",children:"创建"}),e.jsx(d,{onClick:i,children:"取消"})]})]})})},ne=o=>{const[a,l]=m.useState(!1),[i,r]=m.useState(!1),[t,h]=m.useState(!1),[y,T]=m.useState([]),C=x.useRef(""),b=x.useRef("");x.useEffect(()=>{j()},[]);const F=()=>l(!a),P=s=>{const{saveType:n}=o,{name:c,des:p,width:L,height:z}=s,A={name:c,des:p,saveType:n,dataJson:JSON.stringify({canvasConfig:{width:L,height:z}})};f[n].createProject(A).then(H=>{l(!1),window.open(`/designer?id=${H}&saveType=${n}&mode=${u.EDIT}`,"_blank"),j()})},S=()=>l(!1),I=s=>{const{saveType:n}=o,{type:c}=s.target.dataset;if(!c)return;const p=s.currentTarget.id;switch(c){case"edit":window.open(`/designer?id=${p}&saveType=${n}&mode=${u.EDIT}`,"_blank");break;case"show":window.open(`/view?id=${p}&saveType=${n}&mode=${u.VIEW}`,"_blank");break;case"del":C.current=p,r(!0);break;case"clone":b.current=p,h(!0);break}},$=()=>r(!1),E=()=>{const{saveType:s}=o;f[s].copyProject(b.current).then(n=>{n&&(h(!1),j(),w.success("克隆成功"))})},O=()=>h(!1),j=()=>{const{saveType:s}=o;f[s].getProjectInfoList().then(n=>T(n))},R=()=>{const{saveType:s}=o;f[s].deleteProject(C.current).then(n=>{n?(r(!1),j()):w.error("删除失败")})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"project-list",children:[e.jsx("div",{style:{width:"100%",height:"100%"},className:"create-new-btn",children:e.jsx(d,{onClick:F,style:{fontSize:20,width:"100%",height:"100%"},children:"+ 新建项目"})}),y&&y.map(s=>{let n,c;return s.state===D.DRAFT?(n="草稿",c="#FFB800"):s.state===D.PUBLISH&&(n="已发布",c="#00CC66"),e.jsxs("div",{onClick:I,id:s.id+"",className:"project-item",children:[e.jsxs("div",{className:"pro-list-content",style:{zIndex:1},children:[e.jsx("div",{className:"pro-content-title",children:s==null?void 0:s.name}),e.jsxs("div",{className:"pro-content-operates",children:[e.jsx("div",{className:"operate-item","data-type":"edit",children:e.jsx(_,{})}),e.jsx("div",{className:"operate-item","data-type":"show",children:e.jsx(B,{})}),e.jsx("div",{className:"operate-item","data-type":"del",children:e.jsx(q,{})}),e.jsx("div",{className:"operate-item","data-type":"clone",children:e.jsx(U,{})})]})]}),e.jsxs("div",{className:"pro-content-footer",children:[e.jsx("div",{className:"state-point",style:{backgroundColor:c}}),e.jsx("div",{className:"state-text",style:{color:c},children:n})]})]},s.id+"")})]}),e.jsx(W,{onOk:P,onCancel:S,visible:a}),e.jsx(K,{visible:i,onOk:R,onCancel:$}),e.jsx(Q,{onOk:()=>E(),onCancel:O,visible:t})]})},K=o=>{const{onOk:a,onCancel:l,visible:i}=o;return e.jsxs(g,{title:"删除确认",visible:i,onClose:l,children:[e.jsx("div",{style:{color:"#aeaeae",padding:10},children:"确定要删除该项目吗？"}),e.jsxs("div",{className:"del-pro-confirm",style:{display:"flex",justifyContent:"flex-end",borderTop:"2px solid #272b34",paddingTop:5},children:[e.jsx(d,{onClick:a,children:"确认"}),e.jsx(d,{onClick:l,children:"取消"})]})]})},Q=o=>{const{onOk:a,onCancel:l,visible:i}=o,r=t=>{t.preventDefault(),a()};return e.jsxs(g,{title:"克隆项目",visible:i,onClose:l,children:[e.jsx("div",{style:{color:"#a7a7a7",padding:10},children:"确认复制吗？"}),e.jsxs("div",{className:"del-pro-confirm",style:{display:"flex",justifyContent:"flex-end",borderTop:"2px solid #272b34",paddingTop:10},children:[e.jsx(d,{onClick:r,children:"确认"}),"   ",e.jsx(d,{onClick:l,children:"取消"})]})]})};export{ne as P};
