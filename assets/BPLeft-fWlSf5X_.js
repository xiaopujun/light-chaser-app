import{b as t,j as i,r as j}from"./index-D6TBVxtY.js";import{aJ as l,l as W,aE as x}from"./ViewDesignerLoader-CNRtTEkR.js";import{o as L}from"./mobxreact.esm-JD4dsIZD.js";import{I as u}from"./NumberInput-Cmrm0tNn.js";import{D as g}from"./DragAddProvider-CGIp7MQw.js";import{I as b}from"./Input-3EOJ10a0.js";import{I as d}from"./index-mp9x8JDr.js";import"./FetchUtil-DGFO2YFu.js";import"./MainRouter-P8gdG0Bh.js";import"./zoom-CntXMyuy.js";import"./asyncToGenerator-D9auTsc5.js";import"./Compact-D4tWohay.js";import"./useZIndex-3ZqMTx_f.js";import"./pickAttrs-DFSuEiRl.js";import"./Overflow-zjdP-BIA.js";import"./index-CtupgoPG.js";import"./render-D4mr46_6.js";import"./button-DegSlPI3.js";import"./index-BAAI1CD0.js";import"./Data-HJtzqNGY.js";import"./collapse-BbEVqHco.js";import"./CheckBox-CSDxIqSw.js";import"./index-iX9Jx9cy.js";import"./GlobalMessage-axQKYq8I.js";const f=d("add-subset",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M10 28V35H18",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M18 28H42V42H18V35V28Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"6",y1:"13.5",x2:"6",y2:"12.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"19",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"6",y1:"7",x2:"6",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"13.5",x2:"32",y2:"12.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"20",x2:"32",y2:"19",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"7",x2:"32",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"20",x2:"31",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"7",y1:"20",x2:"6",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"7",y1:"6",x2:"6",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"13",y1:"6",x2:"12",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"19.5",y1:"6",x2:"18.5",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"19.5",y1:"20",x2:"18.5",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"26",y1:"6",x2:"25",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"13",y1:"20",x2:"12",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"26",y1:"20",x2:"25",y2:"20",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("line",{x1:"32",y1:"6",x2:"31",y2:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),E=d("application-one",!1,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M41 13.9997L24 4L7 13.9997V33.9998L24 44L41 33.9998V13.9997Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M16 18.9976L23.9932 24.0002L31.9951 18.9976",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M24 24V33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),v=d("bytedance-mini-app",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26.1215 21.8789L21.8789 26.1215",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M32.4851 26.8285L33.8993 25.4143C35.4614 23.8522 35.4614 21.3195 33.8993 19.7574L28.2425 14.1005C26.6804 12.5384 24.1477 12.5384 22.5856 14.1005L21.1714 15.5148",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26.8282 32.4853L25.414 33.8995C23.8519 35.4616 21.3193 35.4616 19.7572 33.8995L14.1003 28.2427C12.5382 26.6806 12.5382 24.1479 14.1003 22.5858L15.5145 21.1716",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),N=d("card-two",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M28 12V4L8 14V42L20 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M20 16L40 6V34L20 44V16Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),M=d("mindmap-map",!0,function(e){return t.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},t.createElement("path",{d:"M26 24L42 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26 38H42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M26 10H42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),t.createElement("path",{d:"M18 24L6 24C6 24 7.65685 24 10 24M18 38C12 36 16 24 10 24M18 10C12 12 16 24 10 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),ae=()=>i.jsxs("div",{className:"bp-left",children:[i.jsx(B,{}),i.jsx(I,{})]}),B=L(()=>{const{activeMenu:e}=l,n=[{icon:i.jsx(E,{}),label:"图层节点",key:"layer"},{icon:i.jsx(M,{}),label:"逻辑节点",key:"logical"}];return i.jsx("div",{className:"bp-node-sort-list",children:n.map((o,r)=>i.jsxs("div",{className:`bp-left-item ${e===o.key?"bp-left-item-active":""}`,onClick:()=>{l.setActiveMenu(o.key)},children:[i.jsx("div",{className:"bp-item-icon",children:o.icon}),i.jsx("div",{className:"bp-item-label",children:o.label})]},r))})}),V=e=>{var n,o;if(e.target.classList.contains("bp-drag-node")){const r=e.target;(n=e.dataTransfer)==null||n.setData("nodeId",r.getAttribute("data-id")),(o=e.dataTransfer)==null||o.setData("type",r.getAttribute("data-type"))}},w=e=>{e.preventDefault()},C=e=>{var h,m;e.preventDefault();let n=(h=e.dataTransfer)==null?void 0:h.getData("nodeId");const o=(m=e.dataTransfer)==null?void 0:m.getData("type"),{bpDragContentRef:r,canvasScale:s}=x,a=r==null?void 0:r.getBoundingClientRect(),c={x:(e.clientX-((a==null?void 0:a.x)||0))/s,y:(e.clientY-((a==null?void 0:a.y)||0))/s};if(o==="layer-node"){const{setUsedLayerNodes:y}=l;y(n,!0)}else n=u.generateId();const{addBPNodeLayout:k}=x;k({id:n,type:o,position:c})},I=L(()=>{const{activeMenu:e,setSearchValue:n}=l,o=D[e],r=j.useRef(null);return j.useEffect(()=>(r.current=new g(document.getElementById("bp-node-draggable"),document.getElementById("bp-ds-container"),V,w,C),()=>{var s;return(s=r.current)==null?void 0:s.destroy()}),[e]),i.jsxs("div",{className:"bp-node-list",children:[i.jsx("div",{className:"bp-node-list-header",children:i.jsx("div",{className:"bp-node-list-search",children:i.jsx(b,{placeholder:"搜索节点",containerStyle:{width:"100%"},onChange:s=>n(s)})})}),i.jsx("div",{className:"bp-node-list-body",children:i.jsx("div",{className:"bp-node-list-container",id:"bp-node-draggable",style:{overflow:"scroll"},children:o&&i.jsx(o,{})})})]})}),z=L(()=>{const{layerConfigs:e}=W,{usedLayerNodes:n,searchValue:o}=l;let r=e?Object.keys(e):[];return o!==""&&(r=r.filter(s=>{var c;return((c=e[s].name)==null?void 0:c.indexOf(l.searchValue))!==-1})),i.jsx(i.Fragment,{children:r.map((s,a)=>{const c=e[s],k=n[s];return i.jsxs("div",{className:`bp-node-list-item bp-drag-node ${k?"bp-node-list-item-used":""}`,"data-id":c.id,"data-type":"layer-node",draggable:!k,children:[i.jsx("div",{className:"bpn-li-icon",children:i.jsx(N,{})}),i.jsx("div",{className:"bpn-li-label",children:c.name})]},a)})})}),A=L(()=>{const e=[{name:"条件判断",icon:f,type:"condition-node"},{name:"逻辑处理",icon:v,type:"logical-process-node"}].filter(n=>n.name.indexOf(l.searchValue)!==-1);return i.jsx(i.Fragment,{children:e.map((n,o)=>i.jsxs("div",{className:"bp-node-list-item bp-drag-node","data-type":n.type,draggable:!0,children:[i.jsx("div",{className:"bpn-li-icon",children:i.jsx(n.icon,{})}),i.jsx("div",{className:"bpn-li-label",children:n.name})]},o))})}),P=()=>i.jsx("div",{children:"开发中..."}),S=()=>i.jsx("div",{children:"开发中..."}),D={layer:z,logical:A,global:P,filter:S};export{S as BPFilterNodeList,P as BPGlobalVariablesNodeList,z as BPLayerNodeList,A as BPLogicalNodeList,I as BPNodeList,B as BPNodeSortList,ae as default,D as nodeListMapping};
