import{r as j,j as o}from"./index-OsS9UfkW.js";import{U as v}from"./UIContainer-QUMruXjD.js";import{o as P}from"./index-APrWN4Qi.js";import{U as w}from"./LocalOperator-BbYzoZ36.js";import{g as c}from"./GlobalMessage-FQtvcjbG.js";import{A,P as I}from"./Plus-s0Jz5-eZ.js";import"./index-hcrqZ8so.js";import"./MainRouter-Z3gK7D7G.js";import"./ResizeObserver.es-B32NGzNS.js";import"./useZIndex-g2cfol2D.js";import"./Help-EfSmZBRS.js";import"./index-K2O65-hP.js";import"./FetchUtil-Ivd_z0Im.js";import"./ObjectUtil-nMvTrJhh.js";import"./CheckOutlined-r3grTFMw.js";import"./collapse-aS6vX33V.js";import"./useForceUpdate-FVo-4i1b.js";import"./EyeOutlined-32DaWiZk.js";import"./omit--0Qnqbh8.js";const H=d=>{const{onChange:e,defaultValue:i,accept:f,size:r,...g}=d,a={uid:"-1",name:"image.png",status:"done"},[s,p]=j.useState(i?[{...a,url:i}]:[]),h=m=>{var n;if(r&&m.size>r*1024*1024)return(n=c.messageApi)==null||n.warning(`文件大小不能超过${r}M`),!1;const{saveType:U}=w.parseUrlParams();return P[U].uploadImage(m).then(l=>{var u;if(!l)(u=c.messageApi)==null||u.error("上传失败");else{const{url:t,hash:x}=l;console.log(t),e&&e({url:t,hash:x}),p([{...a,url:t}])}}),!1};return o.jsx(v,{...g,className:"image-upload",children:o.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:s,accept:f,onRemove:()=>{p([]),e&&e({url:"",hash:""})},onPreview:()=>window.open(s[0].url),children:s.length>0?null:o.jsxs("div",{className:"upload-btn",children:[o.jsx(I,{}),o.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{H as ImageUpload};
