var Z=Object.defineProperty;var J=(r,t,n)=>t in r?Z(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var m=(r,t,n)=>(J(r,typeof t!="symbol"?t+"":t,n),n);import{m as makeObservable,a as observable,b as action,o as observer,r as runInAction,t as toJS}from"./mobxreact.esm-QmaNsbsC.js";import{O as ObjectUtil,l as lodashExports}from"./FetchUtil-FMEOVjjY.js";import{r as reactExports,R as React,j as jsxRuntimeExports,_ as __vitePreload,f as createRoot,L as Loading}from"./index-CIZzpp4t.js";import{I as IconWrapper}from"./index-PQsxm07c.js";import{D as DesignerMode,I as IdGenerate,o as operatorMap}from"./index-Ky8VuNT2.js";import{g as globalMessage}from"./GlobalMessage-b_IUatJJ.js";var OperateType=(r=>(r[r.DRAG=0]="DRAG",r[r.RESIZE=1]="RESIZE",r[r.ADD=2]="ADD",r[r.DEL=3]="DEL",r[r.UPD_STYLE=4]="UPD_STYLE",r[r.HIDE=5]="HIDE",r[r.ORDER=6]="ORDER",r[r.LOCK=7]="LOCK",r[r.UPDATE_LAYER=8]="UPDATE_LAYER",r))(OperateType||{});class HistoryQueue{constructor(t=10){m(this,"capacity");m(this,"elements");m(this,"front");m(this,"rear");m(this,"size");m(this,"back");m(this,"backAll");m(this,"circulate",!1);m(this,"backCount",0);this.capacity=t,this.elements=new Array(t),this.front=0,this.rear=-1,this.size=0,this.back=this.rear,this.backAll=!1}enqueue(t){this.size===this.capacity&&!this.backAll&&(this.circulate=!0,this.front=(this.front+1)%this.capacity),this.back!==this.rear?(this.rear=(this.back+1)%this.capacity,this.elements[this.rear]=t,this.size-=this.backCount,this.backCount=0):(this.rear=(this.rear+1)%this.capacity,this.elements[this.rear]=t),this.size<this.capacity&&this.size++,this.back=this.rear,this.backAll=!1}getFront(){return this.size===0?null:this.elements[this.front]}getRear(){return this.size===0?null:this.elements[this.rear]}backoff(){if(this.size===0||this.backAll)return null;this.back===this.front&&(this.backAll=!0);const t=this.elements[this.back];return this.back=(this.back-1+this.capacity)%this.capacity,this.backCount++,t}forward(){return this.size===0||this.back===this.rear?null:(this.back=(this.back+1)%this.capacity,this.backAll&&(this.backAll=!1),this.elements[this.back])}getBackPointElem(){return this.elements[this.back]}isEmpty(){return this.size===0}isFull(){return this.size===this.capacity}getSize(){return this.size}getBack(){return this.back}getCirculate(){return this.circulate}}class HistoryOperator{constructor(){m(this,"queue",new HistoryQueue(100))}put(t){this.queue.enqueue(t)}backoff(){return this.queue.backoff()}forward(){return this.queue.forward()}}const historyOperator=new HistoryOperator;var FUNCTION="function",OBJECT="object",STRING="string",NUMBER="number",UNDEFINED="undefined",IS_WINDOW=typeof window!==UNDEFINED,doc=typeof document!==UNDEFINED&&document,OPEN_CLOSED_CHARACTERS=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],TINY_NUM=1e-7,DEFAULT_UNIT_PRESETS={cm:function(r){return r*96/2.54},mm:function(r){return r*96/254},in:function(r){return r*96},pt:function(r){return r*96/72},pc:function(r){return r*96/6},"%":function(r,t){return r*t/100},vw:function(r,t){return t===void 0&&(t=window.innerWidth),r/100*t},vh:function(r,t){return t===void 0&&(t=window.innerHeight),r/100*t},vmax:function(r,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),r/100*t},vmin:function(r,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),r/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __spreadArrays$2(){for(var r=0,t=0,n=arguments.length;t<n;t++)r+=arguments[t].length;for(var i=Array(r),e=0,t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,e++)i[e]=a[s];return i}function dot(r,t,n,i){return(r*i+t*n)/(n+i)}function isUndefined(r){return typeof r===UNDEFINED}function isObject(r){return r&&typeof r===OBJECT}function isArray(r){return Array.isArray(r)}function isString(r){return typeof r===STRING}function isNumber(r){return typeof r===NUMBER}function isFunction(r){return typeof r===FUNCTION}function isEqualSeparator(r,t){var n=r===""||r==" ",i=t===""||t==" ";return i&&n||r===t}function findOpen(r,t,n,i,e){var a=findIgnore(r,t,n);return a?n:findClose(r,t,n+1,i,e)}function findIgnore(r,t,n){if(!r.ignore)return null;var i=t.slice(Math.max(n-3,0),n+3).join("");return new RegExp(r.ignore).exec(i)}function findClose(r,t,n,i,e){for(var a=function(c){var d=t[c].trim();if(d===r.close&&!findIgnore(r,t,c))return{value:c};var u=c,f=find(e,function(g){var p=g.open;return p===d});if(f&&(u=findOpen(f,t,c,i,e)),u===-1)return s=c,"break";c=u,s=c},s,o=n;o<i;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function splitText(r,t){var n=isString(t)?{separator:t}:t,i=n.separator,e=i===void 0?",":i,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,d=c===void 0?OPEN_CLOSED_CHARACTERS:c,u=d.map(function(b){var S=b.open,P=b.close;return S===P?S:S+"|"+P}).join("|"),f="(\\s*"+e+"\\s*|"+u+"|\\s+)",g=new RegExp(f,"g"),p=r.split(g).filter(function(b){return b&&b!=="undefined"}),v=p.length,y=[],_=[];function C(){return _.length?(y.push(_.join("")),_=[],!0):!1}for(var E=function(b){var S=p[b].trim(),P=b,x=find(d,function(T){var w=T.open;return w===S}),A=find(d,function(T){var w=T.close;return w===S});if(x){if(P=findOpen(x,p,b,v,d),P!==-1&&l)return C()&&a||(y.push(p.slice(b,P+1).join("")),b=P,a)?(k=b,"break"):(k=b,"continue")}else if(A&&!findIgnore(A,p,b)){var D=__spreadArrays$2(d);return D.splice(d.indexOf(A),1),{value:splitText(r,{separator:e,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:D})}}else if(isEqualSeparator(S,e)&&!s)return C(),a?(k=b,"break"):(k=b,"continue");P===-1&&(P=v-1),_.push(p.slice(b,P+1).join("")),b=P,k=b},k,M=0;M<v;++M){var L=E(M);if(M=k,typeof L=="object")return L.value;if(L==="break")break}return _.length&&y.push(_.join("")),y}function splitSpace(r){return splitText(r,"")}function splitComma(r){return splitText(r,",")}function splitBracket(r){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(r);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function splitUnit(r){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(r);if(!t)return{prefix:"",unit:"",value:NaN};var n=t[1],i=t[2],e=t[3];return{prefix:n,unit:e,value:parseFloat(i)}}function camelize(r){return r.replace(/[\s-_]+([^\s-_])/g,function(t,n){return n.toUpperCase()})}function decamelize(r,t){return t===void 0&&(t="-"),r.replace(/([a-z])([A-Z])/g,function(n,i,e){return""+i+t+e.toLowerCase()})}function now(){return Date.now?Date.now():new Date().getTime()}function findIndex(r,t,n){n===void 0&&(n=-1);for(var i=r.length,e=0;e<i;++e)if(t(r[e],e,r))return e;return n}function findLastIndex(r,t,n){n===void 0&&(n=-1);for(var i=r.length,e=i-1;e>=0;--e)if(t(r[e],e,r))return e;return n}function findLast(r,t,n){var i=findLastIndex(r,t);return i>-1?r[i]:n}function find(r,t,n){var i=findIndex(r,t);return i>-1?r[i]:n}var requestAnimationFrame$1=function(){var r=now(),t=IS_WINDOW&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(n){var i=now(),e=setTimeout(function(){n(i-r)},1e3/60);return e}}(),cancelAnimationFrame=function(){var r=IS_WINDOW&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return r?r.bind(window):function(t){clearTimeout(t)}}();function getKeys(r){return Object.keys(r)}function convertUnitSize(r,t){var n=splitUnit(r),i=n.value,e=n.unit;if(isObject(t)){var a=t[e];if(a){if(isFunction(a))return a(i);if(DEFAULT_UNIT_PRESETS[e])return DEFAULT_UNIT_PRESETS[e](i,a)}}else if(e==="%")return i*t/100;return DEFAULT_UNIT_PRESETS[e]?DEFAULT_UNIT_PRESETS[e](i):i}function between(r,t,n){return Math.max(t,Math.min(r,n))}function checkBoundSize(r,t,n,i){return i===void 0&&(i=r[0]/r[1]),[[throttle(t[0],TINY_NUM),throttle(t[0]/i,TINY_NUM)],[throttle(t[1]*i,TINY_NUM),throttle(t[1],TINY_NUM)]].filter(function(e){return e.every(function(a,s){var o=t[s],l=throttle(o,TINY_NUM);return n?a<=o||a<=l:a>=o||a>=l})})[0]||r}function calculateBoundSize(r,t,n,i){if(!i)return r.map(function(g,p){return between(g,t[p],n[p])});var e=r[0],a=r[1],s=i===!0?e/a:i,o=checkBoundSize(r,t,!1,s),l=o[0],c=o[1],d=checkBoundSize(r,n,!0,s),u=d[0],f=d[1];return e<l||a<c?(e=l,a=c):(e>u||a>f)&&(e=u,a=f),[e,a]}function sum(r){for(var t=r.length,n=0,i=t-1;i>=0;--i)n+=r[i];return n}function average(r){for(var t=r.length,n=0,i=t-1;i>=0;--i)n+=r[i];return t?n/t:0}function getRad$1(r,t){var n=t[0]-r[0],i=t[1]-r[1],e=Math.atan2(i,n);return e>=0?e:e+Math.PI*2}function getCenterPoint(r){return[0,1].map(function(t){return average(r.map(function(n){return n[t]}))})}function getShapeDirection(r){var t=getCenterPoint(r),n=getRad$1(t,r[0]),i=getRad$1(t,r[1]);return n<i&&i-n<Math.PI||n>i&&i-n<-Math.PI?1:-1}function getDist$1(r,t){return Math.sqrt(Math.pow((t?t[0]:0)-r[0],2)+Math.pow((t?t[1]:0)-r[1],2))}function throttle(r,t){if(!t)return r;var n=1/t;return Math.round(r/t)/n}function throttleArray(r,t){return r.forEach(function(n,i){r[i]=throttle(r[i],t)}),r}function counter(r){for(var t=[],n=0;n<r;++n)t.push(n);return t}function hasClass(r,t){return r.classList?r.classList.contains(t):!!r.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function addClass(r,t){r.classList?r.classList.add(t):r.className+=" "+t}function removeClass(r,t){if(r.classList)r.classList.remove(t);else{var n=new RegExp("(\\s|^)"+t+"(\\s|$)");r.className=r.className.replace(n," ")}}function addEvent(r,t,n,i){r.addEventListener(t,n,i)}function removeEvent(r,t,n,i){r.removeEventListener(t,n,i)}function getDocument(r){return(r==null?void 0:r.ownerDocument)||doc}function getDocumentElement(r){return getDocument(r).documentElement}function getDocumentBody(r){return getDocument(r).body}function getWindow(r){var t;return((t=r==null?void 0:r.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function isWindow(r){return r&&"postMessage"in r&&"blur"in r&&"self"in r}function isNode(r){return isObject(r)&&r.nodeName&&r.nodeType&&"ownerDocument"in r}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$5=function(){return __assign$5=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign$5.apply(this,arguments)};function __spreadArrays$1(){for(var r=0,t=0,n=arguments.length;t<n;t++)r+=arguments[t].length;for(var i=Array(r),e=0,t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,e++)i[e]=a[s];return i}var EventEmitter=function(){function r(){this._events={}}var t=r.prototype;return t.on=function(n,i){if(isObject(n))for(var e in n)this.on(e,n[e]);else this._addEvent(n,i,{});return this},t.off=function(n,i){if(!n)this._events={};else if(isObject(n))for(var e in n)this.off(e);else if(!i)this._events[n]=[];else{var a=this._events[n];if(a){var s=findIndex(a,function(o){return o.listener===i});s>-1&&a.splice(s,1)}}return this},t.once=function(n,i){var e=this;return i&&this._addEvent(n,i,{once:!0}),new Promise(function(a){e._addEvent(n,a,{once:!0})})},t.emit=function(n,i){var e=this;i===void 0&&(i={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return i.eventType=n,i.stop=function(){s=!0},i.currentTarget=this,__spreadArrays$1(a).forEach(function(o){o.listener(i),o.once&&e.off(n,o.listener)}),!s},t.trigger=function(n,i){return i===void 0&&(i={}),this.emit(n,i)},t._addEvent=function(n,i,e){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(__assign$5({listener:i},e))},r}();const EventEmitter$1=EventEmitter;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$5=function(r,t){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var e in i)i.hasOwnProperty(e)&&(n[e]=i[e])},extendStatics$5(r,t)};function __extends$5(r,t){extendStatics$5(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var __assign$4=function(){return __assign$4=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign$4.apply(this,arguments)};function getRad(r,t){var n=t[0]-r[0],i=t[1]-r[1],e=Math.atan2(i,n);return e>=0?e:e+Math.PI*2}function getRotatiion(r){return getRad([r[0].clientX,r[0].clientY],[r[1].clientX,r[1].clientY])/Math.PI*180}function isMultiTouch(r){return r.touches&&r.touches.length>=2}function getEventClients(r){return r?r.touches?getClients(r.touches):[getClient$1(r)]:[]}function isMouseEvent(r){return r&&(r.type.indexOf("mouse")>-1||"button"in r)}function getPosition(r,t,n){var i=n.length,e=getAverageClient(r,i),a=e.clientX,s=e.clientY,o=e.originalClientX,l=e.originalClientY,c=getAverageClient(t,i),d=c.clientX,u=c.clientY,f=getAverageClient(n,i),g=f.clientX,p=f.clientY,v=a-d,y=s-u,_=a-g,C=s-p;return{clientX:o,clientY:l,deltaX:v,deltaY:y,distX:_,distY:C}}function getDist(r){return Math.sqrt(Math.pow(r[0].clientX-r[1].clientX,2)+Math.pow(r[0].clientY-r[1].clientY,2))}function getClients(r){for(var t=Math.min(r.length,2),n=[],i=0;i<t;++i)n.push(getClient$1(r[i]));return n}function getClient$1(r){return{clientX:r.clientX,clientY:r.clientY}}function getAverageClient(r,t){t===void 0&&(t=r.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=Math.min(r.length,t),e=0;e<i;++e){var a=r[e];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return t?{clientX:n.clientX/t,clientY:n.clientY/t,originalClientX:n.originalClientX/t,originalClientY:n.originalClientY/t}:n}var ClientStore=function(){function r(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return r.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),getRotatiion(t)},r.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),getRotatiion(t)-getRotatiion(this.startClients)},r.prototype.getPosition=function(t,n){t===void 0&&(t=this.prevClients);var i=getPosition(t||this.prevClients,this.prevClients,this.startClients),e=i.deltaX,a=i.deltaY;return this.movement+=Math.sqrt(e*e+a*a),this.prevClients=t,i},r.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var n=this.prevClients,i=this.startClients,e=Math.min(this.length,n.length),a=[],s=0;s<e;++s)a[s]=getPosition([t[s]],[n[s]],[i[s]]);return a},r.prototype.getMovement=function(t){var n=this.movement;if(!t)return n;var i=getAverageClient(t,this.length),e=getAverageClient(this.prevClients,this.length),a=i.clientX-e.clientX,s=i.clientY-e.clientY;return Math.sqrt(a*a+s*s)+n},r.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),getDist(t)},r.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),getDist(t)/getDist(this.startClients)},r.prototype.move=function(t,n){this.startClients.forEach(function(i){i.clientX-=t,i.clientY-=n}),this.prevClients.forEach(function(i){i.clientX-=t,i.clientY-=n})},r}(),INPUT_TAGNAMES=["textarea","input"],Gesto=function(r){__extends$5(t,r);function t(n,i){i===void 0&&(i={});var e=r.call(this)||this;e.options={},e.flag=!1,e.pinchFlag=!1,e.data={},e.isDrag=!1,e.isPinch=!1,e.clientStores=[],e.targets=[],e.prevTime=0,e.doubleFlag=!1,e._useMouse=!1,e._useTouch=!1,e._useDrag=!1,e._dragFlag=!1,e._isTrusted=!1,e._isMouseEvent=!1,e._isSecondaryButton=!1,e._preventMouseEvent=!1,e._prevInputEvent=null,e._isDragAPI=!1,e._isIdle=!0,e._window=window,e.onDragStart=function(f,g){if(g===void 0&&(g=!0),!(!e.flag&&f.cancelable===!1)){var p=f.type.indexOf("drag")>=-1;if(!(e.flag&&p)){e._isDragAPI=!0;var v=e.options,y=v.container,_=v.pinchOutside,C=v.preventWheelClick,E=v.preventRightClick,k=v.preventDefault,M=v.checkInput,L=v.dragFocusedInput,b=v.preventClickEventOnDragStart,S=v.preventClickEventOnDrag,P=v.preventClickEventByCondition,x=e._useTouch,A=!e.flag;if(e._isSecondaryButton=f.which===3||f.button===2,C&&(f.which===2||f.button===1)||E&&(f.which===3||f.button===2))return e.stop(),!1;if(A){var D=e._window.document.activeElement,T=f.target;if(T){var w=T.tagName.toLowerCase(),$=INPUT_TAGNAMES.indexOf(w)>-1,j=T.isContentEditable;if($||j){if(M||!L&&D===T)return!1;if(D&&(D===T||j&&D.isContentEditable&&D.contains(T)))if(L)T.blur();else return!1}else if((k||f.type==="touchstart")&&D){var W=D.tagName.toLowerCase();(D.isContentEditable||INPUT_TAGNAMES.indexOf(W)>-1)&&D.blur()}(b||S||P)&&addEvent(e._window,"click",e._onClick,!0)}e.clientStores=[new ClientStore(getEventClients(f))],e._isIdle=!1,e.flag=!0,e.isDrag=!1,e._isTrusted=g,e._dragFlag=!0,e._prevInputEvent=f,e.data={},e.doubleFlag=now()-e.prevTime<200,e._isMouseEvent=isMouseEvent(f),!e._isMouseEvent&&e._preventMouseEvent&&(e._preventMouseEvent=!1);var O=e._preventMouseEvent||e.emit("dragStart",__assign$4(__assign$4({data:e.data,datas:e.data,inputEvent:f,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,isTrusted:g,isDouble:e.doubleFlag},e.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){e._dragFlag=!1}}));O===!1&&e.stop(),e._isMouseEvent&&e.flag&&k&&f.preventDefault()}if(!e.flag)return!1;var I=0;if(A?(e._attchDragEvent(),x&&_&&(I=setTimeout(function(){addEvent(y,"touchstart",e.onDragStart,{passive:!1})}))):x&&_&&removeEvent(y,"touchstart",e.onDragStart),e.flag&&isMultiTouch(f)){if(clearTimeout(I),A&&f.touches.length!==f.changedTouches.length)return;e.pinchFlag||e.onPinchStart(f)}}}},e.onDrag=function(f,g){if(e.flag){var p=e.options.preventDefault;!e._isMouseEvent&&p&&f.preventDefault(),e._prevInputEvent=f;var v=getEventClients(f),y=e.moveClients(v,f,!1);if(e._dragFlag){if(e.pinchFlag||y.deltaX||y.deltaY){var _=e._preventMouseEvent||e.emit("drag",__assign$4(__assign$4({},y),{isScroll:!!g,inputEvent:f}));if(_===!1){e.stop();return}}e.pinchFlag&&e.onPinch(f,v)}e.getCurrentStore().getPosition(v,!0)}},e.onDragEnd=function(f){if(e.flag){var g=e.options,p=g.pinchOutside,v=g.container,y=g.preventClickEventOnDrag,_=g.preventClickEventOnDragStart,C=g.preventClickEventByCondition,E=e.isDrag;(y||_||C)&&requestAnimationFrame(function(){e._allowClickEvent()}),!C&&!_&&y&&!E&&e._allowClickEvent(),e._useTouch&&p&&removeEvent(v,"touchstart",e.onDragStart),e.pinchFlag&&e.onPinchEnd(f);var k=f!=null&&f.touches?getEventClients(f):[],M=k.length;M===0||!e.options.keepDragging?e.flag=!1:e._addStore(new ClientStore(k));var L=e._getPosition(),b=now(),S=!E&&e.doubleFlag;e._prevInputEvent=null,e.prevTime=E||S?0:b,e.flag||(e._dettachDragEvent(),e._preventMouseEvent||e.emit("dragEnd",__assign$4({data:e.data,datas:e.data,isDouble:S,isDrag:E,isClick:!E,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,inputEvent:f,isTrusted:e._isTrusted},L)),e.clientStores=[],e._isMouseEvent||(e._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){e._preventMouseEvent=!1})})),e._isIdle=!0)}},e.onBlur=function(){e.onDragEnd()},e._allowClickEvent=function(){removeEvent(e._window,"click",e._onClick,!0)},e._onClick=function(f){e._allowClickEvent(),e._preventMouseEvent=!1;var g=e.options.preventClickEventByCondition;g!=null&&g(f)||(f.stopPropagation(),f.preventDefault())},e._onContextMenu=function(f){var g=e.options;g.preventRightClick?e.onDragEnd(f):f.preventDefault()},e._passCallback=function(){};var a=[].concat(n),s=a[0];e._window=isWindow(s)?s:getWindow(s),e.options=__assign$4({checkInput:!1,container:s&&!("document"in s)?getWindow(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var o=e.options,l=o.container,c=o.events,d=o.checkWindowBlur;if(e._useDrag=c.indexOf("drag")>-1,e._useTouch=c.indexOf("touch")>-1,e._useMouse=c.indexOf("mouse")>-1,e.targets=a,e._useDrag&&a.forEach(function(f){addEvent(f,"dragstart",e.onDragStart)}),e._useMouse&&(a.forEach(function(f){addEvent(f,"mousedown",e.onDragStart),addEvent(f,"mousemove",e._passCallback)}),addEvent(l,"contextmenu",e._onContextMenu)),d&&addEvent(getWindow(),"blur",e.onBlur),e._useTouch){var u={passive:!1};a.forEach(function(f){addEvent(f,"touchstart",e.onDragStart,u),addEvent(f,"touchmove",e._passCallback,u)})}return e}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(i,e){return i+e.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(n,i,e,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,i),a&&this.onDrag(e,!0))},t.prototype.move=function(n,i){var e=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var c=l.clientX,d=l.clientY;return{clientX:c+e,clientY:d+a,originalClientX:c,originalClientY:d}}),i,!0)},t.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},t.prototype.setEventData=function(n){var i=this.data;for(var e in n)i[e]=n[e];return this},t.prototype.setEventDatas=function(n){return this.setEventData(n)},t.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),__assign$4(__assign$4({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var n=this,i=this.targets,e=this.options.container;this.off(),removeEvent(this._window,"blur",this.onBlur),this._useDrag&&i.forEach(function(a){removeEvent(a,"dragstart",n.onDragStart)}),this._useMouse&&(i.forEach(function(a){removeEvent(a,"mousedown",n.onDragStart)}),removeEvent(e,"contextmenu",this._onContextMenu)),this._useTouch&&(i.forEach(function(a){removeEvent(a,"touchstart",n.onDragStart)}),removeEvent(e,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(n){var i=this,e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var a=new ClientStore(getEventClients(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",__assign$4(__assign$4({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(n,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var e=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",__assign$4(__assign$4({data:this.data,datas:this.data,movement:this.getMovement(i),angle:e.getAngle(i),rotation:e.getRotation(i),touches:e.getPositions(i),scale:e.getScale(i),distance:e.getDistance(i)},e.getPosition(i)),{inputEvent:n,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(n){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.getCurrentStore();this.emit("pinchEnd",__assign$4(__assign$4({data:this.data,datas:this.data,isPinch:i,touches:e.getPositions()},e.getPosition()),{inputEvent:n}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(n,i,e){var a=this._getPosition(n,e),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),__assign$4(__assign$4({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i,isTrusted:this._isTrusted,isFirstDrag:o})},t.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},t.prototype._getPosition=function(n,i){var e=this.getCurrentStore(),a=e.getPosition(n,i),s=this.clientStores.slice(1).reduce(function(c,d){var u=d.getPosition();return c.distX+=u.distX,c.distY+=u.distY,c},a),o=s.distX,l=s.distY;return __assign$4(__assign$4({},a),{distX:o,distY:l})},t.prototype._attchDragEvent=function(){var n=this._window,i=this.options.container,e={passive:!1};this._isDragAPI&&(addEvent(i,"dragover",this.onDrag,e),addEvent(n,"dragend",this.onDragEnd)),this._useMouse&&(addEvent(i,"mousemove",this.onDrag),addEvent(n,"mouseup",this.onDragEnd)),this._useTouch&&(addEvent(i,"touchmove",this.onDrag,e),addEvent(n,"touchend",this.onDragEnd,e),addEvent(n,"touchcancel",this.onDragEnd,e))},t.prototype._dettachDragEvent=function(){var n=this._window,i=this.options.container;this._isDragAPI&&(removeEvent(i,"dragover",this.onDrag),removeEvent(n,"dragend",this.onDragEnd)),this._useMouse&&(removeEvent(i,"mousemove",this.onDrag),removeEvent(n,"mouseup",this.onDragEnd)),this._useTouch&&(removeEvent(i,"touchstart",this.onDragStart),removeEvent(i,"touchmove",this.onDrag),removeEvent(n,"touchend",this.onDragEnd),removeEvent(n,"touchcancel",this.onDragEnd))},t}(EventEmitter$1);function prefixNames(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(i){return i.split(" ").map(function(e){return e?""+r+e:""}).join(" ")}).join(" ")}function prefixCSS(r,t){return t.replace(/([^}{]*){/gm,function(n,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+r+"$1")+"{"})}function ref(r,t){return function(n){n&&(r[t]=n)}}function refs(r,t,n){return function(i){i&&(r[t][n]=i)}}function Properties(r,t){return function(n){var i=n.prototype;r.forEach(function(e){t(i,e)})}}function withMethods(r,t){return t===void 0&&(t={}),function(n,i){r.forEach(function(e){var a=t[e]||e;a in n||(n[a]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=(s=this[i])[e].apply(s,o);return c===this[i]?this:c})})}}var PolyMap=function(){function r(){this.keys=[],this.values=[]}var t=r.prototype;return t.get=function(n){return this.values[this.keys.indexOf(n)]},t.set=function(n,i){var e=this.keys,a=this.values,s=e.indexOf(n),o=s===-1?e.length:s;e[o]=n,a[o]=i},r}(),HashMap=function(){function r(){this.object={}}var t=r.prototype;return t.get=function(n){return this.object[n]},t.set=function(n,i){this.object[n]=i},r}(),SUPPORT_MAP=typeof Map=="function",Link=function(){function r(){}var t=r.prototype;return t.connect=function(n,i){this.prev=n,this.next=i,n&&(n.next=this),i&&(i.prev=this)},t.disconnect=function(){var n=this.prev,i=this.next;n&&(n.next=i),i&&(i.prev=n)},t.getIndex=function(){for(var n=this,i=-1;n;)n=n.prev,++i;return i},r}();function orderChanged(r,t){var n=[],i=[];return r.forEach(function(e){var a=e[0],s=e[1],o=new Link;n[a]=o,i[s]=o}),n.forEach(function(e,a){e.connect(n[a-1])}),r.filter(function(e,a){return!t[a]}).map(function(e,a){var s=e[0],o=e[1];if(s===o)return[0,0];var l=n[s],c=i[o-1],d=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,n[0]);var u=l.getIndex();return[d,u]})}var Result=function(){function r(n,i,e,a,s,o,l,c){this.prevList=n,this.list=i,this.added=e,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=c}var t=r.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var n=orderChanged(this.changedBeforeAdded,this.fixed),i=this.changed,e=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],l=a[1],c=i[s],d=c[0],u=c[1];if(o!==l)return e.push([d,u]),!0}),this.cachePureChanged=e},r}();function diff$1(r,t,n){var i=SUPPORT_MAP?Map:n?HashMap:PolyMap,e=n||function(C){return C},a=[],s=[],o=[],l=r.map(e),c=t.map(e),d=new i,u=new i,f=[],g=[],p={},v=[],y=0,_=0;return l.forEach(function(C,E){d.set(C,E)}),c.forEach(function(C,E){u.set(C,E)}),l.forEach(function(C,E){var k=u.get(C);typeof k>"u"?(++_,s.push(E)):p[k]=_}),c.forEach(function(C,E){var k=d.get(C);typeof k>"u"?(a.push(E),++y):(o.push([k,E]),_=p[E]||0,f.push([k-_,E-y]),g.push(E===k),k!==E&&v.push([k,E]))}),s.reverse(),new Result(r,t,a,s,v,o,f,g)}var ListDiffer=function(){function r(n,i){n===void 0&&(n=[]),this.findKeyCallback=i,this.list=[].slice.call(n)}var t=r.prototype;return t.update=function(n){var i=[].slice.call(n),e=diff$1(this.list,i,this.findKeyCallback);return this.list=i,e},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$4=function(r,t){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var e in i)i.hasOwnProperty(e)&&(n[e]=i[e])},extendStatics$4(r,t)};function __extends$4(r,t){extendStatics$4(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var findKeyCallback=typeof Map=="function"?void 0:function(){var r=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++r)}}(),ChildrenDiffer=function(r){__extends$4(t,r);function t(n){return n===void 0&&(n=[]),r.call(this,n,findKeyCallback)||this}return t}(ListDiffer);function diff(r,t){return diff$1(r,t,findKeyCallback)}const ChildrenDiffer$1=ChildrenDiffer;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$3=function(r,t){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var e in i)i.hasOwnProperty(e)&&(n[e]=i[e])},extendStatics$3(r,t)};function __extends$3(r,t){extendStatics$3(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var __assign$3=function(){return __assign$3=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign$3.apply(this,arguments)};function getDefaultScrollPosition(r){var t=r.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function checkDefaultScrollEvent(r,t){return r.addEventListener("scroll",t),function(){r.removeEventListener("scroll",t)}}function getContainerElement(r){if(r){if(isString(r))return document.querySelector(r)}else return null;if(isFunction(r))return r();if(r instanceof Element)return r;if("current"in r)return r.current;if("value"in r)return r.value}var DragScroll=function(r){__extends$3(t,r);function t(){var i=r!==null&&r.apply(this,arguments)||this;return i._startRect=null,i._startPos=[],i._prevTime=0,i._timer=0,i._prevScrollPos=[0,0],i._isWait=!1,i._flag=!1,i._currentOptions=null,i._lock=!1,i._unregister=null,i._onScroll=function(){var e=i._currentOptions;i._lock||!e||i.emit("scrollDrag",{next:function(a){i.checkScroll({container:e.container,inputEvent:a})}})},i}var n=t.prototype;return n.dragStart=function(i,e){var a=getContainerElement(e.container);if(!a){this._flag=!1;return}var s=0,o=0,l=0,c=0;if(a===document.body)l=window.innerWidth,c=window.innerHeight;else{var d=a.getBoundingClientRect();s=d.top,o=d.left,l=d.width,c=d.height}this._flag=!0,this._startPos=[i.clientX,i.clientY],this._startRect={top:s,left:o,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],e),this._currentOptions=e,this._registerScrollEvent(e)},n.drag=function(i,e){if(clearTimeout(this._timer),!!this._flag){var a=i.clientX,s=i.clientY,o=e.threshold,l=o===void 0?0:o,c=this,d=c._startRect,u=c._startPos;this._currentOptions=e;var f=[0,0];return d.top>s-l?(u[1]>d.top||s<u[1])&&(f[1]=-1):d.top+d.height<s+l&&(u[1]<d.top+d.height||s>u[1])&&(f[1]=1),d.left>a-l?(u[0]>d.left||a<u[0])&&(f[0]=-1):d.left+d.width<a+l&&(u[0]<d.left+d.width||a>u[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(__assign$3(__assign$3({},e),{direction:f,inputEvent:i,isDrag:!0}))}},n.checkScroll=function(i){var e=this;if(this._isWait)return!1;var a=i.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=i.direction,l=i.throttleTime,c=l===void 0?0:l,d=i.inputEvent,u=i.isDrag,f=this._getScrollPosition(o||[0,0],i),g=f[0]-s[0],p=f[1]-s[1],v=o||[g?Math.abs(g)/g:0,p?Math.abs(p)/p:0];return this._prevScrollPos=f,this._lock=!1,!g&&!p?!1:(this.emit("move",{offsetX:v[0]?g:0,offsetY:v[1]?p:0,inputEvent:d}),c&&u&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){e._continueDrag(i)},c)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(i,e){var a=e.container,s=e.getScrollPosition,o=s===void 0?getDefaultScrollPosition:s;return o({container:getContainerElement(a),direction:i})},n._continueDrag=function(i){var e=this,a,s=i.container,o=i.direction,l=i.throttleTime,c=i.useScroll,d=i.isDrag,u=i.inputEvent;if(!(!this._flag||d&&this._isWait)){var f=now(),g=Math.max(l+this._prevTime-f,0);if(g>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){e._continueDrag(i)},g),!1;this._prevTime=f;var p=this._getScrollPosition(o,i);this._prevScrollPos=p,d&&(this._isWait=!0),c||(this._lock=!0);var v={container:getContainerElement(s),direction:o,inputEvent:u};return(a=i.requestScroll)===null||a===void 0||a.call(i,v),this.emit("scroll",v),this._isWait=!1,c||this.checkScroll(__assign$3(__assign$3({},i),{prevScrollPos:p,direction:o,inputEvent:u}))}},n._registerScrollEvent=function(i){this._unregisterScrollEvent();var e=i.checkScrollEvent;if(e){var a=e===!0?checkDefaultScrollEvent:e,s=getContainerElement(i.container);e===!0&&(s===document.body||s===document.documentElement)?this._unregister=checkDefaultScrollEvent(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var i;(i=this._unregister)===null||i===void 0||i.call(this),this._unregister=null},t}(EventEmitter$1);const DragScroll$1=DragScroll;var extendStatics$2=function(r,t){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])},extendStatics$2(r,t)};function __extends$2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics$2(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function createCommonjsModule(r,t){return t={exports:{}},r(t,t.exports),t.exports}var keycode=createCommonjsModule(function(r,t){function n(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var d=String(l),u=i[d.toLowerCase()];if(u)return u;var u=e[d.toLowerCase()];if(u)return u;if(d.length===1)return d.charCodeAt(0)}n.isEventKey=function(c,d){if(c&&typeof c=="object"){var u=c.which||c.keyCode||c.charCode;if(u==null)return!1;if(typeof d=="string"){var f=i[d.toLowerCase()];if(f)return f===u;var f=e[d.toLowerCase()];if(f)return f===u}else if(typeof d=="number")return d===u;return!1}},t=r.exports=n;var i=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var s=t.names=t.title={};for(a in i)s[i[a]]=a;for(var o in e)i[o]=e[o]});keycode.code;keycode.codes;keycode.aliases;var keycode_4=keycode.names;keycode.title;var codeData={"+":"plus","left command":"meta","right command":"meta"},keysSort={shift:1,ctrl:2,alt:3,meta:4};function getKey(r,t){var n=(keycode_4[r]||t||"").toLowerCase();for(var i in codeData)n=n.replace(i,codeData[i]);return n.replace(/\s/g,"")}function getCombi(r,t){t===void 0&&(t=getKey(r.keyCode,r.key));var n=getModifierCombi(r);return n.indexOf(t)===-1&&n.push(t),n.filter(Boolean)}function getModifierCombi(r){var t=[r.shiftKey&&"shift",r.ctrlKey&&"ctrl",r.altKey&&"alt",r.metaKey&&"meta"];return t.filter(Boolean)}function getArrangeCombi(r){var t=r.slice();return t.sort(function(n,i){var e=keysSort[n]||5,a=keysSort[i]||5;return e-a}),t}var globalKeyController,KeyController=function(r){__extends$2(t,r);function t(i){i===void 0&&(i=window);var e=r.call(this)||this;return e.container=i,e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.clear=function(){return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e},e.keydownEvent=function(a){e.triggerEvent("keydown",a)},e.keyupEvent=function(a){e.triggerEvent("keyup",a)},e.blur=function(){e.clear(),e.trigger("blur")},addEvent(i,"blur",e.blur),addEvent(i,"keydown",e.keydownEvent),addEvent(i,"keyup",e.keyupEvent),e}var n=t.prototype;return Object.defineProperty(t,"global",{get:function(){return globalKeyController||(globalKeyController=new t)},enumerable:!1,configurable:!0}),t.setGlobal=function(){return this.global},n.destroy=function(){var i=this.container;this.clear(),this.off(),removeEvent(i,"blur",this.blur),removeEvent(i,"keydown",this.keydownEvent),removeEvent(i,"keyup",this.keyupEvent)},n.keydown=function(i,e){return this.addEvent("keydown",i,e)},n.offKeydown=function(i,e){return this.removeEvent("keydown",i,e)},n.offKeyup=function(i,e){return this.removeEvent("keyup",i,e)},n.keyup=function(i,e){return this.addEvent("keyup",i,e)},n.addEvent=function(i,e,a){return isArray(e)?this.on("".concat(i,".").concat(getArrangeCombi(e).join(".")),a):isString(e)?this.on("".concat(i,".").concat(e),a):this.on(i,e),this},n.removeEvent=function(i,e,a){return isArray(e)?this.off("".concat(i,".").concat(getArrangeCombi(e).join(".")),a):isString(e)?this.off("".concat(i,".").concat(e),a):this.off(i,e),this},n.triggerEvent=function(i,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var a=getKey(e.keyCode,e.key),s=a==="ctrl"||a==="shift"||a==="meta"||a==="alt",o={key:a,isToggle:s,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(i,o),this.trigger("".concat(i,".").concat(a),o);var l=getCombi(e,a);l.length>1&&this.trigger("".concat(i,".").concat(l.join(".")),o)},t}(EventEmitter$1);const KeyController$1=KeyController;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __spreadArrays(){for(var r=0,t=0,n=arguments.length;t<n;t++)r+=arguments[t].length;for(var i=Array(r),e=0,t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,e++)i[e]=a[s];return i}function tinyThrottle(r){return throttle(r,TINY_NUM)}function isSameConstants(r,t){return r.every(function(n,i){return tinyThrottle(n-t[i])===0})}function isSamePoint(r,t){return!tinyThrottle(r[0]-t[0])&&!tinyThrottle(r[1]-t[1])}function getAreaSize(r){return r.length<3?0:Math.abs(sum(r.map(function(t,n){var i=r[n+1]||r[0];return t[0]*i[1]-i[0]*t[1]})))/2}function fitPoints(r,t){var n=t.width,i=t.height,e=t.left,a=t.top,s=getMinMaxs(r),o=s.minX,l=s.minY,c=s.maxX,d=s.maxY,u=n/(c-o),f=i/(d-l);return r.map(function(g){return[e+(g[0]-o)*u,a+(g[1]-l)*f]})}function getMinMaxs(r){var t=r.map(function(i){return i[0]}),n=r.map(function(i){return i[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,n)}}function isInside(r,t,n){var i=r[0],e=r[1],a=getMinMaxs(t),s=a.minX,o=a.maxX,l=[[s,e],[o,e]],c=getLinearConstants(l[0],l[1]),d=convertLines(t),u=[];if(d.forEach(function(p){var v=getLinearConstants(p[0],p[1]),y=p[0];if(isSameConstants(c,v))u.push({pos:r,line:p,type:"line"});else{var _=getPointsOnLines(getIntersectionPointsByConstants(c,v),[l,p]);_.forEach(function(C){p.some(function(E){return isSamePoint(E,C)})?u.push({pos:C,line:p,type:"point"}):tinyThrottle(y[1]-e)!==0&&u.push({pos:C,line:p,type:"intersection"})})}}),!n&&find(u,function(p){return p[0]===i}))return!0;var f=0,g={};return u.forEach(function(p){var v=p.pos,y=p.type,_=p.line;if(!(v[0]>i))if(y==="intersection")++f;else{if(y==="line")return;if(y==="point"){var C=find(_,function(M){return M[1]!==e}),E=g[v[0]],k=C[1]>e?1:-1;E?E!==k&&++f:g[v[0]]=k}}}),f%2===1}function getLinearConstants(r,t){var n=r[0],i=r[1],e=t[0],a=t[1],s=e-n,o=a-i;Math.abs(s)<TINY_NUM&&(s=0),Math.abs(o)<TINY_NUM&&(o=0);var l=0,c=0,d=0;return s?o?(l=-o/s,c=1,d=-l*n-i):(c=1,d=-i):o&&(l=-1,d=n),[l,c,d]}function getIntersectionPointsByConstants(r,t){var n=r[0],i=r[1],e=r[2],a=t[0],s=t[1],o=t[2],l=n===0&&a===0,c=i===0&&s===0,d=[];if(l&&c)return[];if(l){var u=-e/i,f=-o/s;return u!==f?[]:[[-1/0,u],[1/0,u]]}else if(c){var g=-e/n,p=-o/a;return g!==p?[]:[[g,-1/0],[g,1/0]]}else if(n===0){var v=-e/i,y=-(s*v+o)/a;d=[[y,v]]}else if(a===0){var v=-o/s,y=-(i*v+e)/n;d=[[y,v]]}else if(i===0){var y=-e/n,v=-(a*y+o)/s;d=[[y,v]]}else if(s===0){var y=-o/a,v=-(n*y+e)/i;d=[[y,v]]}else{var y=(i*o-s*e)/(s*n-i*a),v=-(n*y+e)/i;d=[[y,v]]}return d.map(function(_){return[_[0],_[1]]})}function getPointsOnLines(r,t){var n=t.map(function(u){return[0,1].map(function(f){return[Math.min(u[0][f],u[1][f]),Math.max(u[0][f],u[1][f])]})}),i=[];if(r.length===2){var e=r[0],a=e[0],s=e[1];if(tinyThrottle(a-r[1][0])){if(!tinyThrottle(s-r[1][1])){var c=Math.max.apply(Math,n.map(function(u){return u[0][0]})),d=Math.min.apply(Math,n.map(function(u){return u[0][1]}));if(tinyThrottle(c-d)>0)return[];i=[[c,s],[d,s]]}}else{var o=Math.max.apply(Math,n.map(function(u){return u[1][0]})),l=Math.min.apply(Math,n.map(function(u){return u[1][1]}));if(tinyThrottle(o-l)>0)return[];i=[[a,o],[a,l]]}}return i.length||(i=r.filter(function(u){var f=u[0],g=u[1];return n.every(function(p){return 0<=tinyThrottle(f-p[0][0])&&0<=tinyThrottle(p[0][1]-f)&&0<=tinyThrottle(g-p[1][0])&&0<=tinyThrottle(p[1][1]-g)})})),i.map(function(u){return[tinyThrottle(u[0]),tinyThrottle(u[1])]})}function convertLines(r){return __spreadArrays(r.slice(1),[r[0]]).map(function(t,n){return[r[n],t]})}function getOverlapPointInfos(r,t){var n=r.slice(),i=t.slice();getShapeDirection(n)===-1&&n.reverse(),getShapeDirection(i)===-1&&i.reverse();var e=convertLines(n),a=convertLines(i),s=e.map(function(d){return getLinearConstants(d[0],d[1])}),o=a.map(function(d){return getLinearConstants(d[0],d[1])}),l=[];s.forEach(function(d,u){var f=e[u],g=[];o.forEach(function(p,v){var y=getIntersectionPointsByConstants(d,p),_=getPointsOnLines(y,[f,a[v]]);g.push.apply(g,_.map(function(C){return{index1:u,index2:v,pos:C,type:"intersection"}}))}),g.sort(function(p,v){return getDist$1(f[0],p.pos)-getDist$1(f[0],v.pos)}),l.push.apply(l,g),isInside(f[1],i)&&l.push({index1:u,index2:-1,pos:f[1],type:"inside"})}),a.forEach(function(d,u){if(isInside(d[1],n)){var f=!1,g=findIndex(l,function(p){var v=p.index2;return v===u?(f=!0,!1):!!f});g===-1&&(f=!1,g=findIndex(l,function(p){var v=p.index1,y=p.index2;return v===-1&&y+1===u?(f=!0,!1):!!f})),g===-1?l.push({index1:-1,index2:u,pos:d[1],type:"inside"}):l.splice(g,0,{index1:-1,index2:u,pos:d[1],type:"inside"})}});var c={};return l.filter(function(d){var u=d.pos,f=u[0]+"x"+u[1];return c[f]?!1:(c[f]=!0,!0)})}function getOverlapPoints(r,t){var n=getOverlapPointInfos(r,t);return n.map(function(i){var e=i.pos;return e})}function getOverlapSize(r,t){var n=getOverlapPoints(r,t);return getAreaSize(n)}function add(r,t,n,i,e,a){for(var s=0;s<e;++s){var o=n+s*e,l=i+s*e;r[o]+=r[l]*a,t[o]+=t[l]*a}}function swap(r,t,n,i,e){for(var a=0;a<e;++a){var s=n+a*e,o=i+a*e,l=r[s],c=t[s];r[s]=r[o],r[o]=l,t[s]=t[o],t[o]=c}}function divide(r,t,n,i,e){for(var a=0;a<i;++a){var s=n+a*i;r[s]/=e,t[s]/=e}}function ignoreDimension(r,t,n){n===void 0&&(n=Math.sqrt(r.length));for(var i=r.slice(),e=0;e<n;++e)i[e*n+t-1]=0,i[(t-1)*n+e]=0;return i[(t-1)*(n+1)]=1,i}function invert(r,t){t===void 0&&(t=Math.sqrt(r.length));for(var n=r.slice(),i=createIdentityMatrix(t),e=0;e<t;++e){var a=t*e+e;if(!throttle(n[a],TINY_NUM)){for(var s=e+1;s<t;++s)if(n[t*e+s]){swap(n,i,e,s,t);break}}if(!throttle(n[a],TINY_NUM))return[];divide(n,i,e,t,n[a]);for(var s=0;s<t;++s){var o=s,l=s+e*t,c=n[l];!throttle(c,TINY_NUM)||e===s||add(n,i,o,e,t,-c)}}return i}function transpose(r,t){t===void 0&&(t=Math.sqrt(r.length));for(var n=[],i=0;i<t;++i)for(var e=0;e<t;++e)n[e*t+i]=r[t*i+e];return n}function getOrigin(r,t){t===void 0&&(t=Math.sqrt(r.length));for(var n=[],i=r[t*t-1],e=0;e<t-1;++e)n[e]=r[t*(t-1)+e]/i;return n[t-1]=0,n}function fromTranslation(r,t){for(var n=createIdentityMatrix(t),i=0;i<t-1;++i)n[t*(t-1)+i]=r[i]||0;return n}function convertPositionMatrix(r,t){for(var n=r.slice(),i=r.length;i<t-1;++i)n[i]=0;return n[t-1]=1,n}function convertDimension(r,t,n){if(t===void 0&&(t=Math.sqrt(r.length)),t===n)return r;for(var i=createIdentityMatrix(n),e=Math.min(t,n),a=0;a<e-1;++a){for(var s=0;s<e-1;++s)i[a*n+s]=r[a*t+s];i[(a+1)*n-1]=r[(a+1)*t-1],i[(n-1)*n+a]=r[(t-1)*t+a]}return i[n*n-1]=r[t*t-1],i}function multiplies(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=createIdentityMatrix(r);return t.forEach(function(e){i=multiply(i,e,r)}),i}function multiply(r,t,n){n===void 0&&(n=Math.sqrt(r.length));var i=[],e=r.length/n,a=t.length/e;if(e){if(!a)return r}else return t;for(var s=0;s<n;++s)for(var o=0;o<a;++o){i[o*n+s]=0;for(var l=0;l<e;++l)i[o*n+s]+=r[l*n+s]*t[o*e+l]}return i}function plus(r,t){for(var n=Math.min(r.length,t.length),i=r.slice(),e=0;e<n;++e)i[e]=i[e]+t[e];return i}function minus(r,t){for(var n=Math.min(r.length,t.length),i=r.slice(),e=0;e<n;++e)i[e]=i[e]-t[e];return i}function convertCSStoMatrix(r,t){return t===void 0&&(t=r.length===6),t?[r[0],r[1],0,r[2],r[3],0,r[4],r[5],1]:r}function convertMatrixtoCSS(r,t){return t===void 0&&(t=r.length===9),t?[r[0],r[1],r[3],r[4],r[6],r[7]]:r}function calculate(r,t,n){n===void 0&&(n=t.length);var i=multiply(r,t,n),e=i[n-1];return i.map(function(a){return a/e})}function rotateX3d(r,t){return multiply(r,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function rotateY3d(r,t){return multiply(r,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function rotateZ3d(r,t){return multiply(r,createRotateMatrix(t,4))}function scale3d(r,t){var n=t[0],i=n===void 0?1:n,e=t[1],a=e===void 0?1:e,s=t[2],o=s===void 0?1:s;return multiply(r,[i,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function rotate(r,t){return calculate(createRotateMatrix(t,3),convertPositionMatrix(r,3))}function translate3d(r,t){var n=t[0],i=n===void 0?0:n,e=t[1],a=e===void 0?0:e,s=t[2],o=s===void 0?0:s;return multiply(r,[1,0,0,0,0,1,0,0,0,0,1,0,i,a,o,1],4)}function matrix3d(r,t){return multiply(r,t,4)}function createRotateMatrix(r,t){var n=Math.cos(r),i=Math.sin(r),e=createIdentityMatrix(t);return e[0]=n,e[1]=i,e[t]=-i,e[t+1]=n,e}function createIdentityMatrix(r){for(var t=r*r,n=[],i=0;i<t;++i)n[i]=i%(r+1)?0:1;return n}function createScaleMatrix(r,t){for(var n=createIdentityMatrix(t),i=Math.min(r.length,t-1),e=0;e<i;++e)n[(t+1)*e]=r[e];return n}function createOriginMatrix(r,t){for(var n=createIdentityMatrix(t),i=Math.min(r.length,t-1),e=0;e<i;++e)n[t*(t-1)+e]=r[e];return n}function createWarpMatrix(r,t,n,i,e,a,s,o){var l=r[0],c=r[1],d=t[0],u=t[1],f=n[0],g=n[1],p=i[0],v=i[1],y=e[0],_=e[1],C=a[0],E=a[1],k=s[0],M=s[1],L=o[0],b=o[1],S=[l,0,d,0,f,0,p,0,c,0,u,0,g,0,v,0,1,0,1,0,1,0,1,0,0,l,0,d,0,f,0,p,0,c,0,u,0,g,0,v,0,1,0,1,0,1,0,1,-y*l,-_*l,-C*d,-E*d,-k*f,-M*f,-L*p,-b*p,-y*c,-_*c,-C*u,-E*u,-k*g,-M*g,-L*v,-b*v],P=invert(S,8);if(!P.length)return[];var x=multiply(P,[y,_,C,E,k,M,L,b],8);return x[8]=1,convertDimension(transpose(x),3,4)}var __assign$2=function(){return __assign$2=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign$2.apply(this,arguments)};function createMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function parseMat(r,t){return t===void 0&&(t=0),toMat(parse(r,t))}function calculateMatrixDist(r,t){var n=calculate(r,[t[0],t[1]||0,t[2]||0,1],4),i=n[3]||1;return[n[0]/i,n[1]/i,n[2]/i]}function getDistElementMatrix(r,t){t===void 0&&(t=document.body);for(var n=r,i=createMatrix();n;){var e=getComputedStyle(n).transform;if(i=matrix3d(parseMat(e),i),n===t)break;n=n.parentElement}return i=invert(i,4),i[12]=0,i[13]=0,i[14]=0,i}function toMat(r){var t=createMatrix();return r.forEach(function(n){var i=n.matrixFunction,e=n.functionValue;i&&(t=i(t,e))}),t}function parse(r,t){t===void 0&&(t=0);var n=isArray(r)?r:splitSpace(r);return n.map(function(i){var e=splitBracket(i),a=e.prefix,s=e.value,o=null,l=a,c="";if(a==="translate"||a==="translateX"||a==="translate3d"){var d=isObject(t)?__assign$2(__assign$2({},t),{"o%":t["%"]}):{"%":t,"o%":t},u=splitComma(s).map(function(T,w){return w===0&&"x%"in d?d["%"]=t["x%"]:w===1&&"y%"in d?d["%"]=t["y%"]:d["%"]=t["o%"],convertUnitSize(T,d)}),f=u[0],g=u[1],p=g===void 0?0:g,v=u[2],y=v===void 0?0:v;o=translate3d,c=[f,p,y]}else if(a==="translateY"){var _=isObject(t)?__assign$2({"%":t["y%"]},t):{"%":t},p=convertUnitSize(s,_);o=translate3d,c=[0,p,0]}else if(a==="translateZ"){var y=parseFloat(s);o=translate3d,c=[0,0,y]}else if(a==="scale"||a==="scale3d"){var C=splitComma(s).map(function(T){return parseFloat(T)}),E=C[0],k=C[1],M=k===void 0?E:k,L=C[2],b=L===void 0?1:L;o=scale3d,c=[E,M,b]}else if(a==="scaleX"){var E=parseFloat(s);o=scale3d,c=[E,1,1]}else if(a==="scaleY"){var M=parseFloat(s);o=scale3d,c=[1,M,1]}else if(a==="scaleZ"){var b=parseFloat(s);o=scale3d,c=[1,1,b]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var S=splitUnit(s),P=S.unit,x=S.value,A=P==="rad"?x:x*Math.PI/180;a==="rotate"||a==="rotateZ"?(l="rotateZ",o=rotateZ3d):a==="rotateX"?o=rotateX3d:a==="rotateY"&&(o=rotateY3d),c=A}else if(a==="matrix3d")o=matrix3d,c=splitComma(s).map(function(T){return parseFloat(T)});else if(a==="matrix"){var D=splitComma(s).map(function(T){return parseFloat(T)});o=matrix3d,c=[D[0],D[1],0,0,D[2],D[3],0,0,0,0,1,0,D[4],D[5],0,1]}else l="";return{name:a,functionName:l,value:s,matrixFunction:o,functionValue:c}})}function hash(r){for(var t=5381,n=r.length;n;)t=t*33^r.charCodeAt(--n);return t>>>0}var stringHash=hash;function getHash(r){return stringHash(r).toString(36)}function getShadowRoot(r){if(r&&r.getRootNode){var t=r.getRootNode();if(t.nodeType===11)return t}}function replaceStyle(r,t,n){return n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(i,e){var a=e.trim();return(a?splitComma(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(r))):o?".".concat(r," ").concat(o):".".concat(r)}).join(", ")+" {"})}function injectStyle(r,t,n,i,e){var a=getDocument(i),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",r),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=replaceStyle(r,t,n),(e||a.head||a.body).appendChild(s),s}function styled(r){var t="rCS"+getHash(r);return{className:t,inject:function(n,i){i===void 0&&(i={});var e=getShadowRoot(n),a=(e||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!a)a=injectStyle(t,r,i,n,e);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,l=parseFloat(a.getAttribute("data-styled-count"))||0;l<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(l-1))}}}}}var extendStatics$1=function(r,t){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])},extendStatics$1(r,t)};function __extends$1(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics$1(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var __assign$1=function(){return __assign$1=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign$1.apply(this,arguments)};function __rest(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n}function __decorate$1(r,t,n,i){var e=arguments.length,a=e<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,t,n,i);else for(var o=r.length-1;o>=0;o--)(s=r[o])&&(a=(e<3?s(a):e>3?s(t,n,a):s(t,n))||a);return e>3&&a&&Object.defineProperty(t,n,a),a}function __spreadArray(r,t,n){if(n||arguments.length===2)for(var i=0,e=t.length,a;i<e;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return r.concat(a||Array.prototype.slice.call(t))}function getClient(r){if("touches"in r){var t=r.touches[0]||r.changedTouches[0];return{clientX:t.clientX,clientY:t.clientY}}else return{clientX:r.clientX,clientY:r.clientY}}function filterDuplicated(r){if(typeof Map>"u")return r.filter(function(n,i){return r.indexOf(n)===i});var t=new Map;return r.filter(function(n){return t.has(n)?!1:(t.set(n,!0),!0)})}function elementFromPoint(r,t,n){var i=getDocument(r);return i.elementFromPoint&&i.elementFromPoint(t,n)||null}function createElement(r,t,n){var i=r.tag,e=r.children,a=r.attributes,s=r.className,o=r.style,l=t||getDocument(n).createElement(i);for(var c in a)l.setAttribute(c,a[c]);var d=l.children;if(e.forEach(function(f,g){createElement(f,d[g],l)}),s&&s.split(" ").forEach(function(f){hasClass(l,f)||addClass(l,f)}),o){var u=l.style;for(var c in o)u[c]=o[c]}return!t&&n&&n.appendChild(l),l}function h(r,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var e=t||{},a=e.className,s=a===void 0?"":a,o=e.style,l=o===void 0?{}:o,c=__rest(e,["className","style"]);return{tag:r,className:s,style:l,attributes:c,children:n}}function diffValue(r,t,n){r!==t&&n(r,t)}function getRect(r,t,n){var i;n===void 0&&(n=r.data.boundArea);var e=r.distX,a=e===void 0?0:e,s=r.distY,o=s===void 0?0:s,l=r.data,c=l.startX,d=l.startY;if(t>0){var u=Math.sqrt((a*a+o*o)/(1+t*t)),f=t*u;a=(a>=0?1:-1)*f,o=(o>=0?1:-1)*u}var g=Math.abs(a),p=Math.abs(o),v=a<0?c-n.left:n.right-c,y=o<0?d-n.top:n.bottom-d;i=calculateBoundSize([g,p],[0,0],[v,y],!!t),g=i[0],p=i[1],a=(a>=0?1:-1)*g,o=(o>=0?1:-1)*p;var _=Math.min(0,a),C=Math.min(0,o),E=c+_,k=d+C;return{left:E,top:k,right:E+g,bottom:k+p,width:g,height:p}}function getDefaultElementRect(r){var t=r.getBoundingClientRect(),n=t.left,i=t.top,e=t.width,a=t.height;return{pos1:[n,i],pos2:[n+e,i],pos3:[n,i+a],pos4:[n+e,i+a]}}function passTargets(r,t,n){var i=diff(r,t),e=i.list,a=i.prevList,s=i.added,o=i.removed,l=i.maintained;return __spreadArray(__spreadArray(__spreadArray([],s.map(function(c){return e[c]}),!0),o.map(function(c){return a[c]}),!0),n?l.map(function(c){var d=c[1];return e[d]}):[],!0)}function getLineSize(r){for(var t=0,n=r.length,i=1;i<n;++i)t=Math.max(getDist$1(r[i],r[i-1]),t);return t}var injector=styled(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),CLASS_NAME="selecto-selection ".concat(injector.className),PROPERTIES=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],OPTIONS=__spreadArray(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],PROPERTIES,!0),EVENTS=["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll","innerScroll"],METHODS=["clickTarget","getSelectableElements","setSelectedTargets","getElementPoints","getSelectedTargets","findSelectableTargets","triggerDragStart","checkScroll","selectTargetsByPoints","setSelectedTargetsByPoints"],Selecto$2=function(r){__extends$1(t,r);function t(i){i===void 0&&(i={});var e=r.call(this)||this;e.selectedTargets=[],e.dragScroll=new DragScroll$1,e._onDragStart=function(o,l){var c=o.data,d=o.clientX,u=o.clientY,f=o.inputEvent,g=e.options,p=g.selectFromInside,v=g.selectByClick,y=g.rootContainer,_=g.boundContainer,C=g.preventDragFromInside,E=C===void 0?!0:C,k=g.clickBySelectEnd,M=g.dragCondition;if(M&&!M(o)){o.stop();return}c.data={};var L=getWindow(e.container);c.innerWidth=L.innerWidth,c.innerHeight=L.innerHeight,e.findSelectableTargets(c),c.startSelectedTargets=e.selectedTargets,c.scaleMatrix=createMatrix(),c.containerX=0,c.containerY=0;var b=e.container,S={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(y){var P=e.container.getBoundingClientRect();c.containerX=P.left,c.containerY=P.top,c.scaleMatrix=getDistElementMatrix(e.container,y)}if(_){var x=isObject(_)&&"element"in _?__assign$1({left:!0,top:!0,bottom:!0,right:!0},_):{element:_,left:!0,top:!0,bottom:!0,right:!0},A=x.element,D=void 0;if(A){isString(A)?D=getDocument(b).querySelector(A):A===!0?D=e.container:D=A;var T=D.getBoundingClientRect();x.left&&(S.left=T.left),x.top&&(S.top=T.top),x.right&&(S.right=T.right),x.bottom&&(S.bottom=T.bottom)}}c.boundArea=S;var w={left:d,top:u,right:d,bottom:u,width:0,height:0},$=[];if(!p||v&&!k){var j=e._findElement(l||f.target,c.selectableTargets);$=j?[j]:[]}var W=$.length>0,O=!p&&W;if(O&&!v)return o.stop(),!1;var I=f.type,Y=I==="mousedown"||I==="touchstart",H=!o.isClick&&Y?e.emit("dragStart",__assign$1(__assign$1({},o),{data:c.data})):!0;if(!H)return o.stop(),!1;if(e.continueSelect?($=passTargets(e.selectedTargets,$,e.continueSelectWithoutDeselect),c.startPassedTargets=e.selectedTargets):c.startPassedTargets=[],e._select($,w,o,!0),c.startX=d,c.startY=u,c.selectFlag=!1,c.preventDragFromInside=!1,f.target){var N=calculateMatrixDist(c.scaleMatrix,[d-c.containerX,u-c.containerY]);e.target.style.cssText+="position: ".concat(y?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(N[0],"px, ").concat(N[1],"px)")}if(O&&v&&!k)f.preventDefault(),E&&(e._selectEnd(c.startSelectedTargets,c.startPassedTargets,w,o),c.preventDragFromInside=!0);else{c.selectFlag=!0;var B=e.options,U=B.scrollOptions,F=B.innerScrollOptions,K=!1;if(F){for(var z=o.inputEvent,G=z.target,X=null,V=G;V&&V!==getDocument(b).body;){var q=getComputedStyle(V).overflow!=="visible";if(q){X=V;break}V=V.parentElement}X&&(c.innerScrollOptions=__assign$1({container:X,checkScrollEvent:!0},F===!0?{}:F),e.dragScroll.dragStart(o,c.innerScrollOptions),K=!0)}!K&&U&&U.container&&e.dragScroll.dragStart(o,U),k&&(c.selectFlag=!1,o.preventDrag())}return!0},e._onDrag=function(o){if(o.data.selectFlag){var l=e.scrollOptions,c=o.data.innerScrollOptions,d=c||(l==null?void 0:l.container);if(d&&!o.isScroll&&e.dragScroll.drag(o,c||l))return}e._checkSelected(o)},e._onDragEnd=function(o){var l=o.data,c=o.inputEvent,d=getRect(o,e.options.ratio),u=l.selectFlag,f=e.container;if(c&&e.emit("dragEnd",__assign$1(__assign$1({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:u},o),{data:l.data,rect:d})),e.target.style.cssText+="display: none;",u)l.selectFlag=!1,e.dragScroll.dragEnd();else if(e.selectByClick&&e.clickBySelectEnd){var g=e._findElement((c==null?void 0:c.target)||elementFromPoint(f,o.clientX,o.clientY),l.selectableTargets);e._select(g?[g]:[],d,o)}l.preventDragFromInside||e._selectEnd(l.startSelectedTargets,l.startPassedTargets,d,o)},e._onKeyDown=function(o){var l=e.options,c=!1;if(!e._keydownContinueSelect){var d=e._sameCombiKey(o,l.toggleContinueSelect);e._keydownContinueSelect=d,c||(c=d)}if(!e._keydownContinueSelectWithoutDeselection){var d=e._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);e._keydownContinueSelectWithoutDeselection=d,c||(c=d)}c&&e.emit("keydown",{keydownContinueSelect:e._keydownContinueSelect,keydownContinueSelectWithoutDeselection:e._keydownContinueSelectWithoutDeselection})},e._onKeyUp=function(o){var l=e.options,c=!1;if(e._keydownContinueSelect){var d=e._sameCombiKey(o,l.toggleContinueSelect,!0);e._keydownContinueSelect=!d,c||(c=d)}if(e._keydownContinueSelectWithoutDeselection){var d=e._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);e._keydownContinueSelectWithoutDeselection=!d,c||(c=d)}c&&e.emit("keyup",{keydownContinueSelect:e._keydownContinueSelect,keydownContinueSelectWithoutDeselection:e._keydownContinueSelectWithoutDeselection})},e._onBlur=function(){(e._keydownContinueSelect||e._keydownContinueSelectWithoutDeselection)&&(e._keydownContinueSelect=!1,e._keydownContinueSelectWithoutDeselection=!1,e.emit("keyup",{keydownContinueSelect:e._keydownContinueSelect,keydownContinueSelectWithoutDeselection:e._keydownContinueSelectWithoutDeselection}))},e._onDocumentSelectStart=function(o){var l=getDocument(e.container);if(e.gesto.isFlag()){var c=e.dragContainer;c===getWindow(e.container)&&(c=l.documentElement);var d=isNode(c)?[c]:[].slice.call(c),u=o.target;d.some(function(f){if(f===u||f.contains(u))return o.preventDefault(),!0})}},e.target=i.portalContainer;var a=i.container;e.options=__assign$1({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:getDefaultElementRect,cspNonce:"",ratio:0},i);var s=e.options.portalContainer;return s&&(a=s.parentElement),e.container=a||document.body,e.initElement(),e.initDragScroll(),e.setKeyController(),e}var n=t.prototype;return n.setSelectedTargets=function(i){var e=this.selectedTargets,a=diff(e,i),s=a.added,o=a.removed,l=a.prevList,c=a.list;return this.selectedTargets=i,{added:s.map(function(d){return c[d]}),removed:o.map(function(d){return l[d]}),beforeSelected:e,selected:i}},n.setSelectedTargetsByPoints=function(i,e){var a=Math.min(i[0],e[0]),s=Math.min(i[1],e[1]),o=Math.max(i[0],e[0]),l=Math.max(i[1],e[1]),c={left:a,top:s,right:o,bottom:l,width:o-a,height:l-s},d={ignoreClick:!0};this.findSelectableTargets(d);var u=this.hitTest(c,d),f=this.setSelectedTargets(u);return __assign$1(__assign$1({},f),{rect:c})},n.selectTargetsByPoints=function(i,e){var a=new MouseEvent("mousedown",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(a);c!==!1&&(l.onDrag(s),l.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(i){return this.gesto.triggerDragStart(i),this},n.destroy=function(){var i;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),removeEvent(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(i=this.target.parentElement)===null||i===void 0||i.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(i){var e=this.getElementRect||getDefaultElementRect,a=e(i),s=[a.pos1,a.pos2,a.pos4,a.pos3];if(e!==getDefaultElementRect){var o=i.getBoundingClientRect();return fitPoints(s,o)}return s},n.getSelectableElements=function(){var i=this.container,e=[];return this.options.selectableTargets.forEach(function(a){if(isFunction(a)){var s=a();s&&e.push.apply(e,[].slice.call(s))}else if(isNode(a))e.push(a);else if(isObject(a))e.push(a.value||a.current);else{var o=[].slice.call(getDocument(i).querySelectorAll(a));e.push.apply(e,o)}}),e},n.checkScroll=function(){if(this.gesto.isFlag()){var i=this.scrollOptions,e=this.gesto.getEventData().innerScrollOptions,a=e||(i==null?void 0:i.container);a&&this.dragScroll.checkScroll(__assign$1({inputEvent:this.gesto.getCurrentEvent()},e||i))}},n.findSelectableTargets=function(i){var e=this;i===void 0&&(i=this.gesto.getEventData());var a=this.getSelectableElements(),s=a.map(function(u){return e.getElementPoints(u)});i.selectableTargets=a,i.selectablePoints=s,i.selectableParentMap=null;var o=this.options,l=o.checkOverflow||o.innerScrollOptions,c=getDocument(this.container);if(l){var d=new Map;i.selectableInnerScrollParentMap=d,i.selectableInnerScrollPathsList=a.map(function(u,f){for(var g=u.parentElement,p=[],v=[],y=function(){var _=d.get(g);if(!_){var C=getComputedStyle(g).overflow!=="visible";if(C){var E=getDefaultElementRect(g);_={parentElement:g,indexes:[],points:[E.pos1,E.pos2,E.pos4,E.pos3],paths:__spreadArray([],v,!0)},p.push(g),p.forEach(function(k){d.set(k,_)}),p=[]}}_?(g=_.parentElement,d.get(g).indexes.push(f),v.push(g)):p.push(g),g=g.parentElement};g&&g!==c.body;)y();return v})}return o.checkOverflow||(i.selectableInners=a.map(function(){return!0})),this._refreshGroups(i),a},n.clickTarget=function(i,e){var a=getClient(i),s=a.clientX,o=a.clientY,l={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:i,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,e)&&this._onDragEnd(l),this},n.setKeyController=function(){var i=this.options,e=i.keyContainer,a=i.toggleContinueSelect,s=i.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(a||s)&&(this.keycon=new KeyController$1(e||getWindow(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setKeyEvent=function(){var i=this.options,e=i.toggleContinueSelect,a=i.toggleContinueSelectWithoutDeselect;!e&&!a||this.keycon||this.setKeyController()},n.setKeyContainer=function(i){var e=this,a=this.options;diffValue(a.keyContainer,i,function(){a.keyContainer=i,e.setKeyController()})},n.getContinueSelect=function(){var i=this.options,e=i.continueSelect,a=i.toggleContinueSelect;return!a||!this._keydownContinueSelect?e:!e},n.getContinueSelectWithoutDeselect=function(){var i=this.options,e=i.continueSelectWithoutDeselect,a=i.toggleContinueSelectWithoutDeselect;return!a||!this._keydownContinueSelectWithoutDeselection?e:!e},n.setToggleContinueSelect=function(i){var e=this,a=this.options;diffValue(a.toggleContinueSelect,i,function(){a.toggleContinueSelect=i,e.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(i){var e=this,a=this.options;diffValue(a.toggleContinueSelectWithoutDeselect,i,function(){a.toggleContinueSelectWithoutDeselect=i,e.setKeyEvent()})},n.setPreventDefault=function(i){this.gesto.options.preventDefault=i},n.setCheckInput=function(i){this.gesto.options.checkInput=i},n.initElement=function(){var i=this.container;this.target=createElement(h("div",{className:CLASS_NAME}),this.target,i);var e=this.target,a=this.options,s=a.dragContainer,o=a.checkInput,l=a.preventDefault,c=a.preventClickEventOnDragStart,d=a.preventClickEventOnDrag,u=a.preventClickEventByCondition,f=a.preventRightClick,g=f===void 0?!0:f;this.dragContainer=typeof s=="string"?[].slice.call(getDocument(i).querySelectorAll(s)):s||this.target.parentNode,this.gesto=new Gesto(this.dragContainer,{checkWindowBlur:!0,container:getWindow(i),checkInput:o,preventDefault:l,preventClickEventOnDragStart:c,preventClickEventOnDrag:d,preventClickEventByCondition:u,preventRightClick:g}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),addEvent(document,"selectstart",this._onDocumentSelectStart),this.injectResult=injector.inject(e,{nonce:this.options.cspNonce})},n.hitTest=function(i,e,a){var s=this.options,o=s.hitRate,l=s.selectByClick,c=i.left,d=i.top,u=i.right,f=i.bottom,g=e.innerGroups,p=e.innerWidth,v=e.innerHeight,y=a==null?void 0:a.clientX,_=a==null?void 0:a.clientY,C=e.ignoreClick,E=[[c,d],[u,d],[u,f],[c,f]],k=splitUnit("".concat(o)),M=function(O,I){var Y=C?!1:isInside([y,_],O);if(l&&Y)return!0;var H=getOverlapPoints(E,O);if(!H.length)return!1;var N=getAreaSize(H),B=0;if(N===0&&getAreaSize(O)===0?(B=getLineSize(O),N=getLineSize(H)):B=getAreaSize(O),k.unit==="px")return N>=k.value;var U=between(Math.round(N/B*100),0,100);return U>=Math.min(100,k.value)},L=e.selectableTargets,b=e.selectablePoints,S=e.selectableInners;if(!g)return L.filter(function(O,I){return S[I]?M(b[I],L[I]):!1});for(var P=[],x=Math.floor(c/p),A=Math.floor(u/p),D=Math.floor(d/v),T=Math.floor(f/v),w=x;w<=A;++w){var $=g[w];if($)for(var j=D;j<=T;++j){var W=$[j];W&&W.forEach(function(O){var I=b[O],Y=S[O],H=L[O];Y&&M(I)&&P.push(H)})}}return filterDuplicated(P)},n.initDragScroll=function(){var i=this;this.dragScroll.on("scrollDrag",function(e){var a=e.next;a(i.gesto.getCurrentEvent())}).on("scroll",function(e){var a=e.container,s=e.direction,o=i.gesto.getEventData().innerScrollOptions;o?i.emit("innerScroll",{container:a,direction:s}):i.emit("scroll",{container:a,direction:s})}).on("move",function(e){var a=e.offsetX,s=e.offsetY,o=e.inputEvent,l=i.gesto;if(!(!l||!l.isFlag())){var c=i.gesto.getEventData(),d=c.boundArea;c.startX-=a,c.startY-=s;var u=i.gesto.getEventData().innerScrollOptions,f=u==null?void 0:u.container,g=!1;if(f){var p=c.selectableInnerScrollParentMap,v=p.get(f);v&&(v.paths.forEach(function(y){var _=p.get(y);_.points.forEach(function(C){C[0]-=a,C[1]-=s})}),v.indexes.forEach(function(y){c.selectablePoints[y].forEach(function(_){_[0]-=a,_[1]-=s})}),g=!0)}g||c.selectablePoints.forEach(function(y){y.forEach(function(_){_[0]-=a,_[1]-=s})}),i._refreshGroups(c),d.left-=a,d.right-=a,d.top-=s,d.bottom-=s,i.gesto.scrollBy(a,s,o.inputEvent),i._checkSelected(i.gesto.getCurrentEvent())}})},n._select=function(i,e,a,s){var o=a.inputEvent,l=a.data,c=this.setSelectedTargets(i);s&&this.emit("selectStart",__assign$1(__assign$1({},c),{rect:e,inputEvent:o,data:l.data,isTrusted:a.isTrusted})),(c.added.length||c.removed.length)&&this.emit("select",__assign$1(__assign$1({},c),{rect:e,inputEvent:o,data:l.data,isTrusted:a.isTrusted}))},n._selectEnd=function(i,e,a,s){var o=s.inputEvent,l=s.isDouble,c=s.data,d=diff(i,this.selectedTargets),u=d.added,f=d.removed,g=d.prevList,p=d.list,v=diff(e,this.selectedTargets),y=v.added,_=v.removed,C=v.prevList,E=v.list,k=o&&o.type,M=k==="mousedown"||k==="touchstart";this.emit("selectEnd",{startSelected:i,beforeSelected:e,selected:this.selectedTargets,added:u.map(function(L){return p[L]}),removed:f.map(function(L){return g[L]}),afterAdded:y.map(function(L){return E[L]}),afterRemoved:_.map(function(L){return C[L]}),isDragStart:M,isClick:!!s.isClick,isDouble:!!l,rect:a,inputEvent:o,data:c.data,isTrusted:s.isTrusted})},n._checkSelected=function(i,e){e===void 0&&(e=getRect(i,this.options.ratio));var a=i.data,s=e.top,o=e.left,l=e.width,c=e.height,d=a.selectFlag,u=a.containerX,f=a.containerY,g=a.scaleMatrix,p=calculateMatrixDist(g,[o-u,s-f]),v=calculateMatrixDist(g,[l,c]),y=[];if(d){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(p[0],"px, ").concat(p[1],"px);")+"width:".concat(v[0],"px;height:").concat(v[1],"px;");var _=this.hitTest(e,a,i);y=passTargets(a.startPassedTargets,_,this.continueSelect&&this.continueSelectWithoutDeselect)}var C=this.emit("drag",__assign$1(__assign$1({},i),{data:a.data,isSelect:d,rect:e}));if(C===!1){this.target.style.cssText+="display: none;",i.stop();return}d&&this._select(y,e,i)},n._sameCombiKey=function(i,e,a){if(!e)return!1;var s=getCombi(i.inputEvent,i.key),o=[].concat(e),l=isArray(o[0])?o:[o];if(a){var c=i.key;return l.some(function(d){return d.some(function(u){return u===c})})}return l.some(function(d){return d.every(function(u){return s.indexOf(u)>-1})})},n._findElement=function(i,e){for(var a=i;a&&!(e.indexOf(a)>-1);)a=a.parentElement;return a},n._refreshGroups=function(i){var e,a=i.innerWidth,s=i.innerHeight,o=i.selectablePoints;if(this.options.checkOverflow){var l=(e=this.gesto.getEventData().innerScrollOptions)===null||e===void 0?void 0:e.container,c=i.selectableInnerScrollParentMap,d=i.selectableInnerScrollPathsList;i.selectableInners=d.map(function(g,p){var v=!1;return g.every(function(y){if(v)return!0;if(y===l)return v=!0,!0;var _=c.get(y);if(_){var C=o[p],E=_.points,k=getOverlapPoints(C,E);if(!k.length)return!1}return!0})})}if(!a||!s)i.innerGroups=null;else{var u=i.selectablePoints,f={};u.forEach(function(g,p){var v=1/0,y=-1/0,_=1/0,C=-1/0;g.forEach(function(M){var L=Math.floor(M[0]/a),b=Math.floor(M[1]/s);v=Math.min(L,v),y=Math.max(L,y),_=Math.min(b,_),C=Math.max(b,C)});for(var E=v;E<=y;++E)for(var k=_;k<=C;++k)f[E]=f[E]||{},f[E][k]=f[E][k]||[],f[E][k].push(p)}),i.innerGroups=f}},t=__decorate$1([Properties(PROPERTIES,function(i,e){var a={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},s=camelize("get ".concat(e));i[s]?a.get=function(){return this[s]()}:a.get=function(){return this.options[e]};var o=camelize("set ".concat(e));i[o]?a.set=function(c){this[o](c)}:a.set=function(c){this.options[e]=c},Object.defineProperty(i,e,a)})],t),t}(EventEmitter$1),Selecto$1$1=function(r){__extends$1(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Selecto$2);const VanillaSelecto=Selecto$1$1;var extendStatics=function(r,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])},extendStatics(r,t)};function __extends(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return __assign=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},__assign.apply(this,arguments)};function __decorate(r,t,n,i){var e=arguments.length,a=e<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,t,n,i);else for(var o=r.length-1;o>=0;o--)(s=r[o])&&(a=(e<3?s(a):e>3?s(t,n,a):s(t,n))||a);return e>3&&a&&Object.defineProperty(t,n,a),a}var REACT_EVENTS=EVENTS.map(function(r){return camelize("on ".concat(r))}),Selecto=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}var n=t.prototype;return n.render=function(){return reactExports.createElement("div",{className:CLASS_NAME,ref:ref(this,"selectionElement")})},n.componentDidMount=function(){var i=this,e=this.props,a={};OPTIONS.forEach(function(s){s in e&&(a[s]=e[s])}),this.selecto=new VanillaSelecto(__assign(__assign({},a),{portalContainer:this.selectionElement})),EVENTS.forEach(function(s,o){i.selecto.on(s,function(l){var c=i.props,d=c[REACT_EVENTS[o]]&&c[REACT_EVENTS[o]](l);d===!1&&l.stop()})})},n.componentDidUpdate=function(i){var e=this.props,a=this.selecto;PROPERTIES.forEach(function(s){i[s]!==e[s]&&(a[s]=e[s])})},n.componentWillUnmount=function(){this.selecto.destroy()},__decorate([withMethods(METHODS)],t.prototype,"selecto",void 0),t}(reactExports.PureComponent);const Selecto$1=Selecto,R=class R{static iterateLayerLink(t,n){const{layerConfigs:i}=layerManager$1;let e=i[t];if(e){n.push(e.id),e.childHeader&&R.iterateLayerLink(e.childHeader,n);let a=i[e.next];for(;a;)a.childHeader&&R.iterateLayerLink(a.childHeader,n),n.push(a.id),a=i[a.next]}}};m(R,"findPathGroupLayer",t=>{const n=new Set,{layerConfigs:i}=layerManager$1;return t.forEach(e=>{const a=i[e];a.type==="group"&&n.add(e);let s=a==null?void 0:a.pid;for(;s;){const{pid:o,id:l,type:c}=i[s];s=o,c==="group"&&n.add(l)}}),Array.from(n)}),m(R,"findTopGroupLayer",(t,n=!1)=>{const i=new Set,{layerConfigs:e}=layerManager$1;return t.forEach(a=>{var l;let s=a,o=(l=e[a])==null?void 0:l.pid;for(;o;){const{pid:c,id:d}=e[o];o=c,s=d}(n||s!==a)&&i.add(s)}),Array.from(i)}),m(R,"findAllChildLayerBySubId",(t,n=!1)=>{const i=R.findTopGroupLayer(t,n);return R.findAllChildLayer(i)}),m(R,"findAllChildLayer",(t,n=!0)=>{let i=[];const{layerConfigs:e}=layerManager$1;return t.forEach(a=>{i.push(a);let s=e[a];s.childHeader&&R.iterateLayerLink(s.childHeader,i)}),n||(i=i.filter(a=>!t.includes(a))),[...new Set(i)]}),m(R,"hasSameGroup",t=>{if(t.length<=1)return!1;const{layerConfigs:n}=layerManager$1;if(t.some(e=>n[e].type!=="group"&&!n[e].pid))return!1;const i=new Set;return t.filter(e=>n[e].type!=="group").forEach(e=>{R.findTopGroupLayer([e],!0).forEach(a=>i.add(a))}),i.size===1});let LayerUtil=R;class DesignerLeftStore{constructor(){m(this,"menu","");m(this,"setMenu",t=>this.menu=t);m(this,"designerLeftRef",null);m(this,"setDesignerLeftRef",t=>this.designerLeftRef=t);makeObservable(this,{menu:observable,setMenu:action})}}const designerLeftStore=new DesignerLeftStore;function setControlPointLineColor(r){const{targetIds:t}=eventOperateStore$1;if(t.length===0)return;const n=document.querySelectorAll(".moveable-control,.moveable-line");n&&(r?n.forEach(i=>{i.style.backgroundColor="#ff4b29"}):n.forEach(i=>{i.style.backgroundColor="#00bbffff"}))}class DesignerSelectable extends reactExports.Component{constructor(){super(...arguments);m(this,"selectorRef",React.createRef());m(this,"onSelectEnd",n=>{var f;const{selected:i}=n,{movableRef:e,setTargetIds:a}=eventOperateStore$1;if(!e)return;const s=e;if(n.isDragStart){n.inputEvent.preventDefault();const g=setTimeout(()=>{s.dragStart(n.inputEvent),clearTimeout(g)})}const{layerConfigs:o}=layerManager$1;let l=i.map(g=>g.id),c=!!((f=o[l[0]])!=null&&f.lock);if(l.length===1)n.inputEvent.shiftKey||o[l[0]].pid&&(l=LayerUtil.findAllChildLayerBySubId(l));else if(l.length>1){const g=LayerUtil.findAllChildLayerBySubId(l,!0);for(let p=0;p<g.length;p++){const v=o[g[p]];if(v.lock!==c&&v.type!=="group"){c=!1;break}}l=g.filter(p=>o[p].lock===c)}a(l);const{layerInstances:d}=layerListStore$1,{menu:u}=designerLeftStore;u==="layer-list"&&l.forEach(g=>{var p;(p=d[g])==null||p.setState({selected:!0})}),setControlPointLineColor(c)});m(this,"onDragStart",n=>{const{movableRef:i,targets:e}=eventOperateStore$1,a=i,s=n.inputEvent.target;(a.isMoveableElement(s)||e.some(o=>o===s||o.contains(s)))&&n.stop()})}componentDidMount(){const{setSelectorRef:n}=eventOperateStore$1;n(this.selectorRef.current)}render(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[this.props.children,jsxRuntimeExports.jsx(Selecto$1,{ref:this.selectorRef,dragContainer:".lc-event-container",selectableTargets:[".lc-comp-item"],hitRate:0,selectByClick:!0,selectFromInside:!1,toggleContinueSelect:["ctrl"],ratio:0,onDragStart:this.onDragStart,onSelectEnd:this.onSelectEnd})]})}}const DesignerSelectable$1=observer(DesignerSelectable),DesignerSelectable$2=Object.freeze(Object.defineProperty({__proto__:null,default:DesignerSelectable$1,setControlPointLineColor},Symbol.toStringTag,{value:"Module"}));class LayerListStore{constructor(){m(this,"layerInstances",{});m(this,"searchLayer",!1);m(this,"setSearchLayer",t=>this.searchLayer=t);m(this,"lockChange",(t,n)=>{const i=[],{layerConfigs:e}=layerManager$1,{type:a}=e[t];a==="group"?LayerUtil.findAllChildLayer([t]).forEach(s=>i.push({id:s,lock:n})):i.push({id:t,lock:n}),historyRecordOperateProxy$1.doLockUpd(i)});m(this,"selectedChange",(t,n)=>{var g;const{targetIds:i,setTargetIds:e}=eventOperateStore$1,{layerConfigs:a}=layerManager$1,{type:s,lock:o}=a[t];if(!s)return;const l=s==="group";let c=[];if(n.ctrlKey)if(i.includes(t))if(l){const p=LayerUtil.findAllChildLayer([t]);c=i.filter(v=>!p.includes(v))}else c=i.filter(p=>p!==t);else if(i.length===0)l?c=LayerUtil.findAllChildLayer([t]):c=[t];else{const p=a[i[0]].lock;o!==p?l?c=[...i,...LayerUtil.findAllChildLayer([t])].filter(v=>!a[v].lock):c=[...i,t].filter(v=>!a[v].lock):l?c=[...i,...LayerUtil.findAllChildLayer([t])]:c=[...i,t],c=[...new Set(c)]}else l?c=LayerUtil.findAllChildLayer([t]):c=[t];const d=setTimeout(()=>{e(c),clearTimeout(d)},0),u=(g=a[c[0]])==null?void 0:g.lock,f=setTimeout(()=>{setControlPointLineColor(u),clearTimeout(f)},0)});m(this,"hideChange",(t,n)=>{const i=[],{layerConfigs:e}=layerManager$1,{type:a}=e[t];a==="group"?LayerUtil.findAllChildLayer([t]).forEach(s=>i.push({id:s,hide:n})):i.push({id:t,hide:n}),historyRecordOperateProxy$1.doHideUpd(i)});makeObservable(this,{searchLayer:observable,setSearchLayer:action})}}const layerListStore=new LayerListStore,layerListStore$1=layerListStore;class EventOperateStore{constructor(){m(this,"movableRef",null);m(this,"selectorRef",null);m(this,"rulerRef",null);m(this,"dsContentRef",null);m(this,"targets",[]);m(this,"targetIds",[]);m(this,"pointerTarget",null);m(this,"groupCoordinate",{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});m(this,"backoff",!1);m(this,"addRecordCompId",null);m(this,"scale",1);m(this,"ratio",1);m(this,"setDsContentRef",t=>this.dsContentRef=t);m(this,"setRuleRef",t=>this.rulerRef=t);m(this,"setRatio",t=>this.ratio=t);m(this,"setScale",t=>this.scale=t);m(this,"setAddRecordCompId",t=>this.addRecordCompId=t);m(this,"setBackoff",t=>this.backoff=t);m(this,"setMovableRef",t=>this.movableRef=t);m(this,"setSelectorRef",t=>this.selectorRef=t);m(this,"setTargetIds",t=>{const n=[...this.targetIds];this.targetIds=t;const i=[];t.forEach(s=>{const o=document.getElementById(s);o&&i.push(o)}),this.targets=i;const{layerInstances:e}=layerListStore$1,{menu:a}=designerLeftStore;if(a==="layer-list"&&(n.forEach(s=>{const o=e[s];o&&o.setState({selected:!1})}),this.targetIds.forEach(s=>{const o=e[s];o&&o.setState({selected:!0})})),this.targets.length>1){const{calculateGroupCoordinate:s}=eventOperateStore;s(this.targets)}});m(this,"setPointerTarget",t=>this.pointerTarget=t);m(this,"setGroupCoordinate",t=>{this.groupCoordinate=ObjectUtil.merge(this.groupCoordinate,t)});m(this,"calculateGroupCoordinate",t=>{const{layerConfigs:n}=layerManager$1,i={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};t.forEach(e=>{const a=n[e.id],{x:s=0,y:o=0,width:l,height:c}=a;s<i.minX&&(i.minX=s),o<i.minY&&(i.minY=o),s+l>i.maxX&&(i.maxX=s+l),o+c>i.maxY&&(i.maxY=o+c)}),i.groupWidth=i.maxX-i.minX,i.groupHeight=i.maxY-i.minY,this.setGroupCoordinate(i)});m(this,"focusDesignerCanvas",()=>{const t=document.querySelector(".lc-ruler-content");this.setPointerTarget(t)});makeObservable(this,{targets:observable,scale:observable,setScale:action,setTargetIds:action})}}const eventOperateStore=new EventOperateStore,eventOperateStore$1=eventOperateStore;class AbstractDefinition{getEventList(){return[{id:"loaded",name:"组件加载完成时"}]}getActionList(){return[{name:"显示",id:"show",handler:t=>{t.container.style.visibility="visible"}},{name:"隐藏",id:"hide",handler:t=>{t.container.style.visibility="hidden"}},{name:"更新组件样式",id:"updateConfig",handler:(t,n)=>{t.update(n)}},{name:"更新组件数据",id:"updateData",handler:(t,n)=>{t.changeData(n)}}]}getCategorize(){return null}getSubCategorize(){return null}}class AbstractConvert{}const AllApplication=IconWrapper("all-application",!1,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M18 6H8C6.89543 6 6 6.89543 6 8V18C6 19.1046 6.89543 20 8 20H18C19.1046 20 20 19.1046 20 18V8C20 6.89543 19.1046 6 18 6Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M18 28H8C6.89543 28 6 28.8954 6 30V40C6 41.1046 6.89543 42 8 42H18C19.1046 42 20 41.1046 20 40V30C20 28.8954 19.1046 28 18 28Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M40 6H30C28.8954 6 28 6.89543 28 8V18C28 19.1046 28.8954 20 30 20H40C41.1046 20 42 19.1046 42 18V8C42 6.89543 41.1046 6 40 6Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M40 28H30C28.8954 28 28 28.8954 28 30V40C28 41.1046 28.8954 42 30 42H40C41.1046 42 42 41.1046 42 40V30C42 28.8954 41.1046 28 40 28Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}))}),Browser=IconWrapper("browser",!0,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M42 18V40C42 41.1046 41.1046 42 40 42H8C6.89543 42 6 41.1046 6 40V18",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M6 8C6 6.89543 6.89543 6 8 6H40C41.1046 6 42 6.89543 42 8V18H6V8Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z",fill:r.colors[2]}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 14C19.1046 14 20 13.1046 20 12C20 10.8954 19.1046 10 18 10C16.8954 10 16 10.8954 16 12C16 13.1046 16.8954 14 18 14Z",fill:r.colors[2]}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 14C25.1046 14 26 13.1046 26 12C26 10.8954 25.1046 10 24 10C22.8954 10 22 10.8954 22 12C22 13.1046 22.8954 14 24 14Z",fill:r.colors[2]}))}),ConnectionPoint=IconWrapper("connection-point",!1,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M5 24L43 24",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M28 4H20C18.8954 4 18 4.89543 18 6V14C18 15.1046 18.8954 16 20 16H28C29.1046 16 30 15.1046 30 14V6C30 4.89543 29.1046 4 28 4Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M16 32H8C6.89543 32 6 32.8954 6 34V42C6 43.1046 6.89543 44 8 44H16C17.1046 44 18 43.1046 18 42V34C18 32.8954 17.1046 32 16 32Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M40 32H32C30.8954 32 30 32.8954 30 34V42C30 43.1046 30.8954 44 32 44H40C41.1046 44 42 43.1046 42 42V34C42 32.8954 41.1046 32 40 32Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M24 24V16",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M36 32V24",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M12 32V24",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),Cube=IconWrapper("cube",!1,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M15.5 9L7 14V24V34L15.5 39L24 44L32.5001 39L41 34V24V14L32.5001 9L24 4L15.5 9Z",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M41 14L24 24",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M7 14L24 24",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M24 44V24",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M32 19L32 39",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M41 24L24 34",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M24 34L7 24",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M16 39L16 19",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M32 9L16 19",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M32 19L16 9",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),Fork=IconWrapper("fork",!1,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M37 12C39.2091 12 41 10.2091 41 8C41 5.79086 39.2091 4 37 4C34.7909 4 33 5.79086 33 8C33 10.2091 34.7909 12 37 12Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M11 12C13.2091 12 15 10.2091 15 8C15 5.79086 13.2091 4 11 4C8.79086 4 7 5.79086 7 8C7 10.2091 8.79086 12 11 12Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M24 44C26.2091 44 28 42.2091 28 40C28 37.7909 26.2091 36 24 36C21.7909 36 20 37.7909 20 40C20 42.2091 21.7909 44 24 44Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M11 12V15C11 22 24 25 24 32V36V32C24 25 37 22 37 15V12",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),MapDraw=IconWrapper("map-draw",!0,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M17 12L4 6V36L17 42L31 36L44 42V12L31 6L17 12Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M31 6V36",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M17 12V42",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M10.5 9L17 12L31 6L37.5 9",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M10.5 39L17 42L31 36L37.5 39",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),Monitor=IconWrapper("monitor",!0,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("rect",{x:"4",y:"10",width:"32",height:"28",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44 14L36 20.75V27.25L44 34V14Z",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M17 19L23 24L17 29",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),Other=IconWrapper("other",!1,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M22.799 4.20101L4.41421 22.5858C3.63317 23.3668 3.63316 24.6332 4.41421 25.4142L22.799 43.799C23.58 44.58 24.8464 44.58 25.6274 43.799L44.0122 25.4142C44.7932 24.6332 44.7932 23.3668 44.0122 22.5858L25.6274 4.20101C24.8464 3.41996 23.58 3.41996 22.799 4.20101Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M18 24H30",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap}),React.createElement("path",{d:"M24 18V30",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap}))}),PieThree=IconWrapper("pie-three",!0,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("circle",{cx:"24",cy:"24",r:"20",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M24 4C27.9021 4 31.719 5.14149 34.9805 7.28385C38.2419 9.42621 40.8054 12.4758 42.3551 16.057C43.9048 19.6382 44.3731 23.5946 43.7022 27.4386C43.0313 31.2826 41.2506 34.8464 38.5794 37.6909L24 24V4Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),Platte=IconWrapper("platte",!0,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M24 44C29.9601 44 26.3359 35.136 30 31C33.1264 27.4709 44 29.0856 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M28 17C29.6569 17 31 15.6569 31 14C31 12.3431 29.6569 11 28 11C26.3431 11 25 12.3431 25 14C25 15.6569 26.3431 17 28 17Z",fill:r.colors[3],stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M16 21C17.6569 21 19 19.6569 19 18C19 16.3431 17.6569 15 16 15C14.3431 15 13 16.3431 13 18C13 19.6569 14.3431 21 16 21Z",fill:r.colors[3],stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M17 34C18.6569 34 20 32.6569 20 31C20 29.3431 18.6569 28 17 28C15.3431 28 14 29.3431 14 31C14 32.6569 15.3431 34 17 34Z",fill:r.colors[3],stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}))}),Ring=IconWrapper("ring",!1,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("path",{d:"M24.0004 11.619C26.0933 11.619 27.7899 9.91347 27.7899 7.80952C27.7899 5.70558 26.0933 4 24.0004 4C21.9075 4 20.2109 5.70558 20.2109 7.80952C20.2109 9.91347 21.9075 11.619 24.0004 11.619Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M9.78947 40.1906C11.8823 40.1906 13.5789 38.485 13.5789 36.3811C13.5789 34.2771 11.8823 32.5715 9.78947 32.5715C7.69661 32.5715 6 34.2771 6 36.3811C6 38.485 7.69661 40.1906 9.78947 40.1906Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M38.2104 40.1906C40.3032 40.1906 41.9998 38.485 41.9998 36.3811C41.9998 34.2771 40.3032 32.5715 38.2104 32.5715C36.1175 32.5715 34.4209 34.2771 34.4209 36.3811C34.4209 38.485 36.1175 40.1906 38.2104 40.1906Z",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M33.1426 10.3142C38.444 13.4629 41.9999 19.2664 41.9999 25.9048C41.9999 26.4816 41.9731 27.0522 41.9206 27.6152V27.6152",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M31.014 42.575C28.8585 43.4926 26.4883 44.0001 24.0001 44.0001C21.512 44.0001 19.1418 43.4926 16.9863 42.575",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M6.07936 27.6152C6.02685 27.0522 6 26.4816 6 25.9048C6 19.2664 9.5559 13.4629 14.8573 10.3142",stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),Text=IconWrapper("text",!0,function(r){return React.createElement("svg",{width:r.size,height:r.size,viewBox:"0 0 48 48",fill:"none"},React.createElement("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",fill:r.colors[1],stroke:r.colors[0],strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M16 19V16H32V19",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M22 34H26",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}),React.createElement("path",{d:"M24 18L24 34",stroke:r.colors[2],strokeWidth:r.strokeWidth,strokeLinecap:r.strokeLinecap,strokeLinejoin:r.strokeLinejoin}))}),componentCategorize=[{key:"all",name:"所有",icon:AllApplication},{key:"chart",name:"图表",icon:PieThree},{key:"info",name:"信息",icon:Text},{key:"map",name:"地图",icon:MapDraw},{key:"ornament",name:"装饰",icon:Platte},{key:"model",name:"模型",icon:Cube},{key:"media",name:"媒体",icon:Monitor},{key:"web",name:"web元素",icon:Browser},{key:"other",name:"其他",icon:Other}],componentSubCategorize=[{key:"all",name:"所有"},{key:"bar",name:"条形图",parentKey:"chart"},{key:"column",name:"柱状图",parentKey:"chart"},{key:"line",name:"折线图",parentKey:"chart"},{key:"pie",name:"饼图",parentKey:"chart"},{key:"scatter",name:"散点图",parentKey:"chart"},{key:"wordCloud",name:"词云图",parentKey:"chart"},{key:"area",name:"面积图",parentKey:"chart"},{key:"radar",name:"雷达图",parentKey:"chart"},{key:"funnel",name:"漏斗图",parentKey:"chart"},{key:"progress",name:"进度图",parentKey:"chart"},{key:"rose",name:"玫瑰图",parentKey:"chart"},{key:"radial",name:"玉珏图",parentKey:"chart"}];class AbstractDesignerLoader{constructor(){m(this,"definitionMap",{});m(this,"convertMap",{})}async load(t,n){await this.scanComponents(),this.initProject(t,n)}async scanComponents(){const t=Object.assign({"../../comps/antd-common/AntdBaseDesignerController.ts":()=>__vitePreload(()=>import("./AntdBaseDesignerController-Z7rB5vgE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),"../../comps/antd-common/AntdCommonDefinition.ts":()=>__vitePreload(()=>import("./AntdCommonDefinition-bXSiCGS1.js"),__vite__mapDeps([13,4,2,3,7,6,8,9,10,11])),"../../comps/antd-common/AntdCommonUtil.ts":()=>__vitePreload(()=>import("./AntdCommonUtil-n1O0a4X_.js"),__vite__mapDeps([])),"../../comps/antd-common/area/AbstractAreaDefinition.ts":()=>__vitePreload(()=>import("./AbstractAreaDefinition-jMduEzlY.js"),__vite__mapDeps([14,2,3,15,16,6,17,18,19,20,21,22,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd-common/area/AntdCommonAreaController.ts":()=>__vitePreload(()=>import("./AntdCommonAreaController-Qg5cN-ns.js"),__vite__mapDeps([22,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd-common/bar/AbstractBarDefinition.ts":()=>__vitePreload(()=>import("./AbstractBarDefinition-9xVnl7P8.js"),__vite__mapDeps([24,2,3,15,16,6,17,18,19,20,21,25,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd-common/bar/AntdCommonBarController.ts":()=>__vitePreload(()=>import("./AntdCommonBarController-GrIfX0OD.js"),__vite__mapDeps([25,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd-common/column/AbstractColumnDefinition.ts":()=>__vitePreload(()=>import("./AbstractColumnDefinition-n2_eyHvV.js"),__vite__mapDeps([26,2,3,15,16,6,17,18,19,20,21,27,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd-common/column/AntdCommonColumnController.ts":()=>__vitePreload(()=>import("./AntdCommonColumnController-YNmmrZKz.js"),__vite__mapDeps([27,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd-common/line/AbstractLineDefinition.ts":()=>__vitePreload(()=>import("./AbstractLineDefinition-Tu-dMEnG.js"),__vite__mapDeps([28,2,3,15,16,6,17,18,19,20,21,29,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd-common/line/AntdCommonLineController.ts":()=>__vitePreload(()=>import("./AntdCommonLineController-F_QffSYN.js"),__vite__mapDeps([29,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd-common/rose/AbstractRoseDefinition.ts":()=>__vitePreload(()=>import("./AbstractRoseDefinition-mQTSbO6D.js"),__vite__mapDeps([30,2,3,15,16,6,17,18,19,20,21,31,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd-common/rose/AntdCommonRoseController.ts":()=>__vitePreload(()=>import("./AntdCommonRoseController-p3G2StLB.js"),__vite__mapDeps([31,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd-common/scatter/AbstractScatterDefinition.ts":()=>__vitePreload(()=>import("./AbstractScatterDefinition-Wda8Od84.js"),__vite__mapDeps([32,2,3,15,16,6,17,18,19,20,21,33,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd-common/scatter/AntdCommonScatterController.ts":()=>__vitePreload(()=>import("./AntdCommonScatterController-aktbq6Ax.js"),__vite__mapDeps([33,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd-common/types.ts":()=>__vitePreload(()=>import("./a-map.d-ZoqbeivK.js").then(n=>n.t),__vite__mapDeps([])),"../../comps/antd/area-base/AntdBaseAreaDefinition.ts":()=>__vitePreload(()=>import("./AntdBaseAreaDefinition-uGBJRGNt.js"),__vite__mapDeps([34,2,3,14,15,16,6,17,18,19,20,21,22,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/area-percent/AntdPercentAreaDefinition.ts":()=>__vitePreload(()=>import("./AntdPercentAreaDefinition-BFScL62H.js"),__vite__mapDeps([35,14,2,3,15,16,6,17,18,19,20,21,22,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/area-stack/AntdStackAreaDefinition.ts":()=>__vitePreload(()=>import("./AntdStackAreaDefinition-mX5dK66U.js"),__vite__mapDeps([36,14,2,3,15,16,6,17,18,19,20,21,22,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/bar-base/AntdBaseBarDefinition.ts":()=>__vitePreload(()=>import("./AntdBaseBarDefinition-zd7WifDs.js"),__vite__mapDeps([37,24,2,3,15,16,6,17,18,19,20,21,25,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/bar-group/AntdGroupBarDefinition.ts":()=>__vitePreload(()=>import("./AntdGroupBarDefinition-Mcu8QbrI.js"),__vite__mapDeps([38,24,2,3,15,16,6,17,18,19,20,21,25,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/bar-percent/AntdPercentBarDefinition.ts":()=>__vitePreload(()=>import("./AntdPercentBarDefinition-rUZd1ytQ.js"),__vite__mapDeps([39,24,2,3,15,16,6,17,18,19,20,21,25,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/bar-range/AntdRangeBarDefinition.ts":()=>__vitePreload(()=>import("./AntdRangeBarDefinition-Wd_rJpsi.js"),__vite__mapDeps([40,24,2,3,15,16,6,17,18,19,20,21,25,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/bar-stack/AntdStackBarDefinition.ts":()=>__vitePreload(()=>import("./AntdStackBarDefinition-w2zYIDbE.js"),__vite__mapDeps([41,24,2,3,15,16,6,17,18,19,20,21,25,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/column-base/AntdBaseColumnDefinition.ts":()=>__vitePreload(()=>import("./AntdBaseColumnDefinition-SPYK2J7G.js"),__vite__mapDeps([42,26,2,3,15,16,6,17,18,19,20,21,27,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/column-group/AntdGroupColumnDefinition.ts":()=>__vitePreload(()=>import("./AntdGroupColumnDefinition-OB69hIt3.js"),__vite__mapDeps([43,26,2,3,15,16,6,17,18,19,20,21,27,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/column-percent/AntdPercentColumnDefinition.ts":()=>__vitePreload(()=>import("./AntdPercentColumnDefinition-UhBM-H4v.js"),__vite__mapDeps([44,26,2,3,15,16,6,17,18,19,20,21,27,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/column-range/AntdRangeColumnDefinition.ts":()=>__vitePreload(()=>import("./AntdRangeColumnDefinition-Dw4BG2z_.js"),__vite__mapDeps([45,26,2,3,15,16,6,17,18,19,20,21,27,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/column-stack/AntdStackColumnDefinition.ts":()=>__vitePreload(()=>import("./AntdStackColumnDefinition-m-4uKGH8.js"),__vite__mapDeps([46,26,2,3,15,16,6,17,18,19,20,21,27,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/g2plot-custom/G2PlotCustomController.ts":()=>__vitePreload(()=>import("./G2PlotCustomController-KkDx3udp.js"),__vite__mapDeps([47,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/g2plot-custom/G2PlotCustomDefinition.ts":()=>__vitePreload(()=>import("./G2PlotCustomDefinition-UJw4FS8o.js"),__vite__mapDeps([48,2,3,47,23,0,1,4,5,6,7,8,9,10,11,12,13,16,17,20])),"../../comps/antd/gauge/AntdGaugeController.ts":()=>__vitePreload(()=>import("./AntdGaugeController-Lw3PQ6G3.js"),__vite__mapDeps([49,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/gauge/AntdGaugeDefinition.ts":()=>__vitePreload(()=>import("./AntdGaugeDefinition-DcPUkVtb.js"),__vite__mapDeps([50,2,3,49,23,0,1,4,5,6,7,8,9,10,11,12,51,16,17,20,19,21])),"../../comps/antd/line-base/AntdBaseLineDefinition.ts":()=>__vitePreload(()=>import("./AntdBaseLineDefinition-bk7ue9bH.js"),__vite__mapDeps([52,28,2,3,15,16,6,17,18,19,20,21,29,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/line-multi/AntdMultiLineDefinition.ts":()=>__vitePreload(()=>import("./AntdMultiLineDefinition-6FXyUD-_.js"),__vite__mapDeps([53,28,2,3,15,16,6,17,18,19,20,21,29,23,0,1,4,5,7,8,9,10,11,12,13,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70])),"../../comps/antd/line-step/AntdStepLineDefinition.ts":()=>__vitePreload(()=>import("./AntdStepLineDefinition-rJGUzZ65.js"),__vite__mapDeps([71,28,2,3,15,16,6,17,18,19,20,21,29,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/liquid/AntdLiquidController.ts":()=>__vitePreload(()=>import("./AntdLiquidController-uQFir5Vx.js"),__vite__mapDeps([72,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/liquid/AntdLiquidDefinition.ts":()=>__vitePreload(()=>import("./AntdLiquidDefinition-AcpjEVki.js"),__vite__mapDeps([73,2,3,72,23,0,1,4,5,6,7,8,9,10,11,12,51,16,17,20,19,21])),"../../comps/antd/pie/AntdPieController.ts":()=>__vitePreload(()=>import("./AntdPieController-C9Por1aK.js"),__vite__mapDeps([74,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/pie/AntdPieDefinition.ts":()=>__vitePreload(()=>import("./AntdPieDefinition-Yej7Ro2r.js"),__vite__mapDeps([75,2,3,15,16,6,17,18,19,20,21,74,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/radar/AntdRadarController.ts":()=>__vitePreload(()=>import("./AntdRadarController-jG0FEN98.js"),__vite__mapDeps([76,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/radar/AntdRadarDefinition.ts":()=>__vitePreload(()=>import("./AntdRadarDefinition--mpySBQA.js"),__vite__mapDeps([77,2,3,15,16,6,17,18,19,20,21,76,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/radial-bar-base/AntdBaseRadialBarController.ts":()=>__vitePreload(()=>import("./AntdBaseRadialBarController-hIfvxxy2.js"),__vite__mapDeps([78,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/radial-bar-base/AntdBaseRadialBarDefinition.ts":()=>__vitePreload(()=>import("./AntdBaseRadialBarDefinition-bcTwxSQ9.js"),__vite__mapDeps([79,2,3,15,16,6,17,18,19,20,21,78,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/ring-progress/AntdRingProgressController.ts":()=>__vitePreload(()=>import("./AntdRingProgressController-L0XkoX7s.js"),__vite__mapDeps([80,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/ring-progress/AntdRingProgressDefinition.ts":()=>__vitePreload(()=>import("./AntdRingProgressDefinition-oFB7rctG.js"),__vite__mapDeps([81,2,3,15,16,6,17,18,19,20,21,80,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/rose-base/AntdBaseRoseDefinition.ts":()=>__vitePreload(()=>import("./AntdBaseRoseDefinition-iD4Ot_oW.js"),__vite__mapDeps([82,30,2,3,15,16,6,17,18,19,20,21,31,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/rose-group/AntdGroupRoseDefinition.ts":()=>__vitePreload(()=>import("./AntdGroupRoseDefinition-ICnlJq4z.js"),__vite__mapDeps([83,30,2,3,15,16,6,17,18,19,20,21,31,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/rose-stack/AntdStackRoseDefinition.ts":()=>__vitePreload(()=>import("./AntdStackRoseDefinition-qnz1PdAf.js"),__vite__mapDeps([84,30,2,3,15,16,6,17,18,19,20,21,31,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/scatter-bubble/AntdScatterBubbleDefinition.ts":()=>__vitePreload(()=>import("./AntdScatterBubbleDefinition-9U8tyKnb.js"),__vite__mapDeps([85,32,2,3,15,16,6,17,18,19,20,21,33,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/scatter-point/AntdScatterPointDefinition.ts":()=>__vitePreload(()=>import("./AntdScatterPointDefinition-1-zmdqbl.js"),__vite__mapDeps([86,32,2,3,15,16,6,17,18,19,20,21,33,23,0,1,4,5,7,8,9,10,11,12,13])),"../../comps/antd/word-cloud/AntdWordCloudController.ts":()=>__vitePreload(()=>import("./AntdWordCloudController-ksu-nBD9.js"),__vite__mapDeps([87,23,2,3,0,1,4,5,6,7,8,9,10,11,12])),"../../comps/antd/word-cloud/AntdWordCloudDefinition.ts":()=>__vitePreload(()=>import("./AntdWordCloudDefinition-S5hmoLgt.js"),__vite__mapDeps([88,87,23,2,3,0,1,4,5,6,7,8,9,10,11,12,70,54,51,16,17,20,19,21,18])),"../../comps/common-component/CommonTypes.ts":()=>__vitePreload(()=>import("./a-map.d-ZoqbeivK.js").then(n=>n.C),__vite__mapDeps([])),"../../comps/common-component/base-info/BaseInfoStore.ts":()=>__vitePreload(()=>import("./BaseInfoStore-AycIuJ-7.js"),__vite__mapDeps([89,4,2,3,7,6,8,9,10,11])),"../../comps/group-layer/GroupLayerController.ts":()=>__vitePreload(()=>import("./FontGlobal-OJzIEJBO.js").then(n=>n.G),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12])),"../../comps/group-layer/GroupLayerDefinition.ts":()=>__vitePreload(()=>import("./GroupLayerDefinition-K57oB72m.js"),__vite__mapDeps([90,2,3,16,6,4,7,8,9,10,11])),"../../comps/lc/base-color-block/BaseColorBlockController.ts":()=>__vitePreload(()=>import("./BaseColorBlockController-g8s0Ytlq.js"),__vite__mapDeps([91,1,2,3,4,5,6,7,8,9,10,11,12])),"../../comps/lc/base-color-block/BaseColorBlockDefinition.ts":()=>__vitePreload(()=>import("./BaseColorBlockDefinition-dDshIrJw.js"),__vite__mapDeps([92,2,3,91,1,4,5,6,7,8,9,10,11,12,54,51,16,17,20,19,21])),"../../comps/lc/base-iframe/BaseIframeController.ts":()=>__vitePreload(()=>import("./BaseIframeController-Qd8QFyrT.js"),__vite__mapDeps([93,1,2,3,4,5,6,7,8,9,10,11,12])),"../../comps/lc/base-iframe/BaseIframeDefinition.ts":()=>__vitePreload(()=>import("./BaseIframeDefinition-VIE-klG7.js"),__vite__mapDeps([94,2,3,93,1,4,5,6,7,8,9,10,11,12,54,51,16,17,20,19,21])),"../../comps/lc/base-image/BaseImageController.ts":()=>__vitePreload(()=>import("./BaseImageController-N-3Ii5wq.js"),__vite__mapDeps([95,1,2,3,4,5,6,7,8,9,10,11,12])),"../../comps/lc/base-image/BaseImageConvert.ts":()=>__vitePreload(()=>import("./BaseImageConvert-VdjE_tmJ.js"),__vite__mapDeps([96,8,2,3,7,9,10,11,4,6])),"../../comps/lc/base-image/BaseImageDefinition.ts":()=>__vitePreload(()=>import("./BaseImageDefinition-AQ1LhvuQ.js"),__vite__mapDeps([97,2,3,95,1,4,5,6,7,8,9,10,11,12,54,51,16,17,20,19,21])),"../../comps/lc/base-table/BaseTableController.ts":()=>__vitePreload(()=>import("./BaseTableController-tiM1yocU.js"),__vite__mapDeps([98,1,2,3,4,5,6,7,8,9,10,11,12,99])),"../../comps/lc/base-table/BaseTableDefinition.ts":()=>__vitePreload(()=>import("./BaseTableDefinition-55Nb7VpM.js"),__vite__mapDeps([100,98,1,2,3,4,5,6,7,8,9,10,11,12,99,54,51,16,17,20,19,21])),"../../comps/lc/base-text/BaseTextController.ts":()=>__vitePreload(()=>import("./BaseTextController-TslpSv0A.js"),__vite__mapDeps([101,8,2,3,7,9,10,11,1,4,5,6,12,102])),"../../comps/lc/base-text/BaseTextDefinition.ts":()=>__vitePreload(()=>import("./BaseTextDefinition-LSJr92Zw.js"),__vite__mapDeps([103,2,3,101,8,7,9,10,11,1,4,5,6,12,102,54,104,51,16,17,20,19,21])),"../../comps/lc/base-video/BaseVideoController.ts":()=>__vitePreload(()=>import("./BaseVideoController-cS0UX6SU.js"),__vite__mapDeps([105,1,2,3,4,5,6,7,8,9,10,11,12])),"../../comps/lc/base-video/BaseVideoDefinition.ts":()=>__vitePreload(()=>import("./BaseVideoDefinition-BzItdEqY.js"),__vite__mapDeps([106,2,3,105,1,4,5,6,7,8,9,10,11,12,54,51,16,17,20,19,21])),"../../comps/lc/carousel/CarouselController.ts":()=>__vitePreload(()=>import("./CarouselController-4uEPPu-7.js").then(n=>n.a),__vite__mapDeps([107,1,2,3,4,5,6,7,8,9,10,11,12,108,60,109])),"../../comps/lc/carousel/CarouselDefinition.ts":()=>__vitePreload(()=>import("./CarouselDefinition-xHPFhYP_.js"),__vite__mapDeps([110,107,1,2,3,4,5,6,7,8,9,10,11,12,108,60,109,54,51,16,17,20,19,21])),"../../comps/lc/date-time/DateTimeController.ts":()=>__vitePreload(()=>import("./DateTimeController-SeCh5EKp.js").then(n=>n.a),__vite__mapDeps([111,1,2,3,4,5,6,7,8,9,10,11,12,112])),"../../comps/lc/date-time/DateTimeDefinition.ts":()=>__vitePreload(()=>import("./DateTimeDefinition-_xX0T7Vv.js"),__vite__mapDeps([113,111,1,2,3,4,5,6,7,8,9,10,11,12,112,54,104,51,16,17,20,19,21])),"../../comps/lc/digital-flipper/DigitalFlipperController.ts":()=>__vitePreload(()=>import("./DigitalFlipperController-LoBUFVdx.js"),__vite__mapDeps([114,1,2,3,4,5,6,7,8,9,10,11,12])),"../../comps/lc/digital-flipper/DigitalFlipperDefinition.ts":()=>__vitePreload(()=>import("./DigitalFlipperDefinition-JEx9exC5.js"),__vite__mapDeps([115,114,1,2,3,4,5,6,7,8,9,10,11,12,54,104,51,16,17,20,19,21])),"../../comps/lc/four-angle-glow-border/FourAngleGlowBorderController.ts":()=>__vitePreload(()=>import("./FourAngleGlowBorderController-7Ovl_1rI.js"),__vite__mapDeps([116,1,2,3,4,5,6,7,8,9,10,11,12,117])),"../../comps/lc/four-angle-glow-border/FourAngleGlowBorderDefinition.ts":()=>__vitePreload(()=>import("./FourAngleGlowBorderDefinition-dgye7lFV.js"),__vite__mapDeps([118,2,3,116,1,4,5,6,7,8,9,10,11,12,117,54,51,16,17,20,19,21])),"../../comps/lc/text-scroller/TextScrollerController.ts":()=>__vitePreload(()=>import("./TextScrollerController-xrydkaiD.js"),__vite__mapDeps([119,1,2,3,4,5,6,7,8,9,10,11,12,120])),"../../comps/lc/text-scroller/TextScrollerDefinition.ts":()=>__vitePreload(()=>import("./TextScrollerDefinition-dD-rjYC0.js"),__vite__mapDeps([121,119,1,2,3,4,5,6,7,8,9,10,11,12,120,54,51,16,17,20,19,21])),"../../comps/map/AMapController.ts":()=>__vitePreload(()=>import("./AMapController-Lh25vXZj.js"),__vite__mapDeps([122,2,3,123,124,9,10,11,125,1,4,5,6,7,8,12,126])),"../../comps/map/AMapDefinition.ts":()=>__vitePreload(()=>import("./AMapDefinition-2za4bpbY.js"),__vite__mapDeps([127,2,3,122,123,124,9,10,11,125,1,4,5,6,7,8,12,126,54,51,16,17,20,19,21])),"../../comps/map/AMapScaleObserver.ts":()=>__vitePreload(()=>import("./AMapScaleObserver-CbK9Z4xK.js"),__vite__mapDeps([123,124])),"../../comps/map/MapLoader.ts":()=>__vitePreload(()=>import("./MapLoader-vz3ubJEQ.js"),__vite__mapDeps([125,2,3,9,10,11])),"../../comps/map/a-map.d.ts":()=>__vitePreload(()=>import("./a-map.d-ZoqbeivK.js").then(n=>n.a),__vite__mapDeps([]))});for(const n of Object.keys(t)){const i=await t[n](),e=i==null?void 0:i.default;if(e&&AbstractDefinition.isPrototypeOf(e)){const a=new e;if(typeof a.getBaseInfo=="function"){const s=a.getBaseInfo().compKey;s&&(this.definitionMap[s]=a)}if(typeof a.getCategorize=="function"){const s=a.getCategorize();if(s)if(s.icon)componentCategorize.push(s);else{console.error("自定义组件的分类必须指定icon");continue}}if(typeof a.getSubCategorize=="function"){const s=a.getSubCategorize();if(s)if(s.parentKey)componentCategorize.push(s);else{console.error("自定义组件的子类型必须指定parentKey");continue}}}else if(e&&AbstractConvert.isPrototypeOf(e)){const a=new e,s=a.getKey();this.convertMap[s]=a}}}}class AbstractManager{}class CanvasManager extends AbstractManager{constructor(){super();m(this,"canvasVisible",!1);m(this,"setCanvasVisible",n=>this.canvasVisible=n);m(this,"canvasConfig",{rasterize:!1,dragStep:1,resizeStep:1,width:1920,height:1080,adaptationType:"scale"});m(this,"updateCanvasConfig",n=>this.canvasConfig={...this.canvasConfig,...n});m(this,"getData",()=>toJS(this.canvasConfig));m(this,"destroy",()=>{runInAction(()=>{this.canvasConfig={}})});makeObservable(this,{canvasVisible:observable,canvasConfig:observable,setCanvasVisible:action,updateCanvasConfig:action})}init(n){runInAction(()=>{this.canvasConfig=n?{...this.canvasConfig,...n}:this.canvasConfig})}}const canvasHdStore=new CanvasManager;class ThemeManager extends AbstractManager{constructor(){super();m(this,"themeVisible",!1);m(this,"setThemeVisible",n=>this.themeVisible=n);m(this,"themeConfig",[{id:"0",name:"科技风格(默认主题)",colors:{main:"#00dfff",mainText:"#62edff",subText:"#4ca4b1",background:"#00dfff33",supplementFirst:"#38929f",supplementSecond:"#1790a2"}}]);m(this,"updateThemeConfig",n=>this.themeConfig=n);makeObservable(this,{themeVisible:observable,setThemeVisible:action,themeConfig:observable,updateThemeConfig:action})}destroy(){}getData(){return this.themeConfig}init(n){this.themeConfig=n||this.themeConfig}}const themeHdStore=new ThemeManager;class AbstractController{constructor(){m(this,"instance",null);m(this,"config",null);m(this,"container",null)}destroy(){this.instance=null,this.config=null,this.container=null}}var AnchorPointType=(r=>(r[r.INPUT=0]="INPUT",r[r.OUTPUT=1]="OUTPUT",r))(AnchorPointType||{});class AbstractBPNodeController extends AbstractController{constructor(t){super(),t&&(this.config=t)}}class ComponentUtil{static async createAndRender(t,n,i){if(!t)throw new Error("create react node failed, container is null");return new Promise(e=>{try{createRoot(t).render(reactExports.createElement(n,{ref:a=>e(a),...i}))}catch(a){console.error("create react node failed ",a),e(null)}})}}const nodeIconMap=new Map;nodeIconMap.set("CodeSandboxOutlined",ConnectionPoint);nodeIconMap.set("BranchesOutlined",Fork);nodeIconMap.set("FunctionOutlined",Ring);class BPNode extends React.PureComponent{render(){const{icon:t,name:n,input:i=[],output:e=[],titleBgColor:a="#247057"}=this.props,s=[...e,...i],o=nodeIconMap.get(t)||ConnectionPoint;return jsxRuntimeExports.jsxs("div",{className:"bp-node",children:[jsxRuntimeExports.jsxs("div",{className:"bp-node-header",style:{backgroundColor:a},children:[jsxRuntimeExports.jsxs("div",{className:"bp-node-icon",children:[jsxRuntimeExports.jsx(o,{})," "]}),jsxRuntimeExports.jsx("div",{className:"bp-node-title",children:n})]}),jsxRuntimeExports.jsx("div",{className:"bp-node-body",children:s.map((l,c)=>{const{id:d,name:u,type:f}=l;return jsxRuntimeExports.jsxs("div",{className:`bp-node-ap ${f===AnchorPointType.INPUT?"node-ap-input":"node-ap-output"}`,children:[jsxRuntimeExports.jsx("div",{className:"bp-node-ap-circle",children:jsxRuntimeExports.jsx("span",{id:d,className:`ap-circle ${f===AnchorPointType.INPUT?"ap-circle-input":"ap-circle-output"}`})}),jsxRuntimeExports.jsx("div",{className:"bg-node-ap-label",children:u})]},c)})})]})}}class BPLayerNodeController extends AbstractBPNodeController{async create(t,n){this.config=n,this.container=t,this.instance=await ComponentUtil.createAndRender(t,BPNode,n)}execute(t,n,i){const{nodeId:e,apId:a,anchorType:s}=t;if(s===AnchorPointType.INPUT){const{compController:o,layerConfigs:l}=layerManager$1,c=o[e];if(!c)return;const{type:d}=l[e],{definitionMap:u}=DesignerLoaderFactory.getLoader(DesignerMode.VIEW),g=u[d].getActionList().find(p=>p.id===a);if(!g)return;g.handler(c,i)}}getConfig(){return this.config}update(t,n){}getNodeInfo(t){const{layerConfigs:n}=layerManager$1,i=n[t],{definitionMap:e}=DesignerLoaderFactory.getLoader(DesignerMode.EDIT),a=e[i.type].getEventList().map(o=>({id:t+":"+o.id+":"+AnchorPointType.OUTPUT,name:o.name,type:AnchorPointType.OUTPUT})),s=e[i.type].getActionList().map(o=>({id:t+":"+o.id+":"+AnchorPointType.INPUT,name:o.name,type:AnchorPointType.INPUT}));return{id:t,name:i.name,icon:"CodeSandboxOutlined",type:"layer-node",titleBgColor:"#247057",input:s,output:a}}getConfigComponent(){return null}}const MonacoEditor$1=React.lazy(()=>__vitePreload(()=>import("./MonacoEditor-btR9Umqm.js").then(r=>r.a),__vite__mapDeps([128,2,3,129]))),ConditionNodeConfig=r=>{const{controller:t}=r,i=(t==null?void 0:t.getConfig()).handler||`function handler(data) { 
 
 }`,e=lodashExports.debounce(a=>{a&&(t==null||t.update({handler:a}))},500);return jsxRuntimeExports.jsx("div",{className:"condition-node-config",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Loading,{}),children:jsxRuntimeExports.jsx(MonacoEditor$1,{value:i,onChange:e,height:400,language:"javascript"})})})};class BPConditionNodeController extends AbstractBPNodeController{constructor(){super(...arguments);m(this,"handler",null)}async create(t,n){this.config=n,this.container=t,this.instance=await ComponentUtil.createAndRender(t,BPNode,n)}execute(executeInfo,executor,params){var t;const{nodeId,anchorType}=executeInfo;if(anchorType===1)return;if(!this.handler){if(!((t=this.config)!=null&&t.handler))return;try{this.handler=eval(`(${this.config.handler})`)}catch(n){console.error("解析条件函数错误，请检查你写条件判断函数");return}}const result=this.handler(params);if(result){const n=nodeId+":satisfy:"+AnchorPointType.OUTPUT;executor.execute(n,executor,params)}else{const n=nodeId+":unSatisfy:"+AnchorPointType.OUTPUT;executor.execute(n,executor,params)}}getConfig(){return this.config}update(t,n){this.config=ObjectUtil.merge(this.config,t)}getNodeInfo(t){return{id:t,name:"条件判断",titleBgColor:"#247ba6",type:"condition-node",icon:"BranchesOutlined",input:[{id:t+":judge:"+AnchorPointType.INPUT,name:"判断",type:AnchorPointType.INPUT}],output:[{id:t+":satisfy:"+AnchorPointType.OUTPUT,name:"满足",type:AnchorPointType.OUTPUT},{id:t+":unSatisfy:"+AnchorPointType.OUTPUT,name:"不满足",type:AnchorPointType.OUTPUT}]}}getConfigComponent(){return ConditionNodeConfig}}const MonacoEditor=reactExports.lazy(()=>__vitePreload(()=>import("./MonacoEditor-btR9Umqm.js").then(r=>r.a),__vite__mapDeps([128,2,3,129]))),LogicalProcessNodeConfig=r=>{const{controller:t}=r,i=(t==null?void 0:t.getConfig()).handler||`function handle(data) { 
 
 }`,e=lodashExports.debounce(a=>{a&&(t==null||t.update({handler:a}))},500);return jsxRuntimeExports.jsx("div",{className:"logical-process-node-config",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Loading,{}),children:jsxRuntimeExports.jsx(MonacoEditor,{value:i,onChange:e,height:400,language:"javascript"})})})};class BPLogicalProcessNodeController extends AbstractBPNodeController{constructor(){super(...arguments);m(this,"handler",null)}async create(t,n){this.config=n,this.container=t,this.instance=await ComponentUtil.createAndRender(t,BPNode,n)}execute(executeInfo,executor,params){var t;const{nodeId}=executeInfo;if(!this.handler){if(!((t=this.config)!=null&&t.handler))return;try{this.handler=eval(`(${this.config.handler})`)}catch(n){console.error("解析条件函数错误，请检查你写条件判断函数");return}}const newParams=this.handler(params)||params,apId=nodeId+":afterExecute:"+AnchorPointType.OUTPUT;executor.execute(apId,executor,newParams)}getConfig(){return this.config}update(t,n){this.config=ObjectUtil.merge(this.config,t)}getNodeInfo(t){return{id:t,name:"逻辑处理",titleBgColor:"#a62469",type:"logical-process-node",icon:"FunctionOutlined",input:[{id:t+":execute:"+AnchorPointType.INPUT,name:"执行",type:AnchorPointType.INPUT}],output:[{id:t+":afterExecute:"+AnchorPointType.OUTPUT,name:"执行后",type:AnchorPointType.OUTPUT}]}}getConfigComponent(){return LogicalProcessNodeConfig}}const bpNodeControllerMap=new Map;bpNodeControllerMap.set("layer-node",BPLayerNodeController);bpNodeControllerMap.set("condition-node",BPConditionNodeController);bpNodeControllerMap.set("logical-process-node",BPLogicalProcessNodeController);class BPLeftStore{constructor(){m(this,"activeMenu","layer");m(this,"usedLayerNodes",{});m(this,"searchValue","");m(this,"setSearchValue",t=>this.searchValue=t);m(this,"setActiveMenu",t=>this.activeMenu=t);m(this,"setUsedLayerNodes",(t,n)=>this.usedLayerNodes[t]=n);m(this,"initUsedLayerNodes",t=>this.usedLayerNodes=t);makeObservable(this,{activeMenu:observable,setActiveMenu:action,usedLayerNodes:observable,setUsedLayerNodes:action,searchValue:observable,setSearchValue:action})}}const bpLeftStore=new BPLeftStore;class BluePrintManager extends AbstractManager{constructor(){super();m(this,"bpAPMap",{});m(this,"bpLines",{});m(this,"bpAPLineMap",{});m(this,"bpNodeLayoutMap",{});m(this,"bpNodeControllerInsMap",{});m(this,"bpNodeConfigMap",{});m(this,"selectedNodes",[]);m(this,"selectedLines",[]);m(this,"bpMovableRef",null);m(this,"bpSelectRef",null);m(this,"upCtx",null);m(this,"downCtx",null);m(this,"nodeContainerRef",null);m(this,"bpDragContentRef",null);m(this,"canvasOffset",{x:320,y:50});m(this,"canvasTranslate",{x:0,y:0});m(this,"canvasScale",1);m(this,"setBpDragContentRef",n=>this.bpDragContentRef=n);m(this,"getAllNodeConfig",()=>{if(!this.bpNodeLayoutMap)return{};const n=Object.keys(this.bpNodeLayoutMap);if(Object.keys(this.bpNodeControllerInsMap).length>0){const i={};return n.forEach(e=>{i[e]=this.bpNodeControllerInsMap[e].getConfig()}),i}else return this.bpNodeConfigMap});m(this,"addBPNodeLayout",n=>{this.bpNodeLayoutMap[n.id]=n});m(this,"updBpNodeLayout",n=>{const i=this.bpNodeLayoutMap[n.id];i&&ObjectUtil.merge(i,n)});m(this,"setSelectedLines",n=>{this.selectedLines=n});m(this,"addAPLineMap",(n,i)=>{this.bpAPLineMap[n]||(this.bpAPLineMap[n]=[]),this.bpAPLineMap[n].push(i)});m(this,"delAPLineMap",(n,i)=>{if(this.bpAPLineMap[n]){const e=this.bpAPLineMap[n].indexOf(i);e!==-1&&this.bpAPLineMap[n].splice(e,1),this.bpAPLineMap[n].length===0&&delete this.bpAPLineMap[n]}});m(this,"delAPMap",(n,i)=>{if(this.bpAPMap[n]){const e=this.bpAPMap[n].indexOf(i);e!==-1&&this.bpAPMap[n].splice(e,1),this.bpAPMap[n].length===0&&delete this.bpAPMap[n]}});m(this,"updLinePos",n=>{const i=this.bpLines[n.id];i&&(i.startPoint=n.startPoint,i.endPoint=n.endPoint)});m(this,"addAPMap",(n,i)=>{this.bpAPMap[n]||(this.bpAPMap[n]=[]),this.bpAPMap[n].push(i)});m(this,"addLine",n=>{this.bpLines[n.id]=n});m(this,"setCanvasScale",n=>{this.canvasScale=n});m(this,"setCanvasTranslate",n=>{n&&(this.canvasTranslate=n)});m(this,"setSelectedNodes",n=>{this.selectedNodes=n});m(this,"setBpMovableRef",n=>{this.bpMovableRef=n});m(this,"setBpSelectRef",n=>{this.bpSelectRef=n});m(this,"setUpCtx",n=>{this.upCtx=n});m(this,"setDownCtx",n=>{this.downCtx=n});m(this,"setNodeContainerRef",n=>{this.nodeContainerRef=n});m(this,"delNode",n=>{!n||n.length===0||(n.forEach(i=>{let e=this.bpNodeControllerInsMap[i];if(!e){const a=Object.values(this.bpNodeLayoutMap);Object.keys(this.bpNodeControllerInsMap).length===0&&a.length!==0&&a.forEach(s=>{const o=bpNodeControllerMap.get(s.type),l=this.bpNodeConfigMap[s.id];o&&(this.bpNodeControllerInsMap[s.id]=new o(l))}),e=this.bpNodeControllerInsMap[i]}if(e){const a=e.getConfig();[...a.input,...a.output].forEach(o=>{const{id:l}=o;if(l in this.bpAPMap&&delete this.bpAPMap[l],l in this.bpAPLineMap){const c=this.bpAPLineMap[l];this.delLine([...c]),delete this.bpAPLineMap[l]}})}delete this.bpNodeConfigMap[i],delete this.bpNodeLayoutMap[i],delete this.bpNodeControllerInsMap[i]}),this.setSelectedNodes([]))});m(this,"delLine",n=>{!n||n.length===0||(n.forEach(i=>{const e=this.bpLines[i];e&&this.delAPMap(e.startAnchorId,e.endAnchorId),delete this.bpLines[i],this.delAPLineMap(e.startAnchorId,i),this.delAPLineMap(e.endAnchorId,i)}),this.setSelectedLines([]))});makeObservable(this,{selectedNodes:observable,bpNodeLayoutMap:observable,canvasScale:observable,setSelectedNodes:action,addBPNodeLayout:action,updBpNodeLayout:action,setCanvasScale:action})}init(n,i){runInAction(()=>{if(this.bpAPMap=n.bpAPMap||{},this.bpLines=n.bpLines||{},this.bpAPLineMap=n.bpAPLineMap||{},this.bpNodeConfigMap=n.bpNodeConfigMap||{},i===DesignerMode.EDIT){this.bpNodeLayoutMap=n.bpNodeLayoutMap||{};const{initUsedLayerNodes:e}=bpLeftStore,a={};Object.keys((n==null?void 0:n.bpNodeLayoutMap)||{}).forEach(s=>{a[s]=!0}),e(a)}else{const e={};Object.values(n==null?void 0:n.bpNodeLayoutMap).forEach(a=>{const{type:s,id:o}=a,l=bpNodeControllerMap.get(s),c=n==null?void 0:n.bpNodeConfigMap[o];e[o]=new l(c)}),this.bpNodeControllerInsMap=e}})}getData(){return{bpAPMap:this.bpAPMap,bpLines:this.bpLines,bpAPLineMap:this.bpAPLineMap,bpNodeConfigMap:this.getAllNodeConfig(),bpNodeLayoutMap:this.bpNodeLayoutMap}}destroy(){this.bpAPMap={},this.bpLines={},this.bpAPLineMap={},this.bpNodeLayoutMap={},this.bpNodeControllerInsMap={},this.bpNodeConfigMap={}}}const bluePrintManager=new BluePrintManager;class FilterManager extends AbstractManager{constructor(){super();m(this,"filters",{});m(this,"editFilter",{id:"",name:"",func:""});m(this,"visible",!1);m(this,"setEditFilter",n=>this.editFilter=n);m(this,"setVisibility",n=>{this.visible=n,n||(this.editFilter={id:"",name:"",func:""})});m(this,"addFilter",n=>{n.id=IdGenerate.generateId(),this.filters[n.id]=n});m(this,"delFilter",n=>delete this.filters[n]);m(this,"updateFilter",n=>this.filters[n.id]=n);makeObservable(this,{filters:observable,visible:observable,addFilter:action,delFilter:action,updateFilter:action,setVisibility:action})}init(n){this.filters=n.filters||{}}getData(){return{filters:toJS(this.filters)}}destroy(){this.filters={}}}const filterManager=new FilterManager;class DesignerManager extends AbstractManager{constructor(){super();m(this,"loaded",!1);m(this,"setLoaded",n=>this.loaded=n);makeObservable(this,{loaded:observable,setLoaded:action})}destroy(){canvasHdStore.destroy(),layerManager$1.destroy(),themeHdStore.destroy(),bluePrintManager.destroy()}getData(){return{canvasManager:canvasHdStore.getData(),themeManager:themeHdStore.getData(),layerManager:layerManager$1.getData(),bluePrintManager:bluePrintManager.getData(),filterManager:filterManager.getData()}}init(n,i){n.canvasManager&&canvasHdStore.init(n.canvasManager),n.themeManager&&themeHdStore.init(n.themeManager),n.layerManager&&layerManager$1.init(n.layerManager),n.bluePrintManager&&bluePrintManager.init(n.bluePrintManager,i),n.filterManager&&filterManager.init(n.filterManager)}}const designerManager=new DesignerManager;class EditorDesignerLoader extends AbstractDesignerLoader{initProject(t,n){operatorMap[n].getProjectData(t).then(i=>{var e,a;i?(designerManager.init(i,DesignerMode.EDIT),designerManager.setLoaded(!0)):(a=(e=globalMessage)==null?void 0:e.messageApi)==null||a.error("项目不存在")})}}const editorDesignerLoader=new EditorDesignerLoader,editorDesignerLoader$1=editorDesignerLoader;class ViewDesignerLoader extends AbstractDesignerLoader{initProject(t,n){operatorMap[n].getProjectData(t).then(i=>{var e,a;i?(designerManager.init(i,DesignerMode.VIEW),designerManager.setLoaded(!0)):(a=(e=globalMessage)==null?void 0:e.messageApi)==null||a.error("项目不存在")})}}const viewDesignerLoader=new ViewDesignerLoader,loaderMap=new Map;loaderMap.set(DesignerMode.EDIT,editorDesignerLoader$1);loaderMap.set(DesignerMode.VIEW,viewDesignerLoader);class DesignerLoaderFactory{static getLoader(t){return t&&loaderMap.has(t)?loaderMap.get(t):editorDesignerLoader$1}}const DesignerLoaderFactory$1=Object.freeze(Object.defineProperty({__proto__:null,default:DesignerLoaderFactory},Symbol.toStringTag,{value:"Module"}));class RightStore{constructor(){m(this,"activeElem",{});m(this,"menus",[]);m(this,"activeMenu","");m(this,"visible",!1);m(this,"setActiveMenu",t=>this.activeMenu=t);m(this,"setContentVisible",t=>this.visible=t);m(this,"activeConfig",(t,n)=>{var i,e;if(!t||!n){this.activeMenu="",this.activeElem={},this.menus=[],this.visible&&(this.visible=!1);return}if(this.menus=((e=(i=DesignerLoaderFactory.getLoader(DesignerMode.EDIT))==null?void 0:i.definitionMap[n])==null?void 0:e.getMenuList())||[],this.menus.length>0){let a=!0;for(let s=0;s<this.menus.length;s++)if(this.menus[s].key===this.activeMenu){a=!1;break}a&&this.visible&&(this.activeMenu=this.menus[0].key)}if(this.activeElem={id:t,type:n},this.visible){this.visible=!1;const a=setTimeout(()=>{runInAction(()=>this.visible=!0),clearTimeout(a)},0)}});makeObservable(this,{menus:observable,activeMenu:observable,visible:observable,setActiveMenu:action,setContentVisible:action,activeConfig:action})}}const rightStore=new RightStore;class HistoryRecordOperateProxy{doDrag(t){const{layerConfigs:n,updateLayer:i}=layerManager$1,e=[];let a,s;if(t.length===1){const l=n[t[0].id];a={ids:[t[0].id],x:l.x,y:l.y};const{id:c,x:d=0,y:u=0}=t[0];s={ids:[c],x:d,y:u}}else{const l=[];t.forEach(f=>e.push(f.id)),e.forEach(f=>l.push(n[f]));let c=1/0,d=1/0;l.forEach(f=>{f.x<c&&(c=f.x),f.y<d&&(d=f.y)}),a={ids:e,x:c,y:d};const{groupCoordinate:u}=eventOperateStore$1;s={ids:e,x:u.minX,y:u.minY}}const o={type:OperateType.DRAG,prev:a,next:s};i(t,!1),historyOperator.put({actions:[o]})}doResize(t,n){const{layerConfigs:i,updateLayer:e}=layerManager$1,a=[];let s,o;if(t.length===1){const{width:c=0,height:d=0}=i[t[0].id];s={ids:[t[0].id],width:c,height:d,direction:n};const{id:u}=t[0];o={ids:[u],width:t[0].width,height:t[0].height,direction:n}}else{const c=[];t.forEach(_=>a.push(_.id)),a.forEach(_=>c.push(i[_]));let d=1/0,u=1/0,f=-1/0,g=-1/0;c.forEach(_=>{const{x:C=0,y:E=0}=_;C<d&&(d=C),E<u&&(u=E),C+_.width>f&&(f=C+_.width),E+_.height>g&&(g=E+_.height)});const p=f-d,v=g-u;s={ids:a,width:p,height:v,direction:n};const{groupCoordinate:y}=eventOperateStore$1;o={ids:a,width:y.groupWidth,height:y.groupHeight,direction:n}}const l={type:OperateType.RESIZE,prev:s,next:o};e(t,!1),historyOperator.put({actions:[l]})}doAdd(t){const n=[],i=[],e=[],a=[],{layerConfigs:s,updateLayer:o}=layerManager$1;if(!layerManager$1.layerHeader)n.push({layerHeader:void 0,layerTail:void 0}),layerManager$1.layerHeader=t.id,layerManager$1.layerTail=t.id;else{n.push({layerHeader:layerManager$1.layerHeader});const d=s[layerManager$1.layerHeader];e.push({id:d.id,prev:d.prev}),d.prev=t.id,t.next=d.id,layerManager$1.layerHeader=t.id,a.push({id:d.id,prev:t.id})}i.push({id:t.id,layerConfig:lodashExports.cloneDeep(t),layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail});const{addRecordCompId:l,setAddRecordCompId:c}=eventOperateStore$1;l&&l===t.id&&(historyOperator.put({actions:[{type:OperateType.ADD,prev:n,next:i},{type:OperateType.UPDATE_LAYER,prev:e,next:a}]}),c(null)),s[t.id+""]=t,o(a)}doDelete(){let{targetIds:t,setTargetIds:n}=eventOperateStore$1;if(t.length===0)return;const{setContentVisible:i,activeConfig:e,activeElem:a}=rightStore;t.includes(a.id)&&(i(!1),e(null,""));const{delItem:s,layerConfigs:o,compController:l}=layerManager$1,c=[],d=[],u=[],f=[],g=new Set;t.forEach(v=>{const y=o[v];if(g.add(v),y.next&&g.add(y.next),y.prev&&g.add(y.prev),y.pid){const _=o[y.pid];_.childHeader===v&&g.add(_.id),_.childTail===v&&g.add(_.id)}});const p=Array.from(g).filter(v=>!t.includes(v));t.forEach(v=>{const y=o[v],_=l[v]&&l[v].getConfig();c.push({id:v,layerConfig:lodashExports.cloneDeep(y),elemConfig:_})}),u.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),p.forEach(v=>{const y=o[v],{next:_,prev:C,childHeader:E,childTail:k,pid:M}=y;u.push({id:v,next:_,prev:C,childHeader:E,childTail:k,pid:M})}),runInAction(()=>{t.forEach(v=>{const y=o[v],_=o[y.prev],C=o[y.next];if(y.id===layerManager$1.layerHeader&&(layerManager$1.layerHeader=y.next),y.id===layerManager$1.layerTail&&(layerManager$1.layerTail=y.prev),_&&(_.next=y==null?void 0:y.next),C&&(C.prev=y==null?void 0:y.prev),y.pid){const E=o[y.pid];E.childHeader===v&&(E.childHeader=y==null?void 0:y.next),E.childTail===v&&(E.childTail=y==null?void 0:y.prev)}}),s(t)}),p.forEach(v=>{const y=o[v],{next:_,prev:C,childHeader:E,childTail:k,pid:M}=y;f.push({id:v,next:_,prev:C,childHeader:E,childTail:k,pid:M})}),d.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),historyOperator.put({actions:[{type:OperateType.DEL,prev:c,next:d},{type:OperateType.UPDATE_LAYER,prev:u,next:f}]}),n([]),eventOperateStore$1==null||eventOperateStore$1.focusDesignerCanvas()}doCopy(t){if(t.length===0)return[];const n=[],i=[],e=[],a=[],s={},o=[],l=[],c=new Set;if(t.forEach(d=>{const u=layerManager$1.layerConfigs[d];if(c.add(d),u.prev&&c.add(u.prev),u.pid){const f=layerManager$1.layerConfigs[u.pid];f&&(c.add(f.id),c.add(f.childHeader))}}),e.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),c.forEach(d=>{const u=layerManager$1.layerConfigs[d],{prev:f,next:g,childHeader:p,childTail:v,pid:y}=u;e.push({id:d,prev:f,next:g,childHeader:p,childTail:v,pid:y})}),runInAction(()=>{const{layerConfigs:d,compController:u,elemConfigs:f}=layerManager$1;t.forEach(g=>{const p=d[g],v=lodashExports.cloneDeep(p);v.id=IdGenerate.generateId(),v.prev=void 0,v.next=void 0,v.type!=="group"&&(v.x=v.x+10,v.y=v.y+10),d[v.id]=v,s[g]=v.id;const y=u[p.id];if(y){const _=lodashExports.cloneDeep(y.getConfig());_.base.id=v.id,f[v.id]=_}l.push(v.id),o.push(v)}),t.forEach(g=>{const p=d[g],v=d[s[g]];if(p.type==="group"&&(v.childHeader=s[p.childHeader],v.childTail=s[p.childTail]),p.pid)if(p.pid&&t.includes(p.pid))v.prev=s[p.prev],v.next=s[p.next],v.pid=s[p.pid];else{const y=d[p.prev];v.prev=y==null?void 0:y.id,v.next=p==null?void 0:p.id,p&&(p.prev=v.id),y&&(y.next=v.id);const _=d[p.pid];_.childHeader===p.id&&(_.childHeader=v.id)}else{const y=d[p.prev];v.prev=y==null?void 0:y.id,v.next=p==null?void 0:p.id,p&&(p.prev=v.id),y&&(y.next=v.id),p.id===layerManager$1.layerHeader&&(layerManager$1.layerHeader=v.id)}})}),a.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),c.forEach(d=>{const u=layerManager$1.layerConfigs[d],{prev:f,next:g,childHeader:p,childTail:v,pid:y}=u;a.push({id:d,prev:f,next:g,childHeader:p,childTail:v,pid:y})}),l.forEach(d=>{const u=layerManager$1.layerConfigs[d],f=layerManager$1.elemConfigs[d];u.type==="group"?i.push({id:d,layerConfig:lodashExports.cloneDeep(u)}):i.push({id:d,layerConfig:lodashExports.cloneDeep(u),elemConfig:f})}),historyOperator.put({actions:[{type:OperateType.ADD,prev:n,next:i},{type:OperateType.UPDATE_LAYER,prev:e,next:a}]}),o.length>1){const{groupCoordinate:d,setGroupCoordinate:u}=eventOperateStore$1;u({minX:d.minX+10,minY:d.minY+10})}return l}doHideUpd(t){const n=[],i=[],{layerConfigs:e,updateLayer:a}=layerManager$1;t.forEach(d=>{const{id:u,hide:f}=d;i.push({id:u,hide:f});const g=e[u];n.push({id:u,hide:g.hide})});const s={type:OperateType.HIDE,prev:n,next:i};historyOperator.put({actions:[s]}),a(t);const{setTargetIds:o}=eventOperateStore$1;o([]);const{layerInstances:l}=layerListStore$1,{menu:c}=designerLeftStore;c==="layer-list"&&t.forEach(d=>{var u;(u=l[d.id])==null||u.setState({hide:d.hide,selected:!1})})}doLockUpd(t){const n=[],i=[],{layerConfigs:e,updateLayer:a}=layerManager$1;t.forEach(c=>{const{id:d,lock:u}=c;i.push({id:d,lock:u});const f=e[d];n.push({id:d,lock:f.lock})});const s={type:OperateType.LOCK,prev:n,next:i};historyOperator.put({actions:[s]}),a(t);const{layerInstances:o}=layerListStore$1,{menu:l}=designerLeftStore;l==="layer-list"&&t.forEach(c=>{var d;(d=o[c.id])==null||d.setState({lock:c.lock})})}canMoveUp(t){const{layerConfigs:n}=layerManager$1,i={};t.forEach(e=>{const a=n[e];if(a.pid){const s=n[a.pid];s.childHeader&&(i[s.childHeader]?i[s.childHeader].push(e):i[s.childHeader]=[e])}else i[layerManager$1.layerHeader]?i[layerManager$1.layerHeader].push(e):i[layerManager$1.layerHeader]=[e]});for(const[e,a]of Object.entries(i))if(a.includes(e)){let s=1,o=n[e];for(;o.next&&(o=n[o.next],t.includes(o.id));)s++;s>=a.length&&(t=t.filter(l=>!a.includes(l)))}return t.length!==0}canMoveDown(t){const{layerConfigs:n}=layerManager$1,i={};t.forEach(e=>{const a=n[e];if(a.pid){const s=n[a.pid];s.childTail&&(i[s.childTail]?i[s.childTail].push(e):i[s.childTail]=[e])}else i[layerManager$1.layerTail]?i[layerManager$1.layerTail].push(e):i[layerManager$1.layerTail]=[e]});for(const[e,a]of Object.entries(i))if(a.includes(e)){let s=1,o=n[e];for(;o.prev&&(o=n[o.prev],t.includes(o.id));)s++;s>=a.length&&(t=t.filter(l=>!a.includes(l)))}return t.length!==0}doLayerToTop(){let{targetIds:t}=eventOperateStore$1;if(t.length===0||!this.canMoveUp(t))return;const{layerConfigs:n}=layerManager$1,i=[],e=[];let a=t.filter(o=>{const l=n[o];return!l.pid||l.pid&&!t.includes(l.pid)});const s=new Set;s.add(layerManager$1.layerHeader),a.forEach(o=>{const l=n[o];s.add(o),l.next&&s.add(l.next),l.prev&&s.add(l.prev),l.pid&&s.add(l.pid)}),i.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),s.forEach(o=>{const{prev:l,next:c,childHeader:d,childTail:u}=n[o];i.push({id:o,prev:l,next:c,childHeader:d,childTail:u})}),a=a.sort((o,l)=>{const c=n[o],d=n[l];return c.order-d.order}),runInAction(()=>{for(let o=0;o<a.length;o++){const l=a[o],c=n[l],d=n[c.prev],u=n[c.next];if(c.pid){const f=n[c.pid];if(f.childHeader===l)continue;const g=n[f.childHeader];c.prev=void 0,c.next=f==null?void 0:f.childHeader,d&&(d.next=u==null?void 0:u.id),u&&(u.prev=d==null?void 0:d.id),g&&(g.prev=l),f.childHeader=l,l===f.childTail&&(f.childTail=d==null?void 0:d.id)}else{if(layerManager$1.layerHeader===l)continue;c.prev=void 0,c.next=layerManager$1.layerHeader,d&&(d.next=u==null?void 0:u.id),u&&(u.prev=d==null?void 0:d.id);const f=n[layerManager$1.layerHeader];f&&(f.prev=l),layerManager$1.layerHeader=l,l===layerManager$1.layerTail&&(layerManager$1.layerTail=d==null?void 0:d.id)}}}),e.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),s.forEach(o=>{const{prev:l,next:c,childHeader:d,childTail:u}=n[o];e.push({id:o,prev:l,next:c,childHeader:d,childTail:u})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:i,next:e}]}),layerManager$1.reRenderLayer()}doLayerToBottom(){const{targetIds:t}=eventOperateStore$1;if(t.length===0||!this.canMoveDown(t))return;const n=[],i=[],{layerConfigs:e}=layerManager$1;let a=t.filter(o=>{const l=e[o];return!l.pid||l.pid&&!t.includes(l.pid)});const s=new Set;s.add(layerManager$1.layerTail),a.forEach(o=>{const l=e[o];s.add(o),l.next&&s.add(l.next),l.prev&&s.add(l.prev),l.pid&&s.add(l.pid)}),n.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),s.forEach(o=>{const{prev:l,next:c,childHeader:d,childTail:u}=e[o];n.push({id:o,prev:l,next:c,childHeader:d,childTail:u})}),a=a.sort((o,l)=>{const c=e[o];return e[l].order-c.order}),runInAction(()=>{for(let o=0;o<a.length;o++){const l=a[o],c=e[l],d=e[c.prev],u=e[c.next];if(c.pid){const f=e[c.pid];if(l===f.childTail)continue;const g=e[f.childTail];c.prev=f.childTail,c.next=void 0,d&&(d.next=u==null?void 0:u.id),u&&(u.prev=d==null?void 0:d.id),g&&(g.next=l),f.childTail=l,l===f.childHeader&&(f.childHeader=u==null?void 0:u.id)}else{if(layerManager$1.layerTail===l)continue;c.prev=layerManager$1.layerTail,c.next=void 0,d&&(d.next=u==null?void 0:u.id),u&&(u.prev=d==null?void 0:d.id);const f=e[layerManager$1.layerTail];f&&(f.next=l),layerManager$1.layerTail=l,l===layerManager$1.layerHeader&&(layerManager$1.layerHeader=u==null?void 0:u.id)}}}),i.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),s.forEach(o=>{const{prev:l,next:c,childHeader:d,childTail:u}=e[o];i.push({id:o,prev:l,next:c,childHeader:d,childTail:u})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:n,next:i}]}),layerManager$1.reRenderLayer()}doLayerMoveUp(){let{targetIds:t}=eventOperateStore$1;if(t.length===0||!this.canMoveUp(t))return;const{layerConfigs:n}=layerManager$1,i=[],e=[],a=new Set;t.forEach(s=>{const o=n[s],l=n[o.prev];a.add(s),o&&o.next&&a.add(o.next),o&&o.prev&&a.add(o.prev),l&&l.prev&&a.add(l.prev)}),t=t.sort((s,o)=>{const l=n[s];return n[o].order-l.order}),i.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),a.forEach(s=>{const o=n[s],{childTail:l,childHeader:c}=o;i.push({id:s,prev:o.prev,next:o.next,childHeader:c,childTail:l})}),runInAction(()=>{t.forEach(s=>{const o=n[s],l=n[o.prev],c=n[l==null?void 0:l.prev],d=n[o.next];if(o.pid){const u=n[o.pid];s!==u.childHeader&&(o.prev===u.childHeader&&(u.childHeader=s),s===u.childTail&&(u.childTail=o.prev),o.prev=c==null?void 0:c.id,o.next=l==null?void 0:l.id,l&&(l.prev=o.id,l.next=d==null?void 0:d.id),c&&(c.next=o.id),d&&(d.prev=l==null?void 0:l.id))}else s!==layerManager$1.layerHeader&&(o.prev===layerManager$1.layerHeader&&(layerManager$1.layerHeader=s),s===layerManager$1.layerTail&&(layerManager$1.layerTail=o.prev),o.prev=c==null?void 0:c.id,o.next=l==null?void 0:l.id,l&&(l.prev=o.id,l.next=d==null?void 0:d.id),c&&(c.next=o.id),d&&(d.prev=l==null?void 0:l.id))})}),e.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),a.forEach(s=>{const o=n[s],{childTail:l,childHeader:c}=o;e.push({id:s,prev:o.prev,next:o.next,childHeader:c,childTail:l})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:i,next:e}]}),layerManager$1.reRenderLayer()}doLayerMoveDown(){let{targetIds:t}=eventOperateStore$1;if(t.length===0||!this.canMoveDown(t))return;const{layerConfigs:n}=layerManager$1,i=[],e=[],a=new Set;t.forEach(s=>{const o=n[s],l=n[o.next];a.add(s),o&&o.next&&a.add(o.next),o&&o.prev&&a.add(o.prev),l&&l.next&&a.add(l.next)}),t=t.sort((s,o)=>{const l=n[s],c=n[o];return l.order-c.order}),i.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),a.forEach(s=>{const o=n[s],{childTail:l,childHeader:c}=o;i.push({id:s,prev:o.prev,next:o.next,childHeader:c,childTail:l})}),runInAction(()=>{t.forEach(s=>{const o=n[s],l=n[o.prev],c=n[o.next],d=n[c==null?void 0:c.next];if(o.pid){const u=n[o.pid];s!==u.childTail&&(o.next===u.childTail&&(u.childTail=s),s===u.childHeader&&(u.childHeader=o.next),o.prev=c==null?void 0:c.id,o.next=d==null?void 0:d.id,c&&(c.prev=l==null?void 0:l.id,c.next=o.id),l&&(l.next=c==null?void 0:c.id),d&&(d.prev=o==null?void 0:o.id))}else s!==layerManager$1.layerTail&&(o.next===layerManager$1.layerTail&&(layerManager$1.layerTail=s),s===layerManager$1.layerHeader&&(layerManager$1.layerHeader=o.next),o.prev=c==null?void 0:c.id,o.next=d==null?void 0:d.id,c&&(c.prev=l==null?void 0:l.id,c.next=o.id),l&&(l.next=c==null?void 0:c.id),d&&(d.prev=o==null?void 0:o.id))})}),e.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),a.forEach(s=>{const o=n[s],{childTail:l,childHeader:c}=o;e.push({id:s,prev:o.prev,next:o.next,childHeader:c,childTail:l})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:i,next:e}]}),layerManager$1.reRenderLayer()}doStyleUpd(t,n){const{activeElem:{id:i}}=rightStore,e={type:OperateType.UPD_STYLE,prev:{id:i,data:n},next:{id:i,data:t}};historyOperator.put({actions:[e]})}doGrouping(){const{targetIds:t,setTargetIds:n}=eventOperateStore$1;if(!t||t.length<=1||LayerUtil.hasSameGroup(t))return;let i=LayerUtil.findTopGroupLayer(t,!0);const{layerConfigs:e,addItem:a}=layerManager$1,s=IdGenerate.generateId();let o=e[i[0]].lock;for(let _=1;_<i.length;_++)if(o!==e[i[_]].lock){o=!1;break}const l={id:s,type:"group",name:"新建分组",hide:!1,lock:o},c=new Set;c.add(layerManager$1.layerHeader),i.forEach(_=>{const C=e[_];c.add(_),C.next&&c.add(C.next),C.prev&&c.add(C.prev)});const d=[],u=[],f=[];d.push({layerHeader:layerManager$1.layerHeader}),c.forEach(_=>{const C=e[_];d.push({id:_,pid:C.pid,prev:C.prev,next:C.next})});let g="",p="";runInAction(()=>{i=i.sort((_,C)=>{const E=e[_],k=e[C];return E.order-k.order}),i.forEach(_=>{const C=e[_],E=e[C.prev],k=e[C.next];if(layerManager$1.layerHeader===_&&(layerManager$1.layerHeader=C.next),layerManager$1.layerTail===_&&(layerManager$1.layerTail=C.prev||l.id),C.pid=s,E&&(E.next=C.next),k&&(k.prev=C.prev),C.prev=void 0,C.next=void 0,g){const M=e[g];M.prev=_,C.next=g}else p=_;g=_})}),l.childHeader=g,l.childTail=p,l.next=layerManager$1.layerHeader;const v=e[layerManager$1.layerHeader];v&&(v.prev=s),a(l),layerManager$1.layerHeader=s,u.push({layerHeader:s}),c.forEach(_=>{const C=e[_];u.push({id:_,pid:C.pid,prev:C.prev,next:C.next})}),f.push({id:s,layerConfig:l});const y=[{type:OperateType.ADD,prev:null,next:f},{type:OperateType.UPDATE_LAYER,prev:d,next:u}];if(historyOperator.put({actions:y}),n([]),o){const{layerInstances:_}=layerListStore$1,C=setTimeout(()=>{_[s].setState({lock:!0}),clearTimeout(C)},10)}}doUnGrouping(){const{targetIds:t,setTargetIds:n}=eventOperateStore$1;if(t.length===0)return;let i=LayerUtil.findTopGroupLayer(t,!0);const{layerConfigs:e,delLayout:a}=layerManager$1;i=i.filter(p=>e[p].type==="group");const s=[],o=[],l=[],c=new Set;i.forEach(p=>{const v=e[p];if(v.next&&c.add(v.next),v.prev&&c.add(v.prev),v.childHeader){let y=e[v.childHeader];for(y&&c.add(y.id);y!=null&&y.next;)y=e[y.next],y&&c.add(y.id)}}),s.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),c.forEach(p=>{const v=e[p],{prev:y,next:_,pid:C,childHeader:E,childTail:k}=v;s.push({id:p,prev:y,next:_,pid:C,childHeader:E,childTail:k})}),i.forEach(p=>{l.push({id:p,layerConfig:lodashExports.cloneDeep(e[p])})}),runInAction(()=>{i.forEach(p=>{const v=e[p],y=e[v.prev],_=e[v.next],C=e[v.childHeader],E=e[v.childTail];C&&(C.prev=y==null?void 0:y.id),E&&(E.next=_==null?void 0:_.id),y&&(y.next=v==null?void 0:v.childHeader),_&&(_.prev=v==null?void 0:v.childTail);let k=v.childHeader;for(;k;){const M=e[k];M&&(M.pid=void 0),k=M==null?void 0:M.next}p===layerManager$1.layerHeader&&(layerManager$1.layerHeader=v.childHeader),p===layerManager$1.layerTail&&(layerManager$1.layerTail=v.childTail)}),a(i)}),o.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),c.forEach(p=>{const v=e[p],{prev:y,next:_,pid:C,childHeader:E,childTail:k}=v;o.push({id:p,prev:y,next:_,pid:C,childHeader:E,childTail:k})});const d=[{type:OperateType.UPDATE_LAYER,prev:s,next:o},{type:OperateType.DEL,prev:l,next:null}];historyOperator.put({actions:d}),n([]);const{activeElem:u,activeConfig:f,setContentVisible:g}=rightStore;u&&i.includes(u.id)&&(g(!1),f(null,""))}doRemoveFromGroup(){let{targetIds:t}=eventOperateStore$1;if(t.length===0)return;const{layerConfigs:n}=layerManager$1,i=t.filter(o=>{const l=n[o];return l.pid&&!t.includes(l.pid)}),e=[],a=[],s=new Set;s.add(layerManager$1.layerHeader),i.forEach(o=>{const l=n[o],c=n[l.pid];s.add(l.id),l.prev&&s.add(l.prev),l.next&&s.add(l.next),(c.childHeader===o||c.childTail===o)&&s.add(c.id)}),e.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),s.forEach(o=>{const l=n[o],{prev:c,next:d,pid:u,childHeader:f,childTail:g}=l;e.push({id:o,prev:c,next:d,pid:u,childHeader:f,childTail:g})}),runInAction(()=>{i.forEach(o=>{const l=n[o],c=n[l.prev],d=n[l.next],u=n[l.pid],f=n[layerManager$1.layerHeader];u.childHeader===o&&(u.childHeader=d==null?void 0:d.id),u.childTail===o&&(u.childTail=c==null?void 0:c.id),l.pid=void 0,l.prev=void 0,l.next=layerManager$1.layerHeader,f.prev=l.id,layerManager$1.layerHeader=l.id,c&&(c.next=d==null?void 0:d.id),d&&(d.prev=c==null?void 0:c.id)})}),a.push({layerHeader:layerManager$1.layerHeader,layerTail:layerManager$1.layerTail}),s.forEach(o=>{const l=n[o],{prev:c,next:d,pid:u,childHeader:f,childTail:g}=l;a.push({id:o,prev:c,next:d,pid:u,childHeader:f,childTail:g})}),historyOperator.put({actions:[{type:OperateType.UPDATE_LAYER,prev:e,next:a}]}),layerManager$1.reRenderLayer()}}const historyRecordOperateProxy=new HistoryRecordOperateProxy,historyRecordOperateProxy$1=historyRecordOperateProxy;class LayerManager extends AbstractManager{constructor(){super();m(this,"elemConfigs",{});m(this,"compController",{});m(this,"layerConfigs",{});m(this,"layerHeader");m(this,"layerTail");m(this,"enableEvent",!1);m(this,"enableAdsorption",!0);m(this,"setEnableAdsorption",n=>{this.enableAdsorption=n});m(this,"setEnableEvent",n=>{this.enableEvent=n,this.reRenderLayer()});m(this,"addItem",n=>this.layerConfigs[n.id+""]=n);m(this,"delItem",n=>{for(const i of n){const e=this.compController[i];e&&e.destroy(),delete this.layerConfigs[i],delete this.compController[i]}});m(this,"updateLayer",(n,i=!0)=>{for(const e of n){const a=this.layerConfigs[e.id+""];lodashExports.isEqual(a,e)||(this.layerConfigs[e.id+""]=i?{...ObjectUtil.merge(a,e)}:ObjectUtil.merge(a,e))}});m(this,"reRenderLayer",()=>runInAction(()=>this.layerConfigs={...this.layerConfigs}));m(this,"delLayout",n=>{for(const i of n)this.layerConfigs[i]&&this.layerConfigs[i].type==="group"&&delete this.layerConfigs[i]});m(this,"flashGlobalTheme",n=>{this.compController&&Object.keys(this.compController).forEach(i=>{const e=this.compController[i];e&&e.updateTheme(n)})});m(this,"copyItem",n=>historyRecordOperateProxy$1.doCopy(n));makeObservable(this,{layerConfigs:observable.shallow,enableAdsorption:observable,setEnableAdsorption:action,init:action,destroy:action,addItem:action,delItem:action,updateLayer:action,flashGlobalTheme:action,copyItem:action,delLayout:action})}getData(){const n={};return Object.keys(this.compController).forEach(i=>{n[i]=this.compController[i].getConfig()}),{elemConfigs:n,layerConfigs:toJS(this.layerConfigs),layerHeader:this.layerHeader,layerTail:this.layerTail}}init(n){this.elemConfigs=n.elemConfigs||this.elemConfigs,this.layerConfigs=n.layerConfigs||this.layerConfigs,this.layerHeader=n.layerHeader||this.layerHeader,this.layerTail=n.layerTail||this.layerTail}destroy(){this.elemConfigs={},this.layerConfigs={},this.layerHeader=void 0,this.layerTail=void 0}}const layerManager=new LayerManager,layerManager$1=layerManager;export{createIdentityMatrix as $,AbstractDefinition as A,findIndex as B,ComponentUtil as C,DesignerLoaderFactory as D,hasClass as E,getRad$1 as F,throttle as G,plus as H,throttleArray as I,isString as J,parseMat as K,LayerUtil as L,convertDimension as M,calculateBoundSize as N,OperateType as O,isArray as P,getDist$1 as Q,convertMatrixtoCSS as R,Selecto$1 as S,calculate as T,convertPositionMatrix as U,isObject as V,getKeys as W,decamelize as X,isNumber as Y,ignoreDimension as Z,invert as _,AbstractConvert as a,multiply as a0,addClass as a1,requestAnimationFrame$1 as a2,DragScroll$1 as a3,splitSpace as a4,parse as a5,refs as a6,ChildrenDiffer$1 as a7,prefixCSS as a8,find as a9,diff$1 as aA,getWindow as aB,createScaleMatrix as aC,TINY_NUM as aD,getDocumentBody as aE,getDocumentElement as aF,isUndefined as aG,Gesto as aH,average as aI,getIntersectionPointsByConstants as aJ,convertCSStoMatrix as aK,between as aL,AbstractManager as aM,historyOperator as aN,DesignerSelectable$2 as aO,DesignerLoaderFactory$1 as aP,withMethods as aa,fromTranslation as ab,dot as ac,createRotateMatrix as ad,getOrigin as ae,rotate as af,diff as ag,multiplies as ah,createOriginMatrix as ai,toMat as aj,isNode as ak,isFunction as al,isWindow as am,calculateMatrixDist as an,counter as ao,removeClass as ap,splitBracket as aq,splitComma as ar,getMinMaxs as as,splitUnit as at,EventEmitter$1 as au,cancelAnimationFrame as av,fitPoints as aw,getOverlapSize as ax,getAreaSize as ay,isInside as az,ref as b,canvasHdStore as c,convertUnitSize as d,eventOperateStore$1 as e,findLast as f,designerLeftStore as g,historyRecordOperateProxy$1 as h,editorDesignerLoader$1 as i,layerListStore$1 as j,bluePrintManager as k,layerManager$1 as l,designerManager as m,bpLeftStore as n,AnchorPointType as o,bpNodeControllerMap as p,AbstractController as q,rightStore as r,componentCategorize as s,themeHdStore as t,componentSubCategorize as u,filterManager as v,styled as w,prefixNames as x,minus as y,createWarpMatrix as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AntdBaseDesignerController-Z7rB5vgE.js","assets/FontGlobal-OJzIEJBO.js","assets/index-CIZzpp4t.js","assets/index-IyM4ICh1.css","assets/mobxreact.esm-QmaNsbsC.js","assets/PreviewOpen-ZH2J-uf_.js","assets/index-PQsxm07c.js","assets/FetchUtil-FMEOVjjY.js","assets/index-Ky8VuNT2.js","assets/GlobalMessage-b_IUatJJ.js","assets/MainRouter-LJqlNU58.js","assets/useZIndex-C48Dwtsu.js","assets/FontGlobal-KAAIpN4X.css","assets/AntdCommonDefinition-bXSiCGS1.js","assets/AbstractAreaDefinition-jMduEzlY.js","assets/util-vtEIUXc7.js","assets/SettingOne-r_dAPHom.js","assets/Optimize-UHrB4Jap.js","assets/Deeplink-qAFPmSrM.js","assets/ColorFilter-lp84y7G0.js","assets/Data-KlI0SKS_.js","assets/Theme-80el66_R.js","assets/AntdCommonAreaController-Qg5cN-ns.js","assets/index-zovTqnYQ.js","assets/AbstractBarDefinition-9xVnl7P8.js","assets/AntdCommonBarController-GrIfX0OD.js","assets/AbstractColumnDefinition-n2_eyHvV.js","assets/AntdCommonColumnController-YNmmrZKz.js","assets/AbstractLineDefinition-Tu-dMEnG.js","assets/AntdCommonLineController-F_QffSYN.js","assets/AbstractRoseDefinition-mQTSbO6D.js","assets/AntdCommonRoseController-p3G2StLB.js","assets/AbstractScatterDefinition-Wda8Od84.js","assets/AntdCommonScatterController-aktbq6Ax.js","assets/AntdBaseAreaDefinition-uGBJRGNt.js","assets/AntdPercentAreaDefinition-BFScL62H.js","assets/AntdStackAreaDefinition-mX5dK66U.js","assets/AntdBaseBarDefinition-zd7WifDs.js","assets/AntdGroupBarDefinition-Mcu8QbrI.js","assets/AntdPercentBarDefinition-rUZd1ytQ.js","assets/AntdRangeBarDefinition-Wd_rJpsi.js","assets/AntdStackBarDefinition-w2zYIDbE.js","assets/AntdBaseColumnDefinition-SPYK2J7G.js","assets/AntdGroupColumnDefinition-OB69hIt3.js","assets/AntdPercentColumnDefinition-UhBM-H4v.js","assets/AntdRangeColumnDefinition-Dw4BG2z_.js","assets/AntdStackColumnDefinition-m-4uKGH8.js","assets/G2PlotCustomController-KkDx3udp.js","assets/G2PlotCustomDefinition-UJw4FS8o.js","assets/AntdGaugeController-Lw3PQ6G3.js","assets/AntdGaugeDefinition-DcPUkVtb.js","assets/AbstractDesignerDefinition-TZiOBB7o.js","assets/AntdBaseLineDefinition-bk7ue9bH.js","assets/AntdMultiLineDefinition-6FXyUD-_.js","assets/LCGUI-KhPNl-Yd.js","assets/AntdFragment-MGXGUw1e.js","assets/Accordion-E6A8OgBH.js","assets/Switch-0oKaq_Rp.js","assets/UIContainer-NEWVGUQ0.js","assets/index-za7E6pLK.js","assets/ResizeObserver.es-B32NGzNS.js","assets/Help-nAWCz3FQ.js","assets/UIContainer-2wM5o6qv.css","assets/Switch-mqJvRLec.css","assets/Right-3DfmN5C1.js","assets/Accordion-SU6xlX8W.css","assets/Radio-A1ZOt_1R.js","assets/Radio-scZDuxp-.css","assets/AntdLegend-BCXo9q4t.js","assets/AntdLegend-6KUq2KPc.css","assets/AntdCommonUtil-n1O0a4X_.js","assets/AntdStepLineDefinition-rJGUzZ65.js","assets/AntdLiquidController-uQFir5Vx.js","assets/AntdLiquidDefinition-AcpjEVki.js","assets/AntdPieController-C9Por1aK.js","assets/AntdPieDefinition-Yej7Ro2r.js","assets/AntdRadarController-jG0FEN98.js","assets/AntdRadarDefinition--mpySBQA.js","assets/AntdBaseRadialBarController-hIfvxxy2.js","assets/AntdBaseRadialBarDefinition-bcTwxSQ9.js","assets/AntdRingProgressController-L0XkoX7s.js","assets/AntdRingProgressDefinition-oFB7rctG.js","assets/AntdBaseRoseDefinition-iD4Ot_oW.js","assets/AntdGroupRoseDefinition-ICnlJq4z.js","assets/AntdStackRoseDefinition-qnz1PdAf.js","assets/AntdScatterBubbleDefinition-9U8tyKnb.js","assets/AntdScatterPointDefinition-1-zmdqbl.js","assets/AntdWordCloudController-ksu-nBD9.js","assets/AntdWordCloudDefinition-S5hmoLgt.js","assets/BaseInfoStore-AycIuJ-7.js","assets/GroupLayerDefinition-K57oB72m.js","assets/BaseColorBlockController-g8s0Ytlq.js","assets/BaseColorBlockDefinition-dDshIrJw.js","assets/BaseIframeController-Qd8QFyrT.js","assets/BaseIframeDefinition-VIE-klG7.js","assets/BaseImageController-N-3Ii5wq.js","assets/BaseImageConvert-VdjE_tmJ.js","assets/BaseImageDefinition-AQ1LhvuQ.js","assets/BaseTableController-tiM1yocU.js","assets/BaseTableController-80DO5Sch.css","assets/BaseTableDefinition-55Nb7VpM.js","assets/BaseTextController-TslpSv0A.js","assets/BaseTextController-zbRTc4RC.css","assets/BaseTextDefinition-LSJr92Zw.js","assets/AlignVerticalCenterTwo-5iGa1reK.js","assets/BaseVideoController-cS0UX6SU.js","assets/BaseVideoDefinition-BzItdEqY.js","assets/CarouselController-4uEPPu-7.js","assets/index-5p4B7Tol.js","assets/CarouselController-liCXXavu.css","assets/CarouselDefinition-xHPFhYP_.js","assets/DateTimeController-SeCh5EKp.js","assets/DateTimeController-783O5KrH.css","assets/DateTimeDefinition-_xX0T7Vv.js","assets/DigitalFlipperController-LoBUFVdx.js","assets/DigitalFlipperDefinition-JEx9exC5.js","assets/FourAngleGlowBorderController-7Ovl_1rI.js","assets/FourAngleGlowBorderController-QQTIJmko.css","assets/FourAngleGlowBorderDefinition-dgye7lFV.js","assets/TextScrollerController-xrydkaiD.js","assets/TextScrollerController-N7m4WC4B.css","assets/TextScrollerDefinition-dD-rjYC0.js","assets/AMapController-Lh25vXZj.js","assets/AMapScaleObserver-CbK9Z4xK.js","assets/ScaleAction-O7o3lc4T.js","assets/MapLoader-vz3ubJEQ.js","assets/AMapController-XawDsWVd.css","assets/AMapDefinition-2za4bpbY.js","assets/MonacoEditor-btR9Umqm.js","assets/MonacoEditor-yJ9UOCHw.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}