var I=Object.defineProperty;var S=(l,e,t)=>e in l?I(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var A=(l,e,t)=>S(l,typeof e!="symbol"?e+"":e,t);import{r as F,j as a}from"./index-BfEWyzAb.js";import{aR as M,aK as R,aT as P,b1 as G}from"./ViewDesignerLoader-DOY4imTA.js";import"./mobxreact.esm-DlPXlBwO.js";import"./MainRouter-B5MsqwcC.js";import"./zoom-DptOfjG4.js";import"./asyncToGenerator-BwK-PoBO.js";import"./Compact-DpzX4qzh.js";import"./useZIndex-jvd8916L.js";import"./pickAttrs-DOLnfwLO.js";import"./button-COGh-Ntl.js";import"./render-CSpp3gCb.js";import"./NumberInput-B8RVTREX.js";import"./index-D2h4uPFP.js";import"./GlobalMessage-B8A-9qUt.js";import"./FetchUtil-Ds2Z9fRh.js";import"./Overflow-BfdRSfO5.js";import"./index-Cq3rmf-u.js";import"./index-6P79lCOj.js";import"./Input-vfK5BJxB.js";import"./Data-BV7eYUTW.js";import"./collapse-BbEVqHco.js";import"./Button-CotjFEre.js";class le extends F.Component{constructor(){super(...arguments);A(this,"roseGraphicsChange",t=>{this.props.controller.update({style:t})})}render(){const t=this.props.controller,r=t.getConfig().style;return a.jsxs(a.Fragment,{children:[a.jsx(M,{controller:t}),a.jsx(U,{onChange:this.roseGraphicsChange,config:r})]})}}const U=({config:l,onChange:e})=>{var o,d,m,c,y,u,b,h,g,f,k;const[t,r]=F.useState(l),s=x=>{const{id:p,dataKeyPath:C,dataFragment:v,reRender:j}=x;let{data:n}=x;p==="startAngle"||p==="endAngle"?(n=Math.PI*n/180,e&&e(G.createObjectFromArray(C,n))):p==="labelRotate"?e({label:{rotate:n*Math.PI}}):e&&e(v),j&&r({...t,...v})},i={children:[{type:"accordion",label:"图形",children:[{type:"grid",children:[{key:"radius",type:"number-input",label:"外径",value:l.radius,config:{min:0,max:1,step:.01}},{id:"startAngle",key:"startAngle",type:"number-input",label:"起始角",value:(l.startAngle||0)/Math.PI*180},{key:"innerRadius",type:"number-input",label:"内径",value:l.innerRadius,config:{min:0,max:1,step:.01}},{id:"endAngle",key:"endAngle",type:"number-input",label:"结束角",value:(l.endAngle||2*Math.PI)/Math.PI*180},{key:"sectorStyle",children:[{key:"stroke",type:"color-picker",label:"描边色",value:(o=l.sectorStyle)==null?void 0:o.stroke,config:{showText:!0}},{key:"lineWidth",type:"number-input",label:"描边宽",value:(d=l.sectorStyle)==null?void 0:d.lineWidth,config:{min:0,max:30}}]},{key:"color",type:"color-mode",label:"颜色",value:"#1c1c1c"}]}]},{type:"accordion",label:"标签",children:[{key:"label",type:"grid",children:[{key:"offset",type:"number-input",label:"偏移",value:((m=t.label)==null?void 0:m.offset)||0},{key:"style",children:[{key:"fontSize",type:"number-input",label:"字号",value:((y=(c=t.label)==null?void 0:c.style)==null?void 0:y.fontSize)||12,config:{min:0,max:100}},{key:"fontWeight",type:"number-input",label:"加粗",value:((b=(u=t.label)==null?void 0:u.style)==null?void 0:b.fontWeight)||500,config:{min:100,max:900,step:100}},{key:"fill",type:"color-picker",label:"颜色",value:(g=(h=t.label)==null?void 0:h.style)==null?void 0:g.fill,config:{showText:!0}}]},{key:"autoRotate",type:"switch",label:"自动旋转",reRender:!0,value:(f=t.label)==null?void 0:f.autoRotate},{id:"labelRotate",key:"rotate",type:"number-input",label:"旋转角度",rules:"{autoRotate} === 'false'",value:((k=t.label)==null?void 0:k.rotate)||0,config:{min:0,max:2,step:.01}}]}]}]};return a.jsx(R,{schema:i,onFieldChange:s})},ae=({controller:l})=>{var i;const e=(i=l.getConfig())==null?void 0:i.style,t=P.getDataFieldOptions(l),r={type:"grid",children:[{key:"xField",type:"select",label:"X字段",value:e==null?void 0:e.xField,config:{options:t}},{key:"yField",type:"select",label:"Y字段",value:e==null?void 0:e.yField,config:{options:t}},{key:"seriesField",type:"select",label:"分组字段",value:e==null?void 0:e.seriesField,config:{options:t}}]},s=o=>{l.update(o.dataFragment)};return a.jsx("div",{style:{padding:10},children:a.jsx(R,{schema:r,onFieldChange:s})})};export{ae as AntdRoseFieldMapping,U as AntdRoseGraphicsConfig,le as default};
