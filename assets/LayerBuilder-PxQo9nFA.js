var Rt=Object.defineProperty;var Ot=(r,e,t)=>e in r?Rt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var D=(r,e,t)=>(Ot(r,typeof e!="symbol"?e+"":e,t),t);import{r as reactExports,A as AntdIcon,_ as _objectSpread2,R as React,b as ReactDOM,j as jsxRuntimeExports,m as message,g as getDefaultExportFromCjs,a as __vitePreload,c as InfoCircleOutlined,L as Loading}from"./index-n_baRMQq.js";import{a as makeObservable,b as observable,c as action,o as observer,r as runInAction,t as toJS}from"./mobxreact.esm-yoTFdQ-y.js";import{O as ObjectUtil,l as lodashExports}from"./lodash-PKoA678W.js";import{I as IdGenerate,P as ProjectState,S as SaveType,L as LineOutlined,D as Dialog,E as EyeFilled,U as URLUtil,a as DesignerMode,o as operatorMap,b as EditFilled}from"./index-d0SB--Ec.js";import{M as MonacoEditor}from"./MonacoEditor-hmlWaHFJ.js";import Accordion from"./Accordion-mABzpyGC.js";import{C as CodeSandboxSquareFilled,D as DatabaseFilled}from"./DatabaseFilled-24Fq9-Vu.js";import{Grid}from"./Grid-xGMZ5ABH.js";import Input from"./Input-F0yORoWo.js";import Switch from"./Switch-oFF2VnxV.js";import Button from"./Button-heKRj89e.js";import Radio from"./Radio-bSze70jI.js";import Select from"./Select-ZiCi6lCH.js";import{C as ColorPicker}from"./ColorPicker-AdFWLWru.js";import{ItemPanel}from"./ItemPanel-GHXnX9qH.js";import{U as UIContainer}from"./UIContainer-3GtuBK9j.js";import{L as LCGUI,a as LCGUIUtil}from"./LCGUI-eTgx-a7u.js";const Shape$1=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase$1},get Circle(){return Circle$2},get Ellipse(){return Ellipse$1},get Image(){return ImageShape},get Line(){return Line$3},get Marker(){return Marker$1},get Path(){return Path$2},get Polygon(){return Polygon$2},get Polyline(){return PolyLine},get Rect(){return Rect$2},get Text(){return Text$1}},Symbol.toStringTag,{value:"Module"})),Shape=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase},get Circle(){return Circle$1},get Dom(){return Dom},get Ellipse(){return Ellipse},get Image(){return Image$1},get Line(){return Line$2},get Marker(){return Marker},get Path(){return Path$1},get Polygon(){return Polygon$1},get Polyline(){return Polyline},get Rect(){return Rect$1},get Text(){return Text}},Symbol.toStringTag,{value:"Module"}));var ApartmentOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};const ApartmentOutlinedSvg=ApartmentOutlined$2;var ApartmentOutlined=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:ApartmentOutlinedSvg}))};ApartmentOutlined.displayName="ApartmentOutlined";const ApartmentOutlined$1=reactExports.forwardRef(ApartmentOutlined);var AppstoreFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zM464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z"}}]},name:"appstore",theme:"filled"};const AppstoreFilledSvg=AppstoreFilled$2;var AppstoreFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:AppstoreFilledSvg}))};AppstoreFilled.displayName="AppstoreFilled";const AppstoreFilled$1=reactExports.forwardRef(AppstoreFilled);var BlockOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M856 376H648V168c0-8.8-7.2-16-16-16H168c-8.8 0-16 7.2-16 16v464c0 8.8 7.2 16 16 16h208v208c0 8.8 7.2 16 16 16h464c8.8 0 16-7.2 16-16V392c0-8.8-7.2-16-16-16zm-480 16v188H220V220h360v156H392c-8.8 0-16 7.2-16 16zm204 52v136H444V444h136zm224 360H444V648h188c8.8 0 16-7.2 16-16V444h156v360z"}}]},name:"block",theme:"outlined"};const BlockOutlinedSvg=BlockOutlined$2;var BlockOutlined=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:BlockOutlinedSvg}))};BlockOutlined.displayName="BlockOutlined";const BlockOutlined$1=reactExports.forwardRef(BlockOutlined);var BranchesOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};const BranchesOutlinedSvg=BranchesOutlined$2;var BranchesOutlined=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:BranchesOutlinedSvg}))};BranchesOutlined.displayName="BranchesOutlined";const BranchesOutlined$1=reactExports.forwardRef(BranchesOutlined);var CodeSandboxOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M709.6 210l.4-.2h.2L512 96 313.9 209.8h-.2l.7.3L151.5 304v416L512 928l360.5-208V304l-162.9-94zM482.7 843.6L339.6 761V621.4L210 547.8V372.9l272.7 157.3v313.4zM238.2 321.5l134.7-77.8 138.9 79.7 139.1-79.9 135.2 78-273.9 158-274-158zM814 548.3l-128.8 73.1v139.1l-143.9 83V530.4L814 373.1v175.2z"}}]},name:"code-sandbox",theme:"outlined"};const CodeSandboxOutlinedSvg=CodeSandboxOutlined$2;var CodeSandboxOutlined=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:CodeSandboxOutlinedSvg}))};CodeSandboxOutlined.displayName="CodeSandboxOutlined";const CodeSandboxOutlined$1=reactExports.forwardRef(CodeSandboxOutlined);var EyeInvisibleFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M508 624a112 112 0 00112-112c0-3.28-.15-6.53-.43-9.74L498.26 623.57c3.21.28 6.45.43 9.74.43zm370.72-458.44L836 122.88a8 8 0 00-11.31 0L715.37 232.23Q624.91 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.7 119.43 136.55 191.45L112.56 835a8 8 0 000 11.31L155.25 889a8 8 0 0011.31 0l712.16-712.12a8 8 0 000-11.32zM332 512a176 176 0 01258.88-155.28l-48.62 48.62a112.08 112.08 0 00-140.92 140.92l-48.62 48.62A175.09 175.09 0 01332 512z"}},{tag:"path",attrs:{d:"M942.2 486.2Q889.4 375 816.51 304.85L672.37 449A176.08 176.08 0 01445 676.37L322.74 798.63Q407.82 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5z"}}]},name:"eye-invisible",theme:"filled"};const EyeInvisibleFilledSvg=EyeInvisibleFilled$2;var EyeInvisibleFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:EyeInvisibleFilledSvg}))};EyeInvisibleFilled.displayName="EyeInvisibleFilled";const EyeInvisibleFilled$1=reactExports.forwardRef(EyeInvisibleFilled);var FolderOpenFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"};const FolderOpenFilledSvg=FolderOpenFilled$2;var FolderOpenFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:FolderOpenFilledSvg}))};FolderOpenFilled.displayName="FolderOpenFilled";const FolderOpenFilled$1=reactExports.forwardRef(FolderOpenFilled);var FunctionOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M841 370c3-3.3 2.7-8.3-.6-11.3a8.24 8.24 0 00-5.3-2.1h-72.6c-2.4 0-4.6 1-6.1 2.8L633.5 504.6a7.96 7.96 0 01-13.4-1.9l-63.5-141.3a7.9 7.9 0 00-7.3-4.7H380.7l.9-4.7 8-42.3c10.5-55.4 38-81.4 85.8-81.4 18.6 0 35.5 1.7 48.8 4.7l14.1-66.8c-22.6-4.7-35.2-6.1-54.9-6.1-103.3 0-156.4 44.3-175.9 147.3l-9.4 49.4h-97.6c-3.8 0-7.1 2.7-7.8 6.4L181.9 415a8.07 8.07 0 007.8 9.7H284l-89 429.9a8.07 8.07 0 007.8 9.7H269c3.8 0 7.1-2.7 7.8-6.4l89.7-433.1h135.8l68.2 139.1c1.4 2.9 1 6.4-1.2 8.8l-180.6 203c-2.9 3.3-2.6 8.4.7 11.3 1.5 1.3 3.4 2 5.3 2h72.7c2.4 0 4.6-1 6.1-2.8l123.7-146.7c2.8-3.4 7.9-3.8 11.3-1 .9.8 1.6 1.7 2.1 2.8L676.4 784c1.3 2.8 4.1 4.7 7.3 4.7h64.6a8.02 8.02 0 007.2-11.5l-95.2-198.9c-1.4-2.9-.9-6.4 1.3-8.8L841 370z"}}]},name:"function",theme:"outlined"};const FunctionOutlinedSvg=FunctionOutlined$2;var FunctionOutlined=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:FunctionOutlinedSvg}))};FunctionOutlined.displayName="FunctionOutlined";const FunctionOutlined$1=reactExports.forwardRef(FunctionOutlined);var HighlightFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2z"}}]},name:"highlight",theme:"filled"};const HighlightFilledSvg=HighlightFilled$2;var HighlightFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:HighlightFilledSvg}))};HighlightFilled.displayName="HighlightFilled";const HighlightFilled$1=reactExports.forwardRef(HighlightFilled);var InteractionFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM726 585.7c0 55.3-44.7 100.1-99.7 100.1H420.6v53.4c0 5.7-6.5 8.8-10.9 5.3l-109.1-85.7c-3.5-2.7-3.5-8 0-10.7l109.1-85.7c4.4-3.5 10.9-.3 10.9 5.3v53.4h205.7c19.6 0 35.5-16 35.5-35.6v-78.9c0-3.7 3-6.8 6.8-6.8h50.7c3.7 0 6.8 3 6.8 6.8v79.1zm-2.6-209.9l-109.1 85.7c-4.4 3.5-10.9.3-10.9-5.3v-53.4H397.7c-19.6 0-35.5 16-35.5 35.6v78.9c0 3.7-3 6.8-6.8 6.8h-50.7c-3.7 0-6.8-3-6.8-6.8v-78.9c0-55.3 44.7-100.1 99.7-100.1h205.7v-53.4c0-5.7 6.5-8.8 10.9-5.3l109.1 85.7c3.6 2.5 3.6 7.8.1 10.5z"}}]},name:"interaction",theme:"filled"};const InteractionFilledSvg=InteractionFilled$2;var InteractionFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:InteractionFilledSvg}))};InteractionFilled.displayName="InteractionFilled";const InteractionFilled$1=reactExports.forwardRef(InteractionFilled);var SaveFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"};const SaveFilledSvg=SaveFilled$2;var SaveFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:SaveFilledSvg}))};SaveFilled.displayName="SaveFilled";const SaveFilled$1=reactExports.forwardRef(SaveFilled);var SettingFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 00-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 009.3-35.2l-.9-2.6a442.5 442.5 0 00-79.6-137.7l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.3a353.44 353.44 0 00-98.9 57.3l-81.8-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a445.93 445.93 0 00-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0025.8 25.7l2.7.5a448.27 448.27 0 00158.8 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]},name:"setting",theme:"filled"};const SettingFilledSvg=SettingFilled$2;var SettingFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:SettingFilledSvg}))};SettingFilled.displayName="SettingFilled";const SettingFilled$1=reactExports.forwardRef(SettingFilled);var SkinFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7a37.93 37.93 0 00-37-29.3H154a44 44 0 00-44 44v252a44 44 0 0044 44h75v388a44 44 0 0044 44h478a44 44 0 0044-44V466h75a44 44 0 0044-44V170a44 44 0 00-44-44z"}}]},name:"skin",theme:"filled"};const SkinFilledSvg=SkinFilled$2;var SkinFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:SkinFilledSvg}))};SkinFilled.displayName="SkinFilled";const SkinFilled$1=reactExports.forwardRef(SkinFilled);var UnlockFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 1156 0z"}}]},name:"unlock",theme:"filled"};const UnlockFilledSvg=UnlockFilled$2;var UnlockFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:UnlockFilledSvg}))};UnlockFilled.displayName="UnlockFilled";const UnlockFilled$1=reactExports.forwardRef(UnlockFilled);var UsbFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 312h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm352 120V144c0-17.7-14.3-32-32-32H296c-17.7 0-32 14.3-32 32v288c-66.2 0-120 52.1-120 116v356c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8V548c0-63.9-53.8-116-120-116zm-72 0H336V184h352v248zM568 312h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"usb",theme:"filled"};const UsbFilledSvg=UsbFilled$2;var UsbFilled=function(e,t){return reactExports.createElement(AntdIcon,_objectSpread2(_objectSpread2({},e),{},{ref:t,icon:UsbFilledSvg}))};UsbFilled.displayName="UsbFilled";const UsbFilled$1=reactExports.forwardRef(UsbFilled);class HeaderStore{constructor(){D(this,"canvasVisible",!1);D(this,"projectVisible",!1);D(this,"themeVisible",!1);D(this,"bluePrintVisible",!1);D(this,"setBluePrintVisible",e=>this.bluePrintVisible=e);D(this,"setCanvasVisible",e=>this.canvasVisible=e);D(this,"setProjectVisible",e=>this.projectVisible=e);D(this,"setThemeVisible",e=>this.themeVisible=e);makeObservable(this,{canvasVisible:observable,projectVisible:observable,themeVisible:observable,bluePrintVisible:observable,setCanvasVisible:action,setProjectVisible:action,setThemeVisible:action,setBluePrintVisible:action})}}const headerStore=new HeaderStore;class AbstractController{constructor(){D(this,"instance",null);D(this,"config",null);D(this,"container",null)}destroy(){this.instance=null,this.config=null,this.container=null}}var AnchorPointType=(r=>(r[r.INPUT=0]="INPUT",r[r.OUTPUT=1]="OUTPUT",r))(AnchorPointType||{});class AbstractBPNodeController extends AbstractController{constructor(e){super(),e&&(this.config=e)}}class ComponentUtil{static async createAndRender(e,t,n){if(!e)throw new Error("create react node failed, container is null");return await new Promise(i=>{try{ReactDOM.render(React.createElement(t,{ref:a=>i(a),...n}),e)}catch(a){console.error("create react node failed ",a),i(null)}})}}const nodeIconMap=new Map;nodeIconMap.set("CodeSandboxOutlined",CodeSandboxOutlined$1);nodeIconMap.set("BranchesOutlined",BranchesOutlined$1);nodeIconMap.set("FunctionOutlined",FunctionOutlined$1);class BPNode extends React.PureComponent{render(){const{icon:e,name:t,input:n=[],output:i=[],titleBgColor:a="#247057"}=this.props,o=[...i,...n],s=nodeIconMap.get(e)||CodeSandboxOutlined$1;return jsxRuntimeExports.jsxs("div",{className:"bp-node",children:[jsxRuntimeExports.jsxs("div",{className:"bp-node-header",style:{backgroundColor:a},children:[jsxRuntimeExports.jsxs("div",{className:"bp-node-icon",children:[jsxRuntimeExports.jsx(s,{})," "]}),jsxRuntimeExports.jsx("div",{className:"bp-node-title",children:t})]}),jsxRuntimeExports.jsx("div",{className:"bp-node-body",children:o.map((l,c)=>{const{id:u,name:f,type:d}=l;return jsxRuntimeExports.jsxs("div",{className:`bp-node-ap ${d===AnchorPointType.INPUT?"node-ap-input":"node-ap-output"}`,children:[jsxRuntimeExports.jsx("div",{className:"bp-node-ap-circle",children:jsxRuntimeExports.jsx("span",{id:u,className:`ap-circle ${d===AnchorPointType.INPUT?"ap-circle-input":"ap-circle-output"}`})}),jsxRuntimeExports.jsx("div",{className:"bg-node-ap-label",children:f})]},c)})})]})}}var OperateType=(r=>(r[r.DRAG=0]="DRAG",r[r.RESIZE=1]="RESIZE",r[r.ADD=2]="ADD",r[r.DEL=3]="DEL",r[r.UPD_STYLE=4]="UPD_STYLE",r[r.HIDE=5]="HIDE",r[r.ORDER=6]="ORDER",r[r.LOCK=7]="LOCK",r[r.GROUP=8]="GROUP",r[r.UPD_LAYER_GROUP=9]="UPD_LAYER_GROUP",r))(OperateType||{});class HistoryQueue{constructor(e=10){D(this,"capacity");D(this,"elements");D(this,"front");D(this,"rear");D(this,"size");D(this,"back");D(this,"backAll");D(this,"circulate",!1);D(this,"backCount",0);this.capacity=e,this.elements=new Array(e),this.front=0,this.rear=-1,this.size=0,this.back=this.rear,this.backAll=!1}enqueue(e){this.size===this.capacity&&!this.backAll&&(this.circulate=!0,this.front=(this.front+1)%this.capacity),this.back!==this.rear?(this.rear=(this.back+1)%this.capacity,this.elements[this.rear]=e,this.size-=this.backCount,this.backCount=0):(this.rear=(this.rear+1)%this.capacity,this.elements[this.rear]=e),this.size<this.capacity&&this.size++,this.back=this.rear,this.backAll=!1}getFront(){return this.size===0?null:this.elements[this.front]}getRear(){return this.size===0?null:this.elements[this.rear]}backoff(){if(this.size===0||this.backAll)return null;this.back===this.front&&(this.backAll=!0);const e=this.elements[this.back];return this.back=(this.back-1+this.capacity)%this.capacity,this.backCount++,e}forward(){return this.size===0||this.back===this.rear?null:(this.back=(this.back+1)%this.capacity,this.backAll&&(this.backAll=!1),this.elements[this.back])}getBackPointElem(){return this.elements[this.back]}isEmpty(){return this.size===0}isFull(){return this.size===this.capacity}getSize(){return this.size}getBack(){return this.back}getCirculate(){return this.circulate}}class HistoryOperator{constructor(){D(this,"queue",new HistoryQueue(50))}put(e){this.queue.enqueue(e)}backoff(){return this.queue.backoff()}forward(){return this.queue.forward()}}const historyOperator=new HistoryOperator;var FUNCTION="function",OBJECT="object",STRING="string",NUMBER="number",UNDEFINED="undefined",IS_WINDOW=typeof window!==UNDEFINED,doc=typeof document!==UNDEFINED&&document,OPEN_CLOSED_CHARACTERS=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],TINY_NUM$1=1e-7,DEFAULT_UNIT_PRESETS={cm:function(r){return r*96/2.54},mm:function(r){return r*96/254},in:function(r){return r*96},pt:function(r){return r*96/72},pc:function(r){return r*96/6},"%":function(r,e){return r*e/100},vw:function(r,e){return e===void 0&&(e=window.innerWidth),r/100*e},vh:function(r,e){return e===void 0&&(e=window.innerHeight),r/100*e},vmax:function(r,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),r/100*e},vmin:function(r,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),r/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __spreadArrays$3(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function dot$3(r,e,t,n){return(r*n+e*t)/(t+n)}function isUndefined$1(r){return typeof r===UNDEFINED}function isObject$1(r){return r&&typeof r===OBJECT}function isArray$4(r){return Array.isArray(r)}function isString$1(r){return typeof r===STRING}function isNumber$2(r){return typeof r===NUMBER}function isFunction$1(r){return typeof r===FUNCTION}function isEqualSeparator(r,e){var t=r===""||r==" ",n=e===""||e==" ";return n&&t||r===e}function findOpen(r,e,t,n,i){var a=findIgnore(r,e,t);return a?t:findClose(r,e,t+1,n,i)}function findIgnore(r,e,t){if(!r.ignore)return null;var n=e.slice(Math.max(t-3,0),t+3).join("");return new RegExp(r.ignore).exec(n)}function findClose(r,e,t,n,i){for(var a=function(c){var u=e[c].trim();if(u===r.close&&!findIgnore(r,e,c))return{value:c};var f=c,d=find$3(i,function(g){var p=g.open;return p===u});if(d&&(f=findOpen(d,e,c,n,i)),f===-1)return o=c,"break";c=f,o=c},o,s=t;s<n;++s){var l=a(s);if(s=o,typeof l=="object")return l.value;if(l==="break")break}return-1}function splitText(r,e){var t=isString$1(e)?{separator:e}:e,n=t.separator,i=n===void 0?",":n,a=t.isSeparateFirst,o=t.isSeparateOnlyOpenClose,s=t.isSeparateOpenClose,l=s===void 0?o:s,c=t.openCloseCharacters,u=c===void 0?OPEN_CLOSED_CHARACTERS:c,f=u.map(function(C){var E=C.open,T=C.close;return E===T?E:E+"|"+T}).join("|"),d="(\\s*"+i+"\\s*|"+f+"|\\s+)",g=new RegExp(d,"g"),p=r.split(g).filter(function(C){return C&&C!=="undefined"}),v=p.length,y=[],m=[];function x(){return m.length?(y.push(m.join("")),m=[],!0):!1}for(var _=function(C){var E=p[C].trim(),T=C,I=find$3(u,function($){var P=$.open;return P===E}),w=find$3(u,function($){var P=$.close;return P===E});if(I){if(T=findOpen(I,p,C,v,u),T!==-1&&l)return x()&&a||(y.push(p.slice(C,T+1).join("")),C=T,a)?(S=C,"break"):(S=C,"continue")}else if(w&&!findIgnore(w,p,C)){var M=__spreadArrays$3(u);return M.splice(u.indexOf(w),1),{value:splitText(r,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:M})}}else if(isEqualSeparator(E,i)&&!o)return x(),a?(S=C,"break"):(S=C,"continue");T===-1&&(T=v-1),m.push(p.slice(C,T+1).join("")),C=T,S=C},S,A=0;A<v;++A){var b=_(A);if(A=S,typeof b=="object")return b.value;if(b==="break")break}return m.length&&y.push(m.join("")),y}function splitSpace(r){return splitText(r,"")}function splitComma(r){return splitText(r,",")}function splitBracket(r){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(r);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function splitUnit(r){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(r);if(!e)return{prefix:"",unit:"",value:NaN};var t=e[1],n=e[2],i=e[3];return{prefix:t,unit:i,value:parseFloat(n)}}function camelize(r){return r.replace(/[\s-_]+([^\s-_])/g,function(e,t){return t.toUpperCase()})}function decamelize(r,e){return e===void 0&&(e="-"),r.replace(/([a-z])([A-Z])/g,function(t,n,i){return""+n+e+i.toLowerCase()})}function now$1(){return Date.now?Date.now():new Date().getTime()}function findIndex$1(r,e,t){t===void 0&&(t=-1);for(var n=r.length,i=0;i<n;++i)if(e(r[i],i,r))return i;return t}function findLastIndex(r,e,t){t===void 0&&(t=-1);for(var n=r.length,i=n-1;i>=0;--i)if(e(r[i],i,r))return i;return t}function findLast(r,e,t){var n=findLastIndex(r,e);return n>-1?r[n]:t}function find$3(r,e,t){var n=findIndex$1(r,e);return n>-1?r[n]:t}var requestAnimationFrame$2=function(){var r=now$1(),e=IS_WINDOW&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(t){var n=now$1(),i=setTimeout(function(){t(n-r)},1e3/60);return i}}(),cancelAnimationFrame$1=function(){var r=IS_WINDOW&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return r?r.bind(window):function(e){clearTimeout(e)}}();function getKeys(r){return Object.keys(r)}function convertUnitSize(r,e){var t=splitUnit(r),n=t.value,i=t.unit;if(isObject$1(e)){var a=e[i];if(a){if(isFunction$1(a))return a(n);if(DEFAULT_UNIT_PRESETS[i])return DEFAULT_UNIT_PRESETS[i](n,a)}}else if(i==="%")return n*e/100;return DEFAULT_UNIT_PRESETS[i]?DEFAULT_UNIT_PRESETS[i](n):n}function between(r,e,t){return Math.max(e,Math.min(r,t))}function checkBoundSize(r,e,t,n){return n===void 0&&(n=r[0]/r[1]),[[throttle$1(e[0],TINY_NUM$1),throttle$1(e[0]/n,TINY_NUM$1)],[throttle$1(e[1]*n,TINY_NUM$1),throttle$1(e[1],TINY_NUM$1)]].filter(function(i){return i.every(function(a,o){var s=e[o],l=throttle$1(s,TINY_NUM$1);return t?a<=s||a<=l:a>=s||a>=l})})[0]||r}function calculateBoundSize(r,e,t,n){if(!n)return r.map(function(g,p){return between(g,e[p],t[p])});var i=r[0],a=r[1],o=n===!0?i/a:n,s=checkBoundSize(r,e,!1,o),l=s[0],c=s[1],u=checkBoundSize(r,t,!0,o),f=u[0],d=u[1];return i<l||a<c?(i=l,a=c):(i>f||a>d)&&(i=f,a=d),[i,a]}function sum(r){for(var e=r.length,t=0,n=e-1;n>=0;--n)t+=r[n];return t}function average(r){for(var e=r.length,t=0,n=e-1;n>=0;--n)t+=r[n];return e?t/e:0}function getRad$1(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=Math.atan2(n,t);return i>=0?i:i+Math.PI*2}function getCenterPoint(r){return[0,1].map(function(e){return average(r.map(function(t){return t[e]}))})}function getShapeDirection(r){var e=getCenterPoint(r),t=getRad$1(e,r[0]),n=getRad$1(e,r[1]);return t<n&&n-t<Math.PI||t>n&&n-t<-Math.PI?1:-1}function getDist$2(r,e){return Math.sqrt(Math.pow((e?e[0]:0)-r[0],2)+Math.pow((e?e[1]:0)-r[1],2))}function throttle$1(r,e){if(!e)return r;var t=1/e;return Math.round(r/e)/t}function throttleArray(r,e){return r.forEach(function(t,n){r[n]=throttle$1(r[n],e)}),r}function counter(r){for(var e=[],t=0;t<r;++t)e.push(t);return e}function hasClass$1(r,e){return r.classList?r.classList.contains(e):!!r.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function addClass(r,e){r.classList?r.classList.add(e):r.className+=" "+e}function removeClass(r,e){if(r.classList)r.classList.remove(e);else{var t=new RegExp("(\\s|^)"+e+"(\\s|$)");r.className=r.className.replace(t," ")}}function addEvent(r,e,t,n){r.addEventListener(e,t,n)}function removeEvent(r,e,t,n){r.removeEventListener(e,t,n)}function getDocument(r){return(r==null?void 0:r.ownerDocument)||doc}function getDocumentElement(r){return getDocument(r).documentElement}function getDocumentBody(r){return getDocument(r).body}function getWindow(r){var e;return((e=r==null?void 0:r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function isWindow(r){return r&&"postMessage"in r&&"blur"in r&&"self"in r}function isNode(r){return isObject$1(r)&&r.nodeName&&r.nodeType&&"ownerDocument"in r}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$9=function(){return __assign$9=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$9.apply(this,arguments)};function __spreadArrays$2(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}var EventEmitter$1=function(){function r(){this._events={}}var e=r.prototype;return e.on=function(t,n){if(isObject$1(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,n,{});return this},e.off=function(t,n){if(!t)this._events={};else if(isObject$1(t))for(var i in t)this.off(i);else if(!n)this._events[t]=[];else{var a=this._events[t];if(a){var o=findIndex$1(a,function(s){return s.listener===n});o>-1&&a.splice(o,1)}}return this},e.once=function(t,n){var i=this;return n&&this._addEvent(t,n,{once:!0}),new Promise(function(a){i._addEvent(t,a,{once:!0})})},e.emit=function(t,n){var i=this;n===void 0&&(n={});var a=this._events[t];if(!t||!a)return!0;var o=!1;return n.eventType=t,n.stop=function(){o=!0},n.currentTarget=this,__spreadArrays$2(a).forEach(function(s){s.listener(n),s.once&&i.off(t,s.listener)}),!o},e.trigger=function(t,n){return n===void 0&&(n={}),this.emit(t,n)},e._addEvent=function(t,n,i){var a=this._events;a[t]=a[t]||[];var o=a[t];o.push(__assign$9({listener:n},i))},r}();const EventEmitter$2=EventEmitter$1;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$8=function(r,e){return extendStatics$8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$8(r,e)};function __extends$8(r,e){extendStatics$8(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var __assign$8=function(){return __assign$8=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$8.apply(this,arguments)};function getRad(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=Math.atan2(n,t);return i>=0?i:i+Math.PI*2}function getRotatiion(r){return getRad([r[0].clientX,r[0].clientY],[r[1].clientX,r[1].clientY])/Math.PI*180}function isMultiTouch(r){return r.touches&&r.touches.length>=2}function getEventClients(r){return r?r.touches?getClients(r.touches):[getClient$1(r)]:[]}function isMouseEvent(r){return r&&(r.type.indexOf("mouse")>-1||"button"in r)}function getPosition(r,e,t){var n=t.length,i=getAverageClient(r,n),a=i.clientX,o=i.clientY,s=i.originalClientX,l=i.originalClientY,c=getAverageClient(e,n),u=c.clientX,f=c.clientY,d=getAverageClient(t,n),g=d.clientX,p=d.clientY,v=a-u,y=o-f,m=a-g,x=o-p;return{clientX:s,clientY:l,deltaX:v,deltaY:y,distX:m,distY:x}}function getDist$1(r){return Math.sqrt(Math.pow(r[0].clientX-r[1].clientX,2)+Math.pow(r[0].clientY-r[1].clientY,2))}function getClients(r){for(var e=Math.min(r.length,2),t=[],n=0;n<e;++n)t.push(getClient$1(r[n]));return t}function getClient$1(r){return{clientX:r.clientX,clientY:r.clientY}}function getAverageClient(r,e){e===void 0&&(e=r.length);for(var t={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(r.length,e),i=0;i<n;++i){var a=r[i];t.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,t.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,t.clientX+=a.clientX,t.clientY+=a.clientY}return e?{clientX:t.clientX/e,clientY:t.clientY/e,originalClientX:t.originalClientX/e,originalClientY:t.originalClientY/e}:t}var ClientStore=function(){function r(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return r.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),getRotatiion(e)},r.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),getRotatiion(e)-getRotatiion(this.startClients)},r.prototype.getPosition=function(e,t){e===void 0&&(e=this.prevClients);var n=getPosition(e||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,a=n.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,n},r.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var t=this.prevClients,n=this.startClients,i=Math.min(this.length,t.length),a=[],o=0;o<i;++o)a[o]=getPosition([e[o]],[t[o]],[n[o]]);return a},r.prototype.getMovement=function(e){var t=this.movement;if(!e)return t;var n=getAverageClient(e,this.length),i=getAverageClient(this.prevClients,this.length),a=n.clientX-i.clientX,o=n.clientY-i.clientY;return Math.sqrt(a*a+o*o)+t},r.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),getDist$1(e)},r.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),getDist$1(e)/getDist$1(this.startClients)},r.prototype.move=function(e,t){this.startClients.forEach(function(n){n.clientX-=e,n.clientY-=t}),this.prevClients.forEach(function(n){n.clientX-=e,n.clientY-=t})},r}(),INPUT_TAGNAMES=["textarea","input"],Gesto=function(r){__extends$8(e,r);function e(t,n){n===void 0&&(n={});var i=r.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._window=window,i.onDragStart=function(d,g){if(g===void 0&&(g=!0),!(!i.flag&&d.cancelable===!1)){var p=d.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var v=i.options,y=v.container,m=v.pinchOutside,x=v.preventWheelClick,_=v.preventRightClick,S=v.preventDefault,A=v.checkInput,b=v.dragFocusedInput,C=v.preventClickEventOnDragStart,E=v.preventClickEventOnDrag,T=v.preventClickEventByCondition,I=i._useTouch,w=!i.flag;if(i._isSecondaryButton=d.which===3||d.button===2,x&&(d.which===2||d.button===1)||_&&(d.which===3||d.button===2))return i.stop(),!1;if(w){var M=i._window.document.activeElement,$=d.target;if($){var P=$.tagName.toLowerCase(),R=INPUT_TAGNAMES.indexOf(P)>-1,L=$.isContentEditable;if(R||L){if(A||!b&&M===$)return!1;if(M&&(M===$||L&&M.isContentEditable&&M.contains($)))if(b)$.blur();else return!1}else if((S||d.type==="touchstart")&&M){var O=M.tagName.toLowerCase();(M.isContentEditable||INPUT_TAGNAMES.indexOf(O)>-1)&&M.blur()}(C||E||T)&&addEvent(i._window,"click",i._onClick,!0)}i.clientStores=[new ClientStore(getEventClients(d))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=g,i._dragFlag=!0,i._prevInputEvent=d,i.data={},i.doubleFlag=now$1()-i.prevTime<200,i._isMouseEvent=isMouseEvent(d),!i._isMouseEvent&&i._preventMouseEvent&&(i._preventMouseEvent=!1);var k=i._preventMouseEvent||i.emit("dragStart",__assign$8(__assign$8({data:i.data,datas:i.data,inputEvent:d,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:g,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));k===!1&&i.stop(),i._isMouseEvent&&i.flag&&S&&d.preventDefault()}if(!i.flag)return!1;var B=0;if(w?(i._attchDragEvent(),I&&m&&(B=setTimeout(function(){addEvent(y,"touchstart",i.onDragStart,{passive:!1})}))):I&&m&&removeEvent(y,"touchstart",i.onDragStart),i.flag&&isMultiTouch(d)){if(clearTimeout(B),w&&d.touches.length!==d.changedTouches.length)return;i.pinchFlag||i.onPinchStart(d)}}}},i.onDrag=function(d,g){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&d.preventDefault(),i._prevInputEvent=d;var v=getEventClients(d),y=i.moveClients(v,d,!1);if(i._dragFlag){if(i.pinchFlag||y.deltaX||y.deltaY){var m=i._preventMouseEvent||i.emit("drag",__assign$8(__assign$8({},y),{isScroll:!!g,inputEvent:d}));if(m===!1){i.stop();return}}i.pinchFlag&&i.onPinch(d,v)}i.getCurrentStore().getPosition(v,!0)}},i.onDragEnd=function(d){if(i.flag){var g=i.options,p=g.pinchOutside,v=g.container,y=g.preventClickEventOnDrag,m=g.preventClickEventOnDragStart,x=g.preventClickEventByCondition,_=i.isDrag;(y||m||x)&&requestAnimationFrame(function(){i._allowClickEvent()}),!x&&!m&&y&&!_&&i._allowClickEvent(),i._useTouch&&p&&removeEvent(v,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(d);var S=d!=null&&d.touches?getEventClients(d):[],A=S.length;A===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ClientStore(S));var b=i._getPosition(),C=now$1(),E=!_&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=_||E?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",__assign$8({data:i.data,datas:i.data,isDouble:E,isDrag:_,isClick:!_,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:d,isTrusted:i._isTrusted},b)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){i._preventMouseEvent=!1})})),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){removeEvent(i._window,"click",i._onClick,!0)},i._onClick=function(d){i._allowClickEvent(),i._preventMouseEvent=!1;var g=i.options.preventClickEventByCondition;g!=null&&g(d)||(d.stopPropagation(),d.preventDefault())},i._onContextMenu=function(d){var g=i.options;g.preventRightClick?i.onDragEnd(d):d.preventDefault()},i._passCallback=function(){};var a=[].concat(t),o=a[0];i._window=isWindow(o)?o:getWindow(o),i.options=__assign$8({checkInput:!1,container:o&&!("document"in o)?getWindow(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=i.options,l=s.container,c=s.events,u=s.checkWindowBlur;if(i._useDrag=c.indexOf("drag")>-1,i._useTouch=c.indexOf("touch")>-1,i._useMouse=c.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(d){addEvent(d,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(d){addEvent(d,"mousedown",i.onDragStart),addEvent(d,"mousemove",i._passCallback)}),addEvent(l,"contextmenu",i._onContextMenu)),u&&addEvent(getWindow(),"blur",i.onBlur),i._useTouch){var f={passive:!1};a.forEach(function(d){addEvent(d,"touchstart",i.onDragStart,f),addEvent(d,"touchmove",i._passCallback,f)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,n,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(t,n),a&&this.onDrag(i,!0))},e.prototype.move=function(t,n){var i=t[0],a=t[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+i,clientY:u+a,originalClientX:c,originalClientY:u}}),n,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var n=this.data;for(var i in t)n[i]=t[i];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return t===void 0&&(t=this._prevInputEvent),__assign$8(__assign$8({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,n=this.targets,i=this.options.container;this.off(),removeEvent(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(a){removeEvent(a,"dragstart",t.onDragStart)}),this._useMouse&&(n.forEach(function(a){removeEvent(a,"mousedown",t.onDragStart)}),removeEvent(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(a){removeEvent(a,"touchstart",t.onDragStart)}),removeEvent(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ClientStore(getEventClients(t));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",__assign$8(__assign$8({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",__assign$8(__assign$8({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",__assign$8(__assign$8({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,n,i){var a=this._getPosition(t,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),__assign$8(__assign$8({data:this.data,datas:this.data},a),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,n){var i=this.getCurrentStore(),a=i.getPosition(t,n),o=this.clientStores.slice(1).reduce(function(c,u){var f=u.getPosition();return c.distX+=f.distX,c.distY+=f.distY,c},a),s=o.distX,l=o.distY;return __assign$8(__assign$8({},a),{distX:s,distY:l})},e.prototype._attchDragEvent=function(){var t=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(addEvent(n,"dragover",this.onDrag,i),addEvent(t,"dragend",this.onDragEnd)),this._useMouse&&(addEvent(n,"mousemove",this.onDrag),addEvent(t,"mouseup",this.onDragEnd)),this._useTouch&&(addEvent(n,"touchmove",this.onDrag,i),addEvent(t,"touchend",this.onDragEnd,i),addEvent(t,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var t=this._window,n=this.options.container;this._isDragAPI&&(removeEvent(n,"dragover",this.onDrag),removeEvent(t,"dragend",this.onDragEnd)),this._useMouse&&(removeEvent(n,"mousemove",this.onDrag),removeEvent(t,"mouseup",this.onDragEnd)),this._useTouch&&(removeEvent(n,"touchstart",this.onDragStart),removeEvent(n,"touchmove",this.onDrag),removeEvent(t,"touchend",this.onDragEnd),removeEvent(t,"touchcancel",this.onDragEnd))},e}(EventEmitter$2);function prefixNames(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.map(function(n){return n.split(" ").map(function(i){return i?""+r+i:""}).join(" ")}).join(" ")}function prefixCSS(r,e){return e.replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+r+"$1")+"{"})}function ref(r,e){return function(t){t&&(r[e]=t)}}function refs(r,e,t){return function(n){n&&(r[e][t]=n)}}function Properties(r,e){return function(t){var n=t.prototype;r.forEach(function(i){e(n,i)})}}function withMethods(r,e){return e===void 0&&(e={}),function(t,n){r.forEach(function(i){var a=e[i]||i;a in t||(t[a]=function(){for(var o,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var c=(o=this[n])[i].apply(o,s);return c===this[n]?this:c})})}}var PolyMap=function(){function r(){this.keys=[],this.values=[]}var e=r.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,n){var i=this.keys,a=this.values,o=i.indexOf(t),s=o===-1?i.length:o;i[s]=t,a[s]=n},r}(),HashMap=function(){function r(){this.object={}}var e=r.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,n){this.object[t]=n},r}(),SUPPORT_MAP=typeof Map=="function",Link=function(){function r(){}var e=r.prototype;return e.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},e.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},e.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},r}();function orderChanged(r,e){var t=[],n=[];return r.forEach(function(i){var a=i[0],o=i[1],s=new Link;t[a]=s,n[o]=s}),t.forEach(function(i,a){i.connect(t[a-1])}),r.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],s=i[1];if(o===s)return[0,0];var l=t[o],c=n[s-1],u=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,t[0]);var f=l.getIndex();return[u,f]})}var Result=function(){function r(t,n,i,a,o,s,l,c){this.prevList=t,this.list=n,this.added=i,this.removed=a,this.changed=o,this.maintained=s,this.changedBeforeAdded=l,this.fixed=c}var e=r.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=orderChanged(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=t.filter(function(a,o){var s=a[0],l=a[1],c=n[o],u=c[0],f=c[1];if(s!==l)return i.push([u,f]),!0}),this.cachePureChanged=i},r}();function diff$2(r,e,t){var n=SUPPORT_MAP?Map:t?HashMap:PolyMap,i=t||function(x){return x},a=[],o=[],s=[],l=r.map(i),c=e.map(i),u=new n,f=new n,d=[],g=[],p={},v=[],y=0,m=0;return l.forEach(function(x,_){u.set(x,_)}),c.forEach(function(x,_){f.set(x,_)}),l.forEach(function(x,_){var S=f.get(x);typeof S>"u"?(++m,o.push(_)):p[S]=m}),c.forEach(function(x,_){var S=u.get(x);typeof S>"u"?(a.push(_),++y):(s.push([S,_]),m=p[_]||0,d.push([S-m,_-y]),g.push(_===S),S!==_&&v.push([S,_]))}),o.reverse(),new Result(r,e,a,o,v,s,d,g)}var ListDiffer=function(){function r(t,n){t===void 0&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}var e=r.prototype;return e.update=function(t){var n=[].slice.call(t),i=diff$2(this.list,n,this.findKeyCallback);return this.list=n,i},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$7=function(r,e){return extendStatics$7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$7(r,e)};function __extends$7(r,e){extendStatics$7(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var findKeyCallback=typeof Map=="function"?void 0:function(){var r=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++r)}}(),ChildrenDiffer=function(r){__extends$7(e,r);function e(t){return t===void 0&&(t=[]),r.call(this,t,findKeyCallback)||this}return e}(ListDiffer);function diff$1(r,e){return diff$2(r,e,findKeyCallback)}const ChildrenDiffer$1=ChildrenDiffer;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$6=function(r,e){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$6(r,e)};function __extends$6(r,e){extendStatics$6(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var __assign$7=function(){return __assign$7=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$7.apply(this,arguments)};function getDefaultScrollPosition$1(r){var e=r.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function checkDefaultScrollEvent(r,e){return r.addEventListener("scroll",e),function(){r.removeEventListener("scroll",e)}}function getContainerElement(r){if(r){if(isString$1(r))return document.querySelector(r)}else return null;if(isFunction$1(r))return r();if(r instanceof Element)return r;if("current"in r)return r.current;if("value"in r)return r.value}var DragScroll=function(r){__extends$6(e,r);function e(){var n=r!==null&&r.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(a){n.checkScroll({container:i.container,inputEvent:a})}})},n}var t=e.prototype;return t.dragStart=function(n,i){var a=getContainerElement(i.container);if(!a){this._flag=!1;return}var o=0,s=0,l=0,c=0;if(a===document.body)l=window.innerWidth,c=window.innerHeight;else{var u=a.getBoundingClientRect();o=u.top,s=u.left,l=u.width,c=u.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},t.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var a=n.clientX,o=n.clientY,s=i.threshold,l=s===void 0?0:s,c=this,u=c._startRect,f=c._startPos;this._currentOptions=i;var d=[0,0];return u.top>o-l?(f[1]>u.top||o<f[1])&&(d[1]=-1):u.top+u.height<o+l&&(f[1]<u.top+u.height||o>f[1])&&(d[1]=1),u.left>a-l?(f[0]>u.left||a<f[0])&&(d[0]=-1):u.left+u.width<a+l&&(f[0]<u.left+u.width||a>f[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(__assign$7(__assign$7({},i),{direction:d,inputEvent:n,isDrag:!0}))}},t.checkScroll=function(n){var i=this;if(this._isWait)return!1;var a=n.prevScrollPos,o=a===void 0?this._prevScrollPos:a,s=n.direction,l=n.throttleTime,c=l===void 0?0:l,u=n.inputEvent,f=n.isDrag,d=this._getScrollPosition(s||[0,0],n),g=d[0]-o[0],p=d[1]-o[1],v=s||[g?Math.abs(g)/g:0,p?Math.abs(p)/p:0];return this._prevScrollPos=d,this._lock=!1,!g&&!p?!1:(this.emit("move",{offsetX:v[0]?g:0,offsetY:v[1]?p:0,inputEvent:u}),c&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},c)),!0)},t.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},t._getScrollPosition=function(n,i){var a=i.container,o=i.getScrollPosition,s=o===void 0?getDefaultScrollPosition$1:o;return s({container:getContainerElement(a),direction:n})},t._continueDrag=function(n){var i=this,a,o=n.container,s=n.direction,l=n.throttleTime,c=n.useScroll,u=n.isDrag,f=n.inputEvent;if(!(!this._flag||u&&this._isWait)){var d=now$1(),g=Math.max(l+this._prevTime-d,0);if(g>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},g),!1;this._prevTime=d;var p=this._getScrollPosition(s,n);this._prevScrollPos=p,u&&(this._isWait=!0),c||(this._lock=!0);var v={container:getContainerElement(o),direction:s,inputEvent:f};return(a=n.requestScroll)===null||a===void 0||a.call(n,v),this.emit("scroll",v),this._isWait=!1,c||this.checkScroll(__assign$7(__assign$7({},n),{prevScrollPos:p,direction:s,inputEvent:f}))}},t._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var a=i===!0?checkDefaultScrollEvent:i,o=getContainerElement(n.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=checkDefaultScrollEvent(window,this._onScroll):this._unregister=a(o,this._onScroll)}},t._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},e}(EventEmitter$2);const DragScroll$1=DragScroll;var extendStatics$5=function(r,e){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},extendStatics$5(r,e)};function __extends$5(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$5(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function createCommonjsModule(r,e){return e={exports:{}},r(e,e.exports),e.exports}var keycode=createCommonjsModule(function(r,e){function t(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return o[l];var u=String(l),f=n[u.toLowerCase()];if(f)return f;var f=i[u.toLowerCase()];if(f)return f;if(u.length===1)return u.charCodeAt(0)}t.isEventKey=function(c,u){if(c&&typeof c=="object"){var f=c.which||c.keyCode||c.charCode;if(f==null)return!1;if(typeof u=="string"){var d=n[u.toLowerCase()];if(d)return d===f;var d=i[u.toLowerCase()];if(d)return d===f}else if(typeof u=="number")return u===f;return!1}},e=r.exports=t;var n=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var o=e.names=e.title={};for(a in n)o[n[a]]=a;for(var s in i)n[s]=i[s]});keycode.code;keycode.codes;keycode.aliases;var keycode_4=keycode.names;keycode.title;var codeData={"+":"plus","left command":"meta","right command":"meta"},keysSort={shift:1,ctrl:2,alt:3,meta:4};function getKey(r,e){var t=(keycode_4[r]||e||"").toLowerCase();for(var n in codeData)t=t.replace(n,codeData[n]);return t.replace(/\s/g,"")}function getCombi(r,e){e===void 0&&(e=getKey(r.keyCode,r.key));var t=getModifierCombi(r);return t.indexOf(e)===-1&&t.push(e),t.filter(Boolean)}function getModifierCombi(r){var e=[r.shiftKey&&"shift",r.ctrlKey&&"ctrl",r.altKey&&"alt",r.metaKey&&"meta"];return e.filter(Boolean)}function getArrangeCombi(r){var e=r.slice();return e.sort(function(t,n){var i=keysSort[t]||5,a=keysSort[n]||5;return i-a}),e}var globalKeyController,KeyController=function(r){__extends$5(e,r);function e(n){n===void 0&&(n=window);var i=r.call(this)||this;return i.container=n,i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i.clear=function(){return i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i},i.keydownEvent=function(a){i.triggerEvent("keydown",a)},i.keyupEvent=function(a){i.triggerEvent("keyup",a)},i.blur=function(){i.clear(),i.trigger("blur")},addEvent(n,"blur",i.blur),addEvent(n,"keydown",i.keydownEvent),addEvent(n,"keyup",i.keyupEvent),i}var t=e.prototype;return Object.defineProperty(e,"global",{get:function(){return globalKeyController||(globalKeyController=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},t.destroy=function(){var n=this.container;this.clear(),this.off(),removeEvent(n,"blur",this.blur),removeEvent(n,"keydown",this.keydownEvent),removeEvent(n,"keyup",this.keyupEvent)},t.keydown=function(n,i){return this.addEvent("keydown",n,i)},t.offKeydown=function(n,i){return this.removeEvent("keydown",n,i)},t.offKeyup=function(n,i){return this.removeEvent("keyup",n,i)},t.keyup=function(n,i){return this.addEvent("keyup",n,i)},t.addEvent=function(n,i,a){return isArray$4(i)?this.on("".concat(n,".").concat(getArrangeCombi(i).join(".")),a):isString$1(i)?this.on("".concat(n,".").concat(i),a):this.on(n,i),this},t.removeEvent=function(n,i,a){return isArray$4(i)?this.off("".concat(n,".").concat(getArrangeCombi(i).join(".")),a):isString$1(i)?this.off("".concat(n,".").concat(i),a):this.off(n,i),this},t.triggerEvent=function(n,i){this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey;var a=getKey(i.keyCode,i.key),o=a==="ctrl"||a==="shift"||a==="meta"||a==="alt",s={key:a,isToggle:o,inputEvent:i,keyCode:i.keyCode,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey};this.trigger(n,s),this.trigger("".concat(n,".").concat(a),s);var l=getCombi(i,a);l.length>1&&this.trigger("".concat(n,".").concat(l.join(".")),s)},e}(EventEmitter$2);const KeyController$1=KeyController;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __spreadArrays$1(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function tinyThrottle(r){return throttle$1(r,TINY_NUM$1)}function isSameConstants(r,e){return r.every(function(t,n){return tinyThrottle(t-e[n])===0})}function isSamePoint$2(r,e){return!tinyThrottle(r[0]-e[0])&&!tinyThrottle(r[1]-e[1])}function getAreaSize(r){return r.length<3?0:Math.abs(sum(r.map(function(e,t){var n=r[t+1]||r[0];return e[0]*n[1]-n[0]*e[1]})))/2}function fitPoints(r,e){var t=e.width,n=e.height,i=e.left,a=e.top,o=getMinMaxs(r),s=o.minX,l=o.minY,c=o.maxX,u=o.maxY,f=t/(c-s),d=n/(u-l);return r.map(function(g){return[i+(g[0]-s)*f,a+(g[1]-l)*d]})}function getMinMaxs(r){var e=r.map(function(n){return n[0]}),t=r.map(function(n){return n[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,t),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,t)}}function isInside(r,e,t){var n=r[0],i=r[1],a=getMinMaxs(e),o=a.minX,s=a.maxX,l=[[o,i],[s,i]],c=getLinearConstants(l[0],l[1]),u=convertLines(e),f=[];if(u.forEach(function(p){var v=getLinearConstants(p[0],p[1]),y=p[0];if(isSameConstants(c,v))f.push({pos:r,line:p,type:"line"});else{var m=getPointsOnLines(getIntersectionPointsByConstants(c,v),[l,p]);m.forEach(function(x){p.some(function(_){return isSamePoint$2(_,x)})?f.push({pos:x,line:p,type:"point"}):tinyThrottle(y[1]-i)!==0&&f.push({pos:x,line:p,type:"intersection"})})}}),!t&&find$3(f,function(p){return p[0]===n}))return!0;var d=0,g={};return f.forEach(function(p){var v=p.pos,y=p.type,m=p.line;if(!(v[0]>n))if(y==="intersection")++d;else{if(y==="line")return;if(y==="point"){var x=find$3(m,function(A){return A[1]!==i}),_=g[v[0]],S=x[1]>i?1:-1;_?_!==S&&++d:g[v[0]]=S}}}),d%2===1}function getLinearConstants(r,e){var t=r[0],n=r[1],i=e[0],a=e[1],o=i-t,s=a-n;Math.abs(o)<TINY_NUM$1&&(o=0),Math.abs(s)<TINY_NUM$1&&(s=0);var l=0,c=0,u=0;return o?s?(l=-s/o,c=1,u=-l*t-n):(c=1,u=-n):s&&(l=-1,u=t),[l,c,u]}function getIntersectionPointsByConstants(r,e){var t=r[0],n=r[1],i=r[2],a=e[0],o=e[1],s=e[2],l=t===0&&a===0,c=n===0&&o===0,u=[];if(l&&c)return[];if(l){var f=-i/n,d=-s/o;return f!==d?[]:[[-1/0,f],[1/0,f]]}else if(c){var g=-i/t,p=-s/a;return g!==p?[]:[[g,-1/0],[g,1/0]]}else if(t===0){var v=-i/n,y=-(o*v+s)/a;u=[[y,v]]}else if(a===0){var v=-s/o,y=-(n*v+i)/t;u=[[y,v]]}else if(n===0){var y=-i/t,v=-(a*y+s)/o;u=[[y,v]]}else if(o===0){var y=-s/a,v=-(t*y+i)/n;u=[[y,v]]}else{var y=(n*s-o*i)/(o*t-n*a),v=-(t*y+i)/n;u=[[y,v]]}return u.map(function(m){return[m[0],m[1]]})}function getPointsOnLines(r,e){var t=e.map(function(f){return[0,1].map(function(d){return[Math.min(f[0][d],f[1][d]),Math.max(f[0][d],f[1][d])]})}),n=[];if(r.length===2){var i=r[0],a=i[0],o=i[1];if(tinyThrottle(a-r[1][0])){if(!tinyThrottle(o-r[1][1])){var c=Math.max.apply(Math,t.map(function(f){return f[0][0]})),u=Math.min.apply(Math,t.map(function(f){return f[0][1]}));if(tinyThrottle(c-u)>0)return[];n=[[c,o],[u,o]]}}else{var s=Math.max.apply(Math,t.map(function(f){return f[1][0]})),l=Math.min.apply(Math,t.map(function(f){return f[1][1]}));if(tinyThrottle(s-l)>0)return[];n=[[a,s],[a,l]]}}return n.length||(n=r.filter(function(f){var d=f[0],g=f[1];return t.every(function(p){return 0<=tinyThrottle(d-p[0][0])&&0<=tinyThrottle(p[0][1]-d)&&0<=tinyThrottle(g-p[1][0])&&0<=tinyThrottle(p[1][1]-g)})})),n.map(function(f){return[tinyThrottle(f[0]),tinyThrottle(f[1])]})}function convertLines(r){return __spreadArrays$1(r.slice(1),[r[0]]).map(function(e,t){return[r[t],e]})}function getOverlapPointInfos(r,e){var t=r.slice(),n=e.slice();getShapeDirection(t)===-1&&t.reverse(),getShapeDirection(n)===-1&&n.reverse();var i=convertLines(t),a=convertLines(n),o=i.map(function(u){return getLinearConstants(u[0],u[1])}),s=a.map(function(u){return getLinearConstants(u[0],u[1])}),l=[];o.forEach(function(u,f){var d=i[f],g=[];s.forEach(function(p,v){var y=getIntersectionPointsByConstants(u,p),m=getPointsOnLines(y,[d,a[v]]);g.push.apply(g,m.map(function(x){return{index1:f,index2:v,pos:x,type:"intersection"}}))}),g.sort(function(p,v){return getDist$2(d[0],p.pos)-getDist$2(d[0],v.pos)}),l.push.apply(l,g),isInside(d[1],n)&&l.push({index1:f,index2:-1,pos:d[1],type:"inside"})}),a.forEach(function(u,f){if(isInside(u[1],t)){var d=!1,g=findIndex$1(l,function(p){var v=p.index2;return v===f?(d=!0,!1):!!d});g===-1&&(d=!1,g=findIndex$1(l,function(p){var v=p.index1,y=p.index2;return v===-1&&y+1===f?(d=!0,!1):!!d})),g===-1?l.push({index1:-1,index2:f,pos:u[1],type:"inside"}):l.splice(g,0,{index1:-1,index2:f,pos:u[1],type:"inside"})}});var c={};return l.filter(function(u){var f=u.pos,d=f[0]+"x"+f[1];return c[d]?!1:(c[d]=!0,!0)})}function getOverlapPoints(r,e){var t=getOverlapPointInfos(r,e);return t.map(function(n){var i=n.pos;return i})}function getOverlapSize(r,e){var t=getOverlapPoints(r,e);return getAreaSize(t)}function add$1(r,e,t,n,i,a){for(var o=0;o<i;++o){var s=t+o*i,l=n+o*i;r[s]+=r[l]*a,e[s]+=e[l]*a}}function swap$2(r,e,t,n,i){for(var a=0;a<i;++a){var o=t+a*i,s=n+a*i,l=r[o],c=e[o];r[o]=r[s],r[s]=l,e[o]=e[s],e[s]=c}}function divide(r,e,t,n,i){for(var a=0;a<n;++a){var o=t+a*n;r[o]/=i,e[o]/=i}}function ignoreDimension(r,e,t){t===void 0&&(t=Math.sqrt(r.length));for(var n=r.slice(),i=0;i<t;++i)n[i*t+e-1]=0,n[(e-1)*t+i]=0;return n[(e-1)*(t+1)]=1,n}function invert$2(r,e){e===void 0&&(e=Math.sqrt(r.length));for(var t=r.slice(),n=createIdentityMatrix(e),i=0;i<e;++i){var a=e*i+i;if(!throttle$1(t[a],TINY_NUM$1)){for(var o=i+1;o<e;++o)if(t[e*i+o]){swap$2(t,n,i,o,e);break}}if(!throttle$1(t[a],TINY_NUM$1))return[];divide(t,n,i,e,t[a]);for(var o=0;o<e;++o){var s=o,l=o+i*e,c=t[l];!throttle$1(c,TINY_NUM$1)||i===o||add$1(t,n,s,i,e,-c)}}return n}function transpose$2(r,e){e===void 0&&(e=Math.sqrt(r.length));for(var t=[],n=0;n<e;++n)for(var i=0;i<e;++i)t[i*e+n]=r[e*n+i];return t}function getOrigin(r,e){e===void 0&&(e=Math.sqrt(r.length));for(var t=[],n=r[e*e-1],i=0;i<e-1;++i)t[i]=r[e*(e-1)+i]/n;return t[e-1]=0,t}function fromTranslation$1(r,e){for(var t=createIdentityMatrix(e),n=0;n<e-1;++n)t[e*(e-1)+n]=r[n]||0;return t}function convertPositionMatrix(r,e){for(var t=r.slice(),n=r.length;n<e-1;++n)t[n]=0;return t[e-1]=1,t}function convertDimension(r,e,t){if(e===void 0&&(e=Math.sqrt(r.length)),e===t)return r;for(var n=createIdentityMatrix(t),i=Math.min(e,t),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)n[a*t+o]=r[a*e+o];n[(a+1)*t-1]=r[(a+1)*e-1],n[(t-1)*t+a]=r[(e-1)*e+a]}return n[t*t-1]=r[e*e-1],n}function multiplies(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=createIdentityMatrix(r);return e.forEach(function(i){n=multiply$1(n,i,r)}),n}function multiply$1(r,e,t){t===void 0&&(t=Math.sqrt(r.length));var n=[],i=r.length/t,a=e.length/i;if(i){if(!a)return r}else return e;for(var o=0;o<t;++o)for(var s=0;s<a;++s){n[s*t+o]=0;for(var l=0;l<i;++l)n[s*t+o]+=r[l*t+o]*e[s*i+l]}return n}function plus(r,e){for(var t=Math.min(r.length,e.length),n=r.slice(),i=0;i<t;++i)n[i]=n[i]+e[i];return n}function minus(r,e){for(var t=Math.min(r.length,e.length),n=r.slice(),i=0;i<t;++i)n[i]=n[i]-e[i];return n}function convertCSStoMatrix(r,e){return e===void 0&&(e=r.length===6),e?[r[0],r[1],0,r[2],r[3],0,r[4],r[5],1]:r}function convertMatrixtoCSS(r,e){return e===void 0&&(e=r.length===9),e?[r[0],r[1],r[3],r[4],r[6],r[7]]:r}function calculate(r,e,t){t===void 0&&(t=e.length);var n=multiply$1(r,e,t),i=n[t-1];return n.map(function(a){return a/i})}function rotateX3d(r,e){return multiply$1(r,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function rotateY3d(r,e){return multiply$1(r,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function rotateZ3d(r,e){return multiply$1(r,createRotateMatrix(e,4))}function scale3d(r,e){var t=e[0],n=t===void 0?1:t,i=e[1],a=i===void 0?1:i,o=e[2],s=o===void 0?1:o;return multiply$1(r,[n,0,0,0,0,a,0,0,0,0,s,0,0,0,0,1],4)}function rotate$2(r,e){return calculate(createRotateMatrix(e,3),convertPositionMatrix(r,3))}function translate3d(r,e){var t=e[0],n=t===void 0?0:t,i=e[1],a=i===void 0?0:i,o=e[2],s=o===void 0?0:o;return multiply$1(r,[1,0,0,0,0,1,0,0,0,0,1,0,n,a,s,1],4)}function matrix3d(r,e){return multiply$1(r,e,4)}function createRotateMatrix(r,e){var t=Math.cos(r),n=Math.sin(r),i=createIdentityMatrix(e);return i[0]=t,i[1]=n,i[e]=-n,i[e+1]=t,i}function createIdentityMatrix(r){for(var e=r*r,t=[],n=0;n<e;++n)t[n]=n%(r+1)?0:1;return t}function createScaleMatrix(r,e){for(var t=createIdentityMatrix(e),n=Math.min(r.length,e-1),i=0;i<n;++i)t[(e+1)*i]=r[i];return t}function createOriginMatrix(r,e){for(var t=createIdentityMatrix(e),n=Math.min(r.length,e-1),i=0;i<n;++i)t[e*(e-1)+i]=r[i];return t}function createWarpMatrix(r,e,t,n,i,a,o,s){var l=r[0],c=r[1],u=e[0],f=e[1],d=t[0],g=t[1],p=n[0],v=n[1],y=i[0],m=i[1],x=a[0],_=a[1],S=o[0],A=o[1],b=s[0],C=s[1],E=[l,0,u,0,d,0,p,0,c,0,f,0,g,0,v,0,1,0,1,0,1,0,1,0,0,l,0,u,0,d,0,p,0,c,0,f,0,g,0,v,0,1,0,1,0,1,0,1,-y*l,-m*l,-x*u,-_*u,-S*d,-A*d,-b*p,-C*p,-y*c,-m*c,-x*f,-_*f,-S*g,-A*g,-b*v,-C*v],T=invert$2(E,8);if(!T.length)return[];var I=multiply$1(T,[y,m,x,_,S,A,b,C],8);return I[8]=1,convertDimension(transpose$2(I),3,4)}var __assign$6=function(){return __assign$6=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$6.apply(this,arguments)};function createMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function parseMat(r,e){return e===void 0&&(e=0),toMat(parse$1(r,e))}function calculateMatrixDist(r,e){var t=calculate(r,[e[0],e[1]||0,e[2]||0,1],4),n=t[3]||1;return[t[0]/n,t[1]/n,t[2]/n]}function getDistElementMatrix(r,e){e===void 0&&(e=document.body);for(var t=r,n=createMatrix();t;){var i=getComputedStyle(t).transform;if(n=matrix3d(parseMat(i),n),t===e)break;t=t.parentElement}return n=invert$2(n,4),n[12]=0,n[13]=0,n[14]=0,n}function toMat(r){var e=createMatrix();return r.forEach(function(t){var n=t.matrixFunction,i=t.functionValue;n&&(e=n(e,i))}),e}function parse$1(r,e){e===void 0&&(e=0);var t=isArray$4(r)?r:splitSpace(r);return t.map(function(n){var i=splitBracket(n),a=i.prefix,o=i.value,s=null,l=a,c="";if(a==="translate"||a==="translateX"||a==="translate3d"){var u=isObject$1(e)?__assign$6(__assign$6({},e),{"o%":e["%"]}):{"%":e,"o%":e},f=splitComma(o).map(function($,P){return P===0&&"x%"in u?u["%"]=e["x%"]:P===1&&"y%"in u?u["%"]=e["y%"]:u["%"]=e["o%"],convertUnitSize($,u)}),d=f[0],g=f[1],p=g===void 0?0:g,v=f[2],y=v===void 0?0:v;s=translate3d,c=[d,p,y]}else if(a==="translateY"){var m=isObject$1(e)?__assign$6({"%":e["y%"]},e):{"%":e},p=convertUnitSize(o,m);s=translate3d,c=[0,p,0]}else if(a==="translateZ"){var y=parseFloat(o);s=translate3d,c=[0,0,y]}else if(a==="scale"||a==="scale3d"){var x=splitComma(o).map(function($){return parseFloat($)}),_=x[0],S=x[1],A=S===void 0?_:S,b=x[2],C=b===void 0?1:b;s=scale3d,c=[_,A,C]}else if(a==="scaleX"){var _=parseFloat(o);s=scale3d,c=[_,1,1]}else if(a==="scaleY"){var A=parseFloat(o);s=scale3d,c=[1,A,1]}else if(a==="scaleZ"){var C=parseFloat(o);s=scale3d,c=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var E=splitUnit(o),T=E.unit,I=E.value,w=T==="rad"?I:I*Math.PI/180;a==="rotate"||a==="rotateZ"?(l="rotateZ",s=rotateZ3d):a==="rotateX"?s=rotateX3d:a==="rotateY"&&(s=rotateY3d),c=w}else if(a==="matrix3d")s=matrix3d,c=splitComma(o).map(function($){return parseFloat($)});else if(a==="matrix"){var M=splitComma(o).map(function($){return parseFloat($)});s=matrix3d,c=[M[0],M[1],0,0,M[2],M[3],0,0,0,0,1,0,M[4],M[5],0,1]}else l="";return{name:a,functionName:l,value:o,matrixFunction:s,functionValue:c}})}function hash(r){for(var e=5381,t=r.length;t;)e=e*33^r.charCodeAt(--t);return e>>>0}var stringHash=hash;function getHash(r){return stringHash(r).toString(36)}function getShadowRoot$1(r){if(r&&r.getRootNode){var e=r.getRootNode();if(e.nodeType===11)return e}}function replaceStyle(r,e,t){return t.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var a=i.trim();return(a?splitComma(a):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(r))):s?".".concat(r," ").concat(s):".".concat(r)}).join(", ")+" {"})}function injectStyle(r,e,t,n,i){var a=getDocument(n),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",r),o.setAttribute("data-styled-count","1"),t.nonce&&o.setAttribute("nonce",t.nonce),o.innerHTML=replaceStyle(r,e,t),(i||a.head||a.body).appendChild(o),o}function styled$1(r){var e="rCS"+getHash(r);return{className:e,inject:function(t,n){n===void 0&&(n={});var i=getShadowRoot$1(t),a=(i||t.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=injectStyle(e,r,n,t,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,l=parseFloat(a.getAttribute("data-styled-count"))||0;l<=1?(a.remove?a.remove():(s=a.parentNode)===null||s===void 0||s.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(l-1))}}}}}var extendStatics$4=function(r,e){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},extendStatics$4(r,e)};function __extends$4(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$4(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var __assign$5=function(){return __assign$5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$5.apply(this,arguments)};function __rest$3(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function __decorate$2(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function __spreadArray$3(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function getClient(r){if("touches"in r){var e=r.touches[0]||r.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:r.clientX,clientY:r.clientY}}function filterDuplicated(r){if(typeof Map>"u")return r.filter(function(t,n){return r.indexOf(t)===n});var e=new Map;return r.filter(function(t){return e.has(t)?!1:(e.set(t,!0),!0)})}function elementFromPoint(r,e,t){var n=getDocument(r);return n.elementFromPoint&&n.elementFromPoint(e,t)||null}function createElement(r,e,t){var n=r.tag,i=r.children,a=r.attributes,o=r.className,s=r.style,l=e||getDocument(t).createElement(n);for(var c in a)l.setAttribute(c,a[c]);var u=l.children;if(i.forEach(function(d,g){createElement(d,u[g],l)}),o&&o.split(" ").forEach(function(d){hasClass$1(l,d)||addClass(l,d)}),s){var f=l.style;for(var c in s)f[c]=s[c]}return!e&&t&&t.appendChild(l),l}function h(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=e||{},a=i.className,o=a===void 0?"":a,s=i.style,l=s===void 0?{}:s,c=__rest$3(i,["className","style"]);return{tag:r,className:o,style:l,attributes:c,children:t}}function diffValue(r,e,t){r!==e&&t(r,e)}function getRect$1(r,e,t){var n;t===void 0&&(t=r.data.boundArea);var i=r.distX,a=i===void 0?0:i,o=r.distY,s=o===void 0?0:o,l=r.data,c=l.startX,u=l.startY;if(e>0){var f=Math.sqrt((a*a+s*s)/(1+e*e)),d=e*f;a=(a>=0?1:-1)*d,s=(s>=0?1:-1)*f}var g=Math.abs(a),p=Math.abs(s),v=a<0?c-t.left:t.right-c,y=s<0?u-t.top:t.bottom-u;n=calculateBoundSize([g,p],[0,0],[v,y],!!e),g=n[0],p=n[1],a=(a>=0?1:-1)*g,s=(s>=0?1:-1)*p;var m=Math.min(0,a),x=Math.min(0,s),_=c+m,S=u+x;return{left:_,top:S,right:_+g,bottom:S+p,width:g,height:p}}function getDefaultElementRect(r){var e=r.getBoundingClientRect(),t=e.left,n=e.top,i=e.width,a=e.height;return{pos1:[t,n],pos2:[t+i,n],pos3:[t,n+a],pos4:[t+i,n+a]}}function passTargets(r,e,t){var n=diff$1(r,e),i=n.list,a=n.prevList,o=n.added,s=n.removed,l=n.maintained;return __spreadArray$3(__spreadArray$3(__spreadArray$3([],o.map(function(c){return i[c]}),!0),s.map(function(c){return a[c]}),!0),t?l.map(function(c){var u=c[1];return i[u]}):[],!0)}function getLineSize(r){for(var e=0,t=r.length,n=1;n<t;++n)e=Math.max(getDist$2(r[n],r[n-1]),e);return e}var injector=styled$1(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),CLASS_NAME="selecto-selection ".concat(injector.className),PROPERTIES=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],OPTIONS=__spreadArray$3(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],PROPERTIES,!0),EVENTS$3=["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll","innerScroll"],METHODS=["clickTarget","getSelectableElements","setSelectedTargets","getElementPoints","getSelectedTargets","findSelectableTargets","triggerDragStart","checkScroll","selectTargetsByPoints","setSelectedTargetsByPoints"],Selecto$2=function(r){__extends$4(e,r);function e(n){n===void 0&&(n={});var i=r.call(this)||this;i.selectedTargets=[],i.dragScroll=new DragScroll$1,i._onDragStart=function(s,l){var c=s.data,u=s.clientX,f=s.clientY,d=s.inputEvent,g=i.options,p=g.selectFromInside,v=g.selectByClick,y=g.rootContainer,m=g.boundContainer,x=g.preventDragFromInside,_=x===void 0?!0:x,S=g.clickBySelectEnd,A=g.dragCondition;if(A&&!A(s)){s.stop();return}c.data={};var b=getWindow(i.container);c.innerWidth=b.innerWidth,c.innerHeight=b.innerHeight,i.findSelectableTargets(c),c.startSelectedTargets=i.selectedTargets,c.scaleMatrix=createMatrix(),c.containerX=0,c.containerY=0;var C=i.container,E={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(y){var T=i.container.getBoundingClientRect();c.containerX=T.left,c.containerY=T.top,c.scaleMatrix=getDistElementMatrix(i.container,y)}if(m){var I=isObject$1(m)&&"element"in m?__assign$5({left:!0,top:!0,bottom:!0,right:!0},m):{element:m,left:!0,top:!0,bottom:!0,right:!0},w=I.element,M=void 0;if(w){isString$1(w)?M=getDocument(C).querySelector(w):w===!0?M=i.container:M=w;var $=M.getBoundingClientRect();I.left&&(E.left=$.left),I.top&&(E.top=$.top),I.right&&(E.right=$.right),I.bottom&&(E.bottom=$.bottom)}}c.boundArea=E;var P={left:u,top:f,right:u,bottom:f,width:0,height:0},R=[];if(!p||v&&!S){var L=i._findElement(l||d.target,c.selectableTargets);R=L?[L]:[]}var O=R.length>0,k=!p&&O;if(k&&!v)return s.stop(),!1;var B=d.type,N=B==="mousedown"||B==="touchstart",F=!s.isClick&&N?i.emit("dragStart",__assign$5(__assign$5({},s),{data:c.data})):!0;if(!F)return s.stop(),!1;if(i.continueSelect?(R=passTargets(i.selectedTargets,R,i.continueSelectWithoutDeselect),c.startPassedTargets=i.selectedTargets):c.startPassedTargets=[],i._select(R,P,s,!0),c.startX=u,c.startY=f,c.selectFlag=!1,c.preventDragFromInside=!1,d.target){var V=calculateMatrixDist(c.scaleMatrix,[u-c.containerX,f-c.containerY]);i.target.style.cssText+="position: ".concat(y?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(V[0],"px, ").concat(V[1],"px)")}if(k&&v&&!S)d.preventDefault(),_&&(i._selectEnd(c.startSelectedTargets,c.startPassedTargets,P,s),c.preventDragFromInside=!0);else{c.selectFlag=!0;var H=i.options,z=H.scrollOptions,G=H.innerScrollOptions,j=!1;if(G){for(var Y=s.inputEvent,U=Y.target,K=null,q=U;q&&q!==getDocument(C).body;){var W=getComputedStyle(q).overflow!=="visible";if(W){K=q;break}q=q.parentElement}K&&(c.innerScrollOptions=__assign$5({container:K,checkScrollEvent:!0},G===!0?{}:G),i.dragScroll.dragStart(s,c.innerScrollOptions),j=!0)}!j&&z&&z.container&&i.dragScroll.dragStart(s,z),S&&(c.selectFlag=!1,s.preventDrag())}return!0},i._onDrag=function(s){if(s.data.selectFlag){var l=i.scrollOptions,c=s.data.innerScrollOptions,u=c||(l==null?void 0:l.container);if(u&&!s.isScroll&&i.dragScroll.drag(s,c||l))return}i._checkSelected(s)},i._onDragEnd=function(s){var l=s.data,c=s.inputEvent,u=getRect$1(s,i.options.ratio),f=l.selectFlag,d=i.container;if(c&&i.emit("dragEnd",__assign$5(__assign$5({isDouble:!!s.isDouble,isClick:!!s.isClick,isDrag:!1,isSelect:f},s),{data:l.data,rect:u})),i.target.style.cssText+="display: none;",f)l.selectFlag=!1,i.dragScroll.dragEnd();else if(i.selectByClick&&i.clickBySelectEnd){var g=i._findElement((c==null?void 0:c.target)||elementFromPoint(d,s.clientX,s.clientY),l.selectableTargets);i._select(g?[g]:[],u,s)}l.preventDragFromInside||i._selectEnd(l.startSelectedTargets,l.startPassedTargets,u,s)},i._onKeyDown=function(s){var l=i.options,c=!1;if(!i._keydownContinueSelect){var u=i._sameCombiKey(s,l.toggleContinueSelect);i._keydownContinueSelect=u,c||(c=u)}if(!i._keydownContinueSelectWithoutDeselection){var u=i._sameCombiKey(s,l.toggleContinueSelectWithoutDeselect);i._keydownContinueSelectWithoutDeselection=u,c||(c=u)}c&&i.emit("keydown",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onKeyUp=function(s){var l=i.options,c=!1;if(i._keydownContinueSelect){var u=i._sameCombiKey(s,l.toggleContinueSelect,!0);i._keydownContinueSelect=!u,c||(c=u)}if(i._keydownContinueSelectWithoutDeselection){var u=i._sameCombiKey(s,l.toggleContinueSelectWithoutDeselect,!0);i._keydownContinueSelectWithoutDeselection=!u,c||(c=u)}c&&i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onBlur=function(){(i._keydownContinueSelect||i._keydownContinueSelectWithoutDeselection)&&(i._keydownContinueSelect=!1,i._keydownContinueSelectWithoutDeselection=!1,i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection}))},i._onDocumentSelectStart=function(s){var l=getDocument(i.container);if(i.gesto.isFlag()){var c=i.dragContainer;c===getWindow(i.container)&&(c=l.documentElement);var u=isNode(c)?[c]:[].slice.call(c),f=s.target;u.some(function(d){if(d===f||d.contains(f))return s.preventDefault(),!0})}},i.target=n.portalContainer;var a=n.container;i.options=__assign$5({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:getDefaultElementRect,cspNonce:"",ratio:0},n);var o=i.options.portalContainer;return o&&(a=o.parentElement),i.container=a||document.body,i.initElement(),i.initDragScroll(),i.setKeyController(),i}var t=e.prototype;return t.setSelectedTargets=function(n){var i=this.selectedTargets,a=diff$1(i,n),o=a.added,s=a.removed,l=a.prevList,c=a.list;return this.selectedTargets=n,{added:o.map(function(u){return c[u]}),removed:s.map(function(u){return l[u]}),beforeSelected:i,selected:n}},t.setSelectedTargetsByPoints=function(n,i){var a=Math.min(n[0],i[0]),o=Math.min(n[1],i[1]),s=Math.max(n[0],i[0]),l=Math.max(n[1],i[1]),c={left:a,top:o,right:s,bottom:l,width:s-a,height:l-o},u={ignoreClick:!0};this.findSelectableTargets(u);var f=this.hitTest(c,u),d=this.setSelectedTargets(f);return __assign$5(__assign$5({},d),{rect:c})},t.selectTargetsByPoints=function(n,i){var a=new MouseEvent("mousedown",{clientX:n[0],clientY:n[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(a);c!==!1&&(l.onDrag(o),l.onDragEnd(s))},t.getSelectedTargets=function(){return this.selectedTargets},t.triggerDragStart=function(n){return this.gesto.triggerDragStart(n),this},t.destroy=function(){var n;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),removeEvent(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(n=this.target.parentElement)===null||n===void 0||n.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},t.getElementPoints=function(n){var i=this.getElementRect||getDefaultElementRect,a=i(n),o=[a.pos1,a.pos2,a.pos4,a.pos3];if(i!==getDefaultElementRect){var s=n.getBoundingClientRect();return fitPoints(o,s)}return o},t.getSelectableElements=function(){var n=this.container,i=[];return this.options.selectableTargets.forEach(function(a){if(isFunction$1(a)){var o=a();o&&i.push.apply(i,[].slice.call(o))}else if(isNode(a))i.push(a);else if(isObject$1(a))i.push(a.value||a.current);else{var s=[].slice.call(getDocument(n).querySelectorAll(a));i.push.apply(i,s)}}),i},t.checkScroll=function(){if(this.gesto.isFlag()){var n=this.scrollOptions,i=this.gesto.getEventData().innerScrollOptions,a=i||(n==null?void 0:n.container);a&&this.dragScroll.checkScroll(__assign$5({inputEvent:this.gesto.getCurrentEvent()},i||n))}},t.findSelectableTargets=function(n){var i=this;n===void 0&&(n=this.gesto.getEventData());var a=this.getSelectableElements(),o=a.map(function(f){return i.getElementPoints(f)});n.selectableTargets=a,n.selectablePoints=o,n.selectableParentMap=null;var s=this.options,l=s.checkOverflow||s.innerScrollOptions,c=getDocument(this.container);if(l){var u=new Map;n.selectableInnerScrollParentMap=u,n.selectableInnerScrollPathsList=a.map(function(f,d){for(var g=f.parentElement,p=[],v=[],y=function(){var m=u.get(g);if(!m){var x=getComputedStyle(g).overflow!=="visible";if(x){var _=getDefaultElementRect(g);m={parentElement:g,indexes:[],points:[_.pos1,_.pos2,_.pos4,_.pos3],paths:__spreadArray$3([],v,!0)},p.push(g),p.forEach(function(S){u.set(S,m)}),p=[]}}m?(g=m.parentElement,u.get(g).indexes.push(d),v.push(g)):p.push(g),g=g.parentElement};g&&g!==c.body;)y();return v})}return s.checkOverflow||(n.selectableInners=a.map(function(){return!0})),this._refreshGroups(n),a},t.clickTarget=function(n,i){var a=getClient(n),o=a.clientX,s=a.clientY,l={data:{selectFlag:!1},clientX:o,clientY:s,inputEvent:n,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,i)&&this._onDragEnd(l),this},t.setKeyController=function(){var n=this.options,i=n.keyContainer,a=n.toggleContinueSelect,o=n.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(a||o)&&(this.keycon=new KeyController$1(i||getWindow(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},t.setKeyEvent=function(){var n=this.options,i=n.toggleContinueSelect,a=n.toggleContinueSelectWithoutDeselect;!i&&!a||this.keycon||this.setKeyController()},t.setKeyContainer=function(n){var i=this,a=this.options;diffValue(a.keyContainer,n,function(){a.keyContainer=n,i.setKeyController()})},t.getContinueSelect=function(){var n=this.options,i=n.continueSelect,a=n.toggleContinueSelect;return!a||!this._keydownContinueSelect?i:!i},t.getContinueSelectWithoutDeselect=function(){var n=this.options,i=n.continueSelectWithoutDeselect,a=n.toggleContinueSelectWithoutDeselect;return!a||!this._keydownContinueSelectWithoutDeselection?i:!i},t.setToggleContinueSelect=function(n){var i=this,a=this.options;diffValue(a.toggleContinueSelect,n,function(){a.toggleContinueSelect=n,i.setKeyEvent()})},t.setToggleContinueSelectWithoutDeselect=function(n){var i=this,a=this.options;diffValue(a.toggleContinueSelectWithoutDeselect,n,function(){a.toggleContinueSelectWithoutDeselect=n,i.setKeyEvent()})},t.setPreventDefault=function(n){this.gesto.options.preventDefault=n},t.setCheckInput=function(n){this.gesto.options.checkInput=n},t.initElement=function(){var n=this.container;this.target=createElement(h("div",{className:CLASS_NAME}),this.target,n);var i=this.target,a=this.options,o=a.dragContainer,s=a.checkInput,l=a.preventDefault,c=a.preventClickEventOnDragStart,u=a.preventClickEventOnDrag,f=a.preventClickEventByCondition,d=a.preventRightClick,g=d===void 0?!0:d;this.dragContainer=typeof o=="string"?[].slice.call(getDocument(n).querySelectorAll(o)):o||this.target.parentNode,this.gesto=new Gesto(this.dragContainer,{checkWindowBlur:!0,container:getWindow(n),checkInput:s,preventDefault:l,preventClickEventOnDragStart:c,preventClickEventOnDrag:u,preventClickEventByCondition:f,preventRightClick:g}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),addEvent(document,"selectstart",this._onDocumentSelectStart),this.injectResult=injector.inject(i,{nonce:this.options.cspNonce})},t.hitTest=function(n,i,a){var o=this.options,s=o.hitRate,l=o.selectByClick,c=n.left,u=n.top,f=n.right,d=n.bottom,g=i.innerGroups,p=i.innerWidth,v=i.innerHeight,y=a==null?void 0:a.clientX,m=a==null?void 0:a.clientY,x=i.ignoreClick,_=[[c,u],[f,u],[f,d],[c,d]],S=splitUnit("".concat(s)),A=function(k,B){var N=x?!1:isInside([y,m],k);if(l&&N)return!0;var F=getOverlapPoints(_,k);if(!F.length)return!1;var V=getAreaSize(F),H=0;if(V===0&&getAreaSize(k)===0?(H=getLineSize(k),V=getLineSize(F)):H=getAreaSize(k),S.unit==="px")return V>=S.value;var z=between(Math.round(V/H*100),0,100);return z>=Math.min(100,S.value)},b=i.selectableTargets,C=i.selectablePoints,E=i.selectableInners;if(!g)return b.filter(function(k,B){return E[B]?A(C[B],b[B]):!1});for(var T=[],I=Math.floor(c/p),w=Math.floor(f/p),M=Math.floor(u/v),$=Math.floor(d/v),P=I;P<=w;++P){var R=g[P];if(R)for(var L=M;L<=$;++L){var O=R[L];O&&O.forEach(function(k){var B=C[k],N=E[k],F=b[k];N&&A(B)&&T.push(F)})}}return filterDuplicated(T)},t.initDragScroll=function(){var n=this;this.dragScroll.on("scrollDrag",function(i){var a=i.next;a(n.gesto.getCurrentEvent())}).on("scroll",function(i){var a=i.container,o=i.direction,s=n.gesto.getEventData().innerScrollOptions;s?n.emit("innerScroll",{container:a,direction:o}):n.emit("scroll",{container:a,direction:o})}).on("move",function(i){var a=i.offsetX,o=i.offsetY,s=i.inputEvent,l=n.gesto;if(!(!l||!l.isFlag())){var c=n.gesto.getEventData(),u=c.boundArea;c.startX-=a,c.startY-=o;var f=n.gesto.getEventData().innerScrollOptions,d=f==null?void 0:f.container,g=!1;if(d){var p=c.selectableInnerScrollParentMap,v=p.get(d);v&&(v.paths.forEach(function(y){var m=p.get(y);m.points.forEach(function(x){x[0]-=a,x[1]-=o})}),v.indexes.forEach(function(y){c.selectablePoints[y].forEach(function(m){m[0]-=a,m[1]-=o})}),g=!0)}g||c.selectablePoints.forEach(function(y){y.forEach(function(m){m[0]-=a,m[1]-=o})}),n._refreshGroups(c),u.left-=a,u.right-=a,u.top-=o,u.bottom-=o,n.gesto.scrollBy(a,o,s.inputEvent),n._checkSelected(n.gesto.getCurrentEvent())}})},t._select=function(n,i,a,o){var s=a.inputEvent,l=a.data,c=this.setSelectedTargets(n);o&&this.emit("selectStart",__assign$5(__assign$5({},c),{rect:i,inputEvent:s,data:l.data,isTrusted:a.isTrusted})),(c.added.length||c.removed.length)&&this.emit("select",__assign$5(__assign$5({},c),{rect:i,inputEvent:s,data:l.data,isTrusted:a.isTrusted}))},t._selectEnd=function(n,i,a,o){var s=o.inputEvent,l=o.isDouble,c=o.data,u=diff$1(n,this.selectedTargets),f=u.added,d=u.removed,g=u.prevList,p=u.list,v=diff$1(i,this.selectedTargets),y=v.added,m=v.removed,x=v.prevList,_=v.list,S=s&&s.type,A=S==="mousedown"||S==="touchstart";this.emit("selectEnd",{startSelected:n,beforeSelected:i,selected:this.selectedTargets,added:f.map(function(b){return p[b]}),removed:d.map(function(b){return g[b]}),afterAdded:y.map(function(b){return _[b]}),afterRemoved:m.map(function(b){return x[b]}),isDragStart:A,isClick:!!o.isClick,isDouble:!!l,rect:a,inputEvent:s,data:c.data,isTrusted:o.isTrusted})},t._checkSelected=function(n,i){i===void 0&&(i=getRect$1(n,this.options.ratio));var a=n.data,o=i.top,s=i.left,l=i.width,c=i.height,u=a.selectFlag,f=a.containerX,d=a.containerY,g=a.scaleMatrix,p=calculateMatrixDist(g,[s-f,o-d]),v=calculateMatrixDist(g,[l,c]),y=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(p[0],"px, ").concat(p[1],"px);")+"width:".concat(v[0],"px;height:").concat(v[1],"px;");var m=this.hitTest(i,a,n);y=passTargets(a.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}var x=this.emit("drag",__assign$5(__assign$5({},n),{data:a.data,isSelect:u,rect:i}));if(x===!1){this.target.style.cssText+="display: none;",n.stop();return}u&&this._select(y,i,n)},t._sameCombiKey=function(n,i,a){if(!i)return!1;var o=getCombi(n.inputEvent,n.key),s=[].concat(i),l=isArray$4(s[0])?s:[s];if(a){var c=n.key;return l.some(function(u){return u.some(function(f){return f===c})})}return l.some(function(u){return u.every(function(f){return o.indexOf(f)>-1})})},t._findElement=function(n,i){for(var a=n;a&&!(i.indexOf(a)>-1);)a=a.parentElement;return a},t._refreshGroups=function(n){var i,a=n.innerWidth,o=n.innerHeight,s=n.selectablePoints;if(this.options.checkOverflow){var l=(i=this.gesto.getEventData().innerScrollOptions)===null||i===void 0?void 0:i.container,c=n.selectableInnerScrollParentMap,u=n.selectableInnerScrollPathsList;n.selectableInners=u.map(function(g,p){var v=!1;return g.every(function(y){if(v)return!0;if(y===l)return v=!0,!0;var m=c.get(y);if(m){var x=s[p],_=m.points,S=getOverlapPoints(x,_);if(!S.length)return!1}return!0})})}if(!a||!o)n.innerGroups=null;else{var f=n.selectablePoints,d={};f.forEach(function(g,p){var v=1/0,y=-1/0,m=1/0,x=-1/0;g.forEach(function(A){var b=Math.floor(A[0]/a),C=Math.floor(A[1]/o);v=Math.min(b,v),y=Math.max(b,y),m=Math.min(C,m),x=Math.max(C,x)});for(var _=v;_<=y;++_)for(var S=m;S<=x;++S)d[_]=d[_]||{},d[_][S]=d[_][S]||[],d[_][S].push(p)}),n.innerGroups=d}},e=__decorate$2([Properties(PROPERTIES,function(n,i){var a={enumerable:!0,configurable:!0,get:function(){return this.options[i]}},o=camelize("get ".concat(i));n[o]?a.get=function(){return this[o]()}:a.get=function(){return this.options[i]};var s=camelize("set ".concat(i));n[s]?a.set=function(c){this[s](c)}:a.set=function(c){this.options[i]=c},Object.defineProperty(n,i,a)})],e),e}(EventEmitter$2),Selecto$1$1=function(r){__extends$4(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Selecto$2);const VanillaSelecto=Selecto$1$1;var extendStatics$3=function(r,e){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},extendStatics$3(r,e)};function __extends$3(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$3(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var __assign$4=function(){return __assign$4=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$4.apply(this,arguments)};function __decorate$1(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}var REACT_EVENTS=EVENTS$3.map(function(r){return camelize("on ".concat(r))}),Selecto=function(r){__extends$3(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){return reactExports.createElement("div",{className:CLASS_NAME,ref:ref(this,"selectionElement")})},t.componentDidMount=function(){var n=this,i=this.props,a={};OPTIONS.forEach(function(o){o in i&&(a[o]=i[o])}),this.selecto=new VanillaSelecto(__assign$4(__assign$4({},a),{portalContainer:this.selectionElement})),EVENTS$3.forEach(function(o,s){n.selecto.on(o,function(l){var c=n.props,u=c[REACT_EVENTS[s]]&&c[REACT_EVENTS[s]](l);u===!1&&l.stop()})})},t.componentDidUpdate=function(n){var i=this.props,a=this.selecto;PROPERTIES.forEach(function(o){n[o]!==i[o]&&(a[o]=i[o])})},t.componentWillUnmount=function(){this.selecto.destroy()},__decorate$1([withMethods(METHODS)],e.prototype,"selecto",void 0),e}(reactExports.PureComponent);const Selecto$1=Selecto,ht=class ht{static _findAllChildLayer(e,t){const{layerConfigs:n}=designerStore$1;e.forEach(i=>{if(n[i]){let{childIds:a}=n[i];a&&a.length>0&&(t.push(...a),ht._findAllChildLayer(a,t)),t.push(i)}})}};D(ht,"findPathGroupLayer",e=>{const t=new Set,{layerConfigs:n}=designerStore$1;return e.forEach(i=>{const a=n[i];a.type==="group"&&t.add(i);let o=a==null?void 0:a.pid;for(;o;){const{pid:s,id:l,type:c}=n[o];o=s,c==="group"&&t.add(l)}}),Array.from(t)}),D(ht,"findTopGroupLayer",(e,t=!1)=>{const n=new Set,{layerConfigs:i}=designerStore$1;return e.forEach(a=>{var l;let o=a,s=(l=i[a])==null?void 0:l.pid;for(;s;){const{pid:c,id:u}=i[s];s=c,o=u}(t||o!==a)&&n.add(o)}),Array.from(n)}),D(ht,"findAllChildLayerBySubId",(e,t=!1)=>{const n=ht.findTopGroupLayer(e,t);return ht.findAllChildLayer(n)}),D(ht,"findAllChildLayer",e=>{const t=[];return ht._findAllChildLayer(e,t),[...new Set(t)]}),D(ht,"hasSameGroup",e=>{if(e.length<=1)return!1;const{layerConfigs:t}=designerStore$1;if(e.some(i=>t[i].type!=="group"&&!t[i].pid))return!1;const n=new Set;return e.filter(i=>t[i].type!=="group").forEach(i=>{ht.findTopGroupLayer([i],!0).forEach(a=>n.add(a))}),n.size===1});let LayerUtil=ht;function setControlPointLineColor(r){const{targetIds:e}=eventOperateStore$1;if(e.length===0)return;const t=document.querySelectorAll(".moveable-control,.moveable-line");t&&(r?t.forEach(n=>{n.style.backgroundColor="#ff4b29"}):t.forEach(n=>{n.style.backgroundColor="#00bbffff"}))}class DesignerSelectable extends reactExports.Component{constructor(){super(...arguments);D(this,"selectorRef",React.createRef());D(this,"onSelectEnd",t=>{var d;let{selected:n}=t;const{movableRef:i,setTargetIds:a}=eventOperateStore$1;if(!i)return;const o=i.current;if(t.isDragStart){t.inputEvent.preventDefault();const g=setTimeout(()=>{o.dragStart(t.inputEvent),clearTimeout(g)})}const{layerConfigs:s}=designerStore$1;let l=n.map(g=>g.id),c=!!((d=s[l[0]])!=null&&d.lock);if(l.length===1)s[l[0]].pid&&(l=LayerUtil.findAllChildLayerBySubId(l));else if(l.length>1){let g=LayerUtil.findAllChildLayerBySubId(l,!0);for(let p=0;p<g.length;p++){const v=s[g[p]];if(v.lock!==c&&v.type!=="group"){c=!1;break}}l=g.filter(p=>s[p].lock===c)}a(l);const{visible:u,layerInstances:f}=layerListStore$1;u&&l.forEach(g=>{var p;(p=f[g])==null||p.setState({selected:!0})}),setControlPointLineColor(c)});D(this,"onDragStart",t=>{const{movableRef:n,targets:i}=eventOperateStore$1,a=n.current,o=t.inputEvent.target;(a.isMoveableElement(o)||i.some(s=>s===o||s.contains(o)))&&t.stop()})}componentDidMount(){const{setSelectorRef:t}=eventOperateStore$1;t(this.selectorRef)}render(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[this.props.children,jsxRuntimeExports.jsx(Selecto$1,{ref:this.selectorRef,dragContainer:".lc-event-container",selectableTargets:[".lc-comp-item"],hitRate:0,selectByClick:!0,selectFromInside:!1,toggleContinueSelect:["ctrl"],ratio:0,onDragStart:this.onDragStart,onSelectEnd:this.onSelectEnd})]})}}const GroupSelectable=observer(DesignerSelectable);class LayerListStore{constructor(){D(this,"visible",!1);D(this,"layerInstances",{});D(this,"searchContent","");D(this,"setVisible",e=>this.visible=e);D(this,"setContent",e=>this.searchContent=e);D(this,"lockChange",(e,t)=>{const n=[],{layerConfigs:i}=designerStore$1,{type:a}=i[e];a==="group"?LayerUtil.findAllChildLayer([e]).forEach(o=>n.push({id:o,lock:t})):n.push({id:e,lock:t}),historyRecordOperateProxy$1.doLockUpd(n)});D(this,"selectedChange",(e,t)=>{var g;const{targetIds:n,setTargetIds:i}=eventOperateStore$1,{layerConfigs:a}=designerStore$1,{type:o,lock:s}=a[e];if(!o)return;const l=o==="group";let c=[];if(t.ctrlKey)if(n.includes(e))if(l){const p=LayerUtil.findAllChildLayer([e]);c=n.filter(v=>!p.includes(v))}else c=n.filter(p=>p!==e);else if(n.length===0)l?c=LayerUtil.findAllChildLayer([e]):c=[e];else{const p=a[n[0]].lock;s!==p?l?c=[...n,...LayerUtil.findAllChildLayer([e])].filter(v=>!a[v].lock):c=[...n,e].filter(v=>!a[v].lock):l?c=[...n,...LayerUtil.findAllChildLayer([e])]:c=[...n,e],c=[...new Set(c)]}else l?c=LayerUtil.findAllChildLayer([e]):c=[e];const u=setTimeout(()=>{i(c),clearTimeout(u)},0);let f=(g=a[c[0]])==null?void 0:g.lock;const d=setTimeout(()=>{setControlPointLineColor(f),clearTimeout(d)},0)});D(this,"hideChange",(e,t)=>{const n=[],{layerConfigs:i}=designerStore$1,{type:a}=i[e];a==="group"?LayerUtil.findAllChildLayer([e]).forEach(o=>n.push({id:o,hide:t})):n.push({id:e,hide:t}),historyRecordOperateProxy$1.doHideUpd(n)});makeObservable(this,{visible:observable,searchContent:observable,setVisible:action,setContent:action})}}const layerListStore=new LayerListStore,layerListStore$1=layerListStore;class EventOperateStore{constructor(){D(this,"movableRef",null);D(this,"selectorRef",null);D(this,"rulerRef",null);D(this,"dsContentRef",null);D(this,"targets",[]);D(this,"targetIds",[]);D(this,"maxLevel",0);D(this,"minLevel",0);D(this,"pointerTarget",null);D(this,"groupCoordinate",{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});D(this,"backoff",!1);D(this,"addRecordCompId",null);D(this,"scale",1);D(this,"ratio",1);D(this,"setDsContentRef",e=>this.dsContentRef=e);D(this,"setRuleRef",e=>this.rulerRef=e);D(this,"setRatio",e=>this.ratio=e);D(this,"setScale",e=>this.scale=e);D(this,"setAddRecordCompId",e=>this.addRecordCompId=e);D(this,"setBackoff",e=>this.backoff=e);D(this,"setMaxLevel",e=>this.maxLevel=e);D(this,"setMinLevel",e=>this.minLevel=e);D(this,"setMovableRef",e=>this.movableRef=e);D(this,"setSelectorRef",e=>this.selectorRef=e);D(this,"setTargetIds",e=>{const t=[...this.targetIds];this.targetIds=e;const n=[];e.forEach(o=>{const s=document.getElementById(o);s&&n.push(s)}),this.targets=n;const{visible:i,layerInstances:a}=layerListStore$1;if(i&&(t.forEach(o=>{const s=a[o];s&&s.setState({selected:!1})}),this.targetIds.forEach(o=>{const s=a[o];s&&s.setState({selected:!0})})),this.targets.length>1){let{calculateGroupCoordinate:o}=eventOperateStore;o(this.targets)}});D(this,"setPointerTarget",e=>this.pointerTarget=e);D(this,"setGroupCoordinate",e=>{this.groupCoordinate=ObjectUtil.merge(this.groupCoordinate,e)});D(this,"calculateGroupCoordinate",e=>{const{layerConfigs:t}=designerStore$1;let n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};e.forEach(i=>{const a=t[i.id];let{x:o=0,y:s=0,width:l,height:c}=a;o<n.minX&&(n.minX=o),s<n.minY&&(n.minY=s),o+l>n.maxX&&(n.maxX=o+l),s+c>n.maxY&&(n.maxY=s+c)}),n.groupWidth=n.maxX-n.minX,n.groupHeight=n.maxY-n.minY,this.setGroupCoordinate(n)});D(this,"focusDesignerCanvas",()=>{const e=document.querySelector(".lc-ruler-content");this.setPointerTarget(e)});makeObservable(this,{targets:observable,targetIds:observable,scale:observable,setScale:action,setTargetIds:action})}}const eventOperateStore=new EventOperateStore,eventOperateStore$1=eventOperateStore;class RightStore{constructor(){D(this,"activeElem",{});D(this,"menus",[]);D(this,"activeMenu","");D(this,"visible",!1);D(this,"setActiveMenu",(e,t)=>{t&&t.includes(this.activeMenu)||(this.activeMenu=e)});D(this,"setContentVisible",e=>this.visible=e);D(this,"activeConfig",(e,t)=>{var n,i;if(!e||!t){this.activeMenu="",this.activeElem={},this.menus=[];return}if(this.menus=((i=(n=DesignerLoaderFactory.getLoader())==null?void 0:n.definitionMap[t])==null?void 0:i.getMenuList())||[],this.menus.length>0){let a=!0;for(let o=0;o<this.menus.length;o++)if(this.menus[o].key===this.activeMenu){a=!1;break}a&&(this.activeMenu=this.menus[0].key)}this.activeElem={id:e,type:t},this.visible&&(this.visible=!1,setTimeout(()=>{runInAction(()=>this.visible=!0)},0))});makeObservable(this,{menus:observable,activeMenu:observable,visible:observable,setActiveMenu:action,setContentVisible:action,activeConfig:action})}}const rightStore=new RightStore;class HistoryRecordOperateProxy{constructor(){D(this,"_copyLayer",(e,t,n,i)=>{const{layerConfigs:a,compController:o,elemConfigs:s}=designerStore$1,l=lodashExports.cloneDeep(e);l.id=IdGenerate.generateId(),l.order=i,l.type!=="group"&&(l.x=l.x+10,l.y=l.y+10),l.pid&&(l.pid=void 0),l.childIds&&(l.childIds=[]),a[l.id]=l;const c=o[e.id];if(c){let u=lodashExports.cloneDeep(c.getConfig());u.base.id=l.id,s[l.id]=u}return t.push(l.id),n.push(l),l})}doDrag(e){const{layerConfigs:t,updateLayer:n}=designerStore$1,i=[];let a,o;if(e.length===1){const l=t[e[0].id];a={ids:[e[0].id],x:l.x,y:l.y};const{id:c,x:u=0,y:f=0}=e[0];o={ids:[c],x:u,y:f}}else{const l=[];e.forEach(d=>i.push(d.id)),i.forEach(d=>l.push(t[d]));let c=1/0,u=1/0;l.forEach(d=>{d.x<c&&(c=d.x),d.y<u&&(u=d.y)}),a={ids:i,x:c,y:u};const{groupCoordinate:f}=eventOperateStore$1;o={ids:i,x:f.minX,y:f.minY}}const s={type:OperateType.DRAG,prev:a,next:o};n(e,!1),historyOperator.put({actions:[s]})}doResize(e,t){const{layerConfigs:n,updateLayer:i}=designerStore$1,a=[];let o,s;if(e.length===1){const{width:c=0,height:u=0}=n[e[0].id];o={ids:[e[0].id],width:c,height:u,direction:t};const{id:f}=e[0];s={ids:[f],width:e[0].width,height:e[0].height,direction:t}}else{const c=[];e.forEach(m=>a.push(m.id)),a.forEach(m=>c.push(n[m]));let u=1/0,f=1/0,d=-1/0,g=-1/0;c.forEach(m=>{const{x=0,y:_=0}=m;x<u&&(u=x),_<f&&(f=_),x+m.width>d&&(d=x+m.width),_+m.height>g&&(g=_+m.height)});const p=d-u,v=g-f;o={ids:a,width:p,height:v,direction:t};const{groupCoordinate:y}=eventOperateStore$1;s={ids:a,width:y.groupWidth,height:y.groupHeight,direction:t}}const l={type:OperateType.RESIZE,prev:o,next:s};i(e,!1),historyOperator.put({actions:[l]})}doAdd(e){const{layerConfigs:t,statisticInfo:n}=designerStore$1;t[e.id+""]=e,n&&(n.count=Object.keys(t).length);const{addRecordCompId:i,setAddRecordCompId:a}=eventOperateStore$1;if(i&&i===e.id){const o={type:OperateType.ADD,prev:null,next:[{id:e.id,data:{layerConfig:toJS(e),elemConfig:null}}]};historyOperator.put({actions:[o]}),a(null)}}doDelete(){let{targetIds:e,setTargetIds:t}=eventOperateStore$1;const{delItem:n,layerConfigs:i,compController:a,updateLayer:o}=designerStore$1;if(!e||e.length===0)return;const{setContentVisible:s,activeConfig:l,activeElem:c}=rightStore;e.includes(c.id)&&(s(!1),l(null,""));const u=[],f=[];e.forEach(m=>{const x=i[m];if(x){const{type:_,pid:S}=x;_!=="group"&&S&&!e.includes(S)?f.push(m):u.push(m)}});const d=[];u.forEach(m=>{const{type:x}=i[m];if(x==="group")d.push({id:m,data:{layerConfig:toJS(i[m])}});else{const _=a[m]&&a[m].getConfig();d.push({id:m,data:{layerConfig:toJS(i[m]),elemConfig:_}})}});const g=[],p=[];f.forEach(m=>{const{pid:x}=i[m],_=i[x];if(_.childIds.length===1&&_.childIds[0]===m)d.push({id:x,data:{layerConfig:toJS(i[x])}}),e=[...e,x];else{g.push({id:x,childIds:toJS(_.childIds)});const b=lodashExports.cloneDeep(_.childIds).filter(C=>C!==m);o([{id:x,childIds:b}],!1),p.push({id:x,childIds:toJS(_.childIds)})}const S=a[m]&&a[m].getConfig();d.push({id:m,data:{layerConfig:toJS(i[m]),elemConfig:S}})});const v=[{type:OperateType.DEL,prev:d,next:null}];(g.length>0||p.length>0)&&v.push({type:OperateType.UPD_LAYER_GROUP,prev:g,next:p}),historyOperator.put({actions:v}),e.length>0&&n(e),t([]);const{focusDesignerCanvas:y}=eventOperateStore$1;y()}doCopy(e){let t=[];const{layerConfigs:n,elemConfigs:i}=designerStore$1;let{maxLevel:a,setMaxLevel:o}=eventOperateStore$1;const s=[],l=[],c={};e.forEach(u=>{const f=n[u];if(!f)return;const d=this._copyLayer(f,t,l,a);c[u]=d.id,a++});for(let u=0;u<e.length;u++){const f=n[e[u]];if(!(!f.pid&&f.type!=="group")){if(f.pid&&!e.includes(f.pid))if(f.type==="group"){const d=f.childIds.map(v=>c[v]),g=n[c[f.id]];g.childIds=d,g.pid=f.pid,n[g.pid].childIds.push(g.id)}else{const d=n[c[f.id]];d.pid=f.pid,n[f.pid].childIds.push(c[f.id])}if(!f.pid&&f.type==="group"){const d=f.childIds.map(p=>c[p]),g=n[c[f.id]];g.childIds=d}if(f.pid&&e.includes(f.pid))if(f.type==="group"){const d=n[c[f.id]];d.pid=c[f.pid];const g=f.childIds.map(p=>c[p]);d.childIds=g}else{const d=n[c[f.id]];d.pid=c[f.pid]}}}if(t.forEach(u=>{const f=n[u],d=i[u];f.type==="group"?s.push({id:u,data:{layerConfig:toJS(f)}}):s.push({id:u,data:{layerConfig:toJS(f),elemConfig:toJS(d)}})}),historyOperator.put({actions:[{type:OperateType.ADD,prev:null,next:s}]}),o(a),l.length>1){const{groupCoordinate:u,setGroupCoordinate:f}=eventOperateStore$1;f({minX:u.minX+10,minY:u.minY+10})}return t}doHideUpd(e){let t=[],n=[];const{layerConfigs:i,updateLayer:a}=designerStore$1;e.forEach(u=>{const{id:f,hide:d}=u;n.push({id:f,hide:d});const g=i[f];t.push({id:f,hide:g.hide})});const o={type:OperateType.HIDE,prev:t,next:n};historyOperator.put({actions:[o]}),a(e);const{setTargetIds:s}=eventOperateStore$1;s([]);const{layerInstances:l,visible:c}=layerListStore$1;c&&e.forEach(u=>{var f;(f=l[u.id])==null||f.setState({hide:u.hide,selected:!1})})}doLockUpd(e){let t=[],n=[];const{layerConfigs:i,updateLayer:a}=designerStore$1;e.forEach(c=>{const{id:u,lock:f}=c;n.push({id:u,lock:f});const d=i[u];t.push({id:u,lock:d.lock})});const o={type:OperateType.LOCK,prev:t,next:n};historyOperator.put({actions:[o]}),a(e);const{layerInstances:s,visible:l}=layerListStore$1;l&&e.forEach(c=>{var u;(u=s[c.id])==null||u.setState({lock:c.lock})})}doOrderUpd(e){let t=[],n=[];const{layerConfigs:i,updateLayer:a}=designerStore$1;e.forEach(s=>{const{id:l,order:c}=s;n.push({id:l,order:c});const u=i[l];t.push({id:l,order:u.order})});const o={type:OperateType.ORDER,prev:t,next:n};historyOperator.put({actions:[o]}),a(e)}doStyleUpd(e,t){const{activeElem:{id:n}}=rightStore,i={type:OperateType.UPD_STYLE,prev:{id:n,data:t},next:{id:n,data:e}};historyOperator.put({actions:[i]})}doGrouping(){const{targetIds:e,maxLevel:t,setMaxLevel:n,setTargetIds:i}=eventOperateStore$1;if(!e||e.length<=1||LayerUtil.hasSameGroup(e))return;const a=LayerUtil.findTopGroupLayer(e,!0),{addItem:o,updateLayer:s,layerConfigs:l}=designerStore$1,c=t+1,u=IdGenerate.generateId(),f=Array.from(a);let d=l[f[0]].lock;for(let x=1;x<f.length;x++)if(d!==l[f[x]].lock){d=!1;break}const g=[],p={id:u,type:"group",name:"新建分组",hide:!1,lock:d,childIds:f,order:c};g.push({type:OperateType.ADD,prev:null,next:[{id:u,data:{layerConfig:p}}]});const v=[],y=[],m=[];if(f.forEach(x=>{v.push({id:x,pid:void 0}),m.push({id:x,pid:u}),y.push({id:x,pid:u})}),s(m,!1),o(p),n(c),i([]),g.push({type:OperateType.UPD_LAYER_GROUP,prev:v,next:y}),historyOperator.put({actions:g}),d){const{layerInstances:x}=layerListStore$1,_=setTimeout(()=>{x[u].setState({lock:!0}),clearTimeout(_)},10)}}doUnGrouping(){const{targetIds:e,setTargetIds:t}=eventOperateStore$1;let n=LayerUtil.findTopGroupLayer(e,!0);const{layerConfigs:i,updateLayer:a,delLayout:o}=designerStore$1;n=n.filter(p=>i[p].type==="group");const s=[],l=[],c=[],u=[];n.forEach(p=>{let v=i[p];u.push({id:p,data:{layerConfig:v}});let y=v.childIds;const m=[];y&&y.forEach(x=>{l.push({id:x,pid:p}),m.push({id:x,pid:void 0}),c.push({id:x,pid:void 0})}),a(m,!1),u.push({id:p,data:{layerConfig:v}})}),s.push({type:OperateType.UPD_LAYER_GROUP,prev:l,next:c}),s.push({type:OperateType.DEL,prev:u,next:null}),historyOperator.put({actions:s}),o(n),t([]);const{activeElem:f,activeConfig:d,setContentVisible:g}=rightStore;f&&n.includes(f.id)&&(g(!1),d(null,""))}}const historyRecordOperateProxy=new HistoryRecordOperateProxy,historyRecordOperateProxy$1=historyRecordOperateProxy;class DesignerStore{constructor(){D(this,"id","");D(this,"loaded",!1);D(this,"canvasConfig",{rasterize:!1,dragStep:1,resizeStep:1,width:1920,height:1080});D(this,"projectConfig",{name:"",des:"",state:ProjectState.DRAFT,createTime:"",updateTime:"",saveType:SaveType.LOCAL});D(this,"elemConfigs",{});D(this,"compController",{});D(this,"layerConfigs",{});D(this,"statisticInfo",{count:0});D(this,"themeConfig",[{id:"0",name:"科技风格(默认主题)",colors:{main:"#00dfff",mainText:"#62edff",subText:"#4ca4b1",background:"#00dfff33",supplementFirst:"#38929f",supplementSecond:"#1790a2"}}]);D(this,"extendParams",{maxLevel:0,minLevel:0});D(this,"lastTimeSave",Date.now());D(this,"setLastTimeSave",e=>{this.lastTimeSave=e});D(this,"doInit",e=>{this.id=e.id??this.id,this.canvasConfig=e.canvasConfig?{...this.canvasConfig,...e.canvasConfig}:this.canvasConfig,this.elemConfigs=e.elemConfigs?{...this.elemConfigs,...e.elemConfigs}:this.elemConfigs,this.layerConfigs=e.layerConfigs||this.layerConfigs,this.statisticInfo=e.statisticInfo?{...this.statisticInfo,...e.statisticInfo}:this.statisticInfo,this.themeConfig=e.themeConfig||this.themeConfig,this.extendParams=e.extendParams?{...this.extendParams,...e.extendParams}:this.extendParams});D(this,"doDestroy",()=>{this.id="",this.canvasConfig={},this.projectConfig={},this.elemConfigs={},this.layerConfigs={},this.statisticInfo={},this.themeConfig=null,this.extendParams={}});D(this,"setId",e=>{runInAction(()=>{this.id=e})});D(this,"setLoaded",e=>{this.loaded=e});D(this,"addItem",e=>{historyRecordOperateProxy$1.doAdd(e)});D(this,"delItem",e=>{for(const t of e)delete this.layerConfigs[t],delete this.compController[t]});D(this,"updateLayer",(e,t=!0)=>{for(const n of e){let i=this.layerConfigs[n.id+""];lodashExports.isEqual(i,n)||(this.layerConfigs[n.id+""]=t?{...ObjectUtil.merge(i,n)}:ObjectUtil.merge(i,n))}});D(this,"delLayout",e=>{for(const t of e)this.layerConfigs[t]&&this.layerConfigs[t].type==="group"&&delete this.layerConfigs[t]});D(this,"updateThemeConfig",e=>{this.themeConfig=e});D(this,"flashGlobalTheme",e=>{this.compController&&Object.keys(this.compController).forEach(t=>{let n=this.compController[t];n&&n.updateTheme(e)})});D(this,"updateCanvasConfig",e=>{this.canvasConfig={...this.canvasConfig,...e}});D(this,"updateProjectConfig",e=>{this.projectConfig={...this.projectConfig,...e}});D(this,"copyItem",e=>historyRecordOperateProxy$1.doCopy(e));makeObservable(this,{canvasConfig:observable,projectConfig:observable,layerConfigs:observable.shallow,statisticInfo:observable,themeConfig:observable,extendParams:observable,loaded:observable,doInit:action,addItem:action,delItem:action,setLoaded:action,updateLayer:action,updateThemeConfig:action,flashGlobalTheme:action,updateCanvasConfig:action,updateProjectConfig:action,copyItem:action,delLayout:action})}getData(){let e={};return Object.keys(this.compController).forEach(t=>{e[t]=this.compController[t].getConfig()}),{canvasConfig:toJS(this.canvasConfig),elemConfigs:e,layerConfigs:toJS(this.layerConfigs),statisticInfo:toJS(this.statisticInfo),themeConfig:toJS(this.themeConfig),extendParams:toJS(this.extendParams)}}}const designerStore=new DesignerStore,designerStore$1=designerStore;class BPLayerNodeController extends AbstractBPNodeController{async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BPNode,t)}execute(e,t,n){const{nodeId:i,apId:a,anchorType:o}=e;if(o===AnchorPointType.INPUT){const{compController:s,layerConfigs:l}=designerStore$1,c=s[i];if(!c)return;const{type:u}=l[i],{definitionMap:f}=DesignerLoaderFactory.getLoader(),g=f[u].getActionList().find(p=>p.id===a);if(!g)return;g.handler(c,n)}}getConfig(){return this.config}update(e,t){}getNodeInfo(e){const{layerConfigs:t}=designerStore$1,n=t[e],{definitionMap:i}=DesignerLoaderFactory.getLoader(),a=i[n.type].getEventList().map(s=>({id:e+":"+s.id+":"+AnchorPointType.OUTPUT,name:s.name,type:AnchorPointType.OUTPUT})),o=i[n.type].getActionList().map(s=>({id:e+":"+s.id+":"+AnchorPointType.INPUT,name:s.name,type:AnchorPointType.INPUT}));return{id:e,name:n.name,icon:"CodeSandboxOutlined",type:"layer-node",titleBgColor:"#247057",input:o,output:a}}getConfigComponent(){return null}}const ConditionNodeConfig=r=>{const{controller:e}=r;let n=(e==null?void 0:e.getConfig()).handler||`function handler(data) { 
 
 }`;const i=lodashExports.debounce(a=>{a&&(e==null||e.update({handler:a}))},500);return jsxRuntimeExports.jsx("div",{className:"condition-node-config",children:jsxRuntimeExports.jsx(MonacoEditor,{value:n,onChange:i,height:400,language:"javascript"})})};class BPConditionNodeController extends AbstractBPNodeController{constructor(){super(...arguments);D(this,"handler",null)}async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BPNode,t)}execute(executeInfo,executor,params){var e;const{nodeId,anchorType}=executeInfo;if(anchorType===1)return;if(!this.handler){if(!((e=this.config)!=null&&e.handler))return;try{this.handler=eval(`(${this.config.handler})`)}catch(t){console.error("解析条件函数错误，请检查你写条件判断函数");return}}const result=this.handler(params);if(result){const t=nodeId+":satisfy:"+AnchorPointType.OUTPUT;executor.execute(t,executor,params)}else{const t=nodeId+":unSatisfy:"+AnchorPointType.OUTPUT;executor.execute(t,executor,params)}}getConfig(){return this.config}update(e,t){this.config=ObjectUtil.merge(this.config,e)}getNodeInfo(e){return{id:e,name:"条件判断",titleBgColor:"#247ba6",type:"condition-node",icon:"BranchesOutlined",input:[{id:e+":judge:"+AnchorPointType.INPUT,name:"判断",type:AnchorPointType.INPUT}],output:[{id:e+":satisfy:"+AnchorPointType.OUTPUT,name:"满足",type:AnchorPointType.OUTPUT},{id:e+":unSatisfy:"+AnchorPointType.OUTPUT,name:"不满足",type:AnchorPointType.OUTPUT}]}}getConfigComponent(){return ConditionNodeConfig}}const LogicalProcessNodeConfig=r=>{const{controller:e}=r;let n=(e==null?void 0:e.getConfig()).handler||`function handle(data) { 
 
 }`;const i=lodashExports.debounce(a=>{a&&(e==null||e.update({handler:a}))},500);return jsxRuntimeExports.jsx("div",{className:"logical-process-node-config",children:jsxRuntimeExports.jsx(MonacoEditor,{value:n,onChange:i,height:400,language:"javascript"})})};class BPLogicalProcessNodeController extends AbstractBPNodeController{constructor(){super(...arguments);D(this,"handler",null)}async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BPNode,t)}execute(executeInfo,executor,params){var e;const{nodeId}=executeInfo;if(!this.handler){if(!((e=this.config)!=null&&e.handler))return;try{this.handler=eval(`(${this.config.handler})`)}catch(t){console.error("解析条件函数错误，请检查你写条件判断函数");return}}const newParams=this.handler(params)||params,apId=nodeId+":afterExecute:"+AnchorPointType.OUTPUT;executor.execute(apId,executor,newParams)}getConfig(){return this.config}update(e,t){this.config=ObjectUtil.merge(this.config,e)}getNodeInfo(e){return{id:e,name:"逻辑处理",titleBgColor:"#a62469",type:"logical-process-node",icon:"FunctionOutlined",input:[{id:e+":execute:"+AnchorPointType.INPUT,name:"执行",type:AnchorPointType.INPUT}],output:[{id:e+":afterExecute:"+AnchorPointType.OUTPUT,name:"执行后",type:AnchorPointType.OUTPUT}]}}getConfigComponent(){return LogicalProcessNodeConfig}}const bpNodeControllerMap=new Map;bpNodeControllerMap.set("layer-node",BPLayerNodeController);bpNodeControllerMap.set("condition-node",BPConditionNodeController);bpNodeControllerMap.set("logical-process-node",BPLogicalProcessNodeController);class BPStore{constructor(){D(this,"bpAPMap",{});D(this,"bpLines",{});D(this,"bpAPLineMap",{});D(this,"bpNodeLayoutMap",{});D(this,"bpNodeControllerInsMap",{});D(this,"bpNodeConfigMap",{});D(this,"selectedNodes",[]);D(this,"selectedLines",[]);D(this,"bpMovableRef",null);D(this,"bpSelectRef",null);D(this,"upCtx",null);D(this,"downCtx",null);D(this,"nodeContainerRef",null);D(this,"bpDragContentRef",null);D(this,"canvasOffset",{x:320,y:40});D(this,"canvasTranslate",{x:0,y:0});D(this,"canvasScale",1);D(this,"setBpDragContentRef",e=>this.bpDragContentRef=e);D(this,"setBpNodeControllerInsMap",e=>{this.bpNodeControllerInsMap=e});D(this,"getAllNodeConfig",()=>{if(!this.bpNodeLayoutMap)return{};const e=Object.keys(this.bpNodeLayoutMap);if(Object.keys(this.bpNodeControllerInsMap).length>0){const t={};return e.forEach(n=>{t[n]=this.bpNodeControllerInsMap[n].getConfig()}),t}else return this.bpNodeConfigMap});D(this,"setBpNodeLayoutMap",e=>{this.bpNodeLayoutMap=e});D(this,"setBpNodeConfigMap",e=>{this.bpNodeConfigMap=e});D(this,"addBPNodeLayout",e=>{this.bpNodeLayoutMap[e.id]=e});D(this,"updBpNodeLayout",e=>{const t=this.bpNodeLayoutMap[e.id];t&&ObjectUtil.merge(t,e)});D(this,"setSelectedLines",e=>{this.selectedLines=e});D(this,"addAPLineMap",(e,t)=>{this.bpAPLineMap[e]||(this.bpAPLineMap[e]=[]),this.bpAPLineMap[e].push(t)});D(this,"delAPLineMap",(e,t)=>{if(this.bpAPLineMap[e]){const n=this.bpAPLineMap[e].indexOf(t);n!==-1&&this.bpAPLineMap[e].splice(n,1),this.bpAPLineMap[e].length===0&&delete this.bpAPLineMap[e]}});D(this,"delAPMap",(e,t)=>{if(this.bpAPMap[e]){const n=this.bpAPMap[e].indexOf(t);n!==-1&&this.bpAPMap[e].splice(n,1),this.bpAPMap[e].length===0&&delete this.bpAPMap[e]}});D(this,"updLinePos",e=>{const t=this.bpLines[e.id];t&&(t.startPoint=e.startPoint,t.endPoint=e.endPoint)});D(this,"setAPLineMap",e=>{this.bpAPLineMap=e});D(this,"setAPMap",e=>{this.bpAPMap=e});D(this,"setLines",e=>{this.bpLines=e});D(this,"addAPMap",(e,t)=>{this.bpAPMap[e]||(this.bpAPMap[e]=[]),this.bpAPMap[e].push(t)});D(this,"addLine",e=>{this.bpLines[e.id]=e});D(this,"setCanvasScale",e=>{this.canvasScale=e});D(this,"setCanvasTranslate",e=>{e&&(this.canvasTranslate=e)});D(this,"setSelectedNodes",e=>{this.selectedNodes=e});D(this,"setBpMovableRef",e=>{this.bpMovableRef=e});D(this,"setBpSelectRef",e=>{this.bpSelectRef=e});D(this,"setUpCtx",e=>{this.upCtx=e});D(this,"setDownCtx",e=>{this.downCtx=e});D(this,"setNodeContainerRef",e=>{this.nodeContainerRef=e});D(this,"delNode",e=>{!e||e.length===0||(e.forEach(t=>{let n=this.bpNodeControllerInsMap[t];if(!n){const i=Object.values(this.bpNodeLayoutMap);Object.keys(this.bpNodeControllerInsMap).length===0&&i.length!==0&&i.forEach(a=>{const o=bpNodeControllerMap.get(a.type),s=this.bpNodeConfigMap[a.id];o&&(this.bpNodeControllerInsMap[a.id]=new o(s))}),n=this.bpNodeControllerInsMap[t]}if(n){let i=n.getConfig();[...i.input,...i.output].forEach(o=>{const{id:s}=o;if(s in this.bpAPMap&&delete this.bpAPMap[s],s in this.bpAPLineMap){const l=this.bpAPLineMap[s];this.delLine([...l]),delete this.bpAPLineMap[s]}})}delete this.bpNodeConfigMap[t],delete this.bpNodeLayoutMap[t],delete this.bpNodeControllerInsMap[t]}),this.setSelectedNodes([]))});D(this,"delLine",e=>{!e||e.length===0||(e.forEach(t=>{const n=this.bpLines[t];n&&this.delAPMap(n.startAnchorId,n.endAnchorId),delete this.bpLines[t],this.delAPLineMap(n.startAnchorId,t),this.delAPLineMap(n.endAnchorId,t)}),this.setSelectedLines([]))});makeObservable(this,{selectedNodes:observable,bpNodeLayoutMap:observable,canvasScale:observable,setSelectedNodes:action,addBPNodeLayout:action,updBpNodeLayout:action,setCanvasScale:action})}}const bpStore=new BPStore,bpStore$1=bpStore,BPHeader=()=>jsxRuntimeExports.jsxs("div",{className:"bp-header",children:[jsxRuntimeExports.jsx("div",{className:"bp-header-title",children:"蓝图编辑器"}),jsxRuntimeExports.jsx("div",{className:"bp-header-menu",children:jsxRuntimeExports.jsx(LineOutlined,{onClick:()=>{const{setBluePrintVisible:r}=headerStore;r(!1);const{setCanvasTranslate:e,setCanvasScale:t}=bpStore$1;e({x:0,y:0}),t(1)}})})]}),BPFooter=observer(()=>{const{canvasScale:r}=bpStore$1;return jsxRuntimeExports.jsx("div",{className:"bp-footer",children:jsxRuntimeExports.jsxs("div",{className:"bp-footer-item",children:["缩放:",(r*100).toFixed(0),"%"]})})});class BPLeftStore{constructor(){D(this,"activeMenu","layer");D(this,"usedLayerNodes",{});D(this,"setActiveMenu",e=>{this.activeMenu=e});D(this,"setUsedLayerNodes",(e,t)=>{this.usedLayerNodes[e]=t});D(this,"initUsedLayerNodes",e=>{this.usedLayerNodes=e});makeObservable(this,{activeMenu:observable,setActiveMenu:action,usedLayerNodes:observable,setUsedLayerNodes:action})}}const bpLeftStore=new BPLeftStore,bpLeftStore$1=bpLeftStore,BPLeft=()=>jsxRuntimeExports.jsxs("div",{className:"bp-left",children:[jsxRuntimeExports.jsx(BPNodeSortList,{}),jsxRuntimeExports.jsx(BPNodeList,{})]}),BPNodeSortList=()=>{const r=[{icon:jsxRuntimeExports.jsx(CodeSandboxOutlined$1,{}),label:"图层节点",key:"layer"},{icon:jsxRuntimeExports.jsx(ApartmentOutlined$1,{}),label:"逻辑节点",key:"logical"}];return jsxRuntimeExports.jsx("div",{className:"bp-node-sort-list",children:r.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"bp-left-item",onClick:()=>{bpLeftStore$1.setActiveMenu(e.key)},children:[jsxRuntimeExports.jsx("div",{className:"bp-item-icon",children:e.icon}),jsxRuntimeExports.jsx("div",{className:"bp-item-label",children:e.label})]},t))})},dragStart=(r,e)=>{r.dataTransfer.setData("nodeId",e.getAttribute("data-id")),r.dataTransfer.setData("type",e.getAttribute("data-type"))},dragover=r=>{r.preventDefault()},drop=r=>{r.preventDefault();let e=r.dataTransfer.getData("nodeId");const t=r.dataTransfer.getData("type"),{bpDragContentRef:n,canvasScale:i}=bpStore$1,a=n==null?void 0:n.getBoundingClientRect(),o={x:(r.clientX-((a==null?void 0:a.x)||0))/i,y:(r.clientY-((a==null?void 0:a.y)||0))/i};if(console.log("position",o),t==="layer-node"){const{setUsedLayerNodes:l}=bpLeftStore$1;l(e,!0)}else e=IdGenerate.generateId();const{addBPNodeLayout:s}=bpStore$1;s({id:e,type:t,position:o})},BPNodeList=observer(()=>{const{activeMenu:r}=bpLeftStore$1,e=nodeListMapping[r];return reactExports.useEffect(()=>{const t=document.getElementById("bp-ds-container"),n=document.getElementsByClassName("bp-node-list-item");Array.from(n).forEach(i=>{i.removeEventListener("dragstart",a=>dragStart(a,i)),i.addEventListener("dragstart",a=>dragStart(a,i))}),t&&t.removeEventListener("dragover",dragover),t&&t.addEventListener("dragover",dragover),t&&t.removeEventListener("drop",drop),t&&t.addEventListener("drop",drop)},[r]),jsxRuntimeExports.jsxs("div",{className:"bp-node-list",children:[jsxRuntimeExports.jsx("div",{className:"bp-node-list-header",children:jsxRuntimeExports.jsx("div",{className:"bp-node-list-header-label",children:"图层节点(取自画布已有组件)"})}),jsxRuntimeExports.jsx("div",{className:"bp-node-list-body",children:jsxRuntimeExports.jsx("div",{className:"bp-node-list-container",style:{overflow:"scroll"},children:e&&jsxRuntimeExports.jsx(e,{})})})]})}),BPLayerNodeList=observer(()=>{const{layerConfigs:r}=designerStore$1,{usedLayerNodes:e}=bpLeftStore$1;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r&&Object.keys(r).map((t,n)=>{const i=r[t],a=e[t];return jsxRuntimeExports.jsxs("div",{className:`bp-node-list-item ${a?"bp-node-list-item-used":""}`,"data-id":i.id,"data-type":"layer-node",draggable:!a,children:[jsxRuntimeExports.jsx("div",{className:"bpn-li-icon",children:jsxRuntimeExports.jsx(BlockOutlined$1,{})}),jsxRuntimeExports.jsx("div",{className:"bpn-li-label",children:i.name})]},n)})})}),BPLogicalNodeList=()=>{const r=[{name:"条件判断",icon:BranchesOutlined$1,type:"condition-node"},{name:"逻辑处理",icon:FunctionOutlined$1,type:"logical-process-node"}];return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"bp-node-list-item","data-type":e.type,draggable:!0,children:[jsxRuntimeExports.jsx("div",{className:"bpn-li-icon",children:jsxRuntimeExports.jsx(e.icon,{})}),jsxRuntimeExports.jsx("div",{className:"bpn-li-label",children:e.name})]},t))})},BPGlobalVariablesNodeList=()=>jsxRuntimeExports.jsx("div",{children:"全局变量"}),BPFilterNodeList=()=>jsxRuntimeExports.jsx("div",{children:"过滤器"}),nodeListMapping={layer:BPLayerNodeList,logical:BPLogicalNodeList,global:BPGlobalVariablesNodeList,filter:BPFilterNodeList};class BPRightStore{constructor(){D(this,"activeNode",null);D(this,"setActiveNode",e=>{this.activeNode=e});makeObservable(this,{activeNode:observable,setActiveNode:action})}}const bpRightStore=new BPRightStore,BPRight=observer(()=>{const{bpNodeControllerInsMap:r}=bpStore$1,{activeNode:e}=bpRightStore,t=r[e],n=t==null?void 0:t.getConfig();if(!n)return jsxRuntimeExports.jsx("div",{className:"bp-right node-config-empty-info",children:"请激活节点配置..."});const i=[...n.input,...n.output],a=t.getConfigComponent();return jsxRuntimeExports.jsxs("div",{className:"bp-right bp-node-config",children:[jsxRuntimeExports.jsxs("div",{className:"bp-node-config-header",children:[jsxRuntimeExports.jsx("div",{className:"bp-node-config-name",children:n==null?void 0:n.name}),jsxRuntimeExports.jsx("div",{className:"bp-node-config-info",children:`${n==null?void 0:n.id} | ${n==null?void 0:n.type}`})]}),jsxRuntimeExports.jsx("div",{className:"bp-ap-info-list",children:jsxRuntimeExports.jsx(Accordion,{label:"锚点信息",children:i.map(o=>jsxRuntimeExports.jsxs("div",{className:"bp-ap-info-item",children:[jsxRuntimeExports.jsx("div",{className:`bp-ap-info-type ${o.type===0?"type-input":"type-output"}`,children:o.type===0?"输入":"输出"}),jsxRuntimeExports.jsx("div",{className:"bp-ap-info-name",children:o.name})]},o.id))})}),a&&jsxRuntimeExports.jsx("div",{className:"bp-node-config-detail",children:jsxRuntimeExports.jsx(Accordion,{label:"节点配置",children:jsxRuntimeExports.jsx(a,{controller:t})})})]})});class CanvasUtil{static drawBezierCurves(e,t){e.beginPath();for(let n=0;n<t.length;n++){const{startPoint:i,endPoint:a,firstCP:o,secondCP:s,color:l,lineWidth:c,lineDash:u}=t[n];e.strokeStyle=l,e.lineWidth=c,e.moveTo(i.x,i.y),e.setLineDash(u),e.lineDashOffset=0,e.bezierCurveTo(o.x,o.y,s.x,s.y,a.x,a.y)}e.stroke()}static calculateControlPoint(e,t){const n=t.x<e.x?"left":"right",i=Math.abs(t.x-e.x),a={x:0,y:0},o={x:0,y:0};return n==="right"?(a.x=e.x+i*.5,a.y=e.y,o.x=t.x-i*.5,o.y=t.y):(a.x=e.x+i*.3,a.y=e.y,o.x=t.x-i*.3,o.y=t.y),{firstCP:a,secondCP:o}}static sampleBezierCurve(e,t,n,i,a){const o=[];for(let s=0;s<=a;s++){const l=s/a,c=(1-l)**3*e.x+3*(1-l)**2*l*t.x+3*(1-l)*l**2*n.x+l**3*i.x,u=(1-l)**3*e.y+3*(1-l)**2*l*t.y+3*(1-l)*l**2*n.y+l**3*i.y;o.push({x:c,y:u})}return o}static drawPoint(e,t,n,i){e.fillStyle=i,e.fillRect(t.x-n/2,t.y-n/2,n,n)}static isMouseInRectangle(e,t,n){const i=Math.abs(n.x-t.x);let a,o;n.x<t.x?(a=Math.min(t.x+i*.05,n.x-i*.05),o=Math.max(t.x+i*.05,n.x-i*.05)):(a=Math.min(t.x,n.x),o=Math.max(t.x,n.x));const s=Math.min(t.y,n.y),l=Math.max(t.y,n.y);return e.x>=a&&e.x<=o&&e.y>=s&&e.y<=l}static distanceBetweenPointAndLine(e,t,n){const i=e.x-t.x,a=e.y-t.y,o=n.x-t.x,s=n.y-t.y,l=i*o+a*s,c=o*o+s*s;let u=-1;c!==0&&(u=l/c);let f,d;u<0?(f=t.x,d=t.y):u>1?(f=n.x,d=n.y):(f=t.x+u*o,d=t.y+u*s);const g=e.x-f,p=e.y-d;return Math.sqrt(g*g+p*p)}static isMouseOnLine(e,t,n){for(let i=0;i<t.length-1;i++)if(CanvasUtil.distanceBetweenPointAndLine(e,t[i],t[i+1])<=n)return!0;return!1}static updSegmentSamplingPoint(){const{bpLines:e}=bpStore$1;Object.values(e).forEach(t=>{const{startPoint:n,firstCP:i,secondCP:a,endPoint:o}=t;t.samplePoints=CanvasUtil.sampleBezierCurve(n,i,a,o,20)})}}class LineLayer extends React.Component{constructor(){super(...arguments);D(this,"upLayer",null);D(this,"downLayer",null);D(this,"currentLine",{color:"#c0c0c0",lineWidth:1,lineDash:[10,10],startPoint:{x:0,y:0},endPoint:{x:0,y:0},firstCP:{x:0,y:0},secondCP:{x:0,y:0}});D(this,"keyDown",!1);D(this,"keyMove",!1)}componentDidMount(){const{setUpCtx:t,setDownCtx:n,canvasOffset:i}=bpStore$1;t(this.upLayer.getContext("2d")),n(this.downLayer.getContext("2d")),document.addEventListener("mousedown",a=>{const{target:o}=a;if(!o||!o.classList.contains("ap-circle"))return;const s=a.target,l=s.id.split(":");if(l&&l.length===3&&l[2]===AnchorPointType.INPUT.toString())return;const{x:c,y:u,width:f,height:d}=s.getBoundingClientRect();this.currentLine.startPoint={x:c+f/2-i.x,y:u+d/2-i.y},this.currentLine.startAnchorId=s.id,this.keyDown=!0}),document.addEventListener("mouseup",a=>{var $,P;const{nodeContainerRef:o,upCtx:s}=bpStore$1,{width:l,height:c}=o==null?void 0:o.getBoundingClientRect(),u=a.target;if(!this.keyMove||!u||!u.classList.contains("ap-circle")||(($=u.id)==null?void 0:$.split(":")[2])!==AnchorPointType.INPUT.toString()){s==null||s.clearRect(0,0,l,c),this.keyDown=!1;return}this.keyMove=!1,this.keyDown=!1,bpStore$1.upCtx.clearRect(0,0,l,c),this.currentLine.id=IdGenerate.generateId(),this.currentLine.lineDash=[],this.currentLine.lineWidth=1,this.currentLine.color="#a2a2a2",this.currentLine.endAnchorId=a.target.id;const{x:f,y:d,width:g,height:p}=(P=a.target)==null?void 0:P.getBoundingClientRect();this.currentLine.endPoint={x:f+g/2-i.x,y:d+p/2-i.y},CanvasUtil.drawBezierCurves(bpStore$1.downCtx,[this.currentLine]);const{id:v,startPoint:y,endPoint:m,firstCP:x,secondCP:_,lineDash:S,startAnchorId:A,endAnchorId:b,color:C,lineWidth:E}=this.currentLine,T=CanvasUtil.sampleBezierCurve(y,x,_,m,20),{addAPMap:I,addLine:w,addAPLineMap:M}=bpStore$1;w({id:v,color:C,lineWidth:E,lineDash:S,startPoint:{...y},endPoint:{...m},firstCP:{...x},secondCP:{..._},samplePoints:T,startAnchorId:A,endAnchorId:b}),I(this.currentLine.startAnchorId,this.currentLine.endAnchorId),M(this.currentLine.startAnchorId,this.currentLine.id),M(this.currentLine.endAnchorId,this.currentLine.id)}),document.addEventListener("mousemove",a=>{if(!this.keyDown)return;this.keyMove=!0;const{startPoint:o,endPoint:s}=this.currentLine,{nodeContainerRef:l,canvasOffset:c}=bpStore$1,{width:u,height:f}=l==null?void 0:l.getBoundingClientRect();this.currentLine.endPoint={x:a.clientX-c.x,y:a.clientY-c.y};const d=CanvasUtil.calculateControlPoint(o,s);this.currentLine.firstCP=d.firstCP,this.currentLine.secondCP=d.secondCP,bpStore$1.upCtx.clearRect(0,0,u,f),CanvasUtil.drawBezierCurves(bpStore$1.upCtx,[{color:"#c0c0c0",lineWidth:1,lineDash:[10,10],startPoint:this.currentLine.startPoint,endPoint:this.currentLine.endPoint,firstCP:this.currentLine.firstCP,secondCP:this.currentLine.secondCP}])})}render(){const t=window.innerWidth-670,n=window.innerHeight-75,i={position:"inherit",top:0,left:0};return jsxRuntimeExports.jsxs("div",{style:{position:"absolute"},children:[jsxRuntimeExports.jsx("canvas",{style:i,width:t,height:n,ref:a=>this.downLayer=a}),jsxRuntimeExports.jsx("canvas",{style:i,width:t,height:n,ref:a=>this.upLayer=a})]})}}function some$1(r,e){for(var t=r.length,n=0;n<t;++n)if(e(r[n],n))return!0;return!1}function find$2(r,e){for(var t=r.length,n=0;n<t;++n)if(e(r[n],n))return r[n];return null}function getUserAgentString(r){var e=r;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function execRegExp(r,e){try{return new RegExp(r,"g").exec(e)}catch{return null}}function hasUserAgentData(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var r=navigator.userAgentData,e=r.brands||r.uaList;return!!(e&&e.length)}function findVersion(r,e){var t=execRegExp("("+r+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return t?t[3]:""}function convertVersion(r){return r.replace(/_/g,".")}function findPreset(r,e){var t=null,n="-1";return some$1(r,function(i){var a=execRegExp("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(t=i,n=a[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=findVersion(i.versionTest.toLowerCase(),e)||n),n=convertVersion(n),!0)}),{preset:t,version:n}}function findPresetBrand(r,e){var t={brand:"",version:"-1"};return some$1(r,function(n){var i=findBrand(e,n);return i?(t.brand=n.id,t.version=n.versionAlias||i.version,t.version!=="-1"):!1}),t}function findBrand(r,e){return find$2(r,function(t){var n=t.brand;return execRegExp(""+e.test,n.toLowerCase())})}var BROWSER_PRESETS=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],CHROMIUM_PRESETS=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],WEBKIT_PRESETS=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],WEBVIEW_PRESETS=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],OS_PRESETS=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function isWebView(r){return!!findPreset(WEBVIEW_PRESETS,r).preset}function getLegacyAgent(r){var e=getUserAgentString(r),t=!!/mobi/g.exec(e),n={name:"unknown",version:"-1",majorVersion:-1,webview:isWebView(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=findPreset(BROWSER_PRESETS,e),o=a.preset,s=a.version,l=findPreset(OS_PRESETS,e),c=l.preset,u=l.version,f=findPreset(CHROMIUM_PRESETS,e);if(n.chromium=!!f.preset,n.chromiumVersion=f.version,!n.chromium){var d=findPreset(WEBKIT_PRESETS,e);n.webkit=!!d.preset,n.webkitVersion=d.version}return c&&(i.name=c.id,i.version=u,i.majorVersion=parseInt(u,10)),o&&(n.name=o.id,n.version=s,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:t,isHints:!1}}function getClientHintsAgent(r){var e=navigator.userAgentData,t=(e.uaList||e.brands).slice(),n=r&&r.fullVersionList,i=e.mobile||!1,a=t[0],o=(r&&r.platform||e.platform||navigator.platform).toLowerCase(),s={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!findPresetBrand(WEBVIEW_PRESETS,t).brand||isWebView(getUserAgentString())},l={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&some$1(WEBKIT_PRESETS,function(p){return findBrand(t,p)});var c=findPresetBrand(CHROMIUM_PRESETS,t);if(s.chromium=!!c.brand,s.chromiumVersion=c.version,!s.chromium){var u=findPresetBrand(WEBKIT_PRESETS,t);s.webkit=!!u.brand,s.webkitVersion=u.version}var f=find$2(OS_PRESETS,function(p){return new RegExp(""+p.test,"g").exec(o)});if(l.name=f?f.id:"",r&&(l.version=r.platformVersion),n&&n.length){var d=findPresetBrand(BROWSER_PRESETS,n);s.name=d.brand||s.name,s.version=d.version||s.version}else{var g=findPresetBrand(BROWSER_PRESETS,t);s.name=g.brand||s.name,s.version=g.brand&&r?r.uaFullVersion:g.version}return s.webkit&&(l.name=i?"ios":"mac"),l.name==="ios"&&s.webview&&(s.version="-1"),l.version=convertVersion(l.version),s.version=convertVersion(s.version),l.majorVersion=parseInt(l.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:l,isMobile:i,isHints:!0}}function agent$1(r){return typeof r>"u"&&hasUserAgentData()?getClientHintsAgent():getLegacyAgent(r)}var __assign$3=function(){return __assign$3=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$3.apply(this,arguments)};function __rest$2(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function styled(r,e){var t=styled$1(e),n=t.className;return reactExports.forwardRef(function(i,a){var o=i.className,s=o===void 0?"":o;i.cspNonce;var l=__rest$2(i,["className","cspNonce"]),c=reactExports.useRef();return reactExports.useImperativeHandle(a,function(){return c.current},[]),reactExports.useEffect(function(){var u=t.inject(c.current,{nonce:i.cspNonce});return function(){u.destroy()}},[]),reactExports.createElement(r,__assign$3({ref:c,"data-styled-id":n,className:"".concat(s," ").concat(n)},l))})}var extendStatics$2=function(r,e){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},extendStatics$2(r,e)};function __extends$2(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$2(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var __assign$2=function(){return __assign$2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$2.apply(this,arguments)};function __rest$1(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function __decorate(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function __values$1(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function __spreadArray$2(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function makeAble(r,e){return __assign$2({events:[],props:[],name:r},e)}var DIRECTIONS4=["n","w","s","e"],DIRECTIONS=["n","w","s","e","nw","ne","sw","se"];function getSVGCursor(r,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*r,'px" height="').concat(32*r,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function getCursorCSS(r){var e=getSVGCursor(1,r),t=Math.round(r/45)*45%180,n="ns-resize";return t===135?n="nwse-resize":t===45?n="nesw-resize":t===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}var agent=agent$1(),IS_WEBKIT=agent.browser.webkit,IS_WEBKIT605=IS_WEBKIT&&function(){var r=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(r.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),browserName=agent.browser.name,browserVersion=parseInt(agent.browser.version,10),IS_CHROME=browserName==="chrome",IS_CHROMIUM=agent.browser.chromium,chromiumVersion=parseInt(agent.browser.chromiumVersion,10)||0,IS_CHROMIUM109=IS_CHROME&&browserVersion>=109||IS_CHROMIUM&&chromiumVersion>=109,IS_FIREFOX=browserName==="firefox",IS_SAFARI_ABOVE15=parseInt(agent.browser.webkitVersion,10)>=612||browserVersion>=15,PREFIX="moveable-",directionCSS=DIRECTIONS.map(function(r){var e="",t="",n="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return r.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),r.indexOf("s")>-1&&(e="top: 0px;",i="top"),r.indexOf("w")>-1&&(t="left: ".concat(a,";"),n="right"),r.indexOf("e")>-1&&(t="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(r,`"] {
        `).concat(t).concat(e,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),MOVEABLE_CSS=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(directionCSS,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(r){return`
.direction[data-rotation="`.concat(r,'"], :global .view-control-rotation').concat(r,` {
`).concat(getCursorCSS(r),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(IS_WEBKIT605?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),NEARBY_POS=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],FLOAT_POINT_NUM=1e-4,TINY_NUM=1e-7,MIN_SCALE=1e-9,MAX_NUM=Math.pow(10,10),MIN_NUM=-MAX_NUM,DIRECTION_REGION_TO_DIRECTION={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},DIRECTION_INDEXES={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},DIRECTION_ROTATIONS={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},MOVEABLE_METHODS=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function setCustomDrag(r,e,t,n,i,a){var o,s;a===void 0&&(a="draggable");var l=(s=(o=e.gestos[a])===null||o===void 0?void 0:o.move(t,r.inputEvent))!==null&&s!==void 0?s:{},c=l.originalDatas||l.datas,u=c[a]||(c[a]={});return __assign$2(__assign$2({},i?convertDragDist(e,l):l),{isPinch:!!n,parentEvent:!0,datas:u,originalDatas:r.originalDatas})}var CustomGesto=function(){function r(e){var t;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(t={},t[e]={},t)}return r.prototype.dragStart=function(e,t){this.isDrag=!1,this.isFlag=!1;var n=t.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),__assign$2(__assign$2({},this.move(e,t.inputEvent)),{type:"dragstart"})},r.prototype.drag=function(e,t){return this.move([e[0]-this.prevX,e[1]-this.prevY],t)},r.prototype.move=function(e,t){var n,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],n=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:t,isFirstDrag:a,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},r}();function calculateElementPosition(r,e,t,n){var i=r.length===16,a=i?4:3,o=calculatePoses(r,t,n,a),s=__read$1(o,4),l=__read$1(s[0],2),c=l[0],u=l[1],f=__read$1(s[1],2),d=f[0],g=f[1],p=__read$1(s[2],2),v=p[0],y=p[1],m=__read$1(s[3],2),x=m[0],_=m[1],S=__read$1(calculatePosition(r,e,a),2),A=S[0],b=S[1],C=Math.min(c,d,v,x),E=Math.min(u,g,y,_),T=Math.max(c,d,v,x),I=Math.max(u,g,y,_);c=c-C||0,d=d-C||0,v=v-C||0,x=x-C||0,u=u-E||0,g=g-E||0,y=y-E||0,_=_-E||0,A=A-C||0,b=b-E||0;var w=r[0],M=r[a+1],$=sign(w*M);return{left:C,top:E,right:T,bottom:I,origin:[A,b],pos1:[c,u],pos2:[d,g],pos3:[v,y],pos4:[x,_],direction:$}}function calculatePointerDist(r,e){var t=e.clientX,n=e.clientY,i=e.datas,a=r.state,o=a.moveableClientRect,s=a.rootMatrix,l=a.is3d,c=a.pos1,u=o.left,f=o.top,d=l?4:3,g=__read$1(minus(calculateInversePosition(s,[t-u,n-f],d),c),2),p=g[0],v=g[1],y=__read$1(getDragDist({datas:i,distX:p,distY:v}),2),m=y[0],x=y[1];return[m,x]}function setDragStart(r,e){var t=e.datas,n=r.state,i=n.allMatrix,a=n.beforeMatrix,o=n.is3d,s=n.left,l=n.top,c=n.origin,u=n.offsetMatrix,f=n.targetMatrix,d=n.transformOrigin,g=o?4:3;t.is3d=o,t.matrix=i,t.targetMatrix=f,t.beforeMatrix=a,t.offsetMatrix=u,t.transformOrigin=d,t.inverseMatrix=invert$2(i,g),t.inverseBeforeMatrix=invert$2(a,g),t.absoluteOrigin=convertPositionMatrix(plus([s,l],c),g),t.startDragBeforeDist=calculate(t.inverseBeforeMatrix,t.absoluteOrigin,g),t.startDragDist=calculate(t.inverseMatrix,t.absoluteOrigin,g)}function getTransformDirection(r){return calculateElementPosition(r.datas.beforeTransform,[50,50],100,100).direction}function resolveTransformEvent(r,e,t){var n=e.datas,i=e.originalDatas.beforeRenderable,a=n.transformIndex,o=i.nextTransforms,s=o.length,l=i.nextTransformAppendedIndexes,c=-1;a===-1?(t==="translate"?c=0:t==="rotate"&&(c=findIndex$1(o,function(g){return g.match(/scale\(/g)})),c===-1&&(c=o.length),n.transformIndex=c):find$3(l,function(g){return g.index===a&&g.functionName===t})?c=a:c=a+l.filter(function(g){return g.index<a}).length;var u=convertTransformInfo(o,r.state,c),f=u.targetFunction,d=t==="rotate"?"rotateZ":t;n.beforeFunctionTexts=u.beforeFunctionTexts,n.afterFunctionTexts=u.afterFunctionTexts,n.beforeTransform=u.beforeFunctionMatrix,n.beforeTransform2=u.beforeFunctionMatrix2,n.targetTansform=u.targetFunctionMatrix,n.afterTransform=u.afterFunctionMatrix,n.afterTransform2=u.afterFunctionMatrix2,n.targetAllTransform=u.allFunctionMatrix,f.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>c&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=__spreadArray$2(__spreadArray$2([],__read$1(l),!1),[{functionName:t,index:c,isAppend:!0}],!1))}function convertTransformFormat(r,e,t){return"".concat(r.beforeFunctionTexts.join(" ")," ").concat(r.isAppendTransform?t:e," ").concat(r.afterFunctionTexts.join(" "))}function getTransformDist(r){var e=r.datas,t=r.distX,n=r.distY,i=__read$1(getBeforeDragDist({datas:e,distX:t,distY:n}),2),a=i[0],o=i[1],s=getTransfromMatrix(e,fromTranslation$1([a,o],4));return calculate(s,convertPositionMatrix([0,0,0],4),4)}function getTransfromMatrix(r,e,t){var n=r.beforeTransform,i=r.afterTransform,a=r.beforeTransform2,o=r.afterTransform2,s=r.targetAllTransform,l=t?multiply$1(s,e,4):multiply$1(e,s,4),c=multiply$1(invert$2(t?a:n,4),l,4),u=multiply$1(c,invert$2(t?o:i,4),4);return u}function getBeforeDragDist(r){var e=r.datas,t=r.distX,n=r.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,s=e.absoluteOrigin,l=a?4:3;return minus(calculate(i,plus(s,[t,n]),l),o)}function getDragDist(r,e){var t=r.datas,n=r.distX,i=r.distY,a=t.inverseBeforeMatrix,o=t.inverseMatrix,s=t.is3d,l=t.startDragBeforeDist,c=t.startDragDist,u=t.absoluteOrigin,f=s?4:3;return minus(calculate(e?a:o,plus(u,[n,i]),f),e?l:c)}function getInverseDragDist(r,e){var t=r.datas,n=r.distX,i=r.distY,a=t.beforeMatrix,o=t.matrix,s=t.is3d,l=t.startDragBeforeDist,c=t.startDragDist,u=t.absoluteOrigin,f=s?4:3;return minus(calculate(e?a:o,plus(e?l:c,[n,i]),f),u)}function calculateTransformOrigin(r,e,t,n,i,a){return n===void 0&&(n=e),i===void 0&&(i=t),a===void 0&&(a=[0,0]),r?r.map(function(o,s){var l=splitUnit(o),c=l.value,u=l.unit,f=s?i:n,d=s?t:e;if(o==="%"||isNaN(c)){var g=f?a[s]/f:0;return d*g}else if(u!=="%")return c;return d*c/100}):a}function getPosIndexesByDirection(r){var e=[];return r[1]>=0&&(r[0]>=0&&e.push(3),r[0]<=0&&e.push(2)),r[1]<=0&&(r[0]>=0&&e.push(1),r[0]<=0&&e.push(0)),e}function getPosesByDirection(r,e){return getPosIndexesByDirection(e).map(function(t){return r[t]})}function getPosByDirection(r,e){var t=(e[0]+1)/2,n=(e[1]+1)/2,i=[dot$3(r[0][0],r[1][0],t,1-t),dot$3(r[0][1],r[1][1],t,1-t)],a=[dot$3(r[2][0],r[3][0],t,1-t),dot$3(r[2][1],r[3][1],t,1-t)];return[dot$3(i[0],a[0],n,1-n),dot$3(i[1],a[1],n,1-n)]}function getDist(r,e,t,n,i,a){var o=calculatePoses(e,t,n,i),s=getPosByDirection(o,a),l=r[0]-s[0],c=r[1]-s[1];return[l,c]}function getNextMatrix(r,e,t,n){return multiply$1(r,getAbsoluteMatrix(e,n,t),n)}function getNextTransformMatrix(r,e,t,n){var i=r.transformOrigin,a=r.offsetMatrix,o=r.is3d,s=o?4:3,l;if(isString$1(t)){var c=e.beforeTransform,u=e.afterTransform;n?l=convertDimension(parseMat(t),4,s):l=convertDimension(multiply$1(multiply$1(c,parseMat([t]),4),u,4),4,s)}else l=t;return getNextMatrix(a,l,i,s)}function scaleMatrix(r,e){var t=r.transformOrigin,n=r.offsetMatrix,i=r.is3d,a=r.targetMatrix,o=r.targetAllTransform,s=i?4:3;return getNextMatrix(n,multiply$1(o||a,createScaleMatrix(e,s),s),t,s)}function fillTransformStartEvent(r,e){var t=getBeforeRenderableDatas(e);return{setTransform:function(n,i){i===void 0&&(i=-1),t.startTransforms=isArray$4(n)?n:splitSpace(n),setTransformIndex(r,e,i)},setTransformIndex:function(n){setTransformIndex(r,e,n)}}}function setDefaultTransformIndex(r,e,t){var n=getBeforeRenderableDatas(e),i=n.startTransforms;setTransformIndex(r,e,findIndex$1(i,function(a){return a.indexOf("".concat(t,"("))===0}))}function setTransformIndex(r,e,t){var n=getBeforeRenderableDatas(e),i=e.datas;if(i.transformIndex=t,t!==-1){var a=n.startTransforms[t];if(a){var o=r.state,s=parse$1([a],{"x%":function(l){return l/100*o.offsetWidth},"y%":function(l){return l/100*o.offsetHeight}});i.startValue=s[0].functionValue}}}function fillOriginalTransform(r,e){var t=getBeforeRenderableDatas(r);t.nextTransforms=splitSpace(e)}function getBeforeRenderableDatas(r){return r.originalDatas.beforeRenderable}function getNextTransforms(r){var e=r.originalDatas.beforeRenderable;return e.nextTransforms}function getNextTransformText(r){return(getNextTransforms(r)||[]).join(" ")}function getNextStyle(r){return getBeforeRenderableDatas(r).nextStyle}function fillTransformEvent(r,e,t,n,i){fillOriginalTransform(i,e);var a=Draggable.drag(r,setCustomDrag(i,r.state,t,n,!1)),o=a?a.transform:e;return __assign$2(__assign$2({transform:e,drag:a},fillCSSObject({transform:o},i)),{afterTransform:o})}function getTranslateFixedPosition(r,e,t,n,i,a){var o=getNextTransformMatrix(r.state,i,e,a),s=getDirectionOffset(r,t,n,o);return s}function getTranslateDist(r,e,t,n,i,a,o){var s=getTranslateFixedPosition(r,e,t,i,a,o),l=r.state,c=l.left,u=l.top,f=r.props.groupable,d=f?c:0,g=f?u:0,p=minus(n,s);return minus(p,[d,g])}function getScaleDist(r,e,t,n,i,a,o){var s=getTranslateDist(r,e,t,n,i,a,o);return s}function getDirectionByPos(r,e,t){return[e?-1+r[0]/(e/2):0,t?-1+r[1]/(t/2):0]}function getDirectionOffset(r,e,t,n){n===void 0&&(n=r.state.allMatrix);var i=r.state,a=i.width,o=i.height,s=i.is3d,l=s?4:3,c=[a/2*(1+e[0])+t[0],o/2*(1+e[1])+t[1]];return calculatePosition(n,c,l)}function getRotateDist(r,e,t){var n=t.fixedDirection,i=t.fixedPosition,a=t.fixedOffset;return getTranslateDist(r,"rotate(".concat(e,"deg)"),n,i,a,t)}function getResizeDist(r,e,t,n,i,a){var o=r.props.groupable,s=r.state,l=s.transformOrigin,c=s.offsetMatrix,u=s.is3d,f=s.width,d=s.height,g=s.left,p=s.top,v=a.fixedDirection,y=a.nextTargetMatrix||s.targetMatrix,m=u?4:3,x=calculateTransformOrigin(i,e,t,f,d,l),_=o?g:0,S=o?p:0,A=getNextMatrix(c,y,x,m),b=getDist(n,A,e,t,m,v);return minus(b,[_,S])}function getAbsolutePosition(r,e){return getPosByDirection(getAbsolutePosesByState(r.state),e)}function getGestoData(r,e){var t=r.targetGesto,n=r.controlGesto,i;return t!=null&&t.isFlag()&&(i=t.getEventData()[e]),!i&&(n!=null&&n.isFlag())&&(i=n.getEventData()[e]),i||{}}function getShadowRoot(r){if(r&&r.getRootNode){var e=r.getRootNode();if(e.nodeType===11)return e}}function getIndividualTransforms(r){var e=r("scale"),t=r("rotate"),n=r("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),t&&t!=="1"&&t!=="none"&&i.push("rotate(".concat(t,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function getMatrixStackInfo(r,e,t){for(var n=r,i=[],a=getDocumentElement(r)||getDocumentBody(r),o=!t&&r===e||r===a,s=o,l=!1,c=3,u,f,d,g=!1,p=getOffsetInfo(e,e,!0).offsetParent,v=1;n&&!s;){s=o;var y=getCachedStyle(n),m=y("position"),x=getElementTransform(n),_=m==="fixed",S=getIndividualTransforms(y),A=convertCSStoMatrix(getTransformMatrix(x)),b=void 0,C=!1,E=!1,T=0,I=0,w=0,M=0,$={hasTransform:!1,fixedContainer:null};_&&(g=!0,$=getPositionFixedInfo(n),p=$.fixedContainer);var P=A.length;!l&&(P===16||S.length)&&(l=!0,c=4,convert3DMatrixes(i),d&&(d=convertDimension(d,3,4))),l&&P===9&&(A=convertDimension(A,3,4));var R=getOffsetPosInfo(n,r),L=R.tagName,O=R.hasOffset,k=R.isSVG,B=R.origin,N=R.targetOrigin,F=R.offset,V=__read$1(F,2),H=V[0],z=V[1];L==="svg"&&d&&(i.push({type:"target",target:n,matrix:getSVGMatrix(n,c)}),i.push({type:"offset",target:n,matrix:createIdentityMatrix(c)}));var G=parseFloat(y("zoom"))||1;if(_)b=$.fixedContainer,C=!0;else{var j=getOffsetInfo(n,e,!1,!0,y),Y=j.offsetZoom;if(b=j.offsetParent,C=j.isEnd,E=j.isStatic,v*=Y,(j.isCustomElement||Y!==1)&&E)H-=b.offsetLeft,z-=b.offsetTop;else if(IS_FIREFOX||IS_CHROMIUM109){var U=j.parentSlotElement;if(U){for(var K=b,q=0,W=0;K&&getShadowRoot(K);)q+=K.offsetLeft,W+=K.offsetTop,K=K.offsetParent;H-=q,z-=W}}}if(IS_WEBKIT&&!IS_SAFARI_ABOVE15&&O&&!k&&E&&(m==="relative"||m==="static")&&(H-=b.offsetLeft,z-=b.offsetTop,o=o||C),_)O&&$.hasTransform&&(w=b.clientLeft,M=b.clientTop);else if(O&&p!==b&&(T=b.clientLeft,I=b.clientTop),O&&b===a){var X=getBodyOffset(n,!1);H+=X[0],z+=X[1]}if(i.push({type:"target",target:n,matrix:getAbsoluteMatrix(A,c,B)}),S.length&&(i.push({type:"offset",target:n,matrix:createIdentityMatrix(c)}),i.push({type:"target",target:n,matrix:getAbsoluteMatrix(parseMat(S),c,B)})),O){var tt=n===r,Z=tt?0:n.scrollLeft,J=tt?0:n.scrollTop;i.push({type:"offset",target:n,matrix:createOriginMatrix([H-Z+T-w,z-J+I-M],c)})}else i.push({type:"offset",target:n,origin:B});if(G!==1&&i.push({type:"zoom",target:n,matrix:getAbsoluteMatrix(createScaleMatrix([G,G],c),c,[0,0])}),d||(d=A),u||(u=B),f||(f=N),s||_)break;n=b,o=C,(!t||n===a)&&(s=o)}return d||(d=createIdentityMatrix(c)),u||(u=[0,0]),f||(f=[0,0]),{zoom:v,offsetContainer:p,matrixes:i,targetMatrix:d,transformOrigin:u,targetOrigin:f,is3d:l,hasFixed:g}}var cacheStyleMap=null,clientRectStyleMap=null,matrixContainerInfos=null;function setStoreCache(r){r?(window.Map&&(cacheStyleMap=new Map,clientRectStyleMap=new Map),matrixContainerInfos=[]):(cacheStyleMap=null,matrixContainerInfos=null,clientRectStyleMap=null)}function getCachedClientRect(r){var e=clientRectStyleMap==null?void 0:clientRectStyleMap.get(r);if(e)return e;var t=getClientRect(r,!0);return clientRectStyleMap&&clientRectStyleMap.set(r,t),t}function getCachedMatrixContainerInfo(r,e){if(matrixContainerInfos){var t=find$3(matrixContainerInfos,function(i){return i[0][0]==r&&i[0][1]==e});if(t)return t[1]}var n=getMatrixStackInfo(r,e,!0);return matrixContainerInfos&&matrixContainerInfos.push([[r,e],n]),n}function getCachedStyle(r){var e=cacheStyleMap==null?void 0:cacheStyleMap.get(r);if(!e){var t=getWindow(r).getComputedStyle(r);if(!cacheStyleMap)return function(a){return t[a]};e={style:t,cached:{}},cacheStyleMap.set(r,e)}var n=e.cached,i=e.style;return function(a){return a in n||(n[a]=i[a]),n[a]}}function fillChildEvents(r,e,t){var n=t.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return r.moveables.map(function(o,s){return a[s]=a[s]||{},a[s][e]=a[s][e]||{},__assign$2(__assign$2({},t),{isRequestChild:!0,datas:a[s][e],originalDatas:a[s]})})}function triggerChildGesto(r,e,t,n,i,a,o){var s=!!t.match(/Start$/g),l=!!t.match(/End$/g),c=i.isPinch,u=i.datas,f=fillChildEvents(r,e.name,i),d=r.moveables,g=f.map(function(p,v){var y=d[v],m=y.state,x=m.gestos,_=p;if(s)_=new CustomGesto(o).dragStart(n,p);else{if(x[o]||(x[o]=u.childGestos[v]),!x[o])return;_=setCustomDrag(p,m,n,c,a,o)}var S=e[t](y,__assign$2(__assign$2({},_),{parentFlag:!0}));return l&&(x[o]=null),S});return s&&(u.childGestos=d.map(function(p){return p.state.gestos[o]})),g}function triggerChildAbles(r,e,t,n,i,a){i===void 0&&(i=function(u,f){return f});var o=!!t.match(/End$/g),s=fillChildEvents(r,e.name,n),l=r.moveables,c=s.map(function(u,f){var d=l[f],g=u;g=i(d,u);var p=e[t](d,__assign$2(__assign$2({},g),{parentFlag:!0}));return p&&a&&a(d,u,p,f),o&&(d.state.gestos={}),p});return c}function startChildDist(r,e,t,n){var i=t.fixedDirection,a=t.fixedPosition,o=n.datas.startPositions||getAbsolutePosesByState(e.state),s=getPosByDirection(o,i),l=__read$1(calculate(createRotateMatrix(-r.rotation/180*Math.PI,3),[s[0]-a[0],s[1]-a[1],1],3),2),c=l[0],u=l[1];return n.datas.originalX=c,n.datas.originalY=u,n}function renderDirectionControlsByInfos(r,e,t,n){var i=r.getState(),a=i.renderPoses,o=i.rotation,s=i.direction,l=getProps(r.props,e).zoom,c=absDegree(o/Math.PI*180),u={},f=r.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;t.forEach(function(p){var v=p.dir;u[v]=!0});var g=sign(s);return t.map(function(p){var v=p.data,y=p.classNames,m=p.dir,x=DIRECTION_INDEXES[m];if(!x||!u[m])return null;d[m]=!0;var _=(throttle$1(c,15)+g*DIRECTION_ROTATIONS[m]+720)%180,S={};return getKeys(v).forEach(function(A){S["data-".concat(A)]=v[A]}),n.createElement("div",__assign$2({className:prefix.apply(void 0,__spreadArray$2(["control","direction",m,e],__read$1(y),!1)),"data-rotation":_,"data-direction":m},S,{key:"direction-".concat(m),style:getControlTransform.apply(void 0,__spreadArray$2([o,l],__read$1(x.map(function(A){return a[A]})),!1))}))})}function renderDirectionControls(r,e,t,n){var i=getProps(r.props,t),a=i.renderDirections,o=a===void 0?e:a,s=i.displayAroundControls;if(!o)return[];var l=o===!0?DIRECTIONS:o;return __spreadArray$2(__spreadArray$2([],__read$1(s?renderAroundControls(r,n,t,l):[]),!1),__read$1(renderDirectionControlsByInfos(r,t,l.map(function(c){return{data:{},classNames:[],dir:c}}),n)),!1)}function renderLine(r,e,t,n,i,a){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var l=getRad$1(t,n),c=e?throttle$1(l/Math.PI*180,15)%180:-1;return r.createElement("div",{key:"line-".concat(a),className:prefix.apply(void 0,__spreadArray$2(["line","direction",e?"edge":"",e],__read$1(o),!1)),"data-rotation":c,"data-line-key":a,"data-direction":e,style:getLineStyle(t,n,i,l)})}function renderEdgeLines(r,e,t,n,i){var a=t===!0?DIRECTIONS4:t;return a.map(function(o,s){var l=__read$1(DIRECTION_INDEXES[o],2),c=l[0],u=l[1];if(u!=null)return renderLine(r,o,n[c],n[u],i,"".concat(e,"Edge").concat(s),e)}).filter(Boolean)}function getRenderDirections(r){return function(e,t){var n=getProps(e.props,r).edge;return n&&(n===!0||n.length)?__spreadArray$2(__spreadArray$2([],__read$1(renderEdgeLines(t,r,n,e.getState().renderPoses,e.props.zoom)),!1),__read$1(renderDiagonalDirections(e,r,t)),!1):renderAllDirections(e,r,t)}}function renderAllDirections(r,e,t){return renderDirectionControls(r,DIRECTIONS,e,t)}function renderDiagonalDirections(r,e,t){return renderDirectionControls(r,["nw","ne","sw","se"],e,t)}function renderAroundControls(r,e,t,n){var i=r.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=r.getState(),o=a.renderPoses,s=a.rotation,l=a.direction,c=i.renderDirectionMap,u=r.props.zoom,f=sign(l),d=s/Math.PI*180;return(n||getKeys(c)).map(function(g){var p=DIRECTION_INDEXES[g];if(!p)return null;var v=(throttle$1(d,15)+f*DIRECTION_ROTATIONS[g]+720)%180,y=["around-control"];return t&&y.push("direction",t),e.createElement("div",{className:prefix.apply(void 0,__spreadArray$2([],__read$1(y),!1)),"data-rotation":v,"data-direction":g,key:"direction-around-".concat(g),style:getControlTransform.apply(void 0,__spreadArray$2([s,u],__read$1(p.map(function(m){return o[m]})),!1))})})}function checkBoundPoses(r,e,t){var n=r||{},i=n.position,a=i===void 0?"client":i,o=n.left,s=o===void 0?-1/0:o,l=n.top,c=l===void 0?-1/0:l,u=n.right,f=u===void 0?1/0:u,d=n.bottom,g=d===void 0?1/0:d,p={position:a,left:s,top:c,right:f,bottom:g};return{vertical:checkBounds(p,e,!0),horizontal:checkBounds(p,t,!1)}}function getBounds(r,e){var t=r.state,n=t.containerClientRect,i=n.clientHeight,a=n.clientWidth,o=n.clientLeft,s=n.clientTop,l=t.snapOffset,c=l.left,u=l.top,f=l.right,d=l.bottom,g=e||r.props.bounds||{},p=g.position||"client",v=p==="css",y=g.left,m=y===void 0?-1/0:y,x=g.top,_=x===void 0?-1/0:x,S=g.right,A=S===void 0?v?-1/0:1/0:S,b=g.bottom,C=b===void 0?v?-1/0:1/0:b;return v&&(A=a+f-c-A,C=i+d-u-C),{left:m+c-o,right:A+c-o,top:_+u-s,bottom:C+u-s}}function checkBoundKeepRatio(r,e,t){var n=getBounds(r),i=n.left,a=n.top,o=n.right,s=n.bottom,l=__read$1(t,2),c=l[0],u=l[1],f=__read$1(minus(t,e),2),d=f[0],g=f[1];abs(d)<TINY_NUM&&(d=0),abs(g)<TINY_NUM&&(g=0);var p=g>0,v=d>0,y={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(d===0&&g===0)return{vertical:y,horizontal:m};if(d===0)p?s<u&&(m.pos=s,m.offset=u-s):a>u&&(m.pos=a,m.offset=u-a);else if(g===0)v?o<c&&(y.pos=o,y.offset=c-o):i>c&&(y.pos=i,y.offset=c-i);else{var x=g/d,_=t[1]-x*c,S=0,A=0,b=!1;v&&o<=c?(S=x*o+_,A=o,b=!0):!v&&c<=i&&(S=x*i+_,A=i,b=!0),b&&(S<a||S>s)&&(b=!1),b||(p&&s<=u?(S=s,A=(S-_)/x,b=!0):!p&&u<=a&&(S=a,A=(S-_)/x,b=!0)),b&&(y.isBound=!0,y.pos=A,y.offset=c-A,m.isBound=!0,m.pos=S,m.offset=u-S)}return{vertical:y,horizontal:m}}function checkBounds(r,e,t){var n=r[t?"left":"top"],i=r[t?"right":"bottom"],a=Math.min.apply(Math,__spreadArray$2([],__read$1(e),!1)),o=Math.max.apply(Math,__spreadArray$2([],__read$1(e),!1)),s=[];return n+1>a&&s.push({direction:"start",isBound:!0,offset:a-n,pos:n}),i-1<o&&s.push({direction:"end",isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(l,c){return abs(c.offset)-abs(l.offset)})}function isBoundRotate$1(r,e,t){var n=t?r.map(function(i){return rotate$2(i,t)}):r;return n.some(function(i){return i[0]<e.left&&abs(i[0]-e.left)>.1||i[0]>e.right&&abs(i[0]-e.right)>.1||i[1]<e.top&&abs(i[1]-e.top)>.1||i[1]>e.bottom&&abs(i[1]-e.bottom)>.1})}function boundRotate(r,e,t){var n=getDistSize(r),i=Math.sqrt(n*n-e*e)||0;return[i,-i].sort(function(a,o){return abs(a-r[t?0:1])-abs(o-r[t?0:1])}).map(function(a){return getRad$1([0,0],t?[a,e]:[e,a])})}function checkRotateBounds(r,e,t,n,i){if(!r.props.bounds)return[];var a=i*Math.PI/180,o=getBounds(r),s=o.left,l=o.top,c=o.right,u=o.bottom,f=s-n[0],d=c-n[0],g=l-n[1],p=u-n[1],v={left:f,top:g,right:d,bottom:p};if(!isBoundRotate$1(t,v,0))return[];var y=[];return[[f,0],[d,0],[g,1],[p,1]].forEach(function(m){var x=__read$1(m,2),_=x[0],S=x[1];t.forEach(function(A){var b=getRad$1([0,0],A);y.push.apply(y,__spreadArray$2([],__read$1(boundRotate(A,_,S).map(function(C){return a+C-b}).filter(function(C){return!isBoundRotate$1(e,v,C)}).map(function(C){return throttle$1(C*180/Math.PI,TINY_NUM)})),!1))})}),y}var VERTICAL_NAMES=["left","right","center"],HORIZONTAL_NAMES=["top","bottom","middle"],SNAP_SKIP_NAMES_MAP={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},VERTICAL_NAMES_MAP={start:"left",end:"right",center:"center"},HORIZONTAL_NAMES_MAP={start:"top",end:"bottom",center:"middle"};function getInitialBounds(){return{left:!1,top:!1,right:!1,bottom:!1}}function hasGuidelines(r,e){var t=r.props,n=t.snappable,i=t.bounds,a=t.innerBounds,o=t.verticalGuidelines,s=t.horizontalGuidelines,l=t.snapGridWidth,c=t.snapGridHeight,u=r.state,f=u.guidelines,d=u.enableSnap;return!n||!d||e&&n!==!0&&n.indexOf(e)<0?!1:!!(l||c||i||a||f&&f.length||o&&o.length||s&&s.length)}function getSnapDirections(r){return r===!1?{}:r===!0||!r?{left:!0,right:!0,top:!0,bottom:!0}:r}function mapSnapDirectionPoses(r,e){var t=getSnapDirections(r),n={};for(var i in t)i in e&&t[i]&&(n[i]=e[i]);return n}function splitSnapDirectionPoses(r,e){var t=mapSnapDirectionPoses(r,e),n=HORIZONTAL_NAMES.filter(function(a){return a in t}),i=VERTICAL_NAMES.filter(function(a){return a in t});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(a){return t[a]}),vertical:i.map(function(a){return t[a]})}}function calculateContainerPos(r,e,t){var n=calculatePosition(r,[e.clientLeft,e.clientTop],t);return[e.left+n[0],e.top+n[1]]}function solveLineConstants(r){var e=__read$1(r,2),t=e[0],n=e[1],i=n[0]-t[0],a=n[1]-t[1];Math.abs(i)<TINY_NUM$1&&(i=0),Math.abs(a)<TINY_NUM$1&&(a=0);var o=0,s=0,l=0;return i?a?(o=-a/i,s=1,l=o*t[0]-t[1]):(s=1,l=-t[1]):(o=-1,l=t[0]),[o,s,l].map(function(c){return throttle$1(c,TINY_NUM$1)})}function checkMoveableSnapPoses(r,e,t,n,i,a){n===void 0&&(n=[]),i===void 0&&(i=[]);var o=r.props,s=selectValue(a,o.snapThreshold,5);return checkSnapPoses(r.state.guidelines,e,t,n,i,s)}function checkSnapPoses(r,e,t,n,i,a){return{vertical:checkSnap(r,"vertical",e,a,n),horizontal:checkSnap(r,"horizontal",t,a,i)}}function checkSnapKeepRatio(r,e,t){var n=__read$1(t,2),i=n[0],a=n[1],o=__read$1(e,2),s=o[0],l=o[1],c=__read$1(minus(t,e),2),u=c[0],f=c[1],d=f>0,g=u>0;u=getTinyDist(u),f=getTinyDist(f);var p={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(u===0&&f===0)return{vertical:p,horizontal:v};var y=checkMoveableSnapPoses(r,u?[i]:[],f?[a]:[]),m=y.vertical,x=y.horizontal;m.posInfos.filter(function(L){var O=L.pos;return g?O>=s:O<=s}),x.posInfos.filter(function(L){var O=L.pos;return d?O>=l:O<=l}),m.isSnap=m.posInfos.length>0,x.isSnap=x.posInfos.length>0;var _=getNearestSnapGuidelineInfo(m),S=_.isSnap,A=_.guideline,b=getNearestSnapGuidelineInfo(x),C=b.isSnap,E=b.guideline,T=C?E.pos[1]:0,I=S?A.pos[0]:0;if(u===0)C&&(v.isSnap=!0,v.pos=E.pos[1],v.offset=a-v.pos);else if(f===0)S&&(p.isSnap=!0,p.pos=I,p.offset=i-I);else{var w=f/u,M=t[1]-w*i,$=0,P=0,R=!1;S?(P=I,$=w*P+M,R=!0):C&&($=T,P=($-M)/w,R=!0),R&&(p.isSnap=!0,p.pos=P,p.offset=i-P,v.isSnap=!0,v.pos=$,v.offset=a-$)}return{vertical:p,horizontal:v}}function getStringDirection(r){var e="";return r===-1||r==="top"||r==="left"?e="start":r===0||r==="center"||r==="middle"?e="center":(r===1||r==="right"||r==="bottom")&&(e="end"),e}function checkSnaps(r,e,t){var n=splitSnapDirectionPoses(r.props.snapDirections,e),i=checkMoveableSnapPoses(r,n.vertical,n.horizontal,n.verticalNames.map(function(s){return getStringDirection(s)}),n.horizontalNames.map(function(s){return getStringDirection(s)}),t),a=getStringDirection(n.horizontalNames[i.horizontal.index]),o=getStringDirection(n.verticalNames[i.vertical.index]);return{vertical:__assign$2(__assign$2({},i.vertical),{direction:o}),horizontal:__assign$2(__assign$2({},i.horizontal),{direction:a})}}function getNearestSnapGuidelineInfo(r){var e=r.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=r.posInfos[0],n=t.guidelineInfos[0],i=n.offset,a=n.dist,o=n.guideline;return{isSnap:e,offset:i,dist:a,pos:t.pos,guideline:o}}function checkSnap(r,e,t,n,i){var a,o;if(i===void 0&&(i=[]),!r||!r.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=e==="vertical",l=s?0:1,c=t.map(function(f,d){var g=i[d]||"",p=r.map(function(v){var y=v.pos,m=f-y[l];return{offset:m,dist:abs(m),guideline:v,direction:g}}).filter(function(v){var y=v.guideline,m=v.dist,x=y.type;return!(x!==e||m>n)}).sort(function(v,y){return v.dist-y.dist});return{pos:f,index:d,guidelineInfos:p,direction:g}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,d){return f.guidelineInfos[0].dist-d.guidelineInfos[0].dist}),u=c.length>0;return{isSnap:u,index:u?c[0].index:-1,direction:(o=(a=c[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:c}}function getSnapInfosByDirection(r,e,t,n){n===void 0&&(n=1);var i=[];t[0]&&t[1]?i=[t,[-t[0],t[1]],[t[0],-t[1]]]:!t[0]&&!t[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,d,g){var p=g[d+1]||g[0];i.push(f),i.push([(f[0]+p[0])/2,(f[1]+p[1])/2])}):r.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],t):(i.push.apply(i,__spreadArray$2([],__read$1(getPosesByDirection([[-1,-1],[1,-1],[-1,-1],[1,1]],t)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var a=i.map(function(f){return getPosByDirection(e,f)}),o=a.map(function(f){return f[0]}),s=a.map(function(f){return f[1]}),l=checkMoveableSnapPoses(r,o,s,i.map(function(f){return getStringDirection(f[0])}),i.map(function(f){return getStringDirection(f[1])}),n),c=getStringDirection(i.map(function(f){return f[0]})[l.vertical.index]),u=getStringDirection(i.map(function(f){return f[1]})[l.horizontal.index]);return{vertical:__assign$2(__assign$2({},l.vertical),{direction:c}),horizontal:__assign$2(__assign$2({},l.horizontal),{direction:u})}}function checkSnapBoundPriority(r,e){var t=abs(r.offset),n=abs(e.offset);return r.isBound&&e.isBound?n-t:r.isBound?-1:e.isBound?1:r.isSnap&&e.isSnap?n-t:r.isSnap?-1:e.isSnap||t<TINY_NUM?1:n<TINY_NUM?-1:t-n}function getNearOffsetInfo(r,e){return r.slice().sort(function(t,n){var i=t.sign[e],a=n.sign[e],o=t.offset[e],s=n.offset[e];if(i){if(!a)return-1}else return 1;return checkSnapBoundPriority({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function getCheckSnapDirections(r,e,t){var n=[];if(t)abs(e[0])!==1||abs(e[1])!==1?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[r[0],-r[1]]],[e,[-r[0],r[1]]]),n.push([e,r]);else if(r[0]&&r[1]||!r[0]&&!r[1]){var i=r[0]?r:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var l=[o*i[0],s*i[1]];e[0]===l[0]&&e[1]===l[1]||n.push([e,l])})})}else if(r[0]){var a=abs(e[0])===1?[1]:[1,-1];a.forEach(function(o){n.push([[e[0],-1],[o*r[0],-1]],[[e[0],0],[o*r[0],0]],[[e[0],1],[o*r[0],1]])})}else if(r[1]){var a=abs(e[1])===1?[1]:[1,-1];a.forEach(function(s){n.push([[-1,e[1]],[-1,s*r[1]]],[[0,e[1]],[0,s*r[1]]],[[1,e[1]],[1,s*r[1]]])})}return n}function isStartLine(r,e){var t=average([e[0][0],e[1][0]]),n=average([e[0][1],e[1][1]]);return{vertical:t<=r[0],horizontal:n<=r[1]}}function hitTestLine(r,e){var t=__read$1(e,2),n=t[0],i=t[1],a=i[0]-n[0],o=i[1]-n[1];abs(a)<TINY_NUM&&(a=0),abs(o)<TINY_NUM&&(o=0);var s,l;if(!a)s=n[0],l=r[0];else if(!o)s=n[1],l=r[1];else{var c=o/a;s=c*(r[0]-n[0])+n[1],l=r[1]}return s-l}function isSameStartLine(r,e,t,n){return n===void 0&&(n=TINY_NUM),r.every(function(i){var a=hitTestLine(i,e),o=a<=0;return o===t||abs(a)<=n})}function checkInnerBoundDot(r,e,t,n,i){return i===void 0&&(i=0),n&&e-i<=r||!n&&r<=t+i?{isBound:!0,offset:n?e-r:t-r}:{isBound:!1,offset:0}}function checkInnerBound(r,e){var t=e.line,n=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,s=r.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,c=s.top,u=s.width,f=s.height,d=[[l,c],[l,c+f]],g=[[l,c],[l+u,c]],p=[[l+u,c],[l+u,c+f]],v=[[l,c+f],[l+u,c+f]];if(isSameStartLine([[l,c],[l+u,c],[l,c+f],[l+u,c+f]],t,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var y=checkLineBoundCollision(t,o,g,i),m=checkLineBoundCollision(t,o,v,i),x=checkLineBoundCollision(t,o,d,a),_=checkLineBoundCollision(t,o,p,a),S=y.isBound&&m.isBound,A=y.isBound||m.isBound,b=x.isBound&&_.isBound,C=x.isBound||_.isBound,E=maxOffset(y.offset,m.offset),T=maxOffset(x.offset,_.offset),I=[0,0],w=!1,M=!1;return abs(T)<abs(E)?(I=[E,0],w=A,M=S):(I=[0,T],w=C,M=b),{isAllBound:M,isVerticalBound:A,isHorizontalBound:C,isBound:w,offset:I}}function checkLineBoundCollision(r,e,t,n,i,a){var o=__read$1(e,2),s=o[0],l=o[1],c=r[0],u=t[0],f=t[1],d=getTinyDist(f[1]-u[1]),g=getTinyDist(f[0]-u[0]),p=l,v=s,y=-s/l;if(g){if(!d){if(a&&!p)return{isBound:!1,offset:0};if(v){var S=(u[1]-c[1])/y+c[0];return checkInnerBoundDot(S,u[0],f[0],n,i)}else{var x=u[1]-c[1],_=abs(x)<=(i||0);return{isBound:_,offset:_?x:0}}}}else{if(a&&!v)return{isBound:!1,offset:0};if(p){var m=y*(u[0]-c[0])+c[1];return checkInnerBoundDot(m,u[1],f[1],n,i)}else{var x=u[0]-c[0],_=abs(x)<=(i||0);return{isBound:_,offset:_?x:0}}}return{isBound:!1,offset:0}}function getInnerBoundInfo(r,e,t){return e.map(function(n){var i=checkInnerBound(r,n),a=i.isBound,o=i.offset,s=i.isVerticalBound,l=i.isHorizontalBound,c=n.multiple,u=getDragDist({datas:t,distX:o[0],distY:o[1]}).map(function(f,d){return f*(c[d]?2/c[d]:0)});return{sign:c,isBound:a,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:u}})}function getInnerBoundDragInfo(r,e,t){var n,i=getCheckInnerBoundLineInfos(r,e,[0,0],!1).map(function(d){return __assign$2(__assign$2({},d),{multiple:d.multiple.map(function(g){return abs(g)*2})})}),a=getInnerBoundInfo(r,i,t),o=getNearOffsetInfo(a,0),s=getNearOffsetInfo(a,1),l=0,c=0,u=o.isVerticalBound||s.isVerticalBound,f=o.isHorizontalBound||s.isHorizontalBound;return(u||f)&&(n=__read$1(getInverseDragDist({datas:t,distX:-o.offset[0],distY:-s.offset[1]}),2),l=n[0],c=n[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:f,offset:c}}}function getCheckSnapLineDirections(r,e){var t=[],n=r[0],i=r[1];return n&&i?t.push([[0,i*2],r,[-n,i]],[[n*2,0],r,[n,-i]]):n?(t.push([[n*2,0],[n,1],[n,-1]]),e&&t.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(t.push([[0,i*2],[1,i],[-1,i]]),e&&t.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):t.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),t}function getCheckInnerBoundLineInfos(r,e,t,n){var i=r.state,a=i.allMatrix,o=i.is3d,s=calculatePoses(a,100,100,o?4:3),l=getPosByDirection(s,[0,0]);return getCheckSnapLineDirections(t,n).map(function(c){var u=__read$1(c,3),f=u[0],d=u[1],g=u[2],p=[getPosByDirection(s,d),getPosByDirection(s,g)],v=solveLineConstants(p),y=isStartLine(l,p),m=y.vertical,x=y.horizontal,_=hitTestLine(l,p)<=0;return{multiple:f,centerSign:_,verticalSign:m,horizontalSign:x,lineConstants:v,line:[getPosByDirection(e,d),getPosByDirection(e,g)]}})}function isBoundRotate(r,e,t,n){var i=n?r.map(function(a){return rotate$2(a,n)}):r;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=hitTestLine(t,a)<=0;return!isSameStartLine(e,a,o)})}function getDistPointLine(r){var e=__read$1(r,2),t=e[0],n=e[1],i=n[0]-t[0],a=n[1]-t[1];if(!i)return abs(t[0]);if(!a)return abs(t[1]);var o=a/i;return abs((-o*t[0]+t[1])/Math.sqrt(Math.pow(o,2)+1))}function solveReverseLine(r){var e=__read$1(r,2),t=e[0],n=e[1],i=n[0]-t[0],a=n[1]-t[1];if(!i)return[t[0],0];if(!a)return[0,t[1]];var o=a/i,s=-o*t[0]+t[1];return[-s/(o+1/o),s/(o*o+1)]}function checkRotateInnerBounds(r,e,t,n,i){var a=r.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,l=a.top,c=a.width,u=a.height,f=s-n[0],d=s+c-n[0],g=l-n[1],p=l+u-n[1],v=[[f,g],[d,g],[f,p],[d,p]],y=getPosByDirection(t,[0,0]);if(!isBoundRotate(t,v,y,0))return[];var m=[],x=v.map(function(_){return[getDistSize(_),getRad$1([0,0],_)]});return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].forEach(function(_){var S=getRad$1([0,0],solveReverseLine(_)),A=getDistPointLine(_);m.push.apply(m,__spreadArray$2([],__read$1(x.filter(function(b){var C=__read$1(b,1),E=C[0];return E&&A<=E}).map(function(b){var C=__read$1(b,2),E=C[0],T=C[1],I=Math.acos(E?A/E:0),w=T+I,M=T-I;return[o+w-S,o+M-S]}).reduce(function(b,C){return b.push.apply(b,__spreadArray$2([],__read$1(C),!1)),b},[]).filter(function(b){return!isBoundRotate(e,v,y,b)}).map(function(b){return throttle$1(b*180/Math.PI,TINY_NUM)})),!1))}),m}function checkInnerBoundPoses(r){var e=r.props.innerBounds,t=getInitialBounds();if(!e)return{boundMap:t,vertical:[],horizontal:[]};var n=r.getRect(),i=n.pos1,a=n.pos2,o=n.pos3,s=n.pos4,l=[i,a,o,s],c=getPosByDirection(l,[0,0]),u=e.left,f=e.top,d=e.width,g=e.height,p=[[u,f],[u,f+g]],v=[[u,f],[u+d,f]],y=[[u+d,f],[u+d,f+g]],m=[[u,f+g],[u+d,f+g]],x=getCheckInnerBoundLineInfos(r,l,[0,0],!1),_=[],S=[];return x.forEach(function(A){var b=A.line,C=A.lineConstants,E=isStartLine(c,b),T=E.horizontal,I=E.vertical,w=checkLineBoundCollision(b,C,v,I,1,!0),M=checkLineBoundCollision(b,C,m,I,1,!0),$=checkLineBoundCollision(b,C,p,T,1,!0),P=checkLineBoundCollision(b,C,y,T,1,!0);w.isBound&&!t.top&&(_.push(f),t.top=!0),M.isBound&&!t.bottom&&(_.push(f+g),t.bottom=!0),$.isBound&&!t.left&&(S.push(u),t.left=!0),P.isBound&&!t.right&&(S.push(u+d),t.right=!0)}),{boundMap:t,horizontal:_,vertical:S}}function solveEquation(r,e,t,n){var i=e[0]-r[0],a=e[1]-r[1];if(abs(i)<TINY_NUM$1&&(i=0),abs(a)<TINY_NUM$1&&(a=0),!i)return n?[0,0]:[0,t];if(!a)return n?[t,0]:[0,0];var o=a/i,s=r[1]-o*r[0];if(n){var l=o*(e[0]+t)+s;return[t,l-e[1]]}else{var c=(e[1]+t-s)/o;return[c-e[0],t]}}function solveNextOffset(r,e,t,n,i){var a=solveEquation(r,e,t,n);if(!a)return{isOutside:!1,offset:[0,0]};var o=getDist$2(r,e),s=getDist$2(a,r),l=getDist$2(a,e),c=s>o||l>o,u=__read$1(getDragDist({datas:i,distX:a[0],distY:a[1]}),2),f=u[0],d=u[1];return{offset:[f,d],isOutside:c}}function getSnapBound(r,e){return r.isBound?r.offset:e.isSnap?getNearestSnapGuidelineInfo(e).offset:0}function checkThrottleDragRotate(r,e,t,n,i){var a=__read$1(e,2),o=a[0],s=a[1],l=__read$1(t,2),c=l[0],u=l[1],f=__read$1(n,2),d=f[0],g=f[1],p=__read$1(i,2),v=p[0],y=p[1],m=-v,x=-y;if(r&&o&&s){m=0,x=0;var _=[];if(c&&u?_.push([0,y],[v,0]):c?_.push([v,0]):u?_.push([0,y]):d&&g?_.push([0,y],[v,0]):d?_.push([v,0]):g&&_.push([0,y]),_.length){_.sort(function(C,E){return getDistSize(minus([o,s],C))-getDistSize(minus([o,s],E))});var S=_[0];if(S[0]&&abs(o)>TINY_NUM$1)m=-S[0],x=s*abs(o+m)/abs(o)-s;else if(S[1]&&abs(s)>TINY_NUM$1){var A=s;x=-S[1],m=o*abs(s+x)/abs(A)-o}if(r&&u&&c)if(abs(m)>TINY_NUM$1&&abs(m)<abs(v)){var b=abs(v)/abs(m);m*=b,x*=b}else if(abs(x)>TINY_NUM$1&&abs(x)<abs(y)){var b=abs(y)/abs(x);m*=b,x*=b}else m=maxOffset(-v,m),x=maxOffset(-y,x)}}else m=o||c?-v:0,x=s||u?-y:0;return[m,x]}function checkSnapBoundsDrag(r,e,t,n,i,a){if(!hasGuidelines(r,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=getAbsolutePoses(a.absolutePoses,[e,t]),s=getRect(o),l=s.left,c=s.right,u=s.top,f=s.bottom,d={horizontal:o.map(function(P){return P[1]}),vertical:o.map(function(P){return P[0]})},g=getSnapDirections(r.props.snapDirections),p=splitSnapDirectionPoses(g,{left:l,right:c,top:u,bottom:f,center:(l+c)/2,middle:(u+f)/2}),v=checkMoveableSnapBounds(r,i,p,d),y=v.vertical,m=v.horizontal,x=getInnerBoundDragInfo(r,o,a),_=x.vertical,S=x.horizontal,A=y.isSnap,b=m.isSnap,C=y.isBound||_.isBound,E=m.isBound||S.isBound,T=maxOffset(y.offset,_.offset),I=maxOffset(m.offset,S.offset),w=__read$1(checkThrottleDragRotate(n,[e,t],[C,E],[A,b],[T,I]),2),M=w[0],$=w[1];return[{isBound:C,isSnap:A,offset:M},{isBound:E,isSnap:b,offset:$}]}function checkMoveableSnapBounds(r,e,t,n){n===void 0&&(n=t);var i=checkBoundPoses(getBounds(r),n.vertical,n.horizontal),a=i.horizontal,o=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:checkMoveableSnapPoses(r,t.vertical,t.horizontal),l=s.horizontal,c=s.vertical,u=getSnapBound(a[0],l),f=getSnapBound(o[0],c),d=abs(u),g=abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:d,bounds:a,snap:l},vertical:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:o,snap:c}}}function checkSnapBounds(r,e,t,n,i){var a=checkBoundPoses(e,t,n),o=a.horizontal,s=a.vertical,l=checkSnapPoses(r,t,n,[],[],i),c=l.horizontal,u=l.vertical,f=getSnapBound(o[0],c),d=getSnapBound(s[0],u),g=abs(f),p=abs(d);return{horizontal:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:o,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:p,bounds:s,snap:u}}}function checkSnapRightLine(r,e,t,n){var i=getRad$1(r,e)/Math.PI*180,a=t.vertical,o=a.isBound,s=a.isSnap,l=a.dist,c=t.horizontal,u=c.isBound,f=c.isSnap,d=c.dist,g=i%180,p=g<3||g>177,v=g>87&&g<93;return d<l&&(o||s&&!v&&(!n||!p))?"vertical":u||f&&!p&&(!n||!v)?"horizontal":""}function getSnapBoundInfo(r,e,t,n,i,a){return t.map(function(o){var s=__read$1(o,2),l=s[0],c=s[1],u=getPosByDirection(e,l),f=getPosByDirection(e,c),d=n?checkSnapBoundsKeepRatio(r,u,f,i):checkMoveableSnapBounds(r,i,{vertical:[f[0]],horizontal:[f[1]]}),g=d.horizontal,p=g.offset,v=g.isBound,y=g.isSnap,m=d.vertical,x=m.offset,_=m.isBound,S=m.isSnap,A=minus(c,l);if(!x&&!p)return{isBound:_||v,isSnap:S||y,sign:A,offset:[0,0]};var b=checkSnapRightLine(u,f,d,n);if(!b)return{sign:A,isBound:!1,isSnap:!1,offset:[0,0]};var C=b==="vertical",E=[0,0];return!n&&abs(c[0])===1&&abs(c[1])===1&&l[0]!==c[0]&&l[1]!==c[1]?E=getDragDist({datas:a,distX:-x,distY:-p}):E=solveNextOffset(u,f,-(C?x:p),C,a).offset,E=E.map(function(T,I){return T*(A[I]?2/A[I]:0)}),{sign:A,isBound:C?_:v,isSnap:C?S:y,offset:E}})}function getSnapBoundOffset(r,e){return r.isBound?r.offset:e.isSnap?e.offset:0}function checkSnapBoundsKeepRatio(r,e,t,n){var i=checkBoundKeepRatio(r,e,t),a=i.horizontal,o=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:checkSnapKeepRatio(r,e,t),l=s.horizontal,c=s.vertical,u=getSnapBoundOffset(a,l),f=getSnapBoundOffset(o,c),d=abs(u),g=abs(f);return{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:u,dist:d},vertical:{isBound:o.isBound,isSnap:c.isSnap,offset:f,dist:g}}}function checkMaxBounds(r,e,t,n,i){var a=[-t[0],-t[1]],o=r.state,s=o.width,l=o.height,c=r.props.bounds,u=1/0,f=1/0;if(c){var d=[[t[0],-t[1]],[-t[0],t[1]]],g=c.left,p=g===void 0?-1/0:g,v=c.top,y=v===void 0?-1/0:v,m=c.right,x=m===void 0?1/0:m,_=c.bottom,S=_===void 0?1/0:_;d.forEach(function(A){var b=A[0]!==a[0],C=A[1]!==a[1],E=getPosByDirection(e,A),T=getRad$1(n,E)*360/Math.PI;if(C){var I=E.slice();(abs(T-360)<2||abs(T-180)<2)&&(I[1]=n[1]);var w=solveNextOffset(n,I,(n[1]<E[1]?S:y)-E[1],!1,i),M=__read$1(w.offset,2),$=M[1],P=w.isOutside;isNaN($)||(f=l+(P?1:-1)*abs($))}if(b){var I=E.slice();(abs(T-90)<2||abs(T-270)<2)&&(I[0]=n[0]);var R=solveNextOffset(n,I,(n[0]<E[0]?x:p)-E[0],!0,i),L=__read$1(R.offset,1),O=L[0],k=R.isOutside;isNaN(O)||(u=s+(k?1:-1)*abs(O))}})}return{maxWidth:u,maxHeight:f}}var Draggable={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(r,e){var t=r.props,n=t.hideThrottleDragRotateLine,i=t.throttleDragRotate,a=t.zoom,o=r.getState(),s=o.dragInfo,l=o.beforeOrigin;if(n||!i||!s)return[];var c=s.dist;if(!c[0]&&!c[1])return[];var u=getDistSize(c),f=getRad$1(c,[0,0]);return[e.createElement("div",{className:prefix("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(f,"rad) scaleY(").concat(a,")")}})]},dragStart:function(r,e){var t=e.datas,n=e.parentEvent,i=e.parentGesto,a=r.state,o=a.gestos,s=a.style;if(o.draggable)return!1;o.draggable=i||r.targetGesto,t.datas={},t.left=parseFloat(s.left||"")||0,t.top=parseFloat(s.top||"")||0,t.bottom=parseFloat(s.bottom||"")||0,t.right=parseFloat(s.right||"")||0,t.startValue=[0,0],setDragStart(r,e),setDefaultTransformIndex(r,e,"translate"),startCheckSnapDrag(r,t),t.prevDist=[0,0],t.prevBeforeDist=[0,0],t.isDrag=!1,t.deltaOffset=[0,0];var l=fillParams(r,e,__assign$2({set:function(u){t.startValue=u}},fillTransformStartEvent(r,e))),c=n||triggerEvent(r,"onDragStart",l);return c!==!1?(t.isDrag=!0,r.state.dragInfo={startRect:r.getRect(),dist:[0,0]}):(o.draggable=null,t.isPinch=!1),t.isDrag?l:!1},drag:function(r,e){if(e){resolveTransformEvent(r,e,"translate");var t=e.datas,n=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,s=e.useSnap,l=e.isRequest,c=e.distX,u=e.distY,f=t.isDrag,d=t.prevDist,g=t.prevBeforeDist,p=t.startValue;if(f){o&&(c+=o[0],u+=o[1]);var v=r.props,y=v.parentMoveable,m=n?0:v.throttleDrag||0,x=n?0:v.throttleDragRotate||0,_=0,S=!1,A=!1,b=!1,C=!1;if(!n&&x>0&&(c||u)){var E=v.startDragRotate||0,T=throttle$1(E+getRad$1([0,0],[c,u])*180/Math.PI,x)-E,I=u*Math.abs(Math.cos((T-90)/180*Math.PI)),w=c*Math.abs(Math.cos(T/180*Math.PI)),M=getDistSize([w,I]);_=T*Math.PI/180,c=M*Math.cos(_),u=M*Math.sin(_)}if(!a&&!n&&!i){var $=__read$1(checkSnapBoundsDrag(r,c,u,x,!s&&l||o,t),2),P=$[0],R=$[1];S=P.isSnap,A=P.isBound,b=R.isSnap,C=R.isBound;var L=P.offset,O=R.offset;c+=L,u+=O}var k=plus(getBeforeDragDist({datas:t,distX:c,distY:u}),p),B=plus(getTransformDist({datas:t,distX:c,distY:u}),p);throttleArray(B,TINY_NUM),throttleArray(k,TINY_NUM),x||(!S&&!A&&(B[0]=throttle$1(B[0],m),k[0]=throttle$1(k[0],m)),!b&&!C&&(B[1]=throttle$1(B[1],m),k[1]=throttle$1(k[1],m)));var N=minus(k,p),F=minus(B,p),V=minus(F,d),H=minus(N,g);t.prevDist=F,t.prevBeforeDist=N,t.passDelta=V,t.passDist=F;var z=t.left+N[0],G=t.top+N[1],j=t.right-N[0],Y=t.bottom-N[1],U=convertTransformFormat(t,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(F[0],"px, ").concat(F[1],"px)"));if(fillOriginalTransform(e,U),r.state.dragInfo.dist=n?[0,0]:F,!(!n&&!y&&V.every(function(tt){return!tt})&&H.some(function(tt){return!tt}))){var K=r.state,q=K.width,W=K.height,X=fillParams(r,e,__assign$2({transform:U,dist:F,delta:V,translate:B,beforeDist:N,beforeDelta:H,beforeTranslate:k,left:z,top:G,right:j,bottom:Y,width:q,height:W,isPinch:a},fillCSSObject({transform:U},e)));return!n&&triggerEvent(r,"onDrag",X),X}}}},dragAfter:function(r,e){var t=e.datas,n=t.deltaOffset;return n[0]||n[1]?(t.deltaOffset=[0,0],this.drag(r,__assign$2(__assign$2({},e),{deltaOffset:n}))):!1},dragEnd:function(r,e){var t=e.parentEvent,n=e.datas;if(r.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=fillEndParams(r,e,{});return!t&&triggerEvent(r,"onDragEnd",i),i}},dragGroupStart:function(r,e){var t=e.datas,n=e.clientX,i=e.clientY,a=this.dragStart(r,e);if(!a)return!1;var o=triggerChildGesto(r,this,"dragStart",[n||0,i||0],e,!1,"draggable"),s=__assign$2(__assign$2({},a),{targets:r.props.targets,events:o}),l=triggerEvent(r,"onDragGroupStart",s);return t.isDrag=l!==!1,t.isDrag?a:!1},dragGroup:function(r,e){var t=e.datas;if(t.isDrag){var n=this.drag(r,e),i=e.datas.passDelta,a=triggerChildGesto(r,this,"drag",i,e,!1,"draggable");if(n){var o=__assign$2({targets:r.props.targets,events:a},n);return triggerEvent(r,"onDragGroup",o),o}}},dragGroupEnd:function(r,e){var t=e.isDrag,n=e.datas;if(n.isDrag){this.dragEnd(r,e);var i=triggerChildGesto(r,this,"dragEnd",[0,0],e,!1,"draggable");return triggerEvent(r,"onDragGroupEnd",fillEndParams(r,e,{targets:r.props.targets,events:i})),t}},request:function(r){var e={},t=r.getRect(),n=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?n=o.x-t.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?i=o.y-t.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:n,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(r){r.state.gestos.draggable=null,r.state.dragInfo=null}};function getFixedDirectionInfo(r,e){var t=getPosByDirection(r,e),n=[0,0];return{fixedPosition:t,fixedDirection:e,fixedOffset:n}}function getOffsetFixedDirectionInfo(r,e){var t=r.allMatrix,n=r.is3d,i=r.width,a=r.height,o=n?4:3,s=[i/2*(1+e[0]),a/2*(1+e[1])],l=calculatePosition(t,s,o),c=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:c}}function getOffsetFixedPositionInfo(r,e){var t=r.allMatrix,n=r.is3d,i=r.width,a=r.height,o=n?4:3,s=getDirectionByPos(e,i,a),l=calculatePosition(t,e,o),c=[i?0:e[0],a?0:e[1]];return{fixedPosition:l,fixedDirection:s,fixedOffset:c}}var directionCondition$2=getDirectionCondition("resizable"),Resizable={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:getRenderDirections("resizable"),dragControlCondition:directionCondition$2,viewClassName:getDirectionViewClassName("resizable"),dragControlStart:function(r,e){var t,n=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,s=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,f=getTotalDirection(o,i,n,l),d=r.state,g=d.target,p=d.width,v=d.height,y=d.gestos;if(!f||!g||y.resizable)return!1;y.resizable=s||r.controlGesto,!i&&setDragStart(r,e),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],a||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=r.props.transformOrigin||"% %";l.transformOrigin=m&&isString$1(m)?m.split(" "):m,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=(t=e==null?void 0:e.parentIsWidth)!==null&&t!==void 0?t:!f[0]&&!f[1]||f[0]||!f[1];function x(T){l.ratio=T&&isFinite(T)?T:0}l.startPositions=getAbsolutePosesByState(r.state);function _(T){var I=getFixedDirectionInfo(l.startPositions,T);l.fixedDirection=I.fixedDirection,l.fixedPosition=I.fixedPosition,l.fixedOffset=I.fixedOffset}function S(T){var I=getOffsetFixedPositionInfo(r.state,T);l.fixedDirection=I.fixedDirection,l.fixedPosition=I.fixedPosition,l.fixedOffset=I.fixedOffset}function A(T){l.minSize=[convertUnitSize("".concat(T[0]),0)||0,convertUnitSize("".concat(T[1]),0)||0]}function b(T){var I=[T[0]||1/0,T[1]||1/0];(!isNumber$2(I[0])||isFinite(I[0]))&&(I[0]=convertUnitSize("".concat(I[0]),0)||1/0),(!isNumber$2(I[1])||isFinite(I[1]))&&(I[1]=convertUnitSize("".concat(I[1]),0)||1/0),l.maxSize=I}x(p/v),_(c||[-f[0],-f[1]]),l.setFixedDirection=_,l.setFixedPosition=S,l.setMin=A,l.setMax=b;var C=fillParams(r,e,{direction:f,startRatio:l.ratio,set:function(T){var I=__read$1(T,2),w=I[0],M=I[1];l.startWidth=w,l.startHeight=M},setMin:A,setMax:b,setRatio:x,setFixedDirection:_,setFixedPosition:S,setOrigin:function(T){l.transformOrigin=T},dragStart:Draggable.dragStart(r,new CustomGesto().dragStart([0,0],e))}),E=u||triggerEvent(r,"onResizeStart",C);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,E!==!1&&(l.isResize=!0,r.state.snapRenderInfo={request:e.isRequest,direction:f}),l.isResize?C:!1},dragControl:function(r,e){var t,n=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,s=e.dragClient,l=e.parentDist,c=e.useSnap,u=e.isRequest,f=e.isGroup,d=e.parentEvent,g=e.resolveMatrix,p=n.isResize,v=n.transformOrigin,y=n.startWidth,m=n.startHeight,x=n.prevWidth,_=n.prevHeight,S=n.minSize,A=n.maxSize,b=n.ratio,C=n.startOffsetWidth,E=n.startOffsetHeight,T=n.isWidth;if(!p)return;if(g){var I=r.state.is3d,w=n.startOffsetMatrix,M=n.startTransformOrigin,$=I?4:3,P=parseMat(getNextTransforms(e)),R=Math.sqrt(P.length);$!==R&&(P=convertDimension(P,R,$));var L=getNextMatrix(w,P,M,$),O=calculatePoses(L,C,E,$);n.startPositions=O,n.nextTargetMatrix=P,n.nextAllMatrix=L}var k=getProps(r.props,"resizable"),B=k.resizeFormat,N=k.throttleResize,F=N===void 0?i?0:1:N,V=k.parentMoveable,H=k.keepRatioFinally,z=n.direction,G=z,j=0,Y=0;!z[0]&&!z[1]&&(G=[1,1]);var U=b&&(o??k.keepRatio)||!1;function K(){var ot=n.fixedDirection,st=getOffsetSizeDist(G,U,n,e);j=st.distWidth,Y=st.distHeight;var dt=G[0]-ot[0]||U?Math.max(C+j,TINY_NUM):C,gt=G[1]-ot[1]||U?Math.max(E+Y,TINY_NUM):E;return U&&C&&E&&(T?gt=dt/b:dt=gt*b),[dt,gt]}var q=__read$1(K(),2),W=q[0],X=q[1];d||(n.setFixedDirection(n.fixedDirection),triggerEvent(r,"onBeforeResize",fillParams(r,e,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(ot){var st;return n.setFixedDirection(ot),st=__read$1(K(),2),W=st[0],X=st[1],[W,X]},setFixedPosition:function(ot){var st;return n.setFixedPosition(ot),st=__read$1(K(),2),W=st[0],X=st[1],[W,X]},boundingWidth:W,boundingHeight:X,setSize:function(ot){var st;st=__read$1(ot,2),W=st[0],X=st[1]}},!0)));var tt=s;s||(!i&&a?tt=getAbsolutePosition(r,[0,0]):tt=n.fixedPosition);var Z=[0,0];a||(Z=checkSnapResize(r,W,X,z,tt,!c&&u,n)),l&&(!l[0]&&(Z[0]=0),!l[1]&&(Z[1]=0));function J(){var ot;B&&(ot=__read$1(B([W,X]),2),W=ot[0],X=ot[1]),W=throttle$1(W,F),X=throttle$1(X,F)}if(U){G[0]&&G[1]&&Z[0]&&Z[1]&&(abs(Z[0])>abs(Z[1])?Z[1]=0:Z[0]=0);var Q=!Z[0]&&!Z[1];Q&&J(),G[0]&&!G[1]||Z[0]&&!Z[1]||Q&&T?(W+=Z[0],X=W/b):(!G[0]&&G[1]||!Z[0]&&Z[1]||Q&&!T)&&(X+=Z[1],W=X*b)}else W+=Z[0],X+=Z[1],W=Math.max(0,W),X=Math.max(0,X);t=__read$1(calculateBoundSize([W,X],S,A,U?b:!1),2),W=t[0],X=t[1],J(),U&&(f||H)&&(T?X=W/b:W=X*b),j=W-C,Y=X-E;var rt=[j-x,Y-_];n.prevWidth=j,n.prevHeight=Y;var it=getResizeDist(r,W,X,tt,v,n);if(!(!V&&rt.every(function(ot){return!ot})&&it.every(function(ot){return!ot}))){var et=Draggable.drag(r,setCustomDrag(e,r.state,it,!!a,!1,"draggable")),nt=et.transform,lt=y+j,ut=m+Y,ct=fillParams(r,e,__assign$2({width:lt,height:ut,offsetWidth:Math.round(W),offsetHeight:Math.round(X),startRatio:b,boundingWidth:W,boundingHeight:X,direction:z,dist:[j,Y],delta:rt,isPinch:!!a,drag:et},fillAfterTransform({style:{width:"".concat(lt,"px"),height:"".concat(ut,"px")},transform:nt},et,e)));return!d&&triggerEvent(r,"onResize",ct),ct}},dragControlAfter:function(r,e){var t=e.datas,n=t.isResize,i=t.startOffsetWidth,a=t.startOffsetHeight,o=t.prevWidth,s=t.prevHeight;if(!(!n||r.props.checkResizableError===!1)){var l=r.state,c=l.width,u=l.height,f=c-(i+o),d=u-(a+s),g=abs(f)>3,p=abs(d)>3;if(g&&(t.startWidth+=f,t.startOffsetWidth+=f,t.prevWidth+=f),p&&(t.startHeight+=d,t.startOffsetHeight+=d,t.prevHeight+=d),g||p)return this.dragControl(r,e)}},dragControlEnd:function(r,e){var t=e.datas,n=e.parentEvent;if(t.isResize){t.isResize=!1;var i=fillEndParams(r,e,{});return!n&&triggerEvent(r,"onResizeEnd",i),i}},dragGroupControlCondition:directionCondition$2,dragGroupControlStart:function(r,e){var t=e.datas,n=this.dragControlStart(r,__assign$2(__assign$2({},e),{isGroup:!0}));if(!n)return!1;var i=fillChildEvents(r,"resizable",e),a=t.startOffsetWidth,o=t.startOffsetHeight;function s(){var g=t.minSize;i.forEach(function(p){var v=p.datas,y=v.minSize,m=v.startOffsetWidth,x=v.startOffsetHeight,_=a*(m?y[0]/m:0),S=o*(x?y[1]/x:0);g[0]=Math.max(g[0],_),g[1]=Math.max(g[1],S)})}function l(){var g=t.maxSize;i.forEach(function(p){var v=p.datas,y=v.maxSize,m=v.startOffsetWidth,x=v.startOffsetHeight,_=a*(m?y[0]/m:0),S=o*(x?y[1]/x:0);g[0]=Math.min(g[0],_),g[1]=Math.min(g[1],S)})}var c=triggerChildAbles(r,this,"dragControlStart",e,function(g,p){return startChildDist(r,g,t,p)});s(),l();var u=function(g){n.setFixedDirection(g),c.forEach(function(p,v){p.setFixedDirection(g),startChildDist(r,p.moveable,t,i[v])})};t.setFixedDirection=u;var f=__assign$2(__assign$2({},n),{targets:r.props.targets,events:c.map(function(g){return __assign$2(__assign$2({},g),{setMin:function(p){g.setMin(p),s()},setMax:function(p){g.setMax(p),l()}})}),setFixedDirection:u,setMin:function(g){n.setMin(g),s()},setMax:function(g){n.setMax(g),l()}}),d=triggerEvent(r,"onResizeGroupStart",f);return t.isResize=d!==!1,t.isResize?n:!1},dragGroupControl:function(r,e){var t=e.datas;if(t.isResize){var n=getProps(r.props,"resizable");catchEvent(r,"onBeforeResize",function(g){triggerEvent(r,"onBeforeResizeGroup",fillParams(r,e,__assign$2(__assign$2({},g),{targets:n.targets}),!0))});var i=this.dragControl(r,__assign$2(__assign$2({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,s=i.dist,l=n.keepRatio,c=[a/(a-s[0]),o/(o-s[1])],u=t.fixedPosition,f=triggerChildAbles(r,this,"dragControl",e,function(g,p){var v=__read$1(calculate(createRotateMatrix(r.rotation/180*Math.PI,3),[p.datas.originalX*c[0],p.datas.originalY*c[1],1],3),2),y=v[0],m=v[1];return __assign$2(__assign$2({},p),{parentDist:null,parentScale:c,dragClient:plus(u,[y,m]),parentKeepRatio:l})}),d=__assign$2({targets:n.targets,events:f},i);return triggerEvent(r,"onResizeGroup",d),d}}},dragGroupControlEnd:function(r,e){var t=e.isDrag,n=e.datas;if(n.isResize){this.dragControlEnd(r,e);var i=triggerChildAbles(r,this,"dragControlEnd",e),a=fillEndParams(r,e,{targets:r.props.targets,events:i});return triggerEvent(r,"onResizeGroupEnd",a),t}},request:function(r){var e={},t=0,n=0,i=!1,a=r.getRect();return{isControl:!0,requestStart:function(o){var s;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(s=o==null?void 0:o.horizontal)!==null&&s!==void 0?s:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?t=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(t+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:e,parentDist:[t,n],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(r){r.state.gestos.resizable=null}};function setRotateStartInfo(r,e,t,n,i){var a=r.props.groupable,o=r.state,s=o.is3d?4:3,l=e.origin,c=calculatePosition(r.state.rootMatrix,minus([l[0],l[1]],a?[0,0]:[o.left,o.top]),s),u=plus([i.left,i.top],c);e.startAbsoluteOrigin=u,e.prevDeg=getRad$1(u,[t,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=getDist$2(u,[t,n])}function getAbsoluteDist(r,e,t){var n=t.defaultDeg,i=t.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>r&&a>270&&r<90?++o:a<r&&a<90&&r>270&&--o;var s=e*(o*360+r-n);return t.prevDeg=n+s,s}function getAbsoluteDistByClient(r,e,t,n){return getAbsoluteDist(getRad$1(n.startAbsoluteOrigin,[r,e])/Math.PI*180,t,n)}function getRotateInfo(r,e,t,n,i,a){var o=r.props.throttleRotate,s=o===void 0?0:o,l=t.prevSnapDeg,c=0,u=!1;if(a){var f=checkSnapRotate(r,e,n,i+n);u=f.isSnap,c=i+f.dist}u||(c=throttle$1(i+n,s));var d=c-i;return t.prevSnapDeg=d,[d-l,d,c]}function getRotationPositions(r,e,t){var n=__read$1(e,4),i=n[0],a=n[1],o=n[2],s=n[3];if(r==="none")return[];if(isArray$4(r))return r.map(function(y){return getRotationPositions(y,[i,a,o,s],t)[0]});var l=__read$1((r||"top").split("-"),2),c=l[0],u=l[1],f=[i,a];c==="left"?f=[o,i]:c==="right"?f=[a,s]:c==="bottom"&&(f=[s,o]);var d=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],g=getRotationRad(f,t);if(u){var p=u==="top"||u==="left",v=c==="bottom"||c==="left";d=f[p&&!v||!p&&v?0:1]}return[[d,g]]}function dragControlCondition(r,e){if(e.isRequest)return e.requestAble==="rotatable";var t=e.inputEvent.target;if(hasClass$1(t,prefix("rotation-control"))||r.props.rotateAroundControls&&hasClass$1(t,prefix("around-control"))||hasClass$1(t,prefix("control"))&&hasClass$1(t,prefix("rotatable")))return!0;var n=r.props.rotationTarget;return n?getRefTargets(n,!0).some(function(i){return i?t===i||t.contains(i):!1}):!1}var css=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Rotatable={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[css],viewClassName:function(r){return r.isDragging("rotatable")?prefix("view-rotation-dragging"):""},render:function(r,e){var t=getProps(r.props,"rotatable"),n=t.rotatable,i=t.rotationPosition,a=t.zoom,o=t.renderDirections,s=t.rotateAroundControls,l=t.resolveAblesWithRotatable,c=r.getState(),u=c.renderPoses,f=c.direction;if(!n)return null;var d=getRotationPositions(i,u,f),g=[];if(d.forEach(function(m,x){var _=__read$1(m,2),S=_[0],A=_[1];g.push(e.createElement("div",{key:"rotation".concat(x),className:prefix("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(A,"rad)")}},e.createElement("div",{className:prefix("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:prefix("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var p=getKeys(l||{}),v={};p.forEach(function(m){l[m].forEach(function(x){v[x]=m})});var y=[];isArray$4(o)&&(y=o.map(function(m){var x=v[m];return{data:x?{resolve:x}:{},classNames:x?["move"]:[],dir:m}})),g.push.apply(g,__spreadArray$2([],__read$1(renderDirectionControlsByInfos(r,"rotatable",y,e)),!1))}return s&&g.push.apply(g,__spreadArray$2([],__read$1(renderAroundControls(r,e)),!1)),g},dragControlCondition,dragControlStart:function(r,e){var t,n,i=e.datas,a=e.clientX,o=e.clientY,s=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,f=r.state,d=f.target,g=f.left,p=f.top,v=f.direction,y=f.beforeDirection,m=f.targetTransform,x=f.moveableClientRect,_=f.offsetMatrix,S=f.targetMatrix,A=f.allMatrix,b=f.width,C=f.height;if(!u&&!d)return!1;var E=r.getRect();i.rect=E,i.transform=m,i.left=g,i.top=p;var T=function(G){var j=getOffsetFixedPositionInfo(r.state,G);i.fixedDirection=j.fixedDirection,i.fixedOffset=j.fixedOffset,i.fixedPosition=j.fixedPosition,F&&F.setFixedPosition(G)},I=function(G){var j=getOffsetFixedDirectionInfo(r.state,G);i.fixedDirection=j.fixedDirection,i.fixedOffset=j.fixedOffset,i.fixedPosition=j.fixedPosition,F&&F.setFixedDirection(G)},w=a,M=o;if(u||c||l){var $=s||0;i.beforeInfo={origin:E.beforeOrigin,prevDeg:$,defaultDeg:$,prevSnapDeg:0,startDist:0},i.afterInfo=__assign$2(__assign$2({},i.beforeInfo),{origin:E.origin}),i.absoluteInfo=__assign$2(__assign$2({},i.beforeInfo),{origin:E.origin,startValue:$})}else{var P=(n=e.inputEvent)===null||n===void 0?void 0:n.target;if(P){var R=P.getAttribute("data-direction")||"",L=DIRECTION_REGION_TO_DIRECTION[R];if(L){i.isControl=!0,i.isAroundControl=hasClass$1(P,prefix("around-control")),i.controlDirection=L;var O=P.getAttribute("data-resolve");O&&(i.resolveAble=O);var k=calculateMoveableClientPositions(f.rootMatrix,f.renderPoses,x);t=__read$1(getPosByDirection(k,L),2),w=t[0],M=t[1]}}i.beforeInfo={origin:E.beforeOrigin},i.afterInfo={origin:E.origin},i.absoluteInfo={origin:E.origin,startValue:E.rotation};var B=T;T=function(G){var j=f.is3d?4:3,Y=__read$1(plus(getOrigin(S,j),G),2),U=Y[0],K=Y[1],q=calculate(_,convertPositionMatrix([U,K],j)),W=calculate(A,convertPositionMatrix([G[0],G[1]],j));B(G);var X=f.posDelta;i.beforeInfo.origin=minus(q,X),i.afterInfo.origin=minus(W,X),i.absoluteInfo.origin=minus(W,X),setRotateStartInfo(r,i.beforeInfo,w,M,x),setRotateStartInfo(r,i.afterInfo,w,M,x),setRotateStartInfo(r,i.absoluteInfo,w,M,x)},I=function(G){var j=getPosByDirection([[0,0],[b,0],[0,C],[b,C]],G);T(j)}}i.startClientX=w,i.startClientY=M,i.direction=v,i.beforeDirection=y,i.startValue=0,i.datas={},setDefaultTransformIndex(r,e,"rotate");var N=!1,F=!1;if(i.isControl&&i.resolveAble){var V=i.resolveAble;V==="resizable"&&(F=Resizable.dragControlStart(r,__assign$2(__assign$2({},new CustomGesto("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}F||(N=Draggable.dragStart(r,new CustomGesto().dragStart([0,0],e))),T(getTotalOrigin(r));var H=fillParams(r,e,__assign$2(__assign$2({set:function(G){i.startValue=G*Math.PI/180},setFixedDirection:I,setFixedPosition:T},fillTransformStartEvent(r,e)),{dragStart:N,resizeStart:F})),z=triggerEvent(r,"onRotateStart",H);return i.isRotate=z!==!1,f.snapRenderInfo={request:e.isRequest},i.isRotate?H:!1},dragControl:function(r,e){var t,n,i,a=e.datas,o=e.clientDistX,s=e.clientDistY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.groupDelta,d=e.resolveMatrix,g=a.beforeDirection,p=a.beforeInfo,v=a.afterInfo,y=a.absoluteInfo,m=a.isRotate,x=a.startValue,_=a.rect,S=a.startClientX,A=a.startClientY;if(m){resolveTransformEvent(r,e,"rotate");var b=getTransformDirection(e),C=g*b,E=r.props.parentMoveable,T=0,I,w,M=0,$,P,R=0,L,O,k=180/Math.PI*x,B=y.startValue,N=!1,F=S+o,V=A+s;if(!c&&"parentDist"in e){var H=e.parentDist;I=H,$=H,L=H}else u||c?(I=getAbsoluteDist(l,g,p),$=getAbsoluteDist(l,C,v),L=getAbsoluteDist(l,C,y)):(I=getAbsoluteDistByClient(F,V,g,p),$=getAbsoluteDistByClient(F,V,C,v),L=getAbsoluteDistByClient(F,V,C,y),N=!0);if(w=k+I,P=k+$,O=B+L,triggerEvent(r,"onBeforeRotate",fillParams(r,e,{beforeRotation:w,rotation:P,absoluteRotation:O,setRotation:function(tt){$=tt-k,I=$,L=$}},!0)),t=__read$1(getRotateInfo(r,_,p,I,k,N),3),T=t[0],I=t[1],w=t[2],n=__read$1(getRotateInfo(r,_,v,$,k,N),3),M=n[0],$=n[1],P=n[2],i=__read$1(getRotateInfo(r,_,y,L,B,N),3),R=i[0],L=i[1],O=i[2],!(!R&&!M&&!T&&!E&&!d)){var z=convertTransformFormat(a,"rotate(".concat(P,"deg)"),"rotate(".concat($,"deg)"));d&&(a.fixedPosition=getTranslateFixedPosition(r,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var G=getRotateDist(r,$,a),j=minus(plus(f||[0,0],G),a.prevInverseDist||[0,0]);a.prevInverseDist=G,a.requestValue=null;var Y=fillTransformEvent(r,z,j,u,e),U=Y,K=getDist$2([F,V],y.startAbsoluteOrigin)-y.startDist,q=void 0;if(a.resolveAble==="resizable"){var W=Resizable.dragControl(r,__assign$2(__assign$2({},setCustomDrag(e,r.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:K}));W&&(q=W,U=fillAfterTransform(U,W,e))}var X=fillParams(r,e,__assign$2(__assign$2({delta:M,dist:$,rotate:P,rotation:P,beforeDist:I,beforeDelta:T,beforeRotate:w,beforeRotation:w,absoluteDist:L,absoluteDelta:R,absoluteRotate:O,absoluteRotation:O,isPinch:!!u,resize:q},Y),U));return triggerEvent(r,"onRotate",X),X}}},dragControlEnd:function(r,e){var t=e.datas;if(t.isRotate){t.isRotate=!1;var n=fillEndParams(r,e,{});return triggerEvent(r,"onRotateEnd",n),n}},dragGroupControlCondition:dragControlCondition,dragGroupControlStart:function(r,e){var t=e.datas,n=r.state,i=n.left,a=n.top,o=n.beforeOrigin,s=this.dragControlStart(r,e);if(!s)return!1;s.set(t.beforeDirection*r.rotation);var l=triggerChildAbles(r,this,"dragControlStart",e,function(f,d){var g=f.state,p=g.left,v=g.top,y=g.beforeOrigin,m=plus(minus([p,v],[i,a]),minus(y,o));return d.datas.startGroupClient=m,d.datas.groupClient=m,__assign$2(__assign$2({},d),{parentRotate:0})}),c=__assign$2(__assign$2({},s),{targets:r.props.targets,events:l}),u=triggerEvent(r,"onRotateGroupStart",c);return t.isRotate=u!==!1,t.isRotate?s:!1},dragGroupControl:function(r,e){var t=e.datas;if(t.isRotate){catchEvent(r,"onBeforeRotate",function(c){triggerEvent(r,"onBeforeRotateGroup",fillParams(r,e,__assign$2(__assign$2({},c),{targets:r.props.targets}),!0))});var n=this.dragControl(r,e);if(n){var i=t.beforeDirection,a=n.beforeDist,o=a/180*Math.PI,s=triggerChildAbles(r,this,"dragControl",e,function(c,u){var f=u.datas.startGroupClient,d=__read$1(u.datas.groupClient,2),g=d[0],p=d[1],v=__read$1(rotate$2(f,o*i),2),y=v[0],m=v[1],x=[y-g,m-p];return u.datas.groupClient=[y,m],__assign$2(__assign$2({},u),{parentRotate:a,groupDelta:x})});r.rotation=i*n.beforeRotation;var l=__assign$2({targets:r.props.targets,events:s,set:function(c){r.rotation=c},setGroupRotation:function(c){r.rotation=c}},n);return triggerEvent(r,"onRotateGroup",l),l}}},dragGroupControlEnd:function(r,e){var t=e.isDrag,n=e.datas;if(n.isRotate){this.dragControlEnd(r,e);var i=triggerChildAbles(r,this,"dragControlEnd",e),a=fillEndParams(r,e,{targets:r.props.targets,events:i});return triggerEvent(r,"onRotateGroupEnd",a),t}},request:function(r){var e={},t=0,n=r.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?t+=i.deltaRotate:"rotate"in i&&(t=i.rotate-n),{datas:e,parentDist:t}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function renderGuideline(r,e){var t,n=r.direction,i=r.classNames,a=r.size,o=r.pos,s=r.zoom,l=r.key,c=n==="horizontal",u=c?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(t={},t[c?"width":"height"]="".concat(a),t.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(s,")"),t)})}function renderInnerGuideline(r,e){return renderGuideline(__assign$2(__assign$2({},r),{classNames:__spreadArray$2([prefix("line","guideline",r.direction)],__read$1(r.classNames),!1).filter(function(t){return t}),size:r.size||"".concat(r.sizeValue,"px"),pos:r.pos||r.posValue.map(function(t){return"".concat(throttle$1(t,.1),"px")})}),e)}function renderSnapPoses(r,e,t,n,i,a,o,s){var l=r.props.zoom;return t.map(function(c,u){var f=c.type,d=c.pos,g=[0,0];return g[o]=n,g[o?0:1]=-i+d,renderInnerGuideline({key:"".concat(e,"TargetGuideline").concat(u),classNames:[prefix("target","bold",f)],posValue:g,sizeValue:a,zoom:l,direction:e},s)})}function renderGuidelines(r,e,t,n,i,a){var o=r.props,s=o.zoom,l=o.isDisplayInnerSnapDigit,c=e==="horizontal"?VERTICAL_NAMES_MAP:HORIZONTAL_NAMES_MAP,u=i[c.start],f=i[c.end];return t.filter(function(d){var g=d.hide,p=d.elementRect;if(g)return!1;if(l&&p){var v=p.rect;if(v[c.start]<=u&&f<=v[c.end])return!1}return!0}).map(function(d,g){var p=d.pos,v=d.size,y=d.element,m=d.className,x=[-n[0]+p[0],-n[1]+p[1]];return renderInnerGuideline({key:"".concat(e,"-default-guideline-").concat(g),classNames:y?[prefix("bold"),m]:[prefix("normal"),m],direction:e,posValue:x,sizeValue:v,zoom:s},a)})}function renderDigitLine(r,e,t,n,i,a,o,s){var l,c=r.props,u=c.snapDigit,f=u===void 0?0:u,d=c.isDisplaySnapDigit,g=d===void 0?!0:d,p=c.snapDistFormat,v=p===void 0?function(A,b){return A}:p,y=c.zoom,m=e==="horizontal"?"X":"Y",x=e==="vertical"?"height":"width",_=Math.abs(i),S=g?parseFloat(_.toFixed(f)):0;return s.createElement("div",{key:"".concat(e,"-").concat(t,"-guideline-").concat(n),className:prefix("guideline-group",e),style:(l={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},l[x]="".concat(_,"px"),l)},renderInnerGuideline({direction:e,classNames:[prefix(t),o],size:"100%",posValue:[0,0],sizeValue:_,zoom:y},s),s.createElement("div",{className:prefix("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(y,")")}},S>0?v(S,e):""))}function groupByElementGuidelines(r,e,t,n){var i=r==="vertical"?0:1,a=r==="vertical"?1:0,o=i?VERTICAL_NAMES_MAP:HORIZONTAL_NAMES_MAP,s=t[o.start],l=t[o.end];return groupBy$1(e,function(c){return c.pos[i]}).map(function(c){var u=[],f=[],d=[];return c.forEach(function(g){var p,v,y=g.element,m=g.elementRect.rect;if(m[o.end]<s)u.push(g);else if(l<m[o.start])f.push(g);else if(m[o.start]<=s&&l<=m[o.end]&&n){var x=g.pos,_={element:y,rect:__assign$2(__assign$2({},m),(p={},p[o.end]=m[o.start],p))},S={element:y,rect:__assign$2(__assign$2({},m),(v={},v[o.start]=m[o.end],v))},A=[0,0],b=[0,0];A[i]=x[i],A[a]=x[a],b[i]=x[i],b[a]=x[a]+g.size,u.push({type:r,pos:A,size:0,elementRect:_,direction:"",elementDirection:"end"}),f.push({type:r,pos:b,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),u.sort(function(g,p){return p.pos[a]-g.pos[a]}),f.sort(function(g,p){return g.pos[a]-p.pos[a]}),{total:c,start:u,end:f,inner:d}})}function renderDashedGuidelines(r,e,t,n,i){var a=r.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var l=e.filter(function(y){return y.type===s}),c=s==="vertical"?1:0,u=c?0:1,f=groupByElementGuidelines(s,l,n,a),d=c?HORIZONTAL_NAMES_MAP:VERTICAL_NAMES_MAP,g=c?VERTICAL_NAMES_MAP:HORIZONTAL_NAMES_MAP,p=n[d.start],v=n[d.end];f.forEach(function(y){var m=y.total,x=y.start,_=y.end,S=y.inner,A=t[u]+m[0].pos[u]-n[g.start],b=n;x.forEach(function(C){var E=C.elementRect.rect,T=b[d.start]-E[d.end];if(T>0){var I=[0,0];I[c]=t[c]+b[d.start]-p-T,I[u]=A,o.push(renderDigitLine(r,s,"dashed",o.length,T,I,C.className,i))}b=E}),b=n,_.forEach(function(C){var E=C.elementRect.rect,T=E[d.start]-b[d.end];if(T>0){var I=[0,0];I[c]=t[c]+b[d.end]-p,I[u]=A,o.push(renderDigitLine(r,s,"dashed",o.length,T,I,C.className,i))}b=E}),S.forEach(function(C){var E=C.elementRect.rect,T=p-E[d.start],I=E[d.end]-v,w=[0,0],M=[0,0];w[c]=t[c]-T,w[u]=A,M[c]=t[c]+v-p,M[u]=A,o.push(renderDigitLine(r,s,"dashed",o.length,T,w,C.className,i)),o.push(renderDigitLine(r,s,"dashed",o.length,I,M,C.className,i))})})}),o}function renderGapGuidelines(r,e,t,n,i){var a=[];return["horizontal","vertical"].forEach(function(o){var s=e.filter(function(y){return y.type===o}).slice(0,1),l=o==="vertical"?0:1,c=l?0:1,u=l?HORIZONTAL_NAMES_MAP:VERTICAL_NAMES_MAP,f=l?VERTICAL_NAMES_MAP:HORIZONTAL_NAMES_MAP,d=n[u.start],g=n[u.end],p=n[f.start],v=n[f.end];s.forEach(function(y){var m=y.gap,x=y.gapRects,_=Math.max.apply(Math,__spreadArray$2([p],__read$1(x.map(function(b){var C=b.rect;return C[f.start]})),!1)),S=Math.min.apply(Math,__spreadArray$2([v],__read$1(x.map(function(b){var C=b.rect;return C[f.end]})),!1)),A=(_+S)/2;_===S||A===(p+v)/2||x.forEach(function(b){var C=b.rect,E=b.className,T=[t[0],t[1]];if(C[u.end]<d)T[l]+=C[u.end]-d;else if(g<C[u.start])T[l]+=C[u.start]-d-m;else return;T[c]+=A-p,a.push(renderDigitLine(r,l?"vertical":"horizontal","gap",a.length,m,T,E,i))})})}),a}function getTotalGuidelines(r){var e=r.state,t=e.containerClientRect,n=e.hasFixed,i=t.overflow,a=t.scrollHeight,o=t.scrollWidth,s=t.clientHeight,l=t.clientWidth,c=t.clientLeft,u=t.clientTop,f=r.props,d=f.snapGap,g=d===void 0?!0:d,p=f.verticalGuidelines,v=f.horizontalGuidelines,y=f.snapThreshold,m=y===void 0?5:y,x=f.snapGridWidth,_=x===void 0?0:x,S=f.snapGridHeight,A=S===void 0?0:S,b=f.maxSnapElementGuidelineDistance,C=b===void 0?1/0:b,E=f.isDisplayGridGuidelines,T=getRect(getAbsolutePosesByState(r.state)),I=T.top,w=T.left,M=T.bottom,$=T.right,P={top:I,left:w,bottom:M,right:$,center:(w+$)/2,middle:(I+M)/2},R=getElementGuidelines(r),L=__spreadArray$2([],__read$1(R),!1);g&&L.push.apply(L,__spreadArray$2([],__read$1(getGapGuidelines(r,P,m)),!1));var O=__assign$2({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(L.push.apply(L,__spreadArray$2([],__read$1(getGridGuidelines(_,A,i?o:l,i?a:s,c,u,O,E)),!1)),n){var k=t.left,B=t.top;O.left+=k,O.top+=B,O.right+=k,O.bottom+=B}return L.push.apply(L,__spreadArray$2([],__read$1(getDefaultGuidelines(v||!1,p||!1,i?o:l,i?a:s,c,u,O)),!1)),L=L.filter(function(N){var F=N.element,V=N.elementRect,H=N.type;if(!F||!V)return!0;var z=V.rect;return checkBetweenRects(P,z,H,C)}),L}function getGapGuidelines(r,e,t){var n=r.props,i=n.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,l=r.state.elementRects,c=[];return[["vertical",VERTICAL_NAMES_MAP,HORIZONTAL_NAMES_MAP],["horizontal",HORIZONTAL_NAMES_MAP,VERTICAL_NAMES_MAP]].forEach(function(u){var f=__read$1(u,3),d=f[0],g=f[1],p=f[2],v=e[g.start],y=e[g.end],m=e[g.center],x=e[p.start],_=e[p.end];function S(C){var E=C.rect;return E[g.end]<v+t?v-E[g.end]:y-t<E[g.start]?E[g.start]-y:-1}var A=l.filter(function(C){var E=C.rect;return E[p.start]>_||E[p.end]<x?!1:S(C)>0}).sort(function(C,E){return S(C)-S(E)}),b=[];A.forEach(function(C){A.forEach(function(E){if(C!==E){var T=C.rect,I=E.rect,w=T[p.start],M=T[p.end],$=I[p.start],P=I[p.end];w>P||$>M||b.push([C,E])}})}),b.forEach(function(C){var E=__read$1(C,2),T=E[0],I=E[1],w=T.rect,M=I.rect,$=w[g.start],P=w[g.end],R=M[g.start],L=M[g.end],O=0,k=0,B=!1,N=!1,F=!1;if(P<=v&&y<=R){if(N=!0,O=(R-P-(y-v))/2,k=P+O+(y-v)/2,abs(k-m)>t)return}else if(P<R&&L<v+t){if(B=!0,O=R-P,k=L+O,abs(k-v)>t)return}else if(P<R&&y-t<$){if(F=!0,O=R-P,k=$-O,abs(k-y)>t)return}else return;O&&checkBetweenRects(e,M,d,a)&&(O>s||c.push({type:d,pos:d==="vertical"?[k,0]:[0,k],element:I.element,size:0,className:I.className,isStart:B,isCenter:N,isEnd:F,gap:O,hide:!0,gapRects:[T,I],direction:"",elementDirection:""}))})}),c}function getGridGuidelines(r,e,t,n,i,a,o,s){i===void 0&&(i=0),a===void 0&&(a=0);var l=[],c=o.left,u=o.top;if(e)for(var f=0;f<=n;f+=e)l.push({type:"horizontal",pos:[c,throttle$1(f-a+u,.1)],className:prefix("grid-guideline"),size:t,hide:!s,direction:""});if(r)for(var f=0;f<=t;f+=r)l.push({type:"vertical",pos:[throttle$1(f-i+c,.1),u],className:prefix("grid-guideline"),size:n,hide:!s,direction:""});return l}function checkBetweenRects(r,e,t,n){return t==="horizontal"?abs(r.right-e.left)<=n||abs(r.left-e.right)<=n||r.left<=e.right&&e.left<=r.right:t==="vertical"?abs(r.bottom-e.top)<=n||abs(r.top-e.bottom)<=n||r.top<=e.bottom&&e.top<=r.bottom:!0}function getElementGuidelines(r){var e=r.state,t=r.props.elementGuidelines,n=t===void 0?[]:t;if(!n.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(d){return!d.refresh}),a=n.map(function(d){return isObject$1(d)&&"element"in d?__assign$2(__assign$2({},d),{element:getRefTarget(d.element,!0)}):{element:getRefTarget(d,!0)}}).filter(function(d){return d.element}),o=diff$1(i.map(function(d){return d.element}),a.map(function(d){return d.element})),s=o.maintained,l=o.added,c=[];s.forEach(function(d){var g=__read$1(d,2),p=g[0],v=g[1];c[v]=i[p]}),getSnapElementRects(r,l.map(function(d){return a[d]})).map(function(d,g){c[l[g]]=d}),e.elementRects=c;var u=getSnapDirections(r.props.elementSnapDirections),f=[];return c.forEach(function(d){var g=d.element,p=d.top,v=p===void 0?u.top:p,y=d.left,m=y===void 0?u.left:y,x=d.right,_=x===void 0?u.right:x,S=d.bottom,A=S===void 0?u.bottom:S,b=d.center,C=b===void 0?u.center:b,E=d.middle,T=E===void 0?u.middle:E,I=d.className,w=d.rect,M=splitSnapDirectionPoses({top:v,right:_,left:m,bottom:A,center:C,middle:T},w),$=M.horizontal,P=M.vertical,R=M.horizontalNames,L=M.verticalNames,O=w.top,k=w.left,B=w.right-k,N=w.bottom-O,F=[B,N];P.forEach(function(V,H){f.push({type:"vertical",element:g,pos:[throttle$1(V,.1),O],size:N,sizes:F,className:I,elementRect:d,elementDirection:SNAP_SKIP_NAMES_MAP[L[H]]||L[H],direction:""})}),$.forEach(function(V,H){f.push({type:"horizontal",element:g,pos:[k,throttle$1(V,.1)],size:B,sizes:F,className:I,elementRect:d,elementDirection:SNAP_SKIP_NAMES_MAP[R[H]]||R[H],direction:""})})}),f}function getObjectGuidelines(r,e){return r?r.map(function(t){var n=isObject$1(t)?t:{pos:t},i=n.pos;return isNumber$2(i)?n:__assign$2(__assign$2({},n),{pos:convertUnitSize(i,e)})}):[]}function getDefaultGuidelines(r,e,t,n,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],l=o.left,c=o.top,u=o.bottom,f=o.right,d=t+f-l,g=n+u-c;return getObjectGuidelines(r,g).forEach(function(p){s.push({type:"horizontal",pos:[l,throttle$1(p.pos-a+c,.1)],size:d,className:p.className,direction:""})}),getObjectGuidelines(e,d).forEach(function(p){s.push({type:"vertical",pos:[throttle$1(p.pos-i+l,.1),c],size:g,className:p.className,direction:""})}),s}function getSnapElementRects(r,e){if(!e.length)return[];var t=r.props.groupable,n=r.state,i=n.containerClientRect,a=n.rootMatrix,o=n.is3d,s=n.offsetDelta,l=o?4:3,c=__read$1(calculateContainerPos(a,i,l),2),u=c[0],f=c[1],d=t?0:s[0],g=t?0:s[1];return e.map(function(p){var v=p.element.getBoundingClientRect(),y=v.left-u-d,m=v.top-f-g,x=m+v.height,_=y+v.width,S=__read$1(calculateInversePosition(a,[y,m],l),2),A=S[0],b=S[1],C=__read$1(calculateInversePosition(a,[_,x],l),2),E=C[0],T=C[1];return __assign$2(__assign$2({},p),{rect:{left:A,right:E,top:b,bottom:T,center:(A+E)/2,middle:(b+T)/2}})})}function checkSnapInfo(r){var e=r.state,t=e.container,n=r.props.snapContainer||t;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(t!==n){var o=getRefTarget(n,!0);if(o){var s=getClientRect(o),l=getDragDistByState(e,[s.left-i.left,s.top-i.top]),c=getDragDistByState(e,[s.right-i.right,s.bottom-i.bottom]);a.left=throttle$1(l[0],1e-5),a.top=throttle$1(l[1],1e-5),a.right=throttle$1(c[0],1e-5),a.bottom=throttle$1(c[1],1e-5)}}return e.snapContainer=n,e.snapOffset=a,e.guidelines=getTotalGuidelines(r),e.enableSnap=!0,!0}function getNextFixedPoses(r,e,t,n,i,a){var o=calculatePoses(r,e,t,a?4:3),s=getPosByDirection(o,n);return getAbsolutePoses(o,minus(i,s))}function normalized(r){return r?r/abs(r):0}function getSizeOffsetInfo(r,e,t,n,i,a){var o=a.fixedDirection,s=getCheckSnapDirections(t,o,n),l=getCheckInnerBoundLineInfos(r,e,t,n),c=__spreadArray$2(__spreadArray$2([],__read$1(getSnapBoundInfo(r,e,s,n,i,a)),!1),__read$1(getInnerBoundInfo(r,l,a)),!1),u=getNearOffsetInfo(c,0),f=getNearOffsetInfo(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function recheckSizeByTwoDirection(r,e,t,n,i,a,o,s,l){var c=getPosByDirection(e,o),u=checkMoveableSnapBounds(r,s,{vertical:[c[0]],horizontal:[c[1]]}),f=u.horizontal.offset,d=u.vertical.offset;if(throttle$1(d,FLOAT_POINT_NUM)||throttle$1(f,FLOAT_POINT_NUM)){var g=__read$1(getDragDist({datas:l,distX:-d,distY:-f}),2),p=g[0],v=g[1],y=Math.min(i||1/0,t+o[0]*p),m=Math.min(a||1/0,n+o[1]*v);return[y-t,m-n]}return[0,0]}function checkSizeDist(r,e,t,n,i,a,o,s){for(var l=getAbsolutePosesByState(r.state),c=r.props.keepRatio,u=0,f=0,d=0;d<2;++d){var g=e(u,f),p=getSizeOffsetInfo(r,g,i,c,o,s),v=p.width,y=p.height,m=v.isBound,x=y.isBound,_=v.offset,S=y.offset;if(d===1&&(m||(_=0),x||(S=0)),d===0&&o&&!m&&!x)return[0,0];if(c){var A=abs(_)*(t?1/t:1),b=abs(S)*(n?1/n:1),C=m&&x?A<b:x||!m&&A<b;C?_=t*S/n:S=n*_/t}u+=_,f+=S}if(!c&&i[0]&&i[1]){var E=checkMaxBounds(r,l,i,a,s),T=E.maxWidth,I=E.maxHeight,w=__read$1(recheckSizeByTwoDirection(r,e(u,f).map(function(P){return P.map(function(R){return throttle$1(R,FLOAT_POINT_NUM)})}),t+u,n+f,T,I,i,o,s),2),_=w[0],S=w[1];u+=_,f+=S}return[u,f]}function absDegree(r){return r<0&&(r=r%360+360),r%=360,r}function bumpDegree(r,e){e=absDegree(e);var t=Math.floor(r/360),n=t*360+360-e,i=t*360+e;return abs(r-n)<abs(r-i)?n:i}function getMinDegreeDistance(r,e){r=absDegree(r),e=absDegree(e);var t=absDegree(r-e);return Math.min(t,360-t)}function checkSnapRotate(r,e,t,n){var i,a=r.props,o=(i=a[NAME_snapRotationThreshold])!==null&&i!==void 0?i:5,s=a[NAME_snapRotationDegrees];if(hasGuidelines(r,"rotatable")){var l=e.pos1,c=e.pos2,u=e.pos3,f=e.pos4,d=e.origin,g=t*Math.PI/180,p=[l,c,u,f].map(function(S){return minus(S,d)}),v=p.map(function(S){return rotate$2(S,g)}),y=__spreadArray$2(__spreadArray$2([],__read$1(checkRotateBounds(r,p,v,d,t)),!1),__read$1(checkRotateInnerBounds(r,p,v,d,t)),!1);y.sort(function(S,A){return abs(S-t)-abs(A-t)});var m=y.length>0;if(m)return{isSnap:m,dist:m?y[0]:t}}if(s!=null&&s.length&&o){var x=s.slice().sort(function(S,A){return getMinDegreeDistance(S,n)-getMinDegreeDistance(A,n)}),_=x[0];if(getMinDegreeDistance(_,n)<=o)return{isSnap:!0,dist:t+bumpDegree(n,_)-n}}return{isSnap:!1,dist:t}}function checkSnapResize(r,e,t,n,i,a,o){if(!hasGuidelines(r,"resizable"))return[0,0];var s=o.fixedDirection,l=o.nextAllMatrix,c=r.state,u=c.allMatrix,f=c.is3d;return checkSizeDist(r,function(d,g){return getNextFixedPoses(l||u,e+d,t+g,s,i,f)},e,t,n,i,a,o)}function checkSnapScale(r,e,t,n,i){if(!hasGuidelines(r,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,s=i.fixedPosition,l=i.fixedDirection,c=i.is3d,u=checkSizeDist(r,function(f,d){return getNextFixedPoses(scaleMatrix(i,plus(e,[f/a,d/o])),a,o,l,s,c)},a,o,t,s,n,i);return[u[0]/a,u[1]/o]}function startCheckSnapDrag(r,e){e.absolutePoses=getAbsolutePosesByState(r.state)}function getSnapGuidelines(r){var e=[];return r.forEach(function(t){t.guidelineInfos.forEach(function(n){var i=n.guideline;find$3(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:t}))})}),e.map(function(t){var n=t.guideline,i=t.posInfo;return __assign$2(__assign$2({},n),{direction:i.direction})})}function addBoundGuidelines(r,e,t,n,i,a){var o=checkBoundPoses(getBounds(r,a),e,t),s=o.vertical,l=o.horizontal,c=getInitialBounds();s.forEach(function(p){p.isBound&&(p.direction==="start"&&(c.left=!0),p.direction==="end"&&(c.right=!0),n.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(c.top=!0),p.direction==="end"&&(c.bottom=!0),i.push({type:"bounds",pos:p.pos}))});var u=checkInnerBoundPoses(r),f=u.boundMap,d=u.vertical,g=u.horizontal;return d.forEach(function(p){findIndex$1(n,function(v){var y=v.type,m=v.pos;return y==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),g.forEach(function(p){findIndex$1(i,function(v){var y=v.type,m=v.pos;return y==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),{boundMap:c,innerBoundMap:f}}var directionCondition$1=getDirectionCondition("",["resizable","scalable"]),NAME_snapRotationThreshold="snapRotationThreshold",NAME_snapRotationDegrees="snapRotationDegrees",Snappable={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold",NAME_snapRotationThreshold,NAME_snapRotationDegrees,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(r,e){var t=r.state,n=t.top,i=t.left,a=t.pos1,o=t.pos2,s=t.pos3,l=t.pos4,c=t.snapRenderInfo,u=r.props.snapRenderThreshold,f=u===void 0?1:u;if(!c||!c.render||!hasGuidelines(r,""))return watchValue(r,"boundMap",getInitialBounds(),function(z){return JSON.stringify(z)}),watchValue(r,"innerBoundMap",getInitialBounds(),function(z){return JSON.stringify(z)}),[];t.guidelines=getTotalGuidelines(r);var d=Math.min(a[0],o[0],s[0],l[0]),g=Math.min(a[1],o[1],s[1],l[1]),p=c.externalPoses||[],v=getAbsolutePosesByState(r.state),y=[],m=[],x=[],_=[],S=[],A=getRect(v),b=A.width,C=A.height,E=A.top,T=A.left,I=A.bottom,w=A.right,M={left:T,right:w,top:E,bottom:I,center:(T+w)/2,middle:(E+I)/2},$=p.length>0,P=$?getRect(p):{};if(!c.request){if(c.direction&&S.push(getSnapInfosByDirection(r,v,c.direction,f)),c.snap){var R=getRect(v);c.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),S.push(checkSnaps(r,R,f))}$&&(c.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),S.push(checkSnaps(r,P,f))),S.forEach(function(z){var G=z.vertical.posInfos,j=z.horizontal.posInfos;y.push.apply(y,__spreadArray$2([],__read$1(G.filter(function(Y){var U=Y.guidelineInfos;return U.some(function(K){var q=K.guideline;return!q.hide})}).map(function(Y){return{type:"snap",pos:Y.pos}})),!1)),m.push.apply(m,__spreadArray$2([],__read$1(j.filter(function(Y){var U=Y.guidelineInfos;return U.some(function(K){var q=K.guideline;return!q.hide})}).map(function(Y){return{type:"snap",pos:Y.pos}})),!1)),x.push.apply(x,__spreadArray$2([],__read$1(getSnapGuidelines(G)),!1)),_.push.apply(_,__spreadArray$2([],__read$1(getSnapGuidelines(j)),!1))})}var L=addBoundGuidelines(r,[T,w],[E,I],y,m),O=L.boundMap,k=L.innerBoundMap;$&&addBoundGuidelines(r,[P.left,P.right],[P.top,P.bottom],y,m,c.externalBounds);var B=__spreadArray$2(__spreadArray$2([],__read$1(x),!1),__read$1(_),!1),N=B.filter(function(z){return z.element&&!z.gapRects}),F=B.filter(function(z){return z.gapRects}).sort(function(z,G){return z.gap-G.gap});triggerEvent(r,"onSnap",{guidelines:B.filter(function(z){var G=z.element;return!G}),elements:N,gaps:F},!0);var V=watchValue(r,"boundMap",O,function(z){return JSON.stringify(z)},getInitialBounds()),H=watchValue(r,"innerBoundMap",k,function(z){return JSON.stringify(z)},getInitialBounds());return(O===V||k===H)&&triggerEvent(r,"onBound",{bounds:O,innerBounds:k},!0),__spreadArray$2(__spreadArray$2(__spreadArray$2(__spreadArray$2(__spreadArray$2(__spreadArray$2([],__read$1(renderDashedGuidelines(r,N,[d,g],M,e)),!1),__read$1(renderGapGuidelines(r,F,[d,g],M,e)),!1),__read$1(renderGuidelines(r,"horizontal",_,[i,n],M,e)),!1),__read$1(renderGuidelines(r,"vertical",x,[i,n],M,e)),!1),__read$1(renderSnapPoses(r,"horizontal",m,d,n,b,0,e)),!1),__read$1(renderSnapPoses(r,"vertical",y,g,i,C,1,e)),!1)},dragStart:function(r,e){r.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},checkSnapInfo(r)},drag:function(r){var e=r.state;checkSnapInfo(r)||(e.guidelines=getTotalGuidelines(r)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(r){this.unset(r)},dragEnd:function(r){this.unset(r)},dragControlCondition:function(r,e){if(directionCondition$1(r,e)||dragControlCondition(r,e))return!0;if(!e.isRequest&&e.inputEvent)return hasClass$1(e.inputEvent.target,prefix("snap-control"))},dragControlStart:function(r){r.state.snapRenderInfo=null,checkSnapInfo(r)},dragControl:function(r){this.drag(r)},dragControlEnd:function(r){this.unset(r)},dragGroupStart:function(r,e){this.dragStart(r,e)},dragGroup:function(r){this.drag(r)},dragGroupEnd:function(r){this.unset(r)},dragGroupControlStart:function(r){r.state.snapRenderInfo=null,checkSnapInfo(r)},dragGroupControl:function(r){this.drag(r)},dragGroupControlEnd:function(r){this.unset(r)},unset:function(r){var e=r.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function multiply2(r,e){return[r[0]*e[0],r[1]*e[1]]}function prefix(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return prefixNames.apply(void 0,__spreadArray$2([PREFIX],__read$1(r),!1))}function defaultSync(r){r()}function getTransformMatrix(r){return!r||r==="none"?[1,0,0,1,0,0]:isObject$1(r)?r:parseMat(r)}function getAbsoluteMatrix(r,e,t){return multiplies(e,createOriginMatrix(t,e),r,createOriginMatrix(t.map(function(n){return-n}),e))}function measureSVGSize(r,e,t){if(e==="%"){var n=getSVGViewBox(r.ownerSVGElement);return n[t?"width":"height"]/100}return 1}function getBeforeTransformOrigin(r){var e=getTransformOrigin(getComputedStyle$1(r,":before"));return e.map(function(t,n){var i=splitUnit(t),a=i.value,o=i.unit;return a*measureSVGSize(r,o,n===0)})}function getTransformOriginArray(r){return r?r.split(" "):["0","0"]}function getTransformOrigin(r){return getTransformOriginArray(r.transformOrigin)}function getElementTransform(r){var e=getCachedStyle(r),t=e("transform");if(t&&t!=="none")return t;if("transform"in r){var n=r.transform,i=n.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],s=function(c){var u=i[c].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return u[f]}).join(", "),")"))},l=0;l<a;++l)s(l);return o.join(" ")}return""}function getOffsetInfo(r,e,t,n,i){var a,o,s=getDocumentElement(r)||getDocumentBody(r),l=!1,c,u;if(!r||t)c=r;else{var f=(a=r==null?void 0:r.assignedSlot)===null||a===void 0?void 0:a.parentElement,d=r.parentElement;f?(l=!0,u=d,c=f):c=d}for(var g=!1,p=r===e||c===e,v="relative",y=1,m=parseFloat(i==null?void 0:i("zoom"))||1,x=i==null?void 0:i("position");c&&c!==s;){e===c&&(p=!0);var _=getCachedStyle(c),S=c.tagName.toLowerCase(),A=getElementTransform(c),b=_("willChange"),C=parseFloat(_("zoom"))||1;if(v=_("position"),n&&C!==1){y=C;break}if(!t&&n&&m!==1&&x&&x!=="absolute"||S==="svg"||v!=="static"||A&&A!=="none"||b==="transform")break;var E=(o=r==null?void 0:r.assignedSlot)===null||o===void 0?void 0:o.parentNode,T=c.parentNode;E&&(l=!0,u=T);var I=T;if(I&&I.nodeType===11){c=I.host,g=!0,v=getCachedStyle(c)("position");break}c=I,v="relative"}return{offsetZoom:y,hasSlot:l,parentSlotElement:u,isCustomElement:g,isStatic:v==="static",isEnd:p||!c||c===s,offsetParent:c||s}}function getOffsetPosInfo(r,e){var t,n=r.tagName.toLowerCase(),i=r.offsetLeft,a=r.offsetTop,o=getCachedStyle(r),s=isUndefined$1(i),l=!s,c,u;return!l&&n!=="svg"?(c=IS_WEBKIT605?getBeforeTransformOrigin(r):getTransformOriginArray(o("transformOrigin")).map(function(f){return parseFloat(f)}),u=c.slice(),l=!0,t=__read$1(getSVGGraphicsOffset(r,c,r===e&&e.tagName.toLowerCase()==="g"),4),i=t[0],a=t[1],c[0]=t[2],c[1]=t[3]):(c=getTransformOriginArray(o("transformOrigin")).map(function(f){return parseFloat(f)}),u=c.slice()),{tagName:n,isSVG:s,hasOffset:l,offset:[i||0,a||0],origin:c,targetOrigin:u}}function getBodyOffset(r,e){var t=getCachedStyle(r),n=getCachedStyle(getDocumentBody(r)),i=n("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return t("position")==="absolute"&&((t("top")!=="auto"||t("bottom")!=="auto")&&(o=0),(t("left")!=="auto"||t("right")!=="auto")&&(a=0)),[a,o]}function convert3DMatrixes(r){r.forEach(function(e){var t=e.matrix;t&&(e.matrix=convertDimension(t,3,4))})}function getPositionFixedInfo(r){for(var e=r.parentElement,t=!1,n=getDocumentBody(r);e;){var i=getComputedStyle$1(e).transform;if(i&&i!=="none"){t=!0;break}if(e===n)break;e=e.parentElement}return{fixedContainer:e||n,hasTransform:t}}function makeMatrixCSS(r,e){return e===void 0&&(e=r.length>9),"".concat(e?"matrix3d":"matrix","(").concat(convertMatrixtoCSS(r,!e).join(","),")")}function getSVGViewBox(r){var e=r.clientWidth,t=r.clientHeight;if(!r)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:t};var n=r.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||t,clientWidth:e,clientHeight:t}}function getSVGMatrix(r,e){var t,n=getSVGViewBox(r),i=n.width,a=n.height,o=n.clientWidth,s=n.clientHeight,l=o/i,c=s/a,u=r.preserveAspectRatio.baseVal,f=u.align,d=u.meetOrSlice,g=[0,0],p=[l,c],v=[0,0];if(f!==1){var y=(f-2)%3,m=Math.floor((f-2)/3);g[0]=i*y/2,g[1]=a*m/2;var x=d===2?Math.max(c,l):Math.min(l,c);p[0]=x,p[1]=x,v[0]=(o-i)/2*y,v[1]=(s-a)/2*m}var _=createScaleMatrix(p,e);return t=__read$1(v,2),_[e*(e-1)]=t[0],_[e*(e-1)+1]=t[1],getAbsoluteMatrix(_,e,g)}function getSVGGraphicsOffset(r,e,t){if(!r.getBBox||!t&&r.tagName.toLowerCase()==="g")return[0,0,0,0];var n=r.getBBox(),i=getSVGViewBox(r.ownerSVGElement),a=n.x-i.x,o=n.y-i.y;return[a,o,e[0]-a,e[1]-o]}function calculatePosition(r,e,t){return calculate(r,convertPositionMatrix(e,t),t)}function calculatePoses(r,e,t,n){return[[0,0],[e,0],[0,t],[e,t]].map(function(i){return calculatePosition(r,i,n)})}function getRect(r){var e=r.map(function(c){return c[0]}),t=r.map(function(c){return c[1]}),n=Math.min.apply(Math,__spreadArray$2([],__read$1(e),!1)),i=Math.min.apply(Math,__spreadArray$2([],__read$1(t),!1)),a=Math.max.apply(Math,__spreadArray$2([],__read$1(e),!1)),o=Math.max.apply(Math,__spreadArray$2([],__read$1(t),!1)),s=a-n,l=o-i;return{left:n,top:i,right:a,bottom:o,width:s,height:l}}function calculateRect(r,e,t,n){var i=calculatePoses(r,e,t,n);return getRect(i)}function getSVGOffset(r,e,t,n,i){var a,o=r.target,s=r.origin,l=e.matrix,c=getSize$1(o),u=c.offsetWidth,f=c.offsetHeight,d=t.getBoundingClientRect(),g=[0,0];t===getDocumentBody(t)&&(g=getBodyOffset(o,!0));for(var p=o.getBoundingClientRect(),v=p.left-d.left+t.scrollLeft-(t.clientLeft||0)+g[0],y=p.top-d.top+t.scrollTop-(t.clientTop||0)+g[1],m=p.width,x=p.height,_=multiplies(n,i,l),S=calculateRect(_,u,f,n),A=S.left,b=S.top,C=S.width,E=S.height,T=calculatePosition(_,s,n),I=minus(T,[A,b]),w=[v+I[0]*m/C,y+I[1]*x/E],M=[0,0],$=0;++$<10;){var P=invert$2(i,n);a=__read$1(minus(calculatePosition(P,w,n),calculatePosition(P,T,n)),2),M[0]=a[0],M[1]=a[1];var R=multiplies(n,i,createOriginMatrix(M,n),l),L=calculateRect(R,u,f,n),O=L.left,k=L.top,B=O-v,N=k-y;if(abs(B)<2&&abs(N)<2)break;w[0]-=B,w[1]-=N}return M.map(function(F){return Math.round(F)})}function calculateMoveableClientPositions(r,e,t){var n=r.length===16,i=n?4:3,a=e.map(function(l){return calculatePosition(r,l,i)}),o=t.left,s=t.top;return a.map(function(l){return[l[0]+o,l[1]+s]})}function getDistSize(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function getDiagonalSize(r,e){return getDistSize([e[0]-r[0],e[1]-r[1]])}function getLineStyle(r,e,t,n){t===void 0&&(t=1),n===void 0&&(n=getRad$1(r,e));var i=getDiagonalSize(r,e);return{transform:"translateY(-50%) translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(n,"rad) scaleY(").concat(t,")"),width:"".concat(i,"px")}}function getControlTransform(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=t.length,a=t.reduce(function(s,l){return s+l[0]},0)/i,o=t.reduce(function(s,l){return s+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(r,"rad) scale(").concat(e,")")}}function getProps(r,e){var t=r[e];return isObject$1(t)?__assign$2(__assign$2({},r),t):r}function getSize$1(r){var e=r&&!isUndefined$1(r.offsetWidth),t=0,n=0,i=0,a=0,o=0,s=0,l=0,c=0,u=0,f=0,d=0,g=0,p=1/0,v=1/0,y=1/0,m=1/0,x=0,_=0,S=!1;if(r)if(!e&&r.tagName.toLowerCase()!=="svg"){var A=r.getBBox();S=!0,t=A.width,n=A.height,o=t,s=n,l=t,c=n,i=t,a=n}else{var b=getCachedStyle(r),C=r.style,E=b("boxSizing")==="border-box",T=parseFloat(b("borderLeftWidth"))||0,I=parseFloat(b("borderRightWidth"))||0,w=parseFloat(b("borderTopWidth"))||0,M=parseFloat(b("borderBottomWidth"))||0,$=parseFloat(b("paddingLeft"))||0,P=parseFloat(b("paddingRight"))||0,R=parseFloat(b("paddingTop"))||0,L=parseFloat(b("paddingBottom"))||0,O=$+P,k=R+L,B=T+I,N=w+M,F=O+B,V=k+N,H=b("position"),z=0,G=0;if("clientLeft"in r){var j=null;if(H==="absolute"){var Y=getOffsetInfo(r,getDocumentBody(r));j=Y.offsetParent}else j=r.parentElement;if(j){var U=getCachedStyle(j);z=parseFloat(U("width")),G=parseFloat(U("height"))}}u=Math.max(O,convertUnitSize(b("minWidth"),z)||0),f=Math.max(k,convertUnitSize(b("minHeight"),G)||0),p=convertUnitSize(b("maxWidth"),z),v=convertUnitSize(b("maxHeight"),G),isNaN(p)&&(p=1/0),isNaN(v)&&(v=1/0),x=convertUnitSize(C.width,0)||0,_=convertUnitSize(C.height,0)||0,o=parseFloat(b("width"))||0,s=parseFloat(b("height"))||0,l=abs(o-x)<1?between(u,x||o,p):o,c=abs(s-_)<1?between(f,_||s,v):s,t=l,n=c,i=l,a=c,E?(y=p,m=v,d=u,g=f,l=t-F,c=n-V):(y=p+F,m=v+V,d=u+F,g=f+V,t=l+F,n=c+V),i=l+O,a=c+k}return{svg:S,offsetWidth:t,offsetHeight:n,clientWidth:i,clientHeight:a,contentWidth:l,contentHeight:c,inlineCSSWidth:x,inlineCSSHeight:_,cssWidth:o,cssHeight:s,minWidth:u,minHeight:f,maxWidth:p,maxHeight:v,minOffsetWidth:d,minOffsetHeight:g,maxOffsetWidth:y,maxOffsetHeight:m}}function getRotationRad(r,e){return getRad$1(e>0?r[0]:r[1],e>0?r[1]:r[0])}function resetClientRect(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function getExtendsRect(r,e){var t=r===getDocumentBody(r)||r===getDocumentElement(r),n={clientLeft:r.clientLeft,clientTop:r.clientTop,clientWidth:r.clientWidth,clientHeight:r.clientHeight,scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,overflow:!1};return t&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow=getCachedStyle(r)("overflow")!=="visible",__assign$2(__assign$2({},e),n)}function getClientRectByPosition(r,e,t,n){var i=r.left,a=r.right,o=r.top,s=r.bottom,l=e.top,c=e.left,u={left:c+i,top:l+o,right:c+a,bottom:l+s,width:a-i,height:s-o};return t&&n?getExtendsRect(t,u):u}function getClientRect(r,e){var t=0,n=0,i=0,a=0;if(r){var o=r.getBoundingClientRect();t=o.left,n=o.top,i=o.width,a=o.height}var s={left:t,top:n,width:i,height:a,right:t+i,bottom:n+a};return r&&e?getExtendsRect(r,s):s}function getTotalOrigin(r){var e=r.props,t=e.groupable,n=e.svgOrigin,i=r.getState(),a=i.offsetWidth,o=i.offsetHeight,s=i.svg,l=i.transformOrigin;return!t&&s&&n?convertTransformOriginArray(n,a,o):l}function getTotalDirection(r,e,t,n){var i;if(r)i=r;else if(e)i=[0,0];else{var a=t.target;i=getDirection$1(a,n)}return i}function getDirection$1(r,e){if(r){var t=r.getAttribute("data-rotation")||"",n=r.getAttribute("data-direction");if(e.deg=t,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function getAbsolutePoses(r,e){return[plus(e,r[0]),plus(e,r[1]),plus(e,r[2]),plus(e,r[3])]}function getAbsolutePosesByState(r){var e=r.left,t=r.top,n=r.pos1,i=r.pos2,a=r.pos3,o=r.pos4;return getAbsolutePoses([n,i,a,o],[e,t])}function unsetAbles(r,e){r[e?"controlAbles":"targetAbles"].forEach(function(t){t.unset&&t.unset(r)})}function unsetGesto(r,e){var t=e?"controlGesto":"targetGesto",n=r[t];(n==null?void 0:n.isIdle())===!1&&unsetAbles(r,e),n==null||n.unset(),r[t]=null}function fillCSSObject(r,e){if(e){var t=getBeforeRenderableDatas(e);t.nextStyle=__assign$2(__assign$2({},t.nextStyle),r)}return{style:r,cssText:getKeys(r).map(function(n){return"".concat(decamelize(n,"-"),": ").concat(r[n],";")}).join("")}}function fillAfterTransform(r,e,t){var n=e.afterTransform||e.transform;return __assign$2(__assign$2({},fillCSSObject(__assign$2(__assign$2(__assign$2({},r.style),e.style),{transform:n}),t)),{afterTransform:n,transform:r.transform})}function fillParams(r,e,t,n){var i=e.datas;i.datas||(i.datas={});var a=__assign$2(__assign$2({},t),{target:r.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:r,moveable:r,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?n||(i.lastEvent=a):i.isStartEvent=!0,a}function fillEndParams(r,e,t){var n=e.datas,i="isDrag"in t?t.isDrag:e.isDrag;return n.datas||(n.datas={}),__assign$2(__assign$2({isDrag:i},t),{moveable:r,target:r.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:r,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function catchEvent(r,e,t){r._emitter.on(e,t)}function triggerEvent(r,e,t,n,i){return r.triggerEvent(e,t,n,i)}function getComputedStyle$1(r,e){return getWindow(r).getComputedStyle(r,e)}function filterAbles(r,e,t){var n={},i={};return r.filter(function(a){var o=a.name;if(n[o]||!e.some(function(s){return a[s]}))return!1;if(!t&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return n[o]=!0,!0})}function equals(r,e){return r===e||r==null&&e==null}function selectValue(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r.length-1,n=0;n<t;++n){var i=r[n];if(!isUndefined$1(i))return i}return r[t]}function groupBy$1(r,e){var t=[],n=[];return r.forEach(function(i,a){var o=e(i,a,r),s=n.indexOf(o),l=t[s]||[];s===-1&&(n.push(o),t.push(l)),l.push(i)}),t}function groupByMap(r,e){var t=[],n={};return r.forEach(function(i,a){var o=e(i,a,r),s=n[o];s||(s=[],n[o]=s,t.push(s)),s.push(i)}),t}function flat(r){return r.reduce(function(e,t){return e.concat(t)},[])}function maxOffset(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.sort(function(t,n){return abs(n)-abs(t)}),r[0]}function calculateInversePosition(r,e,t){return calculate(invert$2(r,t),convertPositionMatrix(e,t),t)}function convertDragDist(r,e){var t,n=r.is3d,i=r.rootMatrix,a=n?4:3;return t=__read$1(calculateInversePosition(i,[e.distX,e.distY],a),2),e.distX=t[0],e.distY=t[1],e}function calculatePadding$1(r,e,t,n){if(!t[0]&&!t[1])return e;var i=calculatePosition(r,[normalized(t[0]),0],n),a=calculatePosition(r,[0,normalized(t[1])],n),o=calculatePosition(r,[t[0]/getDistSize(i),t[1]/getDistSize(a)],n);return plus(e,o)}function convertCSSSize(r,e,t){return t?"".concat(r/e*100,"%"):"".concat(r,"px")}function getTinyDist(r){return abs(r)<=TINY_NUM?0:r}function getDirectionViewClassName(r){return function(e){if(!e.isDragging(r))return"";var t=getGestoData(e,r),n=t.deg;return n?prefix("view-control-rotation".concat(n)):""}}function getDirectionCondition(r,e){return e===void 0&&(e=[r]),function(t,n){if(n.isRequest)return e.some(function(a){return n.requestAble===a})?n.parentDirection:!1;var i=n.inputEvent.target;return hasClass$1(i,prefix("direction"))&&(!r||hasClass$1(i,prefix(r)))}}function convertTransformInfo(r,e,t){var n,i=parse$1(r,{"x%":function(A){return A/100*e.offsetWidth},"y%":function(A){return A/100*e.offsetHeight}}),a=r.slice(0,t<0?void 0:t),o=r.slice(0,t<0?void 0:t+1),s=r[t]||"",l=t<0?[]:r.slice(t),c=t<0?[]:r.slice(t+1),u=i.slice(0,t<0?void 0:t),f=i.slice(0,t<0?void 0:t+1),d=(n=i[t])!==null&&n!==void 0?n:parse$1([""])[0],g=t<0?[]:i.slice(t),p=t<0?[]:i.slice(t+1),v=d?[d]:[],y=toMat(u),m=toMat(f),x=toMat(g),_=toMat(p),S=multiply$1(y,x,4);return{transforms:r,beforeFunctionMatrix:y,beforeFunctionMatrix2:m,targetFunctionMatrix:toMat(v),afterFunctionMatrix:x,afterFunctionMatrix2:_,allFunctionMatrix:S,beforeFunctions:u,beforeFunctions2:f,targetFunction:v[0],afterFunctions:g,afterFunctions2:p,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:l,afterFunctionTexts2:c}}function isArrayFormat(r){return!r||!isObject$1(r)||isNode(r)?!1:isArray$4(r)||"length"in r}function getRefTarget(r,e){return r?isNode(r)?r:isString$1(r)?e?document.querySelector(r):r:isFunction$1(r)?r():isWindow(r)?r:"current"in r?r.current:r:null}function getRefTargets(r,e){if(!r)return[];var t=isArrayFormat(r)?[].slice.call(r):[r];return t.reduce(function(n,i){return isString$1(i)&&e?__spreadArray$2(__spreadArray$2([],__read$1(n),!1),__read$1([].slice.call(document.querySelectorAll(i))),!1):(isArray$4(i)?n.push(getRefTargets(i,e)):n.push(getRefTarget(i,e)),n)},[])}function getAbsoluteRotation(r,e,t){var n=getRad$1(r,e)/Math.PI*180;return n=t>=0?n:180-n,n=n>=0?n:360+n,n}function getDragDistByState(r,e){var t=r.rootMatrix,n=r.is3d,i=n?4:3,a=invert$2(t,i);return n||(a=convertDimension(a,3,4)),a[12]=0,a[13]=0,a[14]=0,calculateMatrixDist(a,e)}function getSizeDistByDist(r,e,t,n,i){var a=__read$1(r,2),o=a[0],s=a[1],l=0,c=0;if(i&&o&&s){var u=getRad$1([0,0],e),f=getRad$1([0,0],n),d=getDistSize(e),g=Math.cos(u-f)*d;if(!n[0])c=g,l=c*t;else if(!n[1])l=g,c=l/t;else{var p=n[0]*o,v=n[1]*s,y=Math.atan2(p+e[0],v+e[1]),m=Math.atan2(p,v);y<0&&(y+=Math.PI*2),m<0&&(m+=Math.PI*2);var x=0;abs(y-m)<Math.PI/2||abs(y-m)>Math.PI/2*3||(m+=Math.PI),x=y-m,x>Math.PI*2?x-=Math.PI*2:x>Math.PI?x=2*Math.PI-x:x<-Math.PI&&(x=-2*Math.PI-x);var _=getDistSize([p+e[0],v+e[1]])*Math.cos(x);l=_*Math.sin(m)-p,c=_*Math.cos(m)-v,n[0]<0&&(l*=-1),n[1]<0&&(c*=-1)}}else l=n[0]*e[0],c=n[1]*e[1];return[l,c]}function getOffsetSizeDist(r,e,t,n){var i,a=t.ratio,o=t.startOffsetWidth,s=t.startOffsetHeight,l=0,c=0,u=n.distX,f=n.distY,d=n.pinchScale,g=n.parentDistance,p=n.parentDist,v=n.parentScale,y=t.fixedDirection,m=[0,1].map(function(C){return abs(r[C]-y[C])}),x=[0,1].map(function(C){var E=m[C];return E!==0&&(E=2/E),E});if(p)l=p[0],c=p[1],e&&(l?c||(c=l/a):l=c*a);else if(isNumber$2(d))l=(d-1)*o,c=(d-1)*s;else if(v)l=(v[0]-1)*o,c=(v[1]-1)*s;else if(g){var _=o*m[0],S=s*m[1],A=getDistSize([_,S]);l=g/A*_*x[0],c=g/A*S*x[1]}else{var b=getDragDist({datas:t,distX:u,distY:f});b=x.map(function(C,E){return b[E]*C}),i=__read$1(getSizeDistByDist([o,s],b,a,r,e),2),l=i[0],c=i[1]}return{distWidth:l,distHeight:c}}function convertTransformUnit(r,e){if(e){if(r==="left")return{x:"0%",y:"50%"};if(r==="top")return{x:"50%",y:"50%"};if(r==="center")return{x:"50%",y:"50%"};if(r==="right")return{x:"100%",y:"50%"};if(r==="bottom")return{x:"50%",y:"100%"};var t=__read$1(r.split(" "),2),n=t[0],i=t[1],a=convertTransformUnit(n||""),o=convertTransformUnit(i||""),s=__assign$2(__assign$2({},a),o),l={x:"50%",y:"50%"};return s.x&&(l.x=s.x),s.y&&(l.y=s.y),s.value&&(s.x&&!s.y&&(l.y=s.value),!s.x&&s.y&&(l.x=s.value)),l}return r==="left"?{x:"0%"}:r==="right"?{x:"100%"}:r==="top"?{y:"0%"}:r==="bottom"?{y:"100%"}:r?r==="center"?{value:"50%"}:{value:r}:{}}function convertTransformOriginArray(r,e,t){var n=convertTransformUnit(r,!0),i=n.x,a=n.y;return[convertUnitSize(i,e)||0,convertUnitSize(a,t)||0]}function rotatePosesInfo(r,e,t){var n=r.map(function(a){return minus(a,e)}),i=n.map(function(a){return rotate$2(a,t)});return{prev:n,next:i,result:i.map(function(a){return plus(a,e)})}}function isDeepArrayEquals(r,e){return r.length===e.length&&r.every(function(t,n){var i=e[n],a=isArray$4(t),o=isArray$4(i);return a&&o?isDeepArrayEquals(t,i):!a&&!o?t===i:!1})}function watchValue(r,e,t,n,i){var a=r._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=t,t;return o===t||n(o)===n(t)?o:(a[e]=t,t)}function sign(r){return r>=0?1:-1}function abs(r){return Math.abs(r)}function countEach(r,e){return counter(r).map(function(t){return e(t)})}function getPaddingBox(r){return isNumber$2(r)?{top:r,left:r,right:r,bottom:r}:{left:r.left||0,top:r.top||0,right:r.right||0,bottom:r.bottom||0}}var Pinchable=makeAble("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(r,e){var t=e.datas,n=e.targets,i=e.angle,a=e.originalDatas,o=r.props,s=o.pinchable,l=o.ables;if(!s)return!1;var c="onPinch".concat(n?"Group":"","Start"),u="drag".concat(n?"Group":"","ControlStart"),f=(s===!0?r.controlAbles:l.filter(function(v){return s.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[u]}),d=fillParams(r,e,{});n&&(d.targets=n);var g=triggerEvent(r,c,d);t.isPinch=g!==!1,t.ables=f;var p=t.isPinch;return p?(f.forEach(function(v){if(a[v.name]=a[v.name]||{},!!v[u]){var y=__assign$2(__assign$2({},e),{datas:a[v.name],parentRotate:i,isPinch:!0});v[u](r,y)}}),r.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(r,e){var t=e.datas,n=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,s=e.targets,l=e.angle;if(t.isPinch){var c=i*(1-1/n),u=fillParams(r,e,{});s&&(u.targets=s);var f="onPinch".concat(s?"Group":"");triggerEvent(r,f,u);var d=t.ables,g="drag".concat(s?"Group":"","Control");return d.forEach(function(p){p[g]&&p[g](r,__assign$2(__assign$2({},e),{datas:a[p.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(r,e){var t=e.datas,n=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(t.isPinch){var s="onPinch".concat(a?"Group":"","End"),l=fillEndParams(r,e,{isDrag:n});a&&(l.targets=a),triggerEvent(r,s,l);var c=t.ables,u="drag".concat(a?"Group":"","ControlEnd");return c.forEach(function(f){f[u]&&f[u](r,__assign$2(__assign$2({},e),{isDrag:n,datas:o[f.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(r,e){return this.pinchStart(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))},pinchGroup:function(r,e){return this.pinch(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))},pinchGroupEnd:function(r,e){return this.pinchEnd(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))}}),directionCondition=getDirectionCondition("scalable"),Scalable={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:getRenderDirections("scalable"),dragControlCondition:directionCondition,viewClassName:getDirectionViewClassName("scalable"),dragControlStart:function(r,e){var t=e.datas,n=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=getTotalDirection(a,n,i,t),s=r.state,l=s.width,c=s.height,u=s.targetTransform,f=s.target,d=s.pos1,g=s.pos2,p=s.pos4;if(!o||!f)return!1;n||setDragStart(r,e),t.datas={},t.transform=u,t.prevDist=[1,1],t.direction=o,t.startOffsetWidth=l,t.startOffsetHeight=c,t.startValue=[1,1];var v=!o[0]&&!o[1]||o[0]||!o[1];setDefaultTransformIndex(r,e,"scale"),t.isWidth=v;function y(b){t.ratio=b&&isFinite(b)?b:0}t.startPositions=getAbsolutePosesByState(r.state);function m(b){var C=getFixedDirectionInfo(t.startPositions,b);t.fixedDirection=C.fixedDirection,t.fixedPosition=C.fixedPosition,t.fixedOffset=C.fixedOffset}t.setFixedDirection=m,y(getDist$2(d,g)/getDist$2(g,p)),m([-o[0],-o[1]]);var x=function(b){t.minScaleSize=b},_=function(b){t.maxScaleSize=b};x([-1/0,-1/0]),_([1/0,1/0]);var S=fillParams(r,e,__assign$2(__assign$2({direction:o,set:function(b){t.startValue=b},setRatio:y,setFixedDirection:m,setMinScaleSize:x,setMaxScaleSize:_},fillTransformStartEvent(r,e)),{dragStart:Draggable.dragStart(r,new CustomGesto().dragStart([0,0],e))})),A=triggerEvent(r,"onScaleStart",S);return t.startFixedDirection=t.fixedDirection,A!==!1&&(t.isScale=!0,r.state.snapRenderInfo={request:e.isRequest,direction:o}),t.isScale?S:!1},dragControl:function(r,e){resolveTransformEvent(r,e,"scale");var t=e.datas,n=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,s=e.isRequest,l=e.useSnap,c=e.resolveMatrix,u=t.prevDist,f=t.direction,d=t.startOffsetWidth,g=t.startOffsetHeight,p=t.isScale,v=t.startValue,y=t.isWidth,m=t.ratio;if(!p)return!1;var x=r.props,_=x.throttleScale,S=x.parentMoveable,A=f;!f[0]&&!f[1]&&(A=[1,1]);var b=m&&(n??x.keepRatio)||!1,C=r.state,E=[v[0],v[1]];function T(){var q=getOffsetSizeDist(A,b,t,e),W=q.distWidth,X=q.distHeight,tt=d?(d+W)/d:1,Z=g?(g+X)/g:1;v[0]||(E[0]=W/d),v[1]||(E[1]=X/g);var J=(A[0]||b?tt:1)*E[0],Q=(A[1]||b?Z:1)*E[1];return J===0&&(J=sign(u[0])*MIN_SCALE),Q===0&&(Q=sign(u[1])*MIN_SCALE),[J,Q]}var I=T();if(!a&&r.props.groupable){var w=C.snapRenderInfo||{},M=w.direction;isArray$4(M)&&(M[0]||M[1])&&(C.snapRenderInfo={direction:f,request:e.isRequest})}triggerEvent(r,"onBeforeScale",fillParams(r,e,{scale:I,setFixedDirection:function(q){return t.setFixedDirection(q),I=T(),I},startFixedDirection:t.startFixedDirection,setScale:function(q){I=q}},!0));var $=[I[0]/E[0],I[1]/E[1]],P=o,R=[0,0],L=!o&&!i&&a;if(L||c?P=getTranslateFixedPosition(r,t.targetAllTransform,[0,0],[0,0],t):o||(P=t.fixedPosition),a||(R=checkSnapScale(r,$,f,!l&&s,t)),b){A[0]&&A[1]&&R[0]&&R[1]&&(Math.abs(R[0]*d)>Math.abs(R[1]*g)?R[1]=0:R[0]=0);var O=!R[0]&&!R[1];if(O&&(y?$[0]=throttle$1($[0]*E[0],_)/E[0]:$[1]=throttle$1($[1]*E[1],_)/E[1]),A[0]&&!A[1]||R[0]&&!R[1]||O&&y){$[0]+=R[0];var k=d*$[0]*E[0]/m;$[1]=k/g/E[1]}else if(!A[0]&&A[1]||!R[0]&&R[1]||O&&!y){$[1]+=R[1];var B=g*$[1]*E[1]*m;$[0]=B/d/E[0]}}else $[0]+=R[0],$[1]+=R[1],R[0]||($[0]=throttle$1($[0]*E[0],_)/E[0]),R[1]||($[1]=throttle$1($[1]*E[1],_)/E[1]);$[0]===0&&($[0]=sign(u[0])*MIN_SCALE),$[1]===0&&($[1]=sign(u[1])*MIN_SCALE),I=multiply2($,[E[0],E[1]]);var N=[d,g],F=[d*I[0],g*I[1]];F=calculateBoundSize(F,t.minScaleSize,t.maxScaleSize,b?m:!1),I=countEach(2,function(q){return N[q]?F[q]/N[q]:F[q]}),$=countEach(2,function(q){return I[q]/E[q]});var V=countEach(2,function(q){return u[q]?$[q]/u[q]:$[q]}),H="scale(".concat($.join(", "),")"),z="scale(".concat(I.join(", "),")"),G=convertTransformFormat(t,z,H),j=!v[0]||!v[1],Y=getScaleDist(r,j?z:H,t.fixedDirection,P,t.fixedOffset,t,j),U=L?Y:minus(Y,t.prevInverseDist||[0,0]);if(t.prevDist=$,t.prevInverseDist=Y,I[0]===u[0]&&I[1]===u[1]&&U.every(function(q){return!q})&&!S&&!L)return!1;var K=fillParams(r,e,__assign$2({offsetWidth:d,offsetHeight:g,direction:f,scale:I,dist:$,delta:V,isPinch:!!a},fillTransformEvent(r,G,U,a,e)));return triggerEvent(r,"onScale",K),K},dragControlEnd:function(r,e){var t=e.datas;if(!t.isScale)return!1;t.isScale=!1;var n=fillEndParams(r,e,{});return triggerEvent(r,"onScaleEnd",n),n},dragGroupControlCondition:directionCondition,dragGroupControlStart:function(r,e){var t=e.datas,n=this.dragControlStart(r,e);if(!n)return!1;var i=fillChildEvents(r,"resizable",e);t.moveableScale=r.scale;var a=triggerChildAbles(r,this,"dragControlStart",e,function(c,u){return startChildDist(r,c,t,u)}),o=function(c){n.setFixedDirection(c),a.forEach(function(u,f){u.setFixedDirection(c),startChildDist(r,u.moveable,t,i[f])})};t.setFixedDirection=o;var s=__assign$2(__assign$2({},n),{targets:r.props.targets,events:a,setFixedDirection:o}),l=triggerEvent(r,"onScaleGroupStart",s);return t.isScale=l!==!1,t.isScale?s:!1},dragGroupControl:function(r,e){var t=e.datas;if(t.isScale){catchEvent(r,"onBeforeScale",function(u){triggerEvent(r,"onBeforeScaleGroup",fillParams(r,e,__assign$2(__assign$2({},u),{targets:r.props.targets}),!0))});var n=this.dragControl(r,e);if(n){var i=n.dist,a=t.moveableScale;r.scale=[i[0]*a[0],i[1]*a[1]];var o=r.props.keepRatio,s=t.fixedPosition,l=triggerChildAbles(r,this,"dragControl",e,function(u,f){var d=__read$1(calculate(createRotateMatrix(r.rotation/180*Math.PI,3),[f.datas.originalX*i[0],f.datas.originalY*i[1],1],3),2),g=d[0],p=d[1];return __assign$2(__assign$2({},f),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:plus(s,[g,p])})}),c=__assign$2({targets:r.props.targets,events:l},n);return triggerEvent(r,"onScaleGroup",c),c}}},dragGroupControlEnd:function(r,e){var t=e.isDrag,n=e.datas;if(n.isScale){this.dragControlEnd(r,e);var i=triggerChildAbles(r,this,"dragControlEnd",e),a=fillEndParams(r,e,{targets:r.props.targets,events:i});return triggerEvent(r,"onScaleGroupEnd",a),t}},request:function(){var r={},e=0,t=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:r,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return e+=i.deltaWidth,t+=i.deltaHeight,{datas:r,parentDist:[e,t],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:n}}}}};function getMiddleLinePos(r,e){return r.map(function(t,n){return dot$3(t,e[n],1,2)})}function getTriangleRad(r,e,t){var n=getRad$1(r,e),i=getRad$1(r,t),a=i-n;return a>=0?a:a+2*Math.PI}function isValidPos(r,e){var t=getTriangleRad(r[0],r[1],r[2]),n=getTriangleRad(e[0],e[1],e[2]),i=Math.PI;return!(t>=i&&n<=i||t<=i&&n>=i)}var Warpable={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:getDirectionViewClassName("warpable"),render:function(r,e){var t=r.props,n=t.resizable,i=t.scalable,a=t.warpable,o=t.zoom;if(n||i||!a)return[];var s=r.state,l=s.pos1,c=s.pos2,u=s.pos3,f=s.pos4,d=getMiddleLinePos(l,c),g=getMiddleLinePos(c,l),p=getMiddleLinePos(l,u),v=getMiddleLinePos(u,l),y=getMiddleLinePos(u,f),m=getMiddleLinePos(f,u),x=getMiddleLinePos(c,f),_=getMiddleLinePos(f,c);return __spreadArray$2([e.createElement("div",{className:prefix("line"),key:"middeLine1",style:getLineStyle(d,y,o)}),e.createElement("div",{className:prefix("line"),key:"middeLine2",style:getLineStyle(g,m,o)}),e.createElement("div",{className:prefix("line"),key:"middeLine3",style:getLineStyle(p,x,o)}),e.createElement("div",{className:prefix("line"),key:"middeLine4",style:getLineStyle(v,_,o)})],__read$1(renderAllDirections(r,"warpable",e)),!1)},dragControlCondition:function(r,e){if(e.isRequest)return!1;var t=e.inputEvent.target;return hasClass$1(t,prefix("direction"))&&hasClass$1(t,prefix("warpable"))},dragControlStart:function(r,e){var t=e.datas,n=e.inputEvent,i=r.props.target,a=n.target,o=getDirection$1(a,t);if(!o||!i)return!1;var s=r.state,l=s.transformOrigin,c=s.is3d,u=s.targetTransform,f=s.targetMatrix,d=s.width,g=s.height,p=s.left,v=s.top;t.datas={},t.targetTransform=u,t.warpTargetMatrix=c?f:convertDimension(f,3,4),t.targetInverseMatrix=ignoreDimension(invert$2(t.warpTargetMatrix,4),3,4),t.direction=o,t.left=p,t.top=v,t.poses=[[0,0],[d,0],[0,g],[d,g]].map(function(x){return minus(x,l)}),t.nextPoses=t.poses.map(function(x){var _=__read$1(x,2),S=_[0],A=_[1];return calculate(t.warpTargetMatrix,[S,A,0,1],4)}),t.startValue=createIdentityMatrix(4),t.prevMatrix=createIdentityMatrix(4),t.absolutePoses=getAbsolutePosesByState(s),t.posIndexes=getPosIndexesByDirection(o),setDragStart(r,e),setDefaultTransformIndex(r,e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o};var y=fillParams(r,e,__assign$2({set:function(x){t.startValue=x}},fillTransformStartEvent(r,e))),m=triggerEvent(r,"onWarpStart",y);return m!==!1&&(t.isWarp=!0),t.isWarp},dragControl:function(r,e){var t=e.datas,n=e.isRequest,i=e.distX,a=e.distY,o=t.targetInverseMatrix,s=t.prevMatrix,l=t.isWarp,c=t.startValue,u=t.poses,f=t.posIndexes,d=t.absolutePoses;if(!l)return!1;if(resolveTransformEvent(r,e,"matrix3d"),hasGuidelines(r,"warpable")){var g=f.map(function(T){return d[T]});g.length>1&&g.push([(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2]);var p=checkMoveableSnapBounds(r,n,{horizontal:g.map(function(T){return T[1]+a}),vertical:g.map(function(T){return T[0]+i})}),v=p.horizontal,y=p.vertical;a-=v.offset,i-=y.offset}var m=getDragDist({datas:t,distX:i,distY:a},!0),x=t.nextPoses.slice();if(f.forEach(function(T){x[T]=plus(x[T],m)}),!NEARBY_POS.every(function(T){return isValidPos(T.map(function(I){return u[I]}),T.map(function(I){return x[I]}))}))return!1;var _=createWarpMatrix(u[0],u[2],u[1],u[3],x[0],x[2],x[1],x[3]);if(!_.length)return!1;var S=multiply$1(o,_,4),A=getTransfromMatrix(t,S,!0),b=multiply$1(invert$2(s,4),A,4);t.prevMatrix=A;var C=multiply$1(c,A,4),E=convertTransformFormat(t,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(A.join(", "),")"));return fillOriginalTransform(e,E),triggerEvent(r,"onWarp",fillParams(r,e,__assign$2({delta:b,matrix:C,dist:A,multiply:multiply$1,transform:E},fillCSSObject({transform:E},e)))),!0},dragControlEnd:function(r,e){var t=e.datas,n=e.isDrag;return t.isWarp?(t.isWarp=!1,triggerEvent(r,"onWarpEnd",fillEndParams(r,e,{})),n):!1}},AREA_PIECES=prefix("area-pieces"),AREA_PIECE=prefix("area-piece"),AVOID=prefix("avoid"),VIEW_DRAGGING=prefix("view-dragging");function restoreStyle(r){var e=r.areaElement;if(e){var t=r.state,n=t.width,i=t.height;removeClass(e,AVOID),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function renderPieces(r){return r.createElement("div",{key:"area_pieces",className:AREA_PIECES},r.createElement("div",{className:AREA_PIECE}),r.createElement("div",{className:AREA_PIECE}),r.createElement("div",{className:AREA_PIECE}),r.createElement("div",{className:AREA_PIECE}))}var DragArea={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(r,e){var t=r.props,n=t.target,i=t.dragArea,a=t.groupable,o=t.passDragArea,s=r.getState(),l=s.width,c=s.height,u=s.renderPoses,f=o?prefix("area","pass"):prefix("area");if(a)return[e.createElement("div",{key:"area",ref:ref(r,"areaElement"),className:f}),renderPieces(e)];if(!n||!i)return[];var d=createWarpMatrix([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),g=d.length?makeMatrixCSS(d,!0):"none";return[e.createElement("div",{key:"area",ref:ref(r,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:g}}),renderPieces(e)]},dragStart:function(r,e){var t=e.datas,n=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;t.isDragArea=!1;var o=r.areaElement,s=r.state,l=s.moveableClientRect,c=s.renderPoses,u=s.rootMatrix,f=s.is3d,d=l.left,g=l.top,p=getRect(c),v=p.left,y=p.top,m=p.width,x=p.height,_=f?4:3,S=__read$1(calculateInversePosition(u,[n-d,i-g],_),2),A=S[0],b=S[1];A-=v,b-=y;var C=[{left:v,top:y,width:m,height:b-10},{left:v,top:y,width:A-10,height:x},{left:v,top:y+b+10,width:m,height:x-b-10},{left:v+A+10,top:y,width:m-A-10,height:x}],E=[].slice.call(o.nextElementSibling.children);C.forEach(function(T,I){E[I].style.cssText="left: ".concat(T.left,"px;top: ").concat(T.top,"px; width: ").concat(T.width,"px; height: ").concat(T.height,"px;")}),addClass(o,AVOID),s.disableNativeEvent=!0},drag:function(r,e){var t=e.datas,n=e.inputEvent;if(this.enableNativeEvent(r),!n)return!1;t.isDragArea||(t.isDragArea=!0,restoreStyle(r))},dragEnd:function(r,e){this.enableNativeEvent(r);var t=e.inputEvent,n=e.datas;if(!t)return!1;n.isDragArea||restoreStyle(r)},dragGroupStart:function(r,e){return this.dragStart(r,e)},dragGroup:function(r,e){return this.drag(r,e)},dragGroupEnd:function(r,e){return this.dragEnd(r,e)},unset:function(r){restoreStyle(r),r.state.disableNativeEvent=!1},enableNativeEvent:function(r){var e=r.state;e.disableNativeEvent&&requestAnimationFrame$2(function(){e.disableNativeEvent=!1})}},Origin=makeAble("origin",{props:["origin","svgOrigin"],render:function(r,e){var t=r.props,n=t.zoom,i=t.svgOrigin,a=t.groupable,o=r.getState(),s=o.beforeOrigin,l=o.rotation,c=o.svg,u=o.allMatrix,f=o.is3d,d=o.left,g=o.top,p=o.offsetWidth,v=o.offsetHeight,y;if(!a&&c&&i){var m=__read$1(convertTransformOriginArray(i,p,v),2),x=m[0],_=m[1],S=f?4:3,A=calculatePosition(u,[x,_],S);y=getControlTransform(l,n,minus(A,[d,g]))}else y=getControlTransform(l,n,s);return[e.createElement("div",{className:prefix("control","origin"),style:y,key:"beforeOrigin"})]}});function getDefaultScrollPosition(r){var e=r.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Scrollable={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(r,e){var t=r.props,n=t.scrollContainer,i=n===void 0?r.getContainer():n,a=t.scrollOptions,o=new DragScroll$1,s=getRefTarget(i,!0);e.datas.dragScroll=o,r.state.dragScroll=o;var l=e.isControl?"controlGesto":"targetGesto",c=e.targets;o.on("scroll",function(u){var f=u.container,d=u.direction,g=fillParams(r,e,{scrollContainer:f,direction:d}),p=c?"onScrollGroup":"onScroll";c&&(g.targets=c),triggerEvent(r,p,g)}).on("move",function(u){var f=u.offsetX,d=u.offsetY,g=u.inputEvent;r[l].scrollBy(f,d,g.inputEvent,!0)}).on("scrollDrag",function(u){var f=u.next;f(r[l].getCurrentEvent())}),o.dragStart(e,__assign$2({container:s},a))},checkScroll:function(r,e){var t=e.datas.dragScroll;if(t){var n=r.props,i=n.scrollContainer,a=i===void 0?r.getContainer():i,o=n.scrollThreshold,s=o===void 0?0:o,l=n.scrollThrottleTime,c=l===void 0?0:l,u=n.getScrollPosition,f=u===void 0?getDefaultScrollPosition:u,d=n.scrollOptions;return t.drag(e,__assign$2({container:a,threshold:s,throttleTime:c,getScrollPosition:function(g){return f({scrollContainer:g.container,direction:g.direction})}},d)),!0}},drag:function(r,e){return this.checkScroll(r,e)},dragEnd:function(r,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(r,e){return this.dragStart(r,__assign$2(__assign$2({},e),{isControl:!0}))},dragControl:function(r,e){return this.drag(r,e)},dragControlEnd:function(r,e){return this.dragEnd(r,e)},dragGroupStart:function(r,e){return this.dragStart(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))},dragGroup:function(r,e){return this.drag(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))},dragGroupEnd:function(r,e){return this.dragEnd(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))},dragGroupControlStart:function(r,e){return this.dragStart(r,__assign$2(__assign$2({},e),{targets:r.props.targets,isControl:!0}))},dragGroupControl:function(r,e){return this.drag(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))},dragGroupControEnd:function(r,e){return this.dragEnd(r,__assign$2(__assign$2({},e),{targets:r.props.targets}))},unset:function(r){var e,t=r.state;(e=t.dragScroll)===null||e===void 0||e.dragEnd(),t.dragScroll=null}},Default={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","requestStyles"],events:["changeTargets"]},Padding=makeAble("padding",{props:["padding"],render:function(r,e){var t=r.props;if(t.dragArea)return[];var n=getPaddingBox(t.padding||{}),i=n.left,a=n.top,o=n.right,s=n.bottom,l=r.getState(),c=l.renderPoses,u=l.pos1,f=l.pos2,d=l.pos3,g=l.pos4,p=[u,f,d,g],v=[];return i>0&&v.push([0,2]),a>0&&v.push([0,1]),o>0&&v.push([1,3]),s>0&&v.push([2,3]),v.map(function(y,m){var x=__read$1(y,2),_=x[0],S=x[1],A=p[_],b=p[S],C=c[_],E=c[S],T=createWarpMatrix([0,0],[100,0],[0,100],[100,100],A,b,C,E);if(T.length)return e.createElement("div",{key:"padding".concat(m),className:prefix("padding"),style:{transform:makeMatrixCSS(T,!0)}})})}}),RADIUS_DIRECTIONS=["nw","ne","se","sw"];function calculateRatio(r,e){var t=r[0]+r[1],n=t>e?e/t:1;return r[0]*=n,r[1]=e-r[1]*n,r}var HORIZONTAL_RADIUS_ORDER=[1,2,5,6],VERTICAL_RADIUS_ORDER=[0,3,4,7],HORIZONTAL_RADIUS_DIRECTIONS=[1,-1,-1,1],VERTICAL_RADIUS_DIRECTIONS=[1,1,-1,-1];function getRadiusStyles(r,e,t,n,i,a,o,s){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=t),s===void 0&&(s=n);var l=[],c=!1,u=r.filter(function(d){return!d.virtual}),f=u.map(function(d){var g=d.horizontal,p=d.vertical,v=d.pos;if(p&&!c&&(c=!0,l.push("/")),c){var y=Math.max(0,p===1?v[1]-a:s-v[1]);return l.push(convertCSSSize(y,n,e)),y}else{var y=Math.max(0,g===1?v[0]-i:o-v[0]);return l.push(convertCSSSize(y,t,e)),y}});return{radiusPoses:u,styles:l,raws:f}}function getRadiusRange(r){for(var e=[0,0],t=[0,0],n=r.length,i=0;i<n;++i){var a=r[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,t[0]=i+1),a.vertical&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1))}return{horizontalRange:e,verticalRange:t}}function getRadiusValues(r,e,t,n,i,a,o){var s,l,c,u;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var f=r.indexOf("/"),d=(f>-1?r.slice(0,f):r).length,g=r.slice(0,d),p=r.slice(d+1),v=g.length,y=p.length,m=y>0,x=__read$1(g,4),_=x[0],S=_===void 0?"0px":_,A=x[1],b=A===void 0?S:A,C=x[2],E=C===void 0?S:C,T=x[3],I=T===void 0?b:T,w=__read$1(p,4),M=w[0],$=M===void 0?S:M,P=w[1],R=P===void 0?m?$:b:P,L=w[2],O=L===void 0?m?$:E:L,k=w[3],B=k===void 0?m?R:I:k,N=[S,b,E,I].map(function(j){return convertUnitSize(j,e)}),F=[$,R,O,B].map(function(j){return convertUnitSize(j,t)}),V=N.slice(),H=F.slice();s=__read$1(calculateRatio([V[0],V[1]],e),2),V[0]=s[0],V[1]=s[1],l=__read$1(calculateRatio([V[3],V[2]],e),2),V[3]=l[0],V[2]=l[1],c=__read$1(calculateRatio([H[0],H[3]],t),2),H[0]=c[0],H[3]=c[1],u=__read$1(calculateRatio([H[1],H[2]],t),2),H[1]=u[0],H[2]=u[1];var z=o?V:V.slice(0,Math.max(a[0],v)),G=o?H:H.slice(0,Math.max(a[1],y));return __spreadArray$2(__spreadArray$2([],__read$1(z.map(function(j,Y){var U=RADIUS_DIRECTIONS[Y];return{virtual:Y>=v,horizontal:HORIZONTAL_RADIUS_DIRECTIONS[Y],vertical:0,pos:[n+j,i+(VERTICAL_RADIUS_DIRECTIONS[Y]===-1?t:0)],sub:!0,raw:N[Y],direction:U}})),!1),__read$1(G.map(function(j,Y){var U=RADIUS_DIRECTIONS[Y];return{virtual:Y>=y,horizontal:0,vertical:VERTICAL_RADIUS_DIRECTIONS[Y],pos:[n+(HORIZONTAL_RADIUS_DIRECTIONS[Y]===-1?e:0),i+j],sub:!0,raw:F[Y],direction:U}})),!1)}function removeRadiusPos(r,e,t,n,i){i===void 0&&(i=e.length);var a=getRadiusRange(r.slice(n)),o=a.horizontalRange,s=a.verticalRange,l=t-n,c=0;if(l===0)c=i;else if(l>0&&l<o[1])c=o[1]-l;else if(l>=s[0])c=s[0]+s[1]-l;else return;r.splice(t,c),e.splice(t,c)}function addRadiusPos(r,e,t,n,i,a,o,s,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var f=getRadiusRange(r.slice(t)),d=f.horizontalRange,g=f.verticalRange;if(n>-1)for(var p=HORIZONTAL_RADIUS_DIRECTIONS[n]===1?a-c:s-a,v=d[1];v<=n;++v){var y=VERTICAL_RADIUS_DIRECTIONS[v]===1?u:l,m=0;if(n===v?m=a:v===0?m=c+p:HORIZONTAL_RADIUS_DIRECTIONS[v]===-1&&(m=s-(e[t][0]-c)),r.splice(t+v,0,{horizontal:HORIZONTAL_RADIUS_DIRECTIONS[v],vertical:0,pos:[m,y]}),e.splice(t+v,0,[m,y]),v===0)break}else if(i>-1){var x=VERTICAL_RADIUS_DIRECTIONS[i]===1?o-u:l-o;if(d[1]===0&&g[1]===0){var _=[c+x,u];r.push({horizontal:HORIZONTAL_RADIUS_DIRECTIONS[0],vertical:0,pos:_}),e.push(_)}for(var S=g[0],v=g[1];v<=i;++v){var m=HORIZONTAL_RADIUS_DIRECTIONS[v]===1?c:s,y=0;if(i===v?y=o:v===0?y=u+x:VERTICAL_RADIUS_DIRECTIONS[v]===1?y=e[t+S][1]:VERTICAL_RADIUS_DIRECTIONS[v]===-1&&(y=l-(e[t+S][1]-u)),r.push({horizontal:0,vertical:VERTICAL_RADIUS_DIRECTIONS[v],pos:[m,y]}),e.push([m,y]),v===0)break}}}function splitRadiusPoses(r,e){e===void 0&&(e=r.map(function(i){return i.raw}));var t=r.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),n=r.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:t,verticals:n}}var CLIP_DIRECTIONS=[[0,-1,"n"],[1,0,"e"]],CLIP_RECT_DIRECTIONS=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function getClipStyles(r,e,t){var n=r.props.clipRelative,i=r.state,a=i.width,o=i.height,s=e,l=s.type,c=s.poses,u=l==="rect",f=l==="circle";if(l==="polygon")return t.map(function(b){return"".concat(convertCSSSize(b[0],a,n)," ").concat(convertCSSSize(b[1],o,n))});if(u||l==="inset"){var d=t[1][1],g=t[3][0],p=t[7][0],v=t[5][1];if(u)return[d,g,v,p].map(function(b){return"".concat(b,"px")});var y=[d,a-g,o-v,p].map(function(b,C){return convertCSSSize(b,C%2?a:o,n)});if(t.length>8){var m=__read$1(minus(t[4],t[0]),2),x=m[0],_=m[1];y.push.apply(y,__spreadArray$2(["round"],__read$1(getRadiusStyles(c.slice(8).map(function(b,C){return __assign$2(__assign$2({},b),{pos:t[C]})}),n,x,_,p,d,g,v).styles),!1))}return y}else if(f||l==="ellipse"){var S=t[0],A=convertCSSSize(abs(t[1][1]-S[1]),f?Math.sqrt((a*a+o*o)/2):o,n),y=f?[A]:[convertCSSSize(abs(t[2][0]-S[0]),a,n),A];return y.push("at",convertCSSSize(S[0],a,n),convertCSSSize(S[1],o,n)),y}}function getRectPoses(r,e,t,n){var i=[n,(n+e)/2,e],a=[r,(r+t)/2,t];return CLIP_RECT_DIRECTIONS.map(function(o){var s=__read$1(o,3),l=s[0],c=s[1],u=s[2],f=i[l+1],d=a[c+1];return{vertical:abs(c),horizontal:abs(l),direction:u,pos:[f,d]}})}function getControlSize(r){var e=[1/0,-1/0],t=[1/0,-1/0];return r.forEach(function(n){var i=n.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),t[0]=Math.min(t[0],i[1]),t[1]=Math.max(t[1],i[1])}),[abs(e[1]-e[0]),abs(t[1]-t[0])]}function getClipPath(r,e,t,n,i){var a,o,s,l,c,u,f,d,g;if(r){var p=i;if(!p){var v=getCachedStyle(r),y=v("clipPath");p=y!=="none"?y:v("clip")}if(!((!p||p==="none"||p==="auto")&&(p=n,!p))){var m=splitBracket(p),x=m.prefix,_=x===void 0?p:x,S=m.value,A=S===void 0?"":S,b=_==="circle",C=" ";if(_==="polygon"){var E=splitComma(A||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var T=E.map(function(lt){var ut=__read$1(lt.split(" "),2),ct=ut[0],ot=ut[1];return{vertical:1,horizontal:1,pos:[convertUnitSize(ct,e),convertUnitSize(ot,t)]}}),I=getMinMaxs(T.map(function(lt){return lt.pos}));return{type:_,clipText:p,poses:T,splitter:C,left:I.minX,right:I.maxX,top:I.minY,bottom:I.maxY}}else if(b||_==="ellipse"){var w="",M="",$=0,P=0,E=splitSpace(A);if(b){var R="";a=__read$1(E,4),o=a[0],R=o===void 0?"50%":o,s=a[2],w=s===void 0?"50%":s,l=a[3],M=l===void 0?"50%":l,$=convertUnitSize(R,Math.sqrt((e*e+t*t)/2)),P=$}else{var L="",O="";c=__read$1(E,5),u=c[0],L=u===void 0?"50%":u,f=c[1],O=f===void 0?"50%":f,d=c[3],w=d===void 0?"50%":d,g=c[4],M=g===void 0?"50%":g,$=convertUnitSize(L,e),P=convertUnitSize(O,t)}var k=[convertUnitSize(w,e),convertUnitSize(M,t)],T=__spreadArray$2([{vertical:1,horizontal:1,pos:k,direction:"nesw"}],__read$1(CLIP_DIRECTIONS.slice(0,b?1:2).map(function(ct){return{vertical:abs(ct[1]),horizontal:ct[0],direction:ct[2],sub:!0,pos:[k[0]+ct[0]*$,k[1]+ct[1]*P]}})),!1);return{type:_,clipText:p,radiusX:$,radiusY:P,left:k[0]-$,top:k[1]-P,right:k[0]+$,bottom:k[1]+P,poses:T,splitter:C}}else if(_==="inset"){var E=splitSpace(A||"0 0 0 0"),B=E.indexOf("round"),N=(B>-1?E.slice(0,B):E).length,F=E.slice(N+1),V=__read$1(E.slice(0,N),4),H=V[0],z=V[1],G=z===void 0?H:z,j=V[2],Y=j===void 0?H:j,U=V[3],K=U===void 0?G:U,q=__read$1([H,Y].map(function(ct){return convertUnitSize(ct,t)}),2),W=q[0],X=q[1],tt=__read$1([K,G].map(function(ct){return convertUnitSize(ct,e)}),2),Z=tt[0],J=tt[1],Q=e-J,rt=t-X,it=getRadiusValues(F,Q-Z,rt-W,Z,W),T=__spreadArray$2(__spreadArray$2([],__read$1(getRectPoses(W,Q,rt,Z)),!1),__read$1(it),!1);return{type:"inset",clipText:p,poses:T,top:W,left:Z,right:Q,bottom:rt,radius:F,splitter:C}}else if(_==="rect"){var E=splitComma(A||"0px, ".concat(e,"px, ").concat(t,"px, 0px"));C=",";var et=__read$1(E.map(function(dt){var gt=splitUnit(dt).value;return gt}),4),nt=et[0],J=et[1],X=et[2],Z=et[3],T=getRectPoses(nt,J,X,Z);return{type:"rect",clipText:p,poses:T,top:nt,right:J,bottom:X,left:Z,values:E,splitter:C}}}}}function moveControlPos(r,e,t,n,i){var a=r[e],o=a.direction,s=a.sub,l=r.map(function(){return[0,0]}),c=o?o.split(""):[];if(n&&e<8){var u=c.filter(function($){return $==="w"||$==="e"}),f=c.filter(function($){return $==="n"||$==="s"}),d=u[0],g=f[0];l[e]=t;var p=__read$1(getControlSize(r),2),v=p[0],y=p[1],m=v&&y?v/y:0;if(m&&i){var x=(e+4)%8,_=r[x].pos,S=[0,0];o.indexOf("w")>-1?S[0]=-1:o.indexOf("e")>-1&&(S[0]=1),o.indexOf("n")>-1?S[1]=-1:o.indexOf("s")>-1&&(S[1]=1);var A=getSizeDistByDist([v,y],t,m,S,!0),b=v+A[0],C=y+A[1],E=_[1],T=_[1],I=_[0],w=_[0];S[0]===-1?I=w-b:S[0]===1?w=I+b:(I=I-b/2,w=w+b/2),S[1]===-1?E=T-C:(S[1]===1||(E=T-C/2),T=E+C);var M=getRectPoses(E,w,T,I);r.forEach(function($,P){l[P][0]=M[P].pos[0]-$.pos[0],l[P][1]=M[P].pos[1]-$.pos[1]})}else r.forEach(function($,P){var R=$.direction;R&&(R.indexOf(d)>-1&&(l[P][0]=t[0]),R.indexOf(g)>-1&&(l[P][1]=t[1]))}),d&&(l[1][0]=t[0]/2,l[5][0]=t[0]/2),g&&(l[3][1]=t[1]/2,l[7][1]=t[1]/2)}else o&&!s?c.forEach(function($){var P=$==="n"||$==="s";r.forEach(function(R,L){var O=R.direction,k=R.horizontal,B=R.vertical;!O||O.indexOf($)===-1||(l[L]=[P||!k?0:t[0],!P||!B?0:t[1]])})}):l[e]=t;return l}function addClipPath(r,e){var t=__read$1(calculatePointerDist(r,e),2),n=t[0],i=t[1],a=e.datas,o=a.clipPath,s=a.clipIndex,l=o,c=l.type,u=l.poses,f=l.splitter,d=u.map(function(x){return x.pos});if(c==="polygon")d.splice(s,0,[n,i]);else if(c==="inset"){var g=HORIZONTAL_RADIUS_ORDER.indexOf(s),p=VERTICAL_RADIUS_ORDER.indexOf(s),v=u.length;if(addRadiusPos(u,d,8,g,p,n,i,d[4][0],d[4][1],d[0][0],d[0][1]),v===u.length)return}else return;var y=getClipStyles(r,o,d),m="".concat(c,"(").concat(y.join(f),")");triggerEvent(r,"onClip",fillParams(r,e,__assign$2({clipEventType:"added",clipType:c,poses:d,clipStyles:y,clipStyle:m,distX:0,distY:0},fillCSSObject({clipPath:m},e))))}function removeClipPath(r,e){var t=e.datas,n=t.clipPath,i=t.clipIndex,a=n,o=a.type,s=a.poses,l=a.splitter,c=s.map(function(g){return g.pos}),u=c.length;if(o==="polygon")s.splice(i,1),c.splice(i,1);else if(o==="inset"){if(i<8||(removeRadiusPos(s,c,i,8,u),u===s.length))return}else return;var f=getClipStyles(r,n,c),d="".concat(o,"(").concat(f.join(l),")");triggerEvent(r,"onClip",fillParams(r,e,__assign$2({clipEventType:"removed",clipType:o,poses:c,clipStyles:f,clipStyle:d,distX:0,distY:0},fillCSSObject({clipPath:d},e))))}var Clippable={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(r,e){var t=r.props,n=t.customClipPath,i=t.defaultClipPath,a=t.clipArea,o=t.zoom,s=t.groupable,l=r.getState(),c=l.target,u=l.width,f=l.height,d=l.allMatrix,g=l.is3d,p=l.left,v=l.top,y=l.pos1,m=l.pos2,x=l.pos3,_=l.pos4,S=l.clipPathState,A=l.snapBoundInfos,b=l.rotation;if(!c||s)return[];var C=getClipPath(c,u,f,i||"inset",S||n);if(!C)return[];var E=g?4:3,T=C.type,I=C.poses,w=I.map(function(J){var Q=calculatePosition(d,J.pos,E);return[Q[0]-p,Q[1]-v]}),M=[],$=[],P=T==="rect",R=T==="inset",L=T==="polygon";if(P||R||L){var O=R?w.slice(0,8):w;$=O.map(function(J,Q){var rt=Q===0?O[O.length-1]:O[Q-1],it=getRad$1(rt,J),et=getDiagonalSize(rt,J);return e.createElement("div",{key:"clipLine".concat(Q),className:prefix("line","clip-line","snap-control"),"data-clip-index":Q,style:{width:"".concat(et,"px"),transform:"translate(".concat(rt[0],"px, ").concat(rt[1],"px) rotate(").concat(it,"rad) scaleY(").concat(o,")")}})})}if(M=w.map(function(J,Q){return e.createElement("div",{key:"clipControl".concat(Q),className:prefix("control","clip-control","snap-control"),"data-clip-index":Q,style:{transform:"translate(".concat(J[0],"px, ").concat(J[1],"px) rotate(").concat(b,"rad) scale(").concat(o,")")}})}),R&&M.push.apply(M,__spreadArray$2([],__read$1(w.slice(8).map(function(J,Q){return e.createElement("div",{key:"clipRadiusControl".concat(Q),className:prefix("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Q,style:{transform:"translate(".concat(J[0],"px, ").concat(J[1],"px) rotate(").concat(b,"rad) scale(").concat(o,")")}})})),!1)),T==="circle"||T==="ellipse"){var k=C.left,B=C.top,N=C.radiusX,F=C.radiusY,V=__read$1(minus(calculatePosition(d,[k,B],E),calculatePosition(d,[0,0],E)),2),H=V[0],z=V[1],G="none";if(!a){for(var j=Math.max(10,N/5,F/5),Y=[],U=0;U<=j;++U){var K=Math.PI*2/j*U;Y.push([N+(N-o)*Math.cos(K),F+(F-o)*Math.sin(K)])}Y.push([N,-2]),Y.push([-2,-2]),Y.push([-2,F*2+2]),Y.push([N*2+2,F*2+2]),Y.push([N*2+2,-2]),Y.push([N,-2]),G="polygon(".concat(Y.map(function(J){return"".concat(J[0],"px ").concat(J[1],"px")}).join(", "),")")}M.push(e.createElement("div",{key:"clipEllipse",className:prefix("clip-ellipse","snap-control"),style:{width:"".concat(N*2,"px"),height:"".concat(F*2,"px"),clipPath:G,transform:"translate(".concat(-p+H,"px, ").concat(-v+z,"px) ").concat(makeMatrixCSS(d))}}))}if(a){var q=getRect(__spreadArray$2([y,m,x,_],__read$1(w),!1)),W=q.width,X=q.height,tt=q.left,Z=q.top;if(L||P||R){var Y=R?w.slice(0,8):w;M.push(e.createElement("div",{key:"clipArea",className:prefix("clip-area","snap-control"),style:{width:"".concat(W,"px"),height:"".concat(X,"px"),transform:"translate(".concat(tt,"px, ").concat(Z,"px)"),clipPath:"polygon(".concat(Y.map(function(Q){return"".concat(Q[0]-tt,"px ").concat(Q[1]-Z,"px")}).join(", "),")")}}))}}return A&&["vertical","horizontal"].forEach(function(J){var Q=A[J],rt=J==="horizontal";Q.isSnap&&$.push.apply($,__spreadArray$2([],__read$1(Q.snap.posInfos.map(function(it,et){var nt=it.pos,lt=minus(calculatePosition(d,rt?[0,nt]:[nt,0],E),[p,v]),ut=minus(calculatePosition(d,rt?[u,nt]:[nt,f],E),[p,v]);return renderLine(e,"",lt,ut,o,"clip".concat(J,"snap").concat(et),"guideline")})),!1)),Q.isBound&&$.push.apply($,__spreadArray$2([],__read$1(Q.bounds.map(function(it,et){var nt=it.pos,lt=minus(calculatePosition(d,rt?[0,nt]:[nt,0],E),[p,v]),ut=minus(calculatePosition(d,rt?[u,nt]:[nt,f],E),[p,v]);return renderLine(e,"",lt,ut,o,"clip".concat(J,"bounds").concat(et),"guideline","bounds","bold")})),!1))}),__spreadArray$2(__spreadArray$2([],__read$1(M),!1),__read$1($),!1)},dragControlCondition:function(r,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(r,e){var t=r.props,n=t.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(r,e)},drag:function(r,e){return this.dragControl(r,__assign$2(__assign$2({},e),{isDragTarget:!0}))},dragEnd:function(r,e){return this.dragControlEnd(r,e)},dragControlStart:function(r,e){var t=r.state,n=r.props,i=n.defaultClipPath,a=n.customClipPath,o=t.target,s=t.width,l=t.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",f=e.datas,d=getClipPath(o,s,l,i||"inset",a);if(!d)return!1;var g=d.clipText,p=d.type,v=d.poses,y=triggerEvent(r,"onClipStart",fillParams(r,e,{clipType:p,clipStyle:g,poses:v.map(function(m){return m.pos})}));return y===!1?(f.isClipStart=!1,!1):(f.isControl=u&&u.indexOf("clip-control")>-1,f.isLine=u.indexOf("clip-line")>-1,f.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,f.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,t.clipPathState=g,setDragStart(r,e),!0)},dragControl:function(r,e){var t,n,i,a=e.datas,o=e.originalDatas,s=e.isDragTarget;if(!a.isClipStart)return!1;var l=a,c=l.isControl,u=l.isLine,f=l.isArea,d=l.clipIndex,g=l.clipPath;if(!g)return!1;var p=getProps(r.props,"clippable"),v=p.keepRatio,y=0,m=0,x=o.draggable,_=getDragDist(e);s&&x?(t=__read$1(x.prevBeforeDist,2),y=t[0],m=t[1]):(n=__read$1(_,2),y=n[0],m=n[1]);var S=[y,m],A=r.state,b=A.width,C=A.height,E=!f&&!c&&!u,T=g.type,I=g.poses,w=g.splitter,M=I.map(function(at){return at.pos});E&&(y=-y,m=-m);var $=!c||I[d].direction==="nesw",P=T==="inset"||T==="rect",R=I.map(function(){return[0,0]});if(c&&!$){var L=I[d],O=L.horizontal,k=L.vertical,B=[y*abs(O),m*abs(k)];R=moveControlPos(I,d,B,P,v)}else $&&(R=M.map(function(){return[y,m]}));var N=M.map(function(at,ft){return plus(at,R[ft])}),F=__spreadArray$2([],__read$1(N),!1);A.snapBoundInfos=null;var V=g.type==="circle",H=g.type==="ellipse";if(V||H){var z=getRect(N),G=abs(z.bottom-z.top),j=abs(H?z.right-z.left:G),Y=N[0][1]+G,U=N[0][0]-j,K=N[0][0]+j;V&&(F.push([K,z.bottom]),R.push([1,0])),F.push([z.left,Y]),R.push([0,1]),F.push([U,z.bottom]),R.push([1,0])}var q=getDefaultGuidelines((p.clipHorizontalGuidelines||[]).map(function(at){return convertUnitSize("".concat(at),C)}),(p.clipVerticalGuidelines||[]).map(function(at){return convertUnitSize("".concat(at),b)}),b,C),W=[],X=[];if(V||H)W=[F[4][0],F[2][0]],X=[F[1][1],F[3][1]];else if(P){var tt=[F[0],F[2],F[4],F[6]],Z=[R[0],R[2],R[4],R[6]];W=tt.filter(function(at,ft){return Z[ft][0]}).map(function(at){return at[0]}),X=tt.filter(function(at,ft){return Z[ft][1]}).map(function(at){return at[1]})}else W=F.filter(function(at,ft){return R[ft][0]}).map(function(at){return at[0]}),X=F.filter(function(at,ft){return R[ft][1]}).map(function(at){return at[1]});var J=[0,0],Q=checkSnapBounds(q,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:C},W,X,5),rt=Q.horizontal,it=Q.vertical,et=rt.offset,nt=it.offset;if(rt.isBound&&(J[1]+=et),it.isBound&&(J[0]+=nt),(H||V)&&R[0][0]===0&&R[0][1]===0){var z=getRect(N),lt=z.bottom-z.top,ut=H?z.right-z.left:lt,ct=it.isBound?abs(nt):it.snapIndex===0?-nt:nt,ot=rt.isBound?abs(et):rt.snapIndex===0?-et:et;ut-=ct,lt-=ot,V&&(lt=checkSnapBoundPriority(it,rt)>0?lt:ut,ut=lt);var st=F[0];F[1][1]=st[1]-lt,F[2][0]=st[0]+ut,F[3][1]=st[1]+lt,F[4][0]=st[0]-ut}else if(P&&v&&c){var dt=__read$1(getControlSize(I),2),gt=dt[0],At=dt[1],bt=gt&&At?gt/At:0,Mt=I[d],pt=Mt.direction||"",mt=F[1][1],Y=F[5][1],U=F[7][0],K=F[3][0];abs(et)<=abs(nt)?et=sign(et)*abs(nt)/bt:nt=sign(nt)*abs(et)*bt,pt.indexOf("w")>-1?U-=nt:pt.indexOf("e")>-1?K-=nt:(U+=nt/2,K-=nt/2),pt.indexOf("n")>-1?mt-=et:pt.indexOf("s")>-1?Y-=et:(mt+=et/2,Y-=et/2);var wt=getRectPoses(mt,K,Y,U);F.forEach(function(Tt,Pt){var St;St=__read$1(wt[Pt].pos,2),Tt[0]=St[0],Tt[1]=St[1]})}else F.forEach(function(at,ft){var Et=R[ft];Et[0]&&(at[0]-=nt),Et[1]&&(at[1]-=et)});var Ct=getClipStyles(r,g,N),xt="".concat(T,"(").concat(Ct.join(w),")");if(A.clipPathState=xt,V||H)W=[F[4][0],F[2][0]],X=[F[1][1],F[3][1]];else if(P){var tt=[F[0],F[2],F[4],F[6]];W=tt.map(function(ft){return ft[0]}),X=tt.map(function(ft){return ft[1]})}else W=F.map(function(at){return at[0]}),X=F.map(function(at){return at[1]});if(A.snapBoundInfos=checkSnapBounds(q,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:C},W,X,1),x){var $t=A.is3d,Dt=A.allMatrix,Lt=$t?4:3,_t=J;s&&(_t=[S[0]+J[0]-_[0],S[1]+J[1]-_[1]]),x.deltaOffset=multiply$1(Dt,[_t[0],_t[1],0,0],Lt)}return triggerEvent(r,"onClip",fillParams(r,e,__assign$2({clipEventType:"changed",clipType:T,poses:N,clipStyle:xt,clipStyles:Ct,distX:y,distY:m},fillCSSObject((i={},i[T==="rect"?"clip":"clipPath"]=xt,i),e)))),!0},dragControlEnd:function(r,e){this.unset(r);var t=e.isDrag,n=e.datas,i=e.isDouble,a=n.isLine,o=n.isClipStart,s=n.isControl;return o?(triggerEvent(r,"onClipEnd",fillEndParams(r,e,{})),i&&(s?removeClipPath(r,e):a&&addClipPath(r,e)),i||t):!1},unset:function(r){r.state.clipPathState="",r.state.snapBoundInfos=null}},OriginDraggable={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(r,e){return e.isRequest?e.requestAble==="originDraggable":hasClass$1(e.inputEvent.target,prefix("origin"))},dragControlStart:function(r,e){var t=e.datas;setDragStart(r,e);var n=fillParams(r,e,{dragStart:Draggable.dragStart(r,new CustomGesto().dragStart([0,0],e))}),i=triggerEvent(r,"onDragOriginStart",n);return t.startOrigin=r.state.transformOrigin,t.startTargetOrigin=r.state.targetOrigin,t.prevOrigin=[0,0],t.isDragOrigin=!0,i===!1?(t.isDragOrigin=!1,!1):n},dragControl:function(r,e){var t=e.datas,n=e.isPinch,i=e.isRequest;if(!t.isDragOrigin)return!1;var a=__read$1(getDragDist(e),2),o=a[0],s=a[1],l=r.state,c=l.width,u=l.height,f=l.offsetMatrix,d=l.targetMatrix,g=l.is3d,p=r.props.originRelative,v=p===void 0?!0:p,y=g?4:3,m=[o,s];if(i){var x=e.distOrigin;(x[0]||x[1])&&(m=x)}var _=plus(t.startOrigin,m),S=plus(t.startTargetOrigin,m),A=minus(m,t.prevOrigin),b=getNextMatrix(f,d,_,y),C=r.getRect(),E=getRect(calculatePoses(b,c,u,y)),T=[C.left-E.left,C.top-E.top];t.prevOrigin=m;var I=[convertCSSSize(S[0],c,v),convertCSSSize(S[1],u,v)].join(" "),w=Draggable.drag(r,setCustomDrag(e,r.state,T,!!n,!1)),M=fillParams(r,e,__assign$2(__assign$2({width:c,height:u,origin:_,dist:m,delta:A,transformOrigin:I,drag:w},fillCSSObject({transformOrigin:I,transform:w.transform},e)),{afterTransform:w.transform}));return triggerEvent(r,"onDragOrigin",M),M},dragControlEnd:function(r,e){var t=e.datas;return t.isDragOrigin?(triggerEvent(r,"onDragOriginEnd",fillEndParams(r,e,{})),!0):!1},dragGroupControlCondition:function(r,e){return this.dragControlCondition(r,e)},dragGroupControlStart:function(r,e){var t=this.dragControlStart(r,e);return!!t},dragGroupControl:function(r,e){var t=this.dragControl(r,e);return t?(r.transformOrigin=t.transformOrigin,!0):!1},request:function(r){var e={},t=r.getRect(),n=0,i=0,a=t.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-a[0],o[1]=s.origin[1]-a[1]):("x"in s?n=s.x-t.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?i=s.y-t.top:"deltaY"in s&&(i+=s.deltaY)),{datas:e,distX:n,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function addBorderRadiusByLine(r,e,t,n){var i=r.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,a=r.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!r[o].virtual)){var s=r[o];addBorderRadius(r,o),o<4?s.pos[0]=t:s.pos[1]=n}}function addBorderRadius(r,e){e<4?r.slice(0,e+1).forEach(function(t){t.virtual=!1}):(r[0].virtual&&(r[0].virtual=!1),r.slice(4,e+1).forEach(function(t){t.virtual=!1}))}function removeBorderRadius(r,e){e<4?r.slice(e,4).forEach(function(t){t.virtual=!0}):r.slice(e).forEach(function(t){t.virtual=!0})}function getBorderRadius(r,e,t,n,i){n===void 0&&(n=[0,0]);var a=[];return!r||r==="0px"?a=[]:a=splitSpace(r),getRadiusValues(a,e,t,0,0,n,i)}function triggerRoundEvent(r,e,t,n,i){var a=r.state,o=a.width,s=a.height,l=getRadiusStyles(i,r.props.roundRelative,o,s),c=l.raws,u=l.styles,f=l.radiusPoses,d=splitRadiusPoses(f,c),g=d.horizontals,p=d.verticals,v=u.join(" ");a.borderRadiusState=v;var y=fillParams(r,e,__assign$2({horizontals:g,verticals:p,borderRadius:v,width:o,height:s,delta:n,dist:t},fillCSSObject({borderRadius:v},e)));return triggerEvent(r,"onRound",y),y}function getStyleBorderRadius(r){var e,t,n=r.getState().style,i=n.borderRadius||"";if(!i&&r.props.groupable){var a=r.moveables[0],o=r.getTargets()[0];o&&((a==null?void 0:a.props.target)===o?(i=(t=(e=r.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&t!==void 0?t:"",n.borderRadius=i):(i=getComputedStyle$1(o).borderRadius,n.borderRadius=i))}return i}var Roundable={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(r){var e=r.props.roundClickable;return e===!0||e==="line"?prefix("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(r,e){var t=r.getState(),n=t.target,i=t.width,a=t.height,o=t.allMatrix,s=t.is3d,l=t.left,c=t.top,u=t.borderRadiusState,f=r.props,d=f.minRoundControls,g=d===void 0?[0,0]:d,p=f.maxRoundControls,v=p===void 0?[4,4]:p,y=f.zoom,m=f.roundPadding,x=m===void 0?0:m,_=f.isDisplayShadowRoundControls,S=f.groupable;if(!n)return null;var A=u||getStyleBorderRadius(r),b=s?4:3,C=getBorderRadius(A,i,a,g,!0);if(!C)return null;var E=0,T=0,I=S?[0,0]:[l,c];return C.map(function(w,M){var $=w.horizontal,P=w.vertical,R=w.direction||"",L=__spreadArray$2([],__read$1(w.pos),!1);T+=Math.abs($),E+=Math.abs(P),$&&R.indexOf("n")>-1&&(L[1]-=x),P&&R.indexOf("w")>-1&&(L[0]-=x),$&&R.indexOf("s")>-1&&(L[1]+=x),P&&R.indexOf("e")>-1&&(L[0]+=x);var O=minus(calculatePosition(o,L,b),I),k=w.vertical?E<=v[1]&&(_||!w.virtual):T<=v[0]&&(_||!w.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(M),className:prefix("control","border-radius",w.vertical?"vertical":"",w.virtual?"virtual":""),"data-radius-index":M,style:{display:k?"block":"none",transform:"translate(".concat(O[0],"px, ").concat(O[1],"px) scale(").concat(y,")")}})})},dragControlCondition:function(r,e){if(!e.inputEvent||e.isRequest)return!1;var t=e.inputEvent.target.getAttribute("class")||"";return t.indexOf("border-radius")>-1||t.indexOf("moveable-line")>-1&&t.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(r,e){return this.dragControlCondition(r,e)},dragControlStart:function(r,e){var t=e.inputEvent,n=e.datas,i=t.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,l=o?parseInt(i.getAttribute("data-radius-index"),10):-1,c=-1;if(s){var u=i.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!o&&!s)return!1;var f=fillParams(r,e,{}),d=triggerEvent(r,"onRoundStart",f);if(d===!1)return!1;n.lineIndex=c,n.controlIndex=l,n.isControl=o,n.isLine=s,setDragStart(r,e);var g=r.props,p=g.roundRelative,v=g.minRoundControls,y=v===void 0?[0,0]:v,m=r.state,x=m.width,_=m.height;n.isRound=!0,n.prevDist=[0,0];var S=getStyleBorderRadius(r),A=getBorderRadius(S||"",x,_,y,!0)||[];return n.controlPoses=A,m.borderRadiusState=getRadiusStyles(A,p,x,_).styles.join(" "),f},dragControl:function(r,e){var t=e.datas,n=t.controlPoses;if(!t.isRound||!t.isControl||!n.length)return!1;var i=t.controlIndex,a=__read$1(getDragDist(e),2),o=a[0],s=a[1],l=[o,s],c=minus(l,t.prevDist),u=r.props.maxRoundControls,f=u===void 0?[4,4]:u,d=r.state,g=d.width,p=d.height,v=n[i],y=v.vertical,m=v.horizontal,x=n.map(function(S){var A=S.horizontal,b=S.vertical,C=[A*m*l[0],b*y*l[1]];if(A){if(f[0]===1)return C;if(f[0]<4&&A!==m)return C}else{if(f[1]===0)return C[1]=b*m*l[0]/g*p,C;if(y){if(f[1]===1)return C;if(f[1]<4&&b!==y)return C}}return[0,0]});x[i]=l;var _=n.map(function(S,A){return __assign$2(__assign$2({},S),{pos:plus(S.pos,x[A])})});return i<4?_.slice(0,i+1).forEach(function(S){S.virtual=!1}):_.slice(4,i+1).forEach(function(S){S.virtual=!1}),t.prevDist=[o,s],triggerRoundEvent(r,e,l,c,_)},dragControlEnd:function(r,e){var t=r.state;t.borderRadiusState="";var n=e.datas,i=e.isDouble;if(!n.isRound)return!1;var a=n.isControl,o=n.controlIndex,s=n.isLine,l=n.lineIndex,c=n.controlPoses,u=c.filter(function(m){var x=m.virtual;return x}).length,f=r.props.roundClickable,d=f===void 0?!0:f;if(i&&d){if(a&&(d===!0||d==="control"))removeBorderRadius(c,o);else if(s&&(d===!0||d==="line")){var g=__read$1(calculatePointerDist(r,e),2),p=g[0],v=g[1];addBorderRadiusByLine(c,l,p,v)}u!==c.filter(function(m){var x=m.virtual;return x}).length&&triggerRoundEvent(r,e,[0,0],[0,0],c)}var y=fillEndParams(r,e,{});return triggerEvent(r,"onRoundEnd",y),t.borderRadiusState="",y},dragGroupControlStart:function(r,e){var t=this.dragControlStart(r,e);if(!t)return!1;var n=r.moveables,i=r.props.targets,a=fillChildEvents(r,"roundable",e),o=__assign$2({targets:r.props.targets,events:a.map(function(s,l){return __assign$2(__assign$2({},s),{target:i[l],moveable:n[l],currentTarget:n[l]})})},t);return triggerEvent(r,"onRoundGroupStart",o),t},dragGroupControl:function(r,e){var t=this.dragControl(r,e);if(!t)return!1;var n=r.moveables,i=r.props.targets,a=fillChildEvents(r,"roundable",e),o=__assign$2({targets:r.props.targets,events:a.map(function(s,l){return __assign$2(__assign$2(__assign$2({},s),{target:i[l],moveable:n[l],currentTarget:n[l]}),fillCSSObject({borderRadius:t.borderRadius},s))})},t);return triggerEvent(r,"onRoundGroup",o),o},dragGroupControlEnd:function(r,e){var t=r.moveables,n=r.props.targets,i=fillChildEvents(r,"roundable",e);catchEvent(r,"onRound",function(s){var l=__assign$2({targets:r.props.targets,events:i.map(function(c,u){return __assign$2(__assign$2(__assign$2({},c),{target:n[u],moveable:t[u],currentTarget:t[u]}),fillCSSObject({borderRadius:s.borderRadius},c))})},s);triggerEvent(r,"onRoundGroup",l)});var a=this.dragControlEnd(r,e);if(!a)return!1;var o=__assign$2({targets:r.props.targets,events:i.map(function(s,l){var c;return __assign$2(__assign$2({},s),{target:n[l],moveable:t[l],currentTarget:t[l],lastEvent:(c=s.datas)===null||c===void 0?void 0:c.lastEvent})})},a);return triggerEvent(r,"onRoundGroupEnd",o),o},unset:function(r){r.state.borderRadiusState=""}};function isIdentityMatrix(r,e){var t=e?4:3,n=createIdentityMatrix(t),i="matrix".concat(e?"3d":"","(").concat(n.join(","),")");return r===i||r==="matrix(1,0,0,1,0,0)"}var BeforeRenderable={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(r,e){var t=r.state,n=t.is3d,i=t.targetMatrix,a=t.inlineTransform,o=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(convertMatrixtoCSS(i,!0),")"),s=!a||a==="none"?o:a;e.datas.startTransforms=isIdentityMatrix(s,n)?[]:splitSpace(s)},resetStyle:function(r){var e=r.datas;e.nextStyle={},e.nextTransforms=r.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(r,e){return fillParams(r,e,{setTransform:function(t){e.datas.startTransforms=isArray$4(t)?t:splitSpace(t)},isPinch:!!e.isPinch})},fillDragParams:function(r,e){return fillParams(r,e,{isPinch:!!e.isPinch})},dragStart:function(r,e){this.setTransform(r,e),this.resetStyle(e),triggerEvent(r,"onBeforeRenderStart",this.fillDragStartParams(r,e))},drag:function(r,e){e.datas.startTransforms||this.setTransform(r,e),this.resetStyle(e),triggerEvent(r,"onBeforeRender",fillParams(r,e,{isPinch:!!e.isPinch}))},dragEnd:function(r,e){e.datas.startTransforms||(this.setTransform(r,e),this.resetStyle(e)),triggerEvent(r,"onBeforeRenderEnd",fillParams(r,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(r,e){var t=this;this.dragStart(r,e);var n=fillChildEvents(r,"beforeRenderable",e),i=r.moveables,a=n.map(function(o,s){var l=i[s];return t.setTransform(l,o),t.resetStyle(o),t.fillDragStartParams(l,o)});triggerEvent(r,"onBeforeRenderGroupStart",fillParams(r,e,{isPinch:!!e.isPinch,targets:r.props.targets,setTransform:function(){},events:a}))},dragGroup:function(r,e){var t=this;this.drag(r,e);var n=fillChildEvents(r,"beforeRenderable",e),i=r.moveables,a=n.map(function(o,s){var l=i[s];return t.resetStyle(o),t.fillDragParams(l,o)});triggerEvent(r,"onBeforeRenderGroup",fillParams(r,e,{isPinch:!!e.isPinch,targets:r.props.targets,events:a}))},dragGroupEnd:function(r,e){this.dragEnd(r,e),triggerEvent(r,"onBeforeRenderGroupEnd",fillParams(r,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:r.props.targets}))},dragControlStart:function(r,e){return this.dragStart(r,e)},dragControl:function(r,e){return this.drag(r,e)},dragControlEnd:function(r,e){return this.dragEnd(r,e)},dragGroupControlStart:function(r,e){return this.dragGroupStart(r,e)},dragGroupControl:function(r,e){return this.dragGroup(r,e)},dragGroupControlEnd:function(r,e){return this.dragGroupEnd(r,e)}},Renderable={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(r,e){triggerEvent(r,"onRenderStart",fillParams(r,e,{isPinch:!!e.isPinch}))},drag:function(r,e){triggerEvent(r,"onRender",this.fillDragParams(r,e))},dragAfter:function(r,e){return this.drag(r,e)},dragEnd:function(r,e){triggerEvent(r,"onRenderEnd",this.fillDragEndParams(r,e))},dragGroupStart:function(r,e){triggerEvent(r,"onRenderGroupStart",fillParams(r,e,{isPinch:!!e.isPinch,targets:r.props.targets}))},dragGroup:function(r,e){var t=this,n=fillChildEvents(r,"beforeRenderable",e),i=r.moveables,a=n.map(function(o,s){var l=i[s];return t.fillDragParams(l,o)});triggerEvent(r,"onRenderGroup",fillParams(r,e,__assign$2(__assign$2({isPinch:!!e.isPinch,targets:r.props.targets,transform:getNextTransformText(e),transformObject:{}},fillCSSObject(getNextStyle(e))),{events:a})))},dragGroupEnd:function(r,e){var t=this,n=fillChildEvents(r,"beforeRenderable",e),i=r.moveables,a=n.map(function(o,s){var l=i[s];return t.fillDragEndParams(l,o)});triggerEvent(r,"onRenderGroupEnd",fillParams(r,e,__assign$2({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:r.props.targets,events:a,transformObject:{},transform:getNextTransformText(e)},fillCSSObject(getNextStyle(e)))))},dragControlStart:function(r,e){return this.dragStart(r,e)},dragControl:function(r,e){return this.drag(r,e)},dragControlAfter:function(r,e){return this.dragAfter(r,e)},dragControlEnd:function(r,e){return this.dragEnd(r,e)},dragGroupControlStart:function(r,e){return this.dragGroupStart(r,e)},dragGroupControl:function(r,e){return this.dragGroup(r,e)},dragGroupControlEnd:function(r,e){return this.dragGroupEnd(r,e)},fillDragParams:function(r,e){var t={};return parse$1(getNextTransforms(e)||[]).forEach(function(n){t[n.name]=n.functionValue}),fillParams(r,e,__assign$2({isPinch:!!e.isPinch,transformObject:t,transform:getNextTransformText(e)},fillCSSObject(getNextStyle(e))))},fillDragEndParams:function(r,e){var t={};return parse$1(getNextTransforms(e)||[]).forEach(function(n){t[n.name]=n.functionValue}),fillParams(r,e,__assign$2({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:t,transform:getNextTransformText(e)},fillCSSObject(getNextStyle(e))))}};function triggerAble(r,e,t,n,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var s=i==="Start",l=i==="End",c=i==="After",u=r.state.target,f=a.isRequest,d=n.indexOf("Control")>-1;if(!u||s&&d&&!f&&r.areaElement===a.inputEvent.target)return!1;var g=__spreadArray$2([],__read$1(e),!1);if(f){var p=a.requestAble;g.some(function(M){return M.name===p})||g.push.apply(g,__spreadArray$2([],__read$1(r.props.ables.filter(function(M){return M.name===p})),!1))}if(!g.length||g.every(function(M){return M.dragRelation}))return!1;var v=a.inputEvent,y;l&&v&&(y=document.elementFromPoint(a.clientX,a.clientY)||v.target);var m=!1,x=function(){var M;m=!0,(M=a.stop)===null||M===void 0||M.call(a)},_=s&&(!r.targetGesto||!r.controlGesto||!r.targetGesto.isFlag()||!r.controlGesto.isFlag());_&&r.updateRect(i,!0,!1);var S=a.datas,A=d?"controlGesto":"targetGesto",b=r[A],C=function(M,$,P){if(!($ in M)||b!==r[A])return!1;var R=M.name,L=S[R]||(S[R]={});if(s&&(L.isEventStart=!P||!M[P]||M[P](r,a)),!L.isEventStart)return!1;var O=M[$](r,__assign$2(__assign$2({},a),{stop:x,datas:L,originalDatas:S,inputTarget:y}));return r._emitter.off(),s&&O===!1&&(L.isEventStart=!1),O};_&&g.forEach(function(M){M.unset&&M.unset(r)}),C(BeforeRenderable,"drag".concat(n).concat(i));var E=0,T=0;t.forEach(function(M){if(m)return!1;var $="".concat(M).concat(n).concat(i),P="".concat(M).concat(n,"Condition");i===""&&!f&&convertDragDist(r.state,a);var R=g.filter(function(k){return k[$]});R=R.filter(function(k,B){return k.name&&R.indexOf(k)===B});var L=R.filter(function(k){return C(k,$,P)}),O=L.length;m&&++E,O&&++T,!m&&s&&R.length&&!O&&(E+=R.filter(function(k){var B=k.name,N=S[B];return N.isEventStart?k.dragRelation!=="strong":!1}).length?1:0)}),(!c||T)&&C(Renderable,"drag".concat(n).concat(i));var I=b!==r[A]||E===t.length;if((l||m||I)&&(r.state.gestos={},r.moveables&&r.moveables.forEach(function(M){M.state.gestos={}}),g.forEach(function(M){M.unset&&M.unset(r)})),s&&!I&&!f&&T&&r.props.preventDefault&&(a==null||a.preventDefault()),r.isUnmounted||I)return!1;if(!s&&T&&!o||l){var w=r.props.flushSync||defaultSync;w(function(){r.updateRect(l?i:"",!0,!1),r.forceUpdate()})}return!s&&!l&&!c&&T&&!o&&triggerAble(r,e,t,n,i+"After",a),!0}function checkMoveableTarget(r){return function(e){var t,n=e.inputEvent.target,i=r.areaElement,a=r._dragTarget;return!a||!((t=r.controlGesto)===null||t===void 0)&&t.isFlag()?!1:n===a||a.contains(n)||n===i||!r.isMoveableElement(n)&&!r.controlBox.contains(n)||hasClass$1(n,"moveable-area")||hasClass$1(n,"moveable-padding")||hasClass$1(n,"moveable-edgeDraggable")}}function getTargetAbleGesto(r,e,t){var n=r.controlBox,i=[],a=r.props,o=a.dragArea,s=r.state.target,l=a.dragTarget;return i.push(n),(!o||l)&&i.push(e),!o&&l&&s&&e!==s&&a.dragTargetSelf&&i.push(s),getAbleGesto(r,i,"targetAbles",t,{dragStart:checkMoveableTarget(r),pinchStart:checkMoveableTarget(r)})}function getAbleGesto(r,e,t,n,i){i===void 0&&(i={});var a=t==="targetAbles",o=r.props,s=o.pinchOutside,l=o.pinchThreshold,c=o.preventClickEventOnDrag,u=o.preventClickDefault,f=o.checkInput,d=o.dragFocusedInput,g=o.preventDefault,p=g===void 0?!0:g,v=o.dragContainer,y=getRefTarget(v,!0),m={preventDefault:p,preventRightClick:!0,preventWheelClick:!0,container:y||getWindow(r.getControlBoxElement()),pinchThreshold:l,pinchOutside:s,preventClickEventOnDrag:a?c:!1,preventClickEventOnDragStart:a?u:!1,preventClickEventByCondition:a?null:function(S){return r.controlBox.contains(S.target)},checkInput:a?f:!1,dragFocusedInput:d},x=new Gesto(e,m),_=n==="Control";return["drag","pinch"].forEach(function(S){["Start","","End"].forEach(function(A){x.on("".concat(S).concat(A),function(b){var C,E=b.eventType,T=S==="drag"&&b.isPinch;if(i[E]&&!i[E](b)){b.stop();return}if(!T){var I=S==="drag"?[S]:["drag",S],w=__spreadArray$2([],__read$1(r[t]),!1),M=triggerAble(r,w,I,n,A,b);M?(r.props.stopPropagation||A==="Start"&&_)&&((C=b==null?void 0:b.inputEvent)===null||C===void 0||C.stopPropagation()):b.stop()}})})}),x}var EventManager=function(){function r(e,t,n){var i=this;this.target=e,this.moveable=t,this.eventName=n,this.ables=[],this._onEvent=function(a){var o=i.eventName,s=i.moveable;s.state.disableNativeEvent||i.ables.forEach(function(l){l[o](s,{inputEvent:a})})},e.addEventListener(n.toLowerCase(),this._onEvent)}return r.prototype.setAbles=function(e){this.ables=e},r.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},r}();function calculateMatrixStack(r,e,t,n){var i;t===void 0&&(t=e);var a=getMatrixStackInfo(r,e),o=a.matrixes,s=a.is3d,l=a.targetMatrix,c=a.transformOrigin,u=a.targetOrigin,f=a.offsetContainer,d=a.hasFixed,g=a.zoom,p=getCachedMatrixContainerInfo(f,t),v=p.matrixes,y=p.is3d,m=p.offsetContainer,x=p.zoom,_=n||y||s,S=_?4:3,A=r.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in r,b=l,C=createIdentityMatrix(S),E=createIdentityMatrix(S),T=createIdentityMatrix(S),I=createIdentityMatrix(S),w=o.length,M=v.map(function(B){return __assign$2(__assign$2({},B),{matrix:B.matrix?__spreadArray$2([],__read$1(B.matrix),!1):void 0})}).reverse();o.reverse(),!s&&_&&(b=convertDimension(b,3,4),convert3DMatrixes(o)),!y&&_&&convert3DMatrixes(M),M.forEach(function(B){E=multiply$1(E,B.matrix,S)});var $=t||getDocumentBody(r),P=((i=M[0])===null||i===void 0?void 0:i.target)||getOffsetInfo($,$,!0).offsetParent,R=M.slice(1).reduce(function(B,N){return multiply$1(B,N.matrix,S)},createIdentityMatrix(S));o.forEach(function(B,N){if(w-2===N&&(T=C.slice()),w-1===N&&(I=C.slice()),!B.matrix){var F=o[N+1],V=getSVGOffset(B,F,P,S,multiply$1(R,C,S));B.matrix=createOriginMatrix(V,S)}C=multiply$1(C,B.matrix,S)});var L=!A&&s;b||(b=createIdentityMatrix(L?4:3));var O=makeMatrixCSS(A&&b.length===16?convertDimension(b,4,3):b,L),k=E;return E=ignoreDimension(E,S,S),{hasZoom:g!==1||x!==1,hasFixed:d,matrixes:o,rootMatrix:E,originalRootMatrix:k,beforeMatrix:T,offsetMatrix:I,allMatrix:C,targetMatrix:b,targetTransform:O,inlineTransform:r.style.transform,transformOrigin:c,targetOrigin:u,is3d:_,offsetContainer:f,offsetRootContainer:m}}function calculateElementInfo(r,e,t,n){t===void 0&&(t=e);var i=0,a=0,o=0,s={},l=getSize$1(r);if(r&&(i=l.offsetWidth,a=l.offsetHeight),r){var c=calculateMatrixStack(r,e,t,n),u=calculateElementPosition(c.allMatrix,c.transformOrigin,i,a);s=__assign$2(__assign$2({},c),u);var f=calculateElementPosition(c.allMatrix,[50,50],100,100);o=getRotationRad([f.pos1,f.pos2],f.direction)}var d=n?4:3;return __assign$2(__assign$2(__assign$2({hasZoom:!1,width:i,height:a,rotation:o},l),{originalRootMatrix:createIdentityMatrix(d),rootMatrix:createIdentityMatrix(d),beforeMatrix:createIdentityMatrix(d),offsetMatrix:createIdentityMatrix(d),allMatrix:createIdentityMatrix(d),targetMatrix:createIdentityMatrix(d),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function getMoveableTargetInfo(r,e,t,n,i,a){a===void 0&&(a=[]);var o=1,s=[0,0],l=resetClientRect(),c=resetClientRect(),u=resetClientRect(),f=resetClientRect(),d=[0,0],g={},p=calculateElementInfo(e,t,i,!0);if(e){var v=getCachedStyle(e);a.forEach(function(M){g[M]=v(M)});var y=p.is3d?4:3,m=calculateElementPosition(p.offsetMatrix,plus(p.transformOrigin,getOrigin(p.targetMatrix,y)),p.width,p.height);o=m.direction,s=plus(m.origin,[m.left-p.left,m.top-p.top]),f=getClientRect(p.offsetRootContainer);var x=getOffsetInfo(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var _=calculateElementPosition(multiply$1(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=calculateElementPosition(p.originalRootMatrix,getTransformOriginArray(getCachedStyle(x)("transformOrigin")).map(function(M){return parseFloat(M)}),x.offsetWidth,x.offsetHeight);if(l=getClientRectByPosition(_,f),u=getClientRectByPosition(S,f,x,!0),r){var A=_.left,b=_.top;c=getClientRectByPosition({left:A,top:b,bottom:b,right:b},f)}}else{l=getClientRect(e),u=getCachedClientRect(x),r&&(c=getClientRect(r));var C=u.left,E=u.top,T=u.clientLeft,I=u.clientTop,w=[l.left-C,l.top-E];d=minus(calculateInversePosition(p.rootMatrix,w,4),[T+p.left,I+p.top])}}return __assign$2({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:f,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:e,style:g,offsetDelta:d},p)}function getPersistState(r){var e=r.pos1,t=r.pos2,n=r.pos3,i=r.pos4;if(!e||!t||!n||!i)return null;var a=getMinMaxs([e,t,n,i]),o=[a.minX,a.minY],s=minus(r.origin,o);return e=minus(e,o),t=minus(t,o),n=minus(n,o),i=minus(i,o),__assign$2(__assign$2({},r),{left:r.left,top:r.top,posDelta:o,pos1:e,pos2:t,pos3:n,pos4:i,origin:s,beforeOrigin:s,isPersisted:!0})}var MoveableManager=function(r){__extends$2(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state=__assign$2({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},getMoveableTargetInfo(null)),t.renderState={},t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isMoveableMounted=!1,t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t._emitter=new EventEmitter$2,t._prevOriginalDragTarget=null,t._originalDragTarget=null,t._prevDragTarget=null,t._dragTarget=null,t._prevPropTarget=null,t._propTarget=null,t._prevDragArea=!1,t._isPropTargetChanged=!1,t._hasFirstTarget=!1,t._reiszeObserver=null,t._observerId=0,t._mutationObserver=null,t._rootContainer=null,t._viewContainer=null,t._viewClassNames=[],t._store={},t.checkUpdateRect=function(){if(!t.isDragging()){var n=t.props.parentMoveable;if(n){n.checkUpdateRect();return}cancelAnimationFrame$1(t._observerId),t._observerId=requestAnimationFrame$2(function(){t.isDragging()||t.updateRect()})}},t._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},t}return e.prototype.render=function(){var t=this.props,n=this.getState(),i=t.parentPosition,a=t.className,o=t.target,s=t.zoom,l=t.cspNonce,c=t.translateZ,u=t.cssStyled,f=t.groupable,d=t.linePadding,g=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=__read$1(i||[0,0],2),v=p[0],y=p[1],m=n.left,x=n.top,_=n.target,S=n.direction,A=n.hasFixed,b=n.offsetDelta,C=t.targets,E=this.isDragging(),T={};this.getEnabledAbles().forEach(function(R){T["data-able-".concat(R.name.toLowerCase())]=!0});var I=this._getAbleClassName(),w=C&&C.length&&(_||f)||o||!this._hasFirstTarget&&this.state.isPersisted,M=this.controlBox||this.props.firstRenderState||this.props.persistData,$=[m-v,x-y];!f&&t.useAccuratePosition&&($[0]+=b[0],$[1]+=b[1]);var P={position:A?"fixed":"absolute",display:w?"block":"none",visibility:M?"visible":"hidden",transform:"translate3d(".concat($[0],"px, ").concat($[1],"px, ").concat(c,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return d&&(P["--moveable-line-padding"]=d),g&&(P["--moveable-control-padding"]=g),reactExports.createElement(u,__assign$2({cspNonce:l,ref:ref(this,"controlBox"),className:"".concat(prefix("control-box",S===-1?"reverse":"",E?"dragging":"")," ").concat(I," ").concat(a)},T,{onClick:this._onPreventClick,style:P}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,n=t.parentMoveable,i=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(t=this._reiszeObserver)===null||t===void 0||t.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),unsetGesto(this,!1),unsetGesto(this,!0);var a=this.events;for(var o in a){var s=a[o];s&&s.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){var n=this.props.ables||[];return find$3(n,function(i){return i.name===t})},e.prototype.getContainer=function(){var t=this.props,n=t.parentMoveable,i=t.wrapperMoveable,a=t.container;return a||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var n;return t&&(((n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"class"))||"").indexOf(PREFIX)>-1},e.prototype.dragStart=function(t){var n=this.targetGesto,i=this.controlGesto;return n&&checkMoveableTarget(this)({inputEvent:t})?n.isFlag()||n.triggerDragStart(t):i&&this.isMoveableElement(t.target)&&(i.isFlag()||i.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var n=this.state,i=n.target,a=n.pos1,o=n.pos2,s=n.pos3,l=n.pos4,c=n.targetClientRect;if(!i)return 0;var u;if(isNode(t)){var f=t.getBoundingClientRect();u={left:f.left,top:f.top,width:f.width,height:f.height}}else u=__assign$2({width:0,height:0},t);var d=u.left,g=u.top,p=u.width,v=u.height,y=fitPoints([a,o,l,s],c),m=getOverlapSize(y,[[d,g],[d+p,g],[d+p,g+v],[d,g+v]]),x=getAreaSize(y);return!m||!x?0:Math.min(100,m/x*100)},e.prototype.isInside=function(t,n){var i=this.state,a=i.target,o=i.pos1,s=i.pos2,l=i.pos3,c=i.pos4,u=i.targetClientRect;return a?isInside([t,n],fitPoints([o,s,c,l],u)):!1},e.prototype.updateRect=function(t,n,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&setStoreCache(!0);var s=a.parentMoveable,l=this.state,c=l.target||a.target,u=this.getContainer(),f=s?s._rootContainer:this._rootContainer,d=getMoveableTargetInfo(this.controlBox,c,u,u,f||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&a.persistData){var g=getPersistState(a.persistData);for(var p in g)d[p]=g[p]}o&&setStoreCache(),this.updateState(d,s?!1:i)},e.prototype.isDragging=function(t){var n,i,a=this.targetGesto,o=this.controlGesto;if(a!=null&&a.isFlag()){if(!t)return!0;var s=a.getEventData();return!!(!((n=s[t])===null||n===void 0)&&n.isEventStart)}if(o!=null&&o.isFlag()){if(!t)return!0;var s=o.getEventData();return!!(!((i=s[t])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,n=getAbsolutePosesByState(this.state),i=__read$1(n,4),a=i[0],o=i[1],s=i[2],l=i[3],c=getRect(n),u=t.width,f=t.height,d=c.width,g=c.height,p=c.left,v=c.top,y=[t.left,t.top],m=plus(y,t.origin),x=plus(y,t.beforeOrigin),_=t.transformOrigin;return{width:d,height:g,left:p,top:v,pos1:a,pos2:o,pos3:s,pos4:l,offsetWidth:u,offsetHeight:f,beforeOrigin:x,origin:m,transformOrigin:_,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){if(!t||t==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&unsetAbles(this,!1),n==null||n.stop()}if(!t||t==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&unsetAbles(this,!0),n==null||n.stop()}},e.prototype.getRotation=function(){var t=this.state,n=t.pos1,i=t.pos2,a=t.direction;return getAbsoluteRotation(n,i,a)},e.prototype.request=function(t,n,i){n===void 0&&(n={});var a=this,o=a.props,s=o.parentMoveable||o.wrapperMoveable||a,l=s.props.ables,c=o.groupable,u=find$3(l,function(m){return m.name===t});if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var f=u.request(a),d=i||n.isInstant,g=f.isControl?"controlAbles":"targetAbles",p="".concat(c?"Group":"").concat(f.isControl?"Control":""),v=__spreadArray$2([],__read$1(s[g]),!1),y={request:function(m){return triggerAble(a,v,["drag"],p,"",__assign$2(__assign$2({},f.request(m)),{requestAble:t,isRequest:!0}),d),y},requestEnd:function(){return triggerAble(a,v,["drag"],p,"End",__assign$2(__assign$2({},f.requestEnd()),{requestAble:t,isRequest:!0}),d),y}};return triggerAble(a,v,["drag"],p,"Start",__assign$2(__assign$2({},f.requestStart(n)),{requestAble:t,isRequest:!0}),d),d?y.request(n).requestEnd():y},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),n=this.props,i=n.padding,a=t.originalBeforeOrigin,o=t.transformOrigin,s=t.allMatrix,l=t.is3d,c=t.pos1,u=t.pos2,f=t.pos3,d=t.pos4,g=t.left,p=t.top,v=t.isPersisted;if(!i){t.renderPoses=[c,u,f,d];return}var y=getPaddingBox(i),m=y.left,x=y.top,_=y.bottom,S=y.right,A=l?4:3,b=[];v?b=o:this.controlBox&&n.groupable?b=a:b=plus(a,[g,p]);var C=multiplies(A,createOriginMatrix(b.map(function(E){return-E}),A),s,createOriginMatrix(o,A));t.renderPoses=[calculatePadding$1(C,c,[-m,-x],A),calculatePadding$1(C,u,[S,-x],A),calculatePadding$1(C,f,[-m,_],A),calculatePadding$1(C,d,[S,_],A)]},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,n=t.target,i=t.container,a=t.parentMoveable,o=this.state,s=o.target,l=o.container;if(!(!s&&!n)){this.updateAbles();var c=!equals(s,n),u=c||!equals(l,i);if(u){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:n,container:i}),!a&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=c}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(t,n){var i=this.props;if(this._emitter.trigger(t,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(t,n,!0);var a=i[t];return a&&a(n)},e.prototype.useCSS=function(t,n){var i=this.props.customStyledMap,a=t+n;return i[a]||(i[a]=styled(t,n)),i[a]},e.prototype.getState=function(){var t,n=this.props;(n.target||!((t=n.targets)===null||t===void 0)&&t.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=n.persistData,o=n.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var s=getPersistState(a);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(t)})},e.prototype.updateAbles=function(t,n){t===void 0&&(t=this.props.ables),n===void 0&&(n="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(t),s="drag".concat(n,"Start"),l="pinch".concat(n,"Start"),c="drag".concat(n,"ControlStart"),u=filterAbles(o,[s,l],a),f=filterAbles(o,[c],a);this.enabledAbles=o,this.targetAbles=u,this.controlAbles=f},e.prototype.updateState=function(t,n){if(n){if(this.isUnmounted)return;this.setState(t)}else{var i=this.state;for(var a in t)i[a]=t[a]}},e.prototype.getEnabledAbles=function(t){t===void 0&&(t=this.props.ables);var n=this.props;return t.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},e.prototype.renderAbles=function(){var t=this,n=this.props,i=n.triggerAblesSimultaneously,a={createElement:reactExports.createElement};return this.renderState={},groupByMap(flat(filterAbles(this.getEnabledAbles(),["render"],i).map(function(o){var s=o.render;return s(t,a)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var t=this.getEnabledAbles().reduce(function(n,i){var a,o,s=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return __spreadArray$2(__spreadArray$2([],__read$1(n),!1),__read$1(s),!1)},__spreadArray$2([],__read$1(this.props.requestStyles||[]),!1));return t},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.controlBox,n=this.targetAbles.length,i=this.controlAbles.length,a=this._dragTarget,o=!n&&this.targetGesto||this._isTargetChanged(!0);o&&(unsetGesto(this,!1),this.updateState({gestos:{}})),i||unsetGesto(this,!0),a&&n&&!this.targetGesto&&(this.targetGesto=getTargetAbleGesto(this,a,"")),!this.controlGesto&&i&&(this.controlGesto=getAbleGesto(this,t,"controlAbles","Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=getRefTarget(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,n=t,i=n.zoom,a=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(a||s&&o)return[];var l=this.getState().renderPoses,c={createElement:reactExports.createElement};return[[0,1],[1,3],[3,2],[2,0]].map(function(u,f){var d=__read$1(u,2),g=d[0],p=d[1];return renderLine(c,"",l[g],l[p],i,"render-line-".concat(f))})},e.prototype._isTargetChanged=function(t){var n=this.props,i=n.dragTarget||n.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea,l=!s&&a!==i,c=(t||s)&&o!==s;return l||c||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,a=this.events,o=getKeys(a);if(this._isTargetChanged())for(var s in a){var l=a[s];l&&l.destroy(),a[s]=null}if(i){var c=this.enabledAbles;o.forEach(function(u){var f=filterAbles(c,[u]),d=f.length>0,g=a[u];if(!d){g&&(g.destroy(),a[u]=null);return}g||(g=new EventManager(i,t,u),a[u]=g),g.setAbles(f)})}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=getRefTarget(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=getRefTarget(t,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(__spreadArray$2(__spreadArray$2([],__read$1(this._getAbleViewClassNames()),!1),[this.isDragging()?VIEW_DRAGGING:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var n=this._viewContainer,i=groupBy$1(t.filter(Boolean),function(c){return c}).map(function(c){var u=__read$1(c,1),f=u[0];return f}),a=this._viewClassNames,o=diff$2(a,i),s=o.removed,l=o.added;s.forEach(function(c){removeClass(n,a[c])}),l.forEach(function(c){addClass(n,i[c])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,t))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var n=this;t===void 0&&(t="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,s=a!=null&&a.isFlag()?a.getEventData():{},l=o!=null&&o.isFlag()?o.getEventData():{};return i.map(function(c){var u,f,d,g=c.name,p=((u=c.className)===null||u===void 0?void 0:u.call(c,n))||"";return(!((f=s[g])===null||f===void 0)&&f.isEventStart||!((d=l[g])===null||d===void 0)&&d.isEventStart)&&(p+=" ".concat(prefix("".concat(g).concat(t,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var n,i=this.props,a=i.target,o=getWindow(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(t.target===a&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(a,{box:"border-box"}),this._reiszeObserver=s}},e.prototype._updateMutationObserver=function(t){var n=this,i,a=this.props,o=a.target,s=getWindow(this.getControlBoxElement());if(!s.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(t.target===o&&this._mutationObserver)){var l=new s.MutationObserver(function(c){var u,f;try{for(var d=__values$1(c),g=d.next();!g.done;g=d.next()){var p=g.value;p.type==="attributes"&&p.attributeName==="style"&&n.checkUpdateRect()}}catch(v){u={error:v}}finally{try{g&&!g.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}});l.observe(o,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:defaultSync,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(reactExports.PureComponent),Groupable={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(r,e){var t,n=r.props,i=n.targets||[],a=r.getState(),o=a.left,s=a.top,l=a.isPersisted,c=n.zoom||1,u=r.renderGroupRects,f=((t=n.persistData)===null||t===void 0?void 0:t.children)||[];l?i=f.map(function(){return null}):f=[];var d=watchValue(r,"parentPosition",[o,s],function(p){return p.join(",")}),g=watchValue(r,"requestStyles",r.getRequestChildStyles(),function(p){return p.join(",")});return r.moveables=r.moveables.slice(0,i.length),__spreadArray$2(__spreadArray$2([],__read$1(i.map(function(p,v){return e.createElement(MoveableManager,{key:"moveable"+v,ref:refs(r,"moveables",v),target:p,origin:!1,requestStyles:g,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:r,parentPosition:[o,s],persistData:f[v],zoom:c})})),!1),__read$1(flat(u.map(function(p,v){var y=p.pos1,m=p.pos2,x=p.pos3,_=p.pos4,S=[y,m,x,_];return[[0,1],[1,3],[3,2],[2,0]].map(function(A,b){var C=__read$1(A,2),E=C[0],T=C[1];return renderLine(e,"",minus(S[E],d),minus(S[T],d),c,"group-rect-".concat(v,"-").concat(b))})}))),!1)}},Clickable=makeAble("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(r,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(r,e){var t=r.props.target,n=e.inputEvent,i=e.inputTarget,a=r.isMoveableElement(i),o=!a&&r.controlBox.contains(i);if(!(!n||!i||e.isDrag||r.isMoveableElement(i)||o)){var s=t.contains(i);triggerEvent(r,"onClick",fillParams(r,e,{isDouble:e.isDouble,inputTarget:i,isTarget:t===i,moveableTarget:r.props.target,containsTarget:s}))}},dragGroupEnd:function(r,e){var t=e.inputEvent,n=e.inputTarget;if(!(!t||!n||e.isDrag||r.isMoveableElement(n)||e.datas.inputTarget===n)){var i=r.props.targets,a=i.indexOf(n),o=a>-1,s=!1;a===-1&&(a=findIndex$1(i,function(l){return l.contains(n)}),s=a>-1),triggerEvent(r,"onClickGroup",fillParams(r,e,{isDouble:e.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:o,containsTarget:s,moveableTarget:i[a]}))}},dragControlEnd:function(r,e){this.dragEnd(r,e)},dragGroupControlEnd:function(r,e){this.dragEnd(r,e)}});function getDraggableEvent(r){var e=r.originalDatas.draggable;return e||(r.originalDatas.draggable={},e=r.originalDatas.draggable),__assign$2(__assign$2({},r),{datas:e})}var edgeDraggable=makeAble("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(r,e){var t=r.props,n=t.edgeDraggable;return n?renderEdgeLines(e,"edgeDraggable",n,r.getState().renderPoses,t.zoom):[]},dragCondition:function(r,e){var t,n=r.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!n.edgeDraggable||!i?!1:!n.draggable&&hasClass$1(i,prefix("direction"))&&hasClass$1(i,prefix("edge"))&&hasClass$1(i,prefix("edgeDraggable"))},dragStart:function(r,e){return Draggable.dragStart(r,getDraggableEvent(e))},drag:function(r,e){return Draggable.drag(r,getDraggableEvent(e))},dragEnd:function(r,e){return Draggable.dragEnd(r,getDraggableEvent(e))},dragGroupCondition:function(r,e){var t,n=r.props,i=(t=e.inputEvent)===null||t===void 0?void 0:t.target;return!n.edgeDraggable||!i?!1:!n.draggable&&hasClass$1(i,prefix("direction"))&&hasClass$1(i,prefix("line"))},dragGroupStart:function(r,e){return Draggable.dragGroupStart(r,getDraggableEvent(e))},dragGroup:function(r,e){return Draggable.dragGroup(r,getDraggableEvent(e))},dragGroupEnd:function(r,e){return Draggable.dragGroupEnd(r,getDraggableEvent(e))},unset:function(r){return Draggable.unset(r)}}),IndividualGroupable={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},MOVEABLE_ABLES=[BeforeRenderable,Default,Snappable,Pinchable,Draggable,edgeDraggable,Resizable,Scalable,Warpable,Rotatable,Scrollable,Padding,Origin,OriginDraggable,Clippable,Roundable,Groupable,IndividualGroupable,Clickable,DragArea,Renderable];function solveConstantsDistance(r,e){var t=__read$1(r,3),n=t[0],i=t[1],a=t[2];return(n*e[0]+i*e[1]+a)/Math.sqrt(n*n+i*i)}function solveC(r,e){var t=__read$1(r,2),n=t[0],i=t[1];return-n*e[0]-i*e[1]}function getMaxPos(r,e){return Math.max.apply(Math,__spreadArray$2([],__read$1(r.map(function(t){var n=__read$1(t,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.max(i[e],a[e],o[e],s[e])})),!1))}function getMinPos(r,e){return Math.min.apply(Math,__spreadArray$2([],__read$1(r.map(function(t){var n=__read$1(t,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.min(i[e],a[e],o[e],s[e])})),!1))}function getGroupRect(r,e){var t,n,i,a=[0,0],o=[0,0],s=[0,0],l=[0,0],c=0,u=0;if(!r.length)return{pos1:a,pos2:o,pos3:s,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:c,height:u,rotation:e};var f=throttle$1(e,TINY_NUM);if(f%90){var d=f/180*Math.PI,g=Math.tan(d),p=-1/g,v=[MAX_NUM,MIN_NUM],y=[[0,0],[0,0]],m=[MAX_NUM,MIN_NUM],x=[[0,0],[0,0]];r.forEach(function(H){H.forEach(function(z){var G=solveConstantsDistance([-g,1,0],z),j=solveConstantsDistance([-p,1,0],z);v[0]>G&&(y[0]=z,v[0]=G),v[1]<G&&(y[1]=z,v[1]=G),m[0]>j&&(x[0]=z,m[0]=j),m[1]<j&&(x[1]=z,m[1]=j)})});var _=__read$1(y,2),S=_[0],A=_[1],b=__read$1(x,2),C=b[0],E=b[1],T=[-g,1,solveC([-g,1],S)],I=[-g,1,solveC([-g,1],A)],w=[-p,1,solveC([-p,1],C)],M=[-p,1,solveC([-p,1],E)];t=__read$1([[T,w],[T,M],[I,w],[I,M]].map(function(H){var z=__read$1(H,2),G=z[0],j=z[1];return getIntersectionPointsByConstants(G,j)[0]}),4),a=t[0],o=t[1],s=t[2],l=t[3],c=m[1]-m[0],u=v[1]-v[0]}else{var $=getMinPos(r,0),P=getMinPos(r,1),R=getMaxPos(r,0),L=getMaxPos(r,1);if(a=[$,P],o=[R,P],s=[$,L],l=[R,L],c=R-$,u=L-P,f%180){var O=[s,a,l,o];n=__read$1(O,4),a=n[0],o=n[1],s=n[2],l=n[3],c=L-P,u=R-$}}if(f%360>180){var O=[l,s,o,a];i=__read$1(O,4),a=i[0],o=i[1],s=i[2],l=i[3]}var k=getMinMaxs([a,o,s,l]),B=k.minX,N=k.minY,F=k.maxX,V=k.maxY;return{pos1:a,pos2:o,pos3:s,pos4:l,width:c,height:u,minX:B,minY:N,maxX:F,maxY:V,rotation:e}}function findMoveableGroups(r,e){var t=e.map(function(n){if(isArray$4(n)){var i=findMoveableGroups(r,n),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=find$3(r,function(s){var l=s.manager;return l.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return t.length===1&&isArray$4(t[0])?t[0]:t}var MoveableGroup=function(r){__extends$2(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.differ=new ChildrenDiffer$1,t.moveables=[],t.transformOrigin="50% 50%",t.renderGroupRects=[],t._targetGroups=[],t._hasFirstTargets=!1,t}return e.prototype.componentDidMount=function(){r.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,n,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;setStoreCache(!0),this.moveables.forEach(function(U){U.updateRect(t,!1,!1)});var s=this.props,l=this.moveables,c=o.target||s.target,u=l.map(function(U){return{finded:!1,manager:U}}),f=this.props.targetGroups||[],d=findMoveableGroups(u,f),g=s.useDefaultGroupRotate;d.push.apply(d,__spreadArray$2([],__read$1(u.filter(function(U){var K=U.finded;return!K}).map(function(U){var K=U.manager;return K})),!1));var p=[],v=!n||t!==""&&s.updateGroup,y=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(a=s.persistData)===null||a===void 0?void 0:a.rotation;m!=null&&(y=m)}function x(U,K,q){var W=U.map(function(it){if(isArray$4(it)){var et=x(it,K),nt=[et.pos1,et.pos2,et.pos3,et.pos4];return p.push(et),{poses:nt,rotation:et.rotation}}else return{poses:getAbsolutePosesByState(it.state),rotation:it.getRotation()}}),X=W.map(function(it){var et=it.rotation;return et}),tt=0,Z=X[0],J=X.every(function(it){return Math.abs(Z-it)<.1});v?tt=!g&&J?Z:y:tt=!g&&!q&&J?Z:K;var Q=W.map(function(it){var et=it.poses;return et}),rt=getGroupRect(Q,tt);return rt}var _=x(d,this.rotation,!0);v&&(this.rotation=_.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var S=this.transformOrigin,A=this.rotation,b=this.scale,C=_.width,E=_.height,T=_.minX,I=_.minY,w=rotatePosesInfo([[0,0],[C,0],[0,E],[C,E]],convertTransformOriginArray(S,C,E),this.rotation/180*Math.PI),M=getMinMaxs(w.result),$=M.minX,P=M.minY,R=" rotate(".concat(A,"deg)")+" scale(".concat(sign(b[0]),", ").concat(sign(b[1]),")"),L="translate(".concat(-$,"px, ").concat(-P,"px)").concat(R);this.controlBox.style.transform="translate3d(".concat(T,"px, ").concat(I,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(C,"px;height:").concat(E,"px;")+"transform: ".concat(L),o.width=C,o.height=E;var O=this.getContainer(),k=getMoveableTargetInfo(this.controlBox,c,this.controlBox,this.getContainer(),this._rootContainer||O,[]),B=[k.left,k.top],N=__read$1(getAbsolutePosesByState(k),4),F=N[0],V=N[1],H=N[2],z=N[3],G=getMinMaxs([F,V,H,z]),j=[G.minX,G.minY],Y=sign(b[0]*b[1]);k.pos1=minus(F,j),k.pos2=minus(V,j),k.pos3=minus(H,j),k.pos4=minus(z,j),k.left=T-k.left+j[0],k.top=I-k.top+j[1],k.origin=minus(plus(B,k.origin),j),k.beforeOrigin=minus(plus(B,k.beforeOrigin),j),k.originalBeforeOrigin=plus(B,k.originalBeforeOrigin),k.transformOrigin=minus(plus(B,k.transformOrigin),j),c.style.transform="translate(".concat(-$-j[0],"px, ").concat(-P-j[1],"px)")+R,setStoreCache(),this.updateState(__assign$2(__assign$2({},k),{posDelta:j,direction:Y,beforeDirection:Y}),i)},e.prototype.getRect=function(){return __assign$2(__assign$2({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.triggerEvent=function(t,n,i){if(i||t.indexOf("Group")>-1)return r.prototype.triggerEvent.call(this,t,n);this._emitter.trigger(t,n)},e.prototype.getRequestChildStyles=function(){var t=this.getEnabledAbles().reduce(function(n,i){var a,o,s=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return __spreadArray$2(__spreadArray$2([],__read$1(n),!1),__read$1(s),!1)},[]);return t},e.prototype.getMoveables=function(){return __spreadArray$2([],__read$1(this.moveables),!1)},e.prototype.updateAbles=function(){r.prototype.updateAbles.call(this,__spreadArray$2(__spreadArray$2([],__read$1(this.props.ables),!1),[Groupable],!1),"Group")},e.prototype._updateTargets=function(){r.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=getRefTarget(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,n=this.props,i=this._prevDragTarget,a=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),l=s.added,c=s.changed,u=s.removed,f=l.length||u.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(unsetGesto(this,!1),unsetGesto(this,!0),this.updateState({gestos:{}})),i!==a&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=getTargetAbleGesto(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=getAbleGesto(this,this.controlBox,"controlAbles","GroupControl")));var d=!equals(t.container,n.container);d&&(t.container=n.container),(d||f||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||c.length||o.length&&!isDeepArrayEquals(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},e.prototype._updateObserver=function(){},e.defaultProps=__assign$2(__assign$2({},MoveableManager.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(MoveableManager),MoveableIndividualGroup=function(r){__extends$2(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.moveables=[],t}return e.prototype.render=function(){var t=this,n,i=this.props,a=i.cspNonce,o=i.cssStyled,s=i.persistData,l=i.targets||[],c=l.length,u=this.isUnmounted||!c,f=(n=s==null?void 0:s.children)!==null&&n!==void 0?n:[];return u&&!c&&f.length?l=f.map(function(){return null}):u||(f=[]),reactExports.createElement(o,{cspNonce:a,ref:ref(this,"controlBox"),className:prefix("control-box")},l.map(function(d,g){var p,v,y=(v=(p=i.individualGroupableProps)===null||p===void 0?void 0:p.call(i,d,g))!==null&&v!==void 0?v:{};return reactExports.createElement(MoveableManager,__assign$2({key:"moveable"+g,ref:refs(t,"moveables",g)},i,y,{target:d,wrapperMoveable:t,isWrapperMounted:t.isMoveableMounted,persistData:f[g]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,n,i){i===void 0&&(i=!0),setStoreCache(!0),this.moveables.forEach(function(a){a.updateRect(t,n,i)}),setStoreCache()},e.prototype.getRect=function(){return __assign$2(__assign$2({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.request=function(t,n,i){n===void 0&&(n={});var a=this.moveables.map(function(l){return l.request(t,__assign$2(__assign$2({},n),{isInstant:!1}),!1)}),o=i||n.isInstant,s={request:function(l){return a.forEach(function(c){return c.request(l)}),this},requestEnd:function(){return a.forEach(function(l){return l.requestEnd()}),this}};return o?s.request(n).requestEnd():s},e.prototype.dragStart=function(t){var n=t.target,i=find$3(this.moveables,function(a){var o=a.getTargets()[0],s=a.getControlBoxElement(),l=a.getDragElement();return!o||!l?!1:l===n||l.contains(n)||l!==o&&o===n||o.contains(n)||s===n||s.contains(n)});return i&&i.dragStart(t),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return __spreadArray$2([],__read$1(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(MoveableManager);function getElementTargets(r,e){var t=[];return r.forEach(function(n){if(n){if(isString$1(n)){e[n]&&t.push.apply(t,__spreadArray$2([],__read$1(e[n]),!1));return}isArray$4(n)?t.push.apply(t,__spreadArray$2([],__read$1(getElementTargets(n,e)),!1)):t.push(n)}}),t}function getTargetGroups(r,e){var t=[];return r.forEach(function(n){if(n){if(isString$1(n)){e[n]&&t.push.apply(t,__spreadArray$2([],__read$1(e[n]),!1));return}isArray$4(n)?t.push(getTargetGroups(n,e)):t.push(n)}}),t}function compareRefTargets(r,e){return r.length!==e.length||r.some(function(t,n){var i=e[n];return!t&&!i?!1:t!=i?isArray$4(t)&&isArray$4(i)?compareRefTargets(t,i):!0:!1})}var InitialMoveable=function(r){__extends$2(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t._differ=new ChildrenDiffer$1,t._elementTargets=[],t._tmpRefTargets=[],t._tmpSelectorMap={},t._onChangeTargets=null,t}return e.makeStyled=function(){var t={},n=this.getTotalAbles();n.forEach(function(a){var o=a.css;o&&o.forEach(function(s){t[s]=!0})});var i=getKeys(t).join(`
`);this.defaultStyled=styled("div",prefixCSS(PREFIX,MOVEABLE_CSS+i))},e.getTotalAbles=function(){return __spreadArray$2([Default,Groupable,IndividualGroupable,DragArea],__read$1(this.defaultAbles),!1)},e.prototype.render=function(){var t,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,a=i.ables,o=i.props,s=__rest$1(i,["ables","props"]),l=__read$1(this._updateRefs(!0),2),c=l[0],u=l[1],f=getElementTargets(c,u),d=f.length>1,g=n.getTotalAbles(),p=__spreadArray$2(__spreadArray$2([],__read$1(g),!1),__read$1(a||[]),!1),v=__assign$2(__assign$2(__assign$2({},s),o||{}),{ables:p,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=f;var y=null,m=this.moveable,x=s.persistData;if(x!=null&&x.children&&(d=!0),s.individualGroupable)return reactExports.createElement(MoveableIndividualGroup,__assign$2({key:"individual-group",ref:ref(this,"moveable")},v,{target:null,targets:f}));if(d){var _=getTargetGroups(c,u);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&f.indexOf(S)>-1&&(y=__assign$2({},m.state))}return reactExports.createElement(MoveableGroup,__assign$2({key:"group",ref:ref(this,"moveable")},v,(t=s.groupableProps)!==null&&t!==void 0?t:{},{target:null,targets:f,targetGroups:_,firstRenderState:y}))}else{var A=f[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var b=m.moveables||[],C=find$3(b,function(E){return E.props.target===A});C&&(y=__assign$2({},C.state))}return reactExports.createElement(MoveableManager,__assign$2({key:"single",ref:ref(this,"moveable")},v,{target:A,firstRenderState:y}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,n;return(n=(t=this.moveable)===null||t===void 0?void 0:t.getTargets())!==null&&n!==void 0?n:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs()},e.prototype.waitToChangeTarget=function(){var t=this,n;return this._onChangeTargets=function(){t._onChangeTargets=null,n()},new Promise(function(i){n=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var n=this.refTargets,i=getRefTargets(this.props.target||this.props.targets),a=typeof document<"u",o=compareRefTargets(n,i),s=this.selectorMap,l={};return this.refTargets.forEach(function c(u){if(isString$1(u)){var f=s[u];f?l[u]=s[u]:a&&(o=!0,l[u]=[].slice.call(document.querySelectorAll(u)))}else isArray$4(u)&&u.forEach(c)}),this._tmpRefTargets=i,this._tmpSelectorMap=l,[i,l,!t&&o]},e.prototype._checkChangeTargets=function(){var t,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,s=a.removed,l=o.length||s.length;l&&((n=(t=this.props).onChangeTargets)===null||n===void 0||n.call(t,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var c=__read$1(this._updateRefs(),3),u=c[0],f=c[1],d=c[2];this.refTargets=u,this.selectorMap=f,d&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,__decorate([withMethods(MOVEABLE_METHODS)],e.prototype,"moveable",void 0),e}(reactExports.PureComponent),Moveable=function(r){__extends$2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.defaultAbles=MOVEABLE_ABLES,e}(InitialMoveable);const reRenderAllLine=()=>{const{bpLines:r}=bpStore$1;reRenderLine(Object.values(r))},reRenderLine=r=>{const{downCtx:e,canvasOffset:t,nodeContainerRef:n}=bpStore$1,{width:i,height:a}=n==null?void 0:n.getBoundingClientRect();r.forEach(o=>{const{startAnchorId:s,endAnchorId:l}=o,c=document.getElementById(s),u=document.getElementById(l),{x:f,y:d,width:g,height:p}=c.getBoundingClientRect(),{x:v,y,width:m,height:x}=u.getBoundingClientRect();o.startPoint={x:f+g/2-t.x,y:d+p/2-t.y},o.endPoint={x:v+m/2-t.x,y:y+x/2-t.y};const _=CanvasUtil.calculateControlPoint(o.startPoint,o.endPoint);o.firstCP=_.firstCP,o.secondCP=_.secondCP}),e.clearRect(0,0,i,a),CanvasUtil.drawBezierCurves(e,r)},updNodeAndLinePos=(r,e)=>{const{bpNodeControllerInsMap:t,bpAPLineMap:n,bpLines:i,updLinePos:a,updBpNodeLayout:o,canvasOffset:s}=bpStore$1;o({id:r,position:{x:e.x,y:e.y}});const l=t[r],{input:c=[],output:u=[]}=l.getConfig(),f=[...c,...u];f&&f.forEach(d=>{const g=n[d.id];g&&g.forEach(p=>{const v=i[p];if(v){const{startAnchorId:y,endAnchorId:m}=v,x=document.getElementById(y),_=document.getElementById(m),{x:S,y:A,width:b,height:C}=x.getBoundingClientRect(),{x:E,y:T,width:I,height:w}=_.getBoundingClientRect();a({id:p,startPoint:{x:S+b/2-s.x,y:A+C/2-s.y},endPoint:{x:E+I/2-s.x,y:T+w/2-s.y}})}})})},BPMovable=observer(r=>{const{children:e}=r,t=React.createRef();reactExports.useEffect(()=>{const{setBpMovableRef:c}=bpStore$1;c(t.current)});const n=c=>{const{target:u,beforeTranslate:f}=c;u.style.transform=`translate(${f[0]}px, ${f[1]}px)`,reRenderAllLine()},i=c=>{const{inputEvent:{target:u}}=c;if(u.classList.contains("ap-circle"))return!1},a=c=>{const{target:u,lastEvent:f}=c;if(!f)return;const{beforeTranslate:d}=f,g=u.id.split(":")[1];updNodeAndLinePos(g,{x:d[0],y:d[1]}),CanvasUtil.updSegmentSamplingPoint()},o=c=>{c.events.forEach(u=>u.target.style.transform=u.transform),reRenderAllLine()},s=c=>{c.events.forEach(u=>{const{target:f,lastEvent:d}=u;if(d){const g=f.id.split(":")[1],{beforeTranslate:p}=d;updNodeAndLinePos(g,{x:p[0],y:p[1]})}}),CanvasUtil.updSegmentSamplingPoint()},{selectedNodes:l}=bpStore$1;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e,jsxRuntimeExports.jsx(Moveable,{ref:t,target:l,draggable:!0,origin:!1,hideDefaultLines:!0,onDragStart:i,onDrag:n,onDragEnd:a,onDragGroup:o,onDragGroupEnd:s})]})}),BPSelectable=r=>{const{children:e}=r,t=React.createRef();reactExports.useEffect(()=>{const{setBpSelectRef:a}=bpStore$1;a(t.current)});const n=a=>{const{bpMovableRef:o,selectedNodes:s}=bpStore$1,l=a.inputEvent.target;(o.isMoveableElement(l)||s.some(c=>c===l||c.contains(l)))&&a.stop()},i=a=>{let{selected:o}=a;const{bpMovableRef:s,setSelectedNodes:l}=bpStore$1;o=o.filter(c=>c.classList.contains("bp-node-container")),l(o),o.length!==0&&a.isDragStart&&(a.inputEvent.preventDefault(),setTimeout(()=>{s.dragStart(a.inputEvent)}))};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e,jsxRuntimeExports.jsx(Selecto$1,{ref:t,dragContainer:".blue-print-canvas",selectableTargets:[".bp-node-container"],hitRate:0,ratio:0,selectByClick:!0,selectFromInside:!1,toggleContinueSelect:["ctrl"],onDragStart:n,onSelectEnd:i})]})};class ScaleCore{constructor(){D(this,"max",3);D(this,"min",.05);D(this,"scale",1);D(this,"ratio",1);D(this,"compute",e=>{let t=1.2;e===0&&(t=1/1.2);let n=this.scale*t;n>this.max?(t=this.max/this.scale,n=this.max):n<this.min&&(t=this.min/this.scale,n=this.min),this.scale=n,this.ratio=t})}}class DragScaleProvider{constructor(e){D(this,"container",null);D(this,"content",null);D(this,"position",{x:0,y:0});D(this,"posOffset",{x:0,y:0});D(this,"dragCallback");D(this,"scaleCallback");D(this,"dragStartCallback");D(this,"dragEndCallback");D(this,"scaleCore",new ScaleCore);D(this,"onDragEnd",()=>{var e;(e=this.container)==null||e.addEventListener("pointerup",t=>{var n,i;if(t.button===2&&((n=this.container)==null||n.releasePointerCapture(t.pointerId),(i=this.container)==null||i.removeEventListener("pointermove",this.onDragMove),this.dragEndCallback)){const{scale:a,ratio:o}=this.scaleCore;this.dragEndCallback({scale:a,ratio:o,position:this.position},t)}})});D(this,"onDragMove",e=>{if(e.buttons===2&&(this.position.x+=e.movementX,this.position.y+=e.movementY,this.content.style.transform="translate3d("+this.position.x+"px, "+this.position.y+"px, 0) scale("+this.scaleCore.scale+")",this.dragCallback)){const{scale:t,ratio:n}=this.scaleCore;this.dragCallback({scale:t,ratio:n,position:this.position},e)}});D(this,"onDragStart",()=>{var e;(e=this.container)==null||e.addEventListener("pointerdown",t=>{var n,i;if(t.button===2&&((n=this.container)==null||n.setPointerCapture(t.pointerId),(i=this.container)==null||i.addEventListener("pointermove",this.onDragMove),this.dragStartCallback)){const{scale:a,ratio:o}=this.scaleCore;this.dragStartCallback({scale:a,ratio:o,position:this.position},t)}})});D(this,"onWheel",()=>{var e;(e=this.container)==null||e.addEventListener("wheel",t=>{var n;if(t.altKey&&t.buttons!==2){this.scaleCore.compute(t.deltaY>0?0:1);const{width:i,height:a}=(n=this.content)==null?void 0:n.style;if(this.position.x=this.position.x-(this.scaleCore.ratio-1)*(t.clientX-this.posOffset.x-this.position.x-parseFloat(i)*.5),this.position.y=this.position.y-(this.scaleCore.ratio-1)*(t.clientY-this.posOffset.y-this.position.y-parseFloat(a)*.5),this.content.style.transform="translate3d("+this.position.x+"px, "+this.position.y+"px, 0) scale("+this.scaleCore.scale+")",this.scaleCallback){const{scale:o,ratio:s}=this.scaleCore;this.scaleCallback({scale:o,ratio:s,position:this.position},t)}}})});const{container:t,content:n,position:i,posOffset:a,dragCallback:o,scaleCallback:s,dragStartCallback:l,dragEndCallback:c}=e;this.container=t,this.content=n,i&&(this.position=i),a&&(this.posOffset=a),o&&(this.dragCallback=o),s&&(this.scaleCallback=s),l&&(this.dragStartCallback=l),c&&(this.dragEndCallback=c),this.registerDrag(),this.registerScale()}destroy(){var e,t,n;(e=this.container)==null||e.removeEventListener("pointerdown",this.onDragStart),(t=this.container)==null||t.removeEventListener("pointerup",this.onDragEnd),(n=this.container)==null||n.removeEventListener("wheel",this.onWheel)}registerDrag(){var e;this.content.style.transform="translate3d("+this.position.x+"px, "+this.position.y+"px, 0) scale("+this.scaleCore.scale+")",(e=this.container)==null||e.addEventListener("contextmenu",t=>t.preventDefault()),this.onDragStart(),this.onDragEnd()}registerScale(){this.onWheel()}}const BPDragScaleContainer=r=>{const{children:e}=r,t=React.useRef(null),n=React.useRef(null);return reactExports.useEffect(()=>{const{canvasOffset:i,setCanvasTranslate:a,setCanvasScale:o,setBpDragContentRef:s}=bpStore$1,l=t.current,c=n.current;if(s(c),l&&c){const u=new DragScaleProvider({container:l,content:c,posOffset:i,dragCallback:f=>{const{position:d}=f;a(d),reRenderAllLine()},dragEndCallback:()=>{CanvasUtil.updSegmentSamplingPoint()},scaleCallback:f=>{const{position:d,scale:g}=f;o(g),a(d),reRenderAllLine(),CanvasUtil.updSegmentSamplingPoint()}});return()=>{u.destroy()}}},[]),jsxRuntimeExports.jsx("div",{className:"bp-ds-container",id:"bp-ds-container",ref:t,style:{overflow:"hidden",width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("div",{ref:n,style:{width:0,height:0},children:e})})},BPNodeContainer=React.memo(({layout:r})=>{const e=reactExports.useRef(null),t=a=>{const{setActiveNode:o}=bpRightStore;o(a)};reactExports.useEffect(()=>{const a=bpNodeControllerMap.get(r.type);if(!a)return;const o=new a;if(!o)return;const{bpNodeControllerInsMap:s,bpNodeConfigMap:l}=bpStore$1;let c=l[r.id];c||(c=o.getNodeInfo(r.id)),o.create(e.current,c),s[r.id]=o},[r.id,r.type]);const{position:n,id:i}=r;return jsxRuntimeExports.jsx("div",{ref:e,className:"bp-node-container",id:`bpnode:${i}`,onDoubleClick:()=>t(i),style:{transform:"translate("+n.x+"px,"+n.y+"px)"}})}),NodeLayer=observer(()=>{const{bpNodeLayoutMap:r}=bpStore$1;return jsxRuntimeExports.jsx("div",{id:"bp-node-container",style:{position:"relative",width:"100%",height:"100%"},ref:e=>{const{setNodeContainerRef:t}=bpStore$1;t(e)},children:jsxRuntimeExports.jsx(BPSelectable,{children:jsxRuntimeExports.jsx(BPDragScaleContainer,{children:jsxRuntimeExports.jsx(BPMovable,{children:Object.values(r).map(e=>jsxRuntimeExports.jsx(BPNodeContainer,{layout:e},e.id))})})})})}),lineSegmentCollisions=r=>{const{clientX:e,clientY:t,shiftKey:n}=r,{selectedLines:i,setSelectedLines:a,downCtx:o}=bpStore$1;if(i.length>0&&(i.forEach(d=>{d.lineWidth=1,d.color="#a2a2a2",reRenderAllLine(),CanvasUtil.updSegmentSamplingPoint()}),a([])),!n)return;const{bpLines:s,canvasOffset:l}=bpStore$1,c=[],u={x:e-l.x,y:t-l.y};if(Object.values(s).forEach(d=>{CanvasUtil.isMouseInRectangle(u,d.startPoint,d.endPoint)&&c.push(d)}),c.length===0)return;const f=[];for(let d=0;d<c.length;d++){const g=c[d],{samplePoints:p}=g;if(CanvasUtil.isMouseOnLine(u,p,5)){g.lineWidth=2,g.color="#d9d9d9",f.push(g),CanvasUtil.drawBezierCurves(o,[g]),CanvasUtil.updSegmentSamplingPoint();break}}a(f)},BPCanvas=()=>(reactExports.useEffect(()=>{const r=setTimeout(()=>{reRenderAllLine(),CanvasUtil.updSegmentSamplingPoint(),clearTimeout(r)},50),{nodeContainerRef:e}=bpStore$1;e==null||e.addEventListener("click",lineSegmentCollisions)},[]),jsxRuntimeExports.jsxs("div",{className:"blue-print-canvas",style:{overflow:"hidden",width:window.innerWidth-670,height:window.innerHeight-75},children:[jsxRuntimeExports.jsx(LineLayer,{}),jsxRuntimeExports.jsx(NodeLayer,{})]})),FrameLayout=r=>{const{header:e,footer:t,left:n,right:i,content:a}=r;return jsxRuntimeExports.jsxs("div",{className:"frame-layout",children:[jsxRuntimeExports.jsx("div",{className:"fl-header",children:e}),jsxRuntimeExports.jsxs("div",{className:"fl-body",children:[jsxRuntimeExports.jsx("div",{className:"fl-left",children:n}),jsxRuntimeExports.jsxs("div",{className:"fl-crf-box",children:[jsxRuntimeExports.jsxs("div",{className:"fl-cr-box",children:[jsxRuntimeExports.jsx("div",{className:"fl-content",children:a}),jsxRuntimeExports.jsx("div",{className:"fl-right",children:i})]}),jsxRuntimeExports.jsx("div",{className:"fl-footer",children:t})]})]})]})},BluePrint=()=>jsxRuntimeExports.jsx(FrameLayout,{header:jsxRuntimeExports.jsx(BPHeader,{}),footer:jsxRuntimeExports.jsx(BPFooter,{}),left:jsxRuntimeExports.jsx(BPLeft,{}),right:jsxRuntimeExports.jsx(BPRight,{}),content:jsxRuntimeExports.jsx(BPCanvas,{})}),BluePrintHdImpl=()=>ReactDOM.createPortal(jsxRuntimeExports.jsx("div",{style:{position:"relative",top:-window.innerHeight,zIndex:2},children:jsxRuntimeExports.jsx(BluePrint,{})}),document.body),__vite_glob_0_0$1=Object.freeze(Object.defineProperty({__proto__:null,BluePrintHdImpl},Symbol.toStringTag,{value:"Module"}));class AbstractHeaderItem{}class BluePrintHdItem extends AbstractHeaderItem{getHeaderItemInfo(){const{setBluePrintVisible:e}=headerStore;return{icon:CodeSandboxSquareFilled,name:"蓝图交互",order:0,onClick:()=>{const{setTargetIds:t}=eventOperateStore$1;t([]),e(!0)}}}}const __vite_glob_0_1$1=Object.freeze(Object.defineProperty({__proto__:null,default:BluePrintHdItem},Symbol.toStringTag,{value:"Module"}));class CanvasHdConfigImpl extends reactExports.Component{constructor(t){super(t);D(this,"config",null);D(this,"state",{_rasterize:!1});D(this,"onClose",()=>{const{setCanvasVisible:t}=headerStore;t(!1)});D(this,"doSave",t=>{const{updateCanvasConfig:n}=designerStore$1;console.log(this.config),n(this.config),t.preventDefault(),this.onClose()});const{canvasConfig:n}=designerStore$1;this.config={...n},this.state={_rasterize:n.rasterize||!1}}render(){const{_rasterize:t}=this.state,{canvasVisible:n}=headerStore,{width:i,height:a,rasterize:o,dragStep:s,resizeStep:l}=this.config;return jsxRuntimeExports.jsx(Dialog,{className:"lc-header-canvas",title:"画布设置",visible:n,onClose:this.onClose,children:jsxRuntimeExports.jsxs("form",{onSubmit:this.doSave,children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:jsxRuntimeExports.jsxs(Grid,{gridGap:"15px",columns:3,children:[jsxRuntimeExports.jsx(Input,{label:"宽度",required:!0,type:"number",defaultValue:i,min:500,onChange:c=>this.config.width=c}),jsxRuntimeExports.jsx(Input,{label:"高度",required:!0,type:"number",defaultValue:a,min:300,onChange:c=>this.config.height=c}),jsxRuntimeExports.jsx(Switch,{label:"栅格化",defaultValue:o,gridColumn:"1/2",onChange:c=>{this.config.rasterize=c,this.setState({_rasterize:c})}}),jsxRuntimeExports.jsx(Input,{label:"拖拽",disabled:!t,type:"number",defaultValue:s,min:1,onChange:c=>this.config.dragStep=c}),jsxRuntimeExports.jsx(Input,{label:"缩放",disabled:!t,type:"number",defaultValue:l,min:1,onChange:c=>this.config.resizeStep=c})]})}),jsxRuntimeExports.jsx("p",{className:"canvas-config-desc",children:"说明：修改画布设置，会对整体效果产生较大影响，建议先调试好画布设置后再进行大屏设计"}),jsxRuntimeExports.jsxs("div",{className:"lc-header-canvas-footer",children:[jsxRuntimeExports.jsx(Button,{type:"submit",children:"保存"}),jsxRuntimeExports.jsx(Button,{type:"button",onClick:this.onClose,children:"取消"})]})]})})}}const CanvasHdConfigImpl$1=observer(CanvasHdConfigImpl),__vite_glob_0_2$1=Object.freeze(Object.defineProperty({__proto__:null,default:CanvasHdConfigImpl$1},Symbol.toStringTag,{value:"Module"}));class CanvasHdItem extends AbstractHeaderItem{getHeaderItemInfo(){const{setCanvasVisible:e}=headerStore;return{icon:SettingFilled$1,name:"画布设置",order:1,onClick:()=>{e(!0)}}}}const __vite_glob_0_3$1=Object.freeze(Object.defineProperty({__proto__:null,default:CanvasHdItem},Symbol.toStringTag,{value:"Module"}));class PreViewHdItem extends AbstractHeaderItem{getHeaderItemInfo(){return{icon:EyeFilled,name:"预览",order:4,onClick:()=>{const{saveType:e,id:t}=URLUtil.parseUrlParams();window.open(`/light-chaser-app/#/view?id=${t}&saveType=${e}&mode=${DesignerMode.VIEW}`,"_blank")}}}}const __vite_glob_0_4$1=Object.freeze(Object.defineProperty({__proto__:null,default:PreViewHdItem},Symbol.toStringTag,{value:"Module"}));class ProjectHdItem{getHeaderItemInfo(){const{setProjectVisible:e}=headerStore;return{icon:SettingFilled$1,name:"项目设置",order:0,onClick:()=>{e(!0)}}}}const __vite_glob_0_5$1=Object.freeze(Object.defineProperty({__proto__:null,default:ProjectHdItem},Symbol.toStringTag,{value:"Module"}));class ProjectHdItemImpl extends reactExports.Component{constructor(t){super(t);D(this,"config",null);D(this,"onClose",()=>{const{setProjectVisible:t}=headerStore;t(!1)});D(this,"doSave",t=>{t.preventDefault();const{updateProjectConfig:n}=designerStore$1;console.log(this.config),n(this.config),this.onClose()});const{projectConfig:n}=designerStore$1;this.config={...n}}componentWillUnmount(){this.config={}}render(){const{projectVisible:t}=headerStore,{name:n,des:i,state:a,saveType:o}=this.config;return jsxRuntimeExports.jsx(Dialog,{title:"项目设置",className:"lc-header-project-set",visible:t,onClose:this.onClose,children:jsxRuntimeExports.jsxs("form",{onSubmit:this.doSave,children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:jsxRuntimeExports.jsxs(Grid,{gridGap:"15px",columns:2,children:[jsxRuntimeExports.jsx(Input,{label:"项目名称",required:!0,maxLength:20,defaultValue:n,onChange:s=>this.config.name=s}),jsxRuntimeExports.jsx(Input,{label:"项目描述",required:!0,maxLength:60,defaultValue:i,onChange:s=>this.config.des=s}),jsxRuntimeExports.jsx(Radio,{label:"项目状态",onChange:s=>this.config.state=s,gridColumn:"1/3",defaultValue:a,options:[{label:"草稿",value:ProjectState.DRAFT},{label:"发布",value:ProjectState.PUBLISH},{label:"封存",value:ProjectState.SEALED}]}),jsxRuntimeExports.jsx(Select,{label:"存储类型",options:[{value:"1",label:"本地存储"}],defaultValue:o})]})}),jsxRuntimeExports.jsxs("div",{className:"lc-header-project-footer",children:[jsxRuntimeExports.jsx(Button,{type:"submit",children:"保存"}),jsxRuntimeExports.jsx(Button,{type:"button",onClick:this.onClose,children:"取消"})]})]})})}}const __vite_glob_0_6$1=Object.freeze(Object.defineProperty({__proto__:null,default:ProjectHdItemImpl},Symbol.toStringTag,{value:"Module"}));class AbstractRollback{}class DragRollbackImpl extends AbstractRollback{redo(e){var s;if(!e)return;const{movableRef:t,setBackoff:n,setTargetIds:i}=eventOperateStore$1,{next:a}=e;let o=a;i(o.ids),n(!0),(s=t==null?void 0:t.current)==null||s.request("draggable",{x:o.x,y:o.y},!0)}undo(e){var s;if(!e)return;const{movableRef:t,setBackoff:n,setTargetIds:i}=eventOperateStore$1,{prev:a}=e;let o=a;i(o.ids),n(!0),(s=t==null?void 0:t.current)==null||s.request("draggable",{x:o.x,y:o.y},!0)}}const dragRollbackImpl=new DragRollbackImpl;class ResizeRollbackImpl extends AbstractRollback{redo(e){var s;if(!e)return;const{movableRef:t,setBackoff:n,setTargetIds:i}=eventOperateStore$1,{next:a}=e;let o=a;i(o.ids),n(!0),(s=t==null?void 0:t.current)==null||s.request("resizable",{offsetWidth:o.width,offsetHeight:o.height,direction:o.direction},!0)}undo(e){var s;if(!e)return;const{movableRef:t,setBackoff:n,setTargetIds:i}=eventOperateStore$1,{prev:a}=e;let o=a;i(o.ids),n(!0),(s=t==null?void 0:t.current)==null||s.request("resizable",{offsetWidth:o.width,offsetHeight:o.height,direction:o.direction},!0)}}const resizeRollbackImpl=new ResizeRollbackImpl;class AddRollbackImpl extends AbstractRollback{redo(e){if(!e)return;const{next:t}=e,{addItem:n}=designerStore$1;t.forEach(i=>n(i.data.layerConfig))}undo(e){if(!e)return;const{setTargetIds:t,focusDesignerCanvas:n}=eventOperateStore$1,{next:i}=e;let a=i;const{delItem:o}=designerStore$1,s=[];a.forEach(f=>s.push(f.id)),o(s),t([]);const{setContentVisible:l,activeConfig:c,activeElem:u}=rightStore;s.includes(u.id)&&(l(!1),c(null,"")),n()}}const addRollbackImpl=new AddRollbackImpl;class DelRollbackImpl extends AbstractRollback{redo(e){if(!e)return;const{prev:t}=e,{delItem:n}=designerStore$1,i=[];t.forEach(s=>i.push(s.id)),n(i);const{setTargetIds:a,focusDesignerCanvas:o}=eventOperateStore$1;a([]),o()}undo(e){if(!e)return;const{setTargetIds:t}=eventOperateStore$1,{prev:n}=e;let i=n;const{addItem:a,elemConfigs:o}=designerStore$1,s=[];i.forEach(l=>{a(l.data.layerConfig),o[l.id]=l.data.elemConfig,s.push(l.id)}),t(s)}}const delRollbackImpl=new DelRollbackImpl;class StyleRollbackImpl extends AbstractRollback{redo(e){const{next:t}=e;if(t){const{id:n,data:i}=t,{compController:a}=designerStore$1,o=a[n];o&&o.update(i);const{visible:s,setContentVisible:l}=rightStore;s&&(l(!1),setTimeout(()=>{l(!0)},1))}}undo(e){const{prev:t}=e;if(t){const{id:n,data:i}=t,{compController:a}=designerStore$1,o=a[n];o&&o.update(i);const{visible:s,setContentVisible:l}=rightStore;s&&(l(!1),setTimeout(()=>{l(!0)},1))}}}const styleRollbackImpl=new StyleRollbackImpl;class HideRollbackImpl extends AbstractRollback{redo(e){if(!e)return;const{next:t}=e,{updateLayer:n}=designerStore$1;t&&n(t);const{visible:i,layerInstances:a}=layerListStore$1;i&&(t==null||t.forEach(o=>{const{id:s,hide:l}=o;a[s].setState({hide:l})}))}undo(e){if(!e)return;const{prev:t}=e,{updateLayer:n}=designerStore$1;t&&n(t);const{visible:i,layerInstances:a}=layerListStore$1;i&&(t==null||t.forEach(o=>{const{id:s,hide:l}=o;a[s].setState({hide:l})}))}}const hideRollbackImpl=new HideRollbackImpl;class LockRollbackImpl extends AbstractRollback{redo(e){const{next:t}=e,{updateLayer:n}=designerStore$1;t&&n(t);const{visible:i,layerInstances:a}=layerListStore$1;i&&(t==null||t.forEach(o=>{const{id:s,lock:l}=o;a[s].setState({lock:l})}))}undo(e){const{prev:t}=e,{updateLayer:n}=designerStore$1;t&&n(t);const{visible:i,layerInstances:a}=layerListStore$1;i&&(t==null||t.forEach(o=>{const{id:s,lock:l}=o;a[s].setState({lock:l})}))}}const lockRollbackImpl=new LockRollbackImpl;class OrderRollBackImpl extends AbstractRollback{redo(e){const{next:t}=e,{updateLayer:n}=designerStore$1;t&&n(t)}undo(e){const{prev:t}=e,{updateLayer:n}=designerStore$1;t&&n(t)}}const orderRollBackImpl=new OrderRollBackImpl;class UpdLayerGroupRollbackImpl extends AbstractRollback{redo(e){const{next:t}=e;if(t){const n=[];t.forEach(a=>{n.push(a)});const{updateLayer:i}=designerStore$1;i(n)}}undo(e){const{prev:t}=e;if(t){const n=[];t.forEach(a=>{n.push(a)});const{updateLayer:i}=designerStore$1;i(n)}}}const updLayerGroupRollbackImpl=new UpdLayerGroupRollbackImpl,undoRedoMap=new Map;undoRedoMap.set(OperateType.DRAG,dragRollbackImpl);undoRedoMap.set(OperateType.RESIZE,resizeRollbackImpl);undoRedoMap.set(OperateType.ADD,addRollbackImpl);undoRedoMap.set(OperateType.DEL,delRollbackImpl);undoRedoMap.set(OperateType.UPD_STYLE,styleRollbackImpl);undoRedoMap.set(OperateType.HIDE,hideRollbackImpl);undoRedoMap.set(OperateType.LOCK,lockRollbackImpl);undoRedoMap.set(OperateType.ORDER,orderRollBackImpl);undoRedoMap.set(OperateType.UPD_LAYER_GROUP,updLayerGroupRollbackImpl);class RuntimeConfigStore{constructor(){D(this,"auxiliaryBorder",!1);D(this,"setAuxiliaryBorder",e=>{this.auxiliaryBorder=e});makeObservable(this,{auxiliaryBorder:observable,setAuxiliaryBorder:action})}}const runtimeConfigStore=new RuntimeConfigStore;class FooterStore{constructor(){D(this,"hotKeyVisible",!1);D(this,"setHotKeyVisible",e=>this.hotKeyVisible=e);makeObservable(this,{hotKeyVisible:observable,setHotKeyVisible:action})}}const footerStore=new FooterStore,selectAll=()=>{var i;const{layerConfigs:r}=designerStore$1,{setTargetIds:e,calculateGroupCoordinate:t}=eventOperateStore$1,n=Object.values(r).map(a=>{if(!a.lock&&!a.hide)return a.id});e(n),n.length>0&&t((i=n.map(a=>document.getElementById(a)))==null?void 0:i.filter(a=>!!a))},doCopy=()=>{let{targetIds:r,setTargetIds:e}=eventOperateStore$1;if(!r||r.length===0)return;const{copyItem:t}=designerStore$1;let n=t(r);setTimeout(()=>e(n),10)},doLock=()=>{const{targetIds:r,setTargetIds:e}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:t}=designerStore$1;let n=[];for(const i of r){let a=t[i];n.push({...a,lock:!0})}historyRecordOperateProxy$1.doLockUpd(n),e([])},doUnLock=()=>{const{setTargetIds:r,targetIds:e}=eventOperateStore$1;if(!e||e.length===0)return;const{layerConfigs:t}=designerStore$1;let n=[];e.filter(i=>t[i].lock).forEach(i=>{n.push({id:i,lock:!1})}),historyRecordOperateProxy$1.doLockUpd(n),r([])},toTop=()=>{let{maxLevel:r,setMaxLevel:e,targetIds:t}=eventOperateStore$1;if(!t||t.length===0)return;const{layerConfigs:n}=designerStore$1;let i=[];t.forEach(a=>{let o=n[a];i.push({...o,order:++r})}),e(r),historyRecordOperateProxy$1.doOrderUpd(i)},toBottom=()=>{let{minLevel:r,setMinLevel:e,targetIds:t}=eventOperateStore$1;if(!t||t.length===0)return;const{layerConfigs:n}=designerStore$1;let i=[];t.forEach(a=>{let o=n[a];i.push({...o,order:--r})}),e(r),historyRecordOperateProxy$1.doOrderUpd(i)},doDelete=()=>{const{targetIds:r}=eventOperateStore$1;if(r&&r.length>0){const{delNode:e,bpNodeLayoutMap:t}=bpStore$1,n=[];r.forEach(i=>{t[i]&&n.push(i)}),n.length>0&&e(n)}historyRecordOperateProxy$1.doDelete()},doSave=lodashExports.throttle(()=>new Promise(()=>{const{saveType:r,id:e}=URLUtil.parseUrlParams(),t=designerStore$1.getData(),{bpAPMap:n,bpLines:i,bpAPLineMap:a,getAllNodeConfig:o,bpNodeLayoutMap:s}=bpStore$1;t.bpAPMap=n,t.bpLines=i,t.bpAPLineMap=a,t.bpNodeConfigMap=o(),t.bpNodeLayoutMap=s;const l={id:e,dataJson:JSON.stringify(t)};operatorMap[r].updateProject(l).then(c=>{c?message.success("保存成功"):message.error("保存失败")})}),5e3),doHide=()=>{const{targetIds:r,setTargetIds:e}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:t}=designerStore$1;let n=[];r.forEach(i=>{let a=t[i];n.push({...a,hide:!0})}),historyRecordOperateProxy$1.doHideUpd(n),e([])},doGrouping=()=>{historyRecordOperateProxy$1.doGrouping()},doUnGrouping=()=>{historyRecordOperateProxy$1.doUnGrouping()},doMoveUp=()=>{var a,o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{dragStep:i=1}}=designerStore$1;if(r.length===1){let s=r[0].id,l=n[s].y-i;(a=e==null?void 0:e.current)==null||a.request("draggable",{y:l},!0)}else{const s=(t==null?void 0:t.minY)-i;(o=e==null?void 0:e.current)==null||o.request("draggable",{y:s},!0)}},doMoveDown=()=>{var a,o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{dragStep:i=1}}=designerStore$1;if(r.length===1){let s=r[0].id,l=n[s].y+i;(a=e==null?void 0:e.current)==null||a.request("draggable",{y:l},!0)}else{const s=(t==null?void 0:t.minY)+i;(o=e==null?void 0:e.current)==null||o.request("draggable",{y:s},!0)}},doMoveLeft=()=>{var a,o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{dragStep:i=1}}=designerStore$1;if(r.length===1){let s=r[0].id,l=n[s].x;(a=e==null?void 0:e.current)==null||a.request("draggable",{x:l-i},!0)}else{const s=(t==null?void 0:t.minX)-i;(o=e==null?void 0:e.current)==null||o.request("draggable",{x:s},!0)}},doMoveRight=()=>{var a,o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{dragStep:i=1}}=designerStore$1;if(r.length===1){let s=r[0].id,l=n[s].x;(a=e==null?void 0:e.current)==null||a.request("draggable",{x:l+i},!0)}else{const s=(t==null?void 0:t.minX)+i;(o=e==null?void 0:e.current)==null||o.request("draggable",{x:s},!0)}},doBaseBottomEnlargeUp=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;if(r.length===1){let s=r[0].id;a=n[s].height+i}else a=t.groupHeight+i;(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetHeight:a,direction:[1,-1]},!0)},doBaseUpEnlargeDown=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;if(r.length===1){let s=r[0].id;a=n[s].height+i}else a=t.groupHeight+i;(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetHeight:a,direction:[1,1]},!0)},doBaseRightEnlargeLeft=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;if(r.length===1){let s=r[0].id;a=n[s].width+i}else a=t.groupWidth+i;(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetWidth:a,direction:[-1,1]},!0)},doBaseLeftEnlargeRight=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;if(r.length===1){let s=r[0].id;a=n[s].width+i}else a=t.groupWidth+i;(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetWidth:a,direction:[1,1]},!0)},doBaseBottomDecreaseUp=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;r.length===1?a=n[r[0].id].height-i:a=t.groupHeight-i,(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetHeight:a,direction:[1,-1]},!0)},doBaseUpDecreaseDown=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;if(r.length===1){let s=r[0].id;a=n[s].height-i}else a=t.groupHeight-i;(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetHeight:a,direction:[1,1]},!0)},doBaseRightDecreaseLeft=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;if(r.length===1){let s=r[0].id;a=n[s].width-i}else a=t.groupWidth-i;(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetWidth:a,direction:[-1,1]},!0)},doBaseLeftDecreaseRight=()=>{var o;const{targets:r,movableRef:e,groupCoordinate:t}=eventOperateStore$1;if(!r||r.length===0)return;const{layerConfigs:n,canvasConfig:{resizeStep:i=1}}=designerStore$1;let a;if(r.length===1){let s=r[0].id;a=n[s].width-i}else a=t.groupWidth-i;(o=e==null?void 0:e.current)==null||o.request("resizable",{offsetWidth:a,direction:[1,1]},!0)},undo=()=>{let r=historyOperator.backoff();if(!r)return;const{actions:e}=r;e.forEach(t=>{var i;const{type:n}=t;(i=undoRedoMap.get(n))==null||i.undo(t)})},redo=()=>{let r=historyOperator.forward();if(!r)return;const{actions:e}=r;e.forEach(t=>{var i;const{type:n}=t;(i=undoRedoMap.get(n))==null||i.redo(t)})},toggleSecondaryBorder=()=>{const{auxiliaryBorder:r,setAuxiliaryBorder:e}=runtimeConfigStore;if(!r){const n=document.getElementsByClassName("lc-comp-item");n&&Array.from(n).forEach(i=>{i.style.border="1px solid #65eafc"})}else{const n=document.getElementsByClassName("lc-comp-item");n&&Array.from(n).forEach(i=>{i.style.border="none"})}e(!r)},toggleProjectConfig=()=>{const{projectVisible:r,setProjectVisible:e}=headerStore;console.log(r),e(!r)},toggleCanvasConfig=()=>{const{canvasVisible:r,setCanvasVisible:e}=headerStore;e(!r)},toggleGlobalThemeConfig=()=>{const{themeVisible:r,setThemeVisible:e}=headerStore;e(!r)},toggleHotKeyDes=()=>{const{hotKeyVisible:r,setHotKeyVisible:e}=footerStore;e(!r)},toggleLayer=()=>{const{setVisible:r,visible:e}=layerListStore$1;r&&r(!e)},delBPNode=()=>{const{bluePrintVisible:r}=headerStore;if(!r)return;const{selectedNodes:e,delNode:t}=bpStore$1;if(e.length===0)return;const n=e.map(o=>o.id.split(":")[1]);t(n);const{setUsedLayerNodes:i,usedLayerNodes:a}=bpLeftStore$1;n.forEach(o=>{o in a&&i(o,!1)}),reRenderAllLine()},delBPLine=()=>{const{bluePrintVisible:r}=headerStore;if(!r)return;const{selectedLines:e,delLine:t}=bpStore$1;if(e.length===0)return;const n=e.map(i=>i.id);t(n),reRenderAllLine()};class SaveHdItem extends AbstractHeaderItem{getHeaderItemInfo(){return{icon:SaveFilled$1,name:"保存",order:3,onClick:()=>{doSave()}}}}const __vite_glob_0_7$1=Object.freeze(Object.defineProperty({__proto__:null,default:SaveHdItem},Symbol.toStringTag,{value:"Module"}));class ThemeHdItem extends AbstractHeaderItem{getHeaderItemInfo(){const{setThemeVisible:e}=headerStore;return{icon:SkinFilled$1,name:"主题设置",order:2,onClick:()=>{e(!0)}}}}const __vite_glob_0_8$1=Object.freeze(Object.defineProperty({__proto__:null,default:ThemeHdItem},Symbol.toStringTag,{value:"Module"})),closeIcon="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='25'%20height='25'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%208L40%2040'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2040L40%208'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";class ThemeItem extends reactExports.Component{constructor(){super(...arguments);D(this,"onSelected",()=>{const{onSelected:t,id:n="",name:i="",colors:a}=this.props;t&&t({id:n,name:i,colors:a})})}render(){const{colors:t,selected:n=!1,itemStyle:i,name:a,id:o,showOperator:s=!1,onDel:l}=this.props;return jsxRuntimeExports.jsxs("div",{id:o,className:`lc-theme-item ${n?"lc-theme-item-active":""}`,style:i,onClick:this.onSelected,children:[jsxRuntimeExports.jsxs("div",{className:"lc-theme-item-header",children:[jsxRuntimeExports.jsx("div",{className:"lc-theme-item-title",children:a}),s&&jsxRuntimeExports.jsx("div",{className:"lc-theme-item-operators",children:jsxRuntimeExports.jsx("div",{className:"operator-item",onClick:c=>{c.stopPropagation(),l&&l(o||"")},children:jsxRuntimeExports.jsx("img",{src:closeIcon,alt:"删除"})})})]}),jsxRuntimeExports.jsx("div",{className:"lc-theme-item-body",children:Object.keys(this.props.colors).map((c,u)=>jsxRuntimeExports.jsx(ColorPicker,{disabled:!0,value:t[c]},u))})]})}}class ThemeList extends reactExports.Component{constructor(){super(...arguments);D(this,"state",{activeId:""});D(this,"onDel",t=>{const{onDel:n}=this.props,{themeConfig:i,updateThemeConfig:a}=designerStore$1;let o=i.filter(s=>s.id!==t);a(o),n&&n(t)});D(this,"onSelected",t=>{this.setState({activeId:t.id});const{onSelected:n}=this.props;n&&n(t)})}render(){const{activeId:t}=this.state,{showOperator:n}=this.props,i=designerStore$1.themeConfig;let a=[];for(let o=0;o<i.length;o++)a.push(jsxRuntimeExports.jsx(ThemeItem,{id:i[o].id,selected:i[o].id===t,name:i[o].name,showOperator:n,onDel:this.onDel,onSelected:this.onSelected,colors:i[o].colors},o));return jsxRuntimeExports.jsx("div",{className:"lc-theme-list",style:{width:"100%"},children:a})}}const ThemeList$1=observer(ThemeList);class ThemeEditor extends reactExports.Component{constructor(t){super(t);D(this,"initThemeConfig",{id:"",name:"",colors:{main:"#000000",mainText:"#000000",background:"#000000",subText:"#000000",supplementFirst:"#000000",supplementSecond:"#000000"}});D(this,"state",{data:[],themeConfig:this.initThemeConfig});D(this,"nameChanged",t=>{this.setState({themeConfig:{...this.state.themeConfig,name:t}})});D(this,"mainColorChanged",t=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,main:t}}})});D(this,"mainTextChanged",t=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,mainText:t}}})});D(this,"subTextChanged",t=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,subText:t}}})});D(this,"backgroundChanged",t=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,background:t}}})});D(this,"supplementFirstChanged",t=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,supplementFirst:t}}})});D(this,"supplementSecondChanged",t=>{this.setState({themeConfig:{...this.state.themeConfig,colors:{...this.state.themeConfig.colors,supplementSecond:t}}})});D(this,"doSaveOrUpd",t=>{t==null||t.preventDefault();const{data:n,themeConfig:i}=this.state;if(i.id===""){n.length>20&&alert("主题数量已达上限");for(let o=0;o<n.length;o++)if(n[o].name===i.name){alert("主题名称重复");return}i.id=this.state.data.length+1,n.push({...i})}else{for(let o=0;o<n.length;o++)if(n[o].id===i.id){n[o]={...i};break}i.id=""}this.setState({data:n,themeConfig:this.initThemeConfig});const{updateThemeConfig:a}=designerStore$1;a(n)});D(this,"onDel",t=>{const{data:n}=this.state;let i=n.filter(a=>a.id!==t);this.setState({data:i})});D(this,"onSelected",t=>{const{themeConfig:n}=this.state;n.id===t.id?this.setState({themeConfig:this.initThemeConfig}):this.setState({themeConfig:t})});const n=designerStore$1.themeConfig;this.state.data=lodashExports.cloneDeep(n)||[]}render(){const{themeConfig:t}=this.state;return jsxRuntimeExports.jsxs("div",{className:"lc-theme-editor",children:[jsxRuntimeExports.jsx("div",{className:"editor-left",children:jsxRuntimeExports.jsxs("form",{onSubmit:this.doSaveOrUpd,children:[jsxRuntimeExports.jsx(ItemPanel,{label:"主题信息",children:jsxRuntimeExports.jsx(UIContainer,{label:"名称",children:jsxRuntimeExports.jsx(Input,{value:t.name,onChange:this.nameChanged,required:!0})})}),jsxRuntimeExports.jsx(ItemPanel,{label:"颜色定义",children:jsxRuntimeExports.jsxs(Grid,{columns:3,gridGap:"15px",children:[jsxRuntimeExports.jsx(UIContainer,{label:"主体色",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.mainColorChanged,width:"100%",showBorder:!0,showText:!0,radius:2,value:t.colors.main})}),jsxRuntimeExports.jsx(UIContainer,{label:"主文字",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.mainTextChanged,width:"100%",showBorder:!0,showText:!0,radius:2,value:t.colors.mainText})}),jsxRuntimeExports.jsx(UIContainer,{label:"辅文字",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.subTextChanged,width:"100%",showBorder:!0,showText:!0,radius:2,value:t.colors.subText})}),jsxRuntimeExports.jsx(UIContainer,{label:"背景色",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.backgroundChanged,width:"100%",showBorder:!0,showText:!0,radius:2,value:t.colors.background})}),jsxRuntimeExports.jsx(UIContainer,{label:"补充一",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.supplementFirstChanged,width:"100%",showBorder:!0,showText:!0,radius:2,value:t.colors.supplementFirst})}),jsxRuntimeExports.jsx(UIContainer,{label:"补充二",children:jsxRuntimeExports.jsx(ColorPicker,{onChange:this.supplementSecondChanged,width:"100%",showBorder:!0,showText:!0,radius:2,value:t.colors.supplementSecond})})]})}),jsxRuntimeExports.jsx("p",{style:{color:"#6e6e6e"},children:"说明：自定义主题色的色值应该保持在同一色系。以确保整体统一的风格。主题色占据主要面积"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("div",{className:"theme-operate-btn",children:jsxRuntimeExports.jsx(Button,{type:"submit",children:"添加 / 更新"})})]})}),jsxRuntimeExports.jsx("div",{className:"editor-right",children:jsxRuntimeExports.jsx(ItemPanel,{label:"主题列表",children:jsxRuntimeExports.jsx(ThemeList$1,{showOperator:!0,onSelected:this.onSelected,onDel:this.onDel})})})]})}}class ThemeHdItemImpl extends reactExports.Component{constructor(){super(...arguments);D(this,"selectedTheme");D(this,"state",{openEditor:!1});D(this,"onClose",()=>{const{setThemeVisible:t}=headerStore;t(!1)});D(this,"openTheme",t=>{this.setState({open:t})});D(this,"updateGlobalTheme",()=>{const{flashGlobalTheme:t}=designerStore$1;this.selectedTheme&&(t(this.selectedTheme),this.onClose())});D(this,"openEditor",()=>{this.setState({openEditor:!0})});D(this,"closeEditor",()=>{this.setState({openEditor:!1})})}render(){const{themeVisible:t}=headerStore,{openEditor:n}=this.state;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Dialog,{title:"主题设置(全局)",className:"lc-theme-config-global",visible:t,onClose:this.onClose,width:450,children:[jsxRuntimeExports.jsx(Button,{style:{width:"100%",height:50,margin:"5px 0 10px 0"},onClick:this.openEditor,children:"+ 自定义主题"}),jsxRuntimeExports.jsx("div",{style:{maxHeight:360,overflowY:"scroll",padding:"3px 0 6px 0"},children:jsxRuntimeExports.jsx(ThemeList$1,{onSelected:i=>this.selectedTheme=i})}),jsxRuntimeExports.jsx("p",{style:{color:"#6e6e6e"},children:"警告：全局主题设置在更新后，会影响到当前项目的所有组件。请谨慎操作！"}),jsxRuntimeExports.jsx(Button,{style:{width:"100%",margin:"10px 0 5px 0"},onClick:this.updateGlobalTheme,children:"更新全局主题"})]}),jsxRuntimeExports.jsx(Dialog,{onClose:this.closeEditor,title:"编辑主题",visible:n,width:860,children:jsxRuntimeExports.jsx(ThemeEditor,{})})]})}}const __vite_glob_0_9$1=Object.freeze(Object.defineProperty({__proto__:null,default:ThemeHdItemImpl},Symbol.toStringTag,{value:"Module"}));class AbstractDefinition{getEventList(){return[]}getActionList(){return[]}}class AntdCommonDefinition extends AbstractDefinition{getEventList(){return[{id:"globalClick",name:"点击整个组件时"},{id:"elementClick",name:"点击图形元素时"},{id:"legendClick",name:"点击图例时"},{id:"elementNameClick",name:"点击图例名称时"},{id:"axisLabelClick",name:"点击坐标文字时"}]}getActionList(){return[{name:"显示",id:"show",handler:(e,t)=>{e.container.style.display="block"}},{name:"隐藏",id:"hide",handler:(e,t)=>{e.container.style.display="none"}},{name:"更新组件配置",id:"updateConfig",handler:(e,t)=>{e.update(t)}}]}}const __vite_glob_0_0=Object.freeze(Object.defineProperty({__proto__:null,AntdCommonDefinition},Symbol.toStringTag,{value:"Module"})),getDefaultMenuList=()=>[{icon:AppstoreFilled$1,name:"基础",key:"base"},{icon:HighlightFilled$1,name:"样式",key:"style"},{icon:DatabaseFilled,name:"数据",key:"data"},{icon:InteractionFilled$1,name:"映射",key:"mapping"},{icon:SkinFilled$1,name:"主题",key:"theme"}];var extendStatics$1=function(r,e){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},extendStatics$1(r,e)};function __extends$1(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$1(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign$1.apply(this,arguments)};function __rest(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function __awaiter(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,e||[])).next())})}function __generator(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function __values(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function __spreadArrays(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function __spreadArray$1(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var isArrayLike=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},contains=function(r,e){return isArrayLike(r)?r.indexOf(e)>-1:!1},filter=function(r,e){if(!isArrayLike(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];e(i,n)&&t.push(i)}return t},difference=function(r,e){return e===void 0&&(e=[]),filter(r,function(t){return!contains(e,t)})},toString$3={}.toString,isType$1=function(r,e){return toString$3.call(r)==="[object "+e+"]"};const isFunction=function(r){return isType$1(r,"Function")};var isNil=function(r){return r==null};const isArray$3=function(r){return Array.isArray?Array.isArray(r):isType$1(r,"Array")},isObject=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function each$1(r,e){if(r){var t;if(isArray$3(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(isObject(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}var keys=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return each$1(r,function(t,n){isFunction(r)&&n==="prototype"||e.push(n)}),e};function isMatch(r,e){var t=keys(e),n=t.length;if(isNil(r))return!n;for(var i=0;i<n;i+=1){var a=t[i];if(e[a]!==r[a]||!(a in r))return!1}return!0}var isObjectLike$1=function(r){return typeof r=="object"&&r!==null},isPlainObject$1=function(r){if(!isObjectLike$1(r)||!isType$1(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e};function find$1(r,e){if(!isArray$3(r))return null;var t;if(isFunction(e)&&(t=e),isPlainObject$1(e)&&(t=function(i){return isMatch(i,e)}),t){for(var n=0;n<r.length;n+=1)if(t(r[n]))return r[n]}return null}function findIndex(r,e,t){t===void 0&&(t=0);for(var n=t;n<r.length;n++)if(e(r[n],n))return n;return-1}var firstValue=function(r,e){for(var t=null,n=0;n<r.length;n++){var i=r[n],a=i[e];if(!isNil(a)){isArray$3(a)?t=a[0]:t=a;break}}return t},flatten=function(r){if(!isArray$3(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e};const max$2=function(r){if(isArray$3(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])},min$2=function(r){if(isArray$3(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var getRange=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(isArray$3(r[0])){for(var t=[],n=0;n<r.length;n++)t=t.concat(r[n]);e=t}var i=max$2(e),a=min$2(e);return{min:a,max:i}},splice=Array.prototype.splice,pullAt=function r(e,t){if(!isArrayLike(e))return[];for(var n=e?t.length:0,i=n-1;n--;){var a=void 0,o=t[n];(n===i||o!==a)&&(a=o,splice.call(e,o,1))}return e},reduce=function(r,e,t){if(!isArray$3(r)&&!isPlainObject$1(r))return r;var n=t;return each$1(r,function(i,a){n=e(n,i,a)}),n},remove=function(r,e){var t=[];if(!isArrayLike(r))return t;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];e(o,n,r)&&(t.push(o),i.push(n))}return pullAt(r,i),t};const isString=function(r){return isType$1(r,"String")};function sortBy(r,e){var t;if(isFunction(e))t=function(i,a){return e(i)-e(a)};else{var n=[];isString(e)?n.push(e):isArray$3(e)&&(n=e),t=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(t),r}function uniq$2(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}const valuesOfKey=function(r,e){for(var t=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[e];if(!isNil(o)){isArray$3(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(t.push(l),n[l]=!0)}}}return t};function head(r){if(isArrayLike(r))return r[0]}function last(r){if(isArrayLike(r)){var e=r;return e[e.length-1]}}var every=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0},some=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1},hasOwnProperty$2=Object.prototype.hasOwnProperty;function groupBy(r,e){if(!e||!isArray$3(r))return{};for(var t={},n=isFunction(e)?e:function(s){return s[e]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),hasOwnProperty$2.call(t,i)?t[i].push(o):t[i]=[o]}return t}function groupToMap(r,e){if(!e)return{0:r};if(!isFunction(e)){var t=isArray$3(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=t.length;a<o;a++)i+=n[t[a]]&&n[t[a]].toString();return i}}return groupBy(r,e)}const group$1=function(r,e){if(!e)return[r];var t=groupToMap(r,e),n=[];for(var i in t)n.push(t[i]);return n};var clamp=function(r,e,t){return r<e?e:r>t?t:r},fixedBase=function(r,e){var t=e.toString(),n=t.indexOf(".");if(n===-1)return Math.round(r);var i=t.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},isNumber$1=function(r){return isType$1(r,"Number")},PRECISION=1e-5;function isNumberEqual$1(r,e,t){return t===void 0&&(t=PRECISION),Math.abs(r-e)<t}const maxBy=function(r,e){if(isArray$3(r)){for(var t,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=isFunction(e)?e(a):a[e];o>n&&(t=a,n=o)}return t}},minBy=function(r,e){if(isArray$3(r)){for(var t,n=1/0,i=0;i<r.length;i++){var a=r[i],o=isFunction(e)?e(a):a[e];o<n&&(t=a,n=o)}return t}};var mod$1=function(r,e){return(r%e+e)%e},RADIAN=Math.PI/180,toRadian=function(r){return RADIAN*r};const has=function(r,e){return r.hasOwnProperty(e)};var values=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return each$1(r,function(t,n){isFunction(r)&&n==="prototype"||e.push(t)}),e};const toString$2=function(r){return isNil(r)?"":r.toString()};var lowerCase=function(r){return toString$2(r).toLowerCase()};function substitute(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var upperFirst=function(r){var e=toString$2(r);return e.charAt(0).toUpperCase()+e.substring(1)},toString$1={}.toString,getType=function(r){return toString$1.call(r).replace(/^\[object /,"").replace(/]$/,"")},isBoolean=function(r){return isType$1(r,"Boolean")},isDate=function(r){return isType$1(r,"Date")},isNull=function(r){return r===null},objectProto=Object.prototype,isPrototype=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||objectProto;return r===t},isUndefined=function(r){return r===void 0},isElement=function(r){return r instanceof Element||r instanceof HTMLDocument};function requestAnimationFrame$1(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function cancelAnimationFrame(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function _mix(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function mix(r,e,t,n){return e&&_mix(r,e),t&&_mix(r,t),n&&_mix(r,n),r}var clone=function(r){if(typeof r!="object"||r===null)return r;var e;if(isArray$3(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=clone(r[t]):e[t]=r[t]}else{e={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?e[i]=clone(r[i]):e[i]=r[i]}return e};function debounce$1(r,e,t){var n;return function(){var i=this,a=arguments,o=function(){n=null,t||r.apply(i,a)},s=t&&!n;clearTimeout(n),n=setTimeout(o,e),s&&r.apply(i,a)}}const memoize=function(r,e){if(!isFunction(r))throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],o=t.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return o.set(a,s),s};return t.cache=new Map,t};var MAX_MIX_LEVEL$1=5;function _deepMix(r,e,t,n){t=t||0,n=n||MAX_MIX_LEVEL$1;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];a!==null&&isPlainObject$1(a)?(isPlainObject$1(r[i])||(r[i]={}),t<n?_deepMix(r[i],a,t+1,n):r[i]=e[i]):isArray$3(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var deepMix=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)_deepMix(r,e[n]);return r},indexOf=function(r,e){if(!isArrayLike(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var n=-1,i=0;i<r.length;i++)if(r[i]===e){n=i;break}return n},hasOwnProperty$1=Object.prototype.hasOwnProperty;function isEmpty(r){if(isNil(r))return!0;if(isArrayLike(r))return!r.length;var e=getType(r);if(e==="Map"||e==="Set")return!r.size;if(isPrototype(r))return!Object.keys(r).length;for(var t in r)if(hasOwnProperty$1.call(r,t))return!1;return!0}var isEqual$1=function(r,e){if(r===e)return!0;if(!r||!e||isString(r)||isString(e))return!1;if(isArrayLike(r)||isArrayLike(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=isEqual$1(r[n],e[n]),!!t);n++);return t}if(isObjectLike$1(r)||isObjectLike$1(e)){var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,n=0;n<i.length&&(t=isEqual$1(r[i[n]],e[i[n]]),!!t);n++);return t}return!1},map$2=function(r,e){if(!isArrayLike(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];t.push(e(i,n))}return t},identity=function(r){return r};const mapValues=function(r,e){e===void 0&&(e=identity);var t={};return isObject(r)&&!isNil(r)&&Object.keys(r).forEach(function(n){t[n]=e(r[n],n)}),t},get=function(r,e,t){for(var n=0,i=isString(e)?e.split("."):e;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?t:r},set=function(r,e,t){var n=r,i=isString(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(isObject(n[a])||(n[a]=isNumber$1(i[o+1])?[]:{}),n=n[a]):n[a]=t}),r};var hasOwnProperty=Object.prototype.hasOwnProperty;const pick$1=function(r,e){if(r===null||!isPlainObject$1(r))return{};var t={};return each$1(e,function(n){hasOwnProperty.call(r,n)&&(t[n]=r[n])}),t},omit$1=function(r,e){return reduce(r,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})},throttle=function(r,e,t){var n,i,a,o,s=0;t||(t={});var l=function(){s=t.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},c=function(){var u=Date.now();!s&&t.leading===!1&&(s=u);var f=e-(u-s);return i=this,a=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=u,o=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(l,f)),o};return c.cancel=function(){clearTimeout(n),s=0,n=i=a=null},c},toArray=function(r){return isArrayLike(r)?Array.prototype.slice.call(r):[]};var map$1={};const uniqueId=function(r){return r=r||"g",map$1[r]?map$1[r]+=1:map$1[r]=1,r+map$1[r]},noop=function(){};function size(r){return isNil(r)?0:isArrayLike(r)?r.length:Object.keys(r).length}var ctx$2;const measureTextWidth$1=memoize(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return ctx$2||(ctx$2=document.createElement("canvas").getContext("2d")),ctx$2.font=[a,o,i,t+"px",n].join(" "),ctx$2.measureText(isString(r)?r:"").width},function(r,e){return e===void 0&&(e={}),__spreadArrays([r],values(e)).join("")}),getEllipsisText$1=function(r,e,t,n){n===void 0&&(n="...");var i=16,a=measureTextWidth$1(n,t),o=isString(r)?r:toString$2(r),s=e,l=[],c,u;if(measureTextWidth$1(r,t)<=e)return r;for(;c=o.substr(0,i),u=measureTextWidth$1(c,t),!(u+a>s&&u>s);)if(l.push(c),s-=u,o=o.substr(i),!o)return l.join("");for(;c=o.substr(0,1),u=measureTextWidth$1(c,t),!(u+a>s);)if(l.push(c),s-=u,o=o.substr(1),!o)return l.join("");return""+l.join("")+n};var default_1=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}(),LAYER;(function(r){r.FORE="fore",r.MID="mid",r.BG="bg"})(LAYER||(LAYER={}));var DIRECTION;(function(r){r.TOP="top",r.TOP_LEFT="top-left",r.TOP_RIGHT="top-right",r.RIGHT="right",r.RIGHT_TOP="right-top",r.RIGHT_BOTTOM="right-bottom",r.LEFT="left",r.LEFT_TOP="left-top",r.LEFT_BOTTOM="left-bottom",r.BOTTOM="bottom",r.BOTTOM_LEFT="bottom-left",r.BOTTOM_RIGHT="bottom-right",r.RADIUS="radius",r.CIRCLE="circle",r.NONE="none"})(DIRECTION||(DIRECTION={}));var COMPONENT_TYPE;(function(r){r.AXIS="axis",r.GRID="grid",r.LEGEND="legend",r.TOOLTIP="tooltip",r.ANNOTATION="annotation",r.SLIDER="slider",r.SCROLLBAR="scrollbar",r.OTHER="other"})(COMPONENT_TYPE||(COMPONENT_TYPE={}));var GROUP_Z_INDEX={FORE:3,MID:2,BG:1},VIEW_LIFE_CIRCLE;(function(r){r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_PAINT="beforepaint",r.AFTER_PAINT="afterpaint",r.BEFORE_CHANGE_DATA="beforechangedata",r.AFTER_CHANGE_DATA="afterchangedata",r.BEFORE_CLEAR="beforeclear",r.AFTER_CLEAR="afterclear",r.BEFORE_DESTROY="beforedestroy",r.BEFORE_CHANGE_SIZE="beforechangesize",r.AFTER_CHANGE_SIZE="afterchangesize"})(VIEW_LIFE_CIRCLE||(VIEW_LIFE_CIRCLE={}));var GEOMETRY_LIFE_CIRCLE;(function(r){r.BEFORE_DRAW_ANIMATE="beforeanimate",r.AFTER_DRAW_ANIMATE="afteranimate",r.BEFORE_RENDER_LABEL="beforerenderlabel",r.AFTER_RENDER_LABEL="afterrenderlabel"})(GEOMETRY_LIFE_CIRCLE||(GEOMETRY_LIFE_CIRCLE={}));var PLOT_EVENTS;(function(r){r.MOUSE_ENTER="plot:mouseenter",r.MOUSE_DOWN="plot:mousedown",r.MOUSE_MOVE="plot:mousemove",r.MOUSE_UP="plot:mouseup",r.MOUSE_LEAVE="plot:mouseleave",r.TOUCH_START="plot:touchstart",r.TOUCH_MOVE="plot:touchmove",r.TOUCH_END="plot:touchend",r.TOUCH_CANCEL="plot:touchcancel",r.CLICK="plot:click",r.DBLCLICK="plot:dblclick",r.CONTEXTMENU="plot:contextmenu",r.LEAVE="plot:leave",r.ENTER="plot:enter"})(PLOT_EVENTS||(PLOT_EVENTS={}));var ELEMENT_STATE;(function(r){r.ACTIVE="active",r.INACTIVE="inactive",r.SELECTED="selected",r.DEFAULT="default"})(ELEMENT_STATE||(ELEMENT_STATE={}));var GROUP_ATTRS=["color","shape","size"],FIELD_ORIGIN="_origin",MIN_CHART_WIDTH=1,MIN_CHART_HEIGHT=1,COMPONENT_MAX_VIEW_PERCENTAGE=.25,ENGINES={};function getEngine(r){var e=ENGINES[r];if(!e)throw new Error("G engine '".concat(r,"' is not exist, please register it at first."));return e}function registerEngine(r,e){ENGINES[r]=e}function addEventListener(r,e,t){if(r){if(typeof r.addEventListener=="function")return r.addEventListener(e,t,!1),{remove:function(){r.removeEventListener(e,t,!1)}};if(typeof r.attachEvent=="function")return r.attachEvent("on"+e,t),{remove:function(){r.detachEvent("on"+e,t)}}}}var TABLE,TABLE_TR,FRAGMENT_REG,CONTAINERS;function initConstants(){TABLE=document.createElement("table"),TABLE_TR=document.createElement("tr"),FRAGMENT_REG=/^\s*<(\w+|!)[^>]*>/,CONTAINERS={tr:document.createElement("tbody"),tbody:TABLE,thead:TABLE,tfoot:TABLE,td:TABLE_TR,th:TABLE_TR,"*":document.createElement("div")}}function createDom$1(r){TABLE||initConstants();var e=FRAGMENT_REG.test(r)&&RegExp.$1;(!e||!(e in CONTAINERS))&&(e="*");var t=CONTAINERS[e];r=typeof r=="string"?r.replace(/(^\s*)|(\s*$)/g,""):r,t.innerHTML=""+r;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function getStyle$1(r,e,t){var n;try{n=window.getComputedStyle?window.getComputedStyle(r,null)[e]:r.style[e]}catch{}finally{n=n===void 0?t:n}return n}function getHeight$1(r,e){var t=getStyle$1(r,"height",e);return t==="auto"&&(t=r.offsetHeight),parseFloat(t)}function getOuterHeight(r,e){var t=getHeight$1(r,e),n=parseFloat(getStyle$1(r,"borderTopWidth"))||0,i=parseFloat(getStyle$1(r,"paddingTop"))||0,a=parseFloat(getStyle$1(r,"paddingBottom"))||0,o=parseFloat(getStyle$1(r,"borderBottomWidth"))||0,s=parseFloat(getStyle$1(r,"marginTop"))||0,l=parseFloat(getStyle$1(r,"marginBottom"))||0;return t+n+o+i+a+s+l}function getHeight(r,e){var t=getStyle$1(r,"width",e);return t==="auto"&&(t=r.offsetWidth),parseFloat(t)}function getOuterWidth(r,e){var t=getHeight(r,e),n=parseFloat(getStyle$1(r,"borderLeftWidth"))||0,i=parseFloat(getStyle$1(r,"paddingLeft"))||0,a=parseFloat(getStyle$1(r,"paddingRight"))||0,o=parseFloat(getStyle$1(r,"borderRightWidth"))||0,s=parseFloat(getStyle$1(r,"marginRight"))||0,l=parseFloat(getStyle$1(r,"marginLeft"))||0;return t+n+o+i+a+l+s}function modifyCSS(r,e){if(r)for(var t in e)e.hasOwnProperty(t)&&(r.style[t]=e[t]);return r}function getElementSize(r){var e=getComputedStyle(r);return{width:(r.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(r.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function isNumber(r){return typeof r=="number"&&!isNaN(r)}function getChartSize(r,e,t,n){var i=t,a=n;if(e){var o=getElementSize(r);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(isNumber(i)?i:MIN_CHART_WIDTH,MIN_CHART_WIDTH),height:Math.max(isNumber(a)?a:MIN_CHART_HEIGHT,MIN_CHART_HEIGHT)}}function removeDom(r){var e=r.parentNode;e&&e.removeChild(r)}var WILDCARD$1="*",EventEmitter=function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[e]||[],o=this._events[WILDCARD$1]||[],s=function(l){for(var c=l.length,u=0;u<c;u++)if(l[u]){var f=l[u],d=f.callback,g=f.once;g&&(l.splice(u,1),l.length===0&&delete t._events[e],c--,u--),d.apply(t,n)}};s(a),s(o)},r.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],i=n.length,a=0;a<i;a++)n[a].callback===t&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[e]}return this},r.prototype.getEvents=function(){return this._events},r}(),Base$1=function(r){__extends$1(e,r);function e(t){var n=r.call(this)||this;n.destroyed=!1;var i=t.visible,a=i===void 0?!0:i;return n.visible=a,n}return e.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},e.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},e.prototype.destroy=function(){this.off(),this.destroyed=!0},e.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},e}(EventEmitter),SPACES$2=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND$2=new RegExp("([a-z])["+SPACES$2+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES$2+"]*,?["+SPACES$2+"]*)+)","ig"),PATH_VALUES$2=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES$2+"]*,?["+SPACES$2+"]*","ig"),parsePathString$2=function(r){if(!r)return null;if(isArray$3(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(PATH_COMMAND$2,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(PATH_VALUES$2,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return r}),t},catmullRomToBezier=function(r,e){for(var t=[],n=0,i=r.length;i-2*!e>n;n+=2){var a=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];e?n?i-4===n?a[3]={x:+r[0],y:+r[1]}:i-2===n&&(a[2]={x:+r[0],y:+r[1]},a[3]={x:+r[2],y:+r[3]}):a[0]={x:+r[i-2],y:+r[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+r[n],y:+r[n+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},ellipsePath=function(r,e,t,n,i){var a=[];if(i===null&&n===null&&(n=t),r=+r,e=+e,t=+t,n=+n,i!==null){var o=Math.PI/180,s=r+t*Math.cos(-n*o),l=r+t*Math.cos(-i*o),c=e+t*Math.sin(-n*o),u=e+t*Math.sin(-i*o);a=[["M",s,c],["A",t,t,0,+(i-n>180),0,l,u]]}else a=[["M",r,e],["m",0,-n],["a",t,n,0,1,1,0,2*n],["a",t,n,0,1,1,0,-2*n],["z"]];return a},pathToAbsolute$1=function(r){if(r=parsePathString$2(r),!r||!r.length)return[["M",0,0]];var e=[],t=0,n=0,i=0,a=0,o=0,s,l;r[0][0]==="M"&&(t=+r[0][1],n=+r[0][2],i=t,a=n,o++,e[0]=["M",t,n]);for(var c=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",u=void 0,f=void 0,d=o,g=r.length;d<g;d++){if(e.push(u=[]),f=r[d],s=f[0],s!==s.toUpperCase())switch(u[0]=s.toUpperCase(),u[0]){case"A":u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=+f[6]+t,u[7]=+f[7]+n;break;case"V":u[1]=+f[1]+n;break;case"H":u[1]=+f[1]+t;break;case"R":l=[t,n].concat(f.slice(1));for(var p=2,v=l.length;p<v;p++)l[p]=+l[p]+t,l[++p]=+l[p]+n;e.pop(),e=e.concat(catmullRomToBezier(l,c));break;case"O":e.pop(),l=ellipsePath(t,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat(ellipsePath(t,n,f[1],f[2],f[3])),u=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+f[1]+t,a=+f[2]+n;break;default:for(var p=1,v=f.length;p<v;p++)u[p]=+f[p]+(p%2?t:n)}else if(s==="R")l=[t,n].concat(f.slice(1)),e.pop(),e=e.concat(catmullRomToBezier(l,c)),u=["R"].concat(f.slice(-2));else if(s==="O")e.pop(),l=ellipsePath(t,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);else if(s==="U")e.pop(),e=e.concat(ellipsePath(t,n,f[1],f[2],f[3])),u=["U"].concat(e[e.length-1].slice(-2));else for(var y=0,m=f.length;y<m;y++)u[y]=f[y];if(s=s.toUpperCase(),s!=="O")switch(u[0]){case"Z":t=+i,n=+a;break;case"H":t=u[1];break;case"V":n=u[1];break;case"M":i=u[u.length-2],a=u[u.length-1];break;default:t=u[u.length-2],n=u[u.length-1]}}return e},l2c=function(r,e,t,n){return[r,e,t,n,t,n]},q2c=function(r,e,t,n,i,a){var o=.3333333333333333,s=2/3;return[o*r+s*t,o*e+s*n,o*i+s*t,o*a+s*n,i,a]},a2c=function(r,e,t,n,i,a,o,s,l,c){t===n&&(t+=1);var u=Math.PI*120/180,f=Math.PI/180*(+i||0),d=[],g,p,v,y,m,x=function(Y,U,K){var q=Y*Math.cos(K)-U*Math.sin(K),W=Y*Math.sin(K)+U*Math.cos(K);return{x:q,y:W}};if(c)p=c[0],v=c[1],y=c[2],m=c[3];else{g=x(r,e,-f),r=g.x,e=g.y,g=x(s,l,-f),s=g.x,l=g.y,r===s&&e===l&&(s+=1,l+=1);var _=(r-s)/2,S=(e-l)/2,A=_*_/(t*t)+S*S/(n*n);A>1&&(A=Math.sqrt(A),t=A*t,n=A*n);var b=t*t,C=n*n,E=(a===o?-1:1)*Math.sqrt(Math.abs((b*C-b*S*S-C*_*_)/(b*S*S+C*_*_)));y=E*t*S/n+(r+s)/2,m=E*-n*_/t+(e+l)/2,p=Math.asin(((e-m)/n).toFixed(9)),v=Math.asin(((l-m)/n).toFixed(9)),p=r<y?Math.PI-p:p,v=s<y?Math.PI-v:v,p<0&&(p=Math.PI*2+p),v<0&&(v=Math.PI*2+v),o&&p>v&&(p=p-Math.PI*2),!o&&v>p&&(v=v-Math.PI*2)}var T=v-p;if(Math.abs(T)>u){var I=v,w=s,M=l;v=p+u*(o&&v>p?1:-1),s=y+t*Math.cos(v),l=m+n*Math.sin(v),d=a2c(s,l,t,n,i,0,o,w,M,[v,I,y,m])}T=v-p;var $=Math.cos(p),P=Math.sin(p),R=Math.cos(v),L=Math.sin(v),O=Math.tan(T/4),k=4/3*t*O,B=4/3*n*O,N=[r,e],F=[r+k*P,e-B*$],V=[s+k*L,l-B*R],H=[s,l];if(F[0]=2*N[0]-F[0],F[1]=2*N[1]-F[1],c)return[F,V,H].concat(d);d=[F,V,H].concat(d).join().split(",");for(var z=[],G=0,j=d.length;G<j;G++)z[G]=G%2?x(d[G-1],d[G],f).y:x(d[G],d[G+1],f).x;return z},pathToCurve=function(r,e){var t=pathToAbsolute$1(r),n=e&&pathToAbsolute$1(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",c="",u,f=function(_,S,A){var b,C;if(!_)return["C",S.x,S.y,S.x,S.y,S.x,S.y];switch(!(_[0]in{T:1,Q:1})&&(S.qx=S.qy=null),_[0]){case"M":S.X=_[1],S.Y=_[2];break;case"A":_=["C"].concat(a2c.apply(0,[S.x,S.y].concat(_.slice(1))));break;case"S":A==="C"||A==="S"?(b=S.x*2-S.bx,C=S.y*2-S.by):(b=S.x,C=S.y),_=["C",b,C].concat(_.slice(1));break;case"T":A==="Q"||A==="T"?(S.qx=S.x*2-S.qx,S.qy=S.y*2-S.qy):(S.qx=S.x,S.qy=S.y),_=["C"].concat(q2c(S.x,S.y,S.qx,S.qy,_[1],_[2]));break;case"Q":S.qx=_[1],S.qy=_[2],_=["C"].concat(q2c(S.x,S.y,_[1],_[2],_[3],_[4]));break;case"L":_=["C"].concat(l2c(S.x,S.y,_[1],_[2]));break;case"H":_=["C"].concat(l2c(S.x,S.y,_[1],S.y));break;case"V":_=["C"].concat(l2c(S.x,S.y,S.x,_[1]));break;case"Z":_=["C"].concat(l2c(S.x,S.y,S.X,S.Y));break}return _},d=function(_,S){if(_[S].length>7){_[S].shift();for(var A=_[S];A.length;)o[S]="A",n&&(s[S]="A"),_.splice(S++,0,["C"].concat(A.splice(0,6)));_.splice(S,1),u=Math.max(t.length,n&&n.length||0)}},g=function(_,S,A,b,C){_&&S&&_[C][0]==="M"&&S[C][0]!=="M"&&(S.splice(C,0,["M",b.x,b.y]),A.bx=0,A.by=0,A.x=_[C][1],A.y=_[C][2],u=Math.max(t.length,n&&n.length||0))};u=Math.max(t.length,n&&n.length||0);for(var p=0;p<u;p++){t[p]&&(l=t[p][0]),l!=="C"&&(o[p]=l,p&&(c=o[p-1])),t[p]=f(t[p],i,c),o[p]!=="A"&&l==="C"&&(o[p]="C"),d(t,p),n&&(n[p]&&(l=n[p][0]),l!=="C"&&(s[p]=l,p&&(c=s[p-1])),n[p]=f(n[p],a,c),s[p]!=="A"&&l==="C"&&(s[p]="C"),d(n,p)),g(t,n,i,a,p),g(n,t,a,i,p);var v=t[p],y=n&&n[p],m=v.length,x=n&&y.length;i.x=v[m-2],i.y=v[m-1],i.bx=parseFloat(v[m-4])||i.x,i.by=parseFloat(v[m-3])||i.y,a.bx=n&&(parseFloat(y[x-4])||a.x),a.by=n&&(parseFloat(y[x-3])||a.y),a.x=n&&y[x-2],a.y=n&&y[x-1]}return n?[t,n]:t},p2s=/,?([a-z]),?/gi,parsePathArray=function(r){return r.join(",").replace(p2s,"$1")},base3=function(r,e,t,n,i){var a=-3*e+9*t-9*n+3*i,o=r*a+6*e-12*t+6*n;return r*o-3*e+3*t},bezlen=function(r,e,t,n,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var c=l/2,u=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],g=0,p=0;p<u;p++){var v=c*f[p]+c,y=base3(v,r,t,i,o),m=base3(v,e,n,a,s),x=y*y+m*m;g+=d[p]*Math.sqrt(x)}return c*g},curveDim=function(r,e,t,n,i,a,o,s){for(var l=[],c=[[],[]],u,f,d,g,p=0;p<2;++p){if(p===0?(f=6*r-12*t+6*i,u=-3*r+9*t-9*i+3*o,d=3*t-3*r):(f=6*e-12*n+6*a,u=-3*e+9*n-9*a+3*s,d=3*n-3*e),Math.abs(u)<1e-12){if(Math.abs(f)<1e-12)continue;g=-d/f,g>0&&g<1&&l.push(g);continue}var v=f*f-4*d*u,y=Math.sqrt(v);if(!(v<0)){var m=(-f+y)/(2*u);m>0&&m<1&&l.push(m);var x=(-f-y)/(2*u);x>0&&x<1&&l.push(x)}}for(var _=l.length,S=_,A;_--;)g=l[_],A=1-g,c[0][_]=A*A*A*r+3*A*A*g*t+3*A*g*g*i+g*g*g*o,c[1][_]=A*A*A*e+3*A*A*g*n+3*A*g*g*a+g*g*g*s;return c[0][S]=r,c[1][S]=e,c[0][S+1]=o,c[1][S+1]=s,c[0].length=c[1].length=S+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}},intersect$1=function(r,e,t,n,i,a,o,s){if(!(Math.max(r,t)<Math.min(i,o)||Math.min(r,t)>Math.max(i,o)||Math.max(e,n)<Math.min(a,s)||Math.min(e,n)>Math.max(a,s))){var l=(r*n-e*t)*(i-o)-(r-t)*(i*s-a*o),c=(r*n-e*t)*(a-s)-(e-n)*(i*s-a*o),u=(r-t)*(a-s)-(e-n)*(i-o);if(u){var f=l/u,d=c/u,g=+f.toFixed(2),p=+d.toFixed(2);if(!(g<+Math.min(r,t).toFixed(2)||g>+Math.max(r,t).toFixed(2)||g<+Math.min(i,o).toFixed(2)||g>+Math.max(i,o).toFixed(2)||p<+Math.min(e,n).toFixed(2)||p>+Math.max(e,n).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:f,y:d}}}},isPointInsideBBox=function(r,e,t){return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},rectPath=function(r,e,t,n,i){if(i)return[["M",+r+ +i,e],["l",t-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-t,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",r,e],["l",t,0],["l",0,n],["l",-t,0],["z"]];return a.parsePathArray=parsePathArray,a},box=function(r,e,t,n){return r===null&&(r=e=t=n=0),e===null&&(e=r.y,t=r.width,n=r.height,r=r.x),{x:r,y:e,width:t,w:t,height:n,h:n,x2:r+t,y2:e+n,cx:r+t/2,cy:e+n/2,r1:Math.min(t,n)/2,r2:Math.max(t,n)/2,r0:Math.sqrt(t*t+n*n)/2,path:rectPath(r,e,t,n),vb:[r,e,t,n].join(" ")}},isBBoxIntersect=function(r,e){return r=box(r),e=box(e),isPointInsideBBox(e,r.x,r.y)||isPointInsideBBox(e,r.x2,r.y)||isPointInsideBBox(e,r.x,r.y2)||isPointInsideBBox(e,r.x2,r.y2)||isPointInsideBBox(r,e.x,e.y)||isPointInsideBBox(r,e.x2,e.y)||isPointInsideBBox(r,e.x,e.y2)||isPointInsideBBox(r,e.x2,e.y2)||(r.x<e.x2&&r.x>e.x||e.x<r.x2&&e.x>r.x)&&(r.y<e.y2&&r.y>e.y||e.y<r.y2&&e.y>r.y)},bezierBBox=function(r,e,t,n,i,a,o,s){isArray$3(r)||(r=[r,e,t,n,i,a,o,s]);var l=curveDim.apply(null,r);return box(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},findDotsAtSegment=function(r,e,t,n,i,a,o,s,l){var c=1-l,u=Math.pow(c,3),f=Math.pow(c,2),d=l*l,g=d*l,p=u*r+f*3*l*t+c*3*l*l*i+g*o,v=u*e+f*3*l*n+c*3*l*l*a+g*s,y=r+2*l*(t-r)+d*(i-2*t+r),m=e+2*l*(n-e)+d*(a-2*n+e),x=t+2*l*(i-t)+d*(o-2*i+t),_=n+2*l*(a-n)+d*(s-2*a+n),S=c*r+l*t,A=c*e+l*n,b=c*i+l*o,C=c*a+l*s,E=90-Math.atan2(y-x,m-_)*180/Math.PI;return{x:p,y:v,m:{x:y,y:m},n:{x,y:_},start:{x:S,y:A},end:{x:b,y:C},alpha:E}},interHelper=function(r,e,t){var n=bezierBBox(r),i=bezierBBox(e);if(!isBBoxIntersect(n,i))return t?0:[];for(var a=bezlen.apply(0,r),o=bezlen.apply(0,e),s=~~(a/8),l=~~(o/8),c=[],u=[],f={},d=t?0:[],g=0;g<s+1;g++){var p=findDotsAtSegment.apply(0,r.concat(g/s));c.push({x:p.x,y:p.y,t:g/s})}for(var g=0;g<l+1;g++){var p=findDotsAtSegment.apply(0,e.concat(g/l));u.push({x:p.x,y:p.y,t:g/l})}for(var g=0;g<s;g++)for(var v=0;v<l;v++){var y=c[g],m=c[g+1],x=u[v],_=u[v+1],S=Math.abs(m.x-y.x)<.001?"y":"x",A=Math.abs(_.x-x.x)<.001?"y":"x",b=intersect$1(y.x,y.y,m.x,m.y,x.x,x.y,_.x,_.y);if(b){if(f[b.x.toFixed(4)]===b.y.toFixed(4))continue;f[b.x.toFixed(4)]=b.y.toFixed(4);var C=y.t+Math.abs((b[S]-y[S])/(m[S]-y[S]))*(m.t-y.t),E=x.t+Math.abs((b[A]-x[A])/(_[A]-x[A]))*(_.t-x.t);C>=0&&C<=1&&E>=0&&E<=1&&(t?d+=1:d.push({x:b.x,y:b.y,t1:C,t2:E}))}}return d},interPathHelper=function(r,e,t){r=pathToCurve(r),e=pathToCurve(e);for(var n,i,a,o,s,l,c,u,f,d,g=t?0:[],p=0,v=r.length;p<v;p++){var y=r[p];if(y[0]==="M")n=s=y[1],i=l=y[2];else{y[0]==="C"?(f=[n,i].concat(y.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,l,s,l],n=s,i=l);for(var m=0,x=e.length;m<x;m++){var _=e[m];if(_[0]==="M")a=c=_[1],o=u=_[2];else{_[0]==="C"?(d=[a,o].concat(_.slice(1)),a=d[6],o=d[7]):(d=[a,o,a,o,c,u,c,u],a=c,o=u);var S=interHelper(f,d,t);if(t)g+=S;else{for(var A=0,b=S.length;A<b;A++)S[A].segment1=p,S[A].segment2=m,S[A].bez1=f,S[A].bez2=d;g=g.concat(S)}}}}}return g},intersection=function(r,e){return interPathHelper(r,e)};function decasteljau(r,e){var t=[],n=[];function i(a,o){if(a.length===1)t.push(a[0]),n.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&t.push(a[0]),l===a.length-2&&n.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return r.length&&i(r,e),{left:t,right:n.reverse()}}function splitCurve(r,e,t){var n=[[r[1],r[2]]];t=t||2;var i=[];e[0]==="A"?(n.push(e[6]),n.push(e[7])):e[0]==="C"?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var a=n,o=1/t,s=0;s<t-1;s++){var l=o/(1-o*s),c=decasteljau(a,l);i.push(c.left),a=c.right}i.push(a);var u=i.map(function(f){var d=[];return f.length===4&&(d.push("C"),d=d.concat(f[2])),f.length>=3&&(f.length===3&&d.push("Q"),d=d.concat(f[1])),f.length===2&&d.push("L"),d=d.concat(f[f.length-1]),d});return u}var splitSegment=function(r,e,t){if(t===1)return[[].concat(r)];var n=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")n=n.concat(splitCurve(r,e,t));else{var i=[].concat(r);i[0]==="M"&&(i[0]="L");for(var a=0;a<=t-1;a++)n.push(i)}return n},fillPath=function(r,e){if(r.length===1)return r;var t=r.length-1,n=e.length-1,i=t/n,a=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<n-t;o++)r.push(r[0]);return r}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(c,u,f){return f===t?c.concat(r[t]):c.concat(splitSegment(r[f],r[f+1],u))},[]);return l.unshift(r[0]),(e[n]==="Z"||e[n]==="z")&&l.push("Z"),l},isEqual=function(r,e){if(r.length!==e.length)return!1;var t=!0;return each$1(r,function(n,i){if(n!==e[i])return t=!1,!1}),t};function getMinDiff(r,e,t){var n=null,i=t;return e<i&&(i=e,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var levenshteinDistance=function(r,e){var t=r.length,n=e.length,i,a,o=0;if(t===0||n===0)return null;for(var s=[],l=0;l<=t;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=n;c++)s[0][c]={min:c};for(var l=1;l<=t;l++){i=r[l-1];for(var c=1;c<=n;c++){a=e[c-1],isEqual(i,a)?o=0:o=1;var u=s[l-1][c].min+1,f=s[l][c-1].min+1,d=s[l-1][c-1].min+o;s[l][c]=getMinDiff(u,f,d)}}return s},fillPathByDiff=function(r,e){var t=levenshteinDistance(r,e),n=r.length,i=e.length,a=[],o=1,s=1;if(t[n][i].min!==n){for(var l=1;l<=n;l++){var c=t[l][l].min;s=l;for(var u=o;u<=i;u++)t[l][u].min<c&&(c=t[l][u].min,s=u);o=s,t[l][o].type&&a.push({index:l-1,type:t[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function _splitPoints(r,e,t){for(var n=[].concat(r),i,a=1/(t+1),o=_getSegmentPoints(e)[0],s=1;s<=t;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function _getSegmentPoints(r){var e=[];switch(r[0]){case"M":e.push([r[1],r[2]]);break;case"L":e.push([r[1],r[2]]);break;case"A":e.push([r[6],r[7]]);break;case"Q":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"T":e.push([r[1],r[2]]);break;case"C":e.push([r[5],r[6]]),e.push([r[1],r[2]]),e.push([r[3],r[4]]);break;case"S":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"H":e.push([r[1],r[1]]);break;case"V":e.push([r[1],r[1]]);break}return e}var formatPath=function(r,e){if(r.length<=1)return r;for(var t,n=0;n<e.length;n++)if(r[n][0]!==e[n][0])switch(t=_getSegmentPoints(r[n]),e[n][0]){case"M":r[n]=["M"].concat(t[0]);break;case"L":r[n]=["L"].concat(t[0]);break;case"A":r[n]=[].concat(e[n]),r[n][6]=t[0][0],r[n][7]=t[0][1];break;case"Q":if(t.length<2)if(n>0)t=_splitPoints(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["Q"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(n>0)t=_splitPoints(t,r[n-1],2);else{r[n]=e[n];break}r[n]=["C"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(t.length<2)if(n>0)t=_splitPoints(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["S"].concat(t.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=e[n]}return r};const PathUtil$1=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier,fillPath,fillPathByDiff,formatPath,intersection,parsePathArray,parsePathString:parsePathString$2,pathToAbsolute:pathToAbsolute$1,pathToCurve,rectPath},Symbol.toStringTag,{value:"Module"}));var GraphEvent=function(){function r(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function removeFromArray(r,e){var t=r.indexOf(e);t!==-1&&r.splice(t,1)}var isBrowser=typeof window<"u"&&typeof window.document<"u";function isParent(r,e){if(r.isCanvas())return!0;for(var t=e.getParent(),n=!1;t;){if(t===r){n=!0;break}t=t.getParent()}return n}function isAllowCapture(r){return r.cfg.visible&&r.cfg.capture}var Base=function(r){__extends$1(e,r);function e(t){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=mix(i,t),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,n){this.cfg[t]=n},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(EventEmitter),__spreadArray=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))},BrowserInfo=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}(),NodeInfo=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),SearchBotDeviceInfo=function(){function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return r}(),BotInfo=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),ReactNativeInfo=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(r){return r?parseUserAgent(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(r){return r!==""&&userAgentRules.reduce(function(e,t){var n=t[0],i=t[1];if(e)return e;var a=i.exec(r);return!!a&&[n,a]},!1)}function parseUserAgent(r){var e=matchUserAgent(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new BotInfo;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<REQUIRED_VERSION_PARTS&&(i=__spreadArray(__spreadArray([],i,!0),createVersionParts(REQUIRED_VERSION_PARTS-i.length),!0)):i=[];var a=i.join("."),o=detectOS(r),s=SEARCHBOT_OS_REGEX.exec(r);return s&&s[1]?new SearchBotDeviceInfo(t,a,o,s[1]):new BrowserInfo(t,a,o)}function detectOS(r){for(var e=0,t=operatingSystemRules.length;e<t;e++){var n=operatingSystemRules[e],i=n[0],a=n[1],o=a.exec(r);if(o)return i}return null}function getNodeVersion(){var r=typeof process<"u"&&process.version;return r?new NodeInfo(process.version.slice(1)):null}function createVersionParts(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function invert$1(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=u*o-s*c,d=-u*a+s*l,g=c*a-o*l,p=t*f+n*d+i*g;return p?(p=1/p,r[0]=f*p,r[1]=(-u*n+i*c)*p,r[2]=(s*n-i*o)*p,r[3]=d*p,r[4]=(u*t-i*l)*p,r[5]=(-s*t+i*a)*p,r[6]=g*p,r[7]=(-c*t+n*l)*p,r[8]=(o*t-n*a)*p,r):null}function multiply(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=t[0],g=t[1],p=t[2],v=t[3],y=t[4],m=t[5],x=t[6],_=t[7],S=t[8];return r[0]=d*n+g*o+p*c,r[1]=d*i+g*s+p*u,r[2]=d*a+g*l+p*f,r[3]=v*n+y*o+m*c,r[4]=v*i+y*s+m*u,r[5]=v*a+y*l+m*f,r[6]=x*n+_*o+S*c,r[7]=x*i+_*s+S*u,r[8]=x*a+_*l+S*f,r}function fromTranslation(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function fromRotation(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=-t,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function fromScaling(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function create$1(){var r=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function transformMat3$1(r,e,t){var n=e[0],i=e[1],a=e[2];return r[0]=n*t[0]+i*t[3]+a*t[6],r[1]=n*t[1]+i*t[4]+a*t[7],r[2]=n*t[2]+i*t[5]+a*t[8],r}(function(){var r=create$1();return function(e,t,n,i,a,o){var s,l;for(t||(t=3),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],a(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2];return e}})();function create(){var r=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function add(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r}function subtract(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r}function min$1(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r}function max$1(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r}function scale$3(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r}function distance$6(r,e){var t=e[0]-r[0],n=e[1]-r[1];return Math.hypot(t,n)}function length(r){var e=r[0],t=r[1];return Math.hypot(e,t)}function normalize(r,e){var t=e[0],n=e[1],i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r}function dot$2(r,e){return r[0]*e[0]+r[1]*e[1]}function transformMat3(r,e,t){var n=e[0],i=e[1];return r[0]=t[0]*n+t[3]*i+t[6],r[1]=t[1]*n+t[4]*i+t[7],r}function angle$1(r,e){var t=r[0],n=r[1],i=e[0],a=e[1],o=Math.sqrt(t*t+n*n)*Math.sqrt(i*i+a*a),s=o&&(t*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function exactEquals(r,e){return r[0]===e[0]&&r[1]===e[1]}var sub=subtract;(function(){var r=create();return function(e,t,n,i,a,o){var s,l;for(t||(t=2),n||(n=0),i?l=Math.min(i*t+n,e.length):l=e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],a(r,r,o),e[s]=r[0],e[s+1]=r[1];return e}})();function leftTranslate(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return fromTranslation(n,t),multiply(r,n,e)}function leftRotate(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return fromRotation(n,t),multiply(r,n,e)}function leftScale(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return fromScaling(n,t),multiply(r,n,e)}function leftMultiply(r,e,t){return multiply(r,t,e)}function transform$6(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":leftTranslate(t,t,[a[1],a[2]]);break;case"s":leftScale(t,t,[a[1],a[2]]);break;case"r":leftRotate(t,t,a[1]);break;case"m":leftMultiply(t,t,a[1]);break}}return t}function direction(r,e){return r[0]*e[1]-e[0]*r[1]}function angleTo(r,e,t){var n=angle$1(r,e),i=direction(r,e)>=0;return t?i?Math.PI*2-n:n:i?n:Math.PI*2-n}function multiplyMatrix(r,e){var t=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],c=r[6],u=r[7],f=r[8],d=e[0],g=e[1],p=e[2],v=e[3],y=e[4],m=e[5],x=e[6],_=e[7],S=e[8];return t[0]=d*n+g*o+p*c,t[1]=d*i+g*s+p*u,t[2]=d*a+g*l+p*f,t[3]=v*n+y*o+m*c,t[4]=v*i+y*s+m*u,t[5]=v*a+y*l+m*f,t[6]=x*n+_*o+S*c,t[7]=x*i+_*s+S*u,t[8]=x*a+_*l+S*f,t}function multiplyVec2$1(r,e){var t=[],n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function invert(r){var e=[],t=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],c=r[7],u=r[8],f=u*o-s*c,d=-u*a+s*l,g=c*a-o*l,p=t*f+n*d+i*g;return p?(p=1/p,e[0]=f*p,e[1]=(-u*n+i*c)*p,e[2]=(s*n-i*o)*p,e[3]=d*p,e[4]=(u*t-i*l)*p,e[5]=(-s*t+i*a)*p,e[6]=g*p,e[7]=(-c*t+n*l)*p,e[8]=(o*t-n*a)*p,e):null}var transform$5=transform$6,MATRIX="matrix",CLONE_CFGS=["zIndex","capture","visible","type"],RESERVED_PORPS=["repeat"],DELEGATION_SPLIT=":",WILDCARD="*";function _cloneArrayAttr(r){for(var e=[],t=0;t<r.length;t++)isArray$3(r[t])?e.push([].concat(r[t])):e.push(r[t]);return e}function getFormatFromAttrs(r,e){var t={},n=e.attrs;for(var i in r)t[i]=n[i];return t}function getFormatToAttrs(r,e){var t={},n=e.attr();return each$1(r,function(i,a){RESERVED_PORPS.indexOf(a)===-1&&!isEqual$1(n[a],i)&&(t[a]=i)}),t}function checkExistedAttrs(r,e){if(e.onFrame)return r;var t=e.startTime,n=e.delay,i=e.duration,a=Object.prototype.hasOwnProperty;return each$1(r,function(o){t+n<o.startTime+o.delay+o.duration&&i>o.delay&&each$1(e.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var Element$2=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.attrs={};var i=n.getDefaultAttrs();return mix(i,t.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(isObject(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,n){var i=this.getClip();return i&&!i.isHit(t,n)},e.prototype.setAttr=function(t,n){var i=this.attrs[t];i!==n&&(this.attrs[t]=n,this.onAttrChange(t,n,i))},e.prototype.onAttrChange=function(t,n,i){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var n=this.getParent();return n&&n.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var n=this.getParent();n?(removeFromArray(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(MATRIX,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(MATRIX)},e.prototype.setMatrix=function(t){this.attr(MATRIX,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?t=multiplyMatrix(i,n):t=n||i,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var n=this.attr("matrix"),i=null;t&&n?i=multiplyMatrix(t,n):i=n||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var n=this.attr("matrix");return n?multiplyVec2$1(n,t):t},e.prototype.invertFromMatrix=function(t){var n=this.attr("matrix");if(n){var i=invert(n);if(i)return multiplyVec2$1(i,t)}return t},e.prototype.setClip=function(t){var n=this.getCanvas(),i=null;if(t){var a=this.getShapeBase(),o=upperFirst(t.type),s=a[o];s&&(i=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,n=this.attrs,i={};each$1(n,function(s,l){isArray$3(n[l])?i[l]=_cloneArrayAttr(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return each$1(CLONE_CFGS,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},r.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=t[0],s=t[1],l=t[2],c=l===void 0?"easeLinear":l,u=t[3],f=u===void 0?noop:u,d=t[4],g=d===void 0?0:d,p,v,y,m,x;isFunction(o)?(p=o,o={}):isObject(o)&&o.onFrame&&(p=o.onFrame,v=o.repeat),isObject(s)?(x=s,s=x.duration,c=x.easing||"easeLinear",g=x.delay||0,v=x.repeat||v||!1,f=x.callback||noop,y=x.pauseCallback||noop,m=x.resumeCallback||noop):(isNumber$1(f)&&(g=f,f=null),isFunction(c)?(f=c,c="easeLinear"):c=c||"easeLinear");var _=getFormatToAttrs(o,this),S={fromAttrs:getFormatFromAttrs(_,this),toAttrs:_,duration:s,easing:c,repeat:v,callback:f,pauseCallback:y,resumeCallback:m,delay:g,startTime:i.getTime(),id:uniqueId(),onFrame:p,pathFormatted:!1};a.length>0?a=checkExistedAttrs(a,S):i.addAnimator(this),a.push(S),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var n=this;t===void 0&&(t=!0);var i=this.get("animations");each$1(i,function(a){t&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),n=this.get("animations"),i=t.getTime();return each$1(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),n=t.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return each$1(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},e.prototype.emitDelegation=function(t,n){var i=this,a=n.propagationPath;this.getEvents();var o;t==="mouseenter"?o=n.fromShape:t==="mouseleave"&&(o=n.toShape);for(var s=function(f){var d=a[f],g=d.get("name");if(g){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&o&&isParent(d,o))return"break";isArray$3(g)?each$1(g,function(p){i.emitDelegateEvent(d,p,n)}):l.emitDelegateEvent(d,g,n)}},l=this,c=0;c<a.length;c++){var u=s(c);if(u==="break")break}},e.prototype.emitDelegateEvent=function(t,n,i){var a=this.getEvents(),o=n+DELEGATION_SPLIT+i.type;(a[o]||a[WILDCARD])&&(i.name=o,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(o,i))},e.prototype.translate=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=this.getMatrix(),a=transform$5(i,[["t",t,n]]);return this.setMatrix(a),this},e.prototype.move=function(t,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-i,n-a),this},e.prototype.moveTo=function(t,n){return this.move(t,n)},e.prototype.scale=function(t,n){var i=this.getMatrix(),a=transform$5(i,[["s",t,n||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var n=this.getMatrix(),i=transform$5(n,[["r",t]]);return this.setMatrix(i),this},e.prototype.rotateAtStart=function(t){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=transform$5(o,[["t",-i,-a],["r",t],["t",i,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,n,i){var a=this.getMatrix(),o=transform$5(a,[["t",-t,-n],["r",i],["t",t,n]]);return this.setMatrix(o),this},e}(Base),SHAPE_MAP={},INDEX="_INDEX";function setCanvas(r,e){if(r.set("canvas",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){setCanvas(n,e)})}}function setTimeline(r,e){if(r.set("timeline",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){setTimeline(n,e)})}}function removeChild(r,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),removeFromArray(r.getChildren(),e)}function getComparer(r){return function(e,t){var n=r(e,t);return n===0?e[INDEX]-t[INDEX]:n}}var Container=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?each$1(o,function(l){var c=l.getBBox(),u=c.minX,f=c.maxX,d=c.minY,g=c.maxY;u<t&&(t=u),f>n&&(n=f),d<i&&(i=d),g>a&&(a=g)}):(t=0,n=0,i=0,a=0);var s={x:t,y:i,minX:t,minY:i,maxX:n,maxY:a,width:n-t,height:a-i};return s},e.prototype.getCanvasBBox=function(){var t=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?each$1(o,function(l){var c=l.getCanvasBBox(),u=c.minX,f=c.maxX,d=c.minY,g=c.maxY;u<t&&(t=u),f>n&&(n=f),d<i&&(i=d),g>a&&(a=g)}):(t=0,n=0,i=0,a=0);var s={x:t,y:i,minX:t,minY:i,maxX:n,maxY:a,width:n-t,height:a-i};return s},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,n,i){if(r.prototype.onAttrChange.call(this,t,n,i),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(t){var n=this.getChildren();each$1(n,function(i){i.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],a=t[1];isObject(i)?a=i:a.type=i;var o=SHAPE_MAP[a.type];o||(o=upperFirst(a.type),SHAPE_MAP[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},e.prototype.addGroup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],a=t[1],o;if(isFunction(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,n,i){if(!isAllowCapture(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,n,i);else{var s=[t,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},e.prototype._findShape=function(t,n,i,a){for(var o=null,s=t.length-1;s>=0;s--){var l=t[s];if(isAllowCapture(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},e.prototype.add=function(t){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&removeChild(o,t,!1),t.set("parent",this),n&&setCanvas(t,n),a&&setTimeline(t,a),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var n=this.getTotalMatrix();n&&t.applyMatrix(n)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();each$1(t,function(n,i){return n[INDEX]=i,n}),t.sort(getComparer(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),n=t.length-1;n>=0;n--)t[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var n=this.getChildren();return n[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var n=this.getChildren();return n.indexOf(t)>-1},e.prototype.removeChild=function(t,n){n===void 0&&(n=!0),this.contain(t)&&t.remove(n)},e.prototype.findAll=function(t){var n=[],i=this.getChildren();return each$1(i,function(a){t(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(t)))}),n},e.prototype.find=function(t){var n=null,i=this.getChildren();return each$1(i,function(a){if(t(a)?n=a:a.isGroup()&&(n=a.find(t)),n)return!1}),n},e.prototype.findById=function(t){return this.find(function(n){return n.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(n){return n.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(n){return n.get("name")===t})},e}(Element$2),frame=0,timeout=0,interval$1=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?now():+t)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=r,this._time=t,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(r,e,t){var n=new Timer;return n.restart(r,e,t),n}function timerFlush(){now(),++frame;for(var r=taskHead,e;r;)(e=clockNow-r._time)>=0&&r._call.call(null,e),r=r._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var r=clock.now(),e=r-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=r)}function nap(){for(var r,e=taskHead,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:taskHead=t);taskTail=r,sleep(n)}function sleep(r){if(!frame){timeout&&(timeout=clearTimeout(timeout));var e=r-clockNow;e>24?(r<1/0&&(timeout=setTimeout(wake,r-clock.now()-clockSkew)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast=clock.now(),interval$1=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function define(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function extend(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Color$1(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color$1,color$1,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=reHex.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?rgbn(e):t===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(r))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(r))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(r))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(r))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(r)?rgbn(named[r]):r==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(r){return new Rgb(r>>16&255,r>>8&255,r&255,1)}function rgba(r,e,t,n){return n<=0&&(r=e=t=NaN),new Rgb(r,e,t,n)}function rgbConvert(r){return r instanceof Color$1||(r=color$1(r)),r?(r=r.rgb(),new Rgb(r.r,r.g,r.b,r.opacity)):new Rgb}function rgb$1(r,e,t,n){return arguments.length===1?rgbConvert(r):new Rgb(r,e,t,n??1)}function Rgb(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}define(Rgb,rgb$1,extend(Color$1,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const r=clampa(this.opacity);return`${r===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${r===1?")":`, ${r})`}`}function clampa(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function clampi(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function hex(r){return r=clampi(r),(r<16?"0":"")+r.toString(16)}function hsla(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Hsl(r,e,t,n)}function hslConvert(r){if(r instanceof Hsl)return new Hsl(r.h,r.s,r.l,r.opacity);if(r instanceof Color$1||(r=color$1(r)),!r)return new Hsl;if(r instanceof Hsl)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(t-n)/s+(t<n)*6:t===a?o=(n-e)/s+2:o=(e-t)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Hsl(o,s,l,r.opacity)}function hsl(r,e,t,n){return arguments.length===1?hslConvert(r):new Hsl(r,e,t,n??1)}function Hsl(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}define(Hsl,hsl,extend(Color$1,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Rgb(hsl2rgb(r>=240?r-240:r+120,i,n),hsl2rgb(r,i,n),hsl2rgb(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=clampa(this.opacity);return`${r===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${r===1?")":`, ${r})`}`}}));function clamph(r){return r=(r||0)%360,r<0?r+360:r}function clampt(r){return Math.max(0,Math.min(1,r||0))}function hsl2rgb(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const constant$3=r=>()=>r;function linear$3(r,e){return function(t){return r+t*e}}function exponential$1(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function gamma(r){return(r=+r)==1?nogamma:function(e,t){return t-e?exponential$1(e,t,r):constant$3(isNaN(e)?t:e)}}function nogamma(r,e){var t=e-r;return t?linear$3(r,t):constant$3(isNaN(r)?e:r)}const rgb=function r(e){var t=gamma(e);function n(i,a){var o=t((i=rgb$1(i)).r,(a=rgb$1(a)).r),s=t(i.g,a.g),l=t(i.b,a.b),c=nogamma(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return n.gamma=r,n}(1);function numberArray(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(a){for(i=0;i<t;++i)n[i]=r[i]*(1-a)+e[i]*a;return n}}function isNumberArray(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function interpolateArray(r,e){return(isNumberArray(e)?numberArray:genericArray)(r,e)}function genericArray(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),a=new Array(t),o;for(o=0;o<n;++o)i[o]=interpolate(r[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function date(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function number(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function object$1(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=interpolate(r[i],e[i]):n[i]=e[i];return function(a){for(i in t)n[i]=t[i](a);return n}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(r){return function(){return r}}function one(r){return function(e){return r(e)+""}}function string(r,e){var t=reA.lastIndex=reB.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(r=r+"",e=e+"";(n=reA.exec(r))&&(i=reB.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:number(n,i)})),t=reB.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?one(l[0].x):zero(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}function interpolate(r,e){var t=typeof e,n;return e==null||t==="boolean"?constant$3(e):(t==="number"?number:t==="string"?(n=color$1(e))?(e=n,rgb):string:e instanceof color$1?rgb:e instanceof Date?date:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object$1:number)(r,e)}function linear$2(r){return+r}function quadIn(r){return r*r}function quadOut(r){return r*(2-r)}function quadInOut(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function cubicIn(r){return r*r*r}function cubicOut(r){return--r*r*r+1}function cubicInOut(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var exponent=3,polyIn=function r(e){e=+e;function t(n){return Math.pow(n,e)}return t.exponent=r,t}(exponent),polyOut=function r(e){e=+e;function t(n){return 1-Math.pow(1-n,e)}return t.exponent=r,t}(exponent),polyInOut=function r(e){e=+e;function t(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return t.exponent=r,t}(exponent),pi=Math.PI,halfPi=pi/2;function sinIn(r){return+r==1?1:1-Math.cos(r*halfPi)}function sinOut(r){return Math.sin(r*halfPi)}function sinInOut(r){return(1-Math.cos(pi*r))/2}function tpmt(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function expIn(r){return tpmt(1-+r)}function expOut(r){return 1-tpmt(r)}function expInOut(r){return((r*=2)<=1?tpmt(1-r):2-tpmt(r-1))/2}function circleIn(r){return 1-Math.sqrt(1-r*r)}function circleOut(r){return Math.sqrt(1- --r*r)}function circleInOut(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(r){return 1-bounceOut(1-r)}function bounceOut(r){return(r=+r)<b1?b0*r*r:r<b3?b0*(r-=b2)*r+b4:r<b6?b0*(r-=b5)*r+b7:b0*(r-=b8)*r+b9}function bounceInOut(r){return((r*=2)<=1?1-bounceOut(1-r):bounceOut(r-1)+1)/2}var overshoot=1.70158,backIn=function r(e){e=+e;function t(n){return(n=+n)*n*(e*(n-1)+n)}return t.overshoot=r,t}(overshoot),backOut=function r(e){e=+e;function t(n){return--n*n*((n+1)*e+n)+1}return t.overshoot=r,t}(overshoot),backInOut=function r(e){e=+e;function t(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return t.overshoot=r,t}(overshoot),tau=2*Math.PI,amplitude=1,period=.3,elasticIn=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=tau);function i(a){return e*tpmt(- --a)*Math.sin((n-a)/t)}return i.amplitude=function(a){return r(a,t*tau)},i.period=function(a){return r(e,a)},i}(amplitude,period),elasticOut=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=tau);function i(a){return 1-e*tpmt(a=+a)*Math.sin((a+n)/t)}return i.amplitude=function(a){return r(a,t*tau)},i.period=function(a){return r(e,a)},i}(amplitude,period),elasticInOut=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=tau);function i(a){return((a=a*2-1)<0?e*tpmt(-a)*Math.sin((n-a)/t):2-e*tpmt(a)*Math.sin((n+a)/t))/2}return i.amplitude=function(a){return r(a,t*tau)},i.period=function(a){return r(e,a)},i}(amplitude,period);const d3Ease=Object.freeze(Object.defineProperty({__proto__:null,easeBack:backInOut,easeBackIn:backIn,easeBackInOut:backInOut,easeBackOut:backOut,easeBounce:bounceOut,easeBounceIn:bounceIn,easeBounceInOut:bounceInOut,easeBounceOut:bounceOut,easeCircle:circleInOut,easeCircleIn:circleIn,easeCircleInOut:circleInOut,easeCircleOut:circleOut,easeCubic:cubicInOut,easeCubicIn:cubicIn,easeCubicInOut:cubicInOut,easeCubicOut:cubicOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticInOut:elasticInOut,easeElasticOut:elasticOut,easeExp:expInOut,easeExpIn:expIn,easeExpInOut:expInOut,easeExpOut:expOut,easeLinear:linear$2,easePoly:polyInOut,easePolyIn:polyIn,easePolyInOut:polyInOut,easePolyOut:polyOut,easeQuad:quadInOut,easeQuadIn:quadIn,easeQuadInOut:quadInOut,easeQuadOut:quadOut,easeSin:sinInOut,easeSinIn:sinIn,easeSinInOut:sinInOut,easeSinOut:sinOut},Symbol.toStringTag,{value:"Module"}));var EASING_MAP={};function getEasing(r){return EASING_MAP[r.toLowerCase()]||d3Ease[r]}function registerEasing(r,e){EASING_MAP[r.toLowerCase()]=e}var isColorProp=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},isGradientColor$1=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},IDENTITY_MATRIX=[1,0,0,0,1,0,0,0,1];function _update(r,e,t){var n={},i=e.fromAttrs,a=e.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!isEqual$1(i[s],a[s]))if(s==="path"){var l=a[s],c=i[s];l.length>c.length?(l=parsePathString$2(a[s]),c=parsePathString$2(i[s]),c=fillPathByDiff(c,l),c=formatPath(c,l),e.fromAttrs.path=c,e.toAttrs.path=l):e.pathFormatted||(l=parsePathString$2(a[s]),c=parsePathString$2(i[s]),c=formatPath(c,l),e.fromAttrs.path=c,e.toAttrs.path=l,e.pathFormatted=!0),n[s]=[];for(var u=0;u<l.length;u++){for(var f=l[u],d=c[u],g=[],p=0;p<f.length;p++)isNumber$1(f[p])&&d&&isNumber$1(d[p])?(o=interpolate(d[p],f[p]),g.push(o(t))):g.push(f[p]);n[s].push(g)}}else if(s==="matrix"){var v=interpolateArray(i[s]||IDENTITY_MATRIX,a[s]||IDENTITY_MATRIX),y=v(t);n[s]=y}else isColorProp(s)&&isGradientColor$1(a[s])?n[s]=a[s]:isFunction(a[s])||(o=interpolate(i[s],a[s]),n[s]=o(t));r.attr(n)}}function update(r,e,t){var n=e.startTime,i=e.delay;if(t<n+i||e._paused)return!1;var a,o=e.duration,s=e.easing,l=getEasing(s);if(t=t-n-e.delay,e.repeat)a=t%o/o,a=l(a);else if(a=t/o,a<1)a=l(a);else return e.onFrame?r.attr(e.onFrame(1)):r.attr(e.toAttrs),!0;if(e.onFrame){var c=e.onFrame(a);r.attr(c)}else _update(r,e,a);return!1}var Timeline=function(){function r(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return r.prototype.initTimer=function(){var e=this,t=!1,n,i,a;this.timer=timer(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(n=e.animators[s],n.destroyed){e.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],t=update(n,a,o),t&&(i.splice(l,1),t=!1,a.callback&&a.callback())}i.length===0&&e.removeAnimator(s)}var c=e.canvas.get("autoDraw");c||e.canvas.draw()}})},r.prototype.addAnimator=function(e){this.animators.push(e)},r.prototype.removeAnimator=function(e){this.animators.splice(e,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),CLICK_OFFSET=40,LEFT_BTN_CODE=0,EVENTS$2=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function emitTargetEvent(r,e,t){t.name=e,t.target=r,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}function bubbleEvent(r,e,t){if(t.bubbles){var n=void 0,i=!1;if(e==="mouseenter"?(n=t.fromShape,i=!0):e==="mouseleave"&&(i=!0,n=t.toShape),r.isCanvas()&&i)return;if(n&&isParent(r,n)){t.bubbles=!1;return}t.name=e,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}}var EventController=function(){function r(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;t._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=t.canvas,a=i.get("el");if(a!==n.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(n);t.dragging&&t._emitEvent("drag",n,o,t.draggingShape)}},this._onDocumentMouseUp=function(n){var i=t.canvas,a=i.get("el");if(a!==n.target&&t.dragging){var o=t._getPointInfo(n);t.draggingShape&&t._emitEvent("drop",n,o,null),t._emitEvent("dragend",n,o,t.draggingShape),t._afterDrag(t.draggingShape,o,n)}},this.canvas=e.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");each$1(EVENTS$2,function(n){t.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");each$1(EVENTS$2,function(n){t.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(e,t,n,i,a,o){var s=new GraphEvent(e,t);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},r.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),i=t.getPointByEvent(e);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),i=this._getShape(n,t),a=this["_on"+e],o=!1;if(a)a.call(this,n,i,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,n,null,null,i),i&&this._emitEvent(e,t,n,i,null,i),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,n,s,s,null),this._emitEvent(e,t,n,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,c=l.get("el");c.style.cursor=i.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(e,t,n){n.button===LEFT_BTN_CODE&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},r.prototype._emitMouseoverEvents=function(e,t,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",e,t,n,n,i),this._emitEvent("mouseleave",e,t,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,t,i,n,i),this._emitEvent("mouseenter",e,t,i,n,i)))},r.prototype._emitDragoverEvents=function(e,t,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,i),this._emitEvent("dragenter",e,t,i,n,i)),a||this._emitEvent("dragover",e,t,i)):n&&this._emitEvent("dragleave",e,t,n,n,i),a&&this._emitEvent("dragover",e,t,i)},r.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,n);i!==e&&this._emitMouseoverEvents(n,t,e,i),this.currentShape=i},r.prototype._onmouseup=function(e,t,n){if(n.button===LEFT_BTN_CODE){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,i),this._afterDrag(i,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(e,t,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,e,i,t,!0)},r.prototype._onmousemove=function(e,t,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,a,t,!1),this._emitEvent("drag",n,e,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,c=n.timeStamp,u=c-this.mousedownTimeStamp,f=s.clientX-e.clientX,d=s.clientY-e.clientY,g=f*f+d*d;u>120||g>CLICK_OFFSET?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,a,t),this._emitEvent("mousemove",n,e,t)}},r.prototype._emitEvent=function(e,t,n,i,a,o){var s=this._getEventObj(e,t,n,i,a,o);if(i){s.shape=i,emitTargetEvent(i,e,s);for(var l=i.getParent();l;)l.emitDelegation(e,s),s.propagationStopped||bubbleEvent(l,e,s),s.propagationPath.push(l),l=l.getParent()}else{var c=this.canvas;emitTargetEvent(c,e,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),PX_SUFFIX="px",browser=detect(),isFirefox=browser&&browser.name==="firefox",Canvas$2=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");isString(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var n=this.get("container");n.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new EventController({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Timeline(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,n){var i=this.get("el");isBrowser&&(i.style.width=t+PX_SUFFIX,i.style.height=n+PX_SUFFIX)},e.prototype.changeSize=function(t,n){this.setDOMSize(t,n),this.set("width",t),this.set("height",n),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var n=this.get("el");isBrowser&&n&&(n.style.cursor=t)},e.prototype.getPointByEvent=function(t){var n=this.get("supportCSSTransform");if(n){if(isFirefox&&!isNil(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!isNil(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var i=this.getClientByEvent(t),a=i.x,o=i.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var n=t;return t.touches&&(t.type==="touchend"?n=t.changedTouches[0]:n=t.touches[0]),{x:n.clientX,y:n.clientY}},e.prototype.getPointByClient=function(t,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t-a.left,y:n-a.top}},e.prototype.getClientByPoint=function(t,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:t+a.left,y:n+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},e}(Container),AbstractGroup=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];t.add(a.clone())}return t},e}(Container),AbstractShape=function(r){__extends$1(e,r);function e(t){return r.call(this,t)||this}return e.prototype._isInBBox=function(t,n){var i=this.getBBox();return i.minX<=t&&i.maxX>=t&&i.minY<=n&&i.maxY>=n},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){r.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),n=this.getTotalMatrix(),i=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(n){var l=multiplyVec2$1(n,[t.minX,t.minY]),c=multiplyVec2$1(n,[t.maxX,t.minY]),u=multiplyVec2$1(n,[t.minX,t.maxY]),f=multiplyVec2$1(n,[t.maxX,t.maxY]);i=Math.min(l[0],c[0],u[0],f[0]),o=Math.max(l[0],c[0],u[0],f[0]),a=Math.min(l[1],c[1],u[1],f[1]),s=Math.max(l[1],c[1],u[1],f[1])}var d=this.attrs;if(d.shadowColor){var g=d.shadowBlur,p=g===void 0?0:g,v=d.shadowOffsetX,y=v===void 0?0:v,m=d.shadowOffsetY,x=m===void 0?0:m,_=i-p+y,S=o+p+y,A=a-p+x,b=s+p+x;i=Math.min(i,_),o=Math.max(o,S),a=Math.min(a,A),s=Math.max(s,b)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,n){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],c=this._isInBBox(s,l);return this.isOnlyHitBox()?c:!!(c&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},e}(Element$2),cache$1=new Map;function register(r,e){cache$1.set(r,e)}function getMethod(r){return cache$1.get(r)}function rect$1(r){var e=r.attr(),t=e.x,n=e.y,i=e.width,a=e.height;return{x:t,y:n,width:i,height:a}}function circle$1(r){var e=r.attr(),t=e.x,n=e.y,i=e.r;return{x:t-i,y:n-i,width:i*2,height:i*2}}function distance$5(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function isNumberEqual(r,e){return Math.abs(r-e)<.001}function getBBoxByArray(r,e){var t=min$2(r),n=min$2(e),i=max$2(r),a=max$2(e);return{x:t,y:n,width:i-t,height:a-n}}function piMod(r){return(r+Math.PI*2)%(Math.PI*2)}const LineUtil={box:function(r,e,t,n){return getBBoxByArray([r,t],[e,n])},length:function(r,e,t,n){return distance$5(r,e,t,n)},pointAt:function(r,e,t,n,i){return{x:(1-i)*r+i*t,y:(1-i)*e+i*n}},pointDistance:function(r,e,t,n,i,a){var o=(t-r)*(i-r)+(n-e)*(a-e);if(o<0)return distance$5(r,e,i,a);var s=(t-r)*(t-r)+(n-e)*(n-e);return o>s?distance$5(t,n,i,a):this.pointToLine(r,e,t,n,i,a)},pointToLine:function(r,e,t,n,i,a){var o=[t-r,n-e];if(exactEquals(o,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-e)*(a-e));var s=[-o[1],o[0]];normalize(s,s);var l=[i-r,a-e];return Math.abs(dot$2(l,s))},tangentAngle:function(r,e,t,n){return Math.atan2(n-e,t-r)}};var EPSILON=1e-4;function nearestPoint(r,e,t,n,i,a){var o,s=1/0,l=[t,n],c=20;a&&a>200&&(c=a/10);for(var u=1/c,f=u/10,d=0;d<=c;d++){var g=d*u,p=[i.apply(null,r.concat([g])),i.apply(null,e.concat([g]))],v=distance$5(l[0],l[1],p[0],p[1]);v<s&&(o=g,s=v)}if(o===0)return{x:r[0],y:e[0]};if(o===1){var y=r.length;return{x:r[y-1],y:e[y-1]}}s=1/0;for(var d=0;d<32&&!(f<EPSILON);d++){var m=o-f,x=o+f,p=[i.apply(null,r.concat([m])),i.apply(null,e.concat([m]))],v=distance$5(l[0],l[1],p[0],p[1]);if(m>=0&&v<s)o=m,s=v;else{var _=[i.apply(null,r.concat([x])),i.apply(null,e.concat([x]))],S=distance$5(l[0],l[1],_[0],_[1]);x<=1&&S<s?(o=x,s=S):f*=.5}}return{x:i.apply(null,r.concat([o])),y:i.apply(null,e.concat([o]))}}function snapLength(r,e){for(var t=0,n=r.length,i=0;i<n;i++){var a=r[i],o=e[i],s=r[(i+1)%n],l=e[(i+1)%n];t+=distance$5(a,o,s,l)}return t/2}function quadraticAt(r,e,t,n){var i=1-n;return i*i*r+2*n*i*e+n*n*t}function extrema$1(r,e,t){var n=r+t-2*e;if(isNumberEqual(n,0))return[.5];var i=(r-e)/n;return i<=1&&i>=0?[i]:[]}function derivativeAt$1(r,e,t,n){return 2*(1-n)*(e-r)+2*n*(t-e)}function divideQuadratic(r,e,t,n,i,a,o){var s=quadraticAt(r,t,i,o),l=quadraticAt(e,n,a,o),c=LineUtil.pointAt(r,e,t,n,o),u=LineUtil.pointAt(t,n,i,a,o);return[[r,e,c.x,c.y,s,l],[s,l,u.x,u.y,i,a]]}function quadraticLength(r,e,t,n,i,a,o){if(o===0)return(distance$5(r,e,t,n)+distance$5(t,n,i,a)+distance$5(r,e,i,a))/2;var s=divideQuadratic(r,e,t,n,i,a,.5),l=s[0],c=s[1];return l.push(o-1),c.push(o-1),quadraticLength.apply(null,l)+quadraticLength.apply(null,c)}const QuadUtil={box:function(r,e,t,n,i,a){var o=extrema$1(r,t,i)[0],s=extrema$1(e,n,a)[0],l=[r,i],c=[e,a];return o!==void 0&&l.push(quadraticAt(r,t,i,o)),s!==void 0&&c.push(quadraticAt(e,n,a,s)),getBBoxByArray(l,c)},length:function(r,e,t,n,i,a){return quadraticLength(r,e,t,n,i,a,3)},nearestPoint:function(r,e,t,n,i,a,o,s){return nearestPoint([r,t,i],[e,n,a],o,s,quadraticAt)},pointDistance:function(r,e,t,n,i,a,o,s){var l=this.nearestPoint(r,e,t,n,i,a,o,s);return distance$5(l.x,l.y,o,s)},interpolationAt:quadraticAt,pointAt:function(r,e,t,n,i,a,o){return{x:quadraticAt(r,t,i,o),y:quadraticAt(e,n,a,o)}},divide:function(r,e,t,n,i,a,o){return divideQuadratic(r,e,t,n,i,a,o)},tangentAngle:function(r,e,t,n,i,a,o){var s=derivativeAt$1(r,t,i,o),l=derivativeAt$1(e,n,a,o),c=Math.atan2(l,s);return piMod(c)}};function cubicAt(r,e,t,n,i){var a=1-i;return a*a*a*r+3*e*i*a*a+3*t*i*i*a+n*i*i*i}function derivativeAt(r,e,t,n,i){var a=1-i;return 3*(a*a*(e-r)+2*a*i*(t-e)+i*i*(n-t))}function extrema(r,e,t,n){var i=-3*r+9*e-9*t+3*n,a=6*r-12*e+6*t,o=3*e-3*r,s=[],l,c,u;if(isNumberEqual(i,0))isNumberEqual(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;isNumberEqual(f,0)?s.push(-a/(2*i)):f>0&&(u=Math.sqrt(f),l=(-a+u)/(2*i),c=(-a-u)/(2*i),l>=0&&l<=1&&s.push(l),c>=0&&c<=1&&s.push(c))}return s}function divideCubic(r,e,t,n,i,a,o,s,l){var c=cubicAt(r,t,i,o,l),u=cubicAt(e,n,a,s,l),f=LineUtil.pointAt(r,e,t,n,l),d=LineUtil.pointAt(t,n,i,a,l),g=LineUtil.pointAt(i,a,o,s,l),p=LineUtil.pointAt(f.x,f.y,d.x,d.y,l),v=LineUtil.pointAt(d.x,d.y,g.x,g.y,l);return[[r,e,f.x,f.y,p.x,p.y,c,u],[c,u,v.x,v.y,g.x,g.y,o,s]]}function cubicLength(r,e,t,n,i,a,o,s,l){if(l===0)return snapLength([r,t,i,o],[e,n,a,s]);var c=divideCubic(r,e,t,n,i,a,o,s,.5),u=c[0],f=c[1];return u.push(l-1),f.push(l-1),cubicLength.apply(null,u)+cubicLength.apply(null,f)}const CubicUtil={extrema,box:function(r,e,t,n,i,a,o,s){for(var l=[r,o],c=[e,s],u=extrema(r,t,i,o),f=extrema(e,n,a,s),d=0;d<u.length;d++)l.push(cubicAt(r,t,i,o,u[d]));for(var d=0;d<f.length;d++)c.push(cubicAt(e,n,a,s,f[d]));return getBBoxByArray(l,c)},length:function(r,e,t,n,i,a,o,s){return cubicLength(r,e,t,n,i,a,o,s,3)},nearestPoint:function(r,e,t,n,i,a,o,s,l,c,u){return nearestPoint([r,t,i,o],[e,n,a,s],l,c,cubicAt,u)},pointDistance:function(r,e,t,n,i,a,o,s,l,c,u){var f=this.nearestPoint(r,e,t,n,i,a,o,s,l,c,u);return distance$5(f.x,f.y,l,c)},interpolationAt:cubicAt,pointAt:function(r,e,t,n,i,a,o,s,l){return{x:cubicAt(r,t,i,o,l),y:cubicAt(e,n,a,s,l)}},divide:function(r,e,t,n,i,a,o,s,l){return divideCubic(r,e,t,n,i,a,o,s,l)},tangentAngle:function(r,e,t,n,i,a,o,s,l){var c=derivativeAt(r,t,i,o,l),u=derivativeAt(e,n,a,s,l);return piMod(Math.atan2(u,c))}};function copysign(r,e){var t=Math.abs(r);return e>0?t:t*-1}const ellipse$1={box:function(r,e,t,n){return{x:r-t,y:e-n,width:t*2,height:n*2}},length:function(r,e,t,n){return Math.PI*(3*(t+n)-Math.sqrt((3*t+n)*(t+3*n)))},nearestPoint:function(r,e,t,n,i,a){var o=t,s=n;if(o===0||s===0)return{x:r,y:e};for(var l=i-r,c=a-e,u=Math.abs(l),f=Math.abs(c),d=o*o,g=s*s,p=Math.PI/4,v,y,m=0;m<4;m++){v=o*Math.cos(p),y=s*Math.sin(p);var x=(d-g)*Math.pow(Math.cos(p),3)/o,_=(g-d)*Math.pow(Math.sin(p),3)/s,S=v-x,A=y-_,b=u-x,C=f-_,E=Math.hypot(A,S),T=Math.hypot(C,b),I=E*Math.asin((S*C-A*b)/(E*T)),w=I/Math.sqrt(d+g-v*v-y*y);p+=w,p=Math.min(Math.PI/2,Math.max(0,p))}return{x:r+copysign(v,l),y:e+copysign(y,c)}},pointDistance:function(r,e,t,n,i,a){var o=this.nearestPoint(r,e,t,n,i,a);return distance$5(o.x,o.y,i,a)},pointAt:function(r,e,t,n,i){var a=2*Math.PI*i;return{x:r+t*Math.cos(a),y:e+n*Math.sin(a)}},tangentAngle:function(r,e,t,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-t*Math.sin(a));return piMod(o)}};function derivativeXAt(r,e,t,n,i,a,o,s){return-1*t*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function derivativeYAt(r,e,t,n,i,a,o,s){return-1*t*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function xExtrema(r,e,t){return Math.atan(-e/r*Math.tan(t))}function yExtrema(r,e,t){return Math.atan(e/(r*Math.tan(t)))}function xAt(r,e,t,n,i,a){return t*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function yAt(r,e,t,n,i,a){return t*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+e}function getAngle$2(r,e,t,n){var i=Math.atan2(n*r,t*e);return(i+Math.PI*2)%(Math.PI*2)}function getPoint(r,e,t){return{x:r*Math.cos(t),y:e*Math.sin(t)}}function rotate$1(r,e,t){var n=Math.cos(t),i=Math.sin(t);return[r*n-e*i,r*i+e*n]}const EllipseArcUtil={box:function(r,e,t,n,i,a,o){for(var s=xExtrema(t,n,i),l=1/0,c=-1/0,u=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&u.push(d):o<d&&d<a&&u.push(d)}for(var f=0;f<u.length;f++){var g=xAt(r,e,t,n,i,u[f]);g<l&&(l=g),g>c&&(c=g)}for(var p=yExtrema(t,n,i),v=1/0,y=-1/0,m=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var x=p+f;a<o?a<x&&x<o&&m.push(x):o<x&&x<a&&m.push(x)}for(var f=0;f<m.length;f++){var _=yAt(r,e,t,n,i,m[f]);_<v&&(v=_),_>y&&(y=_)}return{x:l,y:v,width:c-l,height:y-v}},length:function(r,e,t,n,i,a,o){},nearestPoint:function(r,e,t,n,i,a,o,s,l){var c=rotate$1(s-r,l-e,-i),u=c[0],f=c[1],d=ellipse$1.nearestPoint(0,0,t,n,u,f),g=getAngle$2(t,n,d.x,d.y);g<a?d=getPoint(t,n,a):g>o&&(d=getPoint(t,n,o));var p=rotate$1(d.x,d.y,i);return{x:p[0]+r,y:p[1]+e}},pointDistance:function(r,e,t,n,i,a,o,s,l){var c=this.nearestPoint(r,e,t,n,s,l);return distance$5(c.x,c.y,s,l)},pointAt:function(r,e,t,n,i,a,o,s){var l=(o-a)*s+a;return{x:xAt(r,e,t,n,i,l),y:yAt(r,e,t,n,i,l)}},tangentAngle:function(r,e,t,n,i,a,o,s){var l=(o-a)*s+a,c=derivativeXAt(r,e,t,n,i,a,o,l),u=derivativeYAt(r,e,t,n,i,a,o,l);return piMod(Math.atan2(u,c))}};function analyzePoints(r){for(var e=0,t=[],n=0;n<r.length-1;n++){var i=r[n],a=r[n+1],o=distance$5(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function lengthOfSegment(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var n=r[t],i=r[t+1];e+=distance$5(n[0],n[1],i[0],i[1])}return e}function pointAtSegments(r,e){if(e>1||e<0||r.length<2)return null;var t=analyzePoints(r),n=t.segments,i=t.totalLength;if(i===0)return{x:r[0][0],y:r[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var l=n[s],c=l.from,u=l.to,f=l.length/i;if(e>=a&&e<=a+f){var d=(e-a)/f;o=LineUtil.pointAt(c[0],c[1],u[0],u[1],d);break}a+=f}return o}function angleAtSegments(r,e){if(e>1||e<0||r.length<2)return 0;for(var t=analyzePoints(r),n=t.segments,i=t.totalLength,a=0,o=0,s=0;s<n.length;s++){var l=n[s],c=l.from,u=l.to,f=l.length/i;if(e>=a&&e<=a+f){o=Math.atan2(u[1]-c[1],u[0]-c[0]);break}a+=f}return o}function distanceAtSegment(r,e,t){for(var n=1/0,i=0;i<r.length-1;i++){var a=r[i],o=r[i+1],s=LineUtil.pointDistance(a[0],a[1],o[0],o[1],e,t);s<n&&(n=s)}return n}const PolylineUtil={box:function(r){for(var e=[],t=[],n=0;n<r.length;n++){var i=r[n];e.push(i[0]),t.push(i[1])}return getBBoxByArray(e,t)},length:function(r){return lengthOfSegment(r)},pointAt:function(r,e){return pointAtSegments(r,e)},pointDistance:function(r,e,t){return distanceAtSegment(r,e,t)},tangentAngle:function(r,e){return angleAtSegments(r,e)}};function mergeBBox(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function mergeArrowBBox(r,e){var t=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return t&&(i=t.getCanvasBBox(),e=mergeBBox(e,i)),n&&(a=n.getCanvasBBox(),e=mergeBBox(e,a)),e}function polyline(r){for(var e=r.attr(),t=e.points,n=[],i=[],a=0;a<t.length;a++){var o=t[a];n.push(o[0]),i.push(o[1])}var s=getBBoxByArray(n,i),l=s.x,c=s.y,u=s.width,f=s.height,d={minX:l,minY:c,maxX:l+u,maxY:c+f};return d=mergeArrowBBox(r,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function polygon$1(r){for(var e=r.attr(),t=e.points,n=[],i=[],a=0;a<t.length;a++){var o=t[a];n.push(o[0]),i.push(o[1])}return getBBoxByArray(n,i)}var offScreenCtx=null;function getOffScreenContext(){if(!offScreenCtx){var r=document.createElement("canvas");r.width=1,r.height=1,offScreenCtx=r.getContext("2d")}return offScreenCtx}function getTextHeight(r,e,t){var n=1;if(isString(r)&&(n=r.split(`
`).length),n>1){var i=getLineSpaceing(e,t);return e*n+i*(n-1)}return e}function getLineSpaceing(r,e){return e?e-r:r*.14}function getTextWidth(r,e){var t=getOffScreenContext(),n=0;if(isNil(r)||r==="")return n;if(t.save(),t.font=e,isString(r)&&r.includes(`
`)){var i=r.split(`
`);each$1(i,function(a){var o=t.measureText(a).width;n<o&&(n=o)})}else n=t.measureText(r).width;return t.restore(),n}function assembleFont(r){var e=r.fontSize,t=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,e+"px",t].join(" ").trim()}function text(r){var e=r.attr(),t=e.x,n=e.y,i=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=assembleFont(e));var l=getTextWidth(i,s),c;if(!l)c={x:t,y:n,width:0,height:0};else{var u=e.textAlign,f=e.textBaseline,d=getTextHeight(i,a,o),g={x:t,y:n-d};u&&(u==="end"||u==="right"?g.x-=l:u==="center"&&(g.x-=l/2)),f&&(f==="top"?g.y+=d:f==="middle"&&(g.y+=d/2)),c={x:g.x,y:g.y,width:l,height:d}}return c}var regexTags=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,regexDot=/[^\s\,]+/ig;function parsePath(r){var e=r||[];if(isArray$3(e))return e;if(isString(e))return e=e.match(regexTags),each$1(e,function(t,n){if(t=t.match(regexDot),t[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}each$1(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[n]=t}),e}function smoothBezier$2(r,e,t,n){var i=[],a=!!n,o,s,l,c,u,f,d;if(a){l=n[0],c=n[1];for(var g=0,p=r.length;g<p;g+=1){var v=r[g];l=min$1([0,0],l,v),c=max$1([0,0],c,v)}}for(var g=0,y=r.length;g<y;g+=1){var v=r[g];if(g===0&&!t)d=v;else if(g===y-1&&!t)f=v,i.push(d),i.push(f);else{var m=[g?g-1:y-1,g-1][t?0:1];o=r[m],s=r[t?(g+1)%y:g+1];var x=[0,0];x=sub(x,s,o),x=scale$3(x,x,e);var _=distance$6(v,o),S=distance$6(v,s),A=_+S;A!==0&&(_/=A,S/=A);var b=scale$3([0,0],x,-_),C=scale$3([0,0],x,S);f=add([0,0],v,b),u=add([0,0],v,C),u=min$1([0,0],u,max$1([0,0],s,v)),u=max$1([0,0],u,min$1([0,0],s,v)),b=sub([0,0],u,v),b=scale$3([0,0],b,-_/S),f=add([0,0],v,b),f=min$1([0,0],f,max$1([0,0],o,v)),f=max$1([0,0],f,min$1([0,0],o,v)),C=sub([0,0],v,f),C=scale$3([0,0],C,S/_),u=add([0,0],v,C),a&&(f=max$1([0,0],f,l),f=min$1([0,0],f,c),u=max$1([0,0],u,l),u=min$1([0,0],u,c)),i.push(d),i.push(f),d=u}}return t&&i.push(i.shift()),i}function catmullRom2Bezier(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var n=!!e,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=smoothBezier$2(i,.4,n,t),l=i.length,c=[],u,f,d,a=0;a<l-1;a+=1)u=s[a*2],f=s[a*2+1],d=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]]);return n&&(u=s[l],f=s[l+1],d=i[0],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]])),c}var SPACES$1=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND$1=new RegExp("([a-z])["+SPACES$1+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES$1+"]*,?["+SPACES$1+"]*)+)","ig"),PATH_VALUES$1=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES$1+"]*,?["+SPACES$1+"]*","ig");function parsePathString$1(r){if(!r)return null;if(isArray$3(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(PATH_COMMAND$1,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(PATH_VALUES$1,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var REGEX_MD=/[a-z]/;function toSymmetry$1(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function pathToAbsolute(r){var e=parsePathString$1(r);if(!e||!e.length)return[["M",0,0]];for(var t=!1,n=0;n<e.length;n++){var i=e[n][0];if(REGEX_MD.test(i)||["V","H","T","S"].indexOf(i)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,l=0,c=0,u=0,f=e[0];(f[0]==="M"||f[0]==="m")&&(o=+f[1],s=+f[2],l=o,c=s,u++,a[0]=["M",o,s]);for(var n=u,d=e.length;n<d;n++){var g=e[n],p=a[n-1],v=[],i=g[0],y=i.toUpperCase();if(i!==y)switch(v[0]=y,y){case"A":v[1]=g[1],v[2]=g[2],v[3]=g[3],v[4]=g[4],v[5]=g[5],v[6]=+g[6]+o,v[7]=+g[7]+s;break;case"V":v[1]=+g[1]+s;break;case"H":v[1]=+g[1]+o;break;case"M":l=+g[1]+o,c=+g[2]+s,v[1]=l,v[2]=c;break;default:for(var m=1,x=g.length;m<x;m++)v[m]=+g[m]+(m%2?o:s)}else v=e[n];switch(y){case"Z":o=+l,s=+c;break;case"H":o=v[1],v=["L",o,s];break;case"V":s=v[1],v=["L",o,s];break;case"T":o=v[1],s=v[2];var _=toSymmetry$1([p[1],p[2]],[p[3],p[4]]);v=["Q",_[0],_[1],o,s];break;case"S":o=v[v.length-2],s=v[v.length-1];var S=p.length,A=toSymmetry$1([p[S-4],p[S-3]],[p[S-2],p[S-1]]);v=["C",A[0],A[1],v[1],v[2],o,s];break;case"M":l=v[v.length-2],c=v[v.length-1];break;default:o=v[v.length-2],s=v[v.length-1]}a.push(v)}return a}function vMag$1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function vRatio$1(r,e){return vMag$1(r)*vMag$1(e)?(r[0]*e[0]+r[1]*e[1])/(vMag$1(r)*vMag$1(e)):1}function vAngle$1(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(vRatio$1(r,e))}function isSamePoint$1(r,e){return r[0]===e[0]&&r[1]===e[1]}function getArcParams$1(r,e){var t=e[1],n=e[2],i=mod$1(toRadian(e[3]),Math.PI*2),a=e[4],o=e[5],s=r[0],l=r[1],c=e[6],u=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,g=f*f/(t*t)+d*d/(n*n);g>1&&(t*=Math.sqrt(g),n*=Math.sqrt(g));var p=t*t*(d*d)+n*n*(f*f),v=p?Math.sqrt((t*t*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var y=n?v*t*d/n:0,m=t?v*-n*f/t:0,x=(s+c)/2+Math.cos(i)*y-Math.sin(i)*m,_=(l+u)/2+Math.sin(i)*y+Math.cos(i)*m,S=[(f-y)/t,(d-m)/n],A=[(-1*f-y)/t,(-1*d-m)/n],b=vAngle$1([1,0],S),C=vAngle$1(S,A);return vRatio$1(S,A)<=-1&&(C=Math.PI),vRatio$1(S,A)>=1&&(C=0),o===0&&C>0&&(C=C-2*Math.PI),o===1&&C<0&&(C=C+2*Math.PI),{cx:x,cy:_,rx:isSamePoint$1(r,[c,u])?0:t,ry:isSamePoint$1(r,[c,u])?0:n,startAngle:b,endAngle:b+C,xRotation:i,arcFlag:a,sweepFlag:o}}function toSymmetry(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function getSegments(r){r=parsePath(r);for(var e=[],t=null,n=null,i=null,a=0,o=r.length,s=0;s<o;s++){var l=r[s];n=r[s+1];var c=l[0],u={command:c,prePoint:t,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=getArcParams$1(t,l);u.arcParams=f;break}if(c==="Z")t=i,n=r[a+1];else{var d=l.length;t=[l[d-2],l[d-1]]}n&&n[0]==="Z"&&(n=r[a],e[a]&&(e[a].prePoint=t)),u.currentPoint=t,e[a]&&isSamePoint$1(t,e[a].currentPoint)&&(e[a].prePoint=u.prePoint);var g=n?[n[n.length-2],n[n.length-1]]:null;u.nextPoint=g;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-t[0],p[1]-t[1]],u.endTangent=[t[0]-p[0],t[1]-p[1]];else if(c==="Q"){var v=[l[1],l[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[t[0]-v[0],t[1]-v[1]]}else if(c==="T"){var y=e[s-1],v=toSymmetry(y.currentPoint,p);y.command==="Q"?(u.command="Q",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[t[0]-v[0],t[1]-v[1]]):(u.command="TL",u.startTangent=[p[0]-t[0],p[1]-t[1]],u.endTangent=[t[0]-p[0],t[1]-p[1]])}else if(c==="C"){var m=[l[1],l[2]],x=[l[3],l[4]];u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[t[0]-x[0],t[1]-x[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[m[0]-x[0],m[1]-x[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[x[0]-m[0],x[1]-m[1]])}else if(c==="S"){var y=e[s-1],m=toSymmetry(y.currentPoint,p),x=[l[1],l[2]];y.command==="C"?(u.command="C",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[t[0]-x[0],t[1]-x[1]]):(u.command="SQ",u.startTangent=[p[0]-x[0],p[1]-x[1]],u.endTangent=[t[0]-x[0],t[1]-x[1]])}else if(c==="A"){var _=.001,S=u.arcParams||{},A=S.cx,b=A===void 0?0:A,C=S.cy,E=C===void 0?0:C,T=S.rx,I=T===void 0?0:T,w=S.ry,M=w===void 0?0:w,$=S.sweepFlag,P=$===void 0?0:$,R=S.startAngle,L=R===void 0?0:R,O=S.endAngle,k=O===void 0?0:O;P===0&&(_*=-1);var B=I*Math.cos(L-_)+b,N=M*Math.sin(L-_)+E;u.startTangent=[B-i[0],N-i[1]];var F=I*Math.cos(L+k+_)+b,V=M*Math.sin(L+k-_)+E;u.endTangent=[p[0]-F,p[1]-V]}e.push(u)}return e}var isBetween$2=function(r,e,t){return r>=e&&r<=t};function getLineIntersect(r,e,t,n){var i=.001,a={x:t.x-r.x,y:t.y-r.y},o={x:e.x-r.x,y:e.y-r.y},s={x:n.x-t.x,y:n.y-t.y},l=o.x*s.y-o.y*s.x,c=l*l,u=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,d=null;if(c>i*u*f){var g=(a.x*s.y-a.y*s.x)/l,p=(a.x*o.y-a.y*o.x)/l;isBetween$2(g,0,1)&&isBetween$2(p,0,1)&&(d={x:r.x+g*o.x,y:r.y+g*o.y})}return d}var tolerance$1=1e-6;function dcmp$1(r){return Math.abs(r)<tolerance$1?0:r<0?-1:1}function onSegment$1(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function isInPolygon$1(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(onSegment$1(o,s,[e,t]))return!0;dcmp$1(o[1]-t)>0!=dcmp$1(s[1]-t)>0&&dcmp$1(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function parseToLines(r){for(var e=[],t=r.length,n=0;n<t-1;n++){var i=r[n],a=r[n+1];e.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=r[0],s=r[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function lineIntersectPolygon(r,e){var t=!1;return each$1(r,function(n){if(getLineIntersect(n.from,n.to,e.from,e.to))return t=!0,!1}),t}function getBBox(r){var e=r.map(function(n){return n[0]}),t=r.map(function(n){return n[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function intersectBBox$1(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function isPolygonsIntersect(r,e){if(r.length<2||e.length<2)return!1;var t=getBBox(r),n=getBBox(e);if(!intersectBBox$1(t,n))return!1;var i=!1;if(each$1(e,function(l){if(isInPolygon$1(r,l[0],l[1]))return i=!0,!1}),i||(each$1(r,function(l){if(isInPolygon$1(e,l[0],l[1]))return i=!0,!1}),i))return!0;var a=parseToLines(r),o=parseToLines(e),s=!1;return each$1(o,function(l){if(lineIntersectPolygon(a,l))return s=!0,!1}),s}function getPathBox(r,e){for(var t=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,l=o.params,c=o.prePoint,u=void 0;switch(o.command){case"Q":u=QuadUtil.box(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=CubicUtil.box(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;u=EllipseArcUtil.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:t.push(s[0]),n.push(s[1]);break}u&&(o.box=u,t.push(u.x,u.x+u.width),n.push(u.y,u.y+u.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}t=t.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var d=min$2(t),g=min$2(n),p=max$2(t),v=max$2(n);if(i.length===0)return{x:d,y:g,width:p-d,height:v-g};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,y=void 0;s[0]===d?(y=getExtraFromSegmentWithAngle(o,e),d=d-y.xExtra):s[0]===p&&(y=getExtraFromSegmentWithAngle(o,e),p=p+y.xExtra),s[1]===g?(y=getExtraFromSegmentWithAngle(o,e),g=g-y.yExtra):s[1]===v&&(y=getExtraFromSegmentWithAngle(o,e),v=v+y.yExtra)}return{x:d,y:g,width:p-d,height:v-g}}function getExtraFromSegmentWithAngle(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||isNumberEqual$1(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),u=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(u-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function path(r){var e=r.attr(),t=e.path,n=e.stroke,i=n?e.lineWidth:0,a=r.get("segments")||getSegments(t),o=getPathBox(a,i),s=o.x,l=o.y,c=o.width,u=o.height,f={minX:s,minY:l,maxX:s+c,maxY:l+u};return f=mergeArrowBBox(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function line$1(r){var e=r.attr(),t=e.x1,n=e.y1,i=e.x2,a=e.y2,o=Math.min(t,i),s=Math.max(t,i),l=Math.min(n,a),c=Math.max(n,a),u={minX:o,maxX:s,minY:l,maxY:c};return u=mergeArrowBBox(r,u),{x:u.minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}}function ellipse(r){var e=r.attr(),t=e.x,n=e.y,i=e.rx,a=e.ry;return{x:t-i,y:n-a,width:i*2,height:a*2}}register("rect",rect$1);register("image",rect$1);register("circle",circle$1);register("marker",circle$1);register("polyline",polyline);register("polygon",polygon$1);register("text",text);register("path",path);register("line",line$1);register("ellipse",ellipse);var DEFAULT_Y=0,MARGIN_RATIO=1/2,DODGE_RATIO=1/2,GAP=.05,Adjust=function(){function r(e){var t=e.xField,n=e.yField,i=e.adjustNames,a=i===void 0?["x","y"]:i,o=e.dimValuesMap;this.adjustNames=a,this.xField=t,this.yField=n,this.dimValuesMap=o}return r.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},r.prototype.getAdjustRange=function(e,t,n){var i=this.yField,a=n.indexOf(t),o=n.length,s,l;return!i&&this.isAdjust("y")?(s=0,l=1):o>1?(s=n[a===0?0:a-1],l=n[a===o-1?o-1:a+1],a!==0?s+=(t-s)/2:s-=(l-t)/2,a!==o-1?l-=(l-t)/2:l+=(t-n[o-2])/2):(s=t===0?0:t-.5,l=t===0?1:t+.5),{pre:s,next:l}},r.prototype.adjustData=function(e,t){var n=this,i=this.getDimValues(t);each$1(e,function(a,o){each$1(i,function(s,l){n.adjustDim(l,s,a,o)})})},r.prototype.groupData=function(e,t){return each$1(e,function(n){n[t]===void 0&&(n[t]=DEFAULT_Y)}),groupBy(e,t)},r.prototype.adjustDim=function(e,t,n,i){},r.prototype.getDimValues=function(e){var t=this,n=t.xField,i=t.yField,a=mix({},this.dimValuesMap),o=[];if(n&&this.isAdjust("x")&&o.push(n),i&&this.isAdjust("y")&&o.push(i),o.forEach(function(l){a&&a[l]||(a[l]=valuesOfKey(e,l).sort(function(c,u){return c-u}))}),!i&&this.isAdjust("y")){var s="y";a[s]=[DEFAULT_Y,1]}return a},r}(),ADJUST_MAP={},getAdjust=function(r){return ADJUST_MAP[r.toLowerCase()]},registerAdjust=function(r,e){if(getAdjust(r))throw new Error("Adjust type '"+r+"' existed.");ADJUST_MAP[r.toLowerCase()]=e};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(r,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics(r,e)};function __extends(r,e){extendStatics(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var __assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__assign.apply(this,arguments)},Dodge=function(r){__extends(e,r);function e(t){var n=r.call(this,t)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var i=t.marginRatio,a=i===void 0?MARGIN_RATIO:i,o=t.dodgeRatio,s=o===void 0?DODGE_RATIO:o,l=t.dodgeBy,c=t.intervalPadding,u=t.dodgePadding,f=t.xDimensionLength,d=t.groupNum,g=t.defaultSize,p=t.maxColumnWidth,v=t.minColumnWidth,y=t.columnWidthRatio,m=t.customOffset;return n.marginRatio=a,n.dodgeRatio=s,n.dodgeBy=l,n.intervalPadding=c,n.dodgePadding=u,n.xDimensionLegenth=f,n.groupNum=d,n.defaultSize=g,n.maxColumnWidth=p,n.minColumnWidth=v,n.columnWidthRatio=y,n.customOffset=m,n}return e.prototype.process=function(t){var n=clone(t),i=flatten(n),a=this.dodgeBy,o=a?group$1(i,a):n;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=i,this.adjustData(o,i),this.adjustDataArray=[],this.mergeData=[],n},e.prototype.adjustDim=function(t,n,i,a){var o=this,s=this.customOffset,l=this.getDistribution(t),c=this.groupData(i,t);return each$1(c,function(u,f){var d;n.length===1?d={pre:n[0]-1,next:n[0]+1}:d=o.getAdjustRange(t,parseFloat(f),n),each$1(u,function(g){var p=g[t],v=l[p],y=v.indexOf(a);if(isNil(s))g[t]=o.getDodgeOffset(d,y,v.length);else{var m=d.pre,x=d.next;g[t]=isFunction(s)?s(g,d):(m+x)/2+s}})}),[]},e.prototype.getDodgeOffset=function(t,n,i){var a=this,o=a.dodgeRatio,s=a.marginRatio,l=a.intervalPadding,c=a.dodgePadding,u=t.pre,f=t.next,d=f-u,g;if(!isNil(l)&&isNil(c)&&l>=0){var p=this.getIntervalOnlyOffset(i,n);g=u+p}else if(!isNil(c)&&isNil(l)&&c>=0){var p=this.getDodgeOnlyOffset(i,n);g=u+p}else if(!isNil(l)&&!isNil(c)&&l>=0&&c>=0){var p=this.getIntervalAndDodgeOffset(i,n);g=u+p}else{var v=d*o/i,y=s*v,p=1/2*(d-i*v-(i-1)*y)+((n+1)*v+n*y)-1/2*v-1/2*d;g=(u+f)/2+p}return g},e.prototype.getIntervalOnlyOffset=function(t,n){var i=this,a=i.defaultSize,o=i.intervalPadding,s=i.xDimensionLegenth,l=i.groupNum,c=i.dodgeRatio,u=i.maxColumnWidth,f=i.minColumnWidth,d=i.columnWidthRatio,g=o/s,p=(1-(l-1)*g)/l*c/(t-1),v=((1-g*(l-1))/l-p*(t-1))/t;if(v=isNil(d)?v:1/l/t*d,!isNil(u)){var y=u/s;v=Math.min(v,y)}if(!isNil(f)){var m=f/s;v=Math.max(v,m)}v=a?a/s:v,p=((1-(l-1)*g)/l-t*v)/(t-1);var x=((1/2+n)*v+n*p+1/2*g)*l-g/2;return x},e.prototype.getDodgeOnlyOffset=function(t,n){var i=this,a=i.defaultSize,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,c=i.marginRatio,u=i.maxColumnWidth,f=i.minColumnWidth,d=i.columnWidthRatio,g=o/s,p=1*c/(l-1),v=((1-p*(l-1))/l-g*(t-1))/t;if(v=d?1/l/t*d:v,!isNil(u)){var y=u/s;v=Math.min(v,y)}if(!isNil(f)){var m=f/s;v=Math.max(v,m)}v=a?a/s:v,p=(1-(v*t+g*(t-1))*l)/(l-1);var x=((1/2+n)*v+n*g+1/2*p)*l-p/2;return x},e.prototype.getIntervalAndDodgeOffset=function(t,n){var i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,c=a/s,u=o/s,f=((1-c*(l-1))/l-u*(t-1))/t,d=((1/2+n)*f+n*u+1/2*c)*l-c/2;return d},e.prototype.getDistribution=function(t){var n=this.adjustDataArray,i=this.cacheMap,a=i[t];return a||(a={},each$1(n,function(o,s){var l=valuesOfKey(o,t);l.length||l.push(0),each$1(l,function(c){a[c]||(a[c]=[]),a[c].push(s)})}),i[t]=a),a},e}(Adjust);function randomNumber(r,e){return(e-r)*Math.random()+r}var Jitter=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t){var n=clone(t),i=flatten(n);return this.adjustData(n,i),n},e.prototype.adjustDim=function(t,n,i){var a=this,o=this.groupData(i,t);return each$1(o,function(s,l){return a.adjustGroup(s,t,parseFloat(l),n)})},e.prototype.getAdjustOffset=function(t){var n=t.pre,i=t.next,a=(i-n)*GAP;return randomNumber(n+a,i-a)},e.prototype.adjustGroup=function(t,n,i,a){var o=this,s=this.getAdjustRange(n,i,a);return each$1(t,function(l){l[n]=o.getAdjustOffset(s)}),t},e}(Adjust),Cache=default_1,Stack=function(r){__extends(e,r);function e(t){var n=r.call(this,t)||this,i=t.adjustNames,a=i===void 0?["y"]:i,o=t.height,s=o===void 0?NaN:o,l=t.size,c=l===void 0?10:l,u=t.reverseOrder,f=u===void 0?!1:u;return n.adjustNames=a,n.height=s,n.size=c,n.reverseOrder=f,n}return e.prototype.process=function(t){var n=this,i=n.yField,a=n.reverseOrder,o=i?this.processStack(t):this.processOneDimStack(t);return a?this.reverse(o):o},e.prototype.reverse=function(t){return t.slice(0).reverse()},e.prototype.processStack=function(t){var n=this,i=n.xField,a=n.yField,o=n.reverseOrder,s=o?this.reverse(t):t,l=new Cache,c=new Cache;return s.map(function(u){return u.map(function(f){var d,g=get(f,i,0),p=get(f,[a]),v=g.toString();if(p=isArray$3(p)?p[1]:p,!isNil(p)){var y=p>=0?l:c;y.has(v)||y.set(v,0);var m=y.get(v),x=p+m;return y.set(v,x),__assign(__assign({},f),(d={},d[a]=[m,x],d))}return f})})},e.prototype.processOneDimStack=function(t){var n=this,i=this,a=i.xField,o=i.height,s=i.reverseOrder,l="y",c=s?this.reverse(t):t,u=new Cache;return c.map(function(f){return f.map(function(d){var g,p=n.size,v=d[a],y=p*2/o;u.has(v)||u.set(v,y/2);var m=u.get(v);return u.set(v,m+y),__assign(__assign({},d),(g={},g[l]=m,g))})})},e}(Adjust),Symmetric=function(r){__extends(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t){var n=flatten(t),i=this,a=i.xField,o=i.yField,s=this.getXValuesMaxMap(n),l=Math.max.apply(Math,Object.keys(s).map(function(c){return s[c]}));return map$2(t,function(c){return map$2(c,function(u){var f,d,g=u[o],p=u[a];if(isArray$3(g)){var v=(l-s[p])/2;return __assign(__assign({},u),(f={},f[o]=map$2(g,function(m){return v+m}),f))}var y=(l-g)/2;return __assign(__assign({},u),(d={},d[o]=[y,g+y],d))})})},e.prototype.getXValuesMaxMap=function(t){var n=this,i=this,a=i.xField,o=i.yField,s=groupBy(t,function(l){return l[a]});return mapValues(s,function(l){return n.getDimMaxValue(l,o)})},e.prototype.getDimMaxValue=function(t,n){var i=map$2(t,function(o){return get(o,n,[])}),a=flatten(i);return Math.max.apply(Math,a)},e}(Adjust);registerAdjust("Dodge",Dodge);registerAdjust("Jitter",Jitter);registerAdjust("Stack",Stack);registerAdjust("Symmetric",Symmetric);var toScaleString=function(r,e){return isString(e)?e:r.invert(r.scale(e))},Attribute=function(){function r(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return r.prototype.mapping=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t.map(function(a,o){return e._toOriginParam(a,e.scales[o])});return this.callback.apply(this,i)},r.prototype.getLinearValue=function(e){var t=this.values.length-1,n=Math.floor(t*e),i=t*e-n,a=this.values[n],o=n===t?a:this.values[n+1];return a+(o-a)*i},r.prototype.getNames=function(){for(var e=this.scales,t=this.names,n=Math.min(e.length,t.length),i=[],a=0;a<n;a+=1)i.push(t[a]);return i},r.prototype.getFields=function(){return this.scales.map(function(e){return e.field})},r.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},r.prototype.defaultCallback=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===0?this.values:t.map(function(i,a){var o=e.scales[a];return o.type==="identity"?o.values[0]:e._getAttributeValue(o,i)})},r.prototype._parseCfg=function(e){var t=this,n=e.type,i=n===void 0?"base":n,a=e.names,o=a===void 0?[]:a,s=e.scales,l=s===void 0?[]:s,c=e.values,u=c===void 0?[]:c,f=e.callback;this.type=i,this.scales=l,this.values=u,this.names=o,this.callback=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];if(f){var p=f.apply(void 0,d);if(!isNil(p))return[p]}return t.defaultCallback.apply(t,d)}},r.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var n=e.translate(t);return this.values[n%this.values.length]}var i=e.scale(t);return this.getLinearValue(i)},r.prototype._toOriginParam=function(e,t){return t.isLinear?e:isArray$3(e)?e.map(function(n){return toScaleString(t,n)}):toScaleString(t,e)},r}(),RGB_REG=/rgba?\(([\s.,0-9]+)\)/,regexLG$2=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG$2=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexColorStop$2=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,isGradientColor=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},createTmp=function(){var r=document.createElement("i");return r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r},getValue=function(r,e,t,n){return r[n]+(e[n]-r[n])*t};function arr2rgb(r){return"#"+toHex(r[0])+toHex(r[1])+toHex(r[2])}var rgb2arr=function(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]},toHex=function(r){var e=Math.round(r).toString(16);return e.length===1?"0"+e:e},calColor=function(r,e){var t=isNaN(Number(e))||e<0?0:e>1?1:Number(e),n=r.length-1,i=Math.floor(n*t),a=n*t-i,o=r[i],s=i===n?o:r[i+1];return arr2rgb([getValue(o,s,a,0),getValue(o,s,a,1),getValue(o,s,a,2)])},iEl,toRGB=function(r){if(r[0]==="#"&&r.length===7)return r;iEl||(iEl=createTmp()),iEl.style.color=r;var e=document.defaultView.getComputedStyle(iEl,"").getPropertyValue("color"),t=RGB_REG.exec(e),n=t[1].split(/\s*,\s*/).map(function(i){return Number(i)});return e=arr2rgb(n),e},gradient=function(r){var e=isString(r)?r.split("-"):r,t=map$2(e,function(n){return rgb2arr(n.indexOf("#")===-1?toRGB(n):n)});return function(n){return calColor(t,n)}},toCSSGradient=function(r){if(isGradientColor(r)){var e,t=void 0;if(r[0]==="l"){var n=regexLG$2.exec(r),i=+n[1]+90;t=n[2],e="linear-gradient("+i+"deg, "}else if(r[0]==="r"){e="radial-gradient(";var n=regexRG$2.exec(r);t=n[4]}var a=t.match(regexColorStop$2);return each$1(a,function(o,s){var l=o.split(":");e+=l[1]+" "+l[0]*100+"%",s!==a.length-1&&(e+=", ")}),e+=")",e}return r};const colorUtil={rgb2arr,gradient,toRGB:memoize(toRGB),toCSSGradient};var Color=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.type="color",n.names=["color"],isString(n.values)&&(n.linear=!0),n.gradient=colorUtil.gradient(n.values),n}return e.prototype.getLinearValue=function(t){return this.gradient(t)},e}(Attribute),Opacity=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.type="opacity",n.names=["opacity"],n}return e}(Attribute),Position=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.names=["x","y"],n.type="position",n}return e.prototype.mapping=function(t,n){var i=this.scales,a=i[0],o=i[1];return isNil(t)||isNil(n)?[]:[isArray$3(t)?t.map(function(s){return a.scale(s)}):a.scale(t),isArray$3(n)?n.map(function(s){return o.scale(s)}):o.scale(n)]},e}(Attribute),Shape$2=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.type="shape",n.names=["shape"],n}return e.prototype.getLinearValue=function(t){var n=Math.round((this.values.length-1)*t);return this.values[n]},e}(Attribute),Size=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.type="size",n.names=["size"],n}return e}(Attribute),methodCache={};function getTickMethod(r){return methodCache[r]}function registerTickMethod(r,e){methodCache[r]=e}var Scale=function(){function r(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return r.prototype.translate=function(e){return e},r.prototype.change=function(e){mix(this.__cfg__,e),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var e=this;return map$2(this.ticks,function(t,n){return isObject(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}})},r.prototype.getText=function(e,t){var n=this.formatter,i=n?n(e,t):e;return isNil(i)||!isFunction(i.toString)?"":i.toString()},r.prototype.getConfig=function(e){return this.__cfg__[e]},r.prototype.init=function(){mix(this,this.__cfg__),this.setDomain(),isEmpty(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(isString(e)){var n=getTickMethod(e);if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else isFunction(e)&&(t=e(this));return t},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(e,t,n){return isNumber$1(e)?(e-t)/(n-t):NaN},r.prototype.calcValue=function(e,t,n){return t+e*(n-t)},r}(),Category$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var n=this.translateIndexMap.get(t);return n===void 0&&(n=isNumber$1(t)?t:NaN),n},e.prototype.scale=function(t){var n=this.translate(t),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var n=this.max-this.min,i=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(n*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=t;return isNumber$1(t)&&!this.values.includes(t)&&(a=this.values[a]),r.prototype.getText.apply(this,__spreadArrays([a],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(isNil(this.getConfig("min"))&&(this.min=0),isNil(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Scale),token=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,twoDigitsOptional="\\d\\d?",twoDigits="\\d\\d",threeDigits="\\d{3}",fourDigits="\\d{4}",word="[^\\s]+",literal=/\[([^]*?)\]/gm;function shorten(r,e){for(var t=[],n=0,i=r.length;n<i;n++)t.push(r[n].substr(0,e));return t}var monthUpdate=function(r){return function(e,t){var n=t[r].map(function(a){return a.toLowerCase()}),i=n.indexOf(e.toLowerCase());return i>-1?i:null}};function assign(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0,i=e;n<i.length;n++){var a=i[n];for(var o in a)r[o]=a[o]}return r}var dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort=shorten(monthNames,3),dayNamesShort=shorten(dayNames,3),defaultI18n={dayNamesShort,dayNames,monthNamesShort,monthNames,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},globalI18n=assign({},defaultI18n),setGlobalDateI18n=function(r){return globalI18n=assign(globalI18n,r)},regexEscape=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},pad=function(r,e){for(e===void 0&&(e=2),r=String(r);r.length<e;)r="0"+r;return r},formatFlags={D:function(r){return String(r.getDate())},DD:function(r){return pad(r.getDate())},Do:function(r,e){return e.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return pad(r.getDay())},ddd:function(r,e){return e.dayNamesShort[r.getDay()]},dddd:function(r,e){return e.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return pad(r.getMonth()+1)},MMM:function(r,e){return e.monthNamesShort[r.getMonth()]},MMMM:function(r,e){return e.monthNames[r.getMonth()]},YY:function(r){return pad(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return pad(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return pad(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return pad(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return pad(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return pad(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return pad(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return pad(r.getMilliseconds(),3)},a:function(r,e){return r.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(r,e){return r.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+pad(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+pad(Math.floor(Math.abs(e)/60),2)+":"+pad(Math.abs(e)%60,2)}},monthParse=function(r){return+r-1},emptyDigits=[null,twoDigitsOptional],emptyWord=[null,word],amPm=["isPm",word,function(r,e){var t=r.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],timezoneOffset=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var e=(r+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],parseFlags={D:["day",twoDigitsOptional],DD:["day",twoDigits],Do:["day",twoDigitsOptional+word,function(r){return parseInt(r,10)}],M:["month",twoDigitsOptional,monthParse],MM:["month",twoDigits,monthParse],YY:["year",twoDigits,function(r){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+r>68?t-1:t)+r)}],h:["hour",twoDigitsOptional,void 0,"isPm"],hh:["hour",twoDigits,void 0,"isPm"],H:["hour",twoDigitsOptional],HH:["hour",twoDigits],m:["minute",twoDigitsOptional],mm:["minute",twoDigits],s:["second",twoDigitsOptional],ss:["second",twoDigits],YYYY:["year",fourDigits],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",twoDigits,function(r){return+r*10}],SSS:["millisecond",threeDigits],d:emptyDigits,dd:emptyDigits,ddd:emptyWord,dddd:emptyWord,MMM:["month",word,monthUpdate("monthNamesShort")],MMMM:["month",word,monthUpdate("monthNames")],a:amPm,A:amPm,ZZ:timezoneOffset,Z:timezoneOffset},globalMasks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},setGlobalDateMasks=function(r){return assign(globalMasks,r)},format=function(r,e,t){if(e===void 0&&(e=globalMasks.default),t===void 0&&(t={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");e=globalMasks[e]||e;var n=[];e=e.replace(literal,function(a,o){return n.push(o),"@@@"});var i=assign(assign({},globalI18n),t);return e=e.replace(token,function(a){return formatFlags[a](r,i)}),e.replace(/@@@/g,function(){return n.shift()})};function parse(r,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=globalMasks[e]||e,r.length>1e3)return null;var n=new Date,i={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(literal,function(S,A){return o.push(regexEscape(A)),"@@@"}),l={},c={};s=regexEscape(s).replace(token,function(S){var A=parseFlags[S],b=A[0],C=A[1],E=A[3];if(l[b])throw new Error("Invalid format. "+b+" specified twice in format");return l[b]=!0,E&&(c[E]=!0),a.push(A),"("+C+")"}),Object.keys(c).forEach(function(S){if(!l[S])throw new Error("Invalid format. "+S+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var u=r.match(new RegExp(s,"i"));if(!u)return null;for(var f=assign(assign({},globalI18n),t),d=1;d<u.length;d++){var g=a[d-1],p=g[0],v=g[2],y=v?v(u[d],f):+u[d];if(y==null)return null;i[p]=y}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var x=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],d=0,_=x.length;d<_;d++)if(l[x[d][0]]&&i[x[d][0]]!==m[x[d][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var fecha={format,parse,defaultI18n,setGlobalDateI18n,setGlobalDateMasks};const fecha1=Object.freeze(Object.defineProperty({__proto__:null,assign,default:fecha,defaultI18n,format,parse,setGlobalDateI18n,setGlobalDateMasks},Symbol.toStringTag,{value:"Module"}));function bisector(r){return function(e,t,n,i){for(var a=isNil(n)?0:n,o=isNil(i)?e.length:i;a<o;){var s=a+o>>>1;r(e[s])>t?o=s:a=s+1}return a}}var FORMAT_METHOD="format";function timeFormat(r,e){var t=fecha1[FORMAT_METHOD]||fecha[FORMAT_METHOD];return t(r,e)}function toTimeStamp(r){return isString(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),isDate(r)&&(r=r.getTime()),r}var SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,MONTH=DAY*31,YEAR=DAY*365,intervals=[["HH:mm:ss",SECOND],["HH:mm:ss",SECOND*10],["HH:mm:ss",SECOND*30],["HH:mm",MINUTE],["HH:mm",MINUTE*10],["HH:mm",MINUTE*30],["HH",HOUR],["HH",HOUR*6],["HH",HOUR*12],["YYYY-MM-DD",DAY],["YYYY-MM-DD",DAY*4],["YYYY-WW",DAY*7],["YYYY-MM",MONTH],["YYYY-MM",MONTH*4],["YYYY-MM",MONTH*6],["YYYY",DAY*380]];function getTickInterval(r,e,t){var n=(e-r)/t,i=bisector(function(o){return o[1]})(intervals,n)-1,a=intervals[i];return i<0?a=intervals[0]:i>=intervals.length&&(a=last(intervals)),a}var TimeCat=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=toTimeStamp(t);var n=this.values.indexOf(t);return n===-1&&(isNumber$1(t)&&t<this.values.length?n=t:n=NaN),n},e.prototype.getText=function(t,n){var i=this.translate(t);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,n):timeFormat(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;each$1(t,function(n,i){t[i]=toTimeStamp(n)}),t.sort(function(n,i){return n-i}),r.prototype.setDomain.call(this)},e}(Category$1),Continuous=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if(isNil(t))return NaN;var n=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return n;var s=this.getScalePercent(t);return n+s*(i-n)},e.prototype.init=function(){r.prototype.init.call(this);var t=this.ticks,n=head(t),i=last(t);n<this.min&&(this.min=n),i>this.max&&(this.max=i),isNil(this.minLimit)||(this.min=n),isNil(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var t=getRange(this.values),n=t.min,i=t.max;isNil(this.min)&&(this.min=n),isNil(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},e.prototype.calculateTicks=function(){var t=this,n=r.prototype.calculateTicks.call(this);return this.nice||(n=filter(n,function(i){return i>=t.min&&i<=t.max})),n},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;return(t-i)/(n-i)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Scale),Linear=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t);return this.min+n*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Continuous);function calBase(r,e){var t=Math.E,n;return e>=0?n=Math.pow(t,Math.log(e)/r):n=Math.pow(t,Math.log(-e)/r)*-1,n}function log$1(r,e){return r===1?1:Math.log(e)/Math.log(r)}function getLogPositiveMin(r,e,t){isNil(t)&&(t=Math.max.apply(null,r));var n=t;return each$1(r,function(i){i>0&&i<n&&(n=i)}),n===t&&(n=t/e),n>1&&(n=1),n}var Log=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var n=this.base,i=log$1(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(t===0)return 0;s=log$1(n,l/n);var c=1/(i-s)*o;if(t<c)return t/c*l}else s=log$1(n,this.min);var u=(t-a)/o,f=u*(i-s)+s;return Math.pow(n,f)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){r.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=getLogPositiveMin(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return t<o?s=t/o/(log$1(a,n)-log$1(a,i)):s=(log$1(a,t)-log$1(a,i))/(log$1(a,n)-log$1(a,i)),s},e}(Continuous),Pow=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t),i=this.exponent,a=calBase(i,this.max),o=calBase(i,this.min),s=n*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var n=this.max,i=this.min;if(n===i)return 0;var a=this.exponent,o=(calBase(a,t)-calBase(a,i))/(calBase(a,n)-calBase(a,i));return o},e}(Continuous),Time=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,n){var i=this.translate(t),a=this.formatter;return a?a(i,n):timeFormat(i,this.mask)},e.prototype.scale=function(t){var n=t;return(isString(n)||isDate(n))&&(n=this.translate(n)),r.prototype.scale.call(this,n)},e.prototype.translate=function(t){return toTimeStamp(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!isNil(n)||!isNumber$1(n))&&(this.min=this.translate(this.min)),(!isNil(i)||!isNumber$1(i))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,l=0;each$1(t,function(c){var u=toTimeStamp(c);if(isNaN(u))throw new TypeError("Invalid Time: "+c+" in time scale!");o>u?(s=o,o=u):s>u&&(s=u),l<u&&(l=u),a.push(u)}),t.length>1&&(this.minTickInterval=s-o),isNil(n)&&(this.min=o),isNil(i)&&(this.max=l)}},e}(Linear),Quantize=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var n=this.ticks,i=n.length,a=this.getInvertPercent(t),o=Math.floor(a*(i-1));if(o>=i-1)return last(n);if(o<0)return head(n);var s=n[o],l=n[o+1],c=o/(i-1),u=(o+1)/(i-1);return s+(a-c)/(u-c)*(l-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=r.prototype.calculateTicks.call(this);return this.nice||(last(t)!==this.max&&t.push(this.max),head(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var n=this.ticks;if(t<head(n))return 0;if(t>last(n))return 1;var i=0;return each$1(n,function(a,o){if(t>=a)i=o;else return!1}),i/(n.length-1)},e}(Continuous),Quantile=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Quantize),map={};function getClass(r){return map[r]}function registerClass(r,e){if(getClass(r))throw new Error("type '"+r+"' existed.");map[r]=e}var Identity=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&isNumber$1(t)?t:this.range[0]},e.prototype.invert=function(t){var n=this.range;return t<n[0]||t>n[1]?NaN:this.values[0]},e}(Scale);function calculateCatTicks(r){var e=r.values,t=r.tickInterval,n=r.tickCount,i=r.showLast;if(isNumber$1(t)){var a=filter(e,function(p,v){return v%t===0}),o=last(e);return i&&last(a)!==o&&a.push(o),a}var s=e.length,l=r.min,c=r.max;if(isNil(l)&&(l=0),isNil(c)&&(c=e.length-1),!isNumber$1(n)||n>=s)return e.slice(l,c+1);if(n<=0||c<=0)return[];for(var u=n===1?s:Math.floor(s/(n-1)),f=[],d=l,g=0;g<n&&!(d>=c);g++)d=Math.min(l+g*u,c),g===n-1&&i?f.push(e[c]):f.push(e[d]);return f}function d3Linear(r){var e=r.min,t=r.max,n=r.nice,i=r.tickCount,a=new D3Linear;return a.domain([e,t]),n&&a.nice(i),a.ticks(i)}var DEFAULT_COUNT=5,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),D3Linear=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},r.prototype.nice=function(e){var t,n;e===void 0&&(e=DEFAULT_COUNT);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],c;return l<s&&(t=[l,s],s=t[0],l=t[1],n=[o,a],a=n[0],o=n[1]),c=tickIncrement(s,l,e),c>0?(s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c,c=tickIncrement(s,l,e)):c<0&&(s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c,c=tickIncrement(s,l,e)),c>0?(i[a]=Math.floor(s/c)*c,i[o]=Math.ceil(l/c)*c,this.domain(i)):c<0&&(i[a]=Math.ceil(s*c)/c,i[o]=Math.floor(l*c)/c,this.domain(i)),this},r.prototype.ticks=function(e){return e===void 0&&(e=DEFAULT_COUNT),d3ArrayTicks(this._domain[0],this._domain[this._domain.length-1],e||DEFAULT_COUNT)},r}();function d3ArrayTicks(r,e,t){var n,i=-1,a,o,s;if(e=+e,r=+r,t=+t,r===e&&t>0)return[r];if((n=e<r)&&(a=r,r=e,e=a),(s=tickIncrement(r,e,t))===0||!isFinite(s))return[];if(s>0)for(r=Math.ceil(r/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-r+1));++i<a;)o[i]=(r+i)*s;else for(r=Math.floor(r*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(r-e+1));++i<a;)o[i]=(r-i)/s;return n&&o.reverse(),o}function tickIncrement(r,e,t){var n=(e-r)/Math.max(0,t),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=e10?10:a>=e5?5:a>=e2?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=e10?10:a>=e5?5:a>=e2?2:1)}function snapMultiple(r,e,t){var n;return t==="ceil"?n=Math.ceil(r/e):t==="floor"?n=Math.floor(r/e):n=Math.round(r/e),n*e}function intervalTicks(r,e,t){var n=snapMultiple(r,t,"floor"),i=snapMultiple(e,t,"ceil");n=fixedBase(n,t),i=fixedBase(i,t);for(var a=[],o=Math.max((i-n)/(Math.pow(2,12)-1),t),s=n;s<=i;s=s+o){var l=fixedBase(s,o);a.push(l)}return{min:n,max:i,ticks:a}}function strictLimit(r,e,t){var n,i=r.minLimit,a=r.maxLimit,o=r.min,s=r.max,l=r.tickCount,c=l===void 0?5:l,u=isNil(i)?isNil(e)?o:e:i,f=isNil(a)?isNil(t)?s:t:a;if(u>f&&(n=[u,f],f=n[0],u=n[1]),c<=2)return[u,f];for(var d=(f-u)/(c-1),g=[],p=0;p<c;p++)g.push(u+d*p);return g}function d3LinearTickMethod(r){var e=r.min,t=r.max,n=r.tickInterval,i=r.minLimit,a=r.maxLimit,o=d3Linear(r);return!isNil(i)||!isNil(a)?strictLimit(r,head(o),last(o)):n?intervalTicks(e,t,n).ticks:o}function prettyNumber(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var DEFAULT_Q=[1,5,2,2.5,4,3],eps=Number.EPSILON*100;function mod(r,e){return(r%e+e)%e}function round(r){return Math.round(r*1e12)/1e12}function simplicity(r,e,t,n,i,a){var o=size(e),s=indexOf(e,r),l=0,c=mod(n,a);return(c<eps||a-c<eps)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-t+l}function simplicityMax(r,e,t){var n=size(e),i=indexOf(e,r),a=1;return 1-i/(n-1)-t+a}function density(r,e,t,n,i,a){var o=(r-1)/(a-i),s=(e-1)/(Math.max(a,n)-Math.min(t,i));return 2-Math.max(o/s,s/o)}function densityMax(r,e){return r>=e?2-(r-1)/(e-1):1}function coverage(r,e,t,n){var i=e-r;return 1-.5*(Math.pow(e-n,2)+Math.pow(r-t,2))/Math.pow(.1*i,2)}function coverageMax(r,e,t){var n=e-r;if(t>n){var i=(t-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function legibility(){return 1}function extended(r,e,t,n,i,a){t===void 0&&(t=5),n===void 0&&(n=!0),i===void 0&&(i=DEFAULT_Q),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(r)||Number.isNaN(e)||typeof r!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-r<1e-15||o===1)return{min:r,max:e,ticks:[r]};if(e-r>1e148){var s=t||5,l=(e-r)/s;return{min:r,max:e,ticks:Array(s).fill(null).map(function(F,V){return prettyNumber(r+l*V)})}}for(var c={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var f=0;f<i.length;f+=1){var d=i[f],g=simplicityMax(d,i,u);if(a[0]*g+a[1]+a[2]+a[3]<c.score){u=1/0;break}for(var p=2;p<1/0;){var v=densityMax(p,o);if(a[0]*g+a[1]+a[2]*v+a[3]<c.score)break;for(var y=(e-r)/(p+1)/u/d,m=Math.ceil(Math.log10(y));m<1/0;){var x=u*d*Math.pow(10,m),_=coverageMax(r,e,x*(p-1));if(a[0]*g+a[1]*_+a[2]*v+a[3]<c.score)break;var S=Math.floor(e/x)*u-(p-1)*u,A=Math.ceil(r/x)*u;if(S<=A)for(var s=A-S,b=0;b<=s;b+=1){var C=S+b,E=C*(x/u),T=E+x*(p-1),I=x,w=simplicity(d,i,u,E,T,I),M=coverage(r,e,E,T),$=density(p,o,r,e,E,T),P=legibility(),R=a[0]*w+a[1]*M+a[2]*$+a[3]*P;R>c.score&&(!n||E<=r&&T>=e)&&(c.lmin=E,c.lmax=T,c.lstep=I,c.score=R)}m+=1}p+=1}}u+=1}var L=prettyNumber(c.lmax),O=prettyNumber(c.lmin),k=prettyNumber(c.lstep),B=Math.floor(round((L-O)/k))+1,N=new Array(B);N[0]=prettyNumber(O);for(var f=1;f<B;f++)N[f]=prettyNumber(N[f-1]+k);return{min:Math.min(r,head(N)),max:Math.max(e,last(N)),ticks:N}}function linear$1(r){var e=r.min,t=r.max,n=r.tickCount,i=r.nice,a=r.tickInterval,o=r.minLimit,s=r.maxLimit,l=extended(e,t,n,i).ticks;return!isNil(o)||!isNil(s)?strictLimit(r,head(l),last(l)):a?intervalTicks(e,t,a).ticks:l}function calculateLogTicks(r){var e=r.base,t=r.tickCount,n=r.min,i=r.max,a=r.values,o,s=log$1(e,i);if(n>0)o=Math.floor(log$1(e,n));else{var l=getLogPositiveMin(a,e,i);o=Math.floor(log$1(e,l))}for(var c=s-o,u=Math.ceil(c/t),f=[],d=o;d<s+u;d=d+u)f.push(Math.pow(e,d));return n<=0&&f.unshift(0),f}function pretty(r,e,t){if(t===void 0&&(t=5),r===e)return{max:e,min:r,ticks:[r]};var n=t<0?0:Math.round(t);if(n===0)return{max:e,min:r,ticks:[]};var i=1.5,a=.5+1.5*i,o=e-r,s=o/n,l=Math.pow(10,Math.floor(Math.log10(s))),c=l;2*l-s<i*(s-c)&&(c=2*l,5*l-s<a*(s-c)&&(c=5*l,10*l-s<i*(s-c)&&(c=10*l)));for(var u=Math.ceil(e/c),f=Math.floor(r/c),d=Math.max(u*c,e),g=Math.min(f*c,r),p=Math.floor((d-g)/c)+1,v=new Array(p),y=0;y<p;y++)v[y]=prettyNumber(g+y*c);return{min:g,max:d,ticks:v}}function calculatePowTicks(r){var e=r.exponent,t=r.tickCount,n=Math.ceil(calBase(e,r.max)),i=Math.floor(calBase(e,r.min)),a=pretty(i,n,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function quantileSorted$1(r,e){var t=r.length*e;return e===1?r[r.length-1]:e===0?r[0]:t%1!==0?r[Math.ceil(t)-1]:r.length%2===0?(r[t-1]+r[t])/2:r[t]}function calculateTicks(r){var e=r.tickCount,t=r.values;if(!t||!t.length)return[];for(var n=t.slice().sort(function(s,l){return s-l}),i=[],a=0;a<e;a++){var o=a/(e-1);i.push(quantileSorted$1(n,o))}return i}function linearPretty(r){var e=r.min,t=r.max,n=r.tickCount,i=r.tickInterval,a=r.minLimit,o=r.maxLimit,s=pretty(e,t,n).ticks;return!isNil(a)||!isNil(o)?strictLimit(r,head(s),last(s)):i?intervalTicks(e,t,i).ticks:s}function calculateTimeTicks(r){var e=r.min,t=r.max,n=r.minTickInterval,i=r.tickInterval,a=r.tickCount;if(i)a=Math.ceil((t-e)/i);else{i=getTickInterval(e,t,a)[1];var o=(t-e)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),n&&i<n&&(i=n)}i=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),i);for(var l=[],c=e;c<t+i;c+=i)l.push(c);return l}function timeCat(r){var e=calculateCatTicks(__assign$1({showLast:!0},r));return e}function getYear(r){return new Date(r).getFullYear()}function createYear(r){return new Date(r,0,1).getTime()}function getMonth(r){return new Date(r).getMonth()}function diffMonth(r,e){var t=getYear(r),n=getYear(e),i=getMonth(r),a=getMonth(e);return(n-t)*12+(a-i)%12}function creatMonth(r,e){return new Date(r,e,1).getTime()}function diffDay(r,e){return Math.ceil((e-r)/DAY)}function diffHour(r,e){return Math.ceil((e-r)/HOUR)}function diffMinus(r,e){return Math.ceil((e-r)/(60*1e3))}function timePretty(r){var e=r.min,t=r.max,n=r.minTickInterval,i=r.tickCount,a=r.tickInterval,o=[];a||(a=(t-e)/i,n&&a<n&&(a=n)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=getYear(e);if(a>YEAR)for(var l=getYear(t),c=Math.ceil(a/YEAR),u=s;u<=l+c;u=u+c)o.push(createYear(u));else if(a>MONTH)for(var f=Math.ceil(a/MONTH),d=getMonth(e),g=diffMonth(e,t),u=0;u<=g+f;u=u+f)o.push(creatMonth(s,u+d));else if(a>DAY)for(var p=new Date(e),v=p.getFullYear(),y=p.getMonth(),m=p.getDate(),x=Math.ceil(a/DAY),_=diffDay(e,t),u=0;u<_+x;u=u+x)o.push(new Date(v,y,m+u).getTime());else if(a>HOUR)for(var p=new Date(e),v=p.getFullYear(),y=p.getMonth(),x=p.getDate(),S=p.getHours(),A=Math.ceil(a/HOUR),b=diffHour(e,t),u=0;u<=b+A;u=u+A)o.push(new Date(v,y,x,S+u).getTime());else if(a>MINUTE)for(var C=diffMinus(e,t),E=Math.ceil(a/MINUTE),u=0;u<=C+E;u=u+E)o.push(e+u*MINUTE);else{var T=a;T<SECOND&&(T=SECOND);for(var I=Math.floor(e/SECOND)*SECOND,w=Math.ceil((t-e)/SECOND),M=Math.ceil(T/SECOND),u=0;u<w+M;u=u+M)o.push(I+u*SECOND)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}registerTickMethod("cat",calculateCatTicks);registerTickMethod("time-cat",timeCat);registerTickMethod("wilkinson-extended",linear$1);registerTickMethod("r-pretty",linearPretty);registerTickMethod("time",calculateTimeTicks);registerTickMethod("time-pretty",timePretty);registerTickMethod("log",calculateLogTicks);registerTickMethod("pow",calculatePowTicks);registerTickMethod("quantile",calculateTicks);registerTickMethod("d3-linear",d3LinearTickMethod);registerClass("cat",Category$1);registerClass("category",Category$1);registerClass("identity",Identity);registerClass("linear",Linear);registerClass("log",Log);registerClass("pow",Pow);registerClass("time",Time);registerClass("timeCat",TimeCat);registerClass("quantize",Quantize);registerClass("quantile",Quantile);var ATTRIBUTE_MAP={},getAttribute=function(r){return ATTRIBUTE_MAP[r.toLowerCase()]},registerAttribute=function(r,e){if(getAttribute(r))throw new Error("Attribute type '".concat(r,"' existed."));ATTRIBUTE_MAP[r.toLowerCase()]=e};registerAttribute("Color",Color);registerAttribute("Opacity",Opacity);registerAttribute("Position",Position);registerAttribute("Shape",Shape$2);registerAttribute("Size",Size);var Coordinate=function(){function r(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,n=e.end,i=e.matrix,a=i===void 0?[1,0,0,0,1,0,0,0,1]:i,o=e.isTransposed,s=o===void 0?!1:o;this.start=t,this.end=n,this.matrix=a,this.originalMatrix=__spreadArray$1([],a),this.isTransposed=s}return r.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},r.prototype.update=function(e){mix(this,e),this.initial()},r.prototype.convertDim=function(e,t){var n,i=this[t],a=i.start,o=i.end;return this.isReflect(t)&&(n=[o,a],a=n[0],o=n[1]),a+e*(o-a)},r.prototype.invertDim=function(e,t){var n,i=this[t],a=i.start,o=i.end;return this.isReflect(t)&&(n=[o,a],a=n[0],o=n[1]),(e-a)/(o-a)},r.prototype.applyMatrix=function(e,t,n){n===void 0&&(n=0);var i=this.matrix,a=[e,t,n];return transformMat3$1(a,a,i),a},r.prototype.invertMatrix=function(e,t,n){n===void 0&&(n=0);var i=this.matrix,a=invert$1([0,0,0,0,0,0,0,0,0],i),o=[e,t,n];return a&&transformMat3$1(o,o,a),o},r.prototype.convert=function(e){var t=this.convertPoint(e),n=t.x,i=t.y,a=this.applyMatrix(n,i,1);return{x:a[0],y:a[1]}},r.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},r.prototype.rotate=function(e){var t=this.matrix,n=this.center;return leftTranslate(t,t,[-n.x,-n.y]),leftRotate(t,t,e),leftTranslate(t,t,[n.x,n.y]),this},r.prototype.reflect=function(e){return e==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},r.prototype.scale=function(e,t){var n=this.matrix,i=this.center;return leftTranslate(n,n,[-i.x,-i.y]),leftScale(n,n,[e,t]),leftTranslate(n,n,[i.x,i.y]),this},r.prototype.translate=function(e,t){var n=this.matrix;return leftTranslate(n,n,[e,t]),this},r.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},r.prototype.getCenter=function(){return this.center},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRadius=function(){return this.radius},r.prototype.isReflect=function(e){return e==="x"?this.isReflectX:this.isReflectY},r.prototype.resetMatrix=function(e){this.matrix=e||__spreadArray$1([],this.originalMatrix)},r}(),Cartesian=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return e.prototype.initial=function(){r.prototype.initial.call(this);var t=this.start,n=this.end;this.x={start:t.x,end:n.x},this.y={start:t.y,end:n.y}},e.prototype.convertPoint=function(t){var n,i=t.x,a=t.y;return this.isTransposed&&(n=[a,i],i=n[0],a=n[1]),{x:this.convertDim(i,"x"),y:this.convertDim(a,"y")}},e.prototype.invertPoint=function(t){var n,i=this.invertDim(t.x,"x"),a=this.invertDim(t.y,"y");return this.isTransposed&&(n=[a,i],i=n[0],a=n[1]),{x:i,y:a}},e}(Coordinate),Helix=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.isHelix=!0,n.type="helix";var i=t.startAngle,a=i===void 0?1.25*Math.PI:i,o=t.endAngle,s=o===void 0?7.25*Math.PI:o,l=t.innerRadius,c=l===void 0?0:l,u=t.radius;return n.startAngle=a,n.endAngle=s,n.innerRadius=c,n.radius=u,n.initial(),n}return e.prototype.initial=function(){r.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n=n*this.radius),this.d=Math.floor(n*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+this.d*.99}},e.prototype.convertPoint=function(t){var n,i=t.x,a=t.y;this.isTransposed&&(n=[a,i],i=n[0],a=n[1]);var o=this.convertDim(i,"x"),s=this.a*o,l=this.convertDim(a,"y");return{x:this.center.x+Math.cos(o)*(s+l),y:this.center.y+Math.sin(o)*(s+l)}},e.prototype.invertPoint=function(t){var n,i=this.d+this.y.start,a=subtract([0,0],[t.x,t.y],[this.center.x,this.center.y]),o=angleTo(a,[1,0],!0),s=o*this.a;length(a)<s&&(s=length(a));var l=Math.floor((length(a)-s)/i);o=2*l*Math.PI+o;var c=this.a*o,u=length(a)-c;u=isNumberEqual$1(u,0)?0:u;var f=this.invertDim(o,"x"),d=this.invertDim(u,"y");return f=isNumberEqual$1(f,0)?0:f,d=isNumberEqual$1(d,0)?0:d,this.isTransposed&&(n=[d,f],f=n[0],d=n[1]),{x:f,y:d}},e}(Coordinate),Polar=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.isPolar=!0,n.type="polar";var i=t.startAngle,a=i===void 0?-Math.PI/2:i,o=t.endAngle,s=o===void 0?Math.PI*3/2:o,l=t.innerRadius,c=l===void 0?0:l,u=t.radius;return n.startAngle=a,n.endAngle=s,n.innerRadius=c,n.radius=u,n.initial(),n}return e.prototype.initial=function(){for(r.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),n=t.maxX-t.minX,i=t.maxY-t.minY,a=Math.abs(t.minX)/n,o=Math.abs(t.minY)/i,s;this.height/i>this.width/n?(s=this.width/n,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*s*i}):(s=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*s*n,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=s*this.radius:(this.radius<=0||this.radius>s)&&(this.polarRadius=s):this.polarRadius=s,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},e.prototype.getRadius=function(){return this.polarRadius},e.prototype.convertPoint=function(t){var n,i=this.getCenter(),a=t.x,o=t.y;return this.isTransposed&&(n=[o,a],a=n[0],o=n[1]),a=this.convertDim(a,"x"),o=this.convertDim(o,"y"),{x:i.x+Math.cos(a)*o,y:i.y+Math.sin(a)*o}},e.prototype.invertPoint=function(t){var n,i=this.getCenter(),a=[t.x-i.x,t.y-i.y],o=this,s=o.startAngle,l=o.endAngle;this.isReflect("x")&&(n=[l,s],s=n[0],l=n[1]);var c=[1,0,0,0,1,0,0,0,1];leftRotate(c,c,s);var u=[1,0,0];transformMat3$1(u,u,c);var f=[u[0],u[1]],d=angleTo(f,a,l<s);isNumberEqual$1(d,Math.PI*2)&&(d=0);var g=length(a),p=d/(l-s);p=l-s>0?p:-p;var v=this.invertDim(g,"y"),y={x:0,y:0};return y.x=this.isTransposed?v:p,y.y=this.isTransposed?p:v,y},e.prototype.getCenter=function(){return this.circleCenter},e.prototype.getOneBox=function(){var t=this.startAngle,n=this.endAngle;if(Math.abs(n-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var i=[0,Math.cos(t),Math.cos(n)],a=[0,Math.sin(t),Math.sin(n)],o=Math.min(t,n);o<Math.max(t,n);o+=Math.PI/18)i.push(Math.cos(o)),a.push(Math.sin(o));return{minX:Math.min.apply(Math,i),maxX:Math.max.apply(Math,i),minY:Math.min.apply(Math,a),maxY:Math.max.apply(Math,a)}},e}(Coordinate),COORDINATE_MAP={},getCoordinate=function(r){return COORDINATE_MAP[r.toLowerCase()]},registerCoordinate=function(r,e){COORDINATE_MAP[r.toLowerCase()]=e};registerCoordinate("rect",Cartesian);registerCoordinate("cartesian",Cartesian);registerCoordinate("polar",Polar);registerCoordinate("helix",Helix);function propagationDelegate(r,e,t){var n=new GraphEvent(e,t);n.target=r,n.propagationPath.push(r),r.emitDelegation(e,n);for(var i=r.getParent();i;)i.emitDelegation(e,n),n.propagationPath.push(i),i=i.getParent()}var identityMatrix=[1,0,0,0,1,0,0,0,1];function getMatrixByAngle(r,e,t){if(t===void 0&&(t=identityMatrix),!e)return null;var n=transform$6(t,[["t",-r.x,-r.y],["r",e],["t",r.x,r.y]]);return n}function getMatrixByTranslate(r,e){return!r.x&&!r.y?null:transform$6(e||identityMatrix,[["t",r.x,r.y]])}function getAngleByMatrix(r){var e=[1,0,0],t=[0,0,0];return transformMat3$1(t,e,r),Math.atan2(t[1],t[0])}function multiplyVec2(r,e){var t=[0,0];return transformMat3(t,e,r),t}function applyMatrix2BBox(r,e){var t=multiplyVec2(r,[e.minX,e.minY]),n=multiplyVec2(r,[e.maxX,e.minY]),i=multiplyVec2(r,[e.minX,e.maxY]),a=multiplyVec2(r,[e.maxX,e.maxY]),o=Math.min(t[0],n[0],i[0],a[0]),s=Math.max(t[0],n[0],i[0],a[0]),l=Math.min(t[1],n[1],i[1],a[1]),c=Math.max(t[1],n[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:c,width:s-o,height:c-l}}function applyRotate(r,e,t,n){if(e){var i=getMatrixByAngle({x:t,y:n},e,r.getMatrix());r.setMatrix(i)}}function applyTranslate(r,e,t){var n=getMatrixByTranslate({x:e,y:t});r.attr("matrix",n)}function formatPadding(r){var e=0,t=0,n=0,i=0;return isNumber$1(r)?e=t=n=i=r:isArray$3(r)&&(e=r[0],n=isNil(r[1])?r[0]:r[1],i=isNil(r[2])?r[0]:r[2],t=isNil(r[3])?n:r[3]),[e,n,i,t]}function clearDom(r){for(var e=r.childNodes,t=e.length,n=t-1;n>=0;n--)r.removeChild(e[n])}function hasClass(r,e){return!!r.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function regionToBBox(r){var e=r.start,t=r.end,n=Math.min(e.x,t.x),i=Math.min(e.y,t.y),a=Math.max(e.x,t.x),o=Math.max(e.y,t.y);return{x:n,y:i,minX:n,minY:i,maxX:a,maxY:o,width:a-n,height:o-i}}function pointsToBBox(r){var e=r.map(function(s){return s.x}),t=r.map(function(s){return s.y}),n=Math.min.apply(Math,e),i=Math.min.apply(Math,t),a=Math.max.apply(Math,e),o=Math.max.apply(Math,t);return{x:n,y:i,minX:n,minY:i,maxX:a,maxY:o,width:a-n,height:o-i}}function createBBox(r,e,t,n){var i=r+t,a=e+n;return{x:r,y:e,width:t,height:n,minX:r,minY:e,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function getValueByPercent(r,e,t){return(1-t)*r+e*t}function getCirclePoint(r,e,t){return{x:r.x+Math.cos(t)*e,y:r.y+Math.sin(t)*e}}function distance$4(r,e){var t=e.x-r.x,n=e.y-r.y;return Math.sqrt(t*t+n*n)}var near=function(r,e,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[r,e].includes(1/0)?Math.abs(r)===Math.abs(e):Math.abs(r-e)<t};function intersectBBox(r,e){var t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),i=Math.min(r.maxX,e.maxX),a=Math.min(r.maxY,e.maxY);return createBBox(t,n,i-t,a-n)}function getBBoxWithClip(r){var e=r.getClip(),t=e&&e.getBBox(),n;if(!r.isGroup())n=r.getBBox();else{var i=1/0,a=-1/0,o=1/0,s=-1/0,l=r.getChildren();l.length>0?each$1(l,function(c){if(c.get("visible")){if(c.isGroup()&&c.get("children").length===0)return!0;var u=getBBoxWithClip(c),f=c.applyToMatrix([u.minX,u.minY,1]),d=c.applyToMatrix([u.minX,u.maxY,1]),g=c.applyToMatrix([u.maxX,u.minY,1]),p=c.applyToMatrix([u.maxX,u.maxY,1]),v=Math.min(f[0],d[0],g[0],p[0]),y=Math.max(f[0],d[0],g[0],p[0]),m=Math.min(f[1],d[1],g[1],p[1]),x=Math.max(f[1],d[1],g[1],p[1]);v<i&&(i=v),y>a&&(a=y),m<o&&(o=m),x>s&&(s=x)}}):(i=0,a=0,o=0,s=0),n=createBBox(i,o,a-i,s-o)}return t?intersectBBox(n,t):n}function updateClip(r,e){if(!(!r.getClip()&&!e.getClip())){var t=e.getClip();if(!t){r.setClip(null);return}var n={type:t.get("type"),attrs:t.attr()};r.setClip(n)}}function toPx(r){return r+"px"}function getTextPoint(r,e,t,n){var i=distance$4(r,e),a=n/i,o=0;return t==="start"?o=0-a:t==="end"&&(o=1+a),{x:getValueByPercent(r.x,e.x,o),y:getValueByPercent(r.y,e.y,o)}}var LOCATION_FIELD_MAP={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},Component=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.initCfg(),n}return e.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},e.prototype.clear=function(){},e.prototype.update=function(t){var n=this,i=this.get("defaultCfg")||{};each$1(t,function(a,o){var s=n.get(o),l=a;s!==a&&(isObject(a)&&i[o]&&(l=deepMix({},i[o],a)),n.set(o,l))}),this.updateInner(t),this.afterUpdate(t)},e.prototype.updateInner=function(t){},e.prototype.afterUpdate=function(t){has(t,"visible")&&(t.visible?this.show():this.hide()),has(t,"capture")&&this.setCapture(t.capture)},e.prototype.getLayoutBBox=function(){return this.getBBox()},e.prototype.getLocationType=function(){return this.get("locationType")},e.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},e.prototype.setOffset=function(t,n){this.update({offsetX:t,offsetY:n})},e.prototype.setLocation=function(t){var n=__assign$1({},t);this.update(n)},e.prototype.getLocation=function(){var t=this,n={},i=this.get("locationType"),a=LOCATION_FIELD_MAP[i];return each$1(a,function(o){n[o]=t.get(o)}),n},e.prototype.isList=function(){return!1},e.prototype.isSlider=function(){return!1},e.prototype.init=function(){},e.prototype.initCfg=function(){var t=this,n=this.get("defaultCfg");each$1(n,function(i,a){var o=t.get(a);if(isObject(o)){var s=deepMix({},i,o);t.set(a,s)}})},e}(Base),STATUS_UPDATE="update_status",COPY_PROPERTIES=["visible","tip","delegateObject"],COPY_PROPERTIES_EXCLUDES=["container","group","shapesMap","isRegister","isUpdating","destroyed"],GroupComponent=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},e.prototype.remove=function(){this.clear();var t=this.get("group");t.remove()},e.prototype.clear=function(){var t=this.get("group");t.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},e.prototype.getChildComponentById=function(t){var n=this.getElementById(t),i=n&&n.get("component");return i},e.prototype.getElementById=function(t){return this.get("shapesMap")[t]},e.prototype.getElementByLocalId=function(t){var n=this.getElementId(t);return this.getElementById(n)},e.prototype.getElementsByName=function(t){var n=[];return each$1(this.get("shapesMap"),function(i){i.get("name")===t&&n.push(i)}),n},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},e.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var n=this.get("group");this.updateElements(t,n),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},e.prototype.show=function(){var t=this.get("group");t.show(),this.set("visible",!0)},e.prototype.hide=function(){var t=this.get("group");t.hide(),this.set("visible",!1)},e.prototype.setCapture=function(t){var n=this.get("group");n.set("capture",t),this.set("capture",t)},e.prototype.destroy=function(){this.removeEvent(),this.remove(),r.prototype.destroy.call(this)},e.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},e.prototype.getLayoutBBox=function(){var t=this.get("group"),n=this.getInnerLayoutBBox(),i=t.getTotalMatrix();return i&&(n=applyMatrix2BBox(i,n)),n},e.prototype.on=function(t,n,i){var a=this.get("group");return a.on(t,n,i),this},e.prototype.off=function(t,n){var i=this.get("group");return i&&i.off(t,n),this},e.prototype.emit=function(t,n){var i=this.get("group");i.emit(t,n)},e.prototype.init=function(){r.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},e.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},e.prototype.delegateEmit=function(t,n){var i=this.get("group");n.target=i,i.emit(t,n),propagationDelegate(i,t,n)},e.prototype.createOffScreenGroup=function(){var t=this.get("group"),n=t.getGroupBase(),i=new n({delegateObject:this.getDelegateObject()});return i},e.prototype.applyOffset=function(){var t=this.get("offsetX"),n=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:n})},e.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},e.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",getBBoxWithClip(t)),t},e.prototype.addGroup=function(t,n){this.appendDelegateObject(t,n);var i=t.addGroup(n);return this.get("isRegister")&&this.registerElement(i),i},e.prototype.addShape=function(t,n){this.appendDelegateObject(t,n);var i=t.addShape(n);return this.get("isRegister")&&this.registerElement(i),i},e.prototype.addComponent=function(t,n){var i=n.id,a=n.component,o=__rest(n,["id","component"]),s=new a(__assign$1(__assign$1({},o),{id:i,container:t,updateAutoRender:this.get("updateAutoRender")}));return s.init(),s.render(),this.get("isRegister")&&this.registerElement(s.get("group")),s},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){var t=this.get("group");t.off()},e.prototype.getElementId=function(t){var n=this.get("id"),i=this.get("name");return n+"-"+i+"-"+t},e.prototype.registerElement=function(t){var n=t.get("id");this.get("shapesMap")[n]=t},e.prototype.unregisterElement=function(t){var n=t.get("id");delete this.get("shapesMap")[n]},e.prototype.moveElementTo=function(t,n){var i=getMatrixByTranslate(n);t.attr("matrix",i)},e.prototype.addAnimation=function(t,n,i){var a=n.attr("opacity");isNil(a)&&(a=1),n.attr("opacity",0),n.animate({opacity:a},i)},e.prototype.removeAnimation=function(t,n,i){n.animate({opacity:0},i)},e.prototype.updateAnimation=function(t,n,i,a){n.animate(i,a)},e.prototype.updateElements=function(t,n){var i=this,a=this.get("animate"),o=this.get("animateOption"),s=t.getChildren().slice(0),l;each$1(s,function(c){var u=c.get("id"),f=i.getElementById(u),d=c.get("name");if(f)if(c.get("isComponent")){var g=c.get("component"),p=f.get("component"),v=pick$1(g.cfg,difference(keys(g.cfg),COPY_PROPERTIES_EXCLUDES));p.update(v),f.set(STATUS_UPDATE,"update")}else{var y=i.getReplaceAttrs(f,c);a&&o.update?i.updateAnimation(d,f,y,o.update):f.attr(y),c.isGroup()&&i.updateElements(c,f),each$1(COPY_PROPERTIES,function(S){f.set(S,c.get(S))}),updateClip(f,c),l=f,f.set(STATUS_UPDATE,"update")}else{n.add(c);var m=n.getChildren();if(m.splice(m.length-1,1),l){var x=m.indexOf(l);m.splice(x+1,0,c)}else m.unshift(c);if(i.registerElement(c),c.set(STATUS_UPDATE,"add"),c.get("isComponent")){var g=c.get("component");g.set("container",n)}else c.isGroup()&&i.registerNewGroup(c);if(l=c,a){var _=i.get("isInit")?o.appear:o.enter;_&&i.addAnimation(d,c,_)}}})},e.prototype.clearUpdateStatus=function(t){var n=t.getChildren();each$1(n,function(i){i.set(STATUS_UPDATE,null)})},e.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},e.prototype.getDelegateObject=function(){var t,n=this.get("name"),i=(t={},t[n]=this,t.component=this,t);return i},e.prototype.appendDelegateObject=function(t,n){var i=t.get("delegateObject");n.delegateObject||(n.delegateObject={}),mix(n.delegateObject,i)},e.prototype.getReplaceAttrs=function(t,n){var i=t.attr(),a=n.attr();return each$1(i,function(o,s){a[s]===void 0&&(a[s]=void 0)}),a},e.prototype.registerNewGroup=function(t){var n=this,i=t.getChildren();each$1(i,function(a){n.registerElement(a),a.set(STATUS_UPDATE,"add"),a.isGroup()&&n.registerNewGroup(a)})},e.prototype.deleteElements=function(){var t=this,n=this.get("shapesMap"),i=[];each$1(n,function(s,l){!s.get(STATUS_UPDATE)||s.destroyed?i.push([l,s]):s.set(STATUS_UPDATE,null)});var a=this.get("animate"),o=this.get("animateOption");each$1(i,function(s){var l=s[0],c=s[1];if(!c.destroyed){var u=c.get("name");if(a&&o.leave){var f=mix({callback:function(){t.removeElement(c)}},o.leave);t.removeAnimation(u,c,f)}else t.removeElement(c)}delete n[l]})},e.prototype.removeElement=function(t){if(t.get("isGroup")){var n=t.get("component");n&&n.destroy()}t.remove()},e}(Component),ELLIPSIS_CODE$1="…";function strLen(r){for(var e=0,t=0;t<r.length;t++)e+=charAtLength(r,t);return e}function charAtLength(r,e){return r.charCodeAt(e)>0&&r.charCodeAt(e)<128?1:2}function ellipsisString(r,e,t){t===void 0&&(t="tail");var n=r.length,i="";if(t==="tail"){for(var a=0,o=0;a<e;){var s=charAtLength(r,o);if(a+s<=e)i+=r[o],a+=charAtLength(r,o),o++;else break}i+=ELLIPSIS_CODE$1}else if(t==="head"){for(var a=0,o=n-1;a<e;){var s=charAtLength(r,o);if(a+s<=e)i+=r[o],a+=charAtLength(r,o),o--;else break}i=ELLIPSIS_CODE$1+i}else{for(var l="",c="",a=0,u=0,f=n-1;a<e;){var d=charAtLength(r,u),g=!1;d+a<=e&&(l+=r[u],u++,a+=d,g=!0);var p=charAtLength(r,f);if(p+a<=e&&(c=r[f]+c,a+=p,f--,g=!0),!g)break}i=l+ELLIPSIS_CODE$1+c}return i}var ELLIPSIS_CODE="…",ELLIPSIS_CODE_LENGTH=2,OPTIMIZE_THRESHOLD=400;function getMaxLabelWidthOptimized(r){for(var e=r.map(function(l){var c=l.attr("text");return isNil(c)?"":""+c}),t=0,n=0,i=0;i<e.length;i+=1){for(var a=0,o=0;o<=e[i].length;o+=1){var s=e[i].charCodeAt(o);s>=19968&&s<=40869?a+=2:a+=1}a>t&&(t=a,n=i)}return r[n].getBBox().width}function getMaxLabelWidth(r){if(r.length>OPTIMIZE_THRESHOLD)return getMaxLabelWidthOptimized(r);var e=0;return each$1(r,function(t){var n=t.getBBox(),i=n.width;e<i&&(e=i)}),e}function getLabelLength(r,e){var t=e.getCanvasBBox();return r?t.width:t.height}function ellipsisLabel(r,e,t,n){var i;n===void 0&&(n="tail");var a=(i=e.attr("text"))!==null&&i!==void 0?i:"";if(n==="tail"){var o=pick$1(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),s=getEllipsisText$1(a,t,o,"…");return a!==s?(e.attr("text",s),e.set("tip",a),!0):(e.set("tip",null),!1)}var l=getLabelLength(r,e),c=strLen(a),u=!1;if(t<l){var f=Math.floor(t/l*c)-ELLIPSIS_CODE_LENGTH,d=void 0;f>=0?d=ellipsisString(a,f,n):d=ELLIPSIS_CODE,d&&(e.attr("text",d),u=!0)}return u?e.set("tip",a):e.set("tip",null),u}function renderTag$1(r,e){var t=e.x,n=e.y,i=e.content,a=e.style,o=e.id,s=e.name,l=e.rotate,c=e.maxLength,u=e.autoEllipsis,f=e.isVertical,d=e.ellipsisPosition,g=e.background,p=r.addGroup({id:o+"-group",name:s+"-group",attrs:{x:t,y:n}}),v=p.addShape({type:"text",id:o,name:s,attrs:__assign$1({x:0,y:0,text:i},a)}),y=formatPadding(get(g,"padding",0));if(c&&u){var m=c-(y[1]+y[3]);ellipsisLabel(!f,v,m,d)}if(g){var x=get(g,"style",{}),_=v.getCanvasBBox(),S=_.minX,A=_.minY,b=_.width,C=_.height,E=p.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:__assign$1({x:S-y[3],y:A-y[0],width:b+y[1]+y[3],height:C+y[0]+y[2]},x)});E.toBack()}applyTranslate(p,t,n),applyRotate(p,l,t,n)}const Theme={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"};var LineAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Theme.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Theme.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Theme.lineColor,lineWidth:1}}}})},e.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},e.prototype.renderLine=function(t){var n=this.get("start"),i=this.get("end"),a=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:__assign$1({x1:n.x,y1:n.y,x2:i.x,y2:i.y},a)})},e.prototype.getLabelPoint=function(t,n,i){var a;return i==="start"?a=0:i==="center"?a=.5:isString(i)&&i.indexOf("%")!==-1?a=parseInt(i,10)/100:isNumber$1(i)?a=i:a=1,(a>1||a<0)&&(a=1),{x:getValueByPercent(t.x,n.x,a),y:getValueByPercent(t.y,n.y,a)}},e.prototype.renderLabel=function(t){var n=this.get("text"),i=this.get("start"),a=this.get("end"),o=n.position,s=n.content,l=n.style,c=n.offsetX,u=n.offsetY,f=n.autoRotate,d=n.maxLength,g=n.autoEllipsis,p=n.ellipsisPosition,v=n.background,y=n.isVertical,m=y===void 0?!1:y,x=this.getLabelPoint(i,a,o),_=x.x+c,S=x.y+u,A={id:this.getElementId("line-text"),name:"annotation-line-text",x:_,y:S,content:s,style:l,maxLength:d,autoEllipsis:g,ellipsisPosition:p,background:v,isVertical:m};if(f){var b=[a.x-i.x,a.y-i.y];A.rotate=Math.atan2(b[1],b[0])}renderTag$1(t,A)},e}(GroupComponent),TextAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Theme.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Theme.fontFamily}}})},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.renderInner=function(t){var n=this.getLocation(),i=n.x,a=n.y,o=this.get("content"),s=this.get("style"),l=this.getElementId("text"),c=this.get("name")+"-text",u=this.get("maxLength"),f=this.get("autoEllipsis"),d=this.get("isVertical"),g=this.get("ellipsisPosition"),p=this.get("background"),v=this.get("rotate"),y={id:l,name:c,x:i,y:a,content:o,style:s,maxLength:u,autoEllipsis:f,isVertical:d,ellipsisPosition:g,background:p,rotate:v};renderTag$1(t,y)},e.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var n=this.getLocation(),i=n.x,a=n.y,o=this.get("rotate");applyTranslate(t,i,a),applyRotate(t,o,i,a)}},e}(GroupComponent),ArcAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},e.prototype.renderInner=function(t){this.renderArc(t)},e.prototype.getArcPath=function(){var t=this.getLocation(),n=t.center,i=t.radius,a=t.startAngle,o=t.endAngle,s=getCirclePoint(n,i,a),l=getCirclePoint(n,i,o),c=o-a>Math.PI?1:0,u=[["M",s.x,s.y]];if(o-a===Math.PI*2){var f=getCirclePoint(n,i,a+Math.PI);u.push(["A",i,i,0,c,1,f.x,f.y]),u.push(["A",i,i,0,c,1,l.x,l.y])}else u.push(["A",i,i,0,c,1,l.x,l.y]);return u},e.prototype.renderArc=function(t){var n=this.getArcPath(),i=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:__assign$1({path:n},i)})},e}(GroupComponent),RegionAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Theme.regionColor,opacity:.4}}})},e.prototype.renderInner=function(t){this.renderRegion(t)},e.prototype.renderRegion=function(t){var n=this.get("start"),i=this.get("end"),a=this.get("style"),o=regionToBBox({start:n,end:i});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:__assign$1({x:o.x,y:o.y,width:o.width,height:o.height},a)})},e}(GroupComponent),ImageAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},e.prototype.renderInner=function(t){this.renderImage(t)},e.prototype.getImageAttrs=function(){var t=this.get("start"),n=this.get("end"),i=this.get("style"),a=regionToBBox({start:t,end:n}),o=this.get("src");return __assign$1({x:a.x,y:a.y,img:o,width:a.width,height:a.height},i)},e.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},e}(GroupComponent),DataMarkerAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Theme.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Theme.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Theme.fontFamily}}}})},e.prototype.renderInner=function(t){get(this.get("line"),"display")&&this.renderLine(t),get(this.get("text"),"display")&&this.renderText(t),get(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},e.prototype.renderPoint=function(t){var n=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:n})},e.prototype.renderLine=function(t){var n=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:n})},e.prototype.renderText=function(t){var n=this.getShapeAttrs().text,i=n.x,a=n.y,o=n.text,s=__rest(n,["x","y","text"]),l=this.get("text"),c=l.background,u=l.maxLength,f=l.autoEllipsis,d=l.isVertival,g=l.ellipsisPosition,p={x:i,y:a,id:this.getElementId("text"),name:"annotation-text",content:o,style:s,background:c,maxLength:u,autoEllipsis:f,isVertival:d,ellipsisPosition:g};renderTag$1(t,p)},e.prototype.autoAdjust=function(t){var n=this.get("direction"),i=this.get("x"),a=this.get("y"),o=get(this.get("line"),"length",0),s=this.get("coordinateBBox"),l=t.getBBox(),c=l.minX,u=l.maxX,f=l.minY,d=l.maxY,g=t.findById(this.getElementId("text-group")),p=t.findById(this.getElementId("text")),v=t.findById(this.getElementId("line"));if(s&&g){var y=g.attr("x"),m=g.attr("y"),x=p.getCanvasBBox(),_=x.width,S=x.height,A=0,b=0;if(i+c<=s.minX)if(n==="leftward")A=1;else{var C=s.minX-(i+c);y=g.attr("x")+C}else if(i+u>=s.maxX)if(n==="rightward")A=-1;else{var C=i+u-s.maxX;y=g.attr("x")-C}if(A&&(v&&v.attr("path",[["M",0,0],["L",o*A,0]]),y=(o+2+_)*A),a+f<=s.minY)if(n==="upward")b=1;else{var C=s.minY-(a+f);m=g.attr("y")+C}else if(a+d>=s.maxY)if(n==="downward")b=-1;else{var C=a+d-s.maxY;m=g.attr("y")-C}b&&(v&&v.attr("path",[["M",0,0],["L",0,o*b]]),m=(o+2+S)*b),(y!==g.attr("x")||m!==g.attr("y"))&&applyTranslate(g,y,m)}},e.prototype.getShapeAttrs=function(){var t=get(this.get("line"),"display"),n=get(this.get("point"),"style",{}),i=get(this.get("line"),"style",{}),a=get(this.get("text"),"style",{}),o=this.get("direction"),s=t?get(this.get("line"),"length",0):0,l=0,c=0,u="top",f="start";switch(o){case"upward":c=-1,u="bottom";break;case"downward":c=1,u="top";break;case"leftward":l=-1,f="end";break;case"rightward":l=1,f="start";break}return{point:__assign$1({x:0,y:0},n),line:__assign$1({path:[["M",0,0],["L",s*l,s*c]]},i),text:__assign$1({x:(s+2)*l,y:(s+2)*c,text:get(this.get("text"),"content",""),textBaseline:u,textAlign:f},a)}},e}(GroupComponent),DataRegionAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Theme.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Theme.textColor,fontFamily:Theme.fontFamily}}}})},e.prototype.renderInner=function(t){var n=get(this.get("region"),"style",{});get(this.get("text"),"style",{});var i=this.get("lineLength")||0,a=this.get("points");if(a.length){var o=pointsToBBox(a),s=[];s.push(["M",a[0].x,o.minY-i]),a.forEach(function(c){s.push(["L",c.x,c.y])}),s.push(["L",a[a.length-1].x,a[a.length-1].y-i]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:__assign$1({path:s},n)});var l=__assign$1({id:this.getElementId("text"),name:"annotation-text",x:(o.minX+o.maxX)/2,y:o.minY-i},this.get("text"));renderTag$1(t,l)}},e}(GroupComponent),RegionFilterAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},e.prototype.renderInner=function(t){var n=this,i=this.get("start"),a=this.get("end"),o=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});each$1(this.get("shapes"),function(l,c){var u=l.get("type"),f=clone(l.attr());n.adjustShapeAttrs(f),n.addShape(o,{id:n.getElementId("shape-"+u+"-"+c),capture:!1,type:u,attrs:f})});var s=regionToBBox({start:i,end:a});o.setClip({type:"rect",attrs:{x:s.minX,y:s.minY,width:s.width,height:s.height}})},e.prototype.adjustShapeAttrs=function(t){var n=this.get("color");t.fill&&(t.fill=t.fillStyle=n),t.stroke=t.strokeStyle=n},e}(GroupComponent),ShapeAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"shape",draw:noop})},e.prototype.renderInner=function(t){var n=this.get("render");isFunction(n)&&n(t)},e}(GroupComponent),HtmlComponent=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.show=function(){var t=this.get("container");t.style.display="",this.set("visible",!0)},e.prototype.hide=function(){var t=this.get("container");t.style.display="none",this.set("visible",!1)},e.prototype.setCapture=function(t){var n=this.getContainer(),i=t?"auto":"none";n.style.pointerEvents=i,this.set("capture",t)},e.prototype.getBBox=function(){var t=this.getContainer(),n=parseFloat(t.style.left)||0,i=parseFloat(t.style.top)||0;return createBBox(n,i,t.clientWidth,t.clientHeight)},e.prototype.clear=function(){var t=this.get("container");clearDom(t)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),r.prototype.destroy.call(this)},e.prototype.init=function(){r.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},e.prototype.initCapture=function(){this.setCapture(this.get("capture"))},e.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},e.prototype.initDom=function(){},e.prototype.initContainer=function(){var t=this.get("container");if(isNil(t)){t=this.createDom();var n=this.get("parent");isString(n)&&(n=document.getElementById(n),this.set("parent",n)),n.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else isString(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},e.prototype.resetStyles=function(){var t=this.get("domStyles"),n=this.get("defaultStyles");t?t=deepMix({},n,t):t=n,this.set("domStyles",t)},e.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var n=this.getContainer();this.applyChildrenStyles(n,t);var i=this.get("containerClassName");if(i&&hasClass(n,i)){var a=t[i];modifyCSS(n,a)}}},e.prototype.applyChildrenStyles=function(t,n){each$1(n,function(i,a){var o=t.getElementsByClassName(a);each$1(o,function(s){modifyCSS(s,i)})})},e.prototype.applyStyle=function(t,n){var i=this.get("domStyles");modifyCSS(n,i[t])},e.prototype.createDom=function(){var t=this.get("containerTpl");return createDom$1(t)},e.prototype.initEvent=function(){},e.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.removeEvent=function(){},e.prototype.updateInner=function(t){has(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},e.prototype.resetPosition=function(){},e}(Component),HtmlAnnotation=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},e.prototype.render=function(){var t=this.getContainer(),n=this.get("html");clearDom(t);var i=isFunction(n)?n(t):n;if(isElement(i))t.appendChild(i);else if(isString(i)||isNumber$1(i)){var a=createDom$1(""+i);a&&t.appendChild(a)}this.resetPosition()},e.prototype.resetPosition=function(){var t=this.getContainer(),n=this.getLocation(),i=n.x,a=n.y,o=this.get("alignX"),s=this.get("alignY"),l=this.get("offsetX"),c=this.get("offsetY"),u=getOuterWidth(t),f=getOuterHeight(t),d={x:i,y:a};o==="middle"?d.x-=Math.round(u/2):o==="right"&&(d.x-=Math.round(u)),s==="middle"?d.y-=Math.round(f/2):s==="bottom"&&(d.y-=Math.round(f)),l&&(d.x+=l),c&&(d.y+=c),modifyCSS(t,{position:"absolute",left:d.x+"px",top:d.y+"px",zIndex:this.get("zIndex")})},e}(HtmlComponent);const AnnotationComponent=Object.freeze(Object.defineProperty({__proto__:null,Arc:ArcAnnotation,DataMarker:DataMarkerAnnotation,DataRegion:DataRegionAnnotation,Html:HtmlAnnotation,Image:ImageAnnotation,Line:LineAnnotation,Region:RegionAnnotation,RegionFilter:RegionFilterAnnotation,Shape:ShapeAnnotation,Text:TextAnnotation},Symbol.toStringTag,{value:"Module"}));function getStatesStyle(r,e,t){var n=e+"Style",i=null;return each$1(t,function(a,o){r[o]&&a[n]&&(i||(i={}),mix(i,a[n]))}),i}var AxisBase=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Theme.lineColor}},tickLine:{style:{lineWidth:1,stroke:Theme.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Theme.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Theme.textColor,fontFamily:Theme.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Theme.textColor,textBaseline:"middle",fontFamily:Theme.fontFamily,textAlign:"center"},iconStyle:{fill:Theme.descriptionIconFill,stroke:Theme.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Theme.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},e.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("ticks")},e.prototype.setItems=function(t){this.update({ticks:t})},e.prototype.updateItem=function(t,n){mix(t,n),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},e.prototype.setItemState=function(t,n,i){t[n]=i,this.updateTickStates(t)},e.prototype.hasState=function(t,n){return!!t[n]},e.prototype.getItemStates=function(t){var n=this.get("tickStates"),i=[];return each$1(n,function(a,o){t[o]&&i.push(o)}),i},e.prototype.clearItemsState=function(t){var n=this,i=this.getItemsByState(t);each$1(i,function(a){n.setItemState(a,t,!1)})},e.prototype.getItemsByState=function(t){var n=this,i=this.getItems();return filter(i,function(a){return n.hasState(a,t)})},e.prototype.getSidePoint=function(t,n){var i=this,a=i.getSideVector(n,t);return{x:t.x+a[0],y:t.y+a[1]}},e.prototype.getTextAnchor=function(t){var n;return isNumberEqual$1(t[0],0)?n="center":t[0]>0?n="start":t[0]<0&&(n="end"),n},e.prototype.getTextBaseline=function(t){var n;return isNumberEqual$1(t[1],0)?n="middle":t[1]>0?n="top":t[1]<0&&(n="bottom"),n},e.prototype.processOverlap=function(t){},e.prototype.drawLine=function(t){var n=this.getLinePath(),i=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:mix({path:n},i.style)})},e.prototype.getTickLineItems=function(t){var n=this,i=[],a=this.get("tickLine"),o=a.alignTick,s=a.length,l=1,c=t.length;return c>=2&&(l=t[1].value-t[0].value),each$1(t,function(u){var f=u.point;o||(f=n.getTickPoint(u.value-l/2));var d=n.getSidePoint(f,s);i.push({startPoint:f,tickValue:u.value,endPoint:d,tickId:u.id,id:"tickline-"+u.id})}),i},e.prototype.getSubTickLineItems=function(t){var n=[],i=this.get("subTickLine"),a=i.count,o=t.length;if(o>=2)for(var s=0;s<o-1;s++)for(var l=t[s],c=t[s+1],u=0;u<a;u++){var f=(u+1)/(a+1),d=(1-f)*l.tickValue+f*c.tickValue,g=this.getTickPoint(d),p=this.getSidePoint(g,i.length);n.push({startPoint:g,endPoint:p,tickValue:d,id:"sub-"+l.id+"-"+u})}return n},e.prototype.getTickLineAttrs=function(t,n,i,a){var o=this.get(n).style,s={points:[t.startPoint,t.endPoint]},l=get(this.get("theme"),["tickLine","style"],{});o=isFunction(o)?mix({},l,o(s,i,a)):o;var c=t.startPoint,u=t.endPoint;return __assign$1({x1:c.x,y1:c.y,x2:u.x,y2:u.y},o)},e.prototype.drawTick=function(t,n,i,a,o){this.addShape(n,{type:"line",id:this.getElementId(t.id),name:"axis-"+i,attrs:this.getTickLineAttrs(t,i,a,o)})},e.prototype.drawTickLines=function(t){var n=this,i=this.get("ticks"),a=this.get("subTickLine"),o=this.getTickLineItems(i),s=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),l=this.get("tickLine");if(each$1(o,function(u,f){if(l.displayWithLabel){var d=n.getElementId("label-"+u.tickId);t.findById(d)&&n.drawTick(u,s,"tickLine",f,o)}else n.drawTick(u,s,"tickLine",f,o)}),a){var c=this.getSubTickLineItems(o);each$1(c,function(u,f){n.drawTick(u,s,"subTickLine",f,c)})}},e.prototype.processTicks=function(){var t=this,n=this.get("ticks");each$1(n,function(i){i.point=t.getTickPoint(i.value),isNil(i.id)&&(i.id=i.name)})},e.prototype.drawTicks=function(t){var n=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var i=this.get("ticks");each$1(i,function(a){n.applyTickStates(a,t)})},e.prototype.optimizeTicks=function(){var t=this.get("optimize"),n=this.get("ticks");if(t&&t.enable&&t.threshold>0){var i=size(n);if(i>t.threshold){var a=Math.ceil(i/t.threshold),o=n.filter(function(s,l){return l%a===0});this.set("ticks",o),this.set("originalTicks",n)}}},e.prototype.getLabelAttrs=function(t,n,i){var a=this.get("label"),o=a.offset,s=a.offsetX,l=a.offsetY,c=a.rotate,u=a.formatter,f=this.getSidePoint(t.point,o),d=this.getSideVector(o,f),g=u?u(t.name,t,n):t.name,p=a.style;p=isFunction(p)?get(this.get("theme"),["label","style"],{}):p;var v=mix({x:f.x+s,y:f.y+l,text:g,textAlign:this.getTextAnchor(d),textBaseline:this.getTextBaseline(d)},p);return c&&(v.matrix=getMatrixByAngle(f,c)),v},e.prototype.drawLabels=function(t){var n=this,i=this.get("ticks"),a=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});each$1(i,function(d,g){n.addShape(a,{type:"text",name:"axis-label",id:n.getElementId("label-"+d.id),attrs:n.getLabelAttrs(d,g,i),delegateObject:{tick:d,item:d,index:g}})}),this.processOverlap(a);var o=a.getChildren(),s=get(this.get("theme"),["label","style"],{}),l=this.get("label"),c=l.style,u=l.formatter;if(isFunction(c)){var f=o.map(function(d){return get(d.get("delegateObject"),"tick")});each$1(o,function(d,g){var p=d.get("delegateObject").tick,v=u?u(p.name,p,g):p.name,y=mix({},s,c(v,g,f));d.attr(y)})}},e.prototype.getTitleAttrs=function(){var t=this.get("title"),n=t.style,i=t.position,a=t.offset,o=t.spacing,s=o===void 0?0:o,l=t.autoRotate,c=n.fontSize,u=.5;i==="start"?u=0:i==="end"&&(u=1);var f=this.getTickPoint(u),d=this.getSidePoint(f,a||s+c/2),g=mix({x:d.x,y:d.y,text:t.text},n),p=t.rotate,v=p;if(isNil(p)&&l){var y=this.getAxisVector(f),m=[1,0];v=angleTo(y,m,!0)}if(v){var x=getMatrixByAngle(d,v);g.matrix=x}return g},e.prototype.drawTitle=function(t){var n,i=this.getTitleAttrs(),a=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:i});!((n=this.get("title"))===null||n===void 0)&&n.description&&this.drawDescriptionIcon(t,a,i.matrix)},e.prototype.drawDescriptionIcon=function(t,n,i){var a=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),o=n.getBBox(),s=o.maxX,l=o.maxY,c=o.height,u=this.get("title").iconStyle,f=4,d=c/2,g=d/6,p=s+f,v=l-c/2,y=[p+d,v-d],m=y[0],x=y[1],_=[m+d,x+d],S=_[0],A=_[1],b=[m,A+d],C=b[0],E=b[1],T=[p,x+d],I=T[0],w=T[1],M=[p+d,v-c/4],$=M[0],P=M[1],R=[$,P+g],L=R[0],O=R[1],k=[L,O+g],B=k[0],N=k[1],F=[B,N+d*3/4],V=F[0],H=F[1];this.addShape(a,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:__assign$1({path:[["M",m,x],["A",d,d,0,0,1,S,A],["A",d,d,0,0,1,C,E],["A",d,d,0,0,1,I,w],["A",d,d,0,0,1,m,x],["M",$,P],["L",L,O],["M",B,N],["L",V,H]],lineWidth:g,matrix:i},u)}),this.addShape(a,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:p,y:v-c/2,width:c,height:c,stroke:"#000",fill:"#000",opacity:0,matrix:i,cursor:"pointer"}})},e.prototype.applyTickStates=function(t,n){var i=this.getItemStates(t);if(i.length){var a=this.get("tickStates"),o=this.getElementId("label-"+t.id),s=n.findById(o);if(s){var l=getStatesStyle(t,"label",a);l&&s.attr(l)}var c=this.getElementId("tickline-"+t.id),u=n.findById(c);if(u){var f=getStatesStyle(t,"tickLine",a);f&&u.attr(f)}}},e.prototype.updateTickStates=function(t){var n=this.getItemStates(t),i=this.get("tickStates"),a=this.get("label"),o=this.getElementByLocalId("label-"+t.id),s=this.get("tickLine"),l=this.getElementByLocalId("tickline-"+t.id);if(n.length){if(o){var c=getStatesStyle(t,"label",i);c&&o.attr(c)}if(l){var u=getStatesStyle(t,"tickLine",i);u&&l.attr(u)}}else o&&o.attr(a.style),l&&l.attr(s.style)},e}(GroupComponent);function ellipseLabels(r,e,t,n){var i=e.getChildren(),a=!1;return each$1(i,function(o){var s=ellipsisLabel(r,o,t,n);a=a||s}),a}function getDefault$2(){return ellipsisTail}function ellipsisHead(r,e,t){return ellipseLabels(r,e,t,"head")}function ellipsisTail(r,e,t){return ellipseLabels(r,e,t,"tail")}function ellipsisMiddle(r,e,t){return ellipseLabels(r,e,t,"middle")}const autoEllipsis=Object.freeze(Object.defineProperty({__proto__:null,ellipsisHead,ellipsisMiddle,ellipsisTail,getDefault:getDefault$2},Symbol.toStringTag,{value:"Module"}));function isRotate(r){var e=r.attr("matrix");return e&&e[0]!==1}function getRotateAngle(r){var e=isRotate(r)?getAngleByMatrix(r.attr("matrix")):0;return e%360}function isOverlap(r,e,t,n){var i=!1,a=getRotateAngle(e),o=Math.abs(r?t.attr("y")-e.attr("y"):t.attr("x")-e.attr("x")),s=(r?t.attr("y")>e.attr("y"):t.attr("x")>e.attr("x"))?e.getBBox():t.getBBox();if(r){var l=Math.abs(Math.cos(a));near(l,0,Math.PI/180)?i=s.width+n>o:i=s.height/l+n>o}else{var l=Math.abs(Math.sin(a));near(l,0,Math.PI/180)?i=s.width+n>o:i=s.height/l+n>o}return i}function reserveOne(r,e,t,n){var i=(n==null?void 0:n.minGap)||0,a=e.getChildren().slice().filter(function(g){return g.get("visible")});if(!a.length)return!1;var o=!1;t&&a.reverse();for(var s=a.length,l=a[0],c=l,u=1;u<s;u++){var f=a[u];f.getBBox();var d=isOverlap(r,c,f,i);d?(f.hide(),o=!0):c=f}return o}function parityHide(r,e,t){var n=(t==null?void 0:t.minGap)||0,i=e.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],c=i.length,u=getRotateAngle(o),f=Math.abs(r?l.attr("y")-o.attr("y"):l.attr("x")-o.attr("x")),d=0;if(r){var g=Math.abs(Math.cos(u));if(near(g,0,Math.PI/180)){var p=getMaxLabelWidth(i);d=(p+n)/f}else d=(s.height/g+n)/f}else{var g=Math.abs(Math.sin(u));if(near(g,0,Math.PI/180)){var p=getMaxLabelWidth(i);d=(p+n)/f}else d=(s.height/g+n)/f}if(d>1){d=Math.ceil(d);for(var v=0;v<c;v++)v%d!==0&&(i[v].hide(),a=!0)}return a}function getDefault$1(){return equidistance}function reserveFirst(r,e,t,n){return reserveOne(r,e,!1,n)}function reserveLast(r,e,t,n){return reserveOne(r,e,!0,n)}function reserveBoth(r,e,t,n){var i=(n==null?void 0:n.minGap)||0,a=e.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],c=a[s-1],u=l,f=1;f<s-1;f++){var d=a[f];d.getBBox();var g=isOverlap(r,u,d,i);g?(d.hide(),o=!0):u=d}var p=isOverlap(r,u,c,i);return p&&(u.hide(),o=!0),o}function equidistance(r,e,t,n){var i=parityHide(r,e,n);return reserveOne(r,e,!1)&&(i=!0),i}function equidistanceWithReverseBoth(r,e,t,n){var i=e.getChildren().slice(),a=parityHide(r,e,n);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),reserveOne(r,e,!1,n)&&(a=!0)),s.get("visible")||(s.show(),reserveOne(r,e,!0,n)&&(a=!0))}return a}const autoHide=Object.freeze(Object.defineProperty({__proto__:null,equidistance,equidistanceWithReverseBoth,getDefault:getDefault$1,reserveBoth,reserveFirst,reserveLast},Symbol.toStringTag,{value:"Module"}));function setLabelsAngle(r,e){each$1(r,function(t){var n=t.attr("x"),i=t.attr("y"),a=getMatrixByAngle({x:n,y:i},e);t.attr("matrix",a)})}function labelRotate(r,e,t,n){var i=e.getChildren();if(!i.length||!r&&i.length<2)return!1;var a=getMaxLabelWidth(i),o=!1;if(r)o=!!t&&a>t;else{var s=Math.abs(i[1].attr("x")-i[0].attr("x"));o=a>s}if(o){var l=n(t,a);setLabelsAngle(i,l)}return o}function getDefault(){return fixedAngle}function fixedAngle(r,e,t,n){return labelRotate(r,e,t,function(){return isNumber$1(n)?n:r?Theme.verticalAxisRotate:Theme.horizontalAxisRotate})}function unfixedAngle(r,e,t){return labelRotate(r,e,t,function(n,i){if(!n)return r?Theme.verticalAxisRotate:Theme.horizontalAxisRotate;if(r)return-Math.acos(n/i);var a=0;return n>i?a=Math.PI/4:(a=Math.asin(n/i),a>Math.PI/4&&(a=Math.PI/4)),a})}const autoRotate=Object.freeze(Object.defineProperty({__proto__:null,fixedAngle,getDefault,unfixedAngle},Symbol.toStringTag,{value:"Module"})),OverlapUtil=Object.freeze(Object.defineProperty({__proto__:null,autoEllipsis,autoHide,autoRotate},Symbol.toStringTag,{value:"Module"}));var Line$5=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getLinePath=function(){var t=this.get("start"),n=this.get("end"),i=[];return i.push(["M",t.x,t.y]),i.push(["L",n.x,n.y]),i},e.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),n=this.get("end"),i=r.prototype.getInnerLayoutBBox.call(this),a=Math.min(t.x,n.x,i.x),o=Math.min(t.y,n.y,i.y),s=Math.max(t.x,n.x,i.maxX),l=Math.max(t.y,n.y,i.maxY);return{x:a,y:o,minX:a,minY:o,maxX:s,maxY:l,width:s-a,height:l-o}},e.prototype.isVertical=function(){var t=this.get("start"),n=this.get("end");return isNumberEqual$1(t.x,n.x)},e.prototype.isHorizontal=function(){var t=this.get("start"),n=this.get("end");return isNumberEqual$1(t.y,n.y)},e.prototype.getTickPoint=function(t){var n=this,i=n.get("start"),a=n.get("end"),o=a.x-i.x,s=a.y-i.y;return{x:i.x+o*t,y:i.y+s*t}},e.prototype.getSideVector=function(t){var n=this.getAxisVector(),i=normalize([0,0],n),a=this.get("verticalFactor"),o=[i[1],i[0]*-1];return scale$3([0,0],o,t*a)},e.prototype.getAxisVector=function(){var t=this.get("start"),n=this.get("end");return[n.x-t.x,n.y-t.y]},e.prototype.processOverlap=function(t){var n=this,i=this.isVertical(),a=this.isHorizontal();if(!(!i&&!a)){var o=this.get("label"),s=this.get("title"),l=this.get("verticalLimitLength"),c=o.offset,u=l,f=0,d=0;s&&(f=s.style.fontSize,d=s.spacing),u&&(u=u-c-d-f);var g=this.get("overlapOrder");if(each$1(g,function(y){o[y]&&n.canProcessOverlap(y)&&n.autoProcessOverlap(y,o[y],t,u)}),s&&isNil(s.offset)){var p=t.getCanvasBBox(),v=i?p.width:p.height;s.offset=c+v+d+f/2}}},e.prototype.canProcessOverlap=function(t){var n=this.get("label");return t==="autoRotate"?isNil(n.rotate):!0},e.prototype.autoProcessOverlap=function(t,n,i,a){var o=this,s=this.isVertical(),l=!1,c=OverlapUtil[t];if(n===!0)this.get("label"),l=c.getDefault()(s,i,a);else if(isFunction(n))l=n(s,i,a);else if(isObject(n)){var u=n;c[u.type]&&(l=c[u.type](s,i,a,u.cfg))}else c[n]&&(l=c[n](s,i,a));if(t==="autoRotate"){if(l){var f=i.getChildren(),d=this.get("verticalFactor");each$1(f,function(p){var v=p.attr("textAlign");if(v==="center"){var y=d>0?"end":"start";p.attr("textAlign",y)}})}}else if(t==="autoHide"){var g=i.getChildren().slice(0);each$1(g,function(p){p.get("visible")||(o.get("isRegister")&&o.unregisterElement(p),p.remove())})}},e}(AxisBase),Circle$4=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},e.prototype.getLinePath=function(){var t=this.get("center"),n=t.x,i=t.y,a=this.get("radius"),o=a,s=this.get("startAngle"),l=this.get("endAngle"),c=[];if(Math.abs(l-s)===Math.PI*2)c=[["M",n,i-o],["A",a,o,0,1,1,n,i+o],["A",a,o,0,1,1,n,i-o],["Z"]];else{var u=this.getCirclePoint(s),f=this.getCirclePoint(l),d=Math.abs(l-s)>Math.PI?1:0,g=s>l?0:1;c=[["M",n,i],["L",u.x,u.y],["A",a,o,0,d,g,f.x,f.y],["L",n,i]]}return c},e.prototype.getTickPoint=function(t){var n=this.get("startAngle"),i=this.get("endAngle"),a=n+(i-n)*t;return this.getCirclePoint(a)},e.prototype.getSideVector=function(t,n){var i=this.get("center"),a=[n.x-i.x,n.y-i.y],o=this.get("verticalFactor"),s=length(a);return scale$3(a,a,o*t/s),a},e.prototype.getAxisVector=function(t){var n=this.get("center"),i=[t.x-n.x,t.y-n.y];return[i[1],-1*i[0]]},e.prototype.getCirclePoint=function(t,n){var i=this.get("center");return n=n||this.get("radius"),{x:i.x+Math.cos(t)*n,y:i.y+Math.sin(t)*n}},e.prototype.canProcessOverlap=function(t){var n=this.get("label");return t==="autoRotate"?isNil(n.rotate):!0},e.prototype.processOverlap=function(t){var n=this,i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,c=0,u=0;a&&(c=a.style.fontSize,u=a.spacing),l&&(l=l-s-u-c);var f=this.get("overlapOrder");if(each$1(f,function(g){i[g]&&n.canProcessOverlap(g)&&n.autoProcessOverlap(g,i[g],t,l)}),a&&isNil(a.offset)){var d=t.getCanvasBBox().height;a.offset=s+d+u+c/2}},e.prototype.autoProcessOverlap=function(t,n,i,a){var o=this,s=!1,l=OverlapUtil[t];if(a>0)if(n===!0)s=l.getDefault()(!1,i,a);else if(isFunction(n))s=n(!1,i,a);else if(isObject(n)){var c=n;l[c.type]&&(s=l[c.type](!1,i,a,c.cfg))}else l[n]&&(s=l[n](!1,i,a));if(t==="autoRotate"){if(s){var u=i.getChildren(),f=this.get("verticalFactor");each$1(u,function(g){var p=g.attr("textAlign");if(p==="center"){var v=f>0?"end":"start";g.attr("textAlign",v)}})}}else if(t==="autoHide"){var d=i.getChildren().slice(0);each$1(d,function(g){g.get("visible")||(o.get("isRegister")&&o.unregisterElement(g),g.remove())})}},e}(AxisBase),CrosshairBase=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Theme.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Theme.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Theme.fontFamily}},textBackground:{padding:5,style:{stroke:Theme.lineColor}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},e.prototype.renderText=function(t){var n=this.get("text"),i=n.style,a=n.autoRotate,o=n.content;if(!isNil(o)){var s=this.getTextPoint(),l=null;if(a){var c=this.getRotateAngle();l=getMatrixByAngle(s,c)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:__assign$1(__assign$1(__assign$1({},s),{text:o,matrix:l}),i)})}},e.prototype.renderLine=function(t){var n=this.getLinePath(),i=this.get("line"),a=i.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:__assign$1({path:n},a)})},e.prototype.renderBackground=function(t){var n=this.getElementId("text"),i=t.findById(n),a=this.get("textBackground");if(a&&i){var o=i.getBBox(),s=formatPadding(a.padding),l=a.style,c=this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:__assign$1({x:o.x-s[3],y:o.y-s[0],width:o.width+s[1]+s[3],height:o.height+s[0]+s[2],matrix:i.attr("matrix")},l)});c.toBack()}},e}(GroupComponent),LineCrosshair$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),n=t.start,i=t.end,a=this.get("text").position,o=Math.atan2(i.y-n.y,i.x-n.x),s=a==="start"?o-Math.PI/2:o+Math.PI/2;return s},e.prototype.getTextPoint=function(){var t=this.getLocation(),n=t.start,i=t.end,a=this.get("text"),o=a.position,s=a.offset;return getTextPoint(n,i,o,s)},e.prototype.getLinePath=function(){var t=this.getLocation(),n=t.start,i=t.end;return[["M",n.x,n.y],["L",i.x,i.y]]},e}(CrosshairBase),LineCrosshair=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),n=t.startAngle,i=t.endAngle,a=this.get("text").position,o=a==="start"?n+Math.PI/2:i-Math.PI/2;return o},e.prototype.getTextPoint=function(){var t=this.get("text"),n=t.position,i=t.offset,a=this.getLocation(),o=a.center,s=a.radius,l=a.startAngle,c=a.endAngle,u=n==="start"?l:c,f=this.getRotateAngle()-Math.PI,d=getCirclePoint(o,s,u),g=Math.cos(f)*i,p=Math.sin(f)*i;return{x:d.x+g,y:d.y+p}},e.prototype.getLinePath=function(){var t=this.getLocation(),n=t.center,i=t.radius,a=t.startAngle,o=t.endAngle,s=null;if(o-a===Math.PI*2){var l=n.x,c=n.y;s=[["M",l,c-i],["A",i,i,0,1,1,l,c+i],["A",i,i,0,1,1,l,c-i],["Z"]]}else{var u=getCirclePoint(n,i,a),f=getCirclePoint(n,i,o),d=Math.abs(o-a)>Math.PI?1:0,g=a>o?0:1;s=[["M",u.x,u.y],["A",i,i,0,d,g,f.x,f.y]]}return s},e}(CrosshairBase),CONTAINER_CLASS$1="g2-crosshair",CROSSHAIR_LINE=CONTAINER_CLASS$1+"-line",CROSSHAIR_TEXT=CONTAINER_CLASS$1+"-text",_a$4;const HtmlTheme=(_a$4={},_a$4[""+CONTAINER_CLASS$1]={position:"relative"},_a$4[""+CROSSHAIR_LINE]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},_a$4[""+CROSSHAIR_TEXT]={position:"absolute",color:Theme.textColor,fontFamily:Theme.fontFamily},_a$4);var HtmlCrosshair=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+CONTAINER_CLASS$1+'"></div>',crosshairTpl:'<div class="'+CROSSHAIR_LINE+'"></div>',textTpl:'<span class="'+CROSSHAIR_TEXT+'">{content}</span>',domStyles:null,containerClassName:CONTAINER_CLASS$1,defaultStyles:HtmlTheme,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},e.prototype.render=function(){this.resetText(),this.resetPosition()},e.prototype.initCrossHair=function(){var t=this.getContainer(),n=this.get("crosshairTpl"),i=createDom$1(n);t.appendChild(i),this.applyStyle(CROSSHAIR_LINE,i),this.set("crosshairEl",i)},e.prototype.getTextPoint=function(){var t=this.getLocation(),n=t.start,i=t.end,a=this.get("text"),o=a.position,s=a.offset;return getTextPoint(n,i,o,s)},e.prototype.resetText=function(){var t=this.get("text"),n=this.get("textEl");if(t){var i=t.content;if(!n){var a=this.getContainer(),o=substitute(this.get("textTpl"),t);n=createDom$1(o),a.appendChild(n),this.applyStyle(CROSSHAIR_TEXT,n),this.set("textEl",n)}n.innerHTML=i}else n&&n.remove()},e.prototype.isVertical=function(t,n){return t.x===n.x},e.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var n=this.get("start"),i=this.get("end"),a=Math.min(n.x,i.x),o=Math.min(n.y,i.y);this.isVertical(n,i)?modifyCSS(t,{width:"1px",height:toPx(Math.abs(i.y-n.y))}):modifyCSS(t,{height:"1px",width:toPx(Math.abs(i.x-n.x))}),modifyCSS(t,{top:toPx(o),left:toPx(a)}),this.alignText()},e.prototype.alignText=function(){var t=this.get("textEl");if(t){var n=this.get("text").align,i=t.clientWidth,a=this.getTextPoint();switch(n){case"center":a.x=a.x-i/2;break;case"right":a.x=a.x-i}modifyCSS(t,{top:toPx(a.y),left:toPx(a.x)})}},e.prototype.updateInner=function(t){has(t,"text")&&this.resetText(),r.prototype.updateInner.call(this,t)},e}(HtmlComponent);const Crosshair=Object.freeze(Object.defineProperty({__proto__:null,Base:CrosshairBase,Circle:LineCrosshair,Html:HtmlCrosshair,Line:LineCrosshair$1},Symbol.toStringTag,{value:"Module"}));var GridBase=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Theme.lineColor}}}})},e.prototype.getLineType=function(){var t=this.get("line")||this.get("defaultCfg").line;return t.type},e.prototype.renderInner=function(t){this.drawGrid(t)},e.prototype.getAlternatePath=function(t,n){var i=this.getGridPath(t),a=n.slice(0).reverse(),o=this.getGridPath(a,!0),s=this.get("closed");return s?i=i.concat(o):(o[0][0]="L",i=i.concat(o),i.push(["Z"])),i},e.prototype.getPathStyle=function(){return this.get("line").style},e.prototype.drawGrid=function(t){var n=this,i=this.get("line"),a=this.get("items"),o=this.get("alternateColor"),s=null;each$1(a,function(l,c){var u=l.id||c;if(i){var f=n.getPathStyle();f=isFunction(f)?f(l,c,a):f;var d=n.getElementId("line-"+u),g=n.getGridPath(l.points);n.addShape(t,{type:"path",name:"grid-line",id:d,attrs:mix({path:g},f)})}if(o&&c>0){var p=n.getElementId("region-"+u),v=c%2===0;if(isString(o))v&&n.drawAlternateRegion(p,t,s.points,l.points,o);else{var y=v?o[1]:o[0];n.drawAlternateRegion(p,t,s.points,l.points,y)}}s=l})},e.prototype.drawAlternateRegion=function(t,n,i,a,o){var s=this.getAlternatePath(i,a);this.addShape(n,{type:"path",id:t,name:"grid-region",attrs:{path:s,fill:o}})},e}(GroupComponent);function distance$3(r,e,t,n){var i=t-r,a=n-e;return Math.sqrt(i*i+a*a)}var Circle$3=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{type:"circle",center:null,closed:!0})},e.prototype.getGridPath=function(t,n){var i=this.getLineType(),a=this.get("closed"),o=[];if(t.length)if(i==="circle"){var s=this.get("center"),l=t[0],c=distance$3(s.x,s.y,l.x,l.y),u=n?0:1;a?(o.push(["M",s.x,s.y-c]),o.push(["A",c,c,0,0,u,s.x,s.y+c]),o.push(["A",c,c,0,0,u,s.x,s.y-c]),o.push(["Z"])):each$1(t,function(f,d){d===0?o.push(["M",f.x,f.y]):o.push(["A",c,c,0,0,u,f.x,f.y])})}else each$1(t,function(f,d){d===0?o.push(["M",f.x,f.y]):o.push(["L",f.x,f.y])}),a&&o.push(["Z"]);return o},e}(GridBase),Line$4=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{type:"line"})},e.prototype.getGridPath=function(t){var n=[];return each$1(t,function(i,a){a===0?n.push(["M",i.x,i.y]):n.push(["L",i.x,i.y])}),n},e}(GridBase),LegendBase=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},e.prototype.getLayoutBBox=function(){var t=r.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),i=this.get("maxHeight"),a=t.width,o=t.height;return n&&(a=Math.min(a,n)),i&&(o=Math.min(o,i)),createBBox(t.minX,t.minY,a,o)},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.resetLocation=function(){var t=this.get("x"),n=this.get("y"),i=this.get("offsetX"),a=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+i,y:n+a})},e.prototype.applyOffset=function(){this.resetLocation()},e.prototype.getDrawPoint=function(){return this.get("currentPoint")},e.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},e.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},e.prototype.drawBackground=function(t){var n=this.get("background"),i=t.getBBox(),a=formatPadding(n.padding),o=__assign$1({x:0,y:0,width:i.width+a[1]+a[3],height:i.height+a[0]+a[2]},n.style),s=this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:o});s.toBack()},e.prototype.drawTitle=function(t){var n=this.get("currentPoint"),i=this.get("title"),a=i.spacing,o=i.style,s=i.text,l=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:__assign$1({text:s,x:n.x,y:n.y},o)}),c=l.getBBox();this.set("currentPoint",{x:n.x,y:c.maxY+a})},e.prototype.resetDraw=function(){var t=this.get("background"),n={x:0,y:0};if(t){var i=formatPadding(t.padding);n.x=i[3],n.y=i[0]}this.set("currentPoint",n)},e}(GroupComponent),DEFAULT_PAGE_NAVIGATOR={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},textStyle={fill:Theme.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Theme.fontFamily,fontWeight:"normal",lineHeight:12},RIGHT_ARROW_NAME="navigation-arrow-right",LEFT_ARROW_NAME="navigation-arrow-left",ROTATE_MAP={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},Category=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var n=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var i=t.getCurrentNavigationMatrix();t.get("animate")?n.animate({matrix:i},100):n.attr({matrix:i})}},t.onNavigationAfter=function(){var n=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var i=t.getCurrentNavigationMatrix();t.get("animate")?n.animate({matrix:i},100):n.attr({matrix:i})}},t}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Theme.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Theme.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:DEFAULT_PAGE_NAVIGATOR,itemName:{spacing:16,style:textStyle},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:textStyle,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Theme.uncheckedColor},markerStyle:{fill:Theme.uncheckedColor,stroke:Theme.uncheckedColor}},inactive:{nameStyle:{fill:Theme.uncheckedColor},markerStyle:{opacity:.2}}}}})},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("items")},e.prototype.setItems=function(t){this.update({items:t})},e.prototype.updateItem=function(t,n){mix(t,n),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},e.prototype.setItemState=function(t,n,i){t[n]=i;var a=this.getElementByLocalId("item-"+t.id);if(a){var o=this.getItems(),s=o.indexOf(t),l=this.createOffScreenGroup(),c=this.drawItem(t,s,this.getItemHeight(),l);this.updateElements(c,a),this.clearUpdateStatus(a)}},e.prototype.hasState=function(t,n){return!!t[n]},e.prototype.getItemStates=function(t){var n=this.get("itemStates"),i=[];return each$1(n,function(a,o){t[o]&&i.push(o)}),i},e.prototype.clearItemsState=function(t){var n=this,i=this.getItemsByState(t);each$1(i,function(a){n.setItemState(a,t,!1)})},e.prototype.getItemsByState=function(t){var n=this,i=this.getItems();return filter(i,function(a){return n.hasState(a,t)})},e.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},e.prototype.processItems=function(){var t=this.get("items");each$1(t,function(n){n.id||(n.id=n.name)})},e.prototype.drawItems=function(t){var n=this,i=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),a=this.addGroup(i,{id:this.getElementId("item-group"),name:"legend-item-group"}),o=this.getItemHeight(),s=this.get("itemWidth"),l=this.get("itemSpacing"),c=this.get("itemMarginBottom"),u=this.get("currentPoint"),f=u.x,d=u.y,g=this.get("layout"),p=this.get("items"),v=!1,y=0,m=this.get("maxWidth"),x=this.get("maxHeight");each$1(p,function(_,S){var A=n.drawItem(_,S,o,a),b=A.getBBox(),C=s||b.width;C>y&&(y=C),g==="horizontal"?(m&&m<u.x+C-f&&(v=!0,u.x=f,u.y+=o+c),n.moveElementTo(A,u),u.x+=C+l):(x&&x<u.y+o+c-d&&(v=!0,u.x+=y+l,u.y=d,y=0),n.moveElementTo(A,u),u.y+=o+c)}),v&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=f,this.startY=d,this.adjustNavigation(t,a))},e.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var n=(this.get("itemName")||{}).style;if(isFunction(n)){var i=this.getItems();i.forEach(function(a,o){var s=__assign$1(__assign$1({},textStyle),n(a,o,i)).fontSize;t<s&&(t=s)})}else n&&(t=n.fontSize)}return t},e.prototype.drawMarker=function(t,n,i,a){var o=__assign$1(__assign$1(__assign$1({x:0,y:a/2},n.style),{symbol:get(i.marker,"symbol","circle")}),get(i.marker,"style",{})),s=this.addShape(t,{type:"marker",id:this.getElementId("item-"+i.id+"-marker"),name:"legend-item-marker",attrs:o}),l=s.getBBox();s.attr("x",l.width/2);var c=s.attr(),u=c.stroke,f=c.fill;return u&&s.set("isStroke",!0),f&&s.set("isFill",!0),s},e.prototype.drawItemText=function(t,n,i,a,o,s,l){var c=i.formatter,u=i.style,f=__assign$1(__assign$1({x:s,y:o/2,text:c?c(a[n],a,l):a[n]},textStyle),isFunction(u)?u(a,l,this.getItems()):u);return this.addShape(t,{type:"text",id:this.getElementId("item-"+a.id+"-"+n),name:"legend-item-"+n,attrs:f})},e.prototype.drawRadio=function(t,n,i,a,o){var s,l,c=n.style||{},u=(s=c.r)!==null&&s!==void 0?s:a/2,f=u*3.6/8,d=[o+u,a/2-u],g=d[0],p=d[1],v=[g+u,p+u],y=v[0],m=v[1],x=[g,m+u],_=x[0],S=x[1],A=[o,p+u],b=A[0],C=A[1],E=i.showRadio,T=__assign$1(__assign$1({path:[["M",g,p],["A",u,u,0,0,1,y,m],["L",y-f,m],["L",y,m],["A",u,u,0,0,1,_,S],["L",_,S-f],["L",_,S],["A",u,u,0,0,1,b,C],["L",b+f,C],["L",b,C],["A",u,u,0,0,1,g,p],["L",g,p+f]],stroke:"#000000",fill:"#ffffff"},c),{opacity:E?(l=c==null?void 0:c.opacity)!==null&&l!==void 0?l:.45:0}),I=this.addShape(t,{type:"path",id:this.getElementId("item-"+i.id+"-radio"),name:"legend-item-radio",attrs:T});return I.set("tip",n.tip),I},e.prototype.drawItem=function(t,n,i,a){var o="item-"+t.id,s=this.addGroup(a,{name:"legend-item-container",id:this.getElementId("item-container-"+o),delegateObject:{item:t,index:n}}),l=this.addGroup(s,{name:"legend-item",id:this.getElementId(o),delegateObject:{item:t,index:n}}),c=this.get("marker"),u=this.get("itemName"),f=this.get("itemValue"),d=this.get("itemBackground"),g=this.get("radio"),p=this.getLimitItemWidth(),v=0;if(c){var y=this.drawMarker(l,c,t,i),m=c.spacing,x=get(t,["marker","spacing"]);isNumber$1(x)&&(m=x),v=y.getBBox().maxX+m}if(u){var _=this.drawItemText(l,"name",u,t,i,v,n);p&&ellipsisLabel(!0,_,clamp(p-v,0,p)),v=_.getBBox().maxX+u.spacing}if(f){var S=this.drawItemText(l,"value",f,t,i,v,n);p&&(f.alignRight?(S.attr({textAlign:"right",x:p}),ellipsisLabel(!0,S,clamp(p-v,0,p),"head")):ellipsisLabel(!0,S,clamp(p-v,0,p))),v=S.getBBox().maxX+f.spacing}if(g&&this.drawRadio(l,g,t,i,v),d){var A=l.getBBox(),b=this.addShape(l,{type:"rect",name:"legend-item-background",id:this.getElementId(o+"-background"),attrs:__assign$1({x:0,y:0,width:A.width,height:i},d.style)});b.toBack()}return this.applyItemStates(t,l),l},e.prototype.adjustNavigation=function(t,n){var i=this,a=this.startX,o=this.startY,s=this.get("layout"),l=n.findAll(function(M){return M.get("name")==="legend-item"}),c=this.get("maxWidth"),u=this.get("maxHeight"),f=this.get("itemWidth"),d=this.get("itemSpacing"),g=this.getItemHeight(),p=deepMix({},DEFAULT_PAGE_NAVIGATOR,this.get("pageNavigator")),v=this.drawNavigation(t,s,"00/00",p),y=v.getBBox(),m={x:a,y:o},x=1,_=0,S=0,A=0,b=this.get("itemMarginBottom");function C(M,$){var P=M.getBBox(),R=f||P.width,L=$.x+R+d+y.width;return L>c}if(s==="horizontal"){var E=this.get("maxRow")||1,T=g+(E===1?0:b),I=c-d-y.width-y.minX;this.pageHeight=T*E,this.pageWidth=I,each$1(l,function(M){var $=M.getBBox(),P=f||$.width;(_&&_<m.x+P+d||C(M,m))&&(x===1&&(_=m.x+d,i.moveElementTo(v,{x:I,y:m.y+g/2-y.height/2-y.minY})),x+=1,m.x=a,m.y+=T),i.moveElementTo(M,m),M.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:P+d,height:g}}),m.x+=P+d})}else{each$1(l,function(M){var $=M.getBBox();$.width>S&&(S=$.width)}),A=S,S+=d,c&&(S=Math.min(c,S),A=Math.min(c,A)),this.pageWidth=S,this.pageHeight=u-Math.max(y.height,g+b);var w=Math.floor(this.pageHeight/(g+b));each$1(l,function(M,$){$!==0&&$%w===0&&(x+=1,m.x+=S,m.y=o),i.moveElementTo(M,m),M.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:S,height:g}}),m.y+=g+b}),this.totalPagesCnt=x,this.moveElementTo(v,{x:a+A/2-y.width/2-y.minX,y:u-y.height-y.minY})}this.pageHeight&&this.pageWidth&&n.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),s==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(x/this.get("maxRow")):this.totalPagesCnt=x,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(v),n.attr("matrix",this.getCurrentNavigationMatrix())},e.prototype.drawNavigation=function(t,n,i,a){var o={x:0,y:0},s=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),l=get(a.marker,"style",{}),c=l.size,u=c===void 0?12:c,f=__rest(l,["size"]),d=this.drawArrow(s,o,LEFT_ARROW_NAME,n==="horizontal"?"up":"left",u,f);d.on("click",this.onNavigationBack);var g=d.getBBox();o.x+=g.width+2;var p=this.addShape(s,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:__assign$1({x:o.x,y:o.y+u/2,text:i,textBaseline:"middle"},get(a.text,"style"))}),v=p.getBBox();o.x+=v.width+2;var y=this.drawArrow(s,o,RIGHT_ARROW_NAME,n==="horizontal"?"down":"right",u,f);return y.on("click",this.onNavigationAfter),s},e.prototype.updateNavigation=function(t){var n=deepMix({},DEFAULT_PAGE_NAVIGATOR,this.get("pageNavigator")),i=n.marker.style,a=i.fill,o=i.opacity,s=i.inactiveFill,l=i.inactiveOpacity,c=this.currentPageIndex+"/"+this.totalPagesCnt,u=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),f=t?t.findById(this.getElementId(LEFT_ARROW_NAME)):this.getElementByLocalId(LEFT_ARROW_NAME),d=t?t.findById(this.getElementId(RIGHT_ARROW_NAME)):this.getElementByLocalId(RIGHT_ARROW_NAME);u.attr("text",c),f.attr("opacity",this.currentPageIndex===1?l:o),f.attr("fill",this.currentPageIndex===1?s:a),f.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),d.attr("opacity",this.currentPageIndex===this.totalPagesCnt?l:o),d.attr("fill",this.currentPageIndex===this.totalPagesCnt?s:a),d.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var g=f.getBBox().maxX+2;u.attr("x",g),g+=u.getBBox().width+2,this.updateArrowPath(d,{x:g,y:0})},e.prototype.drawArrow=function(t,n,i,a,o,s){var l=n.x,c=n.y,u=this.addShape(t,{type:"path",id:this.getElementId(i),name:i,attrs:__assign$1({size:o,direction:a,path:[["M",l+o/2,c],["L",l,c+o],["L",l+o,c+o],["Z"]],cursor:"pointer"},s)});return u.attr("matrix",getMatrixByAngle({x:l+o/2,y:c+o/2},ROTATE_MAP[a])),u},e.prototype.updateArrowPath=function(t,n){var i=n.x,a=n.y,o=t.attr(),s=o.size,l=o.direction,c=getMatrixByAngle({x:i+s/2,y:a+s/2},ROTATE_MAP[l]);t.attr("path",[["M",i+s/2,a],["L",i,a+s],["L",i+s,a+s],["Z"]]),t.attr("matrix",c)},e.prototype.getCurrentNavigationMatrix=function(){var t=this,n=t.currentPageIndex,i=t.pageWidth,a=t.pageHeight,o=this.get("layout"),s=o==="horizontal"?{x:0,y:a*(1-n)}:{x:i*(1-n),y:0};return getMatrixByTranslate(s)},e.prototype.applyItemStates=function(t,n){var i=this.getItemStates(t),a=i.length>0;if(a){var o=n.getChildren(),s=this.get("itemStates");each$1(o,function(l){var c=l.get("name"),u=c.split("-")[2],f=getStatesStyle(t,u,s);f&&(l.attr(f),u==="marker"&&!(l.get("isStroke")&&l.get("isFill"))&&(l.get("isStroke")&&l.attr("fill",null),l.get("isFill")&&l.attr("stroke",null)))})}},e.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),n=this.get("maxItemWidth");return n?t&&(n=t<=n?t:n):t&&(n=t),n},e}(LegendBase),HANDLER_HEIGHT_RATIO=1.4,HANDLER_TRIANGLE_RATIO=.4,ContinueLegend=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Theme.textColor,textBaseline:"middle",fontFamily:Theme.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Theme.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},e.prototype.isSlider=function(){return!0},e.prototype.getValue=function(){return this.getCurrentValue()},e.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},e.prototype.setRange=function(t,n){this.update({min:t,max:n})},e.prototype.setValue=function(t){var n=this.getValue();this.set("value",t);var i=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(i),this.delegateEmit("valuechanged",{originValue:n,value:t})},e.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},e.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},e.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},e.prototype.bindHandlersEvent=function(t){var n=this;t.on("legend-handler-min:drag",function(i){var a=n.getValueByCanvasPoint(i.x,i.y),o=n.getCurrentValue(),s=o[1];s<a&&(s=a),n.setValue([a,s])}),t.on("legend-handler-max:drag",function(i){var a=n.getValueByCanvasPoint(i.x,i.y),o=n.getCurrentValue(),s=o[0];s>a&&(s=a),n.setValue([s,a])})},e.prototype.bindRailEvent=function(t){},e.prototype.bindTrackEvent=function(t){var n=this,i=null;t.on("legend-track:dragstart",function(a){i={x:a.x,y:a.y}}),t.on("legend-track:drag",function(a){if(i){var o=n.getValueByCanvasPoint(i.x,i.y),s=n.getValueByCanvasPoint(a.x,a.y),l=n.getCurrentValue(),c=l[1]-l[0],u=n.getRange(),f=s-o;f<0?l[0]+f>u.min?n.setValue([l[0]+f,l[1]+f]):n.setValue([u.min,u.min+c]):f>0&&(f>0&&l[1]+f<u.max?n.setValue([l[0]+f,l[1]+f]):n.setValue([u.max-c,u.max])),i={x:a.x,y:a.y}}}),t.on("legend-track:dragend",function(a){i=null})},e.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},e.prototype.drawLabel=function(t,n){var i=this.get("label"),a=i.style,o=i.align,s=i.formatter,l=this.get(t),c=this.getLabelAlignAttrs(t,o),u="label-"+t;this.addShape(n,{type:"text",id:this.getElementId(u),name:"legend-label-"+t,attrs:__assign$1(__assign$1({x:0,y:0,text:isFunction(s)?s(l):l},a),c)})},e.prototype.getLabelAlignAttrs=function(t,n){var i=this.isVertical(),a="center",o="middle";return i?(a="start",n!=="rail"?t==="min"?o="top":o="bottom":o="top"):n!=="rail"?(o="top",t==="min"?a="start":a="end"):(a="start",o="middle"),{textAlign:a,textBaseline:o}},e.prototype.getRailPath=function(t,n,i,a){var o=this.get("rail"),s=o.size,l=o.defaultLength,c=o.type,u=this.isVertical(),f=l,d=i,g=a;d||(d=u?s:f),g||(g=u?f:s);var p=[];return c==="color"?(p.push(["M",t,n]),p.push(["L",t+d,n]),p.push(["L",t+d,n+g]),p.push(["L",t,n+g]),p.push(["Z"])):(p.push(["M",t+d,n]),p.push(["L",t+d,n+g]),p.push(["L",t,n+g]),p.push(["Z"])),p},e.prototype.drawRail=function(t){var n=this.get("rail"),i=n.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:__assign$1({path:this.getRailPath(0,0)},i)})},e.prototype.getTrackColor=function(t){var n=t.length;if(!n)return null;if(n===1)return t[0];var i;this.isVertical()?i="l(90)":i="l(0)";for(var a=0;a<n;a++){var o=a/(n-1);i+=" "+o+":"+t[a]}return i},e.prototype.getTrackPath=function(t){var n=this.getRailShape(t),i=n.attr("path");return clone(i)},e.prototype.getClipTrackAttrs=function(t){var n=this.getCurrentValue(),i=n[0],a=n[1],o=this.getRailBBox(t),s=this.getPointByValue(i,t),l=this.getPointByValue(a,t),c=this.isVertical(),u,f,d,g;return c?(u=o.minX,f=s.y,d=o.width,g=l.y-s.y):(u=s.x,f=o.minY,d=l.x-s.x,g=o.height),{x:u,y:f,width:d,height:g}},e.prototype.getTrackAttrs=function(t){var n=this.get("track"),i=this.get("colors"),a=this.getTrackPath(t);return mix({path:a,fill:this.getTrackColor(i)},n.style)},e.prototype.resetTrackClip=function(t){var n=t||this.get("group"),i=this.getElementId("track"),a=n.findById(i),o=a.getClip(),s=this.getClipTrackAttrs(t);o?o.attr(s):a.setClip({type:"rect",attrs:s})},e.prototype.resetTrack=function(t){var n=this.getElementId("track"),i=t.findById(n),a=this.getTrackAttrs(t);i?i.attr(a):this.addShape(t,{type:"path",id:n,draggable:this.get("slidable"),name:"legend-track",attrs:a})},e.prototype.getPointByValue=function(t,n){var i=this.getRange(),a=i.min,o=i.max,s=(t-a)/(o-a),l=this.getRailBBox(n),c=this.isVertical(),u={x:0,y:0};return c?(u.x=l.minX+l.width/2,u.y=getValueByPercent(l.minY,l.maxY,s)):(u.x=getValueByPercent(l.minX,l.maxX,s),u.y=l.minY+l.height/2),u},e.prototype.getRailShape=function(t){var n=t||this.get("group");return n.findById(this.getElementId("rail"))},e.prototype.getRailBBox=function(t){var n=this.getRailShape(t),i=n.getBBox();return i},e.prototype.getRailCanvasBBox=function(){var t=this.get("group"),n=t.findById(this.getElementId("rail")),i=n.getCanvasBBox();return i},e.prototype.isVertical=function(){return this.get("layout")==="vertical"},e.prototype.getValueByCanvasPoint=function(t,n){var i=this.getRange(),a=i.min,o=i.max,s=this.getRailCanvasBBox(),l=this.isVertical(),c=this.get("step"),u;l?u=(n-s.minY)/s.height:u=(t-s.minX)/s.width;var f=getValueByPercent(a,o,u);if(c){var d=Math.round((f-a)/c);f=a+d*c}return f>o&&(f=o),f<a&&(f=a),f},e.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var n=this.get("values");return n?[Math.max(Math.min.apply(Math,__spreadArrays(n,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,__spreadArrays(n,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},e.prototype.resetHandlers=function(t){var n=this.getCurrentValue(),i=n[0],a=n[1];this.resetHandler(t,"min",i),this.resetHandler(t,"max",a)},e.prototype.getHandlerPath=function(t,n){var i=this.isVertical(),a=[],o=t.size,s=n.x,l=n.y,c=o*HANDLER_HEIGHT_RATIO,u=o/2,f=o/6;if(i){var d=s+c*HANDLER_TRIANGLE_RATIO;a.push(["M",s,l]),a.push(["L",d,l+u]),a.push(["L",s+c,l+u]),a.push(["L",s+c,l-u]),a.push(["L",d,l-u]),a.push(["Z"]),a.push(["M",d,l+f]),a.push(["L",s+c-2,l+f]),a.push(["M",d,l-f]),a.push(["L",s+c-2,l-f])}else{var g=l+c*HANDLER_TRIANGLE_RATIO;a.push(["M",s,l]),a.push(["L",s-u,g]),a.push(["L",s-u,l+c]),a.push(["L",s+u,l+c]),a.push(["L",s+u,g]),a.push(["Z"]),a.push(["M",s-f,g]),a.push(["L",s-f,l+c-2]),a.push(["M",s+f,g]),a.push(["L",s+f,l+c-2])}return a},e.prototype.resetHandler=function(t,n,i){var a=this.getPointByValue(i,t),o=this.get("handler"),s=this.getHandlerPath(o,a),l=this.getElementId("handler-"+n),c=t.findById(l),u=this.isVertical();c?c.attr("path",s):this.addShape(t,{type:"path",name:"legend-handler-"+n,draggable:!0,id:l,attrs:__assign$1(__assign$1({path:s},o.style),{cursor:u?"ns-resize":"ew-resize"})})},e.prototype.fixedElements=function(t){var n=t.findById(this.getElementId("rail")),i=t.findById(this.getElementId("label-min")),a=t.findById(this.getElementId("label-max")),o=this.getDrawPoint();this.isVertical()?this.fixedVertail(i,a,n,o):this.fixedHorizontal(i,a,n,o)},e.prototype.fitRailLength=function(t,n,i,a){var o=this.isVertical(),s=o?"height":"width",l=this.get("label"),c=l.align,u=l.spacing,f=this.get("max"+upperFirst(s));if(f){var d=c==="rail"?i[s]+t[s]+n[s]+u*2:i[s],g=d-f;g>0&&this.changeRailLength(a,s,i[s]-g)}},e.prototype.changeRailLength=function(t,n,i){var a=t.getBBox(),o;n==="height"?o=this.getRailPath(a.x,a.y,a.width,i):o=this.getRailPath(a.x,a.y,i,a.height),t.attr("path",o)},e.prototype.changeRailPosition=function(t,n,i){var a=t.getBBox(),o=this.getRailPath(n,i,a.width,a.height);t.attr("path",o)},e.prototype.fixedHorizontal=function(t,n,i,a){var o=this.get("label"),s=o.align,l=o.spacing,c=i.getBBox(),u=t.getBBox(),f=n.getBBox(),d=c.height;this.fitRailLength(u,f,c,i),c=i.getBBox(),s==="rail"?(t.attr({x:a.x,y:a.y+d/2}),this.changeRailPosition(i,a.x+u.width+l,a.y),n.attr({x:a.x+u.width+c.width+l*2,y:a.y+d/2})):s==="top"?(t.attr({x:a.x,y:a.y}),n.attr({x:a.x+c.width,y:a.y}),this.changeRailPosition(i,a.x,a.y+u.height+l)):(this.changeRailPosition(i,a.x,a.y),t.attr({x:a.x,y:a.y+c.height+l}),n.attr({x:a.x+c.width,y:a.y+c.height+l}))},e.prototype.fixedVertail=function(t,n,i,a){var o=this.get("label"),s=o.align,l=o.spacing,c=i.getBBox(),u=t.getBBox(),f=n.getBBox();if(this.fitRailLength(u,f,c,i),c=i.getBBox(),s==="rail")t.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x,a.y+u.height+l),n.attr({x:a.x,y:a.y+u.height+c.height+l*2});else if(s==="right")t.attr({x:a.x+c.width+l,y:a.y}),this.changeRailPosition(i,a.x,a.y),n.attr({x:a.x+c.width+l,y:a.y+c.height});else{var d=Math.max(u.width,f.width);t.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x+d+l,a.y),n.attr({x:a.x,y:a.y+c.height})}},e}(LegendBase),CONTAINER_CLASS="g2-tooltip",TITLE_CLASS="g2-tooltip-title",LIST_CLASS="g2-tooltip-list",LIST_ITEM_CLASS="g2-tooltip-list-item",MARKER_CLASS="g2-tooltip-marker",VALUE_CLASS="g2-tooltip-value",NAME_CLASS="g2-tooltip-name",CROSSHAIR_X="g2-tooltip-crosshair-x",CROSSHAIR_Y="g2-tooltip-crosshair-y";const CssConst=Object.freeze(Object.defineProperty({__proto__:null,CONTAINER_CLASS,CROSSHAIR_X,CROSSHAIR_Y,LIST_CLASS,LIST_ITEM_CLASS,MARKER_CLASS,NAME_CLASS,TITLE_CLASS,VALUE_CLASS},Symbol.toStringTag,{value:"Module"}));var _a$3;const TooltipTheme=(_a$3={},_a$3[""+CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Theme.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},_a$3[""+TITLE_CLASS]={marginBottom:"4px"},_a$3[""+LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},_a$3[""+LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},_a$3[""+MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},_a$3[""+VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},_a$3[""+CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},_a$3[""+CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},_a$3);function getOutSides(r,e,t,n,i){var a={left:r<i.x,right:r+t>i.x+i.width,top:e<i.y,bottom:e+n>i.y+i.height};return a}function getPointByPosition(r,e,t,n,i,a){var o=r,s=e;switch(a){case"left":o=r-n-t,s=e-i/2;break;case"right":o=r+t,s=e-i/2;break;case"top":o=r-n/2,s=e-i-t;break;case"bottom":o=r-n/2,s=e+t;break;default:o=r+t,s=e-i-t;break}return{x:o,y:s}}function getAlignPoint(r,e,t,n,i,a,o){var s=getPointByPosition(r,e,t,n,i,a);if(o){var l=getOutSides(s.x,s.y,n,i,o);a==="auto"?(l.right&&(s.x=Math.max(0,r-n-t)),l.top&&(s.y=Math.max(0,e-i-t))):a==="top"||a==="bottom"?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-n),a==="top"&&l.top&&(s.y=e+t),a==="bottom"&&l.bottom&&(s.y=e-i-t)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),a==="left"&&l.left&&(s.x=r+t),a==="right"&&l.right&&(s.x=r-n-t))}return s}function hasOneKey(r,e){var t=!1;return each$1(e,function(n){if(has(r,n))return t=!0,!1}),t}var Tooltip$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+CONTAINER_CLASS+'"><div class="'+TITLE_CLASS+'"></div><ul class="'+LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+NAME_CLASS+`">{name}</span>:
          <span class="`+VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:TooltipTheme})},e.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},e.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},e.prototype.show=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!0),modifyCSS(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},e.prototype.hide=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!1),modifyCSS(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},e.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},e.prototype.setCrossHairsVisible=function(t){var n=t?"":"none",i=this.get("xCrosshairDom"),a=this.get("yCrosshairDom");i&&modifyCSS(i,{display:n}),a&&modifyCSS(a,{display:n})},e.prototype.initContainer=function(){if(r.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},e.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(hasOneKey(t,["title","showTitle"])&&this.resetTitle(),has(t,"items")&&this.renderItems()),r.prototype.updateInner.call(this,t)},e.prototype.initDom=function(){this.cacheDoms()},e.prototype.removeDom=function(){r.prototype.removeDom.call(this),this.clearCrosshairs()},e.prototype.resetPosition=function(){var t=this.get("x"),n=this.get("y"),i=this.get("offset"),a=this.getOffset(),o=a.offsetX,s=a.offsetY,l=this.get("position"),c=this.get("region"),u=this.getContainer(),f=this.getBBox(),d=f.width,g=f.height,p;c&&(p=regionToBBox(c));var v=getAlignPoint(t,n,i,d,g,l,p);modifyCSS(u,{left:toPx(v.x+o),top:toPx(v.y+s)}),this.resetCrosshairs()},e.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),n=this.get("parent"),i=this.get("container");i&&i.parentNode===n?n.replaceChild(t,i):n.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},e.prototype.getHtmlContentNode=function(){var t,n=this.get("customContent");if(n){var i=n(this.get("title"),this.get("items"));isElement(i)?t=i:t=createDom$1(i)}return t},e.prototype.cacheDoms=function(){var t=this.getContainer(),n=t.getElementsByClassName(TITLE_CLASS)[0],i=t.getElementsByClassName(LIST_CLASS)[0];this.set("titleDom",n),this.set("listDom",i)},e.prototype.resetTitle=function(){var t=this.get("title"),n=this.get("showTitle");n&&t?this.setTitle(t):this.setTitle("")},e.prototype.setTitle=function(t){var n=this.get("titleDom");n&&(n.innerText=t)},e.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),n=this.get("crosshairs");if(!t||!n)this.clearCrosshairs();else{var i=regionToBBox(t),a=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");n==="x"?(this.resetCrosshair("x",i),o&&(o.remove(),this.set("yCrosshairDom",null))):n==="y"?(this.resetCrosshair("y",i),a&&(a.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",i),this.resetCrosshair("y",i)),this.setCrossHairsVisible(this.get("visible"))}},e.prototype.resetCrosshair=function(t,n){var i=this.checkCrosshair(t),a=this.get(t);t==="x"?modifyCSS(i,{left:toPx(a),top:toPx(n.y),height:toPx(n.height)}):modifyCSS(i,{top:toPx(a),left:toPx(n.x),width:toPx(n.width)})},e.prototype.checkCrosshair=function(t){var n=t+"CrosshairDom",i=t+"CrosshairTpl",a="CROSSHAIR_"+t.toUpperCase(),o=CssConst[a],s=this.get(n),l=this.get("parent");return s||(s=createDom$1(this.get(i)),this.applyStyle(o,s),l.appendChild(s),this.set(n,s)),s},e.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),n=this.get("itemTpl"),i=this.get("listDom");i&&(each$1(t,function(a){var o=colorUtil.toCSSGradient(a.color),s=__assign$1(__assign$1({},a),{color:o}),l=substitute(n,s),c=createDom$1(l);i.appendChild(c)}),this.applyChildrenStyles(i,this.get("domStyles")))},e.prototype.clearItemDoms=function(){this.get("listDom")&&clearDom(this.get("listDom"))},e.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),n=this.get("yCrosshairDom");t&&t.remove(),n&&n.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},e}(HtmlComponent),BACKGROUND_STYLE$1={opacity:0},LINE_STYLE={stroke:"#C5C5C5",strokeOpacity:.85},AREA_STYLE={fill:"#CACED4",opacity:.85};function pointsToPath(r){return map$2(r,function(e,t){var n=t===0?"M":"L",i=e[0],a=e[1];return[n,i,a]})}function getLinePath$1(r){return pointsToPath(r)}function getSmoothLinePath(r){if(r.length<=2)return getLinePath$1(r);var e=[];each$1(r,function(o){isEqual$1(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=catmullRom2Bezier(e,!1),n=head(r),i=n[0],a=n[1];return t.unshift(["M",i,a]),t}function dataToPath(r,e,t,n){n===void 0&&(n=!0);var i=new Linear({values:r}),a=new Category$1({values:map$2(r,function(s,l){return l})}),o=map$2(r,function(s,l){return[a.scale(l)*e,t-i.scale(s)*t]});return n?getSmoothLinePath(o):getLinePath$1(o)}function getAreaLineY(r,e){var t=new Linear({values:r}),n=t.max<0?t.max:Math.max(0,t.min);return e-t.scale(n)*e}function linePathToAreaPath(r,e,t,n){var i=__spreadArrays(r),a=getAreaLineY(n,t);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}var Trend=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:BACKGROUND_STYLE$1,lineStyle:LINE_STYLE,areaStyle:AREA_STYLE})},e.prototype.renderInner=function(t){var n=this.cfg,i=n.width,a=n.height,o=n.data,s=n.smooth,l=n.isArea,c=n.backgroundStyle,u=n.lineStyle,f=n.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:__assign$1({x:0,y:0,width:i,height:a},c)});var d=dataToPath(o,i,a,s);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:__assign$1({path:d},u)}),l){var g=linePathToAreaPath(d,i,a,o);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:__assign$1({path:g},f)})}},e.prototype.applyOffset=function(){var t=this.cfg,n=t.x,i=t.y;this.moveElementTo(this.get("group"),{x:n,y:i})},e}(GroupComponent),DEFAULT_HANDLER_STYLE={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Handler=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"handler",x:0,y:0,width:10,height:24,style:DEFAULT_HANDLER_STYLE})},e.prototype.renderInner=function(t){var n=this.cfg,i=n.width,a=n.height,o=n.style,s=o.fill,l=o.stroke,c=o.radius,u=o.opacity,f=o.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:i,height:a,fill:s,stroke:l,radius:c,opacity:u,cursor:f}});var d=1/3*i,g=2/3*i,p=1/4*a,v=3/4*a;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:d,y1:p,x2:d,y2:v,stroke:l,cursor:f}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:g,y1:p,x2:g,y2:v,stroke:l,cursor:f}})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var n=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",n),t.draw()}),this.get("group").on("mouseleave",function(){var n=t.get("style").fill;t.getElementByLocalId("background").attr("fill",n),t.draw()})},e.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},e}(GroupComponent),BACKGROUND_STYLE={fill:"#416180",opacity:.05},FOREGROUND_STYLE={fill:"#5B8FF9",opacity:.15,cursor:"move"},DEFAULT_HANDLER_WIDTH=10,HANDLER_STYLE={width:DEFAULT_HANDLER_WIDTH,height:24},TEXT_STYLE={textBaseline:"middle",fill:"#000",opacity:.45},SLIDER_CHANGE="sliderchange",Slider$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.onMouseDown=function(n){return function(i){t.currentTarget=n;var a=i.originalEvent;a.stopPropagation(),a.preventDefault(),t.prevX=get(a,"touches.0.pageX",a.pageX),t.prevY=get(a,"touches.0.pageY",a.pageY);var o=t.getContainerDOM();o.addEventListener("mousemove",t.onMouseMove),o.addEventListener("mouseup",t.onMouseUp),o.addEventListener("mouseleave",t.onMouseUp),o.addEventListener("touchmove",t.onMouseMove),o.addEventListener("touchend",t.onMouseUp),o.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(n){var i=t.cfg.width,a=[t.get("start"),t.get("end")];n.stopPropagation(),n.preventDefault();var o=get(n,"touches.0.pageX",n.pageX),s=get(n,"touches.0.pageY",n.pageY),l=o-t.prevX,c=t.adjustOffsetRange(l/i);t.updateStartEnd(c),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=o,t.prevY=s,t.draw(),t.emit(SLIDER_CHANGE,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:a,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var n=t.getContainerDOM();n&&(n.removeEventListener("mousemove",t.onMouseMove),n.removeEventListener("mouseup",t.onMouseUp),n.removeEventListener("mouseleave",t.onMouseUp),n.removeEventListener("touchmove",t.onMouseMove),n.removeEventListener("touchend",t.onMouseUp),n.removeEventListener("touchcancel",t.onMouseUp))},t}return e.prototype.setRange=function(t,n){this.set("minLimit",t),this.set("maxLimit",n);var i=this.get("start"),a=this.get("end"),o=clamp(i,t,n),s=clamp(a,t,n);!this.get("isInit")&&(i!==o||a!==s)&&this.setValue([o,s])},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var n=this.getRange();if(isArray$3(t)&&t.length===2){var i=[this.get("start"),this.get("end")];this.update({start:clamp(t[0],n.min,n.max),end:clamp(t[1],n.min,n.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:i,value:t})}},e.prototype.getValue=function(){return[this.get("start"),this.get("end")]},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:BACKGROUND_STYLE,foregroundStyle:FOREGROUND_STYLE,handlerStyle:HANDLER_STYLE,textStyle:TEXT_STYLE}})},e.prototype.update=function(t){var n=t.start,i=t.end,a=__assign$1({},t);isNil(n)||(a.start=clamp(n,0,1)),isNil(i)||(a.end=clamp(i,0,1)),r.prototype.update.call(this,a),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},e.prototype.init=function(){this.set("start",clamp(this.get("start"),0,1)),this.set("end",clamp(this.get("end"),0,1)),r.prototype.init.call(this)},e.prototype.render=function(){r.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},e.prototype.renderInner=function(t){var n=this.cfg;n.start,n.end;var i=n.width,a=n.height,o=n.trendCfg,s=o===void 0?{}:o,l=n.minText,c=n.maxText,u=n.backgroundStyle,f=u===void 0?{}:u,d=n.foregroundStyle,g=d===void 0?{}:d,p=n.textStyle,v=p===void 0?{}:p,y=deepMix({},DEFAULT_HANDLER_STYLE,this.cfg.handlerStyle);size(get(s,"data"))&&(this.trend=this.addComponent(t,__assign$1({component:Trend,id:this.getElementId("trend"),x:0,y:0,width:i,height:a},s))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:__assign$1({x:0,y:0,width:i,height:a},f)}),this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:__assign$1({y:a/2,textAlign:"right",text:l,silent:!1},v)}),this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:__assign$1({y:a/2,textAlign:"left",text:c,silent:!1},v)}),this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:__assign$1({y:0,height:a},g)});var m=get(y,"width",DEFAULT_HANDLER_WIDTH),x=get(y,"height",24);this.minHandler=this.addComponent(t,{component:Handler,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(a-x)/2,width:m,height:x,cursor:"ew-resize",style:y}),this.maxHandler=this.addComponent(t,{component:Handler,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(a-x)/2,width:m,height:x,cursor:"ew-resize",style:y})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.updateUI=function(t,n,i){var a=this.cfg,o=a.start,s=a.end,l=a.width,c=a.minText,u=a.maxText,f=a.handlerStyle,d=a.height,g=o*l,p=s*l;this.trend&&(this.trend.update({width:l,height:d}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",g),t.attr("width",p-g);var v=get(f,"width",DEFAULT_HANDLER_WIDTH);n.attr("text",c),i.attr("text",u);var y=this._dodgeText([g,p],n,i),m=y[0],x=y[1];this.minHandler&&(this.minHandler.update({x:g-v/2}),this.get("updateAutoRender")||this.minHandler.render()),each$1(m,function(_,S){return n.attr(S,_)}),this.maxHandler&&(this.maxHandler.update({x:p-v/2}),this.get("updateAutoRender")||this.maxHandler.render()),each$1(x,function(_,S){return i.attr(S,_)})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var n=t.findById(this.getElementId("foreground"));n.on("mousedown",this.onMouseDown("foreground")),n.on("touchstart",this.onMouseDown("foreground"))},e.prototype.adjustOffsetRange=function(t){var n=this.cfg,i=n.start,a=n.end;switch(this.currentTarget){case"minHandler":{var o=0-i,s=1-i;return Math.min(s,Math.max(o,t))}case"maxHandler":{var o=0-a,s=1-a;return Math.min(s,Math.max(o,t))}case"foreground":{var o=0-i,s=1-a;return Math.min(s,Math.max(o,t))}}},e.prototype.updateStartEnd=function(t){var n=this.cfg,i=n.start,a=n.end;switch(this.currentTarget){case"minHandler":i+=t;break;case"maxHandler":a+=t;break;case"foreground":i+=t,a+=t;break}this.set("start",i),this.set("end",a)},e.prototype._dodgeText=function(t,n,i){var a,o,s=this.cfg,l=s.handlerStyle,c=s.width,u=2,f=get(l,"width",DEFAULT_HANDLER_WIDTH),d=t[0],g=t[1],p=!1;d>g&&(a=[g,d],d=a[0],g=a[1],o=[i,n],n=o[0],i=o[1],p=!0);var v=n.getBBox(),y=i.getBBox(),m=v.width>d-u?{x:d+f/2+u,textAlign:"left"}:{x:d-f/2-u,textAlign:"right"},x=y.width>c-g-u?{x:g-f/2-u,textAlign:"right"}:{x:g+f/2+u,textAlign:"left"};return p?[x,m]:[m,x]},e.prototype.draw=function(){var t=this.get("container"),n=t&&t.get("canvas");n&&n.draw()},e.prototype.getContainerDOM=function(){var t=this.get("container"),n=t&&t.get("canvas");return n&&n.get("container")},e}(GroupComponent),DEFAULT_STYLE={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},DEFAULT_THEME={default:DEFAULT_STYLE,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Scrollbar$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.clearEvents=noop,t.onStartEvent=function(n){return function(i){t.isMobile=n,i.originalEvent.preventDefault();var a=n?get(i.originalEvent,"touches.0.clientX"):i.clientX,o=n?get(i.originalEvent,"touches.0.clientY"):i.clientY;t.startPos=t.cfg.isHorizontal?a:o,t.bindLaterEvent()}},t.bindLaterEvent=function(){var n=t.getContainerDOM(),i=[];t.isMobile?i=[addEventListener(n,"touchmove",t.onMouseMove),addEventListener(n,"touchend",t.onMouseUp),addEventListener(n,"touchcancel",t.onMouseUp)]:i=[addEventListener(n,"mousemove",t.onMouseMove),addEventListener(n,"mouseup",t.onMouseUp),addEventListener(n,"mouseleave",t.onMouseUp)],t.clearEvents=function(){i.forEach(function(a){a.remove()})}},t.onMouseMove=function(n){var i=t.cfg,a=i.isHorizontal,o=i.thumbOffset;n.preventDefault();var s=t.isMobile?get(n,"touches.0.clientX"):n.clientX,l=t.isMobile?get(n,"touches.0.clientY"):n.clientY,c=a?s:l,u=c-t.startPos;t.startPos=c,t.updateThumbOffset(o+u)},t.onMouseUp=function(n){n.preventDefault(),t.clearEvents()},t.onTrackClick=function(n){var i=t.cfg,a=i.isHorizontal,o=i.x,s=i.y,l=i.thumbLen,c=t.getContainerDOM(),u=c.getBoundingClientRect(),f=n.clientX,d=n.clientY,g=a?f-u.left-o-l/2:d-u.top-s-l/2,p=t.validateRange(g);t.updateThumbOffset(p)},t.onThumbMouseOver=function(){var n=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",n),t.draw()},t.onThumbMouseOut=function(){var n=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",n),t.draw()},t}return e.prototype.setRange=function(t,n){this.set("minLimit",t),this.set("maxLimit",n);var i=this.getValue(),a=clamp(i,t,n);i!==a&&!this.get("isInit")&&this.setValue(a)},e.prototype.getRange=function(){var t=this.get("minLimit")||0,n=this.get("maxLimit")||1;return{min:t,max:n}},e.prototype.setValue=function(t){var n=this.getRange(),i=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*clamp(t,n.min,n.max)}),this.delegateEmit("valuechange",{originalValue:i,value:this.getValue()})},e.prototype.getValue=function(){return clamp(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return __assign$1(__assign$1({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:DEFAULT_THEME})},e.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.renderTrackShape=function(t){var n=this.cfg,i=n.trackLen,a=n.theme,o=a===void 0?{default:{}}:a,s=deepMix({},DEFAULT_THEME,o).default,l=s.lineCap,c=s.trackColor,u=s.size,f=get(this.cfg,"size",u),d=this.get("isHorizontal")?{x1:0+f/2,y1:f/2,x2:i-f/2,y2:f/2,lineWidth:f,stroke:c,lineCap:l}:{x1:f/2,y1:0+f/2,x2:f/2,y2:i-f/2,lineWidth:f,stroke:c,lineCap:l};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:d})},e.prototype.renderThumbShape=function(t){var n=this.cfg,i=n.thumbOffset,a=n.thumbLen,o=n.theme,s=deepMix({},DEFAULT_THEME,o).default,l=s.size,c=s.lineCap,u=s.thumbColor,f=get(this.cfg,"size",l),d=this.get("isHorizontal")?{x1:i+f/2,y1:f/2,x2:i+a-f/2,y2:f/2,lineWidth:f,stroke:u,lineCap:c,cursor:"default"}:{x1:f/2,y1:i+f/2,x2:f/2,y2:i+a-f/2,lineWidth:f,stroke:u,lineCap:c,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:d})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp);var n=t.findById(this.getElementId("track"));n.on("click",this.onTrackClick);var i=t.findById(this.getElementId("thumb"));i.on("mouseover",this.onThumbMouseOver),i.on("mouseout",this.onThumbMouseOut)},e.prototype.getContainerDOM=function(){var t=this.get("container"),n=t&&t.get("canvas");return n&&n.get("container")},e.prototype.validateRange=function(t){var n=this.cfg,i=n.thumbLen,a=n.trackLen,o=t;return t+i>a?o=a-i:t+i<i&&(o=0),o},e.prototype.draw=function(){var t=this.get("container"),n=t&&t.get("canvas");n&&n.draw()},e.prototype.updateThumbOffset=function(t){var n=this.cfg,i=n.thumbOffset,a=n.isHorizontal,o=n.thumbLen,s=n.size,l=this.validateRange(t);if(l!==i){var c=this.getElementByLocalId("thumb");a?c.attr({x1:l+s/2,x2:l+o-s/2}):c.attr({y1:l+s/2,y2:l+o-s/2}),this.emitOffsetChange(l)}},e.prototype.emitOffsetChange=function(t){var n=this.cfg,i=n.thumbOffset,a=n.trackLen,o=n.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:clamp(t/(a-o),0,1)}),this.delegateEmit("valuechange",{originalValue:i,value:t})},e}(GroupComponent),LineAxis=Line$5,CircleAxis=Circle$4,LineGrid=Line$4,CircleGrid=Circle$3,CategoryLegend=Category,ContinuousLegend=ContinueLegend,HtmlTooltip=Tooltip$1;function getPointsBox(r){if(isEmpty(r))return null;var e=r[0].x,t=r[0].x,n=r[0].y,i=r[0].y;return each$1(r,function(a){e=e>a.x?a.x:e,t=t<a.x?a.x:t,n=n>a.y?a.y:n,i=i<a.y?a.y:i}),{minX:e,maxX:t,minY:n,maxY:i,centerX:(e+t)/2,centerY:(n+i)/2}}function uniqueValues(r){return Array.from(new Set(r)).length===1}function mid(r){return(min$2(r)+max$2(r))/2}function polarToCartesian(r,e,t,n){return{x:r+t*Math.cos(n),y:e+t*Math.sin(n)}}function getSectorPath(r,e,t,n,i,a){a===void 0&&(a=0);var o=polarToCartesian(r,e,t,n),s=polarToCartesian(r,e,t,i),l=polarToCartesian(r,e,a,n),c=polarToCartesian(r,e,a,i);if(i-n===Math.PI*2){var u=polarToCartesian(r,e,t,n+Math.PI),f=polarToCartesian(r,e,a,n+Math.PI),d=[["M",o.x,o.y],["A",t,t,0,1,1,u.x,u.y],["A",t,t,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(d.push(["A",a,a,0,1,0,f.x,f.y]),d.push(["A",a,a,0,1,0,c.x,c.y])),d.push(["M",o.x,o.y]),d.push(["Z"]),d}var g=i-n<=Math.PI?0:1,p=[["M",o.x,o.y],["A",t,t,0,g,1,s.x,s.y],["L",c.x,c.y]];return a&&p.push(["A",a,a,0,g,0,l.x,l.y]),p.push(["L",o.x,o.y]),p.push(["Z"]),p}function getArcPath(r,e,t,n,i){var a=polarToCartesian(r,e,t,n),o=polarToCartesian(r,e,t,i);if(isNumberEqual$1(i-n,Math.PI*2)){var s=polarToCartesian(r,e,t,n+Math.PI);return[["M",a.x,a.y],["A",t,t,0,1,1,s.x,s.y],["A",t,t,0,1,1,a.x,a.y],["A",t,t,0,1,0,s.x,s.y],["A",t,t,0,1,0,a.x,a.y],["Z"]]}var l=i-n<=Math.PI?0:1;return[["M",a.x,a.y],["A",t,t,0,l,1,o.x,o.y]]}function getAngle$1(r,e){var t=r.points,n=getPointsBox(t),i,a,o=e.startAngle,s=e.endAngle,l=s-o;return e.isTransposed?(i=n.maxY*l,a=n.minY*l):(i=n.maxX*l,a=n.minX*l),i+=o,a+=o,{startAngle:a,endAngle:i}}function getPolygonCentroid(r,e){if(isNumber$1(r)&&isNumber$1(e))return[r,e];if(r=r,e=e,uniqueValues(r)||uniqueValues(e))return[mid(r),mid(e)];for(var t=-1,n=0,i=0,a,o=r.length-1,s,l=0;++t<r.length;)a=o,o=t,l+=s=r[a]*e[o]-r[o]*e[a],n+=(r[a]+r[o])*s,i+=(e[a]+e[o])*s;return l*=3,[n/l,i/l]}function getReplaceAttrs(r,e){var t=r.attr(),n=e.attr();return each$1(t,function(i,a){n[a]===void 0&&(n[a]=void 0)}),n}function isBetween$1(r,e,t){var n=Math.min(e,t),i=Math.max(e,t);return r>=n&&r<=i}function padEnd(r,e,t){if(isString(r))return r.padEnd(e,t);if(isArray$3(r)){var n=r.length;if(n<e)for(var i=e-n,a=0;a<i;a++)r.push(t)}return r}function omit(r,e){return typeof r=="object"&&e.forEach(function(t){delete r[t]}),r}function uniq$1(r,e,t){var n,i;e===void 0&&(e=[]),t===void 0&&(t=new Map);try{for(var a=__values(r),o=a.next();!o.done;o=a.next()){var s=o.value;t.has(s)||(e.push(s),t.set(s,!0))}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return e}var BBox=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=t,this.height=i,this.width=n}return r.fromRange=function(e,t,n,i){return new r(e,t,n-e,i-t)},r.fromObject=function(e){return new r(e.minX,e.minY,e.width,e.height)},Object.defineProperty(r.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),r.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},r.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return each$1(e,function(i){n.x=Math.min(i.x,n.x),n.y=Math.min(i.y,n.y),n.width=Math.max(i.maxX,n.maxX)-n.x,n.height=Math.max(i.maxY,n.maxY)-n.y}),n},r.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return each$1(e,function(i){n.x=Math.max(i.x,n.x),n.y=Math.max(i.y,n.y),n.width=Math.min(i.maxX,n.maxX)-n.x,n.height=Math.min(i.maxY,n.maxY)-n.y}),n},r.prototype.cut=function(e,t){var n=e.width,i=e.height;switch(t){case DIRECTION.TOP:case DIRECTION.TOP_LEFT:case DIRECTION.TOP_RIGHT:return r.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case DIRECTION.RIGHT:case DIRECTION.RIGHT_TOP:case DIRECTION.RIGHT_BOTTOM:return r.fromRange(this.minX,this.minY,this.maxX-n,this.maxY);case DIRECTION.BOTTOM:case DIRECTION.BOTTOM_LEFT:case DIRECTION.BOTTOM_RIGHT:return r.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case DIRECTION.LEFT:case DIRECTION.LEFT_TOP:case DIRECTION.LEFT_BOTTOM:return r.fromRange(this.minX+n,this.minY,this.maxX,this.maxY);default:return this}},r.prototype.shrink=function(e){var t=__read(e,4),n=t[0],i=t[1],a=t[2],o=t[3];return new r(this.x+o,this.y+n,this.width-o-i,this.height-n-a)},r.prototype.expand=function(e){var t=__read(e,4),n=t[0],i=t[1],a=t[2],o=t[3];return new r(this.x-o,this.y-n,this.width+o+i,this.height+n+a)},r.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},r.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},r.prototype.size=function(){return this.width*this.height},r.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},r}();function toPoints(r){return[[r.minX,r.minY],[r.maxX,r.minY],[r.maxX,r.maxY],[r.minX,r.maxY]]}function getXDimensionLength(r){if(r.isPolar&&!r.isTransposed)return(r.endAngle-r.startAngle)*r.getRadius();var e=r.convert({x:0,y:0}),t=r.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function isFullCircle(r){if(r.isPolar){var e=r.startAngle,t=r.endAngle;return t-e===Math.PI*2}return!1}function getDistanceToCenter(r,e){var t=r.getCenter();return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function isPointInCoordinate(r,e){var t=!1;if(r)if(r.type==="theta"){var n=r.start,i=r.end;t=isBetween$1(e.x,n.x,i.x)&&isBetween$1(e.y,n.y,i.y)}else{var a=r.invert(e);t=isBetween$1(a.x,0,1)&&isBetween$1(a.y,0,1)}return t}function getAngleByPoint(r,e){var t=r.getCenter();return Math.atan2(e.y-t.y,e.x-t.x)}function getCoordinateClipCfg(r,e){e===void 0&&(e=0);var t=r.start,n=r.end,i=r.getWidth(),a=r.getHeight();if(r.isPolar){var o=r.startAngle,s=r.endAngle,l=r.getCenter(),c=r.getRadius();return{type:"path",startState:{path:getSectorPath(l.x,l.y,c+e,o,o)},endState:function(f){var d=(s-o)*f+o,g=getSectorPath(l.x,l.y,c+e,o,d);return{path:g}},attrs:{path:getSectorPath(l.x,l.y,c+e,o,s)}}}var u;return r.isTransposed?u={height:a+e*2}:u={width:i+e*2},{type:"rect",startState:{x:t.x-e,y:n.y-e,width:r.isTransposed?i+e*2:0,height:r.isTransposed?0:a+e*2},endState:u,attrs:{x:t.x-e,y:n.y-e,width:i+e*2,height:a+e*2}}}function getCoordinateBBox(r,e){e===void 0&&(e=0);var t=r.start,n=r.end,i=r.getWidth(),a=r.getHeight(),o=Math.min(t.x,n.x),s=Math.min(t.y,n.y);return BBox.fromRange(o-e,s-e,o+i+e,s+a+e)}var dateRegex=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function getDefaultType(r){var e="linear";return dateRegex.test(r)?e="timeCat":isString(r)&&(e="cat"),e}function inferScaleType(r,e,t,n){return e===void 0&&(e={}),e.type?e.type:r.type!=="identity"&&GROUP_ATTRS.includes(t)&&["interval"].includes(n)||r.isCategory?"cat":r.type}function createScaleByField(r,e,t){var n=e||[];if(isNumber$1(r)||isNil(firstValue(n,r))&&isEmpty(t)){var i=getClass("identity");return new i({field:r.toString(),values:[r]})}var a=valuesOfKey(n,r),o=get(t,"type",getDefaultType(a[0])),s=getClass(o);return new s(__assign$1({field:r,values:a},t))}function syncScale(r,e){if(r.type!=="identity"&&e.type!=="identity"){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);r.change(t)}}function getName(r){return r.alias||r.field}function getDefaultCategoryScaleRange(r,e,t){var n=r.values,i=n.length,a;if(i===1)a=[.5,1];else{var o=1,s=0;isFullCircle(e)?e.isTransposed?(o=get(t,"widthRatio.multiplePie",1/1.3),s=1/i*o,a=[s/2,1-s/2]):a=[0,1-1/i]:(s=1/i/2,a=[s,1-s])}return a}function getMaxScale(r){var e=r.values.filter(function(t){return!isNil(t)&&!isNaN(t)});return Math.max.apply(Math,__spreadArray$1(__spreadArray$1([],__read(e),!1),[isNil(r.max)?-1/0:r.max],!1))}function getLineAxisRelativeRegion(r){var e,t;switch(r){case DIRECTION.TOP:e={x:0,y:1},t={x:1,y:1};break;case DIRECTION.RIGHT:e={x:1,y:0},t={x:1,y:1};break;case DIRECTION.BOTTOM:e={x:0,y:0},t={x:1,y:0};break;case DIRECTION.LEFT:e={x:0,y:0},t={x:0,y:1};break;default:e=t={x:0,y:0}}return{start:e,end:t}}function getCircleAxisRelativeRegion(r){var e,t;return r.isTransposed?(e={x:0,y:0},t={x:1,y:0}):(e={x:0,y:0},t={x:0,y:1}),{start:e,end:t}}function getAxisRegion(r,e){var t={start:{x:0,y:0},end:{x:0,y:0}};r.isRect?t=getLineAxisRelativeRegion(e):r.isPolar&&(t=getCircleAxisRelativeRegion(r));var n=t.start,i=t.end;return{start:r.convert(n),end:r.convert(i)}}function isVertical(r){var e=r.start,t=r.end;return e.x===t.x}function getAxisFactorByRegion(r,e){var t=r.start,n=r.end,i=isVertical(r);return i?(t.y-n.y)*(e.x-t.x)>0?1:-1:(n.x-t.x)*(t.y-e.y)>0?-1:1}function getAxisThemeCfg(r,e){var t=get(r,["components","axis"],{});return deepMix({},get(t,["common"],{}),deepMix({},get(t,[e],{})))}function getAxisTitleOptions(r,e,t){var n=get(r,["components","axis"],{});return deepMix({},get(n,["common","title"],{}),deepMix({},get(n,[e,"title"],{})),t)}function getCircleAxisCenterRadius(r){var e=r.x,t=r.y,n=r.circleCenter,i=t.start>t.end,a=r.isTransposed?r.convert({x:i?0:1,y:0}):r.convert({x:0,y:i?0:1}),o=[a.x-n.x,a.y-n.y],s=[1,0],l=a.y>n.y?angle$1(o,s):angle$1(o,s)*-1,c=l+(e.end-e.start),u=Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2));return{center:n,radius:u,startAngle:l,endAngle:c}}function getAxisOption(r,e){return isBoolean(r)?r===!1?!1:{}:get(r,[e])}function getAxisDirection(r,e){return get(r,"position",e)}function getAxisTitleText(r,e){return get(e,["title","text"],getName(r))}var Facet=function(){function r(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=deepMix({},this.getDefaultCfg(),t)}return r.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},r.prototype.render=function(){this.renderViews()},r.prototype.update=function(){},r.prototype.clear=function(){this.clearFacetViews()},r.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},r.prototype.facetToView=function(e){var t=e.region,n=e.data,i=e.padding,a=i===void 0?this.cfg.padding:i,o=this.view.createView({region:t,padding:a});o.data(n||[]),e.view=o,this.beforeEachView(o,e);var s=this.cfg.eachView;return s&&s(o,e),this.afterEachView(o,e),o},r.prototype.createContainer=function(){var e=this.view.getLayer(LAYER.FORE);return e.addGroup()},r.prototype.renderViews=function(){this.createFacetViews()},r.prototype.createFacetViews=function(){var e=this;return this.facets.map(function(t){return e.facetToView(t)})},r.prototype.clearFacetViews=function(){var e=this;each$1(this.facets,function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)})},r.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,n=e.height,i=this.cfg.spacing;return i.map(function(a,o){return isNumber$1(a)?a/(o===0?t:n):parseFloat(a)/100})},r.prototype.getFieldValues=function(e,t){var n=[],i={};return each$1(e,function(a){var o=a[t];!isNil(o)&&!i[o]&&(n.push(o),i[o]=!0)}),n},r.prototype.getRegion=function(e,t,n,i){var a=__read(this.parseSpacing(),2),o=a[0],s=a[1],l=(1+o)/(t===0?1:t)-o,c=(1+s)/(e===0?1:e)-s,u={x:(l+o)*n,y:(c+s)*i},f={x:u.x+l,y:u.y+c};return{start:u,end:f}},r.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},r.prototype.getDefaultTitleCfg=function(){var e=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:e}}},r.prototype.processAxis=function(e,t){var n=e.getOptions(),i=n.coordinate,a=e.geometries,o=get(i,"type","rect");if(o==="rect"&&a.length){isNil(n.axes)&&(n.axes={});var s=n.axes,l=__read(a[0].getXYFields(),2),c=l[0],u=l[1],f=getAxisOption(s,c),d=getAxisOption(s,u);f!==!1&&(n.axes[c]=this.getXAxisOption(c,s,f,t)),d!==!1&&(n.axes[u]=this.getYAxisOption(u,s,d,t))}},r.prototype.getFacetDataFilter=function(e){return function(t){return every(e,function(n){var i=n.field,a=n.value;return!isNil(a)&&i?t[i]===a:!0})}},r}(),Facets={},getFacet=function(r){return Facets[lowerCase(r)]},registerFacet=function(r,e){Facets[lowerCase(r)]=e},Action=function(){function r(e,t){this.context=e,this.cfg=t,e.addAction(this)}return r.prototype.applyCfg=function(e){mix(this,e)},r.prototype.init=function(){this.applyCfg(this.cfg)},r.prototype.destroy=function(){this.context.removeAction(this),this.context=null},r}(),CallbackAction=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.execute=function(){this.callback&&this.callback(this.context)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.callback=null},e}(Action),ActionCache={};function createAction(r,e){var t=ActionCache[r],n=null;if(t){var i=t.ActionClass,a=t.cfg;n=new i(e,a),n.name=r,n.init()}return n}function getActionClass(r){var e=ActionCache[r];return get(e,"ActionClass")}function registerAction(r,e,t){ActionCache[r]={ActionClass:e,cfg:t}}function createCallbackAction(r,e){var t=new CallbackAction(e);return t.callback=r,t.name="callback",t}function _points2path(r,e){var t=[];if(r.length){t.push(["M",r[0].x,r[0].y]);for(var n=1,i=r.length;n<i;n+=1){var a=r[n];t.push(["L",a.x,a.y])}e&&t.push(["Z"])}return t}function _convertArr(r,e){for(var t=[r[0]],n=1,i=r.length;n<i;n=n+2){var a=e.convert({x:r[n],y:r[n+1]});t.push(a.x,a.y)}return t}function _convertArcPath(r,e){var t=e.isTransposed,n=r[1],i=r[6],a=r[7],o=e.convert({x:i,y:a}),s=t?0:1;return["A",n,n,0,0,s,o.x,o.y]}function _convertPolarPath(r,e,t){var n=t.isTransposed,i=t.startAngle,a=t.endAngle,o=r[0].toLowerCase()==="a"?{x:r[6],y:r[7]}:{x:r[1],y:r[2]},s={x:e[1],y:e[2]},l=[],c=n?"y":"x",u=Math.abs(s[c]-o[c])*(a-i),f=s[c]>=o[c]?1:0,d=u>Math.PI?1:0,g=t.convert(s),p=getDistanceToCenter(t,g);if(p>=.5)if(u===Math.PI*2){var v={x:(s.x+o.x)/2,y:(s.y+o.y)/2},y=t.convert(v);l.push(["A",p,p,0,d,f,y.x,y.y]),l.push(["A",p,p,0,d,f,g.x,g.y])}else l.push(["A",p,p,0,d,f,g.x,g.y]);return l}function _filterFullCirleLine(r){each$1(r,function(e,t){var n=e;if(n[0].toLowerCase()==="a"){var i=r[t-1],a=r[t+1];a&&a[0].toLowerCase()==="a"?i&&i[0].toLowerCase()==="l"&&(i[0]="M"):i&&i[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var smoothBezier$1=function(r,e,t,n){var i,a=[],o=!!n,s,l,c,u,f,d,g;if(o){i=__read(n,2),c=i[0],u=i[1];for(var p=0,v=r.length;p<v;p++){var y=r[p];c=min$1([0,0],c,y),u=max$1([0,0],u,y)}}for(var p=0,m=r.length;p<m;p++){var y=r[p];if(p===0&&!t)g=y;else if(p===m-1&&!t)d=y,a.push(g),a.push(d);else{s=r[t?p?p-1:m-1:p-1],l=r[t?(p+1)%m:p+1];var x=[0,0];x=sub(x,l,s),x=scale$3(x,x,e);var _=distance$6(y,s),S=distance$6(y,l),A=_+S;A!==0&&(_/=A,S/=A);var b=scale$3([0,0],x,-_),C=scale$3([0,0],x,S);d=add([0,0],y,b),f=add([0,0],y,C),f=min$1([0,0],f,max$1([0,0],l,y)),f=max$1([0,0],f,min$1([0,0],l,y)),b=sub([0,0],f,y),b=scale$3([0,0],b,-_/S),d=add([0,0],y,b),d=min$1([0,0],d,max$1([0,0],s,y)),d=max$1([0,0],d,min$1([0,0],s,y)),C=sub([0,0],y,d),C=scale$3([0,0],C,S/_),f=add([0,0],y,C),o&&(d=max$1([0,0],d,c),d=min$1([0,0],d,u),f=max$1([0,0],f,c),f=min$1([0,0],f,u)),a.push(g),a.push(d),g=f}}return t&&a.push(a.shift()),a};function catmullRom2bezier$1(r,e,t){for(var n=!!e,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=smoothBezier$1(i,.4,n,t),l=i.length,c=[],u,f,d,a=0;a<l-1;a++)u=s[a*2],f=s[a*2+1],d=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]]);return n&&(u=s[l],f=s[l+1],d=i[0],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]])),c}function getLinePath(r,e){return _points2path(r,e)}function getSplinePath$1(r,e,t){var n=[],i=r[0],a=null;if(r.length<=2)return getLinePath(r,e);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!a||!(a.x===l.x&&a.y===l.y))&&(n.push(l.x),n.push(l.y),a=l)}var c=t||[[0,0],[1,1]],u=catmullRom2bezier$1(n,e,c);return u.unshift(["M",i.x,i.y]),u}function convertNormalPath(r,e){var t=[];return each$1(e,function(n){var i=n[0];switch(i.toLowerCase()){case"m":case"l":case"c":t.push(_convertArr(n,r));break;case"a":t.push(_convertArcPath(n,r));break;case"z":default:t.push(n);break}}),t}function convertPolarPath(r,e){var t=[],n,i,a,o;return each$1(e,function(s,l){var c=s[0];switch(c.toLowerCase()){case"m":case"c":case"q":t.push(_convertArr(s,r));break;case"l":n=e[l-1],i=s,a=r.isTransposed,o=a?n[n.length-2]===i[1]:n[n.length-1]===i[2],o?t=t.concat(_convertPolarPath(n,i,r)):t.push(_convertArr(s,r));break;case"a":t.push(_convertArcPath(s,r));break;case"z":default:t.push(s);break}}),_filterFullCirleLine(t),t}function getMaskBBox(r,e){var t=r.event,n=t.target;return getMaskBBoxByShape(n,e)}function isValidMaskBBox(r,e){var t=r.getCanvasBBox(),n=t.width,i=t.height;return n>0&&i>0&&(n>=e||i>=e)}function getMaskBBoxByShape(r,e){var t=r.getCanvasBBox();return isValidMaskBBox(r,e)?t:null}function getMultiMaskBBoxList(r,e){var t=r.event.maskShapes;return t.map(function(n){return getMaskBBoxByShape(n,e)}).filter(function(n){return!!n})}function getMaskPath$2(r,e){var t=r.event,n=t.target;return getMaskPathByMaskShape(n,e)}function getMaskPathByMaskShape(r,e){return isValidMaskBBox(r,e)?r.attr("path"):null}function getMultiMaskPathList(r,e){var t=r.event.maskShapes;return t.map(function(n){return getMaskPathByMaskShape(n,e)})}function getCurrentElement$1(r){var e=r.event,t,n=e.target;return n&&(t=n.get("element")),t}function getDelegationObject(r){var e=r.event,t=e.target,n;return t&&(n=t.get("delegateObject")),n}function isElementChange(r){var e=r.event.gEvent;return!(e&&e.fromShape&&e.toShape&&e.fromShape.get("element")===e.toShape.get("element"))}function isList(r){return r&&r.component&&r.component.isList()}function isSlider(r){return r&&r.component&&r.component.isSlider()}function isMask(r){var e=r.event,t=e.target;return t&&(t==null?void 0:t.get("name"))==="mask"||isMultipleMask(r)}function isMultipleMask(r){var e;return((e=r.event.target)===null||e===void 0?void 0:e.get("name"))==="multi-mask"}function getMaskedElements(r,e){var t=r.event.target;if(isMultipleMask(r))return getMultiMaskedElements(r,e);if(t.get("type")==="path"){var n=getMaskPath$2(r,e);return n?getElementsByPath(r.view,n):void 0}var i=getMaskBBox(r,e);return i?getIntersectElements(r.view,i):null}function getMultiMaskedElements(r,e){var t=r.event.target;if(t.get("type")==="path"){var n=getMultiMaskPathList(r,e);return n.length>0?n.flatMap(function(a){return getElementsByPath(r.view,a)}):null}var i=getMultiMaskBBoxList(r,e);return i.length>0?i.flatMap(function(a){return getIntersectElements(r.view,a)}):null}function getSiblingMaskElements(r,e,t){if(isMultipleMask(r))return getSiblingMultiMaskedElements(r,e,t);var n=getMaskBBox(r,t);return n?getSiblingMaskElementsByBBox(n,r,e):null}function getSiblingMaskElementsByBBox(r,e,t){var n=e.view,i=getSiblingPoint(n,t,{x:r.x,y:r.y}),a=getSiblingPoint(n,t,{x:r.maxX,y:r.maxY}),o={minX:i.x,minY:i.y,maxX:a.x,maxY:a.y};return getIntersectElements(t,o)}function getSiblingMultiMaskedElements(r,e,t){var n=getMultiMaskBBoxList(r,t);return n.length>0?n.flatMap(function(i){return getSiblingMaskElementsByBBox(i,r,e)}):null}function getElements(r){var e=r.geometries,t=[];return each$1(e,function(n){var i=n.elements;t=t.concat(i)}),r.views&&r.views.length&&each$1(r.views,function(n){t=t.concat(getElements(n))}),t}function getElementsByField(r,e,t){var n=getElements(r);return n.filter(function(i){return getElementValue$1(i,e)===t})}function getElementsByState(r,e){var t=r.geometries,n=[];return each$1(t,function(i){var a=i.getElementsBy(function(o){return o.hasState(e)});n=n.concat(a)}),n}function getElementValue$1(r,e){var t=r.getModel(),n=t.data,i;return isArray$3(n)?i=n[0][e]:i=n[e],i}function intersectRect$1(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function getIntersectElements(r,e){var t=getElements(r),n=[];return each$1(t,function(i){var a=i.shape,o=a.getCanvasBBox();intersectRect$1(e,o)&&n.push(i)}),n}function pathToPoints(r){var e=[];return each$1(r,function(t){var n=t[0];if(n!=="A")for(var i=1;i<t.length;i=i+2)e.push([t[i],t[i+1]]);else{var a=t.length;e.push([t[a-2],t[a-1]])}}),e}function getElementsByPath(r,e){var t=getElements(r),n=pathToPoints(e),i=t.filter(function(a){var o=a.shape,s;if(o.get("type")==="path")s=pathToPoints(o.attr("path"));else{var l=o.getCanvasBBox();s=toPoints(l)}return isPolygonsIntersect(n,s)});return i}function getComponents(r){return r.getComponents().map(function(e){return e.component})}function distance$2(r,e){var t=e.x-r.x,n=e.y-r.y;return Math.sqrt(t*t+n*n)}function getSpline(r,e){if(r.length<=2)return getLinePath(r,!1);var t=r[0],n=[];each$1(r,function(a){n.push(a.x),n.push(a.y)});var i=catmullRom2bezier$1(n,e,null);return i.unshift(["M",t.x,t.y]),i}function isInBox(r,e){return r.x<=e.x&&r.maxX>=e.x&&r.y<=e.y&&r.maxY>e.y}function getSilbings(r){var e=r.parent,t=null;return e&&(t=e.views.filter(function(n){return n!==r})),t}function point2Normalize(r,e){var t=r.getCoordinate();return t.invert(e)}function getSiblingPoint(r,e,t){var n=point2Normalize(r,t);return e.getCoordinate().convert(n)}function isInRecords(r,e,t,n){var i=!1;return each$1(r,function(a){if(a[t]===e[t]&&a[n]===e[n])return i=!0,!1}),i}function getScaleByField(r,e){var t=r.getScaleByField(e);return!t&&r.views&&each$1(r.views,function(n){if(t=getScaleByField(n,e),t)return!1}),t}var Context=function(){function r(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return r.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===1)return this.cacheMap[e[0]];e.length===2&&(this.cacheMap[e[0]]=e[1])},r.prototype.getAction=function(e){return this.actions.find(function(t){return t.name===e})},r.prototype.addAction=function(e){this.actions.push(e)},r.prototype.removeAction=function(e){var t=this.actions,n=this.actions.indexOf(e);n>=0&&t.splice(n,1)},r.prototype.getCurrentPoint=function(){var e=this.event;if(e)if(e.target instanceof HTMLElement){var t=this.view.getCanvas(),n=t.getPointByClient(e.clientX,e.clientY);return n}else return{x:e.x,y:e.y};return null},r.prototype.getCurrentShape=function(){return get(this.event,["gEvent","shape"])},r.prototype.isInPlot=function(){var e=this.getCurrentPoint();return e?this.view.isPointInPlot(e):!1},r.prototype.isInShape=function(e){var t=this.getCurrentShape();return t?t.get("name")===e:!1},r.prototype.isInComponent=function(e){var t=getComponents(this.view),n=this.getCurrentPoint();return n?!!t.find(function(i){var a=i.getBBox();return e?i.get("name")===e&&isInBox(a,n):isInBox(a,n)}):!1},r.prototype.destroy=function(){each$1(this.actions.slice(),function(e){e.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},r}(),Interaction=function(){function r(e,t){this.view=e,this.cfg=t}return r.prototype.init=function(){this.initEvents()},r.prototype.initEvents=function(){},r.prototype.clearEvents=function(){},r.prototype.destroy=function(){this.clearEvents()},r}();function parseAction(r,e,t){var n=r.split(":"),i=n[0],a=e.getAction(i)||createAction(i,e);if(!a)throw new Error("There is no action named ".concat(i));var o=n[1];return{action:a,methodName:o,arg:t}}function executeAction(r){var e=r.action,t=r.methodName,n=r.arg;if(e[t])e[t](n);else throw new Error("Action(".concat(e.name,") doesn't have a method called ").concat(t))}var STEP_NAMES={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},GrammarInteraction=function(r){__extends$1(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.callbackCaches={},i.emitCaches={},i.steps=n,i}return e.prototype.init=function(){this.initContext(),r.prototype.init.call(this)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},e.prototype.initEvents=function(){var t=this;each$1(this.steps,function(n,i){each$1(n,function(a){var o=t.getActionCallback(i,a);o&&t.bindEvent(a.trigger,o)})})},e.prototype.clearEvents=function(){var t=this;each$1(this.steps,function(n,i){each$1(n,function(a){var o=t.getActionCallback(i,a);o&&t.offEvent(a.trigger,o)})})},e.prototype.initContext=function(){var t=this.view,n=new Context(t);this.context=n;var i=this.steps;each$1(i,function(a){each$1(a,function(o){if(isFunction(o.action))o.actionObject={action:createCallbackAction(o.action,n),methodName:"execute"};else if(isString(o.action))o.actionObject=parseAction(o.action,n,o.arg);else if(isArray$3(o.action)){var s=o.action,l=isArray$3(o.arg)?o.arg:[o.arg];o.actionObject=[],each$1(s,function(c,u){o.actionObject.push(parseAction(c,n,l[u]))})}})})},e.prototype.isAllowStep=function(t){var n=this.currentStepName,i=this.steps;if(n===t||t===STEP_NAMES.SHOW_ENABLE)return!0;if(t===STEP_NAMES.PROCESSING)return n===STEP_NAMES.START;if(t===STEP_NAMES.START)return n!==STEP_NAMES.PROCESSING;if(t===STEP_NAMES.END)return n===STEP_NAMES.PROCESSING||n===STEP_NAMES.START;if(t===STEP_NAMES.ROLLBACK){if(i[STEP_NAMES.END])return n===STEP_NAMES.END;if(n===STEP_NAMES.START)return!0}return!1},e.prototype.isAllowExecute=function(t,n){if(this.isAllowStep(t)){var i=this.getKey(t,n);return n.once&&this.emitCaches[i]?!1:n.isEnable?n.isEnable(this.context):!0}return!1},e.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},e.prototype.afterExecute=function(t,n){t!==STEP_NAMES.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var i=this.getKey(t,n);this.emitCaches[i]=!0},e.prototype.getKey=function(t,n){return t+n.trigger+n.action},e.prototype.getActionCallback=function(t,n){var i=this,a=this.context,o=this.callbackCaches,s=n.actionObject;if(n.action&&s){var l=this.getKey(t,n);if(!o[l]){var c=function(u){a.event=u,i.isAllowExecute(t,n)?(isArray$3(s)?each$1(s,function(f){a.event=u,executeAction(f)}):(a.event=u,executeAction(s)),i.afterExecute(t,n),n.callback&&(a.event=u,n.callback(a))):a.event=null};n.debounce?o[l]=debounce$1(c,n.debounce.wait,n.debounce.immediate):n.throttle?o[l]=throttle(c,n.throttle.wait,{leading:n.throttle.leading,trailing:n.throttle.trailing}):o[l]=c}return o[l]}return null},e.prototype.bindEvent=function(t,n){var i=t.split(":");i[0]==="window"?window.addEventListener(i[1],n):i[0]==="document"?document.addEventListener(i[1],n):this.view.on(t,n)},e.prototype.offEvent=function(t,n){var i=t.split(":");i[0]==="window"?window.removeEventListener(i[1],n):i[0]==="document"?document.removeEventListener(i[1],n):this.view.off(t,n)},e}(Interaction),Interactions={};function getInteraction(r){return Interactions[lowerCase(r)]}function registerInteraction(r,e){Interactions[lowerCase(r)]=e}function createInteraction(r,e,t){var n=getInteraction(r);if(!n)return null;if(isPlainObject$1(n)){var i=mix(clone(n),t);return new GrammarInteraction(e,i)}else{var a=n;return new a(e,t)}}function createAxisStyles(r){return{title:{autoRotate:!0,position:"center",spacing:r.axisTitleSpacing,style:{fill:r.axisTitleTextFillColor,fontSize:r.axisTitleTextFontSize,lineHeight:r.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily},iconStyle:{fill:r.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:r.axisLabelOffset,style:{fill:r.axisLabelFillColor,fontSize:r.axisLabelFontSize,lineHeight:r.axisLabelLineHeight,fontFamily:r.fontFamily}},line:{style:{lineWidth:r.axisLineBorder,stroke:r.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:r.axisGridBorderColor,lineWidth:r.axisGridBorder,lineDash:r.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:r.axisTickLineBorder,stroke:r.axisTickLineBorderColor},alignTick:!0,length:r.axisTickLineLength},subTickLine:null,animate:!0}}function createLegendStyles(r){return{title:null,marker:{symbol:"circle",spacing:r.legendMarkerSpacing,style:{r:r.legendCircleMarkerSize,fill:r.legendMarkerColor}},itemName:{spacing:5,style:{fill:r.legendItemNameFillColor,fontFamily:r.fontFamily,fontSize:r.legendItemNameFontSize,lineHeight:r.legendItemNameLineHeight,fontWeight:r.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:r.legendPageNavigatorMarkerSize,inactiveFill:r.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:r.legendPageNavigatorMarkerInactiveFillOpacity,fill:r.legendPageNavigatorMarkerFillColor,opacity:r.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:r.legendPageNavigatorTextFillColor,fontSize:r.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:r.legendItemSpacing,itemMarginBottom:r.legendItemMarginBottom,padding:r.legendPadding}}function createThemeByStyleSheet(r){var e,t={point:{default:{fill:r.pointFillColor,r:r.pointSize,stroke:r.pointBorderColor,lineWidth:r.pointBorder,fillOpacity:r.pointFillOpacity},active:{stroke:r.pointActiveBorderColor,lineWidth:r.pointActiveBorder},selected:{stroke:r.pointSelectedBorderColor,lineWidth:r.pointSelectedBorder},inactive:{fillOpacity:r.pointInactiveFillOpacity,strokeOpacity:r.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:r.hollowPointFillColor,lineWidth:r.hollowPointBorder,stroke:r.hollowPointBorderColor,strokeOpacity:r.hollowPointBorderOpacity,r:r.hollowPointSize},active:{stroke:r.hollowPointActiveBorderColor,strokeOpacity:r.hollowPointActiveBorderOpacity},selected:{lineWidth:r.hollowPointSelectedBorder,stroke:r.hollowPointSelectedBorderColor,strokeOpacity:r.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:r.hollowPointInactiveBorderOpacity}},area:{default:{fill:r.areaFillColor,fillOpacity:r.areaFillOpacity,stroke:null},active:{fillOpacity:r.areaActiveFillOpacity},selected:{fillOpacity:r.areaSelectedFillOpacity},inactive:{fillOpacity:r.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:r.hollowAreaBorderColor,lineWidth:r.hollowAreaBorder,strokeOpacity:r.hollowAreaBorderOpacity},active:{fill:null,lineWidth:r.hollowAreaActiveBorder},selected:{fill:null,lineWidth:r.hollowAreaSelectedBorder},inactive:{strokeOpacity:r.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:r.intervalFillColor,fillOpacity:r.intervalFillOpacity},active:{stroke:r.intervalActiveBorderColor,lineWidth:r.intervalActiveBorder},selected:{stroke:r.intervalSelectedBorderColor,lineWidth:r.intervalSelectedBorder},inactive:{fillOpacity:r.intervalInactiveFillOpacity,strokeOpacity:r.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:r.hollowIntervalFillColor,stroke:r.hollowIntervalBorderColor,lineWidth:r.hollowIntervalBorder,strokeOpacity:r.hollowIntervalBorderOpacity},active:{stroke:r.hollowIntervalActiveBorderColor,lineWidth:r.hollowIntervalActiveBorder,strokeOpacity:r.hollowIntervalActiveBorderOpacity},selected:{stroke:r.hollowIntervalSelectedBorderColor,lineWidth:r.hollowIntervalSelectedBorder,strokeOpacity:r.hollowIntervalSelectedBorderOpacity},inactive:{stroke:r.hollowIntervalInactiveBorderColor,lineWidth:r.hollowIntervalInactiveBorder,strokeOpacity:r.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:r.lineBorderColor,lineWidth:r.lineBorder,strokeOpacity:r.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:r.lineActiveBorder},selected:{lineWidth:r.lineSelectedBorder},inactive:{strokeOpacity:r.lineInactiveBorderOpacity}}},n=createAxisStyles(r),i=createLegendStyles(r);return{background:r.backgroundColor,defaultColor:r.brandColor,subColor:r.subColor,semanticRed:r.paletteSemanticRed,semanticGreen:r.paletteSemanticGreen,padding:"auto",fontFamily:r.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:r.paletteQualitative10,colors20:r.paletteQualitative20,sequenceColors:r.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(a){var o=a.geometry.coordinate;if(o.isPolar&&o.isTransposed){var s=getAngle$1(a.getModel(),o),l=s.startAngle,c=s.endAngle,u=(l+c)/2,f=7.5,d=f*Math.cos(u),g=f*Math.sin(u);return{matrix:transform$6(null,[["t",d,g]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:__assign$1(__assign$1({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:__assign$1(__assign$1({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:__assign$1(__assign$1({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:__assign$1(__assign$1({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:__assign$1(__assign$1({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:__assign$1(__assign$1({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:__assign$1(__assign$1({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:__assign$1(__assign$1({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:n,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:deepMix({},n.grid,{line:{type:"line"}})},radius:{title:null,grid:deepMix({},n.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:r.legendVerticalPadding},left:{layout:"vertical",padding:r.legendVerticalPadding},top:{layout:"horizontal",padding:r.legendHorizontalPadding},bottom:{layout:"horizontal",padding:r.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:r.sliderRailHeight,defaultLength:r.sliderRailWidth,style:{fill:r.sliderRailFillColor,stroke:r.sliderRailBorderColor,lineWidth:r.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:r.sliderLabelTextFillColor,fontSize:r.sliderLabelTextFontSize,lineHeight:r.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily}},handler:{size:r.sliderHandlerWidth,style:{fill:r.sliderHandlerFillColor,stroke:r.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:r.tooltipCrosshairsBorderColor,lineWidth:r.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(e={},e["".concat(CONTAINER_CLASS)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:r.tooltipContainerFillColor,opacity:r.tooltipContainerFillOpacity,boxShadow:r.tooltipContainerShadow,borderRadius:"".concat(r.tooltipContainerBorderRadius,"px"),color:r.tooltipTextFillColor,fontSize:"".concat(r.tooltipTextFontSize,"px"),fontFamily:r.fontFamily,lineHeight:"".concat(r.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},e["".concat(TITLE_CLASS)]={marginBottom:"12px",marginTop:"12px"},e["".concat(LIST_CLASS)]={margin:0,listStyleType:"none",padding:0},e["".concat(LIST_ITEM_CLASS)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},e["".concat(MARKER_CLASS)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e["".concat(VALUE_CLASS)]={display:"inline-block",float:"right",marginLeft:"30px"},e)},annotation:{arc:{style:{stroke:r.annotationArcBorderColor,lineWidth:r.annotationArcBorder},animate:!0},line:{style:{stroke:r.annotationLineBorderColor,lineDash:r.annotationLineDash,lineWidth:r.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textAlign:"start",fontFamily:r.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:r.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:r.annotationRegionBorder,stroke:r.annotationRegionBorderColor,fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:r.brandColor,lineWidth:2}},line:{style:{stroke:r.annotationLineBorderColor,lineWidth:r.annotationLineBorder},length:r.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:r.cSliderBackgroundFillColor,opacity:r.cSliderBackgroundFillOpacity},foregroundStyle:{fill:r.cSliderForegroundFillColor,opacity:r.cSliderForegroundFillOpacity},handlerStyle:{width:r.cSliderHandlerWidth,height:r.cSliderHandlerHeight,fill:r.cSliderHandlerFillColor,opacity:r.cSliderHandlerFillOpacity,stroke:r.cSliderHandlerBorderColor,lineWidth:r.cSliderHandlerBorder,radius:r.cSliderHandlerBorderRadius,highLightFill:r.cSliderHandlerHighlightFillColor},textStyle:{fill:r.cSliderTextFillColor,opacity:r.cSliderTextFillOpacity,fontSize:r.cSliderTextFontSize,lineHeight:r.cSliderTextLineHeight,fontWeight:r.cSliderTextFontWeight,stroke:r.cSliderTextBorderColor,lineWidth:r.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:r.scrollbarTrackFillColor,thumbColor:r.scrollbarThumbFillColor}},hover:{style:{thumbColor:r.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:r.labelFillColor,fontSize:r.labelFontSize,fontFamily:r.fontFamily,stroke:r.labelBorderColor,lineWidth:r.labelBorder},fillColorDark:r.labelFillColorDark,fillColorLight:r.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:r.innerLabelFillColor,fontSize:r.innerLabelFontSize,fontFamily:r.fontFamily,stroke:r.innerLabelBorderColor,lineWidth:r.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:r.overflowLabelFillColor,fontSize:r.overflowLabelFontSize,fontFamily:r.fontFamily,stroke:r.overflowLabelBorderColor,lineWidth:r.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:r.labelLineBorder}},autoRotate:!0}}}var BLACK_COLORS$1={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},WHITE_COLORS$1={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},QUALITATIVE_10$1=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],QUALITATIVE_20$1=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],SINGLE_SEQUENCE$1=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],createLightStyleSheet=function(r){r===void 0&&(r={});var e=r.paletteQualitative10,t=e===void 0?QUALITATIVE_10$1:e,n=r.paletteQualitative20,i=n===void 0?QUALITATIVE_20$1:n,a=r.brandColor,o=a===void 0?t[0]:a,s={backgroundColor:"transparent",brandColor:o,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:t,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:SINGLE_SEQUENCE$1,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:BLACK_COLORS$1[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:BLACK_COLORS$1[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:WHITE_COLORS$1[85],axisTickLineBorderColor:BLACK_COLORS$1[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:BLACK_COLORS$1[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:BLACK_COLORS$1[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:BLACK_COLORS$1[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:BLACK_COLORS$1[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:o,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:BLACK_COLORS$1[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:BLACK_COLORS$1[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:BLACK_COLORS$1[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:BLACK_COLORS$1[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:BLACK_COLORS$1[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:BLACK_COLORS$1[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:BLACK_COLORS$1[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:BLACK_COLORS$1[25],annotationArcBorderColor:BLACK_COLORS$1[15],annotationArcBorder:1,annotationLineBorderColor:BLACK_COLORS$1[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:BLACK_COLORS$1[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:BLACK_COLORS$1[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:BLACK_COLORS$1[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:BLACK_COLORS$1[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:BLACK_COLORS$1[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:WHITE_COLORS$1[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:BLACK_COLORS$1[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:WHITE_COLORS$1[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:BLACK_COLORS$1[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:o,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:WHITE_COLORS$1[100],pointBorderOpacity:1,pointActiveBorderColor:BLACK_COLORS$1[100],pointSelectedBorder:2,pointSelectedBorderColor:BLACK_COLORS$1[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o,hollowPointBorderOpacity:.95,hollowPointFillColor:WHITE_COLORS$1[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:BLACK_COLORS$1[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:BLACK_COLORS$1[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o,areaFillOpacity:.25,areaActiveFillColor:o,areaActiveFillOpacity:.5,areaSelectedFillColor:o,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:BLACK_COLORS$1[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:BLACK_COLORS$1[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:BLACK_COLORS$1[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:BLACK_COLORS$1[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:WHITE_COLORS$1[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:BLACK_COLORS$1[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:BLACK_COLORS$1[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return __assign$1(__assign$1({},s),r)};createLightStyleSheet();function createTheme(r){var e=r.styleSheet,t=e===void 0?{}:e,n=__rest(r,["styleSheet"]),i=createLightStyleSheet(t);return deepMix({},createThemeByStyleSheet(i),n)}var defaultTheme=createTheme({}),Themes={default:defaultTheme};function getTheme(r){return get(Themes,lowerCase(r),Themes.default)}function registerTheme(r,e){Themes[lowerCase(r)]=createTheme(e)}function snapEqual(r,e,t){var n=t.translate(r),i=t.translate(e);return isNumberEqual$1(n,i)}function getXValueByPoint(r,e){var t=e.coordinate,n=e.getXScale(),i=n.range,a=i[i.length-1],o=i[0],s=t.invert(r),l=s.x;return t.isPolar&&l>(1+a)/2&&(l=o),n.translate(n.invert(l))}function filterYValue(r,e,t){var n=t.coordinate,i=t.getYScale(),a=i.field,o=n.invert(e),s=i.invert(o.y),l=find$1(r,function(c){var u=c[FIELD_ORIGIN];return u[a][0]<=s&&u[a][1]>=s});return l||r[r.length-1]}var getXDistance=memoize(function(r){if(r.isCategory)return 1;for(var e=r.values,t=e.length,n=r.translate(e[0]),i=n,a=0;a<t;a++){var o=e[a],s=r.translate(o);s<n&&(n=s),s>i&&(i=s)}return(i-n)/(t-1)});function getTooltipTitle(r,e,t){var n=e.getAttribute("position"),i=n.getFields(),a=e.scales,o=isFunction(t)||!t?i[0]:t,s=a[o],l=s?s.getText(r[o]):r[o]||o;return isFunction(t)?t(l,r):l}function getAttributesForLegend(r){var e=values(r.attributes);return filter(e,function(t){return contains(GROUP_ATTRS,t.type)})}function getTooltipValueScale(r){var e,t,n=getAttributesForLegend(r),i;try{for(var a=__values(n),o=a.next();!o.done;o=a.next()){var s=o.value,l=s.getScale(s.type);if(l&&l.isLinear){var c=get(r.scaleDefs,l.field),u=inferScaleType(l,c,s.type,r.type);if(u!=="cat"){i=l;break}}}}catch(g){e={error:g}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}var f=r.getXScale(),d=r.getYScale();return i||d||f}function getTooltipValue(r,e){var t=e.field,n=r[t];if(isArray$3(n)){var i=n.map(function(a){return e.getText(a)});return i.join("-")}return e.getText(n)}function getTooltipName(r,e){var t,n=e.getGroupScales();if(n.length&&(t=n[0]),t){var i=t.field;return t.getText(r[i])}var a=getTooltipValueScale(e);return getName(a)}function findDataByPoint(r,e,t){if(e.length===0)return null;var n=t.type,i=t.getXScale(),a=t.getYScale(),o=i.field,s=a.field,l=null;if(n==="heatmap"||n==="point"){for(var c=t.coordinate,u=c.invert(r),f=i.invert(u.x),d=a.invert(u.y),g=1/0,p=0;p<e.length;p++){var v=e[p],y=v[FIELD_ORIGIN],m=Math.pow(y[o]-f,2)+Math.pow(y[s]-d,2);m<g&&(g=m,l=v)}return l}var x=e[0],_=e[e.length-1],S=getXValueByPoint(r,t),A=x[FIELD_ORIGIN][o],b=x[FIELD_ORIGIN][s],C=_[FIELD_ORIGIN][o],E=a.isLinear&&isArray$3(b);if(isArray$3(A)){for(var p=0;p<e.length;p++){var T=e[p],y=T[FIELD_ORIGIN];if(i.translate(y[o][0])<=S&&i.translate(y[o][1])>=S)if(E)isArray$3(l)||(l=[]),l.push(T);else{l=T;break}}isArray$3(l)&&(l=filterYValue(l,r,t))}else{var I=void 0;if(!i.isLinear&&i.type!=="timeCat"){for(var p=0;p<e.length;p++){var T=e[p],y=T[FIELD_ORIGIN];if(snapEqual(y[o],S,i))if(E)isArray$3(l)||(l=[]),l.push(T);else{l=T;break}else i.translate(y[o])<=S&&(_=T,I=e[p+1])}isArray$3(l)&&(l=filterYValue(l,r,t))}else{if((S>i.translate(C)||S<i.translate(A))&&(S>i.max||S<i.min))return null;for(var w=0,M=e.length-1,$=void 0;w<=M;){$=Math.floor((w+M)/2);var P=e[$][FIELD_ORIGIN][o];if(snapEqual(P,S,i))return e[$];i.translate(P)<=i.translate(S)?(w=$+1,_=e[$],I=e[$+1]):(M===0&&(_=e[0]),M=$-1)}}_&&I&&Math.abs(i.translate(_[FIELD_ORIGIN][o])-S)>Math.abs(i.translate(I[FIELD_ORIGIN][o])-S)&&(_=I)}var R=getXDistance(t.getXScale());return!l&&Math.abs(i.translate(_[FIELD_ORIGIN][o])-S)<=R/2&&(l=_),l}function getTooltipItems(r,e,t,n){var i,a;t===void 0&&(t=""),n===void 0&&(n=!1);var o=r[FIELD_ORIGIN],s=getTooltipTitle(o,e,t),l=e.tooltipOption,c=e.theme.defaultColor,u=[],f,d;function g(T,I){if(n||!isNil(I)&&I!==""){var w={title:s,data:o,mappingData:r,name:T,value:I,color:r.color||c,marker:!0};u.push(w)}}if(isObject(l)){var p=l.fields,v=l.callback;if(v){var y=p.map(function(T){return r[FIELD_ORIGIN][T]}),m=v.apply(void 0,__spreadArray$1([],__read(y),!1)),x=__assign$1({data:r[FIELD_ORIGIN],mappingData:r,title:s,color:r.color||c,marker:!0},m);u.push(x)}else{var _=e.scales;try{for(var S=__values(p),A=S.next();!A.done;A=S.next()){var b=A.value;if(!isNil(o[b])){var C=_[b];f=getName(C),d=C.getText(o[b]),g(f,d)}}}catch(T){i={error:T}}finally{try{A&&!A.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}}}else{var E=getTooltipValueScale(e);d=getTooltipValue(o,E),f=getTooltipName(o,e),g(f,d)}return u}function getTooltipItemsByFindData(r,e,t,n){var i,a,o=n.showNil,s=[],l=r.dataArray;if(!isEmpty(l)){r.sort(l);try{for(var c=__values(l),u=c.next();!u.done;u=c.next()){var f=u.value,d=findDataByPoint(e,f,r);if(d){var g=r.getElementId(d),p=r.elementsMap[g];if(r.type==="heatmap"||p.visible){var v=getTooltipItems(d,r,t,o);v.length&&s.push(v)}}}}catch(y){i={error:y}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}return s}function getTooltipItemsByHitShape(r,e,t,n){var i=n.showNil,a=[],o=r.container,s=o.getShape(e.x,e.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,c=getTooltipItems(l,r,t,i);c.length&&a.push(c)}return a}function findItemsFromView(r,e,t){var n,i,a=[],o=r.geometries,s=t.shared,l=t.title,c=t.reversed;try{for(var u=__values(o),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.visible&&d.tooltipOption!==!1){var g=d.type,p=void 0;["point","edge","polygon"].includes(g)?p=getTooltipItemsByHitShape(d,e,l,t):["area","line","path","heatmap"].includes(g)||s!==!1?p=getTooltipItemsByFindData(d,e,l,t):p=getTooltipItemsByHitShape(d,e,l,t),p.length&&(c&&p.reverse(),a.push(p))}}}catch(v){n={error:v}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return a}function findItemsFromViewRecurisive(r,e,t){var n,i,a=findItemsFromView(r,e,t);try{for(var o=__values(r.views),s=o.next();!s.done;s=o.next()){var l=s.value;a=a.concat(findItemsFromView(l,e,t))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function isAutoPadding(r){return!isNumber$1(r)&&!isArray$3(r)}function parsePadding(r){r===void 0&&(r=0);var e=isArray$3(r)?r:[r];switch(e.length){case 0:e=[0,0,0,0];break;case 1:e=new Array(4).fill(e[0]);break;case 2:e=__spreadArray$1(__spreadArray$1([],__read(e),!1),__read(e),!1);break;case 3:e=__spreadArray$1(__spreadArray$1([],__read(e),!1),[e[1]],!1);break;default:e=e.slice(0,4);break}return e}var LOAD_COMPONENT_CONTROLLERS={};function registerComponentController(r,e){LOAD_COMPONENT_CONTROLLERS[r]=e}function getComponentControllerNames(){return Object.keys(LOAD_COMPONENT_CONTROLLERS)}function getComponentController(r){return LOAD_COMPONENT_CONTROLLERS[r]}var CoordinateController=function(){function r(e){this.option=this.wrapperOption(e)}return r.prototype.update=function(e){return this.option=this.wrapperOption(e),this},r.prototype.hasAction=function(e){var t=this.option.actions;return some(t,function(n){return n[0]===e})},r.prototype.create=function(e,t){var n=this.option,i=n.type,a=n.cfg,o=i==="theta",s=__assign$1({start:e,end:t},a),l=getCoordinate(o?"polar":i);return this.coordinate=new l(s),this.coordinate.type=i,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},r.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},r.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},r.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},r.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},r.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},r.prototype.getOption=function(){return this.option},r.prototype.getCoordinate=function(){return this.coordinate},r.prototype.wrapperOption=function(e){return __assign$1({type:"rect",actions:[],cfg:{}},e)},r.prototype.execActions=function(e){var t=this,n=this.option.actions;each$1(n,function(i){var a,o=__read(i),s=o[0],l=o.slice(1),c=isNil(e)?!0:e.includes(s);c&&(a=t.coordinate)[s].apply(a,__spreadArray$1([],__read(l),!1))})},r}(),Event=function(){function r(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return r.fromData=function(e,t,n){return new r(e,new GraphEvent(t,{}),n)},Object.defineProperty(r.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},r.prototype.clone=function(){return new r(this.view,this.gEvent,this.data)},r}();function defaultLayout(r){var e=r.getController("axis"),t=r.getController("legend"),n=r.getController("annotation"),i=r.getController("slider"),a=r.getController("scrollbar");[e,i,a,t,n].forEach(function(o){o&&o.layout()})}var ScalePool=function(){function r(){this.scales=new Map,this.syncScales=new Map}return r.prototype.createScale=function(e,t,n,i){var a=n,o=this.getScaleMeta(i);if(t.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),a=deepMix(l,o.scaleDef,n)}var c=createScaleByField(e,t,a);return this.cacheScale(c,n,i),c},r.prototype.sync=function(e,t){var n=this;this.syncScales.forEach(function(i,a){var o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=[];each$1(i,function(c){var u=n.getScale(c);s=isNumber$1(u.max)?Math.max(s,u.max):s,o=isNumber$1(u.min)?Math.min(o,u.min):o,each$1(u.values,function(f){l.includes(f)||l.push(f)})}),each$1(i,function(c){var u=n.getScale(c);if(u.isContinuous)u.change({min:o,max:s,values:l});else if(u.isCategory){var f=u.range,d=n.getScaleMeta(c);l&&!get(d,["scaleDef","range"])&&(f=getDefaultCategoryScaleRange(deepMix({},u,{values:l}),e,t)),u.change({values:l,range:f})}})})},r.prototype.cacheScale=function(e,t,n){var i=this.getScaleMeta(n);i&&i.scale.type===e.type?(syncScale(i.scale,e),i.scaleDef=t):(i={key:n,scale:e,scaleDef:t},this.scales.set(n,i));var a=this.getSyncKey(i);if(i.syncKey=a,this.removeFromSyncScales(n),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(n)}},r.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var n=last(e.split("-")),i=this.syncScales.get(n);i&&i.length&&(t=this.getScaleMeta(i[0]))}return t&&t.scale},r.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var n=t.syncKey,i=this.syncScales.get(n);if(i&&i.length){var a=i.indexOf(e);a!==-1&&i.splice(a,1)}}this.scales.delete(e)},r.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},r.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach(function(n,i){var a=n.indexOf(e);if(a!==-1)return n.splice(a,1),n.length===0&&t.syncScales.delete(i),!1})},r.prototype.getSyncKey=function(e){var t=e.scale,n=e.scaleDef,i=t.field,a=get(n,["sync"]);return a===!0?i:a===!1?void 0:a},r.prototype.getScaleMeta=function(e){return this.scales.get(e)},r}(),PaddingCal=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.top=e,this.right=t,this.bottom=n,this.left=i}return r.instance=function(e,t,n,i){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),new r(e,t,n,i)},r.prototype.max=function(e){var t=__read(e,4),n=t[0],i=t[1],a=t[2],o=t[3];return this.top=Math.max(this.top,n),this.right=Math.max(this.right,i),this.bottom=Math.max(this.bottom,a),this.left=Math.max(this.left,o),this},r.prototype.shrink=function(e){var t=__read(e,4),n=t[0],i=t[1],a=t[2],o=t[3];return this.top+=n,this.right+=i,this.bottom+=a,this.left+=o,this},r.prototype.inc=function(e,t){var n=e.width,i=e.height;switch(t){case DIRECTION.TOP:case DIRECTION.TOP_LEFT:case DIRECTION.TOP_RIGHT:this.top+=i;break;case DIRECTION.RIGHT:case DIRECTION.RIGHT_TOP:case DIRECTION.RIGHT_BOTTOM:this.right+=n;break;case DIRECTION.BOTTOM:case DIRECTION.BOTTOM_LEFT:case DIRECTION.BOTTOM_RIGHT:this.bottom+=i;break;case DIRECTION.LEFT:case DIRECTION.LEFT_TOP:case DIRECTION.LEFT_BOTTOM:this.left+=n;break}return this},r.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},r.prototype.clone=function(){return new(r.bind.apply(r,__spreadArray$1([void 0],__read(this.getPadding()),!1)))},r}();function calculatePadding(r){var e=r.padding;if(!isAutoPadding(e))return new(PaddingCal.bind.apply(PaddingCal,__spreadArray$1([void 0],__read(parsePadding(e)),!1)));var t=r.viewBBox,n=new PaddingCal,i=[],a=[],o=[];return each$1(r.getComponents(),function(s){var l=s.type;l===COMPONENT_TYPE.AXIS?i.push(s):[COMPONENT_TYPE.LEGEND,COMPONENT_TYPE.SLIDER,COMPONENT_TYPE.SCROLLBAR].includes(l)?a.push(s):l!==COMPONENT_TYPE.GRID&&l!==COMPONENT_TYPE.TOOLTIP&&o.push(s)}),each$1(i,function(s){var l=s.component,c=l.getLayoutBBox(),u=new BBox(c.x,c.y,c.width,c.height),f=u.exceed(t);n.max(f)}),each$1(a,function(s){var l=s.component,c=s.direction,u=l.getLayoutBBox(),f=l.get("padding"),d=new BBox(u.x,u.y,u.width,u.height).expand(f);n.inc(d,c)}),each$1(o,function(s){var l=s.component,c=s.direction,u=l.getLayoutBBox(),f=new BBox(u.x,u.y,u.width,u.height);n.inc(f,c)}),n}function defaultSyncViewPadding(r,e,t){var n=t.instance();e.forEach(function(i){i.autoPadding=n.max(i.autoPadding.getPadding())})}var View=function(r){__extends$1(e,r);function e(t){var n=r.call(this,{visible:t.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=getComponentControllerNames(),n.scalePool=new ScalePool,n.layoutFunc=defaultLayout,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(_){var S=_.name;if(!S.includes(":")){var A=n.createViewEvent(_);n.doPlotEvent(A),n.emit(S,A)}},n.onDelegateEvents=function(_){var S=_.name;if(S.includes(":")){var A=n.createViewEvent(_);n.emit(S,A)}};var i=t.id,a=i===void 0?uniqueId("view"):i,o=t.parent,s=t.canvas,l=t.backgroundGroup,c=t.middleGroup,u=t.foregroundGroup,f=t.region,d=f===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:f,g=t.padding,p=t.appendPadding,v=t.theme,y=t.options,m=t.limitInPlot,x=t.syncViewPadding;return n.parent=o,n.canvas=s,n.backgroundGroup=l,n.middleGroup=c,n.foregroundGroup=u,n.region=d,n.padding=g,n.appendPadding=p,n.options=__assign$1(__assign$1({},n.options),y),n.limitInPlot=m,n.id=a,n.syncViewPadding=x,n.themeObject=isObject(v)?deepMix({},getTheme("default"),createTheme(v)):getTheme(v),n.init(),n}return e.prototype.setLayout=function(t){this.layoutFunc=t},e.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},e.prototype.render=function(t,n){t===void 0&&(t=!1),this.emit(VIEW_LIFE_CIRCLE.BEFORE_RENDER,Event.fromData(this,VIEW_LIFE_CIRCLE.BEFORE_RENDER,n)),this.paint(t),this.emit(VIEW_LIFE_CIRCLE.AFTER_RENDER,Event.fromData(this,VIEW_LIFE_CIRCLE.AFTER_RENDER,n)),this.visible===!1&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this;this.emit(VIEW_LIFE_CIRCLE.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var n=this.geometries,i=0;i<n.length;i++)n[i].clear(),n[i].container.remove(!0),n[i].labelsContainer.remove(!0);this.geometries=[];for(var a=this.controllers,i=0;i<a.length;i++)a[i].name==="annotation"?a[i].clear(!0):a[i].clear();this.createdScaleKeys.forEach(function(s,l){t.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,i=0;i<o.length;i++)o[i].clear();this.emit(VIEW_LIFE_CIRCLE.AFTER_CLEAR)},e.prototype.destroy=function(){this.emit(VIEW_LIFE_CIRCLE.BEFORE_DESTROY);var t=this.interactions;each$1(t,function(s){s&&s.destroy()}),this.clear();for(var n=this.controllers,i=0,a=n.length;i<a;i++){var o=n[i];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),r.prototype.destroy.call(this)},e.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t);for(var n=this.geometries,i=0,a=n.length;i<a;i++){var o=n[i];o.changeVisible(t)}for(var s=this.controllers,i=0,a=s.length;i<a;i++){var l=s[i];l.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},e.prototype.data=function(t){return set(this.options,"data",t),this.isDataChanged=!0,this},e.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},e.prototype.filter=function(t,n){return isFunction(n)?(set(this.options,["filters",t],n),this):(!n&&get(this.options,["filters",t])&&delete this.options.filters[t],this)},e.prototype.axis=function(t,n){return isBoolean(t)?set(this.options,["axes"],t):set(this.options,["axes",t],n),this},e.prototype.legend=function(t,n){return isBoolean(t)?set(this.options,["legends"],t):isString(t)?(set(this.options,["legends",t],n),isPlainObject$1(n)&&(n!=null&&n.selected)&&set(this.options,["filters",t],function(i){var a;return(a=n==null?void 0:n.selected[i])!==null&&a!==void 0?a:!0})):set(this.options,["legends"],t),this},e.prototype.scale=function(t,n){var i=this;return isString(t)?set(this.options,["scales",t],n):isObject(t)&&each$1(t,function(a,o){set(i.options,["scales",o],a)}),this},e.prototype.tooltip=function(t){return set(this.options,"tooltip",t),this},e.prototype.annotation=function(){return this.getController("annotation")},e.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},e.prototype.coordinate=function(t,n){return isString(t)?set(this.options,"coordinate",{type:t,cfg:n}):set(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},e.prototype.coord=function(t,n){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,n)},e.prototype.facet=function(t,n){this.facetInstance&&this.facetInstance.destroy();var i=getFacet(t);if(!i)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new i(this,__assign$1(__assign$1({},n),{type:t})),this},e.prototype.animate=function(t){return set(this.options,"animate",t),this},e.prototype.updateOptions=function(t){return this.clear(),mix(this.options,t),this.views.forEach(function(n){return n.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},e.prototype.option=function(t,n){if(e.prototype[t])throw new Error(`Can't use built in variable name "`.concat(t,'", please change another one.'));return set(this.options,t,n),this},e.prototype.theme=function(t){return this.themeObject=isObject(t)?deepMix({},this.themeObject,createTheme(t)):getTheme(t),this},e.prototype.interaction=function(t,n){var i=this.interactions[t];i&&i.destroy();var a=createInteraction(t,this,n);return a&&(a.init(),this.interactions[t]=a),this},e.prototype.removeInteraction=function(t){var n=this.interactions[t];n&&(n.destroy(),this.interactions[t]=void 0)},e.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.changeData(t)}this.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},e.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:clone(this.options.scales),axes:clone(this.options.axes),coordinate:clone(this.coordinateController.getOption()),tooltip:clone(this.options.tooltip),legends:clone(this.options.legends),animate:this.options.animate,visible:this.visible},i=new e(__assign$1(__assign$1({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:GROUP_Z_INDEX.BG}),middleGroup:this.middleGroup.addGroup({zIndex:GROUP_Z_INDEX.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:GROUP_Z_INDEX.FORE}),theme:this.themeObject,padding:this.padding},t),{options:__assign$1(__assign$1({},n),get(t,"options",{}))}));return this.views.push(i),i},e.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},e.prototype.removeView=function(t){var n=remove(this.views,function(i){return i===t})[0];return n&&n.destroy(),n},e.prototype.getCoordinate=function(){return this.coordinateInstance},e.prototype.getTheme=function(){return this.themeObject},e.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},e.prototype.getYScales=function(){var t={},n=[];return this.geometries.forEach(function(i){var a=i.getYScale(),o=a.field;t[o]||(t[o]=!0,n.push(a))}),n},e.prototype.getScalesByDim=function(t){for(var n=this.geometries,i={},a=0,o=n.length;a<o;a++){var s=n[a],l=t==="x"?s.getXScale():s.getYScale();l&&!i[l.field]&&(i[l.field]=l)}return i},e.prototype.getScale=function(t,n){var i=n||this.getScaleKey(t);return this.getRootView().scalePool.getScale(i)},e.prototype.getScaleByField=function(t,n){return this.getScale(t,n)},e.prototype.getOptions=function(){return this.options},e.prototype.getData=function(){return this.filteredData},e.prototype.getOriginalData=function(){return this.options.data},e.prototype.getPadding=function(){return this.autoPadding.getPadding()},e.prototype.getGeometries=function(){return this.geometries},e.prototype.getElements=function(){return reduce(this.geometries,function(t,n){return t.concat(n.getElements())},[])},e.prototype.getElementsBy=function(t){return this.getElements().filter(function(n){return t(n)})},e.prototype.getLayer=function(t){return t===LAYER.BG?this.backgroundGroup:t===LAYER.MID?this.middleGroup:t===LAYER.FORE?this.foregroundGroup:this.foregroundGroup},e.prototype.isPointInPlot=function(t){return isPointInCoordinate(this.getCoordinate(),t)},e.prototype.getLegendAttributes=function(){return flatten(this.geometries.map(function(t){return t.getGroupAttributes()}))},e.prototype.getGroupScales=function(){var t=this.geometries.map(function(n){return n.getGroupScales()});return uniq$1(flatten(t))},e.prototype.getCanvas=function(){return this.getRootView().canvas},e.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},e.prototype.getXY=function(t){var n=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,s;if(each$1(t,function(l,c){i[c]&&(o=i[c].scale(l)),a[c]&&(s=a[c].scale(l))}),!isNil(o)&&!isNil(s))return n.convert({x:o,y:s})},e.prototype.getController=function(t){return find$1(this.controllers,function(n){return n.name===t})},e.prototype.showTooltip=function(t){var n=this.getController("tooltip");return n&&n.showTooltip(t),this},e.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},e.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},e.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},e.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},e.prototype.getTooltipItems=function(t){var n=this.getController("tooltip");return n?n.getTooltipItems(t):[]},e.prototype.getSnapRecords=function(t){for(var n=this.geometries,i=[],a=0,o=n.length;a<o;a++){var s=n[a],l=s.dataArray;s.sort(l);for(var c=void 0,u=0,f=l.length;u<f;u++){var d=l[u];c=findDataByPoint(t,d,s),c&&i.push(c)}}for(var g=this.views,a=0,o=g.length;a<o;a++){var p=g[a],v=p.getSnapRecords(t);i=i.concat(v)}return i},e.prototype.getComponents=function(){for(var t=[],n=this.controllers,i=0,a=n.length;i<a;i++){var o=n[i];t=t.concat(o.getComponents())}return t},e.prototype.filterData=function(t){var n=this.options.filters;return size(n)===0?t:filter(t,function(i,a){var o=Object.keys(n);return o.every(function(s){var l=n[s];return l(i[s],i,a)})})},e.prototype.filterFieldData=function(t,n){var i=this.options.filters,a=get(i,t);return isUndefined(a)?n:n.filter(function(o,s){return a(o[t],o,s)})},e.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),n=t.start,i=t.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if(isEqual$1(n,a)&&isEqual$1(i,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},e.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(VIEW_LIFE_CIRCLE.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(VIEW_LIFE_CIRCLE.AFTER_PAINT),this.isDataChanged=!1},e.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=get(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var n=this.viewBBox,i=n.x,a=n.y,o=n.width,s=n.height;this.backgroundStyleRectShape.attr({fill:t,x:i,y:a,width:o,height:s})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},e.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=calculatePadding(this).shrink(parsePadding(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var n=this.controllers.find(function(l){return l.name==="tooltip"});n.update();for(var i=this.views,a=0,o=i.length;a<o;a++){var s=i[a];s.renderPaddingRecursive(t)}},e.prototype.renderLayoutRecursive=function(t){var n=this.syncViewPadding===!0?defaultSyncViewPadding:isFunction(this.syncViewPadding)?this.syncViewPadding:void 0;n&&(n(this,this.views,PaddingCal),this.views.forEach(function(l){l.coordinateBBox=l.viewBBox.shrink(l.autoPadding.getPadding()),l.adjustCoordinate()})),this.doLayout();for(var i=this.views,a=0,o=i.length;a<o;a++){var s=i[a];s.renderLayoutRecursive(t)}},e.prototype.renderPaintRecursive=function(t){var n=this.middleGroup;if(this.limitInPlot){var i=getCoordinateClipCfg(this.coordinateInstance),a=i.type,o=i.attrs;n.setClip({type:a,attrs:o})}else n.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var s=this.views,l=0,c=s.length;l<c;l++){var u=s[l];u.renderPaintRecursive(t)}},e.prototype.createScale=function(t,n,i,a){var o=get(this.options.scales,[t]),s=__assign$1(__assign$1({},o),i);return this.parent?this.parent.createScale(t,n,s,a):this.scalePool.createScale(t,n,s,a)},e.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.renderDataRecursive(t)}},e.prototype.calculateViewBBox=function(){var t,n,i,a;if(this.parent){var o=this.parent.coordinateBBox;t=o.x,n=o.y,i=o.width,a=o.height}else t=0,n=0,i=this.canvas.get("width"),a=this.canvas.get("height");var s=this.region,l=s.start,c=s.end,u=new BBox(t+i*l.x,n+a*l.y,i*(c.x-l.x),a*(c.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(u))&&(this.viewBBox=new BBox(t+i*l.x,n+a*l.y,i*(c.x-l.x),a*(c.y-l.y))),this.coordinateBBox=this.viewBBox},e.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},e.prototype.initComponentController=function(){for(var t=this.usedControllers,n=0,i=t.length;n<i;n++){var a=t[n],o=getComponentController(a);o&&this.controllers.push(new o(this))}},e.prototype.createViewEvent=function(t){var n=t.shape,i=t.name,a=n?n.get("origin"):null,o=new Event(this,t,a);return o.type=i,o},e.prototype.doPlotEvent=function(t){var n=t.type,i=t.x,a=t.y,o={x:i,y:a},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(n)){var l=this.isPointInPlot(o),c=t.clone();if(l){var u="plot:".concat(n);c.type=u,this.emit(u,c),(n==="mouseleave"||n==="touchend")&&(this.isPreMouseInPlot=!1)}n==="mousemove"||n==="touchmove"?(this.isPreMouseInPlot&&!l?(n==="mousemove"&&(c.type=PLOT_EVENTS.MOUSE_LEAVE,this.emit(PLOT_EVENTS.MOUSE_LEAVE,c)),c.type=PLOT_EVENTS.LEAVE,this.emit(PLOT_EVENTS.LEAVE,c)):!this.isPreMouseInPlot&&l&&(n==="mousemove"&&(c.type=PLOT_EVENTS.MOUSE_ENTER,this.emit(PLOT_EVENTS.MOUSE_ENTER,c)),c.type=PLOT_EVENTS.ENTER,this.emit(PLOT_EVENTS.ENTER,c)),this.isPreMouseInPlot=l):(n==="mouseleave"||n==="touchend")&&this.isPreMouseInPlot&&(n==="mouseleave"&&(c.type=PLOT_EVENTS.MOUSE_LEAVE,this.emit(PLOT_EVENTS.MOUSE_LEAVE,c)),c.type=PLOT_EVENTS.LEAVE,this.emit(PLOT_EVENTS.LEAVE,c),this.isPreMouseInPlot=!1)}},e.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},e.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var n=this.getCoordinate(),i=get(this.options,"scales",{}),a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.scales=this.getGeometryScales();var c={coordinate:n,scaleDefs:i,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?l.update(c):l.init(c)}this.adjustScales()},e.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),n=this.getGroupedFields(),i=this.getOptions(),a=i.data,o=i.scales,s=o===void 0?{}:o,l=this.filteredData,c=0,u=t.length;c<u;c++){var f=t[c],d=s[f],g=this.getScaleKey(f);this.createScale(f,n.includes(f)?a:l,d,g),this.createdScaleKeys.set(g,!0)}},e.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},e.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),n={},i=0;i<t.length;i++){var a=t[i];n[a]=this.getScaleByField(a)}return n},e.prototype.getScaleFields=function(){for(var t=[],n=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getScaleFields();uniq$1(s,t,n)}return t},e.prototype.getGroupedFields=function(){for(var t=[],n=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getGroupFields();uniq$1(s,t,n)}return t},e.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},e.prototype.adjustCategoryScaleRange=function(){var t=this,n=__spreadArray$1([this.getXScale()],__read(this.getYScales()),!1).filter(function(o){return!!o}),i=this.getCoordinate(),a=this.options.scales;each$1(n,function(o){var s=o.field,l=o.values,c=o.isCategory,u=o.isIdentity;(c||u)&&l&&!get(a,[s,"range"])&&(o.range=getDefaultCategoryScaleRange(o,i,t.theme))})},e.prototype.initComponents=function(t){for(var n=this.controllers,i=0;i<n.length;i++){var a=n[i];t?a.update():(a.clear(),a.render())}},e.prototype.doLayout=function(){this.layoutFunc(this)},e.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,n=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,n)},e.prototype.paintGeometries=function(t){for(var n=this.options.animate,i=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=i,l.canvasRegion=a,n||l.animate(!1),l.paint(t)}},e.prototype.renderComponents=function(t){for(var n=this.getComponents(),i=0;i<n.length;i++){var a=n[i];a.component.render()}},e.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},e.prototype.initOptions=function(){var t=this,n=this.options,i=n.geometries,a=i===void 0?[]:i,o=n.interactions,s=o===void 0?[]:o,l=n.views,c=l===void 0?[]:l,u=n.annotations,f=u===void 0?[]:u,d=n.coordinate,g=n.events,p=n.facets;this.coordinateController?d&&this.coordinateController.update(d):this.coordinateController=new CoordinateController(d);for(var v=0;v<a.length;v++){var y=a[v];this.createGeometry(y)}for(var m=0;m<s.length;m++){var x=s[m],_=x.type,S=x.cfg;this.interaction(_,S)}for(var A=0;A<c.length;A++){var b=c[A];this.createView(b)}for(var C=this.getController("annotation"),E=0;E<f.length;E++){var T=f[E];C.annotation(T)}g&&each$1(g,function(I,w){t.on(w,I)}),p&&each$1(p,function(I){var w=I.type,M=__rest(I,["type"]);t.facet(w,M)})},e.prototype.createGeometry=function(t){var n=t.type,i=t.cfg,a=i===void 0?{}:i;if(this[n]){var o=this[n](a);each$1(t,function(s,l){isFunction(o[l])&&o[l](s)})}},e.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},e}(Base$1);function registerGeometry(r,e){View.prototype[r.toLowerCase()]=function(t){t===void 0&&(t={});var n=__assign$1({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),i=new e(n);return this.geometries.push(i),i}}var Chart=function(r){__extends$1(e,r);function e(t){var n=this,i=t.container,a=t.width,o=t.height,s=t.autoFit,l=s===void 0?!1:s,c=t.padding,u=t.appendPadding,f=t.renderer,d=f===void 0?"canvas":f,g=t.pixelRatio,p=t.localRefresh,v=p===void 0?!0:p,y=t.visible,m=y===void 0?!0:y,x=t.supportCSSTransform,_=x===void 0?!1:x,S=t.defaultInteractions,A=S===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:S,b=t.options,C=t.limitInPlot,E=t.theme,T=t.syncViewPadding,I=isString(i)?document.getElementById(i):i,w=createDom$1('<div style="position:relative;"></div>');I.appendChild(w);var M=getChartSize(I,l,a,o),$=getEngine(d),P=new $.Canvas(__assign$1({container:w,pixelRatio:g,localRefresh:v,supportCSSTransform:_},M));return n=r.call(this,{parent:null,canvas:P,backgroundGroup:P.addGroup({zIndex:GROUP_Z_INDEX.BG}),middleGroup:P.addGroup({zIndex:GROUP_Z_INDEX.MID}),foregroundGroup:P.addGroup({zIndex:GROUP_Z_INDEX.FORE}),padding:c,appendPadding:u,visible:m,options:b,limitInPlot:C,theme:E,syncViewPadding:T})||this,n.onResize=debounce$1(function(){n.forceFit()},300),n.ele=I,n.canvas=P,n.width=M.width,n.height=M.height,n.autoFit=l,n.localRefresh=v,n.renderer=d,n.wrapperElement=w,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(A),n}return e.prototype.initDefaultInteractions=function(t){var n=this;each$1(t,function(i){n.interaction(i)})},e.prototype.aria=function(t){var n="aria-label";t===!1?this.ele.removeAttribute(n):this.ele.setAttribute(n,t.label)},e.prototype.changeSize=function(t,n){return this.width===t&&this.height===n?this:(this.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE),this.width=t,this.height=n,this.canvas.changeSize(t,n),this.render(!0),this.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_SIZE),this)},e.prototype.clear=function(){r.prototype.clear.call(this),this.aria(!1)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),removeDom(this.wrapperElement),this.wrapperElement=null},e.prototype.changeVisible=function(t){return r.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},e.prototype.forceFit=function(){if(!this.destroyed){var t=getChartSize(this.ele,!0,this.width,this.height),n=t.width,i=t.height;this.changeSize(n,i)}},e.prototype.updateCanvasStyle=function(){modifyCSS(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},e.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},e.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},e}(View),Controller=function(){function r(e){this.visible=!0,this.components=[],this.view=e}return r.prototype.clear=function(e){each$1(this.components,function(t){t.component.destroy()}),this.components=[]},r.prototype.destroy=function(){this.clear()},r.prototype.getComponents=function(){return this.components},r.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach(function(t){e?t.component.show():t.component.hide()}),this.visible=e)},r}();function uniq(r){for(var e=[],t=function(i){var a=r[i],o=find$1(e,function(s){return s.color===a.color&&s.name===a.name&&s.value===a.value&&s.title===a.title});o||e.push(a)},n=0;n<r.length;n++)t(n);return e}var Tooltip=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},e.prototype.render=function(){},e.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var n=this.view,i=this.getTooltipItems(t);if(!i.length){this.hideTooltip();return}var a=this.getTitle(i),o={x:i[0].x,y:i[0].y};n.emit("tooltip:show",Event.fromData(n,"tooltip:show",__assign$1({items:i,title:a},t)));var s=this.getTooltipCfg(),l=s.follow,c=s.showMarkers,u=s.showCrosshairs,f=s.showContent,d=s.marker,g=this.items,p=this.title;if(!isEqual$1(p,a)||!isEqual$1(g,i)?(n.emit("tooltip:change",Event.fromData(n,"tooltip:change",__assign$1({items:i,title:a},t))),(isFunction(f)?f(i):f)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(mix({},s,{items:this.getItemsAfterProcess(i),title:a},l?t:{})),this.tooltip.show()),c&&this.renderTooltipMarkers(i,d)):(this.tooltip&&l&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=i,this.title=a,u){var v=get(s,["crosshairs","follow"],!1);this.renderCrosshairs(v?t:o,s)}}},e.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var n=this.tooltipMarkersGroup;n&&n.hide();var i=this.xCrosshair,a=this.yCrosshair;i&&i.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",Event.fromData(this.view,"tooltip:hide",{})),this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,n=t.tooltip,i=t.xCrosshair,a=t.yCrosshair,o=t.tooltipMarkersGroup;n&&(n.hide(),n.clear()),i&&i.clear(),a&&a.clear(),o&&o.clear(),n!=null&&n.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},e.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var n=this,i=n.tooltip,a=n.tooltipMarkersGroup,o=n.xCrosshair,s=n.yCrosshair;t?(i&&i.show(),a&&a.show(),o&&o.show(),s&&s.show()):(i&&i.hide(),a&&a.hide(),o&&o.hide(),s&&s.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var n,i,a,o,s,l,c=this.findItemsFromView(this.view,t);if(c.length){c=flatten(c);try{for(var u=__values(c),f=u.next();!f.done;f=u.next()){var d=f.value;try{for(var g=(a=void 0,__values(d)),p=g.next();!p.done;p=g.next()){var v=p.value,y=v.mappingData,m=y.x,x=y.y;v.x=isArray$3(m)?m[m.length-1]:m,v.y=isArray$3(x)?x[x.length-1]:x}}catch(I){a={error:I}}finally{try{p&&!p.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}}}catch(I){n={error:I}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}var _=this.getTooltipCfg().shared;if(_===!1&&c.length>1){var S=c[0],A=Math.abs(t.y-S[0].y);try{for(var b=__values(c),C=b.next();!C.done;C=b.next()){var E=C.value,T=Math.abs(t.y-E[0].y);T<=A&&(S=E,A=T)}}catch(I){s={error:I}}finally{try{C&&!C.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}c=[S]}return uniq(flatten(c))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},e.prototype.isCursorEntered=function(t){if(this.tooltip){var n=this.tooltip.getContainer(),i=this.tooltip.get("capture");if(n&&i){var a=n.getBoundingClientRect(),o=a.x,s=a.y,l=a.width,c=a.height;return new BBox(o,s,l,c).isPointIn(t)}}return!1},e.prototype.getTooltipCfg=function(){var t=this.view,n=t.getOptions().tooltip,i=this.processCustomContent(n),a=t.getTheme(),o=get(a,["components","tooltip"],{}),s=get(i,"enterable",o.enterable);return deepMix({},o,i,{capture:!!(s||this.isLocked)})},e.prototype.processCustomContent=function(t){if(isBoolean(t)||!get(t,"customContent"))return t;var n=t.customContent,i=function(a,o){var s=n(a,o)||"";return isString(s)?'<div class="g2-tooltip">'+s+"</div>":s};return __assign$1(__assign$1({},t),{customContent:i})},e.prototype.getTitle=function(t){var n=t[0].title||t[0].name;return this.title=n,n},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),n={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},i=this.getTooltipCfg(),a=new HtmlTooltip(__assign$1(__assign$1({parent:t.get("el").parentNode,region:n},i),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},e.prototype.renderTooltipMarkers=function(t,n){var i,a,o=this.getTooltipMarkersGroup(),s=this.view.getRootView(),l=s.limitInPlot;try{for(var c=__values(t),u=c.next();!u.done;u=c.next()){var f=u.value,d=f.x,g=f.y;if(l||o!=null&&o.getClip()){var p=getCoordinateClipCfg(s.getCoordinate()),v=p.type,y=p.attrs;o==null||o.setClip({type:v,attrs:y})}else o==null||o.setClip(void 0);var m=this.view.getTheme(),x=get(m,["components","tooltip","marker"],{}),_=__assign$1(__assign$1({fill:f.color,symbol:"circle",shadowColor:f.color},isFunction(n)?__assign$1(__assign$1({},x),n(f)):n),{x:d,y:g});o.addShape("marker",{attrs:_})}}catch(S){i={error:S}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},e.prototype.renderCrosshairs=function(t,n){var i=get(n,["crosshairs","type"],"x");i==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,n)):i==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,n)):i==="xy"&&(this.renderXCrosshairs(t,n),this.renderYCrosshairs(t,n))},e.prototype.renderXCrosshairs=function(t,n){var i=this.getViewWithGeometry(this.view).getCoordinate(),a,o;if(i.isRect)i.isTransposed?(a={x:i.start.x,y:t.y},o={x:i.end.x,y:t.y}):(a={x:t.x,y:i.end.y},o={x:t.x,y:i.start.y});else{var s=getAngleByPoint(i,t),l=i.getCenter(),c=i.getRadius();o=polarToCartesian(l.x,l.y,c,s),a=l}var u=deepMix({start:a,end:o,container:this.getTooltipCrosshairsGroup()},get(n,"crosshairs",{}),this.getCrosshairsText("x",t,n));delete u.type;var f=this.xCrosshair;f?f.update(u):(f=new LineCrosshair$1(u),f.init()),f.render(),f.show(),this.xCrosshair=f},e.prototype.renderYCrosshairs=function(t,n){var i=this.getViewWithGeometry(this.view).getCoordinate(),a,o;if(i.isRect){var s=void 0,l=void 0;i.isTransposed?(s={x:t.x,y:i.end.y},l={x:t.x,y:i.start.y}):(s={x:i.start.x,y:t.y},l={x:i.end.x,y:t.y}),a={start:s,end:l},o="Line"}else a={center:i.getCenter(),radius:getDistanceToCenter(i,t),startAngle:i.startAngle,endAngle:i.endAngle},o="Circle";a=deepMix({container:this.getTooltipCrosshairsGroup()},a,get(n,"crosshairs",{}),this.getCrosshairsText("y",t,n)),delete a.type;var c=this.yCrosshair;c?i.isRect&&c.get("type")==="circle"||!i.isRect&&c.get("type")==="line"?(c=new Crosshair[o](a),c.init()):c.update(a):(c=new Crosshair[o](a),c.init()),c.render(),c.show(),this.yCrosshair=c},e.prototype.getCrosshairsText=function(t,n,i){var a=get(i,["crosshairs","text"]),o=get(i,["crosshairs","follow"]),s=this.items;if(a){var l=this.getViewWithGeometry(this.view),c=s[0],u=l.getXScale(),f=l.getYScales()[0],d=void 0,g=void 0;if(o){var p=this.view.getCoordinate().invert(n);d=u.invert(p.x),g=f.invert(p.y)}else d=c.data[u.field],g=c.data[f.field];var v=t==="x"?d:g;return isFunction(a)?a=a(t,v,s,n):a.content=v,{text:a}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.findItemsFromView=function(t,n){var i,a;if(t.getOptions().tooltip===!1)return[];var o=this.getTooltipCfg(),s=findItemsFromView(t,n,o);try{for(var l=__values(t.views),c=l.next();!c.done;c=l.next()){var u=c.value;s=s.concat(this.findItemsFromView(u,n))}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return s},e.prototype.getViewWithGeometry=function(t){var n=this;return t.geometries.length?t:find$1(t.views,function(i){return n.getViewWithGeometry(i)})},e.prototype.getItemsAfterProcess=function(t){var n=this.getTooltipCfg().customItems,i=n||function(a){return a};return i(t)},e}(Controller),ANIMATIONS_MAP={};function getAnimation(r){return ANIMATIONS_MAP[r.toLowerCase()]}function registerAnimation(r,e){ANIMATIONS_MAP[r.toLowerCase()]=e}var DEFAULT_ANIMATE_CFG={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},GEOMETRY_ANIMATE_CFG={interval:function(r){return{enter:{animation:r.isRect?r.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:r.isPolar&&r.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},GEOMETRY_GROUP_APPEAR_ANIMATION={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(r){var e;return r.isRect?e=r.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",r.isPolar&&r.isTransposed&&(e="wave-in")),{animation:e}},schema:function(r){var e;return r.isRect?e=r.isTransposed?"grow-in-x":"grow-in-y":e="grow-in-xy",{animation:e}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function parseAnimateConfig(r,e){return{delay:isFunction(r.delay)?r.delay(e):r.delay,easing:isFunction(r.easing)?r.easing(e):r.easing,duration:isFunction(r.duration)?r.duration(e):r.duration,callback:r.callback,repeat:r.repeat}}function getDefaultAnimateCfg(r,e,t){var n=GEOMETRY_ANIMATE_CFG[r];return n&&(isFunction(n)&&(n=n(e)),n=deepMix({},DEFAULT_ANIMATE_CFG,n),t)?n[t]:n}function doAnimate(r,e,t){var n=get(r.get("origin"),"data",FIELD_ORIGIN),i=e.animation,a=parseAnimateConfig(e,n);if(i){var o=getAnimation(i);o&&o(r,a,t)}else r.animate(t.toAttrs,a)}function doGroupAppearAnimate(r,e,t,n,i){if(GEOMETRY_GROUP_APPEAR_ANIMATION[t]){var a=GEOMETRY_GROUP_APPEAR_ANIMATION[t](n),o=getAnimation(get(a,"animation",""));if(o){var s=__assign$1(__assign$1(__assign$1({},DEFAULT_ANIMATE_CFG.appear),a),e);r.stopAnimate(),o(r,s,{coordinate:n,minYPoint:i,toAttrs:null})}}}var BACKGROUND_SHAPE="element-background",Element$1=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.labelShape=[],n.states=[];var i=t.shapeFactory,a=t.container,o=t.offscreenGroup,s=t.elementIndex,l=t.visible,c=l===void 0?!0:l;return n.shapeFactory=i,n.container=a,n.offscreenGroup=o,n.visible=c,n.elementIndex=s,n}return e.prototype.draw=function(t,n){n===void 0&&(n=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,n),this.visible===!1&&this.changeVisible(!1)},e.prototype.update=function(t){var n=this,i=n.shapeFactory,a=n.shape;if(a){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(a,t);var o=this.getOffscreenGroup(),s=i.drawShape(this.shapeType,t,o);s.cfg.data=this.data,s.cfg.origin=t,s.cfg.element=this,this.syncShapeStyle(a,s,this.getStates(),this.getAnimateCfg("update"))}},e.prototype.destroy=function(){var t=this,n=t.shapeFactory,i=t.shape;if(i){var a=this.getAnimateCfg("leave");a?doAnimate(i,a,{coordinate:n.coordinate,toAttrs:__assign$1({},i.attr())}):i.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,r.prototype.destroy.call(this)},e.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(n){n.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(n){n.hide()}))},e.prototype.setState=function(t,n){var i=this,a=i.states,o=i.shapeFactory,s=i.model,l=i.shape,c=i.shapeType,u=a.indexOf(t);if(n){if(u>-1)return;a.push(t),(t==="active"||t==="selected")&&(l==null||l.toFront())}else{if(u===-1)return;if(a.splice(u,1),t==="active"||t==="selected"){var f=this.geometry,d=f.sortZIndex,g=f.zIndexReversed,p=g?this.geometry.elements.length-this.elementIndex:this.elementIndex;d?l.setZIndex(p):l.set("zIndex",p)}}var v=o.drawShape(c,s,this.getOffscreenGroup());a.length?this.syncShapeStyle(l,v,a,null):this.syncShapeStyle(l,v,["reset"],null),v.remove(!0);var y={state:t,stateStatus:n,element:this,target:this.container};this.container.emit("statechange",y),propagationDelegate(this.shape,"statechange",y)},e.prototype.clearStates=function(){var t=this,n=this.states;each$1(n,function(i){t.setState(i,!1)}),this.states=[]},e.prototype.hasState=function(t){return this.states.includes(t)},e.prototype.getStates=function(){return this.states},e.prototype.getData=function(){return this.data},e.prototype.getModel=function(){return this.model},e.prototype.getBBox=function(){var t=this,n=t.shape,i=t.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return n&&(a=n.getCanvasBBox()),i&&i.forEach(function(o){var s=o.getCanvasBBox();a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y),a.minX=Math.min(s.minX,a.minX),a.minY=Math.min(s.minY,a.minY),a.maxX=Math.max(s.maxX,a.maxX),a.maxY=Math.max(s.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},e.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,n=t.shapeType,i=t.geometry,a=t.shapeFactory,o=i.stateOption,s=a.defaultShapeType,l=a.theme[n]||a.theme[s];this.statesStyle=deepMix({},l,o)}return this.statesStyle},e.prototype.getStateStyle=function(t,n){var i=this.getStatesStyle(),a=get(i,[t,"style"],{}),o=a[n]||a;return isFunction(o)?o(this):o},e.prototype.getAnimateCfg=function(t){var n=this,i=this.animate;if(i){var a=i[t];return a&&__assign$1(__assign$1({},a),{callback:function(){var o;isFunction(a.callback)&&a.callback(),(o=n.geometry)===null||o===void 0||o.emit(GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE)}})}return null},e.prototype.drawShape=function(t,n){var i;n===void 0&&(n=!1);var a=this,o=a.shapeFactory,s=a.container,l=a.shapeType;if(this.shape=o.drawShape(l,t,s),this.shape){this.setShapeInfo(this.shape,t);var c=this.shape.cfg.name;c?isString(c)&&(this.shape.cfg.name=["element",c]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var u=n?"enter":"appear",f=this.getAnimateCfg(u);f&&((i=this.geometry)===null||i===void 0||i.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE),doAnimate(this.shape,f,{coordinate:o.coordinate,toAttrs:__assign$1({},this.shape.attr())}))}},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.setShapeInfo=function(t,n){var i=this;if(t.cfg.origin=n,t.cfg.element=this,t.isGroup()){var a=t.get("children");a.forEach(function(o){i.setShapeInfo(o,n)})}},e.prototype.syncShapeStyle=function(t,n,i,a,o){var s=this,l;if(i===void 0&&(i=[]),o===void 0&&(o=0),!(!t||!n)){var c=t.get("clipShape"),u=n.get("clipShape");if(this.syncShapeStyle(c,u,i,a),t.isGroup())for(var f=t.get("children"),d=n.get("children"),g=0;g<f.length;g++)this.syncShapeStyle(f[g],d[g],i,a,o+g);else{if(!isEmpty(i)&&!isEqual$1(i,["reset"])){var p=t.get("name");isArray$3(p)&&(p=p[1]),each$1(i,function(y){if(n.get("name")!==BACKGROUND_SHAPE){var m=s.getStateStyle(y,p||o);n.attr(m)}})}var v=getReplaceAttrs(t,n);this.animate?a?((l=this.geometry)===null||l===void 0||l.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE),doAnimate(t,a,{coordinate:this.shapeFactory.coordinate,toAttrs:v,shapeModel:this.model})):isEmpty(i)?t.attr(v):(t.stopAnimate(),t.animate(v,{duration:300})):t.attr(v)}}},e.prototype.getShapeType=function(t){var n=get(t,"shape");return isArray$3(n)?n[0]:n},e}(Base$1),GEOMETRY_LABELS_MAP={},GEOMETRY_LABELS_LAYOUT_MAP={};function getGeometryLabel(r){return GEOMETRY_LABELS_MAP[r.toLowerCase()]}function registerGeometryLabel(r,e){GEOMETRY_LABELS_MAP[r.toLowerCase()]=e}function getGeometryLabelLayout(r){return GEOMETRY_LABELS_LAYOUT_MAP[r.toLowerCase()]}function registerGeometryLabelLayout(r,e){GEOMETRY_LABELS_LAYOUT_MAP[r.toLowerCase()]=e}var ShapeFactoryBase={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(r,e){var t=this.getShape(r);return t.getPoints?t.getPoints(e):this.getDefaultPoints(e)},getShape:function(r){var e=this[r]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getDefaultStyle:function(r){return get(r,[this.defaultShapeType,"default","style"],{})},getMarker:function(r,e){var t=this.getShape(r);if(!t.getMarker){var n=this.defaultShapeType;t=this.getShape(n)}var i=this.theme,a=get(i,[r,"default"],{}),o=t.getMarker(e);return deepMix({},a,o)},drawShape:function(r,e,t){var n=this.getShape(r);return n.draw(e,t)}},ShapeBase$2={coordinate:null,parsePath:function(r){var e=this.coordinate,t=parsePathString$1(r);return e.isPolar?t=convertPolarPath(e,t):t=convertNormalPath(e,t),t},parsePoint:function(r){var e=this.coordinate;return e.convert(r)},parsePoints:function(r){var e=this.coordinate;return r.map(function(t){return e.convert(t)})},draw:function(r,e){}},ShapeFactoryMap={};function registerShapeFactory(r,e){var t=upperFirst(r),n=__assign$1(__assign$1(__assign$1({},ShapeFactoryBase),e),{geometryType:r});return ShapeFactoryMap[t]=n,n}function registerShape(r,e,t){var n=upperFirst(r),i=ShapeFactoryMap[n],a=__assign$1(__assign$1({},ShapeBase$2),t);return i[e]=a,a}function getShapeFactory(r){var e=upperFirst(r);return ShapeFactoryMap[e]}function group(r,e,t){var n,i;if(t===void 0&&(t={}),!e)return[r];var a=groupToMap(r,e),o=[];if(e.length===1&&t[e[0]]){var s=t[e[0]];try{for(var l=__values(s),c=l.next();!c.done;c=l.next()){var u=c.value,f=a["_".concat(u)];f&&o.push(f)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}else for(var d in a)if(a.hasOwnProperty(d)){var g=a[d];o.push(g)}return o}function isModelChange(r,e){return some(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!isEqual$1(r[t],e[t])})}function parseFields(r){return isArray$3(r)?r:r.split("*")}function diff(r,e){for(var t=[],n=[],i=[],a=new Map,o=0;o<e.length;o++){var s=e[o];r[s]?n.push(s):t.push(s),a.set(s,!0)}return Object.keys(r).forEach(function(l){a.has(l)||i.push(l)}),{added:t,updated:n,removed:i}}var Geometry=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var i=t.container,a=t.labelsContainer,o=t.coordinate,s=t.data,l=t.sortable,c=l===void 0?!1:l,u=t.visible,f=u===void 0?!0:u,d=t.theme,g=t.scales,p=g===void 0?{}:g,v=t.scaleDefs,y=v===void 0?{}:v,m=t.intervalPadding,x=t.dodgePadding,_=t.maxColumnWidth,S=t.minColumnWidth,A=t.columnWidthRatio,b=t.roseWidthRatio,C=t.multiplePieWidthRatio,E=t.zIndexReversed,T=t.sortZIndex,I=t.useDeferredLabel;return n.container=i,n.labelsContainer=a,n.coordinate=o,n.data=s,n.sortable=c,n.visible=f,n.userTheme=d,n.scales=p,n.scaleDefs=y,n.intervalPadding=m,n.dodgePadding=x,n.maxColumnWidth=_,n.minColumnWidth=S,n.columnWidthRatio=A,n.roseWidthRatio=b,n.multiplePieWidthRatio=C,n.zIndexReversed=E,n.sortZIndex=T,n.useDeferredLabel=I?typeof I=="number"?I:1/0:null,n}return e.prototype.position=function(t){var n=t;isPlainObject$1(t)||(n={fields:parseFields(t)});var i=get(n,"fields");return i.length===1&&(i.unshift("1"),set(n,"fields",i)),set(this.attributeOption,"position",n),this},e.prototype.color=function(t,n){return this.createAttrOption("color",t,n),this},e.prototype.shape=function(t,n){return this.createAttrOption("shape",t,n),this},e.prototype.size=function(t,n){return this.createAttrOption("size",t,n),this},e.prototype.adjust=function(t){var n=t;return(isString(t)||isPlainObject$1(t))&&(n=[t]),each$1(n,function(i,a){isObject(i)||(n[a]={type:i})}),this.adjustOption=n,this},e.prototype.style=function(t,n){if(isString(t)){var i=parseFields(t);this.styleOption={fields:i,callback:n}}else{var a=t,i=a.fields,o=a.callback,s=a.cfg;i||o||s?this.styleOption=t:this.styleOption={cfg:t}}return this},e.prototype.tooltip=function(t,n){if(isString(t)){var i=parseFields(t);this.tooltipOption={fields:i,callback:n}}else this.tooltipOption=t;return this},e.prototype.animate=function(t){return this.animateOption=t,this},e.prototype.label=function(t,n,i){if(isString(t)){var a={},o=parseFields(t);a.fields=o,isFunction(n)?a.callback=n:isPlainObject$1(n)&&(a.cfg=n),i&&(a.cfg=i),this.labelOption=a}else this.labelOption=t;return this},e.prototype.state=function(t){return this.stateOption=t,this},e.prototype.customInfo=function(t){return this.customOption=t,this},e.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},e.prototype.update=function(t){t===void 0&&(t={});var n=t.data,i=t.isDataChanged,a=t.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;isEqual$1(s,l)?n&&(i||!isEqual$1(n,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(n)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=a},e.prototype.paint=function(t){var n=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=deepMix({},getDefaultAnimateCfg(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var i=this.getOffscreenGroup();i.clear();var a=this.beforeMappingData,o=this.beforeMapping(a);this.dataArray=new Array(o.length);for(var s=0;s<o.length;s++){var l=o[s];this.dataArray[s]=this.mapping(l)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var c=this.container,u=this.type,f=this.coordinate,d=get(this.animateOption,"appear"),g=this.getYScale(),p=f.convert({x:0,y:g.scale(this.getYMinValue())});doGroupAppearAnimate(c,d,u,f,p)}if(this.labelOption){var v=this.useDeferredLabel,y=(function(){return n.renderLabels(flatten(n.dataArray),t)}).bind(this);if(typeof v=="number"){var m=typeof v=="number"&&v!==1/0?v:0;if(!window.requestIdleCallback)setTimeout(y,m);else{var x=m&&m!==1/0?{timeout:m}:void 0;window.requestIdleCallback(y,x)}}else y()}this.lastAttributeOption=__assign$1({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this,n=t.container,i=t.geometryLabel,a=t.offscreenGroup;n&&n.clear(),i&&i.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},e.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,r.prototype.destroy.call(this)},e.prototype.getGroupScales=function(){return this.groupScales},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},e.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},e.prototype.getGroupAttributes=function(){var t=[];return each$1(this.attributes,function(n){GROUP_ATTRS.includes(n.type)&&t.push(n)}),t},e.prototype.getDefaultValue=function(t){var n,i=this.getAttribute(t);return i&&isEmpty(i.scales)&&(n=i.values[0]),n},e.prototype.getAttributeValues=function(t,n){for(var i=[],a=t.scales,o=0,s=a.length;o<s;o++){var l=a[o],c=l.field;l.isIdentity?i.push(l.values):i.push(n[c])}return t.mapping.apply(t,__spreadArray$1([],__read(i),!1))},e.prototype.getAdjust=function(t){return this.adjusts[t]},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.getData=function(){return this.data},e.prototype.getShapeMarker=function(t,n){var i=this.getShapeFactory();return i.getMarker(t,n)},e.prototype.getElementsBy=function(t){return this.elements.filter(function(n){return t(n)})},e.prototype.getElements=function(){return this.elements},e.prototype.getElementId=function(t){t=isArray$3(t)?t[0]:t;var n=t[FIELD_ORIGIN];if(this.idFields.length){for(var i=n[this.idFields[0]],a=1;a<this.idFields.length;a++)i+="-"+n[this.idFields[a]];return i}var o=this.type,s=this.getXScale(),l=this.getYScale(),c=s.field||"x",u=l.field||"y",f=n[u],d;s.type==="identity"?d=s.values[0]:d=n[c];var g;o==="interval"||o==="schema"?g="".concat(d):o==="line"||o==="area"||o==="path"?g=o:g="".concat(d,"-").concat(f);for(var p=this.groupScales,a=0,v=p.length;a<v;a++){var y=p[a],m=y.field;g="".concat(g,"-").concat(n[m])}var x=this.getAdjust("dodge");if(x){var _=x.dodgeBy;_&&(g="".concat(g,"-").concat(n[_]))}return this.getAdjust("jitter")&&(g="".concat(g,"-").concat(t.x,"-").concat(t.y)),g},e.prototype.getScaleFields=function(){var t=[],n=new Map,i=this,a=i.attributeOption,o=i.labelOption,s=i.tooltipOption;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];c.fields?uniq$1(c.fields,t,n):c.values&&uniq$1(c.values,t,n)}return o&&o.fields&&uniq$1(o.fields,t,n),isObject(s)&&s.fields&&uniq$1(s.fields,t,n),t},e.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t);for(var n=this.elements,i=0,a=n.length;i<a;i++){var o=n[i];o.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},e.prototype.getFields=function(){var t=new Map,n=[];return Object.values(this.attributeOption).forEach(function(i){var a=(i==null?void 0:i.fields)||[];a.forEach(function(o){t.has(o)||n.push(o),t.set(o,!0)})},[]),n},e.prototype.getGroupFields=function(){for(var t=[],n=new Map,i=0,a=GROUP_ATTRS.length;i<a;i++){var o=GROUP_ATTRS[i],s=this.attributeOption[o];s&&s.fields&&uniq$1(s.fields,t,n)}return t},e.prototype.getXYFields=function(){var t=__read(this.attributeOption.position.fields,2),n=t[0],i=t[1];return[n,i]},e.prototype.getXField=function(){return get(this.getXYFields(),[0])},e.prototype.getYField=function(){return get(this.getXYFields(),[1])},e.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.sort=function(t){if(!this.hasSorted)for(var n=this.getXScale(),i=n.field,a=0;a<t.length;a++){var o=t[a];o.sort(function(s,l){return n.translate(s[FIELD_ORIGIN][i])-n.translate(l[FIELD_ORIGIN][i])})}this.hasSorted=!0},e.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},e.prototype.getShapeFactory=function(){var t=this.shapeType;if(getShapeFactory(t))return this.shapeFactory||(this.shapeFactory=clone(getShapeFactory(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},e.prototype.createShapePointsCfg=function(t){var n=this.getXScale(),i=this.getYScale(),a=this.normalizeValues(t[n.field],n),o;return i?o=this.normalizeValues(t[i.field],i):o=t.y?t.y:.1,{x:a,y:o,y0:i?i.scale(this.getYMinValue()):void 0}},e.prototype.createElement=function(t,n,i){i===void 0&&(i=!1);var a=this.container,o=this.getDrawCfg(t),s=this.getShapeFactory(),l=new Element$1({shapeFactory:s,container:a,offscreenGroup:this.getOffscreenGroup(),elementIndex:n});return l.animate=this.animateOption,l.geometry=this,l.draw(o,i),l},e.prototype.getDrawCfg=function(t){var n=t[FIELD_ORIGIN],i={mappingData:t,data:n,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},a=t.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),i.shape=a;var o=this.theme.geometries[this.shapeType];i.defaultStyle=get(o,[a,"default"],{}).style,!i.defaultStyle&&this.getShapeFactory()&&(i.defaultStyle=this.getShapeFactory().getDefaultStyle(o));var s=this.styleOption;return s&&(i.style=this.getStyleCfg(s,n)),this.generatePoints&&(i.points=t.points,i.nextPoints=t.nextPoints),i},e.prototype.updateElements=function(t,n){var i,a,o,s,l,c;n===void 0&&(n=!1);for(var u=new Map,f=[],d=new Map,g=0,p=0;p<t.length;p++)for(var v=t[p],y=0;y<v.length;y++){var m=v[y],x=this.getElementId(m),_=u.has(x)?"".concat(x,"-").concat(p,"-").concat(y):x;f.push(_),u.set(_,m),d.set(_,g),g++}this.elements=new Array(g);var S=diff(this.lastElementsMap,f),A=S.added,b=S.updated,C=S.removed;try{for(var E=__values(A),T=E.next();!T.done;T=E.next()){var x=T.value,m=u.get(x),p=d.get(x),I=this.createElement(m,p,n);this.elements[p]=I,this.elementsMap[x]=I,I.shape&&I.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(O){i={error:O}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}try{for(var w=__values(b),M=w.next();!M.done;M=w.next()){var x=M.value,I=this.lastElementsMap[x],m=u.get(x),$=this.getDrawCfg(m),P=I.getModel(),p=d.get(x);(this.isCoordinateChanged||isModelChange($,P))&&(I.animate=this.animateOption,I.update($)),this.elements[p]=I,this.elementsMap[x]=I,I.shape&&I.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(O){o={error:O}}finally{try{M&&!M.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}this.container&&this.container.sort();try{for(var R=__values(C),L=R.next();!L.done;L=R.next()){var x=L.value,I=this.lastElementsMap[x];I.animate=this.animateOption,I.destroy()}}catch(O){l={error:O}}finally{try{L&&!L.done&&(c=R.return)&&c.call(R)}finally{if(l)throw l.error}}},e.prototype.getLabelType=function(){var t=this,n=t.labelOption,i=t.coordinate,a=t.type,o=i.type,s=i.isTransposed,l=get(n,["cfg","type"]);return l||(o==="polar"?l=s?"pie":"polar":o==="theta"?l="pie":a==="interval"||a==="polygon"?l="interval":l="base"),l},e.prototype.getYMinValue=function(){var t=this.getYScale(),n=t.min,i=t.max,a;return n>=0?a=n:i<=0?a=i:a=0,a},e.prototype.createAttrOption=function(t,n,i){if(isNil(n)||isObject(n))isObject(n)&&isEqual$1(Object.keys(n),["values"])?set(this.attributeOption,t,{fields:n.values}):set(this.attributeOption,t,n);else{var a={};isNumber$1(n)?a.values=[n]:a.fields=parseFields(n),i&&(isFunction(i)?a.callback=i:a.values=i),set(this.attributeOption,t,a)}},e.prototype.initAttributes=function(){var t=this,n=this,i=n.attributes,a=n.attributeOption,o=n.theme,s=n.shapeType;this.groupScales=[];var l={},c=function(d){if(a.hasOwnProperty(d)){var g=a[d];if(!g)return{value:void 0};var p=__assign$1({},g),v=p.callback,y=p.values,m=p.fields,x=m===void 0?[]:m,_=x.map(function(A){var b=t.scales[A];if(!l[A]&&GROUP_ATTRS.includes(d)){var C=inferScaleType(b,get(t.scaleDefs,A),d,t.type);C==="cat"&&(t.groupScales.push(b),l[A]=!0)}return b});p.scales=_,d!=="position"&&_.length===1&&_[0].type==="identity"?p.values=_[0].values:!v&&!y&&(d==="size"?p.values=o.sizes:d==="shape"?p.values=o.shapes[s]||[]:d==="color"&&(_.length?p.values=_[0].values.length<=10?o.colors10:o.colors20:p.values=o.colors10));var S=getAttribute(d);i[d]=new S(p)}};for(var u in a){var f=c(u);if(typeof f=="object")return f.value}},e.prototype.processData=function(t){var n,i;this.hasSorted=!1;for(var a=this.getAttribute("position").scales,o=a.filter(function(C){return C.isCategory}),s=this.groupData(t),l=[],c=0,u=s.length;c<u;c++){for(var f=s[c],d=[],g=0,p=f.length;g<p;g++){var v=f[g],y={};for(var m in v)y[m]=v[m];y[FIELD_ORIGIN]=v;try{for(var x=(n=void 0,__values(o)),_=x.next();!_.done;_=x.next()){var S=_.value,A=S.field;y[A]=S.translate(y[A])}}catch(C){n={error:C}}finally{try{_&&!_.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}d.push(y)}l.push(d)}var b=this.adjustData(l);return this.beforeMappingData=b,b},e.prototype.adjustData=function(t){var n=this.adjustOption,i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.theme,l=this.maxColumnWidth||s.maxColumnWidth,c=this.minColumnWidth||s.minColumnWidth,u=this.columnWidthRatio||s.columnWidthRatio,f=t;if(n){var d=this.getXScale(),g=this.getYScale(),p=d.field,v=g?g.field:null,y=getXDimensionLength(this.coordinate),m=d.values.length,x=this.getAttribute("size"),_=void 0;x&&(_=x.values[0]);for(var S=0,A=n.length;S<A;S++){var b=n[S],C=__assign$1({xField:p,yField:v,intervalPadding:a,dodgePadding:o,xDimensionLength:y,groupNum:m,defaultSize:_,maxColumnWidth:l,minColumnWidth:c,columnWidthRatio:u},b),E=b.type;if(E==="dodge"){var T=[];if(d.isCategory||d.type==="identity")T.push("x");else if(!g)T.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");C.adjustNames=T,C.dodgeRatio=u}else if(E==="stack"){var I=this.coordinate;if(!g){C.height=I.getHeight();var w=this.getDefaultValue("size")||3;C.size=w}!I.isTransposed&&isNil(C.reverseOrder)&&(C.reverseOrder=!0)}var M=getAdjust(E);C.dimValuesMap={},d&&d.values&&(C.dimValuesMap[d.field]=d.values.map(function(P){return d.translate(P)}));var $=new M(C);f=$.process(f),this.adjusts[E]=$}}return f},e.prototype.groupData=function(t){for(var n=this.getGroupScales(),i=this.scaleDefs,a={},o=[],s=0;s<n.length;s++){var l=n[s],c=l.field;o.push(c),get(i,[c,"values"])&&(a[c]=i[c].values)}return group(t,o,a)},e.prototype.updateStackRange=function(t,n){for(var i=flatten(n),a=t.field,o=t.min,s=t.max,l=0;l<i.length;l++){var c=i[l],u=Math.min.apply(null,c[a]),f=Math.max.apply(null,c[a]);u<o&&(o=u),f>s&&(s=f)}var d=this.scaleDefs,g={};o<t.min&&!get(d,[a,"min"])&&(g.min=o),s>t.max&&!get(d,[a,"max"])&&(g.max=s),t.change(g)},e.prototype.beforeMapping=function(t){var n=t;if(this.sortable&&this.sort(n),this.generatePoints)for(var i=0,a=n.length;i<a;i++){var o=n[i];this.generateShapePoints(o);var s=n[i+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return n},e.prototype.generateShapePoints=function(t){for(var n=this.getShapeFactory(),i=this.getAttribute("shape"),a=0;a<t.length;a++){var o=t[a],s=this.createShapePointsCfg(o),l=i?this.getAttributeValues(i,o):null,c=n.getShapePoints(l,s);o.points=c}},e.prototype.normalizeValues=function(t,n){var i=[];if(isArray$3(t))for(var a=0;a<t.length;a++){var o=t[a];i.push(n.scale(o))}else i=n.scale(t);return i},e.prototype.mapping=function(t){for(var n=this.attributes,i=[],a=0;a<t.length;a++){var o=t[a],s={_origin:o[FIELD_ORIGIN],points:o.points,nextPoints:o.nextPoints};for(var l in n)if(n.hasOwnProperty(l)){var c=n[l],u=c.names,f=this.getAttributeValues(c,o);if(u.length>1)for(var d=0;d<f.length;d+=1){var g=f[d],p=u[d];s[p]=isArray$3(g)&&g.length===1?g[0]:g}else s[u[0]]=f.length===1?f[0]:f}this.convertPoint(s),i.push(s)}return i},e.prototype.convertPoint=function(t){var n=t.x,i=t.y,a,o,s,l=this.coordinate;if(isArray$3(n)&&isArray$3(i)){a=[],o=[];for(var c=0,u=0,f=n.length,d=i.length;c<f&&u<d;c+=1,u+=1)s=l.convert({x:n[c],y:i[u]}),a.push(s.x),o.push(s.y)}else if(isArray$3(i)){o=[];for(var g=0;g<i.length;g++){var p=i[g];s=l.convert({x:n,y:p}),a&&a!==s.x?(isArray$3(a)||(a=[a]),a.push(s.x)):a=s.x,o.push(s.y)}}else if(isArray$3(n)){a=[];for(var g=0;g<n.length;g++){var v=n[g];s=l.convert({x:v,y:i}),o&&o!==s.y?(isArray$3(o)||(o=[o]),o.push(s.y)):o=s.y,a.push(s.x)}}else{var y=l.convert({x:n,y:i});a=y.x,o=y.y}t.x=a,t.y=o},e.prototype.getStyleCfg=function(t,n){var i=t.fields,a=i===void 0?[]:i,o=t.callback,s=t.cfg;if(s)return s;var l=a.map(function(c){return n[c]});return o.apply(void 0,__spreadArray$1([],__read(l),!1))},e.prototype.setCfg=function(t){var n=this,i=t.coordinate,a=t.data,o=t.theme,s=t.scaleDefs;i&&(this.coordinate=i),a&&(this.data=a),s&&(this.scaleDefs=s,this.idFields=[],each$1(s,function(l,c){l&&l.key&&n.idFields.push(c)})),o&&(this.theme=this.userTheme?deepMix({},o,this.userTheme):o)},e.prototype.renderLabels=function(t,n){return n===void 0&&(n=!1),__awaiter(this,void 0,void 0,function(){var i,a,o,s,l,c,u,f,d,g,p,v,y=this;return __generator(this,function(m){switch(m.label){case 0:return i=this.geometryLabel,this.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_RENDER_LABEL),i||(a=this.getLabelType(),o=getGeometryLabel(a),i=new o(this),this.geometryLabel=i),[4,i.render(t,n)];case 1:m.sent(),s=i.labelsRenderer.shapesMap,l=new Map,each$1(s,function(x,_){for(var S=x.getChildren()||[],A=0;A<S.length;A++){var b=S[A],C=y.elementsMap[b.get("elementId")||_.split(" ")[0]];if(C){b.cfg.name=["element","label"],b.cfg.element=C;var E=l.get(C)||new Set;E.add(x),l.set(C,E)}}});try{for(c=__values(l.entries()),u=c.next();!u.done;u=c.next())f=__read(u.value,2),d=f[0],g=f[1],d.labelShape=__spreadArray$1([],__read(g),!1)}catch(x){p={error:x}}finally{try{u&&!u.done&&(v=c.return)&&v.call(c)}finally{if(p)throw p.error}}return this.emit(GEOMETRY_LIFE_CIRCLE.AFTER_RENDER_LABEL),[2]}})})},e.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(get(this.animateOption,"appear")===void 0||get(this.animateOption,"appear")&&get(this.animateOption,["appear","animation"])===void 0)},e}(Base$1),transform$4=transform$6;function translate(r,e,t){var n=transform$4(r.getMatrix(),[["t",e,t]]);r.setMatrix(n)}function getRotateMatrix(r,e){var t=r.attr(),n=t.x,i=t.y,a=transform$4(r.getMatrix(),[["t",-n,-i],["r",e],["t",n,i]]);return a}function rotate(r,e){var t=getRotateMatrix(r,e);r.setMatrix(t)}function zoom(r,e){var t=r.getBBox(),n=(t.minX+t.maxX)/2,i=(t.minY+t.maxY)/2;r.applyToMatrix([n,i,1]);var a=transform$4(r.getMatrix(),[["t",-n,-i],["s",e,e],["t",n,i]]);r.setMatrix(a)}function findLabelTextShape(r){return r.find(function(e){return e.get("type")==="text"})}function getLabelBackgroundInfo(r,e,t){t===void 0&&(t=[0,0,0,0]);var n=r&&r.getChildren()[0];if(n){var i=n.clone();e!=null&&e.rotate&&rotate(i,-e.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,c=a.height;i.destroy();var u=t;return isNil(u)?u=[2,2,2,2]:isNumber$1(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:c+u[0]+u[2],rotation:(e==null?void 0:e.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function getOverlapArea$2(r,e,t){t===void 0&&(t=0);var n=Math.max(0,Math.min(r.x+r.width+t,e.x+e.width+t)-Math.max(r.x-t,e.x-t)),i=Math.max(0,Math.min(r.y+r.height+t,e.y+e.height+t)-Math.max(r.y-t,e.y-t));return n*i}function checkShapeOverlap$2(r,e){var t=r.getBBox();return some(e,function(n){var i=n.getBBox();return getOverlapArea$2(t,i,2)>0})}function updateLabel(r,e,t){var n=t.data,i=t.origin,a=t.animateCfg,o=t.coordinate,s=get(a,"update");r.set("data",n),r.set("origin",i),r.set("animateCfg",a),r.set("coordinate",o),r.set("visible",e.get("visible")),(r.getChildren()||[]).forEach(function(l,c){var u=e.getChildByIndex(c);if(!u)r.removeChild(l),l.remove(!0);else{l.set("data",n),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var f=getReplaceAttrs(l,u);s?doAnimate(l,s,{toAttrs:f,coordinate:o}):l.attr(f),u.isGroup()&&updateLabel(l,u,t)}}),each$1(e.getChildren(),function(l,c){c>=r.getCount()&&(l.destroyed||r.add(l))})}var Labels=function(){function r(e){this.shapesMap={};var t=e.layout,n=e.container;this.layout=t,this.container=n}return r.prototype.render=function(e,t,n){return n===void 0&&(n=!1),__awaiter(this,void 0,void 0,function(){var i,a,o,s,l,c,u,f,d=this;return __generator(this,function(g){switch(g.label){case 0:if(i={},a=this.createOffscreenGroup(),!e.length)return[3,2];try{for(o=__values(e),s=o.next();!s.done;s=o.next())l=s.value,l&&(i[l.id]=this.renderLabel(l,a))}catch(p){u={error:p}}finally{try{s&&!s.done&&(f=o.return)&&f.call(o)}finally{if(u)throw u.error}}return[4,this.doLayout(e,t,i)];case 1:g.sent(),this.renderLabelLine(e,i),this.renderLabelBackground(e,i),this.adjustLabel(e,i),g.label=2;case 2:return c=this.shapesMap,each$1(i,function(p,v){if(p.destroyed)delete i[v];else{if(c[v]){var y=p.get("data"),m=p.get("origin"),x=p.get("coordinate"),_=p.get("animateCfg"),S=c[v];updateLabel(S,i[v],{data:y,origin:m,animateCfg:_,coordinate:x}),i[v]=S}else{if(d.container.destroyed)return;d.container.add(p);var A=get(p.get("animateCfg"),n?"enter":"appear");A&&doAnimate(p,A,{toAttrs:__assign$1({},p.attr()),coordinate:p.get("coordinate")})}delete c[v]}}),each$1(c,function(p){var v=get(p.get("animateCfg"),"leave");v?doAnimate(p,v,{toAttrs:null,coordinate:p.get("coordinate")}):p.remove(!0)}),this.shapesMap=i,a.destroy(),[2]}})})},r.prototype.clear=function(){this.container.clear(),this.shapesMap={}},r.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},r.prototype.renderLabel=function(e,t){var n=e.id,i=e.elementId,a=e.data,o=e.mappingData,s=e.coordinate,l=e.animate,c=e.content,u=e.capture,f={id:n,elementId:i,capture:u,data:a,origin:__assign$1(__assign$1({},o),{data:o[FIELD_ORIGIN]}),coordinate:s},d=t.addGroup(__assign$1({name:"label",animateCfg:this.animate===!1||l===null||l===!1?!1:deepMix({},this.animate,l)},f)),g;if(c.isGroup&&c.isGroup()||c.isShape&&c.isShape()){var p=c.getCanvasBBox(),v=p.width,y=p.height,m=get(e,"textAlign","left"),x=e.x,_=e.y-y/2;m==="center"?x=x-v/2:(m==="right"||m==="end")&&(x=x-v),translate(c,x,_),g=c,d.add(c)}else{var S=get(e,["style","fill"]);g=d.addShape("text",__assign$1({attrs:__assign$1(__assign$1({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:get(e,"textBaseline","middle"),text:e.content},e.style),{fill:isNull(S)?e.color:S})},f))}return e.rotate&&rotate(g,e.rotate),d},r.prototype.doLayout=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var i,a=this;return __generator(this,function(o){switch(o.label){case 0:return this.layout?(i=isArray$3(this.layout)?this.layout:[this.layout],[4,Promise.all(i.map(function(s){var l=getGeometryLabelLayout(get(s,"type",""));if(l){var c=[],u=[];return each$1(n,function(f,d){c.push(f),u.push(t[f.get("elementId")])}),l(e,c,u,a.region,s.cfg)}}))]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},r.prototype.renderLabelLine=function(e,t){each$1(e,function(n){var i=get(n,"coordinate");if(!(!n||!i)){var a=i.getCenter(),o=i.getRadius();if(n.labelLine){var s=get(n,"labelLine",{}),l=n.id,c=s.path;if(!c){var u=polarToCartesian(a.x,a.y,o,n.angle);c=[["M",u.x,u.y],["L",n.x,n.y]]}var f=t[l];f.destroyed||f.addShape("path",{capture:!1,attrs:__assign$1({path:c,stroke:n.color?n.color:get(n,["style","fill"],"#000"),fill:null},s.style),id:l,origin:n.mappingData,data:n.data,coordinate:n.coordinate})}}})},r.prototype.renderLabelBackground=function(e,t){each$1(e,function(n){var i=get(n,"coordinate"),a=get(n,"background");if(!(!a||!i)){var o=n.id,s=t[o];if(!s.destroyed){var l=s.getChildren()[0];if(l){var c=getLabelBackgroundInfo(s,n,a.padding),u=c.rotation,f=__rest(c,["rotation"]),d=s.addShape("rect",{attrs:__assign$1(__assign$1({},f),a.style||{}),id:o,origin:n.mappingData,data:n.data,coordinate:n.coordinate});if(d.setZIndex(-1),u){var g=l.getMatrix();d.setMatrix(g)}}}}})},r.prototype.createOffscreenGroup=function(){var e=this.container,t=e.getGroupBase(),n=new t({});return n},r.prototype.adjustLabel=function(e,t){each$1(e,function(n){if(n){var i=n.id,a=t[i];if(!a.destroyed){var o=a.findAll(function(s){return s.get("type")!=="path"});each$1(o,function(s){s&&(n.offsetX&&s.attr("x",s.attr("x")+n.offsetX),n.offsetY&&s.attr("y",s.attr("y")+n.offsetY))})}}})},r}();function avg(r){var e=0;return each$1(r,function(t){e+=t}),e/r.length}var GeometryLabel=function(){function r(e){this.geometry=e}return r.prototype.getLabelItems=function(e){var t=this,n=[],i=this.getLabelCfgs(e);return each$1(e,function(a,o){var s=i[o];if(!s||isNil(a.x)||isNil(a.y)){n.push(null);return}var l=isArray$3(s.content)?s.content:[s.content];s.content=l;var c=l.length;each$1(l,function(u,f){if(isNil(u)||u===""){n.push(null);return}var d=__assign$1(__assign$1({},s),t.getLabelPoint(s,a,f));d.textAlign||(d.textAlign=t.getLabelAlign(d,f,c)),d.offset<=0&&(d.labelLine=null),n.push(d)})}),n},r.prototype.render=function(e,t){return t===void 0&&(t=!1),__awaiter(this,void 0,void 0,function(){var n,i,a;return __generator(this,function(o){switch(o.label){case 0:return n=this.getLabelItems(e),i=this.getLabelsRenderer(),a=this.getGeometryShapes(),[4,i.render(n,a,t)];case 1:return o.sent(),[2]}})})},r.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},r.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},r.prototype.getCoordinate=function(){return this.geometry.coordinate},r.prototype.getDefaultLabelCfg=function(e,t){var n=this.geometry,i=n.type,a=n.theme;return i==="polygon"||i==="interval"&&t==="middle"||e<0&&!["line","point","path"].includes(i)?get(a,"innerLabels",{}):get(a,"labels",{})},r.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),i=t.type,a=t.theme,o;return i==="polygon"||e.offset<0&&!["line","point","path"].includes(i)?o=deepMix({},n,a.innerLabels,e):o=deepMix({},n,a.labels,e),o},r.prototype.setLabelPosition=function(e,t,n,i){},r.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},r.prototype.getLabelOffsetPoint=function(e,t,n){var i=e.offset,a=this.getCoordinate(),o=a.isTransposed,s=o?"x":"y",l=o?1:-1,c={x:0,y:0};return t>0||n===1?c[s]=i*l:c[s]=i*l*-1,c},r.prototype.getLabelPoint=function(e,t,n){var i=this.getCoordinate(),a=e.content.length;function o(y,m,x){x===void 0&&(x=!1);var _=y;return isArray$3(_)&&(e.content.length===1?x?_=avg(_):_.length<=2?_=_[y.length-1]:_=avg(_):_=_[m]),_}var s={content:e.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=isArray$3(t.shape)?t.shape[0]:t.shape,c=l==="funnel"||l==="pyramid";if(this.geometry.type==="polygon"){var u=getPolygonCentroid(t.x,t.y);s.x=u[0],s.y=u[1]}else this.geometry.type==="interval"&&!c?(s.x=o(t.x,n,!0),s.y=o(t.y,n)):(s.x=o(t.x,n),s.y=o(t.y,n));if(c){var f=get(t,"nextPoints"),d=get(t,"points");if(f){var g=i.convert(d[1]),p=i.convert(f[1]);s.x=(g.x+p.x)/2,s.y=(g.y+p.y)/2}else if(l==="pyramid"){var g=i.convert(d[1]),p=i.convert(d[2]);s.x=(g.x+p.x)/2,s.y=(g.y+p.y)/2}}e.position&&this.setLabelPosition(s,t,n,e.position);var v=this.getLabelOffsetPoint(e,n,a);return s.start={x:s.x,y:s.y},s.x+=v.x,s.y+=v.y,s.color=t.color,s},r.prototype.getLabelAlign=function(e,t,n){var i="center",a=this.getCoordinate();if(a.isTransposed){var o=e.offset;o<0?i="right":o===0?i="center":i="left",n>1&&t===0&&(i==="right"?i="left":i==="left"&&(i="right"))}return i},r.prototype.getLabelId=function(e){var t=this.geometry,n=t.type,i=t.getXScale(),a=t.getYScale(),o=e[FIELD_ORIGIN],s=t.getElementId(e);return n==="line"||n==="area"?s+=" ".concat(o[i.field]):n==="path"&&(s+=" ".concat(o[i.field],"-").concat(o[a.field])),s},r.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,n=e.labelOption,i=e.canvasRegion,a=e.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new Labels({container:t,layout:get(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=i,s.animate=a?getDefaultAnimateCfg("label",o):!1,s},r.prototype.getLabelCfgs=function(e){var t=this,n=this.geometry,i=n.labelOption,a=n.scales,o=n.coordinate,s=i,l=s.fields,c=s.callback,u=s.cfg,f=l.map(function(g){return a[g]}),d=[];return each$1(e,function(g,p){var v=g[FIELD_ORIGIN],y=t.getLabelText(v,f),m;if(c){var x=l.map(function(C){return v[C]});if(m=c.apply(void 0,__spreadArray$1([],__read(x),!1)),isNil(m)){d.push(null);return}}var _=__assign$1(__assign$1({id:t.getLabelId(g),elementId:t.geometry.getElementId(g),data:v,mappingData:g,coordinate:o},u),m);isFunction(_.position)&&(_.position=_.position(v,g,p));var S=t.getLabelOffset(_.offset||0),A=t.getDefaultLabelCfg(S,_.position);_=deepMix({},A,_),_.offset=t.getLabelOffset(_.offset||0);var b=_.content;isFunction(b)?_.content=b(v,g,p):isUndefined(b)&&(_.content=y[0]),d.push(_)}),d},r.prototype.getLabelText=function(e,t){var n=[];return each$1(t,function(i){var a=e[i.field];isArray$3(a)?a=a.map(function(o){return i.getText(o)}):a=i.getText(a),isNil(a)||a===""?n.push(null):n.push(a)}),n},r.prototype.getOffsetVector=function(e){e===void 0&&(e=0);var t=this.getCoordinate(),n=0;return isNumber$1(e)&&(n=e),t.isTransposed?t.applyMatrix(n,0):t.applyMatrix(0,n)},r.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return each$1(e.elementsMap,function(n,i){t[i]=n.shape}),each$1(e.getOffscreenGroup().getChildren(),function(n){var i=e.getElementId(n.get("origin").mappingData);t[i]=n}),t},r}();function getMappingValue(r,e,t){if(!r)return t;var n;if(r.callback&&r.callback.length>1){var i=Array(r.callback.length-1).fill("");n=r.mapping.apply(r,__spreadArray$1([e],__read(i),!1)).join("")}else n=r.mapping(e).join("");return n||t}var MarkerSymbols={hexagon:function(r,e,t){var n=t/2*Math.sqrt(3);return[["M",r,e-t],["L",r+n,e-t/2],["L",r+n,e+t/2],["L",r,e+t],["L",r-n,e+t/2],["L",r-n,e-t/2],["Z"]]},bowtie:function(r,e,t){var n=t-1.5;return[["M",r-t,e-n],["L",r+t,e+n],["L",r+t,e-n],["L",r-t,e+n],["Z"]]},cross:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e+t],["M",r+t,e-t],["L",r-t,e+t]]},tick:function(r,e,t){return[["M",r-t/2,e-t],["L",r+t/2,e-t],["M",r,e-t],["L",r,e+t],["M",r-t/2,e+t],["L",r+t/2,e+t]]},plus:function(r,e,t){return[["M",r-t,e],["L",r+t,e],["M",r,e-t],["L",r,e+t]]},hyphen:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},line:function(r,e,t){return[["M",r,e-t],["L",r,e+t]]}},STROKES_SYMBOLS=["line","cross","tick","plus","hyphen"];function handleUserMarkerStyle(r,e){return isFunction(e)?e(r):deepMix({},r,e)}function adpatorMarkerStyle(r,e){var t=r.symbol;if(isString(t)&&STROKES_SYMBOLS.indexOf(t)!==-1){var n=get(r,"style",{}),i=get(n,"lineWidth",1),a=n.stroke||n.fill||e;r.style=deepMix({},r.style,{lineWidth:i,stroke:a,fill:null})}}function setMarkerSymbol(r){var e=r.symbol;isString(e)&&MarkerSymbols[e]&&(r.symbol=MarkerSymbols[e])}function getLegendLayout(r){return r.startsWith(DIRECTION.LEFT)||r.startsWith(DIRECTION.RIGHT)?"vertical":"horizontal"}function getLegendItems(r,e,t,n,i){var a=t.getScale(t.type);if(a.isCategory){var o=a.field,s=e.getAttribute("color"),l=e.getAttribute("shape"),c=r.getTheme().defaultColor,u=e.coordinate.isPolar;return a.getTicks().map(function(f,d){var g,p=f.text,v=f.value,y=p,m=a.invert(v),x=r.filterFieldData(o,[(g={},g[o]=m,g)]).length===0;each$1(r.views,function(C){var E;C.filterFieldData(o,[(E={},E[o]=m,E)]).length||(x=!0)});var _=getMappingValue(s,m,c),S=getMappingValue(l,m,"point"),A=e.getShapeMarker(S,{color:_,isInPolar:u}),b=i;return isFunction(b)&&(b=b(y,d,__assign$1({name:y,value:m},deepMix({},n,A)))),A=deepMix({},n,A,omit(__assign$1({},b),["style"])),adpatorMarkerStyle(A,_),b&&b.style&&(A.style=handleUserMarkerStyle(A.style,b.style)),setMarkerSymbol(A),{id:m,name:y,value:m,marker:A,unchecked:x}})}return[]}function getCustomLegendItems(r,e,t){return t.map(function(n,i){var a=e;isFunction(a)&&(a=a(n.name,i,deepMix({},r,n)));var o=isFunction(n.marker)?n.marker(n.name,i,deepMix({},r,n)):n.marker,s=deepMix({},r,a,o);return setMarkerSymbol(s),n.marker=s,n})}function getLegendThemeCfg(r,e){var t=get(r,["components","legend"],{});return deepMix({},get(t,["common"],{}),deepMix({},get(t,[e],{})))}function isValueEmpty(r){return r?!1:r==null||isNaN(r)}function isYNil(r){if(isArray$3(r))return isValueEmpty(r[1].y);var e=r.y;return isArray$3(e)?isValueEmpty(e[0]):isValueEmpty(e)}function getPathPoints(r,e,t){if(e===void 0&&(e=!1),t===void 0&&(t=!0),!r.length||r.length===1&&!t)return[];if(e){for(var n=[],i=0,a=r.length;i<a;i++){var o=r[i];isYNil(o)||n.push(o)}return[n]}for(var s=[],l=[],i=0,a=r.length;i<a;i++){var o=r[i];isYNil(o)?l.length&&(l.length===1&&!t||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function getViolinPath(r){for(var e=[],t=0;t<r.length;t++){var n=r[t];if(n){var i=t===0?"M":"L";e.push([i,n.x,n.y])}}var a=r[0];return a&&(e.push(["L",a.x,a.y]),e.push(["z"])),e}function getSmoothViolinPath(r){for(var e=r.length/2,t=[],n=[],i=0;i<r.length;i++)i<e?t.push(r[i]):n.push(r[i]);var a=getSplinePath$1(t,!1),o=getSplinePath$1(n,!1);n.length&&a.push(["L",n[0].x,n[0].y]),o.shift();var s=a.concat(o);return t.length&&s.push(["L",t[0].x,t[0].y]),s.push(["z"]),s}function getStyle(r,e,t,n){n===void 0&&(n="");var i=r.style,a=i===void 0?{}:i,o=r.defaultStyle,s=r.color,l=r.size,c=__assign$1(__assign$1({},o),a);return s&&(e&&(a.stroke||(c.stroke=s)),t&&(a.fill||(c.fill=s))),n&&isNil(a[n])&&!isNil(l)&&(c[n]=l),c}function getBackgroundRectStyle(r){return deepMix({},{fill:"#CCD6EC",fillOpacity:.3},get(r,["background","style"]))}function splitPoints(r){var e=r.x,t=isArray$3(r.y)?r.y:[r.y];return t.map(function(n,i){return{x:isArray$3(e)?e[i]:e,y:n}})}var LineSymbols={line:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},dot:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},dash:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},smooth:function(r,e,t){return[["M",r-t,e],["A",t/2,t/2,0,1,1,r,e],["A",t/2,t/2,0,1,0,r+t,e]]},hv:function(r,e,t){return[["M",r-t-1,e-2.5],["L",r,e-2.5],["L",r,e+2.5],["L",r+t+1,e+2.5]]},vh:function(r,e,t){return[["M",r-t-1,e+2.5],["L",r,e+2.5],["L",r,e-2.5],["L",r+t+1,e-2.5]]},hvh:function(r,e,t){return[["M",r-(t+1),e+2.5],["L",r-t/2,e+2.5],["L",r-t/2,e-2.5],["L",r+t/2,e-2.5],["L",r+t/2,e+2.5],["L",r+t+1,e+2.5]]},vhv:function(r,e){return[["M",r-5,e+2.5],["L",r-5,e],["L",r,e],["L",r,e-3],["L",r,e+3],["L",r+6.5,e+3]]}};function getLineMarker(r,e){var t=r.color;return{symbol:LineSymbols[e],style:{lineWidth:2,r:6,stroke:t}}}function getShapeAttrs$1(r,e,t){for(var n=r.isStack,i=r.connectNulls,a=r.isInCircle,o=r.showSinglePoint,s=getStyle(r,!0,!1,"lineWidth"),l=getPathPoints(r.points,i,o),c=[],u=0,f=l.length;u<f;u++){var d=l[u];c=c.concat(getPath$3(d,a,n,e,t,s))}return s.path=c,s}function getSinglePath(r,e,t,n,i){if(r.length===1)return[["M",r[0].x,r[0].y-i.lineWidth/2],["L",r[0].x,r[0].y],["L",r[0].x,r[0].y+i.lineWidth/2]];var a;return t?(e&&r.length&&r.push({x:r[0].x,y:r[0].y}),a=getSplinePath$1(r,!1,n)):(a=getLinePath(r,!1),e&&a.push(["Z"])),a}function getRangePath(r,e,t,n,i,a){var o=[],s=[];each$1(r,function(u){var f=splitPoints(u);o.push(f[1]),s.push(f[0])});var l=getSinglePath(o,e,n,i,a),c=getSinglePath(s,e,n,i,a);return t?l:l.concat(c)}function getPath$3(r,e,t,n,i,a){if(r.length){var o=r[0];return isArray$3(o.y)?getRangePath(r,e,t,n,i,a):getSinglePath(r,e,n,i,a)}return[]}registerShapeFactory("line",{defaultShapeType:"line"});each$1(["line","dot","dash","smooth"],function(r){registerShape("line",r,{draw:function(e,t){var n=r==="smooth",i;if(n){var a=this.coordinate,o=a.start,s=a.end;i=[[o.x,s.y],[s.x,o.y]]}var l=getShapeAttrs$1(e,n,i),c=t.addShape({type:"path",attrs:l,name:"line",capture:!n});return c},getMarker:function(e){return getLineMarker(e,r)}})});var Util={getLegendItems,translate,rotate,zoom,transform:transform$4,getAngle:getAngle$1,getSectorPath,polarToCartesian,getDelegationObject,getTooltipItems,getMappingValue,getPath:getPath$3,getPathPoints},WHITE_COLORS={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},BLACK_COLORS={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},QUALITATIVE_10=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],QUALITATIVE_20=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],SINGLE_SEQUENCE=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],createDarkStyleSheet=function(r){r===void 0&&(r={});var e=r.paletteQualitative10,t=e===void 0?QUALITATIVE_10:e,n=r.paletteQualitative20,i=n===void 0?QUALITATIVE_20:n,a=r.brandColor,o=a===void 0?t[0]:a,s={backgroundColor:"#141414",brandColor:o,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:t,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:SINGLE_SEQUENCE,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:BLACK_COLORS[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:BLACK_COLORS[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:WHITE_COLORS[85],axisTickLineBorderColor:BLACK_COLORS[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:BLACK_COLORS[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:BLACK_COLORS[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:BLACK_COLORS[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:BLACK_COLORS[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:QUALITATIVE_10[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:BLACK_COLORS[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:BLACK_COLORS[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:BLACK_COLORS[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:BLACK_COLORS[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:BLACK_COLORS[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:BLACK_COLORS[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:WHITE_COLORS[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:WHITE_COLORS[25],annotationArcBorderColor:BLACK_COLORS[15],annotationArcBorder:1,annotationLineBorderColor:BLACK_COLORS[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:BLACK_COLORS[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:BLACK_COLORS[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:BLACK_COLORS[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:BLACK_COLORS[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:BLACK_COLORS[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:WHITE_COLORS[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:BLACK_COLORS[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:WHITE_COLORS[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:BLACK_COLORS[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:QUALITATIVE_10[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:WHITE_COLORS[100],pointBorderOpacity:1,pointActiveBorderColor:BLACK_COLORS[100],pointSelectedBorder:2,pointSelectedBorderColor:BLACK_COLORS[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:QUALITATIVE_10[0],hollowPointBorderOpacity:.95,hollowPointFillColor:WHITE_COLORS[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:BLACK_COLORS[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:BLACK_COLORS[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:QUALITATIVE_10[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:QUALITATIVE_10[0],areaFillOpacity:.25,areaActiveFillColor:QUALITATIVE_10[0],areaActiveFillOpacity:.5,areaSelectedFillColor:QUALITATIVE_10[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:QUALITATIVE_10[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:BLACK_COLORS[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:BLACK_COLORS[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:QUALITATIVE_10[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:BLACK_COLORS[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:BLACK_COLORS[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:QUALITATIVE_10[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:WHITE_COLORS[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:BLACK_COLORS[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:BLACK_COLORS[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return __assign$1(__assign$1({},s),r)},antvDark=createDarkStyleSheet();function getPixelRatio$1(){return window?window.devicePixelRatio:1}function distance$1(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function inBox(r,e,t,n,i,a){return i>=r&&i<=r+t&&a>=e&&a<=e+n}function intersectRect(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function mergeRegion(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function isSamePoint(r,e){return r[0]===e[0]&&r[1]===e[1]}var regexLG$1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG$1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexPR$1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,regexColorStop$1=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function addStop$1(r,e){var t=r.match(regexColorStop$1);each$1(t,function(n){var i=n.split(":");e.addColorStop(i[0],i[1])})}function parseLineGradient$1(r,e,t){var n=regexLG$1.exec(t),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=e.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var c=Math.tan(i),u=c*c,f=(l.x-s.x+c*(l.y-s.y))/(u+1)+s.x,d=c*(l.x-s.x+c*(l.y-s.y))/(u+1)+s.y,g=r.createLinearGradient(s.x,s.y,f,d);return addStop$1(a,g),g}function parseRadialGradient$1(r,e,t){var n=regexRG$1.exec(t),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var l=s.match(regexColorStop$1);return l[l.length-1].split(":")[1]}var c=e.getBBox(),u=c.maxX-c.minX,f=c.maxY-c.minY,d=Math.sqrt(u*u+f*f)/2,g=r.createRadialGradient(c.minX+u*i,c.minY+f*a,0,c.minX+u/2,c.minY+f/2,o*d);return addStop$1(s,g),g}function parsePattern(r,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var n,i,a=regexPR$1.exec(t),o=a[1],s=a[2];function l(){n=r.createPattern(i,o),e.set("pattern",n),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),n}function parseStyle(r,e,t){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return t;if(isString(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return parseLineGradient$1(r,e,t);if(t[0]==="r")return parseRadialGradient$1(r,e,t);if(t[0]==="p")return parsePattern(r,e,t)}return t}if(t instanceof CanvasPattern)return t}function parseRadius$2(r){var e=0,t=0,n=0,i=0;return isArray$3(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,[e,t,n,i]}function vMag(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function vRatio(r,e){return vMag(r)*vMag(e)?(r[0]*e[0]+r[1]*e[1])/(vMag(r)*vMag(e)):1}function vAngle(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(vRatio(r,e))}function getArcParams(r,e){var t=e[1],n=e[2],i=mod$1(toRadian(e[3]),Math.PI*2),a=e[4],o=e[5],s=r[0],l=r[1],c=e[6],u=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,g=f*f/(t*t)+d*d/(n*n);g>1&&(t*=Math.sqrt(g),n*=Math.sqrt(g));var p=t*t*(d*d)+n*n*(f*f),v=p?Math.sqrt((t*t*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var y=n?v*t*d/n:0,m=t?v*-n*f/t:0,x=(s+c)/2+Math.cos(i)*y-Math.sin(i)*m,_=(l+u)/2+Math.sin(i)*y+Math.cos(i)*m,S=[(f-y)/t,(d-m)/n],A=[(-1*f-y)/t,(-1*d-m)/n],b=vAngle([1,0],S),C=vAngle(S,A);return vRatio(S,A)<=-1&&(C=Math.PI),vRatio(S,A)>=1&&(C=0),o===0&&C>0&&(C=C-2*Math.PI),o===1&&C<0&&(C=C+2*Math.PI),{cx:x,cy:_,rx:isSamePoint(r,[c,u])?0:t,ry:isSamePoint(r,[c,u])?0:n,startAngle:b,endAngle:b+C,xRotation:i,arcFlag:a,sweepFlag:o}}var sin=Math.sin,cos=Math.cos,atan2=Math.atan2,PI=Math.PI;function _addDefaultArrow(r,e,t,n,i,a,o){var s=e.stroke,l=e.lineWidth,c=t-i,u=n-a,f=atan2(u,c),d=new Path$2({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*cos(PI/6)+","+10*sin(PI/6)+" L0,0 L"+10*cos(PI/6)+",-"+10*sin(PI/6),stroke:s,lineWidth:l}});d.translate(i,a),d.rotateAtPoint(i,a,f),r.set(o?"startArrowShape":"endArrowShape",d)}function _addCustomizedArrow(r,e,t,n,i,a,o){var s=e.startArrow,l=e.endArrow,c=e.stroke,u=e.lineWidth,f=o?s:l,d=f.d,g=f.fill,p=f.stroke,v=f.lineWidth,y=__rest(f,["d","fill","stroke","lineWidth"]),m=t-i,x=n-a,_=atan2(x,m);d&&(i=i-cos(_)*d,a=a-sin(_)*d);var S=new Path$2({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:__assign$1(__assign$1({},y),{stroke:p||c,lineWidth:v||u,fill:g})});S.translate(i,a),S.rotateAtPoint(i,a,_),r.set(o?"startArrowShape":"endArrowShape",S)}function getShortenOffset(r,e,t,n,i){var a=atan2(n-e,t-r);return{dx:cos(a)*i,dy:sin(a)*i}}function addStartArrow(r,e,t,n,i,a){typeof e.startArrow=="object"?_addCustomizedArrow(r,e,t,n,i,a,!0):e.startArrow?_addDefaultArrow(r,e,t,n,i,a,!0):r.set("startArrowShape",null)}function addEndArrow(r,e,t,n,i,a){typeof e.endArrow=="object"?_addCustomizedArrow(r,e,t,n,i,a,!1):e.endArrow?_addDefaultArrow(r,e,t,n,i,a,!1):r.set("startArrowShape",null)}var SHAPE_ATTRS_MAP={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function applyAttrsToContext(r,e){var t=e.attr();for(var n in t){var i=t[n],a=SHAPE_ATTRS_MAP[n]?SHAPE_ATTRS_MAP[n]:n;a==="matrix"&&i?r.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&r.setLineDash?isArray$3(i)&&r.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=parseStyle(r,e,i):a==="globalAlpha"&&(i=i*r.globalAlpha),r[a]=i)}}function drawChildren$1(r,e,t){for(var n=0;n<e.length;n++){var i=e[n];i.cfg.visible?i.draw(r,t):i.skipDraw()}}function checkRefresh(r,e,t){var n=r.get("refreshElements");each$1(n,function(i){if(i!==r)for(var a=i.cfg.parent;a&&a!==r&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===r?setChildrenRefresh(e):checkChildrenRefresh(e,t)}function checkChildrenRefresh(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&setChildrenRefresh(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&checkChildrenRefresh(n.cfg.children,e);else{var i=checkElementRefresh(n,e);n.cfg.refresh=i,i&&n.isGroup()&&checkChildrenRefresh(n.cfg.children,e)}}}function clearChanged(r){for(var e=0;e<r.length;e++){var t=r[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&clearChanged(t.cfg.children)}}function setChildrenRefresh(r,e){for(var t=0;t<r.length;t++){var n=r[t];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&setChildrenRefresh(n.get("children")))}}function checkElementRefresh(r,e){var t=r.cfg.cacheCanvasBBox,n=r.cfg.isInView&&t&&intersectRect(t,e);return n}function drawPath(r,e,t,n){var i=t.path,a=t.startArrow,o=t.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};e.beginPath();for(var u=0;u<i.length;u++){var f=i[u],d=f[0];if(u===0&&a&&a.d){var g=r.getStartTangent();c=getShortenOffset(g[0][0],g[0][1],g[1][0],g[1][1],a.d)}else if(u===i.length-2&&i[u+1][0]==="Z"&&o&&o.d){var p=i[u+1];if(p[0]==="Z"){var g=r.getEndTangent();c=getShortenOffset(g[0][0],g[0][1],g[1][0],g[1][1],o.d)}}else if(u===i.length-1&&o&&o.d&&i[0]!=="Z"){var g=r.getEndTangent();c=getShortenOffset(g[0][0],g[0][1],g[1][0],g[1][1],o.d)}var v=c.dx,y=c.dy;switch(d){case"M":e.moveTo(f[1]-v,f[2]-y),l=[f[1],f[2]];break;case"L":e.lineTo(f[1]-v,f[2]-y);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-v,f[4]-y);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-v,f[6]-y);break;case"A":{var m=void 0;n?(m=n[u],m||(m=getArcParams(s,f),n[u]=m)):m=getArcParams(s,f);var x=m.cx,_=m.cy,S=m.rx,A=m.ry,b=m.startAngle,C=m.endAngle,E=m.xRotation,T=m.sweepFlag;if(e.ellipse)e.ellipse(x,_,S,A,E,b,C,1-T);else{var I=S>A?S:A,w=S>A?1:S/A,M=S>A?A/S:1;e.translate(x,_),e.rotate(E),e.scale(w,M),e.arc(0,0,I,b,C,1-T),e.scale(1/w,1/M),e.rotate(-E),e.translate(-x,-_)}break}case"Z":e.closePath();break}if(d==="Z")s=l;else{var $=f.length;s=[f[$-2],f[$-1]]}}}}function refreshElement$1(r,e){var t=r.get("canvas");t&&(e==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(t.refreshElement(r,e,t),t.get("autoDraw")&&t.draw())))}function getRefreshRegion(r){var e;if(r.destroyed)e=r._cacheCanvasBBox;else{var t=r.get("cacheCanvasBBox"),n=t&&!!(t.width&&t.height),i=r.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?e=mergeRegion(t,i):n?e=t:a&&(e=i)}return e}function getMergedRegion(r){if(!r.length)return null;var e=[],t=[],n=[],i=[];return each$1(r,function(a){var o=getRefreshRegion(a);o&&(e.push(o.minX),t.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:min$2(e),minY:min$2(t),maxX:max$2(n),maxY:max$2(i)}}function mergeView(r,e){return!r||!e||!intersectRect(r,e)?null:{minX:Math.max(r.minX,e.minX),minY:Math.max(r.minY,e.minY),maxX:Math.min(r.maxX,e.maxX),maxY:Math.min(r.maxY,e.maxY)}}var Group$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){refreshElement$1(this,t)},e.prototype.getShapeBase=function(){return Shape$1},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,n){n&&(t.save(),applyAttrsToContext(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,n=[],i=[];each$1(t,function(d){var g=d.cfg.cacheCanvasBBox;g&&d.cfg.isInView&&(n.push(g.minX,g.maxX),i.push(g.minY,g.maxY))});var a=null;if(n.length){var o=min$2(n),s=max$2(n),l=min$2(i),c=max$2(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:c,width:s-o,height:c-l};var u=this.cfg.canvas;if(u){var f=u.getViewRange();this.set("isInView",intersectRect(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(t.save(),applyAttrsToContext(t,this),this._applyClip(t,this.getClip()),drawChildren$1(t,i,n),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(AbstractGroup),ShapeBase$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return Shape$1},e.prototype.getGroupBase=function(){return Group$1},e.prototype.onCanvasChange=function(t){refreshElement$1(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),n=this.getHitLineWidth(),i=getMethod(t),a=i(this),o=n/2,s=a.x-o,l=a.y-o,c=a.x+a.width+o,u=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+n,height:a.height+n,maxX:c,maxY:u}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,n){n&&(t.save(),applyAttrsToContext(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.draw=function(t,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!intersectRect(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),applyAttrsToContext(t,this),this._applyClip(t,i),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var n=this.getCanvasBBox(),i=intersectRect(n,t);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!isNil(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&i>0&&(!isNil(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,n,i,a,o)},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(AbstractShape),Circle$2=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=s.x,c=s.y,u=s.r,f=o/2,d=distance$1(l,c,t,n);return a&&i?d<=u+f:a?d<=u:i?d>=u-f&&d<=u+f:!1},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.r;t.beginPath(),t.arc(i,a,o,0,Math.PI*2,!1),t.closePath()},e}(ShapeBase$1);function ellipseDistance(r,e,t,n){return r/(t*t)+e/(n*n)}var Ellipse$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=o/2,c=s.x,u=s.y,f=s.rx,d=s.ry,g=(t-c)*(t-c),p=(n-u)*(n-u);return a&&i?ellipseDistance(g,p,f+l,d+l)<=1:a?ellipseDistance(g,p,f,d)<=1:i?ellipseDistance(g,p,f-l,d-l)>=1&&ellipseDistance(g,p,f+l,d+l)<=1:!1},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,c=o>s?1:o/s,u=o>s?s/o:1;t.save(),t.translate(i,a),t.scale(c,u),t.arc(0,0,l,0,Math.PI*2),t.restore(),t.closePath()}},e}(ShapeBase$1);function isCanvas(r){return r instanceof HTMLElement&&isString(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var ImageShape=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var n=this,i=this.attrs;if(isString(t)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):isCanvas(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t==="img"&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.sx,c=n.sy,u=n.swidth,f=n.sheight,d=n.img;(d instanceof Image||isCanvas(d))&&(!isNil(l)&&!isNil(c)&&!isNil(u)&&!isNil(f)?t.drawImage(d,l,c,u,f,i,a,o,s):t.drawImage(d,i,a,o,s))},e}(ShapeBase$1);function inLine(r,e,t,n,i,a,o){var s=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),u=Math.max(e,n),f=i/2;return a>=s-f&&a<=l+f&&o>=c-f&&o<=u+f?LineUtil.pointToLine(r,e,t,n,a,o)<=i/2:!1}var Line$3=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2,s=t.startArrow,l=t.endArrow;s&&addStartArrow(this,t,a,o,n,i),l&&addEndArrow(this,t,n,i,a,o)},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,c=s.y1,u=s.x2,f=s.y2;return inLine(l,c,u,f,o,t,n)},e.prototype.createPath=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.startArrow,c=n.endArrow,u={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(u=getShortenOffset(i,a,o,s,n.startArrow.d)),c&&c.d&&(f=getShortenOffset(i,a,o,s,n.endArrow.d)),t.beginPath(),t.moveTo(i+u.dx,a+u.dy),t.lineTo(o-f.dx,s-f.dy)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2;return LineUtil.length(n,i,a,o)},e.prototype.getPoint=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return LineUtil.pointAt(i,a,o,s,t)},e}(ShapeBase$1),Symbols$1={circle:function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["Z"]]},"triangle-down":function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}},Marker$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return isNil(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),n=t.x,i=t.y,a=t.symbol||"circle",o=this._getR(t),s,l;if(isFunction(a))s=a,l=s(n,i,o),l=pathToAbsolute(l);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(n,i,o)}return l},e.prototype.createPath=function(t){var n=this._getPath(),i=this.get("paramsCache");drawPath(this,t,{path:n},i)},e.Symbols=Symbols$1,e}(ShapeBase$1);function isPointInPath(r,e,t){var n=getOffScreenContext();return r.createPath(n),n.isPointInPath(e,t)}var tolerance=1e-6;function dcmp(r){return Math.abs(r)<tolerance?0:r<0?-1:1}function onSegment(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function isInPolygon(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(onSegment(o,s,[e,t]))return!0;dcmp(o[1]-t)>0!=dcmp(s[1]-t)>0&&dcmp(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function arc(r,e,t,n,i,a,o,s){var l=(Math.atan2(s-e,o-r)+Math.PI*2)%(Math.PI*2);if(l<n||l>i)return!1;var c={x:r+t*Math.cos(l),y:e+t*Math.sin(l)};return distance$1(c.x,c.y,o,s)<=a/2}var transform$3=transform$6;function hasArc(r){for(var e=!1,t=r.length,n=0;n<t;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function isPointInStroke(r,e,t,n,i){for(var a=!1,o=e/2,s=0;s<r.length;s++){var l=r[s],c=l.currentPoint,u=l.params,f=l.prePoint,d=l.box;if(!(d&&!inBox(d.x-o,d.y-o,d.width+e,d.height+e,t,n))){switch(l.command){case"L":case"Z":a=inLine(f[0],f[1],c[0],c[1],e,t,n);break;case"Q":var g=QuadUtil.pointDistance(f[0],f[1],u[1],u[2],u[3],u[4],t,n);a=g<=e/2;break;case"C":var p=CubicUtil.pointDistance(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],t,n,i);a=p<=e/2;break;case"A":var v=l.arcParams,y=v.cx,m=v.cy,x=v.rx,_=v.ry,S=v.startAngle,A=v.endAngle,b=v.xRotation,C=[t,n,1],E=x>_?x:_,T=x>_?1:x/_,I=x>_?_/x:1,w=transform$3(null,[["t",-y,-m],["r",-b],["s",1/T,1/I]]);transformMat3$1(C,C,w),a=arc(0,0,E,S,A,e,C[0],C[1]);break}if(a)break}}return a}function extractPolygons(r){for(var e=r.length,t=[],n=[],i=[],a=0;a<e;a++){var o=r[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(t.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:t,polylines:n}}const PathUtil=__assign$1({hasArc,extractPolygons,isPointInStroke},PathUtil$1);function isInPolygons(r,e,t){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=isInPolygon(a,e,t),n)break}return n}var Path$2=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t==="path"&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=pathToAbsolute(t);var n=PathUtil.hasArc(t);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=getSegments(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),n=t.startArrow,i=t.endArrow;if(n){var a=this.getStartTangent();addStartArrow(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();addEndArrow(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),c=!1;if(i){var u=this.getTotalLength();c=PathUtil.isPointInStroke(s,o,t,n,u)}if(!c&&a)if(l)c=isPointInPath(this,t,n);else{var f=this.attr("path"),d=PathUtil.extractPolygons(f);c=isInPolygons(d.polygons,t,n)||isInPolygons(d.polylines,t,n)}return c},e.prototype.createPath=function(t){var n=this.attr(),i=this.get("paramsCache");drawPath(this,t,n,i)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return isNil(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;each$1(n,function(u,f){t>=u[0]&&t<=u[1]&&(i=(t-u[0])/(u[1]-u[0]),a=f)});var s=o[a];if(isNil(s)||isNil(a))return null;var l=s.length,c=o[a+1];return CubicUtil.pointAt(s[l-2],s[l-1],c[1],c[2],c[3],c[4],c[5],c[6],i)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",PathUtil.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,n=0,i=[],a,o,s,l,c=this.get("curve");if(c){if(each$1(c,function(u,f){s=c[f+1],l=u.length,s&&(t+=CubicUtil.length(u[l-2],u[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}each$1(c,function(u,f){s=c[f+1],l=u.length,s&&(a=[],a[0]=n/t,o=CubicUtil.length(u[l-2],u[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/t,i.push(a))}),this.set("tCache",i)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),n;if(t.length>1){var i=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var t=this.getSegments(),n=t.length,i;if(n>1){var a=t[n-2].currentPoint,o=t[n-1].currentPoint,s=t[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},e}(ShapeBase$1);function inPolyline(r,e,t,n,i){var a=r.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=r[o][0],l=r[o][1],c=r[o+1][0],u=r[o+1][1];if(inLine(s,l,c,u,e,t,n))return!0}if(i){var f=r[0],d=r[a-1];if(inLine(f[0],f[1],d[0],d[1],e,t,n))return!0}return!1}var Polygon$2=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr().points,l=!1;return i&&(l=inPolyline(s,o,t,n,!0)),!l&&a&&(l=isInPolygon(s,t,n)),l},e.prototype.createPath=function(t){var n=this.attr(),i=n.points;if(!(i.length<2)){t.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(ShapeBase$1),PolyLine=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,l=i[0][0],c=i[0][1],u=i[s-1][0],f=i[s-1][1];a&&addStartArrow(this,t,i[1][0],i[1][1],l,c),o&&addEndArrow(this,t,i[s-2][0],i[s-2][1],u,f)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return inPolyline(s,o,t,n,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],c=i[0][1],u=i[s-1][0],f=i[s-1][1];if(a&&a.d){var d=getShortenOffset(l,c,i[1][0],i[1][1],a.d);l+=d.dx,c+=d.dy}if(o&&o.d){var d=getShortenOffset(i[s-2][0],i[s-2][1],u,f,o.d);u-=d.dx,f-=d.dy}t.beginPath(),t.moveTo(l,c);for(var g=0;g<s-1;g++){var p=i[g];t.lineTo(p[0],p[1])}t.lineTo(u,f)}},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return isNil(n)?(this.set("totalLength",PolylineUtil.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return each$1(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),LineUtil.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;each$1(t,function(l,c){t[c+1]&&(o=[],o[0]=i/n,s=LineUtil.length(l[0],l[1],t[c+1][0],t[c+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(ShapeBase$1);function inRect(r,e,t,n,i,a,o){var s=i/2;return inBox(r-s,e-s,t,i,a,o)||inBox(r+t-s,e-s,i,n,a,o)||inBox(r+s,e+n-s,t,i,a,o)||inBox(r-s,e+s,i,n,a,o)}function rectWithRadius(r,e,t,n,i,a,o,s){return inLine(r+i,e,r+t-i,e,a,o,s)||inLine(r+t,e+i,r+t,e+n-i,a,o,s)||inLine(r+t-i,e+n,r+i,e+n,a,o,s)||inLine(r,e+n-i,r,e+i,a,o,s)||arc(r+t-i,e+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||arc(r+t-i,e+n-i,i,0,.5*Math.PI,a,o,s)||arc(r+i,e+n-i,i,.5*Math.PI,Math.PI,a,o,s)||arc(r+i,e+i,i,Math.PI,1.5*Math.PI,a,o,s)}var Rect$2=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,n,i,a,o){var s=this.attr(),l=s.x,c=s.y,u=s.width,f=s.height,d=s.radius;if(d){var p=!1;return i&&(p=rectWithRadius(l,c,u,f,d,o,t,n)),!p&&a&&(p=isPointInPath(this,t,n)),p}else{var g=o/2;if(a&&i)return inBox(l-g,c-g,u+g,f+g,t,n);if(a)return inBox(l,c,u,f,t,n);if(i)return inRect(l,c,u,f,o,t,n)}},e.prototype.createPath=function(t){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.radius;if(t.beginPath(),l===0)t.rect(i,a,o,s);else{var c=parseRadius$2(l),u=c[0],f=c[1],d=c[2],g=c[3];t.moveTo(i+u,a),t.lineTo(i+o-f,a),f!==0&&t.arc(i+o-f,a+f,f,-Math.PI/2,0),t.lineTo(i+o,a+s-d),d!==0&&t.arc(i+o-d,a+s-d,d,0,Math.PI/2),t.lineTo(i+g,a+s),g!==0&&t.arc(i+g,a+s-g,g,Math.PI/2,Math.PI),t.lineTo(i,a+u),u!==0&&t.arc(i+u,a+u,u,Math.PI,Math.PI*1.5),t.closePath()}},e}(ShapeBase$1),Text$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=assembleFont(t)},e.prototype._setText=function(t){var n=null;isString(t)&&t.indexOf(`
`)!==-1&&(n=t.split(`
`)),this.set("textArr",n)},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,n=t.lineHeight,i=t.fontSize*1;return n?n-i:i*.14},e.prototype._drawTextArr=function(t,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,c=a.fontSize*1,u=this._getSpaceingY(),f=getTextHeight(a.text,a.fontSize,a.lineHeight),d;each$1(n,function(g,p){d=l+p*(u+c)-f+c,o==="middle"&&(d+=f-c-(f-c)/2),o==="top"&&(d+=f-c),isNil(g)||(i?t.fillText(g,s,d):t.strokeText(g,s,d))})},e.prototype._drawText=function(t,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,n);else{var l=i.text;isNil(l)||(n?t.fillText(l,a,o):t.strokeText(l,a,o))}},e.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!isNil(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!isNil(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(ShapeBase$1);function invertFromMatrix(r,e){if(e){var t=invert(e);return multiplyVec2$1(t,r)}return r}function getRefXY(r,e,t){var n=r.getTotalMatrix();if(n){var i=invertFromMatrix([e,t,1],n),a=i[0],o=i[1];return[a,o]}return[e,t]}function preTest(r,e,t){if(r.isCanvas&&r.isCanvas())return!0;if(!isAllowCapture(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var n=getRefXY(r,e,t),i=n[0],a=n[1];if(r.isClipped(i,a))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function getShape(r,e,t){if(!preTest(r,e,t))return null;for(var n=null,i=r.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=getShape(s,e,t);else if(preTest(s,e,t)){var l=s,c=getRefXY(s,e,t),u=c[0],f=c[1];l.isInShape(u,f)&&(n=s)}if(n)break}return n}var Canvas$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return Shape$1},e.prototype.getGroupBase=function(){return Group$1},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||getPixelRatio$1();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return this.set("context",n),t},e.prototype.setDOMSize=function(t,n){r.prototype.setDOMSize.call(this,t,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*n,o>1&&i.scale(o,o)},e.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(t,n){var i;return this.get("quickHit")?i=getShape(this,t,n):i=r.prototype.getShape.call(this,t,n,null),i},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),n=this.getViewRange(),i;if(t.length&&t[0]===this)i=n;else if(i=getMergedRegion(t),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=mergeView(i,n))}return i},e.prototype.refreshElement=function(t){var n=this.get("refreshElements");n.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(cancelAnimationFrame(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),n=this.get("el"),i=this.getChildren();t.clearRect(0,0,n.width,n.height),applyAttrsToContext(t,this),drawChildren$1(t,i),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),applyAttrsToContext(t,this),checkRefresh(this,i,a),drawChildren$1(t,i,a),t.restore()):n.length&&clearChanged(n),each$1(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,n=this.get("drawFrame");n||(n=requestAnimationFrame$1(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Canvas$2),version$1="0.5.12";const CanvasEngine=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:Canvas$2,AbstractGroup,AbstractShape,Base,Canvas:Canvas$1,Event:GraphEvent,Group:Group$1,PathUtil:PathUtil$1,Shape:Shape$1,assembleFont,getArcParams,getBBoxMethod:getMethod,getOffScreenContext,getTextHeight,invert,isAllowCapture,multiplyVec2:multiplyVec2$1,registerBBox:register,registerEasing,version:version$1},Symbol.toStringTag,{value:"Module"}));var SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function createSVGElement(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function createDom(r){var e=SHAPE_TO_TAGS[r.type],t=r.getParent();if(!e)throw new Error("the type "+r.type+" is not supported by svg");var n=createSVGElement(e);if(r.get("id")&&(n.id=r.get("id")),r.set("el",n),r.set("attrs",{}),t){var i=t.get("el");i||(i=t.createDom(),t.set("el",i)),i.appendChild(n)}return n}function sortDom(r,e){var t=r.get("el"),n=toArray(t.children).sort(e),i=document.createDocumentFragment();n.forEach(function(a){i.appendChild(a)}),t.appendChild(i)}function moveTo(r,e){var t=r.parentNode,n=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=n[e],a=n.indexOf(r);if(i){if(a>e)t.insertBefore(r,i);else if(a<e){var o=n[e+1];o?t.insertBefore(r,o):t.appendChild(r)}}else t.appendChild(r)}function setShadow(r,e){var t=r.cfg.el,n=r.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)t.removeAttribute("filter");else{var a=e.find("filter",i);a||(a=e.addShadow(i)),t.setAttribute("filter","url(#"+a+")")}}function setTransform(r){var e=r.attr().matrix;if(e){for(var t=r.cfg.el,n=[],i=0;i<9;i+=3)n.push(e[i]+","+e[i+1]);n=n.join(","),n.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function setClip(r,e){var t=r.getClip(),n=r.get("el");if(!t)n.removeAttribute("clip-path");else if(t&&!n.hasAttribute("clip-path")){createDom(t),t.createPath(e);var i=e.addClip(t);n.setAttribute("clip-path","url(#"+i+")")}}function drawChildren(r,e){e.forEach(function(t){t.draw(r)})}function refreshElement(r,e){var t=r.get("canvas");if(t&&t.get("autoDraw")){var n=t.get("context"),i=r.getParent(),a=i?i.getChildren():[t],o=r.get("el");if(e==="remove"){var s=r.get("isClipShape");if(s){var l=o&&o.parentNode,c=l&&l.parentNode;l&&c&&c.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")moveTo(o,a.indexOf(r));else if(e==="sort"){var u=r.get("children");u&&u.length&&sortDom(r,function(f,d){return u.indexOf(f)-u.indexOf(d)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?setTransform(r):e==="clip"?setClip(r,n):e==="attr"||e==="add"&&r.draw(n)}}var Group=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=createSVGElement("g");this.set("el",t);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,t)}},e.prototype.onCanvasChange=function(t){refreshElement(this,t)},e.prototype.getShapeBase=function(){return Shape},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),setClip(this,t),this.createPath(t),n.length&&drawChildren(t,n))},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");each$1(n||i,function(o,s){SVG_ATTR_MAP[s]&&a.setAttribute(SVG_ATTR_MAP[s],o)}),setTransform(this)},e}(AbstractGroup),ShapeBase=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,t)}},e.prototype.getShapeBase=function(){return Shape},e.prototype.getGroupBase=function(){return Group},e.prototype.onCanvasChange=function(t){refreshElement(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),n=null;if(t)n=t.getBBox();else{var i=getMethod(this.get("type"));i&&(n=i(this))}if(n){var a=n.x,o=n.y,s=n.width,l=n.height,c=this.getHitLineWidth(),u=c/2,f=a-u,d=o-u,g=a+s+u,p=o+l+u;return{x:f,y:d,minX:f,minY:d,maxX:g,maxY:p,width:s+c,height:l+c}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),n=t.fill,i=t.fillStyle;return(n||i||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),n=t.stroke,i=t.strokeStyle;return(n||i)&&this.canStroke},e.prototype.draw=function(t,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||createDom(this),setClip(this,t),this.createPath(t,n),this.shadow(t,n),this.strokeAndFill(t,n),this.transform(n))},e.prototype.createPath=function(t,n){},e.prototype.strokeAndFill=function(t,n){var i=n||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,c=i.fillOpacity,u=i.strokeOpacity,f=i.lineWidth,d=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(t,"fill",a):"fillStyle"in i&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),c&&d.setAttribute(SVG_ATTR_MAP.fillOpacity,c)),this.canStroke&&f>0&&(n?"stroke"in i?this._setColor(t,"stroke",s):"strokeStyle"in i&&this._setColor(t,"stroke",l):this._setColor(t,"stroke",s||l),u&&d.setAttribute(SVG_ATTR_MAP.strokeOpacity,u),f&&d.setAttribute(SVG_ATTR_MAP.lineWidth,f))},e.prototype._setColor=function(t,n,i){var a=this.get("el");if(!i){a.setAttribute(SVG_ATTR_MAP[n],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=t.find("gradient",i);o||(o=t.addGradient(i)),a.setAttribute(SVG_ATTR_MAP[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=t.find("pattern",i);o||(o=t.addPattern(i)),a.setAttribute(SVG_ATTR_MAP[n],"url(#"+o+")")}else a.setAttribute(SVG_ATTR_MAP[n],i)},e.prototype.shadow=function(t,n){var i=this.attr(),a=n||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,c=a.shadowColor;(o||s||l||c)&&setShadow(this,t)},e.prototype.transform=function(t){var n=this.attr(),i=(t||n).matrix;i&&setTransform(this)},e.prototype.isInShape=function(t,n){return this.isPointInPath(t,n)},e.prototype.isPointInPath=function(t,n){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,l=n+o.top,c=document.elementFromPoint(s,l);return!!(c&&c.isEqualNode(i))},e.prototype.getHitLineWidth=function(){var t=this.attrs,n=t.lineWidth,i=t.lineAppendWidth;return this.isStroke()?n+i:0},e}(AbstractShape),Circle$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");each$1(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):SVG_ATTR_MAP[s]&&a.setAttribute(SVG_ATTR_MAP[s],o)})},e}(ShapeBase),Dom=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");if(each$1(n||i,function(c,u){SVG_ATTR_MAP[u]&&a.setAttribute(SVG_ATTR_MAP[u],c)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},e}(ShapeBase),Ellipse=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");each$1(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):SVG_ATTR_MAP[s]&&a.setAttribute(SVG_ATTR_MAP[s],o)})},e}(ShapeBase),Image$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");each$1(n||a,function(s,l){l==="img"?i._setImage(a.img):SVG_ATTR_MAP[l]&&o.setAttribute(SVG_ATTR_MAP[l],s)})},e.prototype.setAttr=function(t,n){this.attrs[t]=n,t==="img"&&this._setImage(n)},e.prototype._setImage=function(t){var n=this.attr(),i=this.get("el");if(isString(t))i.setAttribute("href",t);else if(t instanceof window.Image)n.width||(i.setAttribute("width",t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",t.height),this.attr("height",t.height)),i.setAttribute("href",t.src);else if(t instanceof HTMLElement&&isString(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),n.width||(i.setAttribute("width",""+t.width),this.attr("width",t.width)),n.height||(i.setAttribute("height",""+t.height),this.attr("height",t.height)),i.setAttribute("href",a.toDataURL())}},e}(ShapeBase),Line$2=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");each$1(n||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=isObject(o)?t.addArrow(i,SVG_ATTR_MAP[s]):t.getDefaultArrow(i,SVG_ATTR_MAP[s]);a.setAttribute(SVG_ATTR_MAP[s],"url(#"+l+")")}else a.removeAttribute(SVG_ATTR_MAP[s]);else SVG_ATTR_MAP[s]&&a.setAttribute(SVG_ATTR_MAP[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,i=t.y1,a=t.x2,o=t.y2;return LineUtil.length(n,i,a,o)},e.prototype.getPoint=function(t){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return LineUtil.pointAt(i,a,o,s,t)},e}(ShapeBase),Symbols={circle:function(r,e,t){return[["M",r,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["z"]]},triangleDown:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}};const symbolsFactory={get:function(r){return Symbols[r]},register:function(r,e){Symbols[r]=e},remove:function(r){delete Symbols[r]},getAll:function(){return Symbols}};var Marker=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return isArray$3(t)?t.map(function(n){return n.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),n=t.x,i=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return isFunction(o)?s=o:s=symbolsFactory.get(o),s?s(n,i,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=symbolsFactory,e}(ShapeBase),Path$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");each$1(n||a,function(s,l){if(l==="path"&&isArray$3(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var c=isObject(s)?t.addArrow(a,SVG_ATTR_MAP[l]):t.getDefaultArrow(a,SVG_ATTR_MAP[l]);o.setAttribute(SVG_ATTR_MAP[l],"url(#"+c+")")}else o.removeAttribute(SVG_ATTR_MAP[l]);else SVG_ATTR_MAP[l]&&o.setAttribute(SVG_ATTR_MAP[l],s)})},e.prototype._formatPath=function(t){var n=t.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var n=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=n?n.getPointAtLength(t*i):null;return a?{x:a.x,y:a.y}:null},e}(ShapeBase),Polygon$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");each$1(n||i,function(o,s){s==="points"&&isArray$3(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):SVG_ATTR_MAP[s]&&a.setAttribute(SVG_ATTR_MAP[s],o)})},e}(ShapeBase),Polyline=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,n,i){r.prototype.onAttrChange.call(this,t,n,i),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,n){var i=this.attr(),a=this.get("el");each$1(n||i,function(o,s){s==="points"&&isArray$3(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):SVG_ATTR_MAP[s]&&a.setAttribute(SVG_ATTR_MAP[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return isNil(n)?(this.set("totalLength",PolylineUtil.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return each$1(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),LineUtil.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;each$1(t,function(l,c){t[c+1]&&(o=[],o[0]=i/n,s=LineUtil.length(l[0],l[1],t[c+1][0],t[c+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},e}(ShapeBase);function parseRadius$1(r){var e=0,t=0,n=0,i=0;return isArray$3(r)?r.length===1?e=t=n=i=r[0]:r.length===2?(e=n=r[0],t=i=r[1]):r.length===3?(e=r[0],t=i=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],i=r[3]):e=t=n=i=r,{r1:e,r2:t,r3:n,r4:i}}var Rect$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];each$1(n||a,function(c,u){l.indexOf(u)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(u)===-1&&SVG_ATTR_MAP[u]&&o.setAttribute(SVG_ATTR_MAP[u],c)})},e.prototype._assembleRect=function(t){var n=t.x,i=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+n+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=parseRadius$1(s);isArray$3(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var c=[["M "+(n+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return c.join(" ")},e}(ShapeBase),LETTER_SPACING=.3,BASELINE_MAP={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},BASELINE_MAP_FOR_FIREFOX={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ANCHOR_MAP={left:"left",start:"left",center:"middle",right:"end",end:"end"},Text=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return __assign$1(__assign$1({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,n){var i=this,a=this.attr(),o=this.get("el");this._setFont(),each$1(n||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?setTransform(i):SVG_ATTR_MAP[l]&&o.setAttribute(SVG_ATTR_MAP[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),n=this.attr(),i=n.textBaseline,a=n.textAlign,o=detect();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",BASELINE_MAP_FOR_FIREFOX[i]||"alphabetic"):t.setAttribute("alignment-baseline",BASELINE_MAP[i]||"baseline"),t.setAttribute("text-anchor",ANCHOR_MAP[a]||"left")},e.prototype._setText=function(t){var n=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!t)n.innerHTML="";else if(~t.indexOf(`
`)){var l=t.split(`
`),c=l.length-1,u="";each$1(l,function(f,d){d===0?s==="alphabetic"?u+='<tspan x="'+a+'" dy="'+-c+'em">'+f+"</tspan>":s==="top"?u+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?u+='<tspan x="'+a+'" dy="'+-(c-1)/2+'em">'+f+"</tspan>":s==="bottom"?u+='<tspan x="'+a+'" dy="-'+(c+LETTER_SPACING)+'em">'+f+"</tspan>":s==="hanging"&&(u+='<tspan x="'+a+'" dy="'+(-(c-1)-LETTER_SPACING)+'em">'+f+"</tspan>"):u+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),n.innerHTML=u}else n.innerHTML=t},e}(ShapeBase),regexLG=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexColorStop=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function addStop(r){var e=r.match(regexColorStop);if(!e)return"";var t="";return e.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),each$1(e,function(n){n=n.split(":"),t+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),t}function parseLineGradient(r,e){var t=regexLG.exec(r),n=mod$1(toRadian(parseFloat(t[1])),Math.PI*2),i=t[2],a,o;n>=0&&n<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(n),l=s*s,c=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,u=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",c),e.setAttribute("y2",u),e.innerHTML=addStop(i)}function parseRadialGradient(r,e){var t=regexRG.exec(r),n=parseFloat(t[1]),i=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",n),e.setAttribute("cy",i),e.setAttribute("r",a),e.innerHTML=addStop(o)}var Gradient=function(){function r(e){this.cfg={};var t=null,n=uniqueId("gradient_");return e.toLowerCase()[0]==="l"?(t=createSVGElement("linearGradient"),parseLineGradient(e,t)):(t=createSVGElement("radialGradient"),parseRadialGradient(e,t)),t.setAttribute("id",n),this.el=t,this.id=n,this.cfg=e,this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),ATTR_MAP={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},SHADOW_DIMENSION={x:"-40%",y:"-40%",width:"200%",height:"200%"},Shadow=function(){function r(e){this.type="filter",this.cfg={},this.type="filter";var t=createSVGElement("filter");return each$1(SHADOW_DIMENSION,function(n,i){t.setAttribute(i,n)}),this.el=t,this.id=uniqueId("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return r.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,i=this.cfg;return each$1(Object.keys(i),function(a){if(i[a]!==t[a])return n=!1,!1}),n},r.prototype.update=function(e,t){var n=this.cfg;return n[ATTR_MAP[e]]=t,this._parseShadow(n,this.el),this},r.prototype._parseShadow=function(e,t){var n=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=n},r}(),Arrow=function(){function r(e,t){this.cfg={};var n=createSVGElement("marker"),i=uniqueId("marker_");n.setAttribute("id",i);var a=createSVGElement("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},r.prototype._setMarker=function(e,t){var n=this.el,i=this.cfg.path,a=this.cfg.d;isArray$3(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",i),n.appendChild(t),a&&n.setAttribute("refX",""+a/e)},r.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},r}(),Clip=function(){function r(e){this.type="clip",this.cfg={};var t=createSVGElement("clipPath");this.el=t,this.id=uniqueId("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},r}(),regexPR=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Pattern=function(){function r(e){this.cfg={};var t=createSVGElement("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=createSVGElement("image");t.appendChild(n);var i=uniqueId("pattern_");t.id=i,this.el=t,this.id=i,this.cfg=e;var a=regexPR.exec(e),o=a[2];n.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),Defs=function(){function r(e){var t=createSVGElement("defs"),n=uniqueId("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return r.prototype.find=function(e,t){for(var n=this.children,i=null,a=0;a<n.length;a++)if(n[a].match(e,t)){i=n[a].id;break}return i},r.prototype.findById=function(e){for(var t=this.children,n=null,i=0;i<t.length;i++)if(t[i].id===e){n=t[i];break}return n},r.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},r.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new Arrow(e,t);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},r.prototype.addGradient=function(e){var t=new Gradient(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addArrow=function(e,t){var n=new Arrow(e,t);return this.el.appendChild(n.el),this.add(n),n.id},r.prototype.addShadow=function(e){var t=new Shadow(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addPattern=function(e){var t=new Pattern(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addClip=function(e){var t=new Clip(e);return this.el.appendChild(t.el),this.add(t),t.id},r}(),Canvas=function(r){__extends$1(e,r);function e(t){return r.call(this,__assign$1(__assign$1({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return Shape},e.prototype.getGroupBase=function(){return Group},e.prototype.getShape=function(t,n,i){var a=i.target||i.srcElement;if(!SHAPE_TO_TAGS[a.tagName]){for(var o=a.parentNode;o&&!SHAPE_TO_TAGS[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=createSVGElement("svg"),n=new Defs(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",n),t},e.prototype.onCanvasChange=function(t){var n=this.get("context"),i=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&sortDom(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(t==="clear"){if(i){i.innerHTML="";var o=n.el;o.innerHTML="",i.appendChild(o)}}else t==="matrix"?setTransform(this):t==="clip"?setClip(this,n):t==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),n=this.getChildren();setClip(this,t),n.length&&drawChildren(t,n)},e}(Canvas$2),version="0.5.6";const SVGEngine=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:Canvas$2,AbstractGroup,AbstractShape,Base,Canvas,Event:GraphEvent,Group,PathUtil:PathUtil$1,Shape,assembleFont,getBBoxMethod:getMethod,getOffScreenContext,getTextHeight,invert,isAllowCapture,multiplyVec2:multiplyVec2$1,registerBBox:register,registerEasing,version},Symbol.toStringTag,{value:"Module"}));var Path=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.type="path",n.shapeType="line";var i=t.connectNulls,a=i===void 0?!1:i,o=t.showSinglePoint,s=o===void 0?!0:o;return n.connectNulls=a,n.showSinglePoint=s,n}return e.prototype.updateElements=function(t,n){var i,a,o,s,l,c;n===void 0&&(n=!1);for(var u=new Map,f=new Map,d=[],g=0,p=0;p<t.length;p++){var v=t[p],y=this.getElementId(v);d.push(y),u.set(y,v),f.set(y,g),g++}this.elements=new Array(g);var m=diff(this.lastElementsMap,d),x=m.added,_=m.updated,S=m.removed;try{for(var A=__values(x),b=A.next();!b.done;b=A.next()){var y=b.value,v=u.get(y),C=this.getShapeFactory(),E=this.getShapeInfo(v),p=f.get(y),T=new Element$1({shapeFactory:C,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:p});T.geometry=this,T.animate=this.animateOption,T.draw(E,n),this.elementsMap[y]=T,this.elements[p]=T}}catch(R){i={error:R}}finally{try{b&&!b.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}try{for(var I=__values(_),w=I.next();!w.done;w=I.next()){var y=w.value,v=u.get(y),T=this.lastElementsMap[y],p=f.get(y),E=this.getShapeInfo(v),M=T.getModel();(this.isCoordinateChanged||isModelChange(M,E))&&(T.animate=this.animateOption,T.update(E)),this.elementsMap[y]=T,this.elements[p]=T}}catch(R){o={error:R}}finally{try{w&&!w.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}try{for(var $=__values(S),P=$.next();!P.done;P=$.next()){var y=P.value,T=this.lastElementsMap[y];T.animate=this.animateOption,T.destroy()}}catch(R){l={error:R}}finally{try{P&&!P.done&&(c=$.return)&&c.call($)}finally{if(l)throw l.error}}},e.prototype.getPointsAndData=function(t){for(var n=[],i=[],a=0,o=t.length;a<o;a++){var s=t[a];n.push({x:s.x,y:s.y}),i.push(s[FIELD_ORIGIN])}return{points:n,data:i}},e.prototype.getShapeInfo=function(t){var n=this.getDrawCfg(t[0]),i=this.getPointsAndData(t),a=i.points,o=i.data;return n.mappingData=t,n.data=o,n.isStack=!!this.getAdjust("stack"),n.points=a,n.connectNulls=this.connectNulls,n.showSinglePoint=this.showSinglePoint,n},e}(Geometry);function getPath$2(r,e,t,n,i){var a=[];if(r.length){for(var o=[],s=[],l=0,c=r.length;l<c;l++){var u=r[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),each$1([o,s],function(f,d){var g=[],p=n.parsePoints(f),v=p[0];o.length===1&&s.length===1?g=d===0?[["M",v.x-.5,v.y],["L",v.x+.5,v.y]]:[["L",v.x+.5,v.y],["L",v.x-.5,v.y]]:(e&&p.push({x:v.x,y:v.y}),t?g=getSplinePath$1(p,!1,i):g=getLinePath(p,!1),d>0&&(g[0][0]="L")),a=a.concat(g)}),a.push(["Z"])}return a}function getShapeAttrs(r,e,t,n,i){for(var a=getStyle(r,e,!e,"lineWidth"),o=r.connectNulls,s=r.isInCircle,l=r.points,c=r.showSinglePoint,u=getPathPoints(l,o,c),f=[],d=0,g=u.length;d<g;d++){var p=u[d];f=f.concat(getPath$2(p,s,t,n,i))}return a.path=f,a}function getConstraint(r){var e=r.start,t=r.end;return[[e.x,t.y],[t.x,e.y]]}registerShapeFactory("area",{defaultShapeType:"area",getDefaultPoints:function(r){var e=r.x,t=r.y0,n=isArray$3(r.y)?r.y:[t,r.y];return n.map(function(i){return{x:e,y:i}})}});registerShape("area","area",{draw:function(r,e){var t=getShapeAttrs(r,!1,!1,this),n=e.addShape({type:"path",attrs:t,name:"area"});return n},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){return i===void 0&&(i=5.5),[["M",t-i,n-4],["L",t+i,n-4],["L",t+i,n+4],["L",t-i,n+4],["Z"]]},style:{r:5,fill:e,fillOpacity:1}}}});var Area$1=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var i=t.startOnZero,a=i===void 0?!0:i,o=t.sortable,s=o===void 0?!1:o,l=t.showSinglePoint,c=l===void 0?!1:l;return n.startOnZero=a,n.sortable=s,n.showSinglePoint=c,n}return e.prototype.getPointsAndData=function(t){for(var n=[],i=[],a=0,o=t.length;a<o;a++){var s=t[a];n.push(s.points),i.push(s[FIELD_ORIGIN])}return{points:n,data:i}},e.prototype.getYMinValue=function(){if(this.startOnZero)return r.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},e}(Path);registerShapeFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(r){return splitPoints(r)}});registerShape("edge","line",{draw:function(r,e){var t=getStyle(r,!0,!1,"lineWidth"),n=getLinePath(this.parsePoints(r.points),this.coordinate.isPolar);return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var Edge=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return e}(Geometry),Heatmap=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return e.prototype.updateElements=function(t,n){for(var i=0;i<t.length;i++){var a=t[i],o=this.prepareRange(a),s=this.prepareSize(),l=get(this.styleOption,["cfg","shadowBlur"]);isNumber$1(l)||(l=s/2),this.prepareGreyScaleBlurredCircle(s,l),this.drawWithRange(a,o,s,l)}},e.prototype.color=function(t,n){return this.createAttrOption("color",t,typeof n!="function"?n:""),this},e.prototype.clear=function(){r.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},e.prototype.prepareRange=function(t){var n=this.getAttribute("color"),i=n.getFields()[0],a=1/0,o=-1/0;return t.forEach(function(s){var l=s[FIELD_ORIGIN][i];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},e.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return isNumber$1(t)||(t=this.getDefaultSize()),t},e.prototype.prepareGreyScaleBlurredCircle=function(t,n){var i=this.getGrayScaleBlurredCanvas(),a=t+n,o=i.getContext("2d");i.width=i.height=a*2,o.clearRect(0,0,i.width,i.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=n,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,t,0,Math.PI*2,!0),o.closePath(),o.fill()},e.prototype.drawWithRange=function(t,n,i,a){var o,s,l=this.coordinate,c=l.start,u=l.end,f=this.coordinate.getWidth(),d=this.coordinate.getHeight(),g=this.getAttribute("color"),p=g.getFields()[0];this.clearShadowCanvasCtx();var v=this.getShadowCanvasCtx();n&&(t=t.filter(function(I){return I[FIELD_ORIGIN][p]<=n[1]&&I[FIELD_ORIGIN][p]>=n[0]}));var y=this.scales[p];try{for(var m=__values(t),x=m.next();!x.done;x=m.next()){var _=x.value,S=this.getDrawCfg(_),A=S.x,b=S.y,C=y.scale(_[FIELD_ORIGIN][p]);this.drawGrayScaleBlurredCircle(A-c.x,b-u.y,i+a,C,v)}}catch(I){o={error:I}}finally{try{x&&!x.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}var E=v.getImageData(0,0,f,d);this.clearShadowCanvasCtx(),this.colorize(E),v.putImageData(E,0,0);var T=this.getImageShape();T.attr("x",c.x),T.attr("y",u.y),T.attr("width",f),T.attr("height",d),T.attr("img",v.canvas),T.set("origin",this.getShapeInfo(t))},e.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),n=this.coordinate;return Math.min(n.getWidth()/(t.scales[0].ticks.length*4),n.getHeight()/(t.scales[1].ticks.length*4))},e.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},e.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},e.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},e.prototype.drawGrayScaleBlurredCircle=function(t,n,i,a,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(s,t-i,n-i)},e.prototype.colorize=function(t){for(var n=this.getAttribute("color"),i=t.data,a=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if(isNumber$1(s)){var l=a[s]?a[s]:colorUtil.rgb2arr(n.gradient(s/256));i[o-3]=l[0],i[o-2]=l[1],i[o-1]=l[2],i[o]=s}}},e.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var n=this.container;return t=n.addShape({type:"image",attrs:{}}),this.imageShape=t,t},e.prototype.getShapeInfo=function(t){var n=this.getDrawCfg(t[0]),i=t.map(function(a){return a[FIELD_ORIGIN]});return __assign$1(__assign$1({},n),{mappingData:t,data:i})},e}(Geometry);function getRectPoints$1(r){var e,t,n=r.x,i=r.y,a=r.y0,o=r.size,s,l;isArray$3(i)?(e=__read(i,2),s=e[0],l=e[1]):(s=a,l=i);var c,u;isArray$3(n)?(t=__read(n,2),c=t[0],u=t[1]):(c=n-o/2,u=n+o/2);var f=[{x:c,y:s},{x:c,y:l}];return f.push({x:u,y:l},{x:u,y:s}),f}function getRectPath$1(r,e){e===void 0&&(e=!0);var t=[],n=r[0];t.push(["M",n.x,n.y]);for(var i=1,a=r.length;i<a;i++)t.push(["L",r[i].x,r[i].y]);return e&&(t.push(["L",n.x,n.y]),t.push(["z"])),t}function parseRadius(r,e){var t=0,n=0,i=0,a=0;return isArray$3(r)?r.length===1?t=n=i=a=r[0]:r.length===2?(t=i=r[0],n=a=r[1]):r.length===3?(t=r[0],n=a=r[1],i=r[2]):(t=r[0],n=r[1],i=r[2],a=r[3]):t=n=i=a=r,t+n>e&&(t=t?e/(1+n/t):0,n=e-t),i+a>e&&(i=i?e/(1+a/i):0,a=e-i),[t||0,n||0,i||0,a||0]}function getBackgroundRectPath(r,e,t){var n=[];if(t.isRect){var i=t.isTransposed?{x:t.start.x,y:e[0].y}:{x:e[0].x,y:t.start.y},a=t.isTransposed?{x:t.end.x,y:e[2].y}:{x:e[3].x,y:t.end.y},o=get(r,["background","style","radius"]);if(o){var s=t.isTransposed?Math.abs(e[0].y-e[2].y):e[2].x-e[1].x,l=t.isTransposed?t.getWidth():t.getHeight(),c=__read(parseRadius(o,Math.min(s,l)),4),u=c[0],f=c[1],d=c[2],g=c[3],p=t.isTransposed&&t.isReflect("y"),v=p?0:1,y=function(b){return p?-b:b};n.push(["M",i.x,a.y+y(u)]),u!==0&&n.push(["A",u,u,0,0,v,i.x+u,a.y]),n.push(["L",a.x-f,a.y]),f!==0&&n.push(["A",f,f,0,0,v,a.x,a.y+y(f)]),n.push(["L",a.x,i.y-y(d)]),d!==0&&n.push(["A",d,d,0,0,v,a.x-d,i.y]),n.push(["L",i.x+g,i.y]),g!==0&&n.push(["A",g,g,0,0,v,i.x,i.y-y(g)])}else n.push(["M",i.x,i.y]),n.push(["L",a.x,i.y]),n.push(["L",a.x,a.y]),n.push(["L",i.x,a.y]),n.push(["L",i.x,i.y]);n.push(["z"])}if(t.isPolar){var m=t.getCenter(),x=getAngle$1(r,t),_=x.startAngle,S=x.endAngle;if(t.type!=="theta"&&!t.isTransposed)n=getSectorPath(m.x,m.y,t.getRadius(),_,S);else{var A=function(E){return Math.pow(E,2)},u=Math.sqrt(A(m.x-e[0].x)+A(m.y-e[0].y)),f=Math.sqrt(A(m.x-e[2].x)+A(m.y-e[2].y));n=getSectorPath(m.x,m.y,u,t.startAngle,t.endAngle,f)}}return n}function getIntervalRectPath(r,e,t){var n=t.getWidth(),i=t.getHeight(),a=t.type==="rect",o=[],s=(r[2].x-r[1].x)/2,l=t.isTransposed?s*i/n:s*n/i;return e==="round"?(a?(o.push(["M",r[0].x,r[0].y+l]),o.push(["L",r[1].x,r[1].y-l]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y-l]),o.push(["L",r[3].x,r[3].y+l]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y+l])):(o.push(["M",r[0].x,r[0].y]),o.push(["L",r[1].x,r[1].y]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y]),o.push(["L",r[3].x,r[3].y]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y])),o.push(["z"])):o=getRectPath$1(r),o}function getFunnelPath(r,e,t){var n=[];return isNil(e)?t?n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",(r[2].x+r[3].x)/2,(r[2].y+r[3].y)/2],["Z"]):n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",r[2].x,r[2].y],["L",r[3].x,r[3].y],["Z"]):n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",e[1].x,e[1].y],["L",e[0].x,e[0].y],["Z"]),n}function swap$1(r,e){return[e,r]}function getRectWithCornerRadius(r,e,t){var n,i,a,o,s,l,c,u=__read(__spreadArray$1([],__read(r),!1),4),f=u[0],d=u[1],g=u[2],p=u[3],v=__read(typeof t=="number"?Array(4).fill(t):t,4),y=v[0],m=v[1],x=v[2],_=v[3];e.isTransposed&&(n=__read(swap$1(d,p),2),d=n[0],p=n[1]),e.isReflect("y")&&(i=__read(swap$1(f,d),2),f=i[0],d=i[1],a=__read(swap$1(g,p),2),g=a[0],p=a[1]),e.isReflect("x")&&(o=__read(swap$1(f,p),2),f=o[0],p=o[1],s=__read(swap$1(d,g),2),d=s[0],g=s[1]);var S=[],A=function(b){return Math.abs(b)};return l=__read(parseRadius([y,m,x,_],Math.min(A(p.x-f.x),A(d.y-f.y))).map(function(b){return A(b)}),4),y=l[0],m=l[1],x=l[2],_=l[3],e.isTransposed&&(c=__read([_,y,m,x],4),y=c[0],m=c[1],x=c[2],_=c[3]),f.y<d.y?(S.push(["M",p.x,p.y+x]),x!==0&&S.push(["A",x,x,0,0,0,p.x-x,p.y]),S.push(["L",f.x+_,f.y]),_!==0&&S.push(["A",_,_,0,0,0,f.x,f.y+_]),S.push(["L",d.x,d.y-y]),y!==0&&S.push(["A",y,y,0,0,0,d.x+y,d.y]),S.push(["L",g.x-m,g.y]),m!==0&&S.push(["A",m,m,0,0,0,g.x,g.y-m]),S.push(["L",p.x,p.y+x]),S.push(["z"])):p.x<f.x?(S.push(["M",g.x+m,g.y]),m!==0&&S.push(["A",m,m,0,0,0,g.x,g.y+m]),S.push(["L",p.x,p.y-x]),x!==0&&S.push(["A",x,x,0,0,0,p.x+x,p.y]),S.push(["L",f.x-_,f.y]),_!==0&&S.push(["A",_,_,0,0,0,f.x,f.y-_]),S.push(["L",d.x,d.y+y]),y!==0&&S.push(["A",y,y,0,0,0,d.x-y,d.y]),S.push(["L",g.x+m,g.y]),S.push(["z"])):(S.push(["M",d.x,d.y+y]),y!==0&&S.push(["A",y,y,0,0,1,d.x+y,d.y]),S.push(["L",g.x-m,g.y]),m!==0&&S.push(["A",m,m,0,0,1,g.x,g.y+m]),S.push(["L",p.x,p.y-x]),x!==0&&S.push(["A",x,x,0,0,1,p.x-x,p.y]),S.push(["L",f.x+_,f.y]),_!==0&&S.push(["A",_,_,0,0,1,f.x,f.y-_]),S.push(["L",d.x,d.y+y]),S.push(["z"])),S}registerShapeFactory("interval",{defaultShapeType:"rect",getDefaultPoints:function(r){return getRectPoints$1(r)}});registerShape("interval","rect",{draw:function(r,e){var t=getStyle(r,!1,!0),n=e,i=r==null?void 0:r.background;if(i){n=e.addGroup({name:"interval-group"});var a=getBackgroundRectStyle(r),o=getBackgroundRectPath(r,this.parsePoints(r.points),this.coordinate);n.addShape("path",{attrs:__assign$1(__assign$1({},a),{path:o}),capture:!1,zIndex:-1,name:BACKGROUND_SHAPE})}var s;t.radius&&this.coordinate.isRect?s=getRectWithCornerRadius(this.parsePoints(r.points),this.coordinate,t.radius):s=this.parsePath(getIntervalRectPath(r.points,t.lineCap,this.coordinate));var l=n.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:s}),name:"interval"});return i?n:l},getMarker:function(r){var e=r.color,t=r.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}});function findMinDistance(r,e){var t=r.length,n=r;isString(n[0])&&(n=r.map(function(s){return e.translate(s)}));for(var i=n[1]-n[0],a=2;a<t;a++){var o=n[a]-n[a-1];i>o&&(i=o)}return i}function getDodgeCount(r,e){if(e){var t=flatten(r),n=valuesOfKey(t,e);return n.length}return r.length}function getDefaultSize(r){var e=r.theme,t=r.coordinate,n=r.getXScale(),i=n.values,a=r.beforeMappingData,o=i.length,s=getXDimensionLength(r.coordinate),l=r.intervalPadding,c=r.dodgePadding,u=r.maxColumnWidth||e.maxColumnWidth,f=r.minColumnWidth||e.minColumnWidth,d=r.columnWidthRatio||e.columnWidthRatio,g=r.multiplePieWidthRatio||e.multiplePieWidthRatio,p=r.roseWidthRatio||e.roseWidthRatio;if(n.isLinear&&i.length>1){i.sort();var v=findMinDistance(i,n);o=(n.max-n.min)/v,i.length>o&&(o=i.length)}var y=n.range,m=1/o,x=1;if(t.isPolar?t.isTransposed&&o>1?x=g:x=p:(n.isLinear&&(m*=y[1]-y[0]),x=d),!isNil(l)&&l>=0){var _=l/s;m=(1-(o-1)*_)/o}else m*=x;if(r.getAdjust("dodge")){var S=r.getAdjust("dodge"),A=S.dodgeBy,b=getDodgeCount(a,A);if(!isNil(c)&&c>=0){var C=c/s;m=(m-C*(b-1))/b}else!isNil(l)&&l>=0&&(m*=x),m=m/b;m=m>=0?m:0}if(!isNil(u)&&u>=0){var E=u/s;m>E&&(m=E)}if(!isNil(f)&&f>=0){var T=f/s;m<T&&(m=T)}return m}var Interval=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var i=t.background;return n.background=i,n}return e.prototype.createShapePointsCfg=function(t){var n=r.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=getXDimensionLength(o);i=i/s}else this.defaultSize||(this.defaultSize=getDefaultSize(this)),i=this.defaultSize;return n.size=i,n},e.prototype.adjustScale=function(){r.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:getMaxScale(t)});else{var n=this.scaleDefs,i=t.field,a=t.min,o=t.max,s=t.type;s!=="time"&&(a>0&&!get(n,[i,"min"])&&t.change({min:0}),o<=0&&!get(n,[i,"max"])&&t.change({max:0}))}},e.prototype.getDrawCfg=function(t){var n=r.prototype.getDrawCfg.call(this,t);return n.background=this.background,n},e}(Geometry),Line$1=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;n.type="line";var i=t.sortable,a=i===void 0?!1:i;return n.sortable=a,n}return e}(Path),SHAPES=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],HOLLOW_SHAPES=["cross","tick","plus","hyphen","line"];function drawPoints(r,e,t,n,i){var a,o,s=getStyle(e,i,!i,"r"),l=r.parsePoints(e.points),c=l[0];if(e.isStack)c=l[1];else if(l.length>1){var u=t.addGroup();try{for(var f=__values(l),d=f.next();!d.done;d=f.next()){var g=d.value;u.addShape({type:"marker",attrs:__assign$1(__assign$1(__assign$1({},s),{symbol:MarkerSymbols[n]||n}),g)})}}catch(p){a={error:p}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}return u}return t.addShape({type:"marker",attrs:__assign$1(__assign$1(__assign$1({},s),{symbol:MarkerSymbols[n]||n}),c)})}registerShapeFactory("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(r){return splitPoints(r)}});each$1(SHAPES,function(r){registerShape("point","hollow-".concat(r),{draw:function(e,t){return drawPoints(this,e,t,r,!0)},getMarker:function(e){var t=e.color;return{symbol:MarkerSymbols[r]||r,style:{r:4.5,stroke:t,fill:null}}}})});var Point=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return e.prototype.getDrawCfg=function(t){var n=r.prototype.getDrawCfg.call(this,t);return __assign$1(__assign$1({},n),{isStack:!!this.getAdjust("stack")})},e}(Geometry);function getPath$1(r){for(var e=r[0],t=1,n=[["M",e.x,e.y]];t<r.length;){var i=r[t];(i.x!==r[t-1].x||i.y!==r[t-1].y)&&(n.push(["L",i.x,i.y]),i.x===e.x&&i.y===e.y&&t<r.length-1&&(e=r[t+1],n.push(["Z"]),n.push(["M",e.x,e.y]),t++)),t++}return isEqual$1(last(n),e)||n.push(["L",e.x,e.y]),n.push(["Z"]),n}registerShapeFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(r){var e=[];return each$1(r.x,function(t,n){var i=r.y[n];e.push({x:t,y:i})}),e}});registerShape("polygon","polygon",{draw:function(r,e){if(!isEmpty(r.points)){var t=getStyle(r,!0,!0),n=this.parsePath(getPath$1(r.points));return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n}),name:"polygon"})}},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});var Polygon=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var n=r.prototype.createShapePointsCfg.call(this,t),i=n.x,a=n.y,o;if(!(isArray$3(i)&&isArray$3(a))){var s=this.getXScale(),l=this.getYScale(),c=s.values.length,u=l.values.length,f=.5*1/c,d=.5*1/u;s.isCategory&&l.isCategory?(i=[i-f,i-f,i+f,i+f],a=[a-d,a+d,a+d,a-d]):isArray$3(i)?(o=i,i=[o[0],o[0],o[1],o[1]],a=[a-d/2,a+d/2,a+d/2,a-d/2]):isArray$3(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],i=[i-f/2,i-f/2,i+f/2,i+f/2]),n.x=i,n.y=a}return n},e}(Geometry);registerShapeFactory("schema",{defaultShapeType:""});var Schema=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var n=r.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=getXDimensionLength(o);i=i/s}else this.defaultSize||(this.defaultSize=getDefaultSize(this)),i=this.defaultSize;return n.size=i,n},e}(Geometry);function normalizeSize(r){if(!isArray$3(r))return[];var e=max$2(r);return map$2(r,function(t){return t/e})}registerShapeFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(r){var e=r.size/2,t=[],n=normalizeSize(r._size);return each$1(r.y,function(i,a){var o=n[a]*e,s=a===0,l=a===r.y.length-1;t.push({isMin:s,isMax:l,x:r.x-o,y:i}),t.unshift({isMin:s,isMax:l,x:r.x+o,y:i})}),t}});registerShape("violin","violin",{draw:function(r,e){var t=getStyle(r,!0,!0),n=this.parsePath(getViolinPath(r.points));return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n}),name:"violin"})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4,fill:e}}}});var Violin=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var n=r.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=getXDimensionLength(o);i=i/s}else this.defaultSize||(this.defaultSize=getDefaultSize(this)),i=this.defaultSize;return n.size=i,n._size=get(t[FIELD_ORIGIN],[this._sizeField]),n},e.prototype.initAttributes=function(){var t=this.attributeOption,n=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete t.size,r.prototype.initAttributes.call(this)},e}(Geometry);registerShape("area","line",{draw:function(r,e){var t=getShapeAttrs(r,!0,!1,this),n=e.addShape({type:"path",attrs:t,name:"area"});return n},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){return i===void 0&&(i=5.5),[["M",t-i,n-4],["L",t+i,n-4],["L",t+i,n+4],["L",t-i,n+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}});registerShape("area","smooth",{draw:function(r,e){var t=this.coordinate,n=getShapeAttrs(r,!1,!0,this,getConstraint(t)),i=e.addShape({type:"path",attrs:n,name:"area"});return i},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){return i===void 0&&(i=5.5),[["M",t-i,n-4],["L",t+i,n-4],["L",t+i,n+4],["L",t-i,n+4],["Z"]]},style:{r:5,fill:e,fillOpacity:1}}}});registerShape("area","smooth-line",{draw:function(r,e){var t=this.coordinate,n=getShapeAttrs(r,!0,!0,this,getConstraint(t)),i=e.addShape({type:"path",attrs:n,name:"area"});return i},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){return i===void 0&&(i=5.5),[["M",t-i,n-4],["L",t+i,n-4],["L",t+i,n+4],["L",t-i,n+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}});function getCPath(r,e){return["C",r.x*1/2+e.x*1/2,r.y,r.x*1/2+e.x*1/2,e.y,e.x,e.y]}function getQPath(r,e){var t=[];t.push({x:e.x,y:e.y}),t.push(r);var n=["Q"];return each$1(t,function(i){n.push(i.x,i.y)}),n}function getArcShapePath(r,e,t){var n=getQPath(e,t),i=[["M",r.x,r.y]];return i.push(n),i}function getArcShapeWeightPath(r,e){var t=getQPath(r[1],e),n=getQPath(r[3],e),i=[["M",r[0].x,r[0].y]];return i.push(n),i.push(["L",r[3].x,r[3].y]),i.push(["L",r[2].x,r[2].y]),i.push(t),i.push(["L",r[1].x,r[1].y]),i.push(["L",r[0].x,r[0].y]),i.push(["Z"]),i}registerShape("edge","arc",{draw:function(r,e){var t=getStyle(r,!0,!1,"lineWidth"),n=r.points,i=n.length>2?"weight":"normal",a;if(r.isInCircle){var o={x:0,y:1};return i==="normal"?a=getArcShapePath(n[0],n[1],o):(t.fill=t.stroke,a=getArcShapeWeightPath(n,o)),a=this.parsePath(a),e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:a})})}else{if(i==="normal")return n=this.parsePoints(n),a=getArcPath((n[1].x+n[0].x)/2,n[0].y,Math.abs(n[1].x-n[0].x)/2,Math.PI,Math.PI*2),e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:a})});var s=getCPath(n[1],n[3]),l=getCPath(n[2],n[0]);return a=[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],s,["L",n[3].x,n[3].y],["L",n[2].x,n[2].y],l,["Z"]],a=this.parsePath(a),t.fill=t.stroke,e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:a})})}},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});function getSmoothPath(r,e){var t=getCPath(r,e),n=[["M",r.x,r.y]];return n.push(t),n}registerShape("edge","smooth",{draw:function(r,e){var t=getStyle(r,!0,!1,"lineWidth"),n=r.points,i=this.parsePath(getSmoothPath(n[0],n[1]));return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:i})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var CORNER_PERCENT=1/3;function getVHVPath(r,e){var t=[];t.push({x:r.x,y:r.y*(1-CORNER_PERCENT)+e.y*CORNER_PERCENT}),t.push({x:e.x,y:r.y*(1-CORNER_PERCENT)+e.y*CORNER_PERCENT}),t.push(e);var n=[["M",r.x,r.y]];return each$1(t,function(i){n.push(["L",i.x,i.y])}),n}registerShape("edge","vhv",{draw:function(r,e){var t=getStyle(r,!0,!1,"lineWidth"),n=r.points,i=this.parsePath(getVHVPath(n[0],n[1]));return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:i})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});registerShape("interval","funnel",{getPoints:function(r){return r.size=r.size*2,getRectPoints$1(r)},draw:function(r,e){var t=getStyle(r,!1,!0),n=this.parsePath(getFunnelPath(r.points,r.nextPoints,!1)),i=e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n}),name:"interval"});return i},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});registerShape("interval","hollow-rect",{draw:function(r,e){var t=getStyle(r,!0,!1),n=e,i=r==null?void 0:r.background;if(i){n=e.addGroup();var a=getBackgroundRectStyle(r),o=getBackgroundRectPath(r,this.parsePoints(r.points),this.coordinate);n.addShape("path",{attrs:__assign$1(__assign$1({},a),{path:o}),capture:!1,zIndex:-1,name:BACKGROUND_SHAPE})}var s=this.parsePath(getRectPath$1(r.points)),l=n.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:s}),name:"interval"});return i?n:l},getMarker:function(r){var e=r.color,t=r.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}});function getLinePoints(r){var e=r.x,t=r.y,n=r.y0;return isArray$3(t)?t.map(function(i,a){return{x:isArray$3(e)?e[a]:e,y:i}}):[{x:e,y:n},{x:e,y:t}]}registerShape("interval","line",{getPoints:function(r){return getLinePoints(r)},draw:function(r,e){var t=getStyle(r,!0,!1,"lineWidth"),n=omit(__assign$1({},t),["fill"]),i=this.parsePath(getRectPath$1(r.points,!1)),a=e.addShape("path",{attrs:__assign$1(__assign$1({},n),{path:i}),name:"interval"});return a},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){return[["M",t,n-i],["L",t,n+i]]},style:{r:5,stroke:e}}}});registerShape("interval","pyramid",{getPoints:function(r){return r.size=r.size*2,getRectPoints$1(r)},draw:function(r,e){var t=getStyle(r,!1,!0),n=this.parsePath(getFunnelPath(r.points,r.nextPoints,!0)),i=e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n}),name:"interval"});return i},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});function getTickPoints(r){var e,t=r.x,n=r.y,i=r.y0,a=r.size,o,s;isArray$3(n)?(e=__read(n,2),o=e[0],s=e[1]):(o=i,s=n);var l=t+a/2,c=t-a/2;return[{x:t,y:o},{x:t,y:s},{x:c,y:o},{x:l,y:o},{x:c,y:s},{x:l,y:s}]}function getTickPath(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y]]}registerShape("interval","tick",{getPoints:function(r){return getTickPoints(r)},draw:function(r,e){var t=getStyle(r,!0,!1),n=this.parsePath(getTickPath(r.points)),i=e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n}),name:"interval"});return i},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){return[["M",t-i/2,n-i],["L",t+i/2,n-i],["M",t,n-i],["L",t,n+i],["M",t-i/2,n+i],["L",t+i/2,n+i]]},style:{r:5,stroke:e}}}});var interpolateCallback=function(r,e,t){var n=r.x,i=r.y,a=e.x,o=e.y,s;switch(t){case"hv":s=[{x:a,y:i}];break;case"vh":s=[{x:n,y:o}];break;case"hvh":var l=(a+n)/2;s=[{x:l,y:i},{x:l,y:o}];break;case"vhv":var c=(i+o)/2;s=[{x:n,y:c},{x:a,y:c}];break}return s};function getInterpolatePoints(r,e){var t=[];return each$1(r,function(n,i){var a=r[i+1];if(t.push(n),a){var o=interpolateCallback(n,a,e);t=t.concat(o)}}),t}function getInterpolatePath(r){return r.map(function(e,t){return t===0?["M",e.x,e.y]:["L",e.x,e.y]})}function getInterpolateShapeAttrs(r,e){var t=getPathPoints(r.points,r.connectNulls,r.showSinglePoint),n=[];return each$1(t,function(i){var a=getInterpolatePoints(i,e);n=n.concat(getInterpolatePath(a))}),__assign$1(__assign$1({},getStyle(r,!0,!1,"lineWidth")),{path:n})}each$1(["hv","vh","hvh","vhv"],function(r){registerShape("line",r,{draw:function(e,t){var n=getInterpolateShapeAttrs(e,r),i=t.addShape({type:"path",attrs:n,name:"line"});return i},getMarker:function(e){return getLineMarker(e,r)}})});each$1(HOLLOW_SHAPES,function(r){registerShape("point",r,{draw:function(e,t){return drawPoints(this,e,t,r,!0)},getMarker:function(e){var t=e.color;return{symbol:MarkerSymbols[r],style:{r:4.5,stroke:t,fill:null}}}})});registerShape("point","image",{draw:function(r,e){var t,n,i=getStyle(r,!1,!1,"r").r,a=this.parsePoints(r.points),o=a[0];if(r.isStack)o=a[1];else if(a.length>1){var s=e.addGroup();try{for(var l=__values(a),c=l.next();!c.done;c=l.next()){var u=c.value;s.addShape("image",{attrs:{x:u.x-i/2,y:u.y-i,width:i,height:i,img:r.shape[1]}})}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s}return e.addShape("image",{attrs:{x:o.x-i/2,y:o.y-i,width:i,height:i,img:r.shape[1]}})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4.5,fill:e}}}});each$1(SHAPES,function(r){registerShape("point",r,{draw:function(e,t){return drawPoints(this,e,t,r,!1)},getMarker:function(e){var t=e.color;return{symbol:MarkerSymbols[r]||r,style:{r:4.5,fill:t}}}})});function parseValue(r){var e=isArray$3(r)?r:[r],t=e[0],n=e[e.length-1],i=e.length>1?e[1]:t,a=e.length>3?e[3]:n,o=e.length>2?e[2]:i;return{min:t,max:n,min1:i,max1:a,median:o}}function getBoxPoints(r,e,t){var n=t/2,i;if(isArray$3(e)){var a=parseValue(e),o=a.min,s=a.max,l=a.median,c=a.min1,u=a.max1,f=r-n,d=r+n;i=[[f,s],[d,s],[r,s],[r,u],[f,c],[f,u],[d,u],[d,c],[r,c],[r,o],[f,o],[d,o],[f,l],[d,l]]}else{e=isNil(e)?.5:e;var g=parseValue(r),o=g.min,s=g.max,l=g.median,c=g.min1,u=g.max1,p=e-n,v=e+n;i=[[o,p],[o,v],[o,e],[c,e],[c,p],[c,v],[u,v],[u,p],[u,e],[s,e],[s,p],[s,v],[l,p],[l,v]]}return i.map(function(y){return{x:y[0],y:y[1]}})}function getBoxPath(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x,r[10].y],["L",r[11].x,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]}registerShape("schema","box",{getPoints:function(r){var e=r.x,t=r.y,n=r.size;return getBoxPoints(e,t,n)},draw:function(r,e){var t=getStyle(r,!0,!1),n=this.parsePath(getBoxPath(r.points)),i=e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n,name:"schema"})});return i},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){var a=[n-6,n-3,n,n+3,n+6],o=getBoxPoints(t,a,i);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:e}}}});function getCandleYValues(r){var e=isArray$3(r)?r:[r],t=e.sort(function(n,i){return i-n});return padEnd(t,4,t[t.length-1])}function getCandlePoints(r,e,t){var n=getCandleYValues(e);return[{x:r,y:n[0]},{x:r,y:n[1]},{x:r-t/2,y:n[2]},{x:r-t/2,y:n[1]},{x:r+t/2,y:n[1]},{x:r+t/2,y:n[2]},{x:r,y:n[2]},{x:r,y:n[3]}]}function getCandlePath(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]}registerShape("schema","candle",{getPoints:function(r){var e=r.x,t=r.y,n=r.size;return getCandlePoints(e,t,n)},draw:function(r,e){var t=getStyle(r,!0,!0),n=this.parsePath(getCandlePath(r.points)),i=e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n,name:"schema"})});return i},getMarker:function(r){var e=r.color;return{symbol:function(t,n,i){var a=[n+7.5,n+3,n-3,n-7.5],o=getCandlePoints(t,a,i);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}});function getRectAttrs(r,e){var t=Math.abs(r[0].x-r[2].x),n=Math.abs(r[0].y-r[2].y),i=Math.min(t,n);e&&(i=clamp(e,0,Math.min(t,n))),i=i/2;var a=(r[0].x+r[2].x)/2,o=(r[0].y+r[2].y)/2;return{x:a-i,y:o-i,width:i*2,height:i*2}}registerShape("polygon","square",{draw:function(r,e){if(!isEmpty(r.points)){var t=getStyle(r,!0,!0),n=this.parsePoints(r.points);return e.addShape("rect",{attrs:__assign$1(__assign$1({},t),getRectAttrs(n,r.size)),name:"polygon"})}},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});registerShape("violin","smooth",{draw:function(r,e){var t=getStyle(r,!0,!0),n=this.parsePath(getSmoothViolinPath(r.points));return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n})})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{stroke:null,r:4,fill:e}}}});registerShape("violin","hollow",{draw:function(r,e){var t=getStyle(r,!0,!1),n=this.parsePath(getViolinPath(r.points));return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n})})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:e}}}});registerShape("violin","hollow-smooth",{draw:function(r,e){var t=getStyle(r,!0,!1),n=this.parsePath(getSmoothViolinPath(r.points));return e.addShape("path",{attrs:__assign$1(__assign$1({},t),{path:n})})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:e}}}});var IntervalLabel=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelValueDir=function(t){var n="y",i=t.points;return i[0][n]<=i[2][n]?1:-1},e.prototype.getLabelOffsetPoint=function(t,n,i,a){var o,s=r.prototype.getLabelOffsetPoint.call(this,t,n,i),l=this.getCoordinate(),c=l.isTransposed,u=c?"x":"y",f=this.getLabelValueDir(t.mappingData);return s=__assign$1(__assign$1({},s),(o={},o[u]=s[u]*f,o)),l.isReflect("x")&&(s=__assign$1(__assign$1({},s),{x:s.x*-1})),l.isReflect("y")&&(s=__assign$1(__assign$1({},s),{y:s.y*-1})),s},e.prototype.getThemedLabelCfg=function(t){var n=this.geometry,i=this.getDefaultLabelCfg(),a=n.theme;return deepMix({},i,a.labels,t.position==="middle"?{offset:0}:{},t)},e.prototype.setLabelPosition=function(t,n,i,a){var o=this.getCoordinate(),s=o.isTransposed,l=n.points,c=o.convert(l[0]),u=o.convert(l[2]),f=this.getLabelValueDir(n),d,g,p,v,y=isArray$3(n.shape)?n.shape[0]:n.shape;if(y==="funnel"||y==="pyramid"){var m=get(n,"nextPoints"),x=get(n,"points");if(m){var _=o.convert(x[0]),S=o.convert(x[1]),A=o.convert(m[0]),b=o.convert(m[1]);s?(d=Math.min(A.y,_.y),p=Math.max(A.y,_.y),g=(S.x+b.x)/2,v=(_.x+A.x)/2):(d=Math.min((S.y+b.y)/2,(_.y+A.y)/2),p=Math.max((S.y+b.y)/2,(_.y+A.y)/2),g=b.x,v=_.x)}else d=Math.min(u.y,c.y),p=Math.max(u.y,c.y),g=u.x,v=c.x}else d=Math.min(u.y,c.y),p=Math.max(u.y,c.y),g=u.x,v=c.x;switch(a){case"right":t.x=g,t.y=(d+p)/2,t.textAlign=get(t,"textAlign",f>0?"left":"right");break;case"left":t.x=v,t.y=(d+p)/2,t.textAlign=get(t,"textAlign",f>0?"left":"right");break;case"bottom":s&&(t.x=(g+v)/2),t.y=p,t.textAlign=get(t,"textAlign","center"),t.textBaseline=get(t,"textBaseline",f>0?"bottom":"top");break;case"middle":s&&(t.x=(g+v)/2),t.y=(d+p)/2,t.textAlign=get(t,"textAlign","center"),t.textBaseline=get(t,"textBaseline","middle");break;case"top":s&&(t.x=(g+v)/2),t.y=d,t.textAlign=get(t,"textAlign","center"),t.textBaseline=get(t,"textBaseline",f>0?"bottom":"top");break}},e}(GeometryLabel),HALF_PI=Math.PI/2,PolarLabel=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelOffset=function(t){var n=this.getCoordinate(),i=0;if(isNumber$1(t))i=t;else if(isString(t)&&t.indexOf("%")!==-1){var a=n.getRadius();n.innerRadius>0&&(a=a*(1-n.innerRadius)),i=parseFloat(t)*.01*a}return i},e.prototype.getLabelItems=function(t){var n=r.prototype.getLabelItems.call(this,t),i=this.geometry.getYScale();return map$2(n,function(a){if(a&&i){var o=i.scale(get(a.data,i.field));return __assign$1(__assign$1({},a),{percent:o})}return a})},e.prototype.getLabelAlign=function(t){var n=this.getCoordinate(),i;if(t.labelEmit)i=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!n.isTransposed)i="center";else{var a=n.getCenter(),o=t.offset;Math.abs(t.x-a.x)<1?i="center":t.angle>Math.PI||t.angle<=0?i=o>0?"left":"right":i=o>0?"right":"left"}return i},e.prototype.getLabelPoint=function(t,n,i){var a=1,o,s=t.content[i];this.isToMiddle(n)?o=this.getMiddlePoint(n.points):(t.content.length===1&&i===0?i=1:i===0&&(a=-1),o=this.getArcPoint(n,i));var l=t.offset*a,c=this.getPointAngle(o),u=t.labelEmit,f=this.getCirclePoint(c,l,o,u);return f.r===0?f.content="":(f.content=s,f.angle=c,f.color=n.color),f.rotate=t.autoRotate?this.getLabelRotate(c,l,u):t.rotate,f.start={x:o.x,y:o.y},f},e.prototype.getArcPoint=function(t,n){return n===void 0&&(n=0),!isArray$3(t.x)&&!isArray$3(t.y)?{x:t.x,y:t.y}:{x:isArray$3(t.x)?t.x[n]:t.x,y:isArray$3(t.y)?t.y[n]:t.y}},e.prototype.getPointAngle=function(t){return getAngleByPoint(this.getCoordinate(),t)},e.prototype.getCirclePoint=function(t,n,i,a){var o=this.getCoordinate(),s=o.getCenter(),l=getDistanceToCenter(o,i);if(l===0)return __assign$1(__assign$1({},s),{r:l});var c=t;if(o.isTransposed&&l>n&&!a){var u=Math.asin(n/(2*l));c=t+u*2}else l=l+n;return{x:s.x+l*Math.cos(c),y:s.y+l*Math.sin(c),r:l}},e.prototype.getLabelRotate=function(t,n,i){var a=t+HALF_PI;return i&&(a-=HALF_PI),a&&(a>HALF_PI?a=a-Math.PI:a<-HALF_PI&&(a=a+Math.PI)),a},e.prototype.getMiddlePoint=function(t){var n=this.getCoordinate(),i=t.length,a={x:0,y:0};return each$1(t,function(o){a.x+=o.x,a.y+=o.y}),a.x/=i,a.y/=i,a=n.convert(a),a},e.prototype.isToMiddle=function(t){return t.x.length>2},e}(GeometryLabel),PieLabel=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return e.prototype.getDefaultLabelCfg=function(t,n){var i=r.prototype.getDefaultLabelCfg.call(this,t,n);return deepMix({},i,get(this.geometry.theme,"pieLabels",{}))},e.prototype.getLabelOffset=function(t){return r.prototype.getLabelOffset.call(this,t)||0},e.prototype.getLabelRotate=function(t,n,i){var a;return n<0&&(a=t,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},e.prototype.getLabelAlign=function(t){var n=this.getCoordinate(),i=n.getCenter(),a;return t.angle<=Math.PI/2&&t.x>=i.x?a="left":a="right",t.offset<=0&&(a==="right"?a="left":a="right"),a},e.prototype.getArcPoint=function(t){return t},e.prototype.getPointAngle=function(t){var n=this.getCoordinate(),i={x:isArray$3(t.x)?t.x[0]:t.x,y:t.y[0]},a={x:isArray$3(t.x)?t.x[1]:t.x,y:t.y[1]},o,s=getAngleByPoint(n,i);if(t.points&&t.points[0].y===t.points[1].y)o=s;else{var l=getAngleByPoint(n,a);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},e.prototype.getCirclePoint=function(t,n){var i=this.getCoordinate(),a=i.getCenter(),o=i.getRadius()+n;return __assign$1(__assign$1({},polarToCartesian(a.x,a.y,o,t)),{angle:t,r:o})},e}(PolarLabel),MARGIN$1=4;function antiCollision$1(r,e,t,n,i,a){var o,s,l=!0,c=n.start,u=n.end,f=Math.min(c.y,u.y),d=Math.abs(c.y-u.y),g,p=0,v=Number.MIN_VALUE,y=e.map(function(C){return C.y>p&&(p=C.y),C.y<v&&(v=C.y),{size:t,targets:[C.y-f]}});for(v-=f,p-f>d&&(d=p-f);l;)for(y.forEach(function(C){var E=(Math.min.apply(v,C.targets)+Math.max.apply(v,C.targets))/2;C.pos=Math.min(Math.max(v,E-C.size/2),d-C.size)}),l=!1,g=y.length;g--;)if(g>0){var m=y[g-1],x=y[g];m.pos+m.size>x.pos&&(m.size+=x.size,m.targets=m.targets.concat(x.targets),m.pos+m.size>d&&(m.pos=d-m.size),y.splice(g,1),l=!0)}g=0,y.forEach(function(C){var E=f+t/2;C.targets.forEach(function(){e[g].y=C.pos+E,E+=t,g++})});var _={};try{for(var S=__values(r),A=S.next();!A.done;A=S.next()){var b=A.value;_[b.get("id")]=b}}catch(C){o={error:C}}finally{try{A&&!A.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}e.forEach(function(C){var E=C.r*C.r,T=Math.pow(Math.abs(C.y-i.y),2);if(E<T)C.x=i.x;else{var I=Math.sqrt(E-T);a?C.x=i.x+I:C.x=i.x-I}var w=_[C.id];w.attr("x",C.x),w.attr("y",C.y);var M=find$1(w.getChildren(),function($){return $.get("type")==="text"});M&&(M.attr("y",C.y),M.attr("x",C.x))})}function distribute(r,e,t,n){if(!(!r.length||!e.length)){var i=r[0]?r[0].offset:0,a=e[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=14,c=o+i,u=c*2+l*2,f={start:a.start,end:a.end},d=[[],[]];r.forEach(function(g){g&&(g.textAlign==="right"?d[0].push(g):d[1].push(g))}),d.forEach(function(g,p){var v=u/l;g.length>v&&(g.sort(function(y,m){return m["..percent"]-y["..percent"]}),g.splice(v,g.length-v)),g.sort(function(y,m){return y.y-m.y}),antiCollision$1(e,g,l,f,s,p)})}each$1(r,function(g){if(g&&g.labelLine){var p=g.offset,v=g.angle,y=polarToCartesian(s.x,s.y,o,v),m=polarToCartesian(s.x,s.y,o+p/2,v),x=g.x+get(g,"offsetX",0),_=g.y+get(g,"offsetY",0),S={x:x-Math.cos(v)*MARGIN$1,y:_-Math.sin(v)*MARGIN$1};isObject(g.labelLine)||(g.labelLine={}),g.labelLine.path=["M ".concat(y.x),"".concat(y.y," Q").concat(m.x),"".concat(m.y," ").concat(S.x),S.y].join(",")}})}}function antiCollision(r,e,t){var n=r.filter(function(p){return!p.invisible});n.sort(function(p,v){return p.y-v.y});var i=!0,a=t.minY,o=t.maxY,s=Math.abs(a-o),l,c=0,u=Number.MIN_VALUE,f=n.map(function(p){return p.y>c&&(c=p.y),p.y<u&&(u=p.y),{content:p.content,size:e,targets:[p.y-a],pos:null}});for(u-=a,c-a>s&&(s=c-a);i;)for(f.forEach(function(p){var v=(Math.min.apply(u,p.targets)+Math.max.apply(u,p.targets))/2;p.pos=Math.min(Math.max(u,v-p.size/2),s-p.size),p.pos=Math.max(0,p.pos)}),i=!1,l=f.length;l--;)if(l>0){var d=f[l-1],g=f[l];d.pos+d.size>g.pos&&(d.size+=g.size,d.targets=d.targets.concat(g.targets),d.pos+d.size>s&&(d.pos=s-d.size),f.splice(l,1),i=!0)}l=0,f.forEach(function(p){var v=a+e/2;p.targets.forEach(function(){n[l].y=p.pos+v,v+=e,l++})})}var MARGIN=4;function drawLabelline$1(r,e){var t=e.getCenter(),n=e.getRadius();if(r&&r.labelLine){var i=r.angle,a=r.offset,o=polarToCartesian(t.x,t.y,n,i),s=r.x+get(r,"offsetX",0)*(Math.cos(i)>0?1:-1),l=r.y+get(r,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:s-Math.cos(i)*MARGIN,y:l-Math.sin(i)*MARGIN},u=r.labelLine.smooth,f=[],d=c.x-t.x,g=c.y-t.y,p=Math.atan(g/d);if(d<0&&(p+=Math.PI),u===!1){isObject(r.labelLine)||(r.labelLine={});var v=0;(i<0&&i>-Math.PI/2||i>Math.PI*1.5)&&c.y>o.y&&(v=1),i>=0&&i<Math.PI/2&&c.y>o.y&&(v=1),i>=Math.PI/2&&i<Math.PI&&o.y>c.y&&(v=1),(i<-Math.PI/2||i>=Math.PI&&i<Math.PI*1.5)&&o.y>c.y&&(v=1);var y=a/2>4?4:Math.max(a/2-1,0),m=polarToCartesian(t.x,t.y,n+y,i),x=polarToCartesian(t.x,t.y,n+a/2,p),_=0;f.push("M ".concat(o.x," ").concat(o.y)),f.push("L ".concat(m.x," ").concat(m.y)),f.push("A ".concat(t.x," ").concat(t.y," 0 ").concat(_," ").concat(v," ").concat(x.x," ").concat(x.y)),f.push("L ".concat(c.x," ").concat(c.y))}else{var m=polarToCartesian(t.x,t.y,n+(a/2>4?4:Math.max(a/2-1,0)),i),S=o.x<t.x?1:-1;f.push("M ".concat(c.x," ").concat(c.y));var A=(o.y-t.y)/(o.x-t.x),b=(c.y-t.y)/(c.x-t.x);Math.abs(A-b)>Math.pow(Math.E,-16)&&f.push.apply(f,["C",c.x+S*4,c.y,2*m.x-o.x,2*m.y-o.y,o.x,o.y]),f.push("L ".concat(o.x," ").concat(o.y))}r.labelLine.path=f.join(" ")}}function pieOuterLabelLayout(r,e,t,n){var i,a,o=filter(r,function(E){return!isNil(E)}),s=e[0]&&e[0].get("coordinate");if(s){var l=s.getCenter(),c=s.getRadius(),u={};try{for(var f=__values(e),d=f.next();!d.done;d=f.next()){var g=d.value;u[g.get("id")]=g}}catch(E){i={error:E}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var p=get(o[0],"labelHeight",14),v=get(o[0],"offset",0);if(!(v<=0)){var y="left",m="right",x=groupBy(o,function(E){return E.x<l.x?y:m}),_=s.start,S=s.end,A=Math.min((c+v+p)*2,s.getHeight()),b=A/2,C={minX:_.x,maxX:S.x,minY:l.y-b,maxY:l.y+b};each$1(x,function(E,T){var I=Math.floor(A/p);E.length>I&&(E.sort(function(w,M){return M.percent-w.percent}),each$1(E,function(w,M){M+1>I&&(u[w.id].set("visible",!1),w.invisible=!0)})),antiCollision(E,p,C)}),each$1(x,function(E,T){each$1(E,function(I){var w=T===m,M=u[I.id],$=M.getChildByIndex(0);if($){var P=c+v,R=I.y-l.y,L=Math.pow(P,2),O=Math.pow(R,2),k=L-O>0?L-O:0,B=Math.sqrt(k),N=Math.abs(Math.cos(I.angle)*P);w?I.x=l.x+Math.max(B,N):I.x=l.x-Math.max(B,N)}$&&($.attr("y",I.y),$.attr("x",I.x)),drawLabelline$1(I,s)})})}}}var INFLECTION_OFFSET=4,LABEL_OFFSET_X=4,LABEL_TEXT_LINE_OFFSET=4;function drawLabelline(r,e,t){var n=e.getCenter(),i=e.getRadius(),a={x:r.x-(t?LABEL_TEXT_LINE_OFFSET:-LABEL_TEXT_LINE_OFFSET),y:r.y},o=polarToCartesian(n.x,n.y,i+INFLECTION_OFFSET,r.angle),s={x:a.x,y:a.y},l={x:o.x,y:o.y},c=polarToCartesian(n.x,n.y,i,r.angle),u="";if(a.y!==o.y){var f=t?4:-4;s.y=a.y,r.angle<0&&r.angle>=-Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),r.angle>0&&r.angle<Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),r.angle>Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f))),r.angle<-Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f)))}u=["M ".concat(a.x,",").concat(a.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(o.x,",").concat(o.y),"L ".concat(c.x,",").concat(c.y)].join(" "),r.labelLine=deepMix({},r.labelLine,{path:u})}function pieSpiderLabelLayout(r,e,t,n){var i,a,o=e[0]&&e[0].get("coordinate");if(o){var s=o.getCenter(),l=o.getRadius(),c={};try{for(var u=__values(e),f=u.next();!f.done;f=u.next()){var d=f.value;c[d.get("id")]=d}}catch(E){i={error:E}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var g=get(r[0],"labelHeight",14),p=Math.max(get(r[0],"offset",0),INFLECTION_OFFSET);each$1(r,function(E){if(E){var T=get(c,[E.id]);if(T){var I=E.x>s.x||E.x===s.x&&E.y>s.y,w=isNil(E.offsetX)?LABEL_OFFSET_X:E.offsetX,M=polarToCartesian(s.x,s.y,l+INFLECTION_OFFSET,E.angle),$=p+w;E.x=s.x+(I?1:-1)*(l+$),E.y=M.y}}});var v=o.start,y=o.end,m="left",x="right",_=groupBy(r,function(E){return E.x<s.x?m:x}),S=(l+p)*2+g;each$1(_,function(E){var T=E.length*g;T>S&&(S=Math.min(T,Math.abs(v.y-y.y)))});var A={minX:v.x,maxX:y.x,minY:s.y-S/2,maxY:s.y+S/2};each$1(_,function(E,T){var I=S/g;E.length>I&&(E.sort(function(w,M){return M.percent-w.percent}),each$1(E,function(w,M){M>I&&(c[w.id].set("visible",!1),w.invisible=!0)})),antiCollision(E,g,A)});var b=A.minY,C=A.maxY;each$1(_,function(E,T){var I=T===x;each$1(E,function(w){var M=get(c,w&&[w.id]);if(M){if(w.y<b||w.y>C){M.set("visible",!1);return}var $=M.getChildByIndex(0),P=$.getCanvasBBox(),R={x:I?P.x:P.maxX,y:P.y+P.height/2};translate($,w.x-R.x,w.y-R.y),w.labelLine&&drawLabelline(w,o,I)}})})}}function limitInCanvas(r,e,t,n){each$1(e,function(i){var a=n.minX,o=n.minY,s=n.maxX,l=n.maxY,c=i.getCanvasBBox(),u=c.minX,f=c.minY,d=c.maxX,g=c.maxY,p=c.x,v=c.y,y=c.width,m=c.height,x=p,_=v;(u<a||d<a)&&(x=a),(f<o||g<o)&&(_=o),u>s?x=s-y:d>s&&(x=x-(d-s)),f>l?_=l-m:g>l&&(_=_-(g-l)),(x!==p||_!==v)&&translate(i,x-p,_-v)})}function limitInShape(r,e,t,n){each$1(e,function(i,a){var o=i.getCanvasBBox(),s=t[a].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&i.remove(!0)})}var MAX_TIMES=100,Greedy=function(){function r(e){e===void 0&&(e={}),this.bitmap={};var t=e.xGap,n=t===void 0?1:t,i=e.yGap,a=i===void 0?8:i;this.xGap=n,this.yGap=a}return r.prototype.hasGap=function(e){for(var t=!0,n=this.bitmap,i=Math.round(e.minX),a=Math.round(e.maxX),o=Math.round(e.minY),s=Math.round(e.maxY),l=i;l<=a;l+=1){if(!n[l]){n[l]={};continue}if(l===i||l===a){for(var c=o;c<=s;c++)if(n[l][c]){t=!1;break}}else if(n[l][o]||n[l][s]){t=!1;break}}return t},r.prototype.fillGap=function(e){for(var t=this.bitmap,n=Math.round(e.minX),i=Math.round(e.maxX),a=Math.round(e.minY),o=Math.round(e.maxY),s=n;s<=i;s+=1)t[s]||(t[s]={});for(var s=n;s<=i;s+=this.xGap){for(var l=a;l<=o;l+=this.yGap)t[s][l]=!0;t[s][o]=!0}if(this.yGap!==1)for(var s=a;s<=o;s+=1)t[n][s]=!0,t[i][s]=!0;if(this.xGap!==1)for(var s=n;s<=i;s+=1)t[s][a]=!0,t[s][o]=!0},r.prototype.destroy=function(){this.bitmap={}},r}();function spiralFill(r,e,t){t===void 0&&(t=MAX_TIMES);var n=-1,i=r.attr(),a=i.x,o=i.y,s=r.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),c,u=-n,f=0,d=0,g=function(m){var x=m*.1;return[x*Math.cos(x),x*Math.sin(x)]};if(e.hasGap(s))return e.fillGap(s),!0;for(var p=!1,v=0,y={};Math.min(Math.abs(f),Math.abs(d))<l&&v<t;)if(c=g(u+=n),f=~~c[0],d=~~c[1],!(!f&&!d||y["".concat(f,"-").concat(d)])&&(r.attr({x:a+f,y:o+d}),f+d<0&&r.attr("textAlign","right"),v++,e.hasGap(r.getCanvasBBox()))){e.fillGap(r.getCanvasBBox()),p=!0,y["".concat(f,"-").concat(d)]=!0;break}return p}function adjustLabelPosition(r,e,t,n){var i=r.getCanvasBBox(),a=i.width,o=i.height,s={x:e,y:t,textAlign:"center"};switch(n){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right";break}return r.attr(s),r.getCanvasBBox()}function fixedOverlap(r,e,t,n){var i=new Greedy;each$1(e,function(a){var o=a.find(function(s){return s.get("type")==="text"});spiralFill(o,i)||a.remove(!0)}),i.destroy()}function overlap(r,e,t,n){var i=new Greedy;each$1(e,function(a){for(var o=a.find(function(g){return g.get("type")==="text"}),s=o.attr(),l=s.x,c=s.y,u=!1,f=0;f<=8;f++){var d=adjustLabelPosition(o,l,c,f);if(i.hasGap(d)){i.fillGap(d),u=!0;break}}u||a.remove(!0)}),i.destroy()}function dot$1(r,e){return(r[0]||0)*(e[0]||0)+(r[1]||0)*(e[1]||0)+(r[2]||0)*(e[2]||0)}function getAxes(r){if(r.length>4)return[];var e=function(i,a){return[a.x-i.x,a.y-i.y]},t=e(r[0],r[1]),n=e(r[1],r[2]);return[t,n]}function rotateAtPoint(r,e,t){e===void 0&&(e=0),t===void 0&&(t={x:0,y:0});var n=r.x,i=r.y;return{x:(n-t.x)*Math.cos(-e)+(i-t.y)*Math.sin(-e)+t.x,y:(t.x-n)*Math.sin(-e)+(i-t.y)*Math.cos(-e)+t.y}}function getRectPoints(r){var e=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],t=r.rotation;return t?[rotateAtPoint(e[0],t,e[0]),rotateAtPoint(e[1],t,e[0]),rotateAtPoint(e[2],t,e[0]),rotateAtPoint(e[3],t,e[0])]:e}function getProjection(r,e){if(r.length>4)return{min:0,max:0};var t=[];return r.forEach(function(n){t.push(dot$1([n.x,n.y],e))}),{min:Math.min.apply(Math,__spreadArray$1([],__read(t),!1)),max:Math.max.apply(Math,__spreadArray$1([],__read(t),!1))}}function isProjectionOverlap(r,e){return r.max>e.min&&r.min<e.max}function isValidNumber(r){return typeof r=="number"&&!Number.isNaN(r)&&r!==1/0&&r!==-1/0}function isValidBox(r){return["x","y","width","height"].every(function(e){return isValidNumber(r[e])})}function isIntersectRect(r,e,t){return t===void 0&&(t=0),!(e.x>r.x+r.width+t||e.x+e.width<r.x-t||e.y>r.y+r.height+t||e.y+e.height<r.y-t)}function intersect(r,e,t){if(t===void 0&&(t=0),!isValidBox(r)||!isValidBox(e))return!1;if(!r.rotation&&!e.rotation)return isIntersectRect(r,e,t);for(var n=getRectPoints(r),i=getRectPoints(e),a=getAxes(n).concat(getAxes(i)),o=0;o<a.length;o++){var s=a[o],l=getProjection(n,s),c=getProjection(i,s);if(!isProjectionOverlap(l,c))return!1}return!0}var MyWorker=function(){function r(e){var t=this;this.queue=[],this.worker=new Worker(e),this.worker.onmessage=function(n){var i;(i=t.queue.shift())===null||i===void 0||i.resolve(n)},this.worker.onmessageerror=function(n){var i;console.warn("[AntV G2] Web worker is not available"),(i=t.queue.shift())===null||i===void 0||i.reject(n)}}return r.prototype.post=function(e,t){var n=this;return new Promise(function(i,a){n.queue.push({resolve:i,reject:a});try{n.worker.postMessage(e)}catch{console.warn("[AntV G2] Web worker is not available"),isFunction(t)&&t()}})},r.prototype.destroy=function(){this.worker.terminate()},r}();function createWorker(r){if(!(typeof window>"u")){var e;try{e=new Blob([r.toString()],{type:"application/javascript"})}catch{e=new window.BlobBuilder,e.append(r.toString()),e=e.getBlob()}return new MyWorker(URL.createObjectURL(e))}}var onmessage=function(r){function e(){function c(_,S){return(_[0]||0)*(S[0]||0)+(_[1]||0)*(S[1]||0)+(_[2]||0)*(S[2]||0)}function u(_){if(_.length>4)return[];var S=function(C,E){return[E.x-C.x,E.y-C.y]},A=S(_[0],_[1]),b=S(_[1],_[2]);return[A,b]}function f(_,S,A){S===void 0&&(S=0),A===void 0&&(A={x:0,y:0});var b=_.x,C=_.y;return{x:(b-A.x)*Math.cos(-S)+(C-A.y)*Math.sin(-S)+A.x,y:(A.x-b)*Math.sin(-S)+(C-A.y)*Math.cos(-S)+A.y}}function d(_){var S=[{x:_.x,y:_.y},{x:_.x+_.width,y:_.y},{x:_.x+_.width,y:_.y+_.height},{x:_.x,y:_.y+_.height}],A=_.rotation;return A?[f(S[0],A,S[0]),f(S[1],A,S[0]),f(S[2],A,S[0]),f(S[3],A,S[0])]:S}function g(_,S){if(_.length>4)return{min:0,max:0};var A=[];return _.forEach(function(b){A.push(c([b.x,b.y],S))}),{min:Math.min.apply(null,A),max:Math.max.apply(null,A)}}function p(_,S){return _.max>S.min&&_.min<S.max}function v(_){return typeof _=="number"&&!Number.isNaN(_)&&_!==1/0&&_!==-1/0}function y(_){return["x","y","width","height"].every(function(S){return v(_[S])})}function m(_,S,A){return A===void 0&&(A=0),!(S.x>_.x+_.width+A||S.x+S.width<_.x-A||S.y>_.y+_.height+A||S.y+S.height<_.y-A)}function x(_,S,A){if(A===void 0&&(A=0),!y(_)||!y(S))return!1;if(!_.rotation&&!S.rotation)return m(_,S,A);for(var b=d(_),C=d(S),E=u(b).concat(u(C)),T=0;T<E.length;T++){var I=E[T],w=g(b,I),M=g(C,I);if(!p(w,M))return!1}return!0}return{intersect:x}}var t=e().intersect;function n(c){for(var u=c.slice(),f=0;f<u.length;f++){var d=u[f];if(d.visible)for(var g=f+1;g<u.length;g++){var p=u[g];d!==p&&p.visible&&t(d,p)&&(p.visible=!1)}}return u}var i={"hide-overlap":n};try{var a=JSON.parse(r.data);if(!a||!a.type||!i[a.type])return;var o=a.type,s=a.items,l=i[o](s);self.postMessage(l)}catch(c){throw c}},code=`
   self.onmessage = `.concat(onmessage.toString(),`
`),layout=function(r){for(var e=r.slice(),t=0;t<e.length;t++){var n=e[t];if(n.visible)for(var i=t+1;i<e.length;i++){var a=e[i];n!==a&&a.visible&&intersect(n,a)&&(a.visible=!1)}}return e},cache=new Map,worker=createWorker(code);function hideOverlap(r,e,t,n){return __awaiter(this,void 0,void 0,function(){var i,a,o,s,l,c;return __generator(this,function(u){switch(u.label){case 0:return i=e.map(function(f,d){return __assign$1(__assign$1({},getLabelBackgroundInfo(f,r[d],get(r[d],"background.padding"))),{visible:!0})}),a=JSON.stringify(i),o=function(f){return cache.set(a,f),each$1(f,function(d,g){var p=d.visible,v=e[g];p?v==null||v.show():v==null||v.hide()}),f},cache.get(a)?(o(cache.get(a)),[3,7]):[3,1];case 1:if(!worker)return[3,6];u.label=2;case 2:return u.trys.push([2,4,,5]),s=JSON.stringify({type:"hide-overlap",items:i}),[4,worker.post(s,function(){return o(layout(i))})];case 3:return l=u.sent(),o(Array.isArray(l.data)?l.data:[]),[3,5];case 4:return c=u.sent(),console.error(c),o(layout(i)),[3,5];case 5:return[3,7];case 6:o(layout(i)),u.label=7;case 7:return[2]}})})}var preset={"#5B8FF9":!0},isContrastColorWhite=function(r){var e=colorUtil.toRGB(r).toUpperCase();if(preset[e])return preset[e];var t=__read(colorUtil.rgb2arr(e),3),n=t[0],i=t[1],a=t[2],o=(n*299+i*587+a*114)/1e3<128;return o};function adjustColor(r,e,t){if(t.length!==0){var n=t[0].get("element"),i=n.geometry.theme,a=i.labels||{},o=a.fillColorLight,s=a.fillColorDark;t.forEach(function(l,c){var u=e[c],f=u.find(function(m){return m.get("type")==="text"}),d=BBox.fromObject(l.getBBox()),g=BBox.fromObject(f.getCanvasBBox()),p=!d.contains(g),v=l.attr("fill"),y=isContrastColorWhite(v);p?f.attr(i.overflowLabels.style):y?o&&f.attr("fill",o):s&&f.attr("fill",s)})}}function shouldInShapeSingle(r,e,t){var n=r.coordinate,i=findLabelTextShape(e),a=BBox.fromObject(i.getCanvasBBox()),o=BBox.fromObject(t.getBBox());return n.isTransposed?o.height>=a.height:o.width>=a.width}function shouldInShape(r,e,t){var n=!!r.getAdjust("stack");return n||e.every(function(i,a){var o=t[a];return shouldInShapeSingle(r,i,o)})}function moveInShape(r,e,t){var n=r.coordinate,i=BBox.fromObject(t.getBBox()),a=findLabelTextShape(e);n.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}function intervalAdjustPosition(r,e,t){var n;if(t.length!==0){var i=(n=t[0])===null||n===void 0?void 0:n.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=shouldInShape(a,e,t);o&&t.forEach(function(s,l){var c=e[l];moveInShape(a,c,s)})}}}function filterLabel(r){var e=500,t=[],n=Math.max(Math.floor(r.length/e),1);return each$1(r,function(i,a){a%n===0?t.push(i):i.set("visible",!1)}),t}function intervalHideOverlap(r,e,t){var n;if(t.length!==0){var i=(n=t[0])===null||n===void 0?void 0:n.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=filterLabel(e),s=__read(a.getXYFields(),1),l=s[0],c=[],u=[],f=groupBy(o,function(y){return y.get("data")[l]}),d=uniq$2(map$2(o,function(y){return y.get("data")[l]})),g;o.forEach(function(y){y.set("visible",!0)});var p=function(y){y&&(y.length&&u.push(y.pop()),u.push.apply(u,__spreadArray$1([],__read(y),!1)))};for(size(d)>0&&(g=d.shift(),p(f[g])),size(d)>0&&(g=d.pop(),p(f[g])),each$1(d.reverse(),function(y){p(f[y])});u.length>0;){var v=u.shift();v.get("visible")&&(checkShapeOverlap$2(v,c)?v.set("visible",!1):c.push(v))}}}}function sortLabels$1(r,e){var t=r.getXYFields()[1],n=[],i=e.sort(function(a,o){return a.get("data")[t]-a.get("data")[t]});return i.length>0&&n.push(i.shift()),i.length>0&&n.push(i.pop()),n.push.apply(n,__spreadArray$1([],__read(i),!1)),n}function hasSome$1(r,e,t){return r.some(function(n){return t(n,e)})}function getOverlapArea$1(r,e,t){t===void 0&&(t=0);var n=Math.max(0,Math.min(r.x+r.width+t,e.x+e.width+t)-Math.max(r.x-t,e.x-t)),i=Math.max(0,Math.min(r.y+r.height+t,e.y+e.height+t)-Math.max(r.y-t,e.y-t));return n*i}function checkShapeOverlap$1(r,e){return hasSome$1(r,e,function(t,n){var i=findLabelTextShape(t),a=findLabelTextShape(n);return getOverlapArea$1(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function pointAdjustPosition(r,e,t,n,i){var a,o;if(t.length!==0){var s=(a=t[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||l.type!=="point")){var c=__read(l.getXYFields(),2),u=c[0],f=c[1],d=groupBy(e,function(v){return v.get("data")[u]}),g=[],p=i&&i.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;map$2(keys(d).reverse(),function(v){for(var y=sortLabels$1(l,d[v]);y.length;){var m=y.shift(),x=findLabelTextShape(m);if(hasSome$1(g,m,function(A,b){return A.get("data")[u]===b.get("data")[u]&&A.get("data")[f]===b.get("data")[f]})){x.set("visible",!1);continue}var _=checkShapeOverlap$1(g,m),S=!1;if(_&&(x.attr("y",x.attr("y")+2*p),S=checkShapeOverlap$1(g,m)),S){x.set("visible",!1);continue}g.push(m)}})}}}function sortLabels(r,e){var t=r.getXYFields()[1],n=[],i=e.sort(function(a,o){return a.get("data")[t]-a.get("data")[t]});return i.length>0&&n.push(i.shift()),i.length>0&&n.push(i.pop()),n.push.apply(n,__spreadArray$1([],__read(i),!1)),n}function hasSome(r,e,t){return r.some(function(n){return t(n,e)})}function getOverlapArea(r,e,t){t===void 0&&(t=0);var n=Math.max(0,Math.min(r.x+r.width+t,e.x+e.width+t)-Math.max(r.x-t,e.x-t)),i=Math.max(0,Math.min(r.y+r.height+t,e.y+e.height+t)-Math.max(r.y-t,e.y-t));return n*i}function checkShapeOverlap(r,e){return hasSome(r,e,function(t,n){var i=findLabelTextShape(t),a=findLabelTextShape(n);return getOverlapArea(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function pathAdjustPosition(r,e,t,n,i){var a,o;if(t.length!==0){var s=(a=t[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||["path","line","area"].indexOf(l.type)<0)){var c=__read(l.getXYFields(),2),u=c[0],f=c[1],d=groupBy(e,function(v){return v.get("data")[u]}),g=[],p=i&&i.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;map$2(keys(d).reverse(),function(v){for(var y=sortLabels(l,d[v]);y.length;){var m=y.shift(),x=findLabelTextShape(m);if(hasSome(g,m,function(A,b){return A.get("data")[u]===b.get("data")[u]&&A.get("data")[f]===b.get("data")[f]})){x.set("visible",!1);continue}var _=checkShapeOverlap(g,m),S=!1;if(_&&(x.attr("y",x.attr("y")+2*p),S=checkShapeOverlap(g,m)),S){x.set("visible",!1);continue}g.push(m)}})}}}var ctx$1;function getCanvasContext$1(){return ctx$1||(ctx$1=document.createElement("canvas").getContext("2d")),ctx$1}var measureTextWidth=memoize(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant,s=getCanvasContext$1();return s.font=[a,o,i,"".concat(t,"px"),n].join(" "),s.measureText(isString(r)?r:"").width},function(r,e){return e===void 0&&(e={}),__spreadArray$1([r],__read(values(e)),!1).join("")}),getEllipsisText=function(r,e,t){var n=16,i=measureTextWidth("...",t),a;isString(r)?a=r:a=toString$2(r);var o=e,s=[],l,c;if(measureTextWidth(r,t)<=e)return r;for(;l=a.substr(0,n),c=measureTextWidth(l,t),!(c+i>o&&c>o);)if(s.push(l),o-=c,a=a.substr(n),!a)return s.join("");for(;l=a.substr(0,1),c=measureTextWidth(l,t),!(c+i>o);)if(s.push(l),o-=c,a=a.substr(1),!a)return s.join("");return"".concat(s.join(""),"...")};function limitInPlot$3(r,e,t,n,i){if(!(e.length<=0)){var a=(i==null?void 0:i.direction)||["top","right","bottom","left"],o=(i==null?void 0:i.action)||"translate",s=(i==null?void 0:i.margin)||0,l=e[0].get("coordinate");if(l){var c=getCoordinateBBox(l,s),u=c.minX,f=c.minY,d=c.maxX,g=c.maxY;each$1(e,function(p){var v=p.getCanvasBBox(),y=v.minX,m=v.minY,x=v.maxX,_=v.maxY,S=v.x,A=v.y,b=v.width,C=v.height,E=S,T=A;if(a.indexOf("left")>=0&&(y<u||x<u)&&(E=u),a.indexOf("top")>=0&&(m<f||_<f)&&(T=f),a.indexOf("right")>=0&&(y>d?E=d-b:x>d&&(E=E-(x-d))),a.indexOf("bottom")>=0&&(m>g?T=g-C:_>g&&(T=T-(_-g))),E!==S||T!==A){var I=E-S;if(o==="translate")translate(p,I,T-A);else if(o==="ellipsis"){var w=p.findAll(function(M){return M.get("type")==="text"});w.forEach(function(M){var $=pick$1(M.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),P=M.getCanvasBBox(),R=getEllipsisText(M.attr("text"),P.width-Math.abs(I),$);M.attr("text",R)})}else p.hide()}})}}}function fadeIn(r,e,t){var n={fillOpacity:isNil(r.attr("fillOpacity"))?1:r.attr("fillOpacity"),strokeOpacity:isNil(r.attr("strokeOpacity"))?1:r.attr("strokeOpacity"),opacity:isNil(r.attr("opacity"))?1:r.attr("opacity")};r.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),r.animate(n,e)}function fadeOut(r,e,t){var n={fillOpacity:0,strokeOpacity:0,opacity:0},i=e.easing,a=e.duration,o=e.delay;r.animate(n,a,i,function(){r.remove(!0)},o)}function transformShape(r,e,t){var n,i=__read(e,2),a=i[0],o=i[1];return r.applyToMatrix([a,o,1]),t==="x"?(r.setMatrix(transform$6(r.getMatrix(),[["t",-a,-o],["s",.01,1],["t",a,o]])),n=transform$6(r.getMatrix(),[["t",-a,-o],["s",100,1],["t",a,o]])):t==="y"?(r.setMatrix(transform$6(r.getMatrix(),[["t",-a,-o],["s",1,.01],["t",a,o]])),n=transform$6(r.getMatrix(),[["t",-a,-o],["s",1,100],["t",a,o]])):t==="xy"&&(r.setMatrix(transform$6(r.getMatrix(),[["t",-a,-o],["s",.01,.01],["t",a,o]])),n=transform$6(r.getMatrix(),[["t",-a,-o],["s",100,100],["t",a,o]])),n}function doScaleAnimate(r,e,t,n,i){var a=t.start,o=t.end,s=t.getWidth(),l=t.getHeight(),c,u;i==="y"?(c=a.x+s/2,u=n.y<a.y?n.y:a.y):i==="x"?(c=n.x>a.x?n.x:a.x,u=a.y+l/2):i==="xy"&&(t.isPolar?(c=t.getCenter().x,u=t.getCenter().y):(c=(a.x+o.x)/2,u=(a.y+o.y)/2));var f=transformShape(r,[c,u],i);r.animate({matrix:f},e)}function growInX(r,e,t){var n=t.coordinate,i=t.minYPoint;doScaleAnimate(r,e,n,i,"x")}function growInY(r,e,t){var n=t.coordinate,i=t.minYPoint;doScaleAnimate(r,e,n,i,"y")}function growInXY(r,e,t){var n=t.coordinate,i=t.minYPoint;doScaleAnimate(r,e,n,i,"xy")}function pathIn(r,e,t){var n=r.getTotalLength();r.attr("lineDash",[n]),r.animate(function(i){return{lineDashOffset:(1-i)*n}},e)}function positionUpdate(r,e,t){var n=t.toAttrs,i=n.x,a=n.y;delete n.x,delete n.y,r.attr(n),r.animate({x:i,y:a},e)}function scaleInX(r,e,t){var n=r.getBBox(),i=r.get("origin").mappingData,a=i.points,o=a[0].y-a[1].y>0?n.maxX:n.minX,s=(n.minY+n.maxY)/2;r.applyToMatrix([o,s,1]);var l=transform$6(r.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);r.setMatrix(l),r.animate({matrix:transform$6(r.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},e)}function scaleInY(r,e,t){var n=r.getBBox(),i=r.get("origin").mappingData,a=(n.minX+n.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?n.maxY:n.minY;r.applyToMatrix([a,s,1]);var l=transform$6(r.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);r.setMatrix(l),r.animate({matrix:transform$6(r.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},e)}function getAngle(r,e){var t,n=getArcParams(r,e),i=n.startAngle,a=n.endAngle;return!isNumberEqual$1(i,-Math.PI*.5)&&i<-Math.PI*.5&&(i+=Math.PI*2),!isNumberEqual$1(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),e[5]===0&&(t=__read([a,i],2),i=t[0],a=t[1]),isNumberEqual$1(i,Math.PI*1.5)&&(i=Math.PI*-.5),isNumberEqual$1(a,Math.PI*-.5)&&!isNumberEqual$1(i,a)&&(a=Math.PI*1.5),{startAngle:i,endAngle:a}}function getArcStartPoint(r){var e;return r[0]==="M"||r[0]==="L"?e=[r[1],r[2]]:(r[0]==="a"||r[0]==="A"||r[0]==="C")&&(e=[r[r.length-2],r[r.length-1]]),e}function getArcInfo(r){var e,t,n,i=r.filter(function(_){return _[0]==="A"||_[0]==="a"});if(i.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=r.indexOf(a),l=r.indexOf(o),c=getArcStartPoint(r[s-1]),u=getArcStartPoint(r[l-1]),f=getAngle(c,a),d=f.startAngle,g=f.endAngle,p=getAngle(u,o),v=p.startAngle,y=p.endAngle;isNumberEqual$1(d,v)&&isNumberEqual$1(g,y)?(t=d,n=g):(t=Math.min(d,v),n=Math.max(g,y));var m=a[1],x=i[i.length-1][1];return m<x?(e=__read([x,m],2),m=e[0],x=e[1]):m===x&&(x=0),{startAngle:t,endAngle:n,radius:m,innerRadius:x}}function sectorPathUpdate(r,e,t){var n=t.toAttrs,i=t.coordinate,a=n.path||[],o=a.map(function(x){return x[0]});if(!(a.length<1)){var s=getArcInfo(a),l=s.startAngle,c=s.endAngle,u=s.radius,f=s.innerRadius,d=getArcInfo(r.attr("path")),g=d.startAngle,p=d.endAngle,v=i.getCenter(),y=l-g,m=c-p;if(y===0&&m===0){r.attr("path",a);return}r.animate(function(x){var _=g+x*y,S=p+x*m;return __assign$1(__assign$1({},n),{path:isEqual$1(o,["M","A","A","Z"])?getArcPath(v.x,v.y,u,_,S):getSectorPath(v.x,v.y,u,_,S,f)})},__assign$1(__assign$1({},e),{callback:function(){r.attr("path",a),isFunction(e.callback)&&e.callback()}}))}}function waveIn(r,e,t){var n=getCoordinateClipCfg(t.coordinate,20),i=n.type,a=n.startState,o=n.endState,s=r.setClip({type:i,attrs:a});t.toAttrs&&r.attr(t.toAttrs),s.animate(o,__assign$1(__assign$1({},e),{callback:function(){r&&!r.get("destroyed")&&r.set("clipShape",null),s.remove(!0),isFunction(e.callback)&&e.callback()}}))}function doShapeZoom(r,e,t){if(r.isGroup())each$1(r.getChildren(),function(s){doShapeZoom(s,e,t)});else{var n=r.getBBox(),i=(n.minX+n.maxX)/2,a=(n.minY+n.maxY)/2;if(r.applyToMatrix([i,a,1]),t==="zoomIn"){var o=transform$6(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);r.setMatrix(o),r.animate({matrix:transform$6(r.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},e)}else r.animate({matrix:transform$6(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},__assign$1(__assign$1({},e),{callback:function(){r.remove(!0),isFunction(e.callback)&&e.callback()}}))}}function zoomIn(r,e,t){doShapeZoom(r,e,"zoomIn")}function zoomOut(r,e,t){doShapeZoom(r,e,"zoomOut")}function getFactTitleConfig(r){return[DIRECTION.TOP,DIRECTION.BOTTOM].includes(r)?{offsetX:0,offsetY:r===DIRECTION.TOP?-8:8,style:{textAlign:"center",textBaseline:r===DIRECTION.TOP?"bottom":"top"}}:[DIRECTION.LEFT,DIRECTION.RIGHT].includes(r)?{offsetX:r===DIRECTION.LEFT?-8:8,offsetY:0,style:{textAlign:r===DIRECTION.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function getAnglePoint(r,e,t){return{x:r.x+e*Math.cos(t),y:r.y+e*Math.sin(t)}}var Circle=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return deepMix({},r.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.getRegion=function(t,n){var i=.5,a={x:.5,y:.5},o=Math.PI*2/t,s=-1*Math.PI/2+o*n,l=i/(1+1/Math.sin(o/2)),c=getAnglePoint(a,i-l,s),u=Math.PI*5/4,f=Math.PI*1/4;return{start:getAnglePoint(c,l,u),end:getAnglePoint(c,l,f)}},e.prototype.afterEachView=function(t,n){this.processAxis(t,n)},e.prototype.beforeEachView=function(t,n){},e.prototype.generateFacets=function(t){var n=this,i=this.cfg,a=i.fields,o=i.type,s=__read(a,1),l=s[0];if(!l)throw new Error("No `fields` specified!");var c=this.getFieldValues(t,l),u=c.length,f=[];return c.forEach(function(d,g){var p=[{field:l,value:d,values:c}],v=filter(t,n.getFacetDataFilter(p)),y={type:o,data:v,region:n.getRegion(u,g),columnValue:d,columnField:l,columnIndex:g,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};f.push(y)}),f},e.prototype.getXAxisOption=function(t,n,i,a){return i},e.prototype.getYAxisOption=function(t,n,i,a){return i},e.prototype.renderTitle=function(){var t=this;each$1(this.facets,function(n){var i=n.columnValue,a=n.view,o=get(t.cfg.title,"formatter"),s=deepMix({position:["50%","0%"],content:o?o(i):i},getFactTitleConfig(DIRECTION.TOP),t.cfg.title);a.annotation().text(s)})},e}(Facet),List=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return deepMix({},r.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,n){this.processAxis(t,n)},e.prototype.beforeEachView=function(t,n){},e.prototype.generateFacets=function(t){var n=this,i=this.cfg.fields,a=this.cfg.cols,o=__read(i,1),s=o[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(t,s),c=l.length;a=a||c;var u=this.getPageCount(c,a),f=[];return l.forEach(function(d,g){var p=n.getRowCol(g,a),v=p.row,y=p.col,m=[{field:s,value:d,values:l}],x=filter(t,n.getFacetDataFilter(m)),_={type:n.cfg.type,data:x,region:n.getRegion(u,a,y,v),columnValue:d,rowValue:d,columnField:s,rowField:null,columnIndex:y,rowIndex:v,columnValuesLength:a,rowValuesLength:u,total:c};f.push(_)}),f},e.prototype.getXAxisOption=function(t,n,i,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?__assign$1(__assign$1({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,n,i,a){return a.columnIndex!==0?__assign$1(__assign$1({},i),{title:null,label:null}):i},e.prototype.renderTitle=function(){var t=this;each$1(this.facets,function(n){var i=n.columnValue,a=n.view,o=get(t.cfg.title,"formatter"),s=deepMix({position:["50%","0%"],content:o?o(i):i},getFactTitleConfig(DIRECTION.TOP),t.cfg.title);a.annotation().text(s)})},e.prototype.getPageCount=function(t,n){return Math.floor((t+n-1)/n)},e.prototype.getRowCol=function(t,n){var i=Math.floor(t/n),a=t%n;return{row:i,col:a}},e}(Facet),Matrix=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return deepMix({},r.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:__assign$1({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:__assign$1({},r.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,n){this.processAxis(t,n)},e.prototype.beforeEachView=function(t,n){},e.prototype.generateFacets=function(t){for(var n=this.cfg,i=n.fields,a=n.type,o=i.length,s=o,l=[],c=0;c<s;c++)for(var u=i[c],f=0;f<o;f++){var d=i[f],g={type:a,data:t,region:this.getRegion(o,s,c,f),columnValue:u,rowValue:d,columnField:u,rowField:d,columnIndex:c,rowIndex:f,columnValuesLength:s,rowValuesLength:o};l.push(g)}return l},e.prototype.getXAxisOption=function(t,n,i,a){return a.rowIndex!==a.rowValuesLength-1?__assign$1(__assign$1({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,n,i,a){return a.columnIndex!==0?__assign$1(__assign$1({},i),{title:null,label:null}):i},e.prototype.renderTitle=function(){var t=this;each$1(this.facets,function(n,i){var a=n.columnIndex,o=n.rowIndex,s=n.columnValuesLength;n.rowValuesLength;var l=n.columnValue,c=n.rowValue,u=n.view;if(o===0){var f=get(t.cfg.columnTitle,"formatter"),d=deepMix({position:["50%","0%"],content:f?f(l):l},getFactTitleConfig(DIRECTION.TOP),t.cfg.columnTitle);u.annotation().text(d)}if(a===s-1){var f=get(t.cfg.rowTitle,"formatter"),d=deepMix({position:["100%","50%"],content:f?f(c):c},getFactTitleConfig(DIRECTION.RIGHT),t.cfg.rowTitle);u.annotation().text(d)}})},e}(Facet),Mirror=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return deepMix({},r.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this),transpose:!1})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.beforeEachView=function(t,n){this.cfg.transpose?n.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():n.rowIndex%2!==0&&t.coordinate().reflect("y")},e.prototype.afterEachView=function(t,n){this.processAxis(t,n)},e.prototype.generateFacets=function(t){var n=this,i=__read(this.cfg.fields,1),a=i[0],o=[],s=1,l=1,c=[""],u=[""],f,d;return this.cfg.transpose?(f=a,c=this.getFieldValues(t,f).slice(0,2),s=c.length):(d=a,u=this.getFieldValues(t,d).slice(0,2),l=u.length),c.forEach(function(g,p){u.forEach(function(v,y){var m=[{field:f,value:g,values:c},{field:d,value:v,values:u}],x=filter(t,n.getFacetDataFilter(m)),_={type:n.cfg.type,data:x,region:n.getRegion(l,s,p,y),columnValue:g,rowValue:v,columnField:f,rowField:d,columnIndex:p,rowIndex:y,columnValuesLength:s,rowValuesLength:l};o.push(_)})}),o},e.prototype.getXAxisOption=function(t,n,i,a){return a.columnIndex===1||a.rowIndex===1?__assign$1(__assign$1({},i),{label:null,title:null}):i},e.prototype.getYAxisOption=function(t,n,i,a){return i},e.prototype.renderTitle=function(){var t=this;each$1(this.facets,function(n,i){var a=n.columnValue,o=n.rowValue,s=n.view,l=get(t.cfg.title,"formatter");if(t.cfg.transpose){var c=deepMix({position:["50%","0%"],content:l?l(a):a},getFactTitleConfig(DIRECTION.TOP),t.cfg.title);s.annotation().text(c)}else{var c=deepMix({position:["100%","50%"],content:l?l(o):o},getFactTitleConfig(DIRECTION.RIGHT),t.cfg.title);s.annotation().text(c)}})},e}(Facet),Rect=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.afterEachView=function(t,n){this.processAxis(t,n)},e.prototype.beforeEachView=function(t,n){},e.prototype.getDefaultCfg=function(){return deepMix({},r.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:__assign$1({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:__assign$1({},r.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.generateFacets=function(t){var n=this,i=__read(this.cfg.fields,2),a=i[0],o=i[1],s=[],l=1,c=1,u=[""],f=[""];return a&&(u=this.getFieldValues(t,a),l=u.length),o&&(f=this.getFieldValues(t,o),c=f.length),u.forEach(function(d,g){f.forEach(function(p,v){var y=[{field:a,value:d,values:u},{field:o,value:p,values:f}],m=filter(t,n.getFacetDataFilter(y)),x={type:n.cfg.type,data:m,region:n.getRegion(c,l,g,v),columnValue:d,rowValue:p,columnField:a,rowField:o,columnIndex:g,rowIndex:v,columnValuesLength:l,rowValuesLength:c};s.push(x)})}),s},e.prototype.renderTitle=function(){var t=this;each$1(this.facets,function(n,i){var a=n.columnIndex,o=n.rowIndex,s=n.columnValuesLength,l=n.columnValue,c=n.rowValue,u=n.view;if(o===0){var f=get(t.cfg.columnTitle,"formatter"),d=deepMix({position:["50%","0%"],content:f?f(l):l},getFactTitleConfig(DIRECTION.TOP),t.cfg.columnTitle);u.annotation().text(d)}if(a===s-1){var f=get(t.cfg.rowTitle,"formatter"),d=deepMix({position:["100%","50%"],content:f?f(c):c},getFactTitleConfig(DIRECTION.RIGHT),t.cfg.rowTitle);u.annotation().text(d)}})},e.prototype.getXAxisOption=function(t,n,i,a){return a.rowIndex!==a.rowValuesLength-1?__assign$1(__assign$1({},i),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?__assign$1(__assign$1({},i),{title:null}):i},e.prototype.getYAxisOption=function(t,n,i,a){return a.columnIndex!==0?__assign$1(__assign$1({},i),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?__assign$1(__assign$1({},i),{title:null}):i},e}(Facet),Tree=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return e.prototype.afterEachView=function(t,n){this.processAxis(t,n)},e.prototype.beforeEachView=function(t,n){},e.prototype.init=function(){r.prototype.init.call(this),this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER,this.afterChartRender)},e.prototype.getDefaultCfg=function(){return deepMix({},r.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},e.prototype.generateFacets=function(t){var n=this.cfg.fields;if(!n.length)throw new Error("Please specify for the fields for rootFacet!");var i=[],a={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return i.push(a),a.children=this.getChildFacets(t,1,i),this.setRegion(i),i},e.prototype.setRegion=function(t){var n=this;this.forceColIndex(t),t.forEach(function(i){i.region=n.getRegion(i.rowValuesLength,i.columnValuesLength,i.columnIndex,i.rowIndex)})},e.prototype.getRegion=function(t,n,i,a){var o=1/n,s=1/t,l={x:o*i,y:s*a},c={x:l.x+o,y:l.y+s*2/3};return{start:l,end:c}},e.prototype.forceColIndex=function(t){var n,i,a=this,o=[],s=0;t.forEach(function(p){a.isLeaf(p)&&(o.push(p),p.columnIndex=s,s++)}),o.forEach(function(p){p.columnValuesLength=o.length});for(var l=this.cfg.fields.length,c=l-1;c>=0;c--){var u=this.getFacetsByLevel(t,c);try{for(var f=(n=void 0,__values(u)),d=f.next();!d.done;d=f.next()){var g=d.value;this.isLeaf(g)||(g.originColIndex=g.columnIndex,g.columnIndex=this.getRegionIndex(g.children),g.columnValuesLength=o.length)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}},e.prototype.getFacetsByLevel=function(t,n){var i=[];return t.forEach(function(a){a.rowIndex===n&&i.push(a)}),i},e.prototype.getRegionIndex=function(t){var n=t[0],i=t[t.length-1];return(i.columnIndex-n.columnIndex)/2+n.columnIndex},e.prototype.isLeaf=function(t){return!t.children||!t.children.length},e.prototype.getRows=function(){return this.cfg.fields.length+1},e.prototype.getChildFacets=function(t,n,i){var a=this,o=this.cfg.fields,s=o.length;if(!(s<n)){var l=[],c=o[n-1],u=this.getFieldValues(t,c);return u.forEach(function(f,d){var g=[{field:c,value:f,values:u}],p=t.filter(a.getFacetDataFilter(g));if(p.length){var v={type:a.cfg.type,data:p,region:null,columnValue:f,rowValue:"",columnField:c,rowField:"",columnIndex:d,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:n,children:a.getChildFacets(p,n+1,i)};l.push(v),i.push(v)}}),l}},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.renderTitle=function(){var t=this;each$1(this.facets,function(n){var i=n.columnValue,a=n.view,o=get(t.cfg.title,"formatter"),s=deepMix({position:["50%","0%"],content:o?o(i):i},getFactTitleConfig(DIRECTION.TOP),t.cfg.title);a.annotation().text(s)})},e.prototype.drawLines=function(t){var n=this;t.forEach(function(i){if(!n.isLeaf(i)){var a=i.children;n.addFacetLines(i,a)}})},e.prototype.addFacetLines=function(t,n){var i=this,a=t.view,o=a.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};n.forEach(function(l){var c=l.view.coordinateBBox,u={x:c.bl.x+(c.tr.x-c.bl.x)/2,y:c.tr.y},f={x:s.x,y:s.y+(u.y-s.y)/2},d={x:u.x,y:f.y};i.drawLine([s,f,d,u])})},e.prototype.getPath=function(t){var n=[],i=this.cfg.line.smooth;return i?(n.push(["M",t[0].x,t[0].y]),n.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(a,o){o===0?n.push(["M",a.x,a.y]):n.push(["L",a.x,a.y])}),n},e.prototype.drawLine=function(t){var n=this.getPath(t),i=this.cfg.line.style;this.container.addShape("path",{attrs:mix({path:n},i)})},e.prototype.getXAxisOption=function(t,n,i,a){return a.rowIndex!==a.rowValuesLength-1?__assign$1(__assign$1({},i),{title:null,label:null}):i},e.prototype.getYAxisOption=function(t,n,i,a){return a.originColIndex!==0&&a.columnIndex!==0?__assign$1(__assign$1({},i),{title:null,label:null}):i},e}(Facet);function getMedian(r){var e=__spreadArray$1([],__read(r),!1);e.sort(function(n,i){return n-i});var t=e.length;return t===0?0:t%2===1?e[(t-1)/2]:(e[t/2]+e[t/2-1])/2}function getMean(r){var e=reduce(r,function(t,n){return t+=isNaN(n)||!isNumber$1(n)?0:n},0);return r.length===0?0:e/r.length}function getNormalizedValue(r,e){if(!e)return null;var t;switch(r){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{t=e.isCategory?getMedian(e.values.map(function(n,i){return i})):getMedian(e.values);break}case"mean":{t=e.isCategory?(e.values.length-1)/2:getMean(e.values);break}case"min":t=e.isCategory?0:e[r];break;case"max":t=e.isCategory?e.values.length-1:e[r];break;default:t=r;break}return e.scale(t)}var ANNOTATIONS_AFTER_RENDER=["regionFilter","shape"],Annotation=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(LAYER.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(LAYER.BG).addGroup(),n.option=[],n}return Object.defineProperty(e.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.layout=function(){this.update()},e.prototype.render=function(){},e.prototype.update=function(){var t=this;this.onAfterRender(function(){var i=new Map;each$1(t.option,function(a){if(contains(ANNOTATIONS_AFTER_RENDER,a.type)){var o=t.updateOrCreate(a);o&&i.set(t.getCacheKey(a),o)}}),t.cache=t.syncCache(i)});var n=new Map;each$1(this.option,function(i){if(!contains(ANNOTATIONS_AFTER_RENDER,i.type)){var a=t.updateOrCreate(i);a&&n.set(t.getCacheKey(i),a)}}),this.cache=this.syncCache(n)},e.prototype.clear=function(t){t===void 0&&(t=!1),r.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},e.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(n){t.push(n)}),t},e.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},e.prototype.onAfterRender=function(t){var n=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(i){i.animateOption&&(i.once(GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE,function(){t()}),n=!0)}),n||this.view.getRootView().once(VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){t()})},e.prototype.createAnnotation=function(t){var n=t.type,i=AnnotationComponent[upperFirst(n)];if(i){var a=this.getAnnotationTheme(n),o=this.getAnnotationCfg(n,t,a);if(!o)return null;var s=new i(o);return{component:s,layer:this.isTop(o)?LAYER.FORE:LAYER.BG,direction:DIRECTION.NONE,type:COMPONENT_TYPE.ANNOTATION,extra:t}}},e.prototype.annotation=function(t){this.option.push(t)},e.prototype.arc=function(t){return this.annotation(__assign$1({type:"arc"},t)),this},e.prototype.image=function(t){return this.annotation(__assign$1({type:"image"},t)),this},e.prototype.line=function(t){return this.annotation(__assign$1({type:"line"},t)),this},e.prototype.region=function(t){return this.annotation(__assign$1({type:"region"},t)),this},e.prototype.text=function(t){return this.annotation(__assign$1({type:"text"},t)),this},e.prototype.dataMarker=function(t){return this.annotation(__assign$1({type:"dataMarker"},t)),this},e.prototype.dataRegion=function(t){this.annotation(__assign$1({type:"dataRegion"},t))},e.prototype.regionFilter=function(t){this.annotation(__assign$1({type:"regionFilter"},t))},e.prototype.shape=function(t){this.annotation(__assign$1({type:"shape"},t))},e.prototype.html=function(t){this.annotation(__assign$1({type:"html"},t))},e.prototype.parsePosition=function(t){var n,i,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=isFunction(t)?t.call(null,a,o):t,l=0,c=0;if(isArray$3(s)){var u=__read(s,2),f=u[0],d=u[1];if(isString(f)&&f.indexOf("%")!==-1&&!isNaN(f.slice(0,-1)))return this.parsePercentPosition(s);l=getNormalizedValue(f,a),c=getNormalizedValue(d,Object.values(o)[0])}else if(!isNil(s))try{for(var g=__values(keys(s)),p=g.next();!p.done;p=g.next()){var v=p.value,y=s[v];v===a.field&&(l=getNormalizedValue(y,a)),o[v]&&(c=getNormalizedValue(y,o[v]))}}catch(m){n={error:m}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}return isNaN(l)||isNaN(c)?null:this.view.getCoordinate().convert({x:l,y:c})},e.prototype.getRegionPoints=function(t,n){var i=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=a.field,c=this.view.getData(),u=isArray$3(t)?t[0]:t[l],f=isArray$3(n)?n[0]:n[l],d=[],g;return each$1(c,function(p,v){if(p[l]===u&&(g=v),v>=g){var y=i.parsePosition([p[l],p[s.field]]);y&&d.push(y)}if(p[l]===f)return!1}),d},e.prototype.parsePercentPosition=function(t){var n=parseFloat(t[0])/100,i=parseFloat(t[1])/100,a=this.view.getCoordinate(),o=a.start,s=a.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},c=a.getWidth()*n+l.x,u=a.getHeight()*i+l.y;return{x:c,y:u}},e.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),n=t.start,i=t.end,a=t.getWidth(),o=t.getHeight(),s={x:Math.min(n.x,i.x),y:Math.min(n.y,i.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+a,maxY:s.y+o,width:a,height:o}},e.prototype.getAnnotationCfg=function(t,n,i){var a=this,o=this.view.getCoordinate(),s=this.view.getCanvas(),l={};if(isNil(n))return null;var c=n.start,u=n.end,f=n.position,d=this.parsePosition(c),g=this.parsePosition(u),p=this.parsePosition(f);if(["arc","image","line","region","regionFilter"].includes(t)&&(!d||!g))return null;if(["text","dataMarker","html"].includes(t)&&!p)return null;if(t==="arc"){var v=n;v.start,v.end;var y=__rest(v,["start","end"]),m=getAngleByPoint(o,d),x=getAngleByPoint(o,g);m>x&&(x=Math.PI*2+x),l=__assign$1(__assign$1({},y),{center:o.getCenter(),radius:getDistanceToCenter(o,d),startAngle:m,endAngle:x})}else if(t==="image"){var _=n;_.start,_.end;var y=__rest(_,["start","end"]);l=__assign$1(__assign$1({},y),{start:d,end:g,src:n.src})}else if(t==="line"){var S=n;S.start,S.end;var y=__rest(S,["start","end"]);l=__assign$1(__assign$1({},y),{start:d,end:g,text:get(n,"text",null)})}else if(t==="region"){var A=n;A.start,A.end;var y=__rest(A,["start","end"]);l=__assign$1(__assign$1({},y),{start:d,end:g})}else if(t==="text"){var b=this.view.getData(),C=n;C.position;var E=C.content,y=__rest(C,["position","content"]),T=E;isFunction(E)&&(T=E(b)),l=__assign$1(__assign$1(__assign$1({},p),y),{content:T})}else if(t==="dataMarker"){var I=n;I.position;var w=I.point,M=I.line,$=I.text,P=I.autoAdjust,R=I.direction,y=__rest(I,["position","point","line","text","autoAdjust","direction"]);l=__assign$1(__assign$1(__assign$1({},y),p),{coordinateBBox:this.getCoordinateBBox(),point:w,line:M,text:$,autoAdjust:P,direction:R})}else if(t==="dataRegion"){var L=n,O=L.start,k=L.end,B=L.region,$=L.text,N=L.lineLength,y=__rest(L,["start","end","region","text","lineLength"]);l=__assign$1(__assign$1({},y),{points:this.getRegionPoints(O,k),region:B,text:$,lineLength:N})}else if(t==="regionFilter"){var F=n;F.start,F.end;var V=F.apply,H=F.color,y=__rest(F,["start","end","apply","color"]),z=this.view.geometries,G=[],j=function(Q){Q&&(Q.isGroup()?Q.getChildren().forEach(function(rt){return j(rt)}):G.push(Q))};each$1(z,function(Q){V?contains(V,Q.type)&&each$1(Q.elements,function(rt){j(rt.shape)}):each$1(Q.elements,function(rt){j(rt.shape)})}),l=__assign$1(__assign$1({},y),{color:H,shapes:G,start:d,end:g})}else if(t==="shape"){var Y=n,U=Y.render,K=__rest(Y,["render"]),q=function(J){if(isFunction(n.render))return U(J,a.view,{parsePosition:a.parsePosition.bind(a)})};l=__assign$1(__assign$1({},K),{render:q})}else if(t==="html"){var W=n,X=W.html;W.position;var K=__rest(W,["html","position"]),tt=function(Q){return isFunction(X)?X(Q,a.view):X};l=__assign$1(__assign$1(__assign$1({},K),p),{parent:s.get("el").parentNode,html:tt})}var Z=deepMix({},i,__assign$1(__assign$1({},l),{top:n.top,style:n.style,offsetX:n.offsetX,offsetY:n.offsetY}));return t!=="html"&&(Z.container=this.getComponentContainer(Z)),Z.animate=this.view.getOptions().animate&&Z.animate&&get(n,"animate",Z.animate),Z.animateOption=deepMix({},DEFAULT_ANIMATE_CFG,Z.animateOption,n.animateOption),Z},e.prototype.isTop=function(t){return get(t,"top",!0)},e.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},e.prototype.getAnnotationTheme=function(t){return get(this.view.getTheme(),["components","annotation",t],{})},e.prototype.updateOrCreate=function(t){var n=this.cache.get(this.getCacheKey(t));if(n){var i=t.type,a=this.getAnnotationTheme(i),o=this.getAnnotationCfg(i,t,a);o&&omit(o,["container"]),n.component.update(__assign$1(__assign$1({},o||{}),{visible:!!o})),contains(ANNOTATIONS_AFTER_RENDER,t.type)&&n.component.render()}else n=this.createAnnotation(t),n&&(n.component.init(),contains(ANNOTATIONS_AFTER_RENDER,t.type)&&n.component.render());return n},e.prototype.syncCache=function(t){var n=this,i=new Map(this.cache);return t.forEach(function(a,o){i.set(o,a)}),i.forEach(function(a,o){find$1(n.option,function(s){return o===n.getCacheKey(s)})||(a.component.destroy(),i.delete(o))}),i},e.prototype.getCacheKey=function(t){return t},e}(Controller);function getGridThemeCfg(r,e){var t=deepMix({},get(r,["components","axis","common"]),get(r,["components","axis",e]));return get(t,["grid"],{})}function getLineGridItems(r,e,t,n){var i=[],a=e.getTicks();return r.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,s,l){var c=s.value;if(n)i.push({points:[r.convert(t==="y"?{x:0,y:c}:{x:c,y:0}),r.convert(t==="y"?{x:1,y:c}:{x:c,y:1})]});else if(l){var u=o.value,f=(u+c)/2;i.push({points:[r.convert(t==="y"?{x:0,y:f}:{x:f,y:0}),r.convert(t==="y"?{x:1,y:f}:{x:f,y:1})]})}return s},a[0]),i}function getCircleGridItems(r,e,t,n,i){var a=e.values.length,o=[],s=t.getTicks();return s.reduce(function(l,c){var u=l?l.value:c.value,f=c.value,d=(u+f)/2;return i==="x"?o.push({points:[r.convert({x:n?f:d,y:0}),r.convert({x:n?f:d,y:1})]}):o.push({points:map$2(Array(a+1),function(g,p){return r.convert({x:p/a,y:n?f:d})})}),c},s[0]),o}function showGrid(r,e){var t=get(e,"grid");if(t===null)return!1;var n=get(r,"grid");return!(t===void 0&&n===null)}var OMIT_CFG=["container"],AXIS_DEFAULT_ANIMATE_CFG=__assign$1(__assign$1({},DEFAULT_ANIMATE_CFG),{appear:null}),Axis=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(LAYER.BG).addGroup(),n.gridForeContainer=n.view.getLayer(LAYER.FORE).addGroup(),n.axisContainer=n.view.getLayer(LAYER.BG).addGroup(),n.axisForeContainer=n.view.getLayer(LAYER.FORE).addGroup(),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this,n=this.view.getCoordinate();each$1(this.getComponents(),function(i){var a=i.component,o=i.direction,s=i.type,l=i.extra,c=l.dim,u=l.scale,f=l.alignTick,d;if(s===COMPONENT_TYPE.AXIS)n.isPolar?c==="x"?d=n.isTransposed?getAxisRegion(n,o):getCircleAxisCenterRadius(n):c==="y"&&(d=n.isTransposed?getCircleAxisCenterRadius(n):getAxisRegion(n,o)):d=getAxisRegion(n,o);else if(s===COMPONENT_TYPE.GRID)if(n.isPolar){var g=void 0;n.isTransposed?g=c==="x"?getCircleGridItems(n,t.view.getYScales()[0],u,f,c):getLineGridItems(n,u,c,f):g=c==="x"?getLineGridItems(n,u,c,f):getCircleGridItems(n,t.view.getXScale(),u,f,c),d={items:g,center:t.view.getCoordinate().getCenter()}}else d={items:getLineGridItems(n,u,c,f)};a.update(d)})},e.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var n=new Map;this.cache.forEach(function(i,a){t.has(a)?n.set(a,i):i.component.destroy()}),this.cache=n},e.prototype.clear=function(){r.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(n){t.push(n)}),t},e.prototype.updateXAxes=function(t){var n=this.view.getXScale();if(!(!n||n.isIdentity)){var i=getAxisOption(this.option,n.field);if(i!==!1){var a=getAxisDirection(i,DIRECTION.BOTTOM),o=LAYER.BG,s="x",l=this.view.getCoordinate(),c=this.getId("axis",n.field),u=this.getId("grid",n.field);if(l.isRect){var f=this.cache.get(c);if(f){var d=this.getLineAxisCfg(n,i,a);omit(d,OMIT_CFG),f.component.update(d),t.set(c,f)}else f=this.createLineAxis(n,i,o,a,s),this.cache.set(c,f),t.set(c,f);var g=this.cache.get(u);if(g){var d=this.getLineGridCfg(n,i,a,s);omit(d,OMIT_CFG),g.component.update(d),t.set(u,g)}else g=this.createLineGrid(n,i,o,a,s),g&&(this.cache.set(u,g),t.set(u,g))}else if(l.isPolar){var f=this.cache.get(c);if(f){var d=l.isTransposed?this.getLineAxisCfg(n,i,DIRECTION.RADIUS):this.getCircleAxisCfg(n,i,a);omit(d,OMIT_CFG),f.component.update(d),t.set(c,f)}else{if(l.isTransposed){if(isUndefined(i))return;f=this.createLineAxis(n,i,o,DIRECTION.RADIUS,s)}else f=this.createCircleAxis(n,i,o,a,s);this.cache.set(c,f),t.set(c,f)}var g=this.cache.get(u);if(g){var d=l.isTransposed?this.getCircleGridCfg(n,i,DIRECTION.RADIUS,s):this.getLineGridCfg(n,i,DIRECTION.CIRCLE,s);omit(d,OMIT_CFG),g.component.update(d),t.set(u,g)}else{if(l.isTransposed){if(isUndefined(i))return;g=this.createCircleGrid(n,i,o,DIRECTION.RADIUS,s)}else g=this.createLineGrid(n,i,o,DIRECTION.CIRCLE,s);g&&(this.cache.set(u,g),t.set(u,g))}}}}},e.prototype.updateYAxes=function(t){var n=this,i=this.view.getYScales();each$1(i,function(a,o){if(!(!a||a.isIdentity)){var s=a.field,l=getAxisOption(n.option,s);if(l!==!1){var c=LAYER.BG,u="y",f=n.getId("axis",s),d=n.getId("grid",s),g=n.view.getCoordinate();if(g.isRect){var p=getAxisDirection(l,o===0?DIRECTION.LEFT:DIRECTION.RIGHT),v=n.cache.get(f);if(v){var y=n.getLineAxisCfg(a,l,p);omit(y,OMIT_CFG),v.component.update(y),t.set(f,v)}else v=n.createLineAxis(a,l,c,p,u),n.cache.set(f,v),t.set(f,v);var m=n.cache.get(d);if(m){var y=n.getLineGridCfg(a,l,p,u);omit(y,OMIT_CFG),m.component.update(y),t.set(d,m)}else m=n.createLineGrid(a,l,c,p,u),m&&(n.cache.set(d,m),t.set(d,m))}else if(g.isPolar){var v=n.cache.get(f);if(v){var y=g.isTransposed?n.getCircleAxisCfg(a,l,DIRECTION.CIRCLE):n.getLineAxisCfg(a,l,DIRECTION.RADIUS);omit(y,OMIT_CFG),v.component.update(y),t.set(f,v)}else{if(g.isTransposed){if(isUndefined(l))return;v=n.createCircleAxis(a,l,c,DIRECTION.CIRCLE,u)}else v=n.createLineAxis(a,l,c,DIRECTION.RADIUS,u);n.cache.set(f,v),t.set(f,v)}var m=n.cache.get(d);if(m){var y=g.isTransposed?n.getLineGridCfg(a,l,DIRECTION.CIRCLE,u):n.getCircleGridCfg(a,l,DIRECTION.RADIUS,u);omit(y,OMIT_CFG),m.component.update(y),t.set(d,m)}else{if(g.isTransposed){if(isUndefined(l))return;m=n.createLineGrid(a,l,c,DIRECTION.CIRCLE,u)}else m=n.createCircleGrid(a,l,c,DIRECTION.RADIUS,u);m&&(n.cache.set(d,m),t.set(d,m))}}}}})},e.prototype.createLineAxis=function(t,n,i,a,o){var s={component:new LineAxis(this.getLineAxisCfg(t,n,a)),layer:i,direction:a===DIRECTION.RADIUS?DIRECTION.NONE:a,type:COMPONENT_TYPE.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createLineGrid=function(t,n,i,a,o){var s=this.getLineGridCfg(t,n,a,o);if(s){var l={component:new LineGrid(s),layer:i,direction:DIRECTION.NONE,type:COMPONENT_TYPE.GRID,extra:{dim:o,scale:t,alignTick:get(s,"alignTick",!0)}};return l.component.init(),l}},e.prototype.createCircleAxis=function(t,n,i,a,o){var s={component:new CircleAxis(this.getCircleAxisCfg(t,n,a)),layer:i,direction:a,type:COMPONENT_TYPE.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createCircleGrid=function(t,n,i,a,o){var s=this.getCircleGridCfg(t,n,a,o);if(s){var l={component:new CircleGrid(s),layer:i,direction:DIRECTION.NONE,type:COMPONENT_TYPE.GRID,extra:{dim:o,scale:t,alignTick:get(s,"alignTick",!0)}};return l.component.init(),l}},e.prototype.getLineAxisCfg=function(t,n,i){var a=get(n,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=getAxisRegion(o,i),l=getAxisTitleText(t,n),c=getAxisThemeCfg(this.view.getTheme(),i),u=get(n,["title"])?deepMix({title:{style:{text:l}}},{title:getAxisTitleOptions(this.view.getTheme(),i,n.title)},n):n,f=deepMix(__assign$1(__assign$1({container:a},s),{ticks:t.getTicks().map(function(_){return{id:"".concat(_.tickValue),name:_.text,value:_.value}}),verticalFactor:o.isPolar?getAxisFactorByRegion(s,o.getCenter())*-1:getAxisFactorByRegion(s,o.getCenter()),theme:c}),c,u),d=this.getAnimateCfg(f),g=d.animate,p=d.animateOption;f.animateOption=p,f.animate=g;var v=isVertical(s),y=get(f,"verticalLimitLength",v?1/3:1/2);if(y<=1){var m=this.view.getCanvas().get("width"),x=this.view.getCanvas().get("height");f.verticalLimitLength=y*(v?m:x)}return f},e.prototype.getLineGridCfg=function(t,n,i,a){if(showGrid(getAxisThemeCfg(this.view.getTheme(),i),n)){var o=getGridThemeCfg(this.view.getTheme(),i),s=deepMix({container:get(n,["top"])?this.gridForeContainer:this.gridContainer},o,get(n,"grid"),this.getAnimateCfg(n));return s.items=getLineGridItems(this.view.getCoordinate(),t,a,get(s,"alignTick",!0)),s}},e.prototype.getCircleAxisCfg=function(t,n,i){var a=get(n,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=t.getTicks().map(function(v){return{id:"".concat(v.tickValue),name:v.text,value:v.value}});!t.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.length&&(s[s.length-1].name="");var l=getAxisTitleText(t,n),c=getAxisThemeCfg(this.view.getTheme(),DIRECTION.CIRCLE),u=get(n,["title"])?deepMix({title:{style:{text:l}}},{title:getAxisTitleOptions(this.view.getTheme(),i,n.title)},n):n,f=deepMix(__assign$1(__assign$1({container:a},getCircleAxisCenterRadius(this.view.getCoordinate())),{ticks:s,verticalFactor:1,theme:c}),c,u),d=this.getAnimateCfg(f),g=d.animate,p=d.animateOption;return f.animate=g,f.animateOption=p,f},e.prototype.getCircleGridCfg=function(t,n,i,a){if(showGrid(getAxisThemeCfg(this.view.getTheme(),i),n)){var o=getGridThemeCfg(this.view.getTheme(),DIRECTION.RADIUS),s=deepMix({container:get(n,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,get(n,"grid"),this.getAnimateCfg(n)),l=get(s,"alignTick",!0),c=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=getCircleGridItems(this.view.getCoordinate(),c,t,l,a),s}},e.prototype.getId=function(t,n){var i=this.view.getCoordinate();return"".concat(t,"-").concat(n,"-").concat(i.type)},e.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&get(t,"animate"),animateOption:t&&t.animateOption?deepMix({},AXIS_DEFAULT_ANIMATE_CFG,t.animateOption):AXIS_DEFAULT_ANIMATE_CFG}},e}(Controller);function directionToPosition(r,e,t){return t===DIRECTION.TOP?[r.minX+r.width/2-e.width/2,r.minY]:t===DIRECTION.BOTTOM?[r.minX+r.width/2-e.width/2,r.maxY-e.height]:t===DIRECTION.LEFT?[r.minX,r.minY+r.height/2-e.height/2]:t===DIRECTION.RIGHT?[r.maxX-e.width,r.minY+r.height/2-e.height/2]:t===DIRECTION.TOP_LEFT||t===DIRECTION.LEFT_TOP?[r.tl.x,r.tl.y]:t===DIRECTION.TOP_RIGHT||t===DIRECTION.RIGHT_TOP?[r.tr.x-e.width,r.tr.y]:t===DIRECTION.BOTTOM_LEFT||t===DIRECTION.LEFT_BOTTOM?[r.bl.x,r.bl.y-e.height]:t===DIRECTION.BOTTOM_RIGHT||t===DIRECTION.RIGHT_BOTTOM?[r.br.x-e.width,r.br.y-e.height]:[0,0]}function getLegendOption(r,e){return isBoolean(r)?r===!1?!1:{}:get(r,[e],r)}function getDirection(r){return get(r,"position",DIRECTION.BOTTOM)}var Legend=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.container=n.view.getLayer(LAYER.FORE).addGroup(),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,each$1(this.components,function(n){var i=n.component,a=n.direction,o=getLegendLayout(a),s=i.get("maxWidthRatio"),l=i.get("maxHeightRatio"),c=t.getCategoryLegendSizeCfg(o,s,l),u=i.get("maxWidth"),f=i.get("maxHeight");i.update({maxWidth:Math.min(c.maxWidth,u||0),maxHeight:Math.min(c.maxHeight,f||0)});var d=i.get("padding"),g=i.getLayoutBBox(),p=new BBox(g.x,g.y,g.width,g.height).expand(d),v=__read(directionToPosition(t.view.viewBBox,p,a),2),y=v[0],m=v[1],x=__read(directionToPosition(t.layoutBBox,p,a),2),_=x[0],S=x[1],A=0,b=0;a.startsWith("top")||a.startsWith("bottom")?(A=y,b=S):(A=_,b=m),i.setLocation({x:A+d[3],y:b+d[0]}),t.layoutBBox=t.layoutBBox.cut(p,a)})},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var n={},i=function(d,g,p){var v=t.getId(p.field),y=t.getComponentById(v);if(y){var m=void 0,x=getLegendOption(t.option,p.field);x!==!1&&(get(x,"custom")?m=t.getCategoryCfg(d,g,p,x,!0):p.isLinear?m=t.getContinuousCfg(d,g,p,x):p.isCategory&&(m=t.getCategoryCfg(d,g,p,x))),m&&(omit(m,["container"]),y.direction=getDirection(x),y.component.update(m),n[v]=!0)}else{var _=t.createFieldLegend(d,g,p);_&&(_.component.init(),t.components.push(_),n[v]=!0)}};if(get(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);omit(s,["container"]),o.component.update(s),n[a]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var c=LAYER.FORE,u=getDirection(this.option);this.components.push({id:a,component:l,layer:c,direction:u,type:COMPONENT_TYPE.LEGEND,extra:void 0}),n[a]=!0}}}else this.loopLegends(i);var f=[];each$1(this.getComponents(),function(d){n[d.id]?f.push(d):d.component.destroy()}),this.components=f},e.prototype.clear=function(){r.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var n=this,i=t.geometries;return each$1(t.views,function(a){i=i.concat(n.getGeometries(a))}),i},e.prototype.loopLegends=function(t){var n=this.view.getRootView()===this.view;if(n){var i=this.getGeometries(this.view),a={};each$1(i,function(o){var s=o.getGroupAttributes();each$1(s,function(l){var c=l.getScale(l.type);!c||c.type==="identity"||a[c.field]||(t(o,l,c),a[c.field]=!0)})})}},e.prototype.createFieldLegend=function(t,n,i){var a,o=getLegendOption(this.option,i.field),s=LAYER.FORE,l=getDirection(o);if(o!==!1&&(get(o,"custom")?a=this.createCustomLegend(t,n,i,o):i.isLinear?a=this.createContinuousLegend(t,n,i,o):i.isCategory&&(a=this.createCategoryLegend(t,n,i,o))),a)return a.set("field",i.field),{id:this.getId(i.field),component:a,layer:s,direction:l,type:COMPONENT_TYPE.LEGEND,extra:{scale:i}}},e.prototype.createCustomLegend=function(t,n,i,a){var o=this.getCategoryCfg(t,n,i,a,!0);return new CategoryLegend(o)},e.prototype.createContinuousLegend=function(t,n,i,a){var o=this.getContinuousCfg(t,n,i,omit(a,["value"]));return new ContinuousLegend(o)},e.prototype.createCategoryLegend=function(t,n,i,a){var o=this.getCategoryCfg(t,n,i,a);return new CategoryLegend(o)},e.prototype.getContinuousCfg=function(t,n,i,a){var o=i.getTicks(),s=find$1(o,function(v){return v.value===0}),l=find$1(o,function(v){return v.value===1}),c=o.map(function(v){var y=v.value,m=v.tickValue,x=n.mapping(i.invert(y)).join("");return{value:m,attrValue:x,color:x,scaleValue:y}});s||c.push({value:i.min,attrValue:n.mapping(i.invert(0)).join(""),color:n.mapping(i.invert(0)).join(""),scaleValue:0}),l||c.push({value:i.max,attrValue:n.mapping(i.invert(1)).join(""),color:n.mapping(i.invert(1)).join(""),scaleValue:1}),c.sort(function(v,y){return v.value-y.value});var u={min:head(c).value,max:last(c).value,colors:[],rail:{type:n.type},track:{}};n.type==="size"&&(u.track={style:{fill:n.type==="size"?this.view.getTheme().defaultColor:void 0}}),n.type==="color"&&(u.colors=c.map(function(v){return v.attrValue}));var f=this.container,d=getDirection(a),g=getLegendLayout(d),p=get(a,"title");return p&&(p=deepMix({text:getName(i)},p)),u.container=f,u.layout=g,u.title=p,u.animateOption=DEFAULT_ANIMATE_CFG,this.mergeLegendCfg(u,a,"continuous")},e.prototype.getCategoryCfg=function(t,n,i,a,o){var s=this.container,l=get(a,"position",DIRECTION.BOTTOM),c=getLegendThemeCfg(this.view.getTheme(),l),u=get(c,["marker"]),f=get(a,"marker"),d=getLegendLayout(l),g=get(c,["pageNavigator"]),p=get(a,"pageNavigator"),v=o?getCustomLegendItems(u,f,a.items):getLegendItems(this.view,t,n,u,f),y=get(a,"title");y&&(y=deepMix({text:i?getName(i):""},y));var m=get(a,"maxWidthRatio"),x=get(a,"maxHeightRatio"),_=this.getCategoryLegendSizeCfg(d,m,x);_.container=s,_.layout=d,_.items=v,_.title=y,_.animateOption=DEFAULT_ANIMATE_CFG,_.pageNavigator=deepMix({},g,p);var S=this.mergeLegendCfg(_,a,l);S.reversed&&S.items.reverse();var A=get(S,"maxItemWidth");return A&&A<=1&&(S.maxItemWidth=this.view.viewBBox.width*A),S},e.prototype.mergeLegendCfg=function(t,n,i){var a=i.split("-")[0],o=getLegendThemeCfg(this.view.getTheme(),a);return deepMix({},o,t,n)},e.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},e.prototype.getComponentById=function(t){return find$1(this.components,function(n){return n.id===t})},e.prototype.getCategoryLegendSizeCfg=function(t,n,i){n===void 0&&(n=COMPONENT_MAX_VIEW_PERCENTAGE),i===void 0&&(i=COMPONENT_MAX_VIEW_PERCENTAGE);var a=this.view.viewBBox,o=a.width,s=a.height;return t==="vertical"?{maxWidth:o*n,maxHeight:s}:{maxWidth:o,maxHeight:s*i}},e}(Controller),Slider=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.onChangeFn=noop,n.resetMeasure=function(){n.clear()},n.onValueChange=function(i){var a=__read(i,2),o=a[0],s=a[1];n.start=o,n.end=s,n.changeViewData(o,s)},n.container=n.view.getLayer(LAYER.FORE).addGroup(),n.onChangeFn=throttle(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),n=t.start,i=t.end;isNil(this.start)&&(this.start=n,this.end=i);var a=this.view.getOptions().data;this.option&&!isEmpty(a)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var n=this.view.coordinateBBox.width,i=this.slider.component.get("padding"),a=__read(i,4),o=a[0];a[1],a[2];var s=a[3],l=this.slider.component.getLayoutBBox(),c=new BBox(l.x,l.y,Math.min(l.width,n),l.height).expand(i),u=this.getMinMaxText(this.start,this.end),f=u.minText,d=u.maxText,g=__read(directionToPosition(this.view.viewBBox,c,DIRECTION.BOTTOM),2);g[0];var p=g[1],v=__read(directionToPosition(this.view.coordinateBBox,c,DIRECTION.BOTTOM),2),y=v[0];v[1],this.slider.component.update(__assign$1(__assign$1({},this.getSliderCfg()),{x:y+s,y:p+o,width:this.width,start:this.start,end:this.end,minText:f,maxText:d})),this.view.viewBBox=this.view.viewBBox.cut(c,DIRECTION.BOTTOM)}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),n=new Slider$1(__assign$1({container:this.container},t));return n.init(),{component:n,layer:LAYER.FORE,direction:DIRECTION.BOTTOM,type:COMPONENT_TYPE.SLIDER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var n=this.getMinMaxText(this.start,this.end),i=n.minText,a=n.maxText;t=__assign$1(__assign$1({},t),{width:this.width,start:this.start,end:this.end,minText:i,maxText:a})}return this.slider.component.update(t),this.slider},e.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},e.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(isObject(this.option)){var n=__assign$1({data:this.getData()},get(this.option,"trendCfg",{}));t=deepMix({},t,this.getThemeOptions(),this.option),t=__assign$1(__assign$1({},t),{trendCfg:n})}return t.start=clamp(Math.min(isNil(t.start)?0:t.start,isNil(t.end)?1:t.end),0,1),t.end=clamp(Math.max(isNil(t.start)?0:t.start,isNil(t.end)?1:t.end),0,1),t},e.prototype.getData=function(){var t=this.view.getOptions().data,n=__read(this.view.getYScales(),1),i=n[0],a=this.view.getGroupScales();if(a.length){var o=a[0],s=o.field,l=o.ticks;return t.reduce(function(c,u){return u[s]===l[0]&&c.push(u[i.field]),c},[])}return t.map(function(c){return c[i.field]||0})},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return get(t,["components","slider","common"],{})},e.prototype.getMinMaxText=function(t,n){var i=this.view.getOptions().data,a=this.view.getXScale(),o=valuesOfKey(i,a.field);a.isLinear&&(o=o.sort());var s=o,l=size(i);if(!a||!l)return{};var c=size(s),u=Math.round(t*(c-1)),f=Math.round(n*(c-1)),d=get(s,[u]),g=get(s,[f]),p=this.getSliderCfg().formatter;return p&&(d=p(d,i[u],u),g=p(g,i[f],f)),{minText:d,maxText:g}},e.prototype.changeViewData=function(t,n){var i=this.view.getOptions().data,a=this.view.getXScale(),o=size(i);if(!(!a||!o)){var s=valuesOfKey(i,a.field),l=this.view.getXScale().isLinear?s.sort(function(g,p){return Number(g)-Number(p)}):s,c=l,u=size(c),f=Math.round(t*(u-1)),d=Math.round(n*(u-1));this.view.filter(a.field,function(g,p){var v=c.indexOf(g);return v>-1?isBetween$1(v,f,d):!0}),this.view.render(!0)}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},e}(Controller),DEFAULT_PADDING=0,DEFAULT_SIZE=8,DEFAULT_CATEGORY_SIZE=32,MIN_THUMB_LENGTH=20,Scrollbar=function(r){__extends$1(e,r);function e(t){var n=r.call(this,t)||this;return n.onChangeFn=noop,n.resetMeasure=function(){n.clear()},n.onValueChange=function(i){var a=i.ratio,o=n.getValidScrollbarCfg().animate;n.ratio=clamp(a,0,1);var s=n.view.getOptions().animate;o||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(s)},n.container=n.view.getLayer(LAYER.FORE).addGroup(),n.onChangeFn=throttle(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var n=this.view.coordinateBBox.width,i=this.scrollbar.component.get("padding"),a=this.scrollbar.component.getLayoutBBox(),o=new BBox(a.x,a.y,Math.min(a.width,n),a.height).expand(i),s=this.getScrollbarComponentCfg(),l=void 0,c=void 0;if(s.isHorizontal){var u=__read(directionToPosition(this.view.viewBBox,o,DIRECTION.BOTTOM),2);u[0];var f=u[1],d=__read(directionToPosition(this.view.coordinateBBox,o,DIRECTION.BOTTOM),2),g=d[0];d[1],l=g,c=f}else{var p=__read(directionToPosition(this.view.viewBBox,o,DIRECTION.RIGHT),2);p[0];var f=p[1],v=__read(directionToPosition(this.view.viewBBox,o,DIRECTION.RIGHT),2),g=v[0];v[1],l=g,c=f}l+=i[3],c+=i[0],this.trackLen?this.scrollbar.component.update(__assign$1(__assign$1({},s),{x:l,y:c,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(__assign$1(__assign$1({},s),{x:l,y:c})),this.view.viewBBox=this.view.viewBBox.cut(o,s.isHorizontal?DIRECTION.BOTTOM:DIRECTION.RIGHT)}},e.prototype.update=function(){this.render()},e.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},e.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},e.prototype.setValue=function(t){this.onValueChange({ratio:t})},e.prototype.getValue=function(){return this.ratio},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return get(t,["components","scrollbar","common"],{})},e.prototype.getScrollbarTheme=function(t){var n=get(this.view.getTheme(),["components","scrollbar"]),i=t||{},a=i.thumbHighlightColor,o=__rest(i,["thumbHighlightColor"]);return{default:deepMix({},get(n,["default","style"],{}),o),hover:deepMix({},get(n,["hover","style"],{}),{thumbColor:a})}},e.prototype.measureScrollbar=function(){var t=this.view.getXScale(),n=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var i=this.getScrollbarComponentCfg(),a=i.trackLen,o=i.thumbLen;this.trackLen=a,this.thumbLen=o,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=n},e.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*clamp(this.ratio,0,1)),n=Math.min(t+this.step-1,this.cnt-1);return[t,n]},e.prototype.changeViewData=function(t,n){var i=this,a=__read(t,2),o=a[0],s=a[1],l=this.getValidScrollbarCfg().type,c=l!=="vertical",u=valuesOfKey(this.data,this.xScaleCfg.field),f=this.view.getXScale().isLinear?u.sort(function(g,p){return Number(g)-Number(p)}):u,d=c?f:f.reverse();this.yScalesCfg.forEach(function(g){i.view.scale(g.field,{formatter:g.formatter,type:g.type,min:g.min,max:g.max,tickMethod:g.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(g){var p=d.indexOf(g);return p>-1?isBetween$1(p,o,s):!0}),this.view.render(!0)},e.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,n=t!=="vertical",i=new Scrollbar$1(__assign$1(__assign$1({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return i.init(),{component:i,layer:LAYER.FORE,direction:n?DIRECTION.BOTTOM:DIRECTION.RIGHT,type:COMPONENT_TYPE.SCROLLBAR}},e.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),n=this.trackLen?__assign$1(__assign$1({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):__assign$1({},t);return this.scrollbar.component.update(n),this.scrollbar},e.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,n=this.getValidScrollbarCfg(),i=n.type,a=n.categorySize,o=i!=="vertical";return Math.floor((o?t.width:t.height)/a)},e.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),n=this.getScrollbarData(),i=valuesOfKey(n,t.field);return size(i)},e.prototype.getScrollbarComponentCfg=function(){var t=this.view,n=t.coordinateBBox,i=t.viewBBox,a=this.getValidScrollbarCfg(),o=a.type,s=a.padding,l=a.width,c=a.height,u=a.style,f=o!=="vertical",d=__read(s,4),g=d[0],p=d[1],v=d[2],y=d[3],m=f?{x:n.minX+y,y:i.maxY-c-v}:{x:i.maxX-l-p,y:n.minY+g},x=this.getStep(),_=this.getCnt(),S=f?n.width-y-p:n.height-g-v,A=Math.max(S*clamp(x/_,0,1),MIN_THUMB_LENGTH);return __assign$1(__assign$1({},this.getThemeOptions()),{x:m.x,y:m.y,size:f?c:l,isHorizontal:f,trackLen:S,thumbLen:A,thumbOffset:0,theme:this.getScrollbarTheme(u)})},e.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:DEFAULT_CATEGORY_SIZE,width:DEFAULT_SIZE,height:DEFAULT_SIZE,padding:[0,0,0,0],animate:!0,style:{}};return isObject(this.option)&&(t=__assign$1(__assign$1({},t),this.option)),(!isObject(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[DEFAULT_PADDING,0,DEFAULT_PADDING,0]:[0,DEFAULT_PADDING,0,DEFAULT_PADDING]),t},e.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),n=this.getValidScrollbarCfg(),i=this.view.getOptions().data||[];return t.isReflect("y")&&n.type==="vertical"&&(i=__spreadArray$1([],__read(i),!1).reverse()),i},e}(Controller),DEFAULT_REGION_PATH_STYLE={fill:"#CCD6EC",opacity:.3};function getItemsOfView(r,e,t){var n,i,a,o,s,l,c=findItemsFromViewRecurisive(r,e,t);if(c.length){c=flatten(c);try{for(var u=__values(c),f=u.next();!f.done;f=u.next()){var d=f.value;try{for(var g=(a=void 0,__values(d)),p=g.next();!p.done;p=g.next()){var v=p.value,y=v.mappingData,m=y.x,x=y.y;v.x=isArray$3(m)?m[m.length-1]:m,v.y=isArray$3(x)?x[x.length-1]:x}}catch(I){a={error:I}}finally{try{p&&!p.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}}}catch(I){n={error:I}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}var _=t.shared;if(_===!1&&c.length>1){var S=c[0],A=Math.abs(e.y-S[0].y);try{for(var b=__values(c),C=b.next();!C.done;C=b.next()){var E=C.value,T=Math.abs(e.y-E[0].y);T<=A&&(S=E,A=T)}}catch(I){s={error:I}}finally{try{C&&!C.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}c=[S]}return uniq$2(flatten(c))}return[]}var ActiveRegion=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.show=function(t){var n=this.context.view,i=this.context.event,a=n.getController("tooltip").getTooltipCfg(),o=getItemsOfView(n,{x:i.x,y:i.y},a);if(!isEqual$1(o,this.items)&&(this.items=o,o.length)){var s=n.getXScale().field,l=o[0].data[s],c=[],u=n.geometries;if(each$1(u,function(k){if(k.type==="interval"||k.type==="schema"){var B=k.getElementsBy(function(N){var F=N.getData();return F[s]===l});c=c.concat(B)}}),c.length){var f=n.getCoordinate(),d=c[0].shape.getCanvasBBox(),g=c[0].shape.getCanvasBBox(),p=d;each$1(c,function(k){var B=k.shape.getCanvasBBox();f.isTransposed?(B.minY<d.minY&&(d=B),B.maxY>g.maxY&&(g=B)):(B.minX<d.minX&&(d=B),B.maxX>g.maxX&&(g=B)),p.x=Math.min(B.minX,p.minX),p.y=Math.min(B.minY,p.minY),p.width=Math.max(B.maxX,p.maxX)-p.x,p.height=Math.max(B.maxY,p.maxY)-p.y});var v=n.backgroundGroup,y=n.coordinateBBox,m=void 0;if(f.isRect){var x=n.getXScale(),_=t||{},S=_.appendRatio,A=_.appendWidth;isNil(A)&&(S=isNil(S)?x.isLinear?0:.25:S,A=f.isTransposed?S*g.height:S*d.width);var b=void 0,C=void 0,E=void 0,T=void 0;f.isTransposed?(b=y.minX,C=Math.min(g.minY,d.minY)-A,E=y.width,T=p.height+A*2):(b=Math.min(d.minX,g.minX)-A,C=y.minY,E=p.width+A*2,T=y.height),m=[["M",b,C],["L",b+E,C],["L",b+E,C+T],["L",b,C+T],["Z"]]}else{var I=head(c),w=last(c),M=getAngle$1(I.getModel(),f).startAngle,$=getAngle$1(w.getModel(),f).endAngle,P=f.getCenter(),R=f.getRadius(),L=f.innerRadius*R;m=getSectorPath(P.x,P.y,R,M,$,L)}if(this.regionPath)this.regionPath.attr("path",m),this.regionPath.show();else{var O=get(t,"style",DEFAULT_REGION_PATH_STYLE);this.regionPath=v.addShape({type:"path",name:"active-region",capture:!1,attrs:__assign$1(__assign$1({},O),{path:m})})}}}},e.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},e.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),r.prototype.destroy.call(this)},e}(Action),TooltipAction=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.show=function(){var t=this.context,n=t.event,i=t.view,a=i.isTooltipLocked();if(!a){var o=this.timeStamp,s=+new Date,l=get(t.view.getOptions(),"tooltip.showDelay",16);if(s-o>l){var c=this.location,u={x:n.x,y:n.y};(!c||!isEqual$1(c,u))&&this.showTooltip(i,u),this.timeStamp=s,this.location=u}}},e.prototype.hide=function(){var t=this.context.view,n=t.getController("tooltip"),i=this.context.event,a=i.clientX,o=i.clientY;n.isCursorEntered({x:a,y:o})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},e.prototype.showTooltip=function(t,n){t.showTooltip(n)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(Action),SiblingTooltip=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.showTooltip=function(t,n){var i=getSilbings(t);each$1(i,function(a){var o=getSiblingPoint(t,a,n);a.showTooltip(o)})},e.prototype.hideTooltip=function(t){var n=getSilbings(t);each$1(n,function(i){i.hideTooltip()})},e}(TooltipAction),EllipsisText=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.show=function(){var t=this.context,n=t.event,i=this.timeStamp,a=+new Date;if(a-i>16){var o=this.location,s={x:n.x,y:n.y};(!o||!isEqual$1(o,s))&&this.showTooltip(s),this.timeStamp=a,this.location=s}},e.prototype.hide=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var n=this.context,i=n.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update(__assign$1({title:o},t)),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,n=this.context.view,i=n.canvas,a={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},o=n.getTheme(),s=get(o,["components","tooltip","domStyles"],{}),l=new HtmlTooltip({parent:i.get("el").parentNode,region:a,visible:!1,crosshairs:null,domStyles:__assign$1({},deepMix({},s,(t={},t[CONTAINER_CLASS]={"max-width":"50%"},t[TITLE_CLASS]={"word-break":"break-all"},t)))});l.init(),l.setCapture(!1),this.tooltip=l},e}(Action),StateBase=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="",t}return e.prototype.hasState=function(t){return t.hasState(this.stateName)},e.prototype.setElementState=function(t,n){t.setState(this.stateName,n)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},e.prototype.clearViewState=function(t){var n=this,i=getElementsByState(t,this.stateName);each$1(i,function(a){n.setElementState(a,!1)})},e}(Action);function getItem(r){return get(r.get("delegateObject"),"item")}var ElementState=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return e.prototype.isItemIgnore=function(t,n){var i=this.ignoreListItemStates,a=i.filter(function(o){return n.hasState(t,o)});return!!a.length},e.prototype.setStateByComponent=function(t,n,i){var a=this.context.view,o=t.get("field"),s=getElements(a);this.setElementsStateByItem(s,o,n,i)},e.prototype.setStateByElement=function(t,n){this.setElementState(t,n)},e.prototype.isMathItem=function(t,n,i){var a=this.context.view,o=getScaleByField(a,n),s=getElementValue$1(t,n);return!isNil(s)&&i.name===o.getText(s)},e.prototype.setElementsStateByItem=function(t,n,i,a){var o=this;each$1(t,function(s){o.isMathItem(s,n,i)&&s.setState(o.stateName,a)})},e.prototype.setStateEnable=function(t){var n=getCurrentElement$1(this.context);if(n)isElementChange(this.context)&&this.setStateByElement(n,t);else{var i=getDelegationObject(this.context);if(isList(i)){var a=i.item,o=i.component;if(a&&o&&!this.isItemIgnore(a,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&getItem(s.fromShape)===getItem(s.toShape))return;this.setStateByComponent(o,a,t)}}}},e.prototype.toggle=function(){var t=getCurrentElement$1(this.context);if(t){var n=t.hasState(this.stateName);this.setElementState(t,!n)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(StateBase),ElementActive=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(ElementState),LinkByColor=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.cache={},t}return e.prototype.getColorScale=function(t,n){var i=n.geometry.getAttribute("color");if(!i)return null;var a=t.getScaleByField(i.getFields()[0]);return a},e.prototype.getLinkPath=function(t,n){var i=this.context.view,a=i.getCoordinate().isTransposed,o=t.shape.getCanvasBBox(),s=n.shape.getCanvasBBox(),l=a?[["M",o.minX,o.minY],["L",s.minX,s.maxY],["L",s.maxX,s.maxY],["L",o.maxX,o.minY],["Z"]]:[["M",o.maxX,o.minY],["L",s.minX,s.minY],["L",s.minX,s.maxY],["L",o.maxX,o.maxY],["Z"]];return l},e.prototype.addLinkShape=function(t,n,i,a){var o={opacity:.4,fill:n.shape.attr("fill")};t.addShape({type:"path",attrs:__assign$1(__assign$1({},deepMix({},o,isFunction(a)?a(o,n):a)),{path:this.getLinkPath(n,i)})})},e.prototype.linkByElement=function(t,n){var i=this,a=this.context.view,o=this.getColorScale(a,t);if(o){var s=getElementValue$1(t,o.field);if(!this.cache[s]){var l=getElementsByField(a,o.field,s),c=this.linkGroup,u=c.addGroup();this.cache[s]=u;var f=l.length;each$1(l,function(d,g){if(g<f-1){var p=l[g+1];i.addLinkShape(u,d,p,n)}})}}},e.prototype.removeLink=function(t){var n=this.getColorScale(this.context.view,t);if(n){var i=getElementValue$1(t,n.field);this.cache[i]&&(this.cache[i].remove(),this.cache[i]=null)}},e.prototype.link=function(t){var n=this.context;this.linkGroup||(this.linkGroup=n.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var i=getCurrentElement$1(n);i&&this.linkByElement(i,t==null?void 0:t.style)},e.prototype.unlink=function(){var t=getCurrentElement$1(this.context);t&&this.removeLink(t)},e.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},e}(Action),ElementRangeState=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},e.prototype.getIntersectElements=function(){var t=null;if(isMask(this.context))t=getMaskedElements(this.context,10);else{var n=this.startPoint,i=this.isStarted?this.getCurrentPoint():this.endPoint;if(!n||!i)return;var a={minX:Math.min(n.x,i.x),minY:Math.min(n.y,i.y),maxX:Math.max(n.x,i.x),maxY:Math.max(n.y,i.y)},o=this.context.view;t=getIntersectElements(o,a)}return t},e.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var n=getElements(this.context.view),i=this.getIntersectElements();i&&i.length?this.effectByRecord?this.setSiblingsStateByRecord(i,t):this.setElementsState(i,t,n):this.clear()}},e.prototype.setSiblingsStateByRecord=function(t,n){var i=this,a=this.context.view,o=getSilbings(a),s=t.map(function(u){return u.getModel().data}),l=a.getXScale().field,c=a.getYScales()[0].field;each$1(o,function(u){var f=getElements(u),d=f.filter(function(g){var p=g.getModel().data;return isInRecords(s,p,l,c)});i.setElementsState(d,n,f)})},e.prototype.setSiblingsState=function(t){var n=this,i=this.context.view,a=getSilbings(i);isMask(this.context)&&each$1(a,function(o){var s=getElements(o),l=getSiblingMaskElements(n.context,o,10);l&&l.length?n.setElementsState(l,t,s):n.clearViewState(o)})},e.prototype.setElementsState=function(t,n,i){var a=this;each$1(i,function(o){t.includes(o)?a.setElementState(o,n):a.setElementState(o,!1)})},e.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},e.prototype.clear=function(){var t=this,n=this.context.view;if(this.effectSiblings){var i=getSilbings(n);each$1(i,function(a){t.clearViewState(a)})}else this.clearViewState(n)},e}(StateBase),ElementRangeActive=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(ElementRangeState),ElementSingleState=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setStateEnable=function(t){var n=getCurrentElement$1(this.context);if(n){if(!isElementChange(this.context))return;t?(this.clear(),this.setElementState(n,!0)):this.hasState(n)&&this.setElementState(n,!1)}},e.prototype.toggle=function(){var t=getCurrentElement$1(this.context);if(t){var n=this.hasState(t);n||this.clear(),this.setElementState(t,!n)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(StateBase),ElementSingleActive=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(ElementSingleState),STATUS_UNACTIVE$3="inactive",STATUS_ACTIVE$3="active";function clearHighlight$1(r){var e=getElements(r);each$1(e,function(t){t.hasState(STATUS_ACTIVE$3)&&t.setState(STATUS_ACTIVE$3,!1),t.hasState(STATUS_UNACTIVE$3)&&t.setState(STATUS_UNACTIVE$3,!1)})}function setHighlightBy(r,e,t){each$1(r,function(n){e(n)?(n.hasState(STATUS_UNACTIVE$3)&&n.setState(STATUS_UNACTIVE$3,!1),n.setState(STATUS_ACTIVE$3,t)):(n.hasState(STATUS_ACTIVE$3)&&n.setState(STATUS_ACTIVE$3,!1),n.setState(STATUS_UNACTIVE$3,t))})}var STATUS_UNACTIVE$2=ELEMENT_STATE.INACTIVE,STATUS_ACTIVE$2=ELEMENT_STATE.ACTIVE,ElementHighlight=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=STATUS_ACTIVE$2,t}return e.prototype.setElementsStateByItem=function(t,n,i,a){var o=this,s=function(l){return o.isMathItem(l,n,i)};this.setHighlightBy(t,s,a)},e.prototype.setElementHighlight=function(t,n){n(t)?(t.hasState(STATUS_UNACTIVE$2)&&t.setState(STATUS_UNACTIVE$2,!1),t.setState(STATUS_ACTIVE$2,!0)):t.hasState(STATUS_ACTIVE$2)||t.setState(STATUS_UNACTIVE$2,!0)},e.prototype.setHighlightBy=function(t,n,i){var a=this;if(i)each$1(t,function(l){a.setElementHighlight(l,n)});else{var o=getElementsByState(this.context.view,STATUS_ACTIVE$2),s=!0;each$1(o,function(l){if(!n(l))return s=!1,!1}),s?this.clear():each$1(t,function(l){n(l)&&(l.hasState(STATUS_ACTIVE$2)&&l.setState(STATUS_ACTIVE$2,!1),l.setState(STATUS_UNACTIVE$2,!0))})}},e.prototype.setElementState=function(t,n){var i=this.context.view,a=getElements(i);this.setHighlightBy(a,function(o){return t===o},n)},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.context.view;clearHighlight$1(t)},e}(ElementState),HighlightColor=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setStateByElement=function(t,n){var i=this.context.view,a=t.geometry.getAttribute("color");if(a){var o=i.getScaleByField(a.getFields()[0]),s=getElementValue$1(t,o.field),l=getElements(i),c=l.filter(function(u){return getElementValue$1(u,o.field)===s});this.setHighlightBy(l,function(u){return c.includes(u)},n)}},e}(ElementHighlight),HighlightX=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setElementHighlight=function(t,n){n(t)?(t.hasState(STATUS_UNACTIVE$2)&&t.setState(STATUS_UNACTIVE$2,!1),t.setState(STATUS_ACTIVE$2,!0)):(t.setState(STATUS_UNACTIVE$2,!0),t.hasState(STATUS_ACTIVE$2)&&t.setState(STATUS_ACTIVE$2,!1))},e.prototype.setStateByElement=function(t,n){var i=this.context.view,a=i.getXScale(),o=getElementValue$1(t,a.field),s=getElements(i),l=s.filter(function(c){return getElementValue$1(c,a.field)===o});this.setHighlightBy(s,function(c){return l.includes(c)},n)},e.prototype.toggle=function(){var t=getCurrentElement$1(this.context);if(t){var n=t.hasState(this.stateName);this.setStateByElement(t,!n)}},e}(ElementHighlight),EVENTS$1;(function(r){r.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",r.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",r.BEFORE_CLEAR="element-range-highlight:beforeclear",r.AFTER_CLEAR="element-range-highlight:afterclear"})(EVENTS$1||(EVENTS$1={}));var ElementRangeHighlight=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.clearViewState=function(t){clearHighlight$1(t)},e.prototype.highlight=function(){var t=this.context,n=t.view,i=t.event,a=this.getIntersectElements(),o={view:n,event:i,highlightElements:a};n.emit(EVENTS$1.BEFORE_HIGHLIGHT,Event.fromData(n,EVENTS$1.BEFORE_HIGHLIGHT,o)),this.setState(),n.emit(EVENTS$1.AFTER_HIGHLIGHT,Event.fromData(n,EVENTS$1.AFTER_HIGHLIGHT,o))},e.prototype.clear=function(){var t=this.context.view;t.emit(EVENTS$1.BEFORE_CLEAR,Event.fromData(t,EVENTS$1.BEFORE_CLEAR,{})),r.prototype.clear.call(this),t.emit(EVENTS$1.AFTER_CLEAR,Event.fromData(t,EVENTS$1.AFTER_CLEAR,{}))},e.prototype.setElementsState=function(t,n,i){setHighlightBy(i,function(a){return t.indexOf(a)>=0},n)},e}(ElementRangeState),ElementSingleHighlight=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.highlight=function(){this.setState()},e.prototype.setElementState=function(t,n){var i=this.context.view,a=getElements(i);setHighlightBy(a,function(o){return t===o},n)},e.prototype.clear=function(){var t=this.context.view;clearHighlight$1(t)},e}(ElementSingleState),ElementRangeSelected=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(ElementRangeState),ElementMultipleSelected=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(ElementState),ElementSingleSelected=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(ElementSingleState),ListState=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return e.prototype.getTriggerListInfo=function(){var t=getDelegationObject(this.context),n=null;return isList(t)&&(n={item:t.item,list:t.component}),n},e.prototype.getAllowComponents=function(){var t=this,n=this.context.view,i=getComponents(n),a=[];return each$1(i,function(o){o.isList()&&t.allowSetStateByElement(o)&&a.push(o)}),a},e.prototype.hasState=function(t,n){return t.hasState(n,this.stateName)},e.prototype.clearAllComponentsState=function(){var t=this,n=this.getAllowComponents();each$1(n,function(i){i.clearItemsState(t.stateName)})},e.prototype.allowSetStateByElement=function(t){var n=t.get("field");if(!n)return!1;if(this.cfg&&this.cfg.componentNames){var i=t.get("name");if(this.cfg.componentNames.indexOf(i)===-1)return!1}var a=this.context.view,o=getScaleByField(a,n);return o&&o.isCategory},e.prototype.allowSetStateByItem=function(t,n){var i=this.ignoreItemStates;if(i.length){var a=i.filter(function(o){return n.hasState(t,o)});return a.length===0}return!0},e.prototype.setStateByElement=function(t,n,i){var a=t.get("field"),o=this.context.view,s=getScaleByField(o,a),l=getElementValue$1(n,a),c=s.getText(l);this.setItemsState(t,c,i)},e.prototype.setStateEnable=function(t){var n=this,i=getCurrentElement$1(this.context);if(i){var a=this.getAllowComponents();each$1(a,function(c){n.setStateByElement(c,i,t)})}else{var o=getDelegationObject(this.context);if(isList(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,t)}}},e.prototype.setItemsState=function(t,n,i){var a=this,o=t.getItems();each$1(o,function(s){s.name===n&&a.setItemState(t,s,i)})},e.prototype.setItemState=function(t,n,i){t.setItemState(n,this.stateName,i)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.reset=function(){this.setStateEnable(!1)},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var n=t.list,i=t.item,a=this.hasState(n,i);this.setItemState(n,i,!a)}},e.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},e}(Action),ListActive=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(ListState),STATUS_UNACTIVE$1="inactive",STATUS_ACTIVE$1="active";function clearList(r){var e=r.getItems();each$1(e,function(t){r.hasState(t,STATUS_ACTIVE$1)&&r.setItemState(t,STATUS_ACTIVE$1,!1),r.hasState(t,STATUS_UNACTIVE$1)&&r.setItemState(t,STATUS_UNACTIVE$1,!1)})}var STATUS_UNACTIVE="inactive",STATUS_ACTIVE="active",ListHighlight=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=STATUS_ACTIVE,t.ignoreItemStates=["unchecked"],t}return e.prototype.setItemsState=function(t,n,i){this.setHighlightBy(t,function(a){return a.name===n},i)},e.prototype.setItemState=function(t,n,i){t.getItems(),this.setHighlightBy(t,function(a){return a===n},i)},e.prototype.setHighlightBy=function(t,n,i){var a=t.getItems();if(i)each$1(a,function(l){n(l)?(t.hasState(l,STATUS_UNACTIVE)&&t.setItemState(l,STATUS_UNACTIVE,!1),t.setItemState(l,STATUS_ACTIVE,!0)):t.hasState(l,STATUS_ACTIVE)||t.setItemState(l,STATUS_UNACTIVE,!0)});else{var o=t.getItemsByState(STATUS_ACTIVE),s=!0;each$1(o,function(l){if(!n(l))return s=!1,!1}),s?this.clear():each$1(a,function(l){n(l)&&(t.hasState(l,STATUS_ACTIVE)&&t.setItemState(l,STATUS_ACTIVE,!1),t.setItemState(l,STATUS_UNACTIVE,!0))})}},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)clearList(t.list);else{var n=this.getAllowComponents();each$1(n,function(i){i.clearItemsState(STATUS_ACTIVE),i.clearItemsState(STATUS_UNACTIVE)})}},e}(ListState),ListSelected=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(ListState),ListUnchecked=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="unchecked",t}return e.prototype.unchecked=function(){this.setState()},e}(ListState),STATUS_UNCHECKED$1="unchecked",STATUS_CHECKED="checked",ListChecked=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=STATUS_CHECKED,t}return e.prototype.setItemState=function(t,n,i){this.setCheckedBy(t,function(a){return a===n},i)},e.prototype.setCheckedBy=function(t,n,i){var a=t.getItems();i&&each$1(a,function(o){n(o)?(t.hasState(o,STATUS_UNCHECKED$1)&&t.setItemState(o,STATUS_UNCHECKED$1,!1),t.setItemState(o,STATUS_CHECKED,!0)):t.hasState(o,STATUS_CHECKED)||t.setItemState(o,STATUS_UNCHECKED$1,!0)})},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var n=t.list,i=t.item,a=!some(n.getItems(),function(o){return n.hasState(o,STATUS_UNCHECKED$1)});a||n.hasState(i,STATUS_UNCHECKED$1)?this.setItemState(n,i,!0):this.reset()}},e.prototype.checked=function(){this.setState()},e.prototype.reset=function(){var t=this.getAllowComponents();each$1(t,function(n){n.clearItemsState(STATUS_CHECKED),n.clearItemsState(STATUS_UNCHECKED$1)})},e}(ListState),STATUS_UNCHECKED="unchecked",ListFocus=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.toggle=function(){var t,n,i,a,o,s,l,c,u=this.getTriggerListInfo();if(u!=null&&u.item){var f=u.list,d=u.item,g=f.getItems(),p=g.filter(function(I){return!f.hasState(I,STATUS_UNCHECKED)}),v=g.filter(function(I){return f.hasState(I,STATUS_UNCHECKED)}),y=p[0];if(g.length===p.length)try{for(var m=__values(g),x=m.next();!x.done;x=m.next()){var _=x.value;f.setItemState(_,STATUS_UNCHECKED,_.id!==d.id)}}catch(I){t={error:I}}finally{try{x&&!x.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}else if(g.length-v.length===1)if(y.id===d.id)try{for(var S=__values(g),A=S.next();!A.done;A=S.next()){var _=A.value;f.setItemState(_,STATUS_UNCHECKED,!1)}}catch(I){i={error:I}}finally{try{A&&!A.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}else try{for(var b=__values(g),C=b.next();!C.done;C=b.next()){var _=C.value;f.setItemState(_,STATUS_UNCHECKED,_.id!==d.id)}}catch(I){o={error:I}}finally{try{C&&!C.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}else try{for(var E=__values(g),T=E.next();!T.done;T=E.next()){var _=T.value;f.setItemState(_,STATUS_UNCHECKED,_.id!==d.id)}}catch(I){l={error:I}}finally{try{T&&!T.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}}},e}(ListState),STATUS_SHOW="showRadio",TIP_ID="legend-radio-tip",ListRadio=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.show=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var n=t.list,i=t.item;n.setItemState(i,STATUS_SHOW,!0)}},e.prototype.hide=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var n=t.list,i=t.item;n.setItemState(i,STATUS_SHOW,!1)}},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.showTip=function(){var t=this.context,n=t.event,i=this.timeStamp,a=+new Date,o=this.context.event.target;if(a-i>16&&o.get("name")==="legend-item-radio"){var s=this.location,l={x:n.x,y:n.y};this.timeStamp=a,this.location=l,(!s||!isEqual$1(s,l))&&this.showTooltip(l)}},e.prototype.hideTip=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var n=this.context,i=n.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=n.view.getCanvas().get("el").getBoundingClientRect(),s=o.x,l=o.y;this.tooltip.update(__assign$1(__assign$1({title:a.get("tip")},t),{x:t.x+s,y:t.y+l})),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,n=(t={},t[CONTAINER_CLASS]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[TITLE_CLASS]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(TIP_ID)&&document.body.removeChild(document.getElementById(TIP_ID));var i=new HtmlTooltip({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:n,containerId:TIP_ID});i.init(),i.setCapture(!1),this.tooltip=i},e}(ListState),MaskBase=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var n="mask:".concat(t),i=this.context.view,a=this.context.event;i.emit(n,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},e.prototype.createMask=function(){var t=this.context.view,n=this.getMaskAttrs(),i=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:__assign$1({fill:"#C5D4EB",opacity:.3},n)});return i},e.prototype.getMaskPath=function(){return[]},e.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},e.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},e.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),n=this.preMovePoint,i=t.x-n.x,a=t.y-n.y,o=this.points;each$1(o,function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},e.prototype.updateMask=function(t){var n=deepMix({},this.getMaskAttrs(),t);this.maskShape.attr(n)},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},e.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},e.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},e.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,r.prototype.destroy.call(this)},e}(Action);function getMaskAttrs$3(r){var e=last(r),t=0,n=0,i=0;if(r.length){var a=r[0];t=distance$2(a,e)/2,n=(e.x+a.x)/2,i=(e.y+a.y)/2}return{x:n,y:i,r:t}}var CircleMask=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="circle",t}return e.prototype.getMaskAttrs=function(){return getMaskAttrs$3(this.points)},e}(MaskBase);function getRegion$1(r){return{start:head(r),end:last(r)}}function getMaskAttrs$2(r,e){var t=Math.min(r.x,e.x),n=Math.min(r.y,e.y),i=Math.abs(e.x-r.x),a=Math.abs(e.y-r.y);return{x:t,y:n,width:i,height:a}}var RectMask=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="rect",t}return e.prototype.getRegion=function(){return getRegion$1(this.points)},e.prototype.getMaskAttrs=function(){var t=this.getRegion(),n=t.start,i=t.end;return getMaskAttrs$2(n,i)},e}(MaskBase);function clampPoint(r){r.x=clamp(r.x,0,1),r.y=clamp(r.y,0,1)}function getRegion(r,e,t,n){var i=null,a=null,o=n.invert(head(r)),s=n.invert(last(r));return t&&(clampPoint(o),clampPoint(s)),e==="x"?(i=n.convert({x:o.x,y:0}),a=n.convert({x:s.x,y:1})):(i=n.convert({x:0,y:o.y}),a=n.convert({x:1,y:s.y})),{start:i,end:a}}var DimRect=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return e.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return getRegion(this.points,this.dim,this.inPlot,t)},e}(RectMask);function getMaskPath$1(r){var e=[];return r.length&&(each$1(r,function(t,n){n===0?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])}),e.push(["L",r[0].x,r[0].y])),e}function getMaskAttrs$1(r){return{path:getMaskPath$1(r)}}var PathMask=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getMaskPath=function(){return getMaskPath$1(this.points)},e.prototype.getMaskAttrs=function(){return getMaskAttrs$1(this.points)},e.prototype.addPoint=function(){this.resize()},e}(MaskBase);function getMaskPath(r){return getSpline(r,!0)}function getMaskAttrs(r){return{path:getMaskPath(r)}}var SmoothPathMask=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getMaskPath=function(){return getMaskPath(this.points)},e.prototype.getMaskAttrs=function(){return getMaskAttrs(this.points)},e}(PathMask),MultipleMaskBase=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType="path",t.maskType="multi-mask",t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var n="".concat(this.maskType,":").concat(t),i=this.context.view,a=this.context.event,o={type:this.shapeType,name:this.maskType,get:function(s){return o.hasOwnProperty(s)?o[s]:void 0}};i.emit(n,{target:o,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:a.x,y:a.y})},e.prototype.createMask=function(t){var n=this.context.view,i=this.recordPoints[t],a=this.getMaskAttrs(i),o=n.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:__assign$1({fill:"#C5D4EB",opacity:.3},a)});this.maskShapes.push(o)},e.prototype.getMaskPath=function(t){return[]},e.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.show()}),this.emitEvent("show"))},e.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var n=this.recordPoints.length-1;this.createMask(n),this.updateShapesCapture(!1),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},e.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var t=this.getCurrentPoint(),n=this.preMovePoint,i=t.x-n.x,a=t.y-n.y,o=this.getCurMaskShapeIndex();o>-1&&(this.recordPoints[o].forEach(function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},e.prototype.updateMask=function(t){var n=this;this.recordPoints.forEach(function(i,a){var o=deepMix({},n.getMaskAttrs(i),t);n.maskShapes[a].attr(o)})},e.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},e.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.hide()}),this.emitEvent("hide"))},e.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},e.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(t){return t.remove()}),this.maskShapes=[],this.preMovePoint=null},e.prototype.clear=function(){var t=this.getCurMaskShapeIndex();t===-1?(this.recordPointClear(),this.maskShapes.forEach(function(n){return n.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},e.prototype.destroy=function(){this.clear(),r.prototype.destroy.call(this)},e.prototype.getRecordPoints=function(){var t;return __spreadArray$1([],__read((t=this.recordPoints)!==null&&t!==void 0?t:[]),!1)},e.prototype.recordPointStart=function(){var t=this.getRecordPoints(),n=this.getCurrentPoint();this.recordPoints=__spreadArray$1(__spreadArray$1([],__read(t),!1),[[n]],!1)},e.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),n=this.getCurrentPoint(),i=t.splice(-1,1)[0]||[];i.push(n),this.recordPoints=__spreadArray$1(__spreadArray$1([],__read(t),!1),[i],!1)},e.prototype.recordPointClear=function(){this.recordPoints=[]},e.prototype.updateShapesCapture=function(t){this.maskShapes.forEach(function(n){return n.set("capture",t)})},e.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex(function(n){var i=n.attrs,a=i.width,o=i.height,s=i.r,l=a===0||o===0||s===0;return!l&&n.isHit(t.x,t.y)})},e}(Action),RectMultiMask=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="rect",t}return e.prototype.getRegion=function(t){return getRegion$1(t)},e.prototype.getMaskAttrs=function(t){var n=this.getRegion(t),i=n.start,a=n.end;return getMaskAttrs$2(i,a)},e}(MultipleMaskBase),DimRectMultiMask=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return e.prototype.getRegion=function(t){var n=this.context.view.getCoordinate();return getRegion(t,this.dim,this.inPlot,n)},e}(RectMultiMask),CircleMultiMask=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="circle",t.getMaskAttrs=getMaskAttrs$3,t}return e}(MultipleMaskBase),PathMultiMask=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.getMaskPath=getMaskPath$1,t.getMaskAttrs=getMaskAttrs$1,t}return e.prototype.addPoint=function(){this.resize()},e}(MultipleMaskBase),SmoothPathMultiMask=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.getMaskPath=getMaskPath,t.getMaskAttrs=getMaskAttrs,t}return e}(PathMultiMask),CursorAction=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setCursor=function(t){var n=this.context.view;n.getCanvas().setCursor(t)},e.prototype.default=function(){this.setCursor("default")},e.prototype.pointer=function(){this.setCursor("pointer")},e.prototype.move=function(){this.setCursor("move")},e.prototype.crosshair=function(){this.setCursor("crosshair")},e.prototype.wait=function(){this.setCursor("wait")},e.prototype.help=function(){this.setCursor("help")},e.prototype.text=function(){this.setCursor("text")},e.prototype.eResize=function(){this.setCursor("e-resize")},e.prototype.wResize=function(){this.setCursor("w-resize")},e.prototype.nResize=function(){this.setCursor("n-resize")},e.prototype.sResize=function(){this.setCursor("s-resize")},e.prototype.neResize=function(){this.setCursor("ne-resize")},e.prototype.nwResize=function(){this.setCursor("nw-resize")},e.prototype.seResize=function(){this.setCursor("se-resize")},e.prototype.swResize=function(){this.setCursor("sw-resize")},e.prototype.nsResize=function(){this.setCursor("ns-resize")},e.prototype.ewResize=function(){this.setCursor("ew-resize")},e.prototype.zoomIn=function(){this.setCursor("zoom-in")},e.prototype.zoomOut=function(){this.setCursor("zoom-out")},e}(Action),DataFilter=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.filterView=function(t,n,i){var a=this;t.getScaleByField(n)&&t.filter(n,i),t.views&&t.views.length&&each$1(t.views,function(o){a.filterView(o,n,i)})},e.prototype.filter=function(){var t=getDelegationObject(this.context);if(t){var n=this.context.view,i=t.component,a=i.get("field");if(isList(t)){if(a){var o=i.getItemsByState("unchecked"),s=getScaleByField(n,a),l=o.map(function(g){return g.name});l.length?this.filterView(n,a,function(g){var p=s.getText(g);return!l.includes(p)}):this.filterView(n,a,null),n.render(!0)}}else if(isSlider(t)){var c=i.getValue(),u=__read(c,2),f=u[0],d=u[1];this.filterView(n,a,function(g){return g>=f&&g<=d}),n.render(!0)}}},e}(Action);function getFilter(r,e,t,n){var i=Math.min(t[e],n[e]),a=Math.max(t[e],n[e]),o=__read(r.range,2),s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var c=r.invert(i),u=r.invert(a);if(r.isCategory){var f=r.values.indexOf(c),d=r.values.indexOf(u),g=r.values.slice(f,d+1);return function(p){return g.includes(p)}}else return function(p){return p>=c&&p<=u}}var EVENTS;(function(r){r.FILTER="brush-filter-processing",r.RESET="brush-filter-reset",r.BEFORE_FILTER="brush-filter:beforefilter",r.AFTER_FILTER="brush-filter:afterfilter",r.BEFORE_RESET="brush-filter:beforereset",r.AFTER_RESET="brush-filter:afterreset"})(EVENTS||(EVENTS={}));var RangeFilter=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},e.prototype.filter=function(){var t,n;if(isMask(this.context)){var i=this.context.event.target,a=i.getCanvasBBox();t={x:a.x,y:a.y},n={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;t=this.startPoint,n=this.context.getCurrentPoint()}if(!(Math.abs(t.x-n.x)<5||Math.abs(t.x-n.y)<5)){var o=this.context,s=o.view,l=o.event,c={view:s,event:l,dims:this.dims};s.emit(EVENTS.BEFORE_FILTER,Event.fromData(s,EVENTS.BEFORE_FILTER,c));var u=s.getCoordinate(),f=u.invert(n),d=u.invert(t);if(this.hasDim("x")){var g=s.getXScale(),p=getFilter(g,"x",f,d);this.filterView(s,g.field,p)}if(this.hasDim("y")){var v=s.getYScales()[0],p=getFilter(v,"y",f,d);this.filterView(s,v.field,p)}this.reRender(s,{source:EVENTS.FILTER}),s.emit(EVENTS.AFTER_FILTER,Event.fromData(s,EVENTS.AFTER_FILTER,c))}},e.prototype.end=function(){this.isStarted=!1},e.prototype.reset=function(){var t=this.context.view;if(t.emit(EVENTS.BEFORE_RESET,Event.fromData(t,EVENTS.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var n=t.getXScale();this.filterView(t,n.field,null)}if(this.hasDim("y")){var i=t.getYScales()[0];this.filterView(t,i.field,null)}this.reRender(t,{source:EVENTS.RESET}),t.emit(EVENTS.AFTER_RESET,Event.fromData(t,EVENTS.AFTER_RESET,{}))},e.prototype.filterView=function(t,n,i){t.filter(n,i)},e.prototype.reRender=function(t,n){t.render(!0,n)},e}(Action),SiblingFilter$1=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.filterView=function(t,n,i){var a=getSilbings(t);each$1(a,function(o){o.filter(n,i)})},e.prototype.reRender=function(t){var n=getSilbings(t);each$1(n,function(i){i.render(!0)})},e}(RangeFilter),ElementFilter=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.filter=function(){var t=getDelegationObject(this.context),n=this.context.view,i=getElements(n);if(isMask(this.context)){var a=getMaskedElements(this.context,10);a&&each$1(i,function(v){a.includes(v)?v.show():v.hide()})}else if(t){var o=t.component,s=o.get("field");if(isList(t)){if(s){var l=o.getItemsByState("unchecked"),c=getScaleByField(n,s),u=l.map(function(v){return v.name});each$1(i,function(v){var y=getElementValue$1(v,s),m=c.getText(y);u.indexOf(m)>=0?v.hide():v.show()})}}else if(isSlider(t)){var f=o.getValue(),d=__read(f,2),g=d[0],p=d[1];each$1(i,function(v){var y=getElementValue$1(v,s);y>=g&&y<=p?v.show():v.hide()})}}},e.prototype.clear=function(){var t=getElements(this.context.view);each$1(t,function(n){n.show()})},e.prototype.reset=function(){this.clear()},e}(Action),SiblingFilter=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.byRecord=!1,t}return e.prototype.filter=function(){isMask(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},e.prototype.filterByRecord=function(){var t=this.context.view,n=getMaskedElements(this.context,10);if(n){var i=t.getXScale().field,a=t.getYScales()[0].field,o=n.map(function(l){return l.getModel().data}),s=getSilbings(t);each$1(s,function(l){var c=getElements(l);each$1(c,function(u){var f=u.getModel().data;isInRecords(o,f,i,a)?u.show():u.hide()})})}},e.prototype.filterByBBox=function(){var t=this,n=this.context.view,i=getSilbings(n);each$1(i,function(a){var o=getSiblingMaskElements(t.context,a,10),s=getElements(a);o&&each$1(s,function(l){o.includes(l)?l.show():l.hide()})})},e.prototype.reset=function(){var t=getSilbings(this.context.view);each$1(t,function(n){var i=getElements(n);each$1(i,function(a){a.show()})})},e}(Action),PADDING_RIGHT$1=10,PADDING_TOP$2=5,ButtonAction$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return e.prototype.getButtonCfg=function(){return deepMix(this.buttonCfg,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),n=this.context.view.foregroundGroup.addGroup({name:t.name}),i=n.addShape({type:"text",name:"button-text",attrs:__assign$1({text:t.text},t.textStyle)}),a=i.getBBox(),o=parsePadding(t.padding),s=n.addShape({type:"rect",name:"button-rect",attrs:__assign$1({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},t.style)});s.toBack(),n.on("mouseenter",function(){s.attr(t.activeStyle)}),n.on("mouseleave",function(){s.attr(t.style)}),this.buttonGroup=n},e.prototype.resetPosition=function(){var t=this.context.view,n=t.getCoordinate(),i=n.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=transform$6(null,[["t",i.x-o.width-PADDING_RIGHT$1,i.y+o.height+PADDING_TOP$2]]);a.setMatrix(s)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),r.prototype.destroy.call(this)},e}(Action),DISTANCE=4,Drag=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},e.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),n=this.context.view,i=this.context.event;this.dragStart?n.emit("drag",{target:i.target,x:i.x,y:i.y}):distance$2(t,this.startPoint)>DISTANCE&&(n.emit("dragstart",{target:i.target,x:i.x,y:i.y}),this.dragStart=!0)}},e.prototype.end=function(){if(this.dragStart){var t=this.context.view,n=this.context.event;t.emit("dragend",{target:n.target,x:n.x,y:n.y})}this.starting=!1,this.dragStart=!1},e}(Action),MIN_DISTANCE=5,Move=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},e.prototype.move=function(){if(this.starting){var t=this.startPoint,n=this.context.getCurrentPoint(),i=distance$2(t,n);if(i>MIN_DISTANCE&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=transform$6(this.startMatrix,[["t",n.x-t.x,n.y-t.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},e.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},e.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},e}(Action),DIM_X="x",DIM_Y="y",ScaleTranslate$2=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dims=[DIM_X,DIM_Y],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.getScale=function(t){var n=this.context.view;return t==="x"?n.getXScale():n.getYScales()[0]},e.prototype.resetDim=function(t){var n=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var i=this.getScale(t);n.scale(i.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},e.prototype.reset=function(){this.resetDim(DIM_X),this.resetDim(DIM_Y);var t=this.context.view;t.render(!0)},e}(Action),ScaleTranslate$1=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return e.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var n=this.dims;each$1(n,function(i){var a=t.getScale(i),o=a.min,s=a.max,l=a.values;t.startCache[i]={min:o,max:s,values:l}})},e.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},e.prototype.translate=function(){var t=this;if(this.starting){var n=this.startPoint,i=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=i.invert(n),s=i.invert(a),l=s.x-o.x,c=s.y-o.y,u=this.context.view,f=this.dims;each$1(f,function(d){t.translateDim(d,{x:l*-1,y:c*-1})}),u.render(!0)}},e.prototype.translateDim=function(t,n){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.translateLinear(t,i,n)}},e.prototype.translateLinear=function(t,n,i){var a=this.context.view,o=this.startCache[t],s=o.min,l=o.max,c=l-s,u=i[t]*c;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:n.nice,min:s,max:l}),a.scale(n.field,{nice:!1,min:s+u,max:l+u})},e.prototype.reset=function(){r.prototype.reset.call(this),this.startPoint=null,this.starting=!1},e}(ScaleTranslate$2),ScaleTranslate=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.zoomRatio=.05,t}return e.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},e.prototype.zoom=function(t){var n=this,i=this.dims;each$1(i,function(a){n.zoomDim(a,t)}),this.context.view.render(!0)},e.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},e.prototype.zoomDim=function(t,n){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.zoomLinear(t,i,n)}},e.prototype.zoomLinear=function(t,n,i){var a=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:n.nice,min:n.min,max:n.max});var o=this.cacheScaleDefs[t],s=o.max-o.min,l=n.min,c=n.max,u=i*s,f=l-u,d=c+u,g=d-f,p=g/s;d>f&&p<100&&p>.01&&a.scale(n.field,{nice:!1,min:l-u,max:c+u})},e}(ScaleTranslate$2);function isWheelDown$1(r){var e=r.gEvent.originalEvent;return e.deltaY>0}var DEFAULT_WHEELDELTA=1,MousewheelScroll=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.scroll=function(t){var n=this.context,i=n.view,a=n.event;if(i.getOptions().scrollbar){var o=(t==null?void 0:t.wheelDelta)||DEFAULT_WHEELDELTA,s=i.getController("scrollbar"),l=i.getXScale(),c=i.getOptions().data,u=size(valuesOfKey(c,l.field)),f=size(l.values),d=s.getValue(),g=Math.floor((u-f)*d),p=g+(isWheelDown$1(a)?o:-o),v=o/(u-f)/1e4,y=clamp(p/(u-f)+v,0,1);s.setValue(y)}},e}(Action),AXIS_DESCRIPTION_TOOLTIP="aixs-description-tooltip",AxisDescription=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.show=function(){var t=this.context,n=getDelegationObject(t).axis,i=n.cfg.title,a=i.description,o=i.text,s=i.descriptionTooltipStyle,l=t.event,c=l.x,u=l.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:o||"",customContent:function(){return`
          <div class="`.concat(CONTAINER_CLASS,'" style={').concat(s,`}>
            <div class="`).concat(TITLE_CLASS,`">
              字段说明：`).concat(a,`
            </div>
          </div>
        `)},x:c,y:u}),this.tooltip.show()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,n=this.context.view,i=n.canvas,a={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},o=new HtmlTooltip({parent:i.get("el").parentNode,region:a,visible:!1,containerId:AXIS_DESCRIPTION_TOOLTIP,domStyles:__assign$1({},deepMix({},(t={},t[CONTAINER_CLASS]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[TITLE_CLASS]={"word-break":"break-all","margin-bottom":"3px"},t)))});o.init(),o.setCapture(!1),this.tooltip=o},e}(Action);registerTheme("dark",createThemeByStyleSheet(antvDark));registerEngine("canvas",CanvasEngine);registerEngine("svg",SVGEngine);registerGeometry("Polygon",Polygon);registerGeometry("Interval",Interval);registerGeometry("Schema",Schema);registerGeometry("Path",Path);registerGeometry("Point",Point);registerGeometry("Line",Line$1);registerGeometry("Area",Area$1);registerGeometry("Edge",Edge);registerGeometry("Heatmap",Heatmap);registerGeometry("Violin",Violin);registerGeometryLabel("base",GeometryLabel);registerGeometryLabel("interval",IntervalLabel);registerGeometryLabel("pie",PieLabel);registerGeometryLabel("polar",PolarLabel);registerGeometryLabelLayout("overlap",overlap);registerGeometryLabelLayout("distribute",distribute);registerGeometryLabelLayout("fixed-overlap",fixedOverlap);registerGeometryLabelLayout("hide-overlap",hideOverlap);registerGeometryLabelLayout("limit-in-shape",limitInShape);registerGeometryLabelLayout("limit-in-canvas",limitInCanvas);registerGeometryLabelLayout("limit-in-plot",limitInPlot$3);registerGeometryLabelLayout("pie-outer",pieOuterLabelLayout);registerGeometryLabelLayout("adjust-color",adjustColor);registerGeometryLabelLayout("interval-adjust-position",intervalAdjustPosition);registerGeometryLabelLayout("interval-hide-overlap",intervalHideOverlap);registerGeometryLabelLayout("point-adjust-position",pointAdjustPosition);registerGeometryLabelLayout("pie-spider",pieSpiderLabelLayout);registerGeometryLabelLayout("path-adjust-position",pathAdjustPosition);registerAnimation("fade-in",fadeIn);registerAnimation("fade-out",fadeOut);registerAnimation("grow-in-x",growInX);registerAnimation("grow-in-xy",growInXY);registerAnimation("grow-in-y",growInY);registerAnimation("scale-in-x",scaleInX);registerAnimation("scale-in-y",scaleInY);registerAnimation("wave-in",waveIn);registerAnimation("zoom-in",zoomIn);registerAnimation("zoom-out",zoomOut);registerAnimation("position-update",positionUpdate);registerAnimation("sector-path-update",sectorPathUpdate);registerAnimation("path-in",pathIn);registerFacet("rect",Rect);registerFacet("mirror",Mirror);registerFacet("list",List);registerFacet("matrix",Matrix);registerFacet("circle",Circle);registerFacet("tree",Tree);registerComponentController("axis",Axis);registerComponentController("legend",Legend);registerComponentController("tooltip",Tooltip);registerComponentController("annotation",Annotation);registerComponentController("slider",Slider);registerComponentController("scrollbar",Scrollbar);registerAction("tooltip",TooltipAction);registerAction("sibling-tooltip",SiblingTooltip);registerAction("ellipsis-text",EllipsisText);registerAction("element-active",ElementActive);registerAction("element-single-active",ElementSingleActive);registerAction("element-range-active",ElementRangeActive);registerAction("element-highlight",ElementHighlight);registerAction("element-highlight-by-x",HighlightX);registerAction("element-highlight-by-color",HighlightColor);registerAction("element-single-highlight",ElementSingleHighlight);registerAction("element-range-highlight",ElementRangeHighlight);registerAction("element-sibling-highlight",ElementRangeHighlight,{effectSiblings:!0,effectByRecord:!0});registerAction("element-selected",ElementMultipleSelected);registerAction("element-single-selected",ElementSingleSelected);registerAction("element-range-selected",ElementRangeSelected);registerAction("element-link-by-color",LinkByColor);registerAction("active-region",ActiveRegion);registerAction("list-active",ListActive);registerAction("list-selected",ListSelected);registerAction("list-highlight",ListHighlight);registerAction("list-unchecked",ListUnchecked);registerAction("list-checked",ListChecked);registerAction("list-focus",ListFocus);registerAction("list-radio",ListRadio);registerAction("legend-item-highlight",ListHighlight,{componentNames:["legend"]});registerAction("axis-label-highlight",ListHighlight,{componentNames:["axis"]});registerAction("axis-description",AxisDescription);registerAction("rect-mask",RectMask);registerAction("x-rect-mask",DimRect,{dim:"x"});registerAction("y-rect-mask",DimRect,{dim:"y"});registerAction("circle-mask",CircleMask);registerAction("path-mask",PathMask);registerAction("smooth-path-mask",SmoothPathMask);registerAction("rect-multi-mask",RectMultiMask);registerAction("x-rect-multi-mask",DimRectMultiMask,{dim:"x"});registerAction("y-rect-multi-mask",DimRectMultiMask,{dim:"y"});registerAction("circle-multi-mask",CircleMultiMask);registerAction("path-multi-mask",PathMultiMask);registerAction("smooth-path-multi-mask",SmoothPathMultiMask);registerAction("cursor",CursorAction);registerAction("data-filter",DataFilter);registerAction("brush",RangeFilter);registerAction("brush-x",RangeFilter,{dims:["x"]});registerAction("brush-y",RangeFilter,{dims:["y"]});registerAction("sibling-filter",SiblingFilter$1);registerAction("sibling-x-filter",SiblingFilter$1,{dims:"x"});registerAction("sibling-y-filter",SiblingFilter$1,{dims:"y"});registerAction("element-filter",ElementFilter);registerAction("element-sibling-filter",SiblingFilter);registerAction("element-sibling-filter-record",SiblingFilter,{byRecord:!0});registerAction("view-drag",Drag);registerAction("view-move",Move);registerAction("scale-translate",ScaleTranslate$1);registerAction("scale-zoom",ScaleTranslate);registerAction("reset-button",ButtonAction$1,{name:"reset-button",text:"reset"});registerAction("mousewheel-scroll",MousewheelScroll);function isPointInView$1(r){return r.isInPlot()}registerInteraction("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]});registerInteraction("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]});registerInteraction("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]});registerInteraction("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]});registerInteraction("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]});registerInteraction("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]});registerInteraction("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]});registerInteraction("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]});registerInteraction("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]});registerInteraction("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]});registerInteraction("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]});registerInteraction("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(r){return!r.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(r){return!r.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]});registerInteraction("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:isPointInView$1,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:isPointInView$1,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]});registerInteraction("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]});registerInteraction("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:isPointInView$1,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:isPointInView$1,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]});registerInteraction("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:"path-mask:start"},{trigger:"mousedown",isEnable:isPointInView$1,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]});registerInteraction("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:isPointInView$1,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(r){return!isMultipleMask(r)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]});registerInteraction("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]});registerInteraction("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(r){return!r.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]});registerInteraction("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]});registerInteraction("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]});registerInteraction("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]});registerInteraction("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});registerInteraction("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function isWheelDown(r){return r.gEvent.preventDefault(),r.gEvent.originalEvent.deltaY>0}registerInteraction("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(r){return isWheelDown(r.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(r){return!isWheelDown(r.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]});registerInteraction("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});registerInteraction("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var AXIS_META_CONFIG_KEYS=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],LEVEL;(function(r){r.ERROR="error",r.WARN="warn",r.INFO="log"})(LEVEL||(LEVEL={}));var BRAND="AntV/G2Plot";function getMessage(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=0;return"".concat(BRAND,": ").concat(r.replace(/%s/g,function(){return"".concat(e[n++])}))}function log(r,e,t){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];e||console[r](getMessage.apply(void 0,__spreadArray$1([t],n,!1)))}function pick(r,e){var t={};return r!==null&&typeof r=="object"&&e.forEach(function(n){var i=r[n];i!==void 0&&(t[n]=i)}),t}function adjustYMetaByZero(r,e){if(!r)return{};var t=r.filter(function(a){var o=get(a,[e]);return isNumber$1(o)&&!isNaN(o)}),n=t.every(function(a){return get(a,[e])>=0}),i=t.every(function(a){return get(a,[e])<=0});return n?{min:0}:i?{max:0}:{}}function transformDataToNodeLinkData(r,e,t,n,i){if(i===void 0&&(i=[]),!Array.isArray(r))return{nodes:[],links:[]};var a=[],o={},s=-1;return r.forEach(function(l){var c=l[e],u=l[t],f=l[n],d=pick(l,i);o[c]||(o[c]=__assign$1({id:++s,name:c},d)),o[u]||(o[u]=__assign$1({id:++s,name:u},d)),a.push(__assign$1({source:o[c].id,target:o[u].id,value:f},d))}),{nodes:Object.values(o).sort(function(l,c){return l.id-c.id}),links:a}}function processIllegalData(r,e){var t=filter(r,function(n){var i=n[e];return i===null||typeof i=="number"&&!isNaN(i)});return log(LEVEL.WARN,t.length===r.length,"illegal data existed in chart data."),t}var MAX_MIX_LEVEL=5,toString={}.toString,isType=function(r,e){return toString.call(r)==="[object "+e+"]"},isArray$2=function(r){return isType(r,"Array")},isObjectLike=function(r){return typeof r=="object"&&r!==null},isPlainObject=function(r){if(!isObjectLike(r)||!isType(r,"Object"))return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e},deep=function(r,e,t,n){t=t||0,n=n||MAX_MIX_LEVEL;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];a?isPlainObject(a)?(isPlainObject(r[i])||(r[i]={}),t<n?deep(r[i],a,t+1,n):r[i]=e[i]):isArray$2(a)?(r[i]=[],r[i]=r[i].concat(a)):r[i]=a:r[i]=a}},deepAssign=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)deep(r,e[n]);return r};function getContainerSize(r){if(!r)return{width:0,height:0};var e=getComputedStyle(r);return{width:(r.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(r.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function flow(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return r.reduce(function(n,i){return i(n)},t)}}function findGeometry(r,e){return r.geometries.find(function(t){return t.type===e})}function getAllElements(r){return reduce(r.geometries,function(e,t){return e.concat(t.elements)},[])}function getAllElementsRecursively(r){return get(r,["views","length"],0)<=0?getAllElements(r):reduce(r.views,function(e,t){return e.concat(getAllElementsRecursively(t))},getAllElements(r))}function getAllGeometriesRecursively(r){return get(r,["views","length"],0)<=0?r.geometries:reduce(r.views,function(e,t){return e.concat(t.geometries)},r.geometries)}function kebabCase(r){if(!r)return r;var e=r.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return e.map(function(t){return t.toLowerCase()}).join("-")}function transformLabel(r){if(!isType$1(r,"Object"))return r;var e=__assign$1({},r);return e.formatter&&!e.content&&(e.content=e.formatter),e}var ctx;function getCanvasContext(){return ctx||(ctx=document.createElement("canvas").getContext("2d")),ctx}memoize(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,i=n===void 0?"sans-serif":n,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant,l=getCanvasContext();l.font=[o,a,s,"".concat(t,"px"),i].join(" ");var c=l.measureText(isString(r)?r:"");return c.width},function(r,e){return e===void 0&&(e={}),__spreadArray$1([r],values(e),!0).join("")});function isRealNumber(r){return typeof r=="number"&&!isNaN(r)}function isBetween(r,e,t){var n=Math.min(e,t),i=Math.max(e,t);return r>=n&&r<=i}function normalPadding(r){if(isNumber$1(r))return[r,r,r,r];if(isArray$3(r)){var e=r.length;if(e===1)return[r[0],r[0],r[0],r[0]];if(e===2)return[r[0],r[1],r[0],r[1]];if(e===3)return[r[0],r[1],r[2],r[1]];if(e===4)return r}return[0,0,0,0]}function getAdjustAppendPadding(r,e,t){e===void 0&&(e="bottom"),t===void 0&&(t=25);var n=normalPadding(r),i=[e.startsWith("top")?t:0,e.startsWith("right")?t:0,e.startsWith("bottom")?t:0,e.startsWith("left")?t:0];return[n[0]+i[0],n[1]+i[1],n[2]+i[2],n[3]+i[3]]}function resolveAllPadding(r){var e=r.map(function(n){return normalPadding(n)}),t=[0,0,0,0];return e.length>0&&(t=t.map(function(n,i){return e.forEach(function(a,o){n+=e[o][i]}),n})),t}function points2Path(r,e){var t=[];if(r.length){t.push(["M",r[0].x,r[0].y]);for(var n=1,i=r.length;n<i;n+=1){var a=r[n];t.push(["L",a.x,a.y])}e&&t.push(["Z"])}return t}var smoothBezier=function(r,e,t,n){var i=[],a,o,s=!!n,l,c;if(s){l=[1/0,1/0],c=[-1/0,-1/0];for(var u=0,f=r.length;u<f;u++){var d=r[u];l=min$1([0,0],l,d),c=max$1([0,0],c,d)}l=min$1([0,0],l,n[0]),c=max$1([0,0],c,n[1])}for(var u=0,g=r.length;u<g;u++){var d=r[u];if(t)a=r[u?u-1:g-1],o=r[(u+1)%g];else if(u===0||u===g-1){i.push(d);continue}else a=r[u-1],o=r[u+1];var p=[0,0];p=sub(p,o,a),p=scale$3(p,p,e);var v=distance$6(d,a),y=distance$6(d,o),m=v+y;m!==0&&(v/=m,y/=m);var x=scale$3([0,0],p,-v),_=scale$3([0,0],p,y),S=add([0,0],d,x),A=add([0,0],d,_);s&&(S=max$1([0,0],S,l),S=min$1([0,0],S,c),A=max$1([0,0],A,l),A=min$1([0,0],A,c)),i.push(S),i.push(A)}return t&&i.push(i.shift()),i};function catmullRom2bezier(r,e,t){for(var n=!!e,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=smoothBezier(i,.4,n,t),l=i.length,c=[],u,f,d,a=0;a<l-1;a++)u=s[a*2],f=s[a*2+1],d=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]]);return n&&(u=s[l],f=s[l+1],d=i[0],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]])),c}function getSplinePath(r,e,t){var n=[],i=r[0],a=null;if(r.length<=2)return points2Path(r,e);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!a||!(a.x===l.x&&a.y===l.y))&&(n.push(l.x),n.push(l.y),a=l)}var c=t||[[0,0],[1,1]],u=catmullRom2bezier(n,e,c);return u.unshift(["M",i.x,i.y]),u}function adapteStyle(r){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},t=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];get(r,"fill")&&(e.color=r.fill);var n=pick(r,t),i=n.shadowColor,a=n.shadowBlur,o=a===void 0?0:a,s=n.shadowOffsetX,l=s===void 0?0:s,c=n.shadowOffsetY,u=c===void 0?0:c;e["text-shadow"]="".concat([i,"".concat(l,"px"),"".concat(u,"px"),"".concat(o,"px")].join(" "));var f=pick(r,t),d=f.stroke,g=f.lineWidth,p=g===void 0?0:g;return e["-webkit-text-stroke"]="".concat(["".concat(p,"px"),d].join(" ")),each$1(r,function(v,y){["fontSize"].includes(y)&&isNumber$1(v)?e[kebabCase(y)]="".concat(v,"px"):y&&!t.includes(y)&&(e[kebabCase(y)]="".concat(v))}),e}function setStatisticContainerStyle(r,e){r.style["pointer-events"]="none",each$1(e,function(t,n){n&&t&&(r.style[n]=t)})}var renderStatistic=function(r,e,t){var n=e.statistic,i=e.plotType,a=n.title,o=n.content;[a,o].forEach(function(s,l){if(s){var c="";l===0?c=o?"translate(-50%, -100%)":"translate(-50%, -50%)":c=a?"translate(-50%, 0)":"translate(-50%, -50%)";var u=isFunction(s.style)?s.style(t):s.style;r.annotation().html(__assign$1({position:["50%","50%"],html:function(f,d){var g=d.getCoordinate(),p=0;if(i==="pie"||i==="ring-progress")p=g.getRadius()*g.innerRadius*2;else if(i==="liquid"){var v=get(d.geometries,[0,"elements",0,"shape"]);if(v){var y=v.find(function(S){return S.get("name")==="wrap"}),m=y.getCanvasBBox().width;p=m}}else p||(p=g.getWidth());setStatisticContainerStyle(f,__assign$1({width:"".concat(p,"px"),transform:c},adapteStyle(u)));var x=d.getData();if(s.customHtml)return s.customHtml(f,d,t,x);var _=s.content;return s.formatter&&(_=s.formatter(t,x)),_?isString(_)?_:"".concat(_):"<div></div>"},key:"".concat(l===0?"top":"bottom","-statistic")},pick(s,["offsetX","offsetY","rotate","style","formatter"])))}})},renderGaugeStatistic=function(r,e,t){var n=e.statistic,i=n.title,a=n.content;[i,a].forEach(function(o){if(o){var s=isFunction(o.style)?o.style(t):o.style;r.annotation().html(__assign$1({position:["50%","100%"],html:function(l,c){var u=c.getCoordinate(),f=c.views[0].getCoordinate(),d=f.getCenter(),g=f.getRadius(),p=Math.max(Math.sin(f.startAngle),Math.sin(f.endAngle))*g,v=d.y+p-u.y.start-parseFloat(get(s,"fontSize",0)),y=u.getRadius()*u.innerRadius*2;setStatisticContainerStyle(l,__assign$1({width:"".concat(y,"px"),transform:"translate(-50%, ".concat(v,"px)")},adapteStyle(s)));var m=c.getData();if(o.customHtml)return o.customHtml(l,c,t,m);var x=o.content;return o.formatter&&(x=o.formatter(t,m)),x?isString(x)?x:"".concat(x):"<div></div>"}},pick(o,["offsetX","offsetY","rotate","style","formatter"])))}})};function template(r,e){return e?reduce(e,function(t,n,i){return t.replace(new RegExp("{\\s*".concat(i,"\\s*}"),"g"),n)},r):r}function findViewById(r,e){return r.views.find(function(t){return t.id===e})}function getViews(r){var e=r.parent;return e?e.views:[]}function getSiblingViews(r){return getViews(r).filter(function(e){return e!==r})}function addViewAnimation(r,e,t){t===void 0&&(t=r.geometries),typeof e=="boolean"?r.animate(e):r.animate(!0),each$1(t,function(n){var i;isFunction(e)?i=e(n.type||n.shapeType,n)||!0:i=e,n.animate(i)})}function getPixelRatio(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function initCanvas(r,e){e===void 0&&(e=r);var t=document.createElement("canvas"),n=getPixelRatio();t.width=r*n,t.height=e*n,t.style.width="".concat(r,"px"),t.style.height="".concat(e,"px");var i=t.getContext("2d");return i.scale(n,n),t}function drawBackground(r,e,t,n){n===void 0&&(n=t);var i=e.backgroundColor,a=e.opacity;r.globalAlpha=a,r.fillStyle=i,r.beginPath(),r.fillRect(0,0,t,n),r.closePath()}function getUnitPatternSize(r,e,t){var n=r+e;return t?n*2:n}function getSymbolsPosition(r,e){var t=e?[[r*.25,r*.25],[r*.75,r*.75]]:[[r*.5,r*.5]];return t}function transformMatrix(r,e){var t=e*Math.PI/180,n={a:Math.cos(t)*(1/r),b:Math.sin(t)*(1/r),c:-Math.sin(t)*(1/r),d:Math.cos(t)*(1/r),e:0,f:0};return n}var defaultDotPatternCfg={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function drawDot(r,e,t,n){var i=e.size,a=e.fill,o=e.lineWidth,s=e.stroke,l=e.fillOpacity;r.beginPath(),r.globalAlpha=l,r.fillStyle=a,r.strokeStyle=s,r.lineWidth=o,r.arc(t,n,i/2,0,2*Math.PI,!1),r.fill(),o&&r.stroke(),r.closePath()}function createDotPattern(r){var e=deepAssign({},defaultDotPatternCfg,r),t=e.size,n=e.padding,i=e.isStagger,a=e.rotation,o=getUnitPatternSize(t,n,i),s=getSymbolsPosition(o,i),l=initCanvas(o,o),c=l.getContext("2d");drawBackground(c,e,o);for(var u=0,f=s;u<f.length;u++){var d=f[u],g=d[0],p=d[1];drawDot(c,e,g,p)}var v=c.createPattern(l,"repeat");if(v){var y=getPixelRatio(),m=transformMatrix(y,a);v.setTransform(m)}return v}var defaultLinePatternCfg={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function drawLine(r,e,t){var n=e.stroke,i=e.lineWidth,a=e.strokeOpacity,o=new Path2D(t);r.globalAlpha=a,r.lineCap="square",r.strokeStyle=i?n:"transparent",r.lineWidth=i,r.stroke(o)}function createLinePattern(r){var e=deepAssign({},defaultLinePatternCfg,r),t=e.spacing,n=e.rotation,i=e.lineWidth,a=t+i||1,o=t+i||1,s=`
            M 0 0 L `.concat(a,` 0
            M 0 `).concat(o," L ").concat(a," ").concat(o,`
            `),l=initCanvas(a,o),c=l.getContext("2d");drawBackground(c,e,a,o),drawLine(c,e,s);var u=c.createPattern(l,"repeat");if(u){var f=getPixelRatio(),d=transformMatrix(f,n);u.setTransform(d)}return u}var defaultSquarePatternCfg={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function drawSquare(r,e,t,n){var i=e.stroke,a=e.size,o=e.fill,s=e.lineWidth,l=e.fillOpacity;r.globalAlpha=l,r.strokeStyle=i,r.lineWidth=s,r.fillStyle=o,r.strokeRect(t-a/2,n-a/2,a,a),r.fillRect(t-a/2,n-a/2,a,a)}function createSquarePattern(r){var e=deepAssign({},defaultSquarePatternCfg,r),t=e.size,n=e.padding,i=e.isStagger,a=e.rotation,o=getUnitPatternSize(t,n,i),s=getSymbolsPosition(o,i),l=initCanvas(o,o),c=l.getContext("2d");drawBackground(c,e,o);for(var u=0,f=s;u<f.length;u++){var d=f[u],g=d[0],p=d[1];drawSquare(c,e,g,p)}var v=c.createPattern(l,"repeat");if(v){var y=getPixelRatio(),m=transformMatrix(y,a);v.setTransform(m)}return v}function getCanvasPattern(r){var e=r.type,t=r.cfg,n;switch(e){case"dot":n=createDotPattern(t);break;case"line":n=createLinePattern(t);break;case"square":n=createSquarePattern(t);break}return n}function pattern(r){var e=this;return function(t){var n,i=t.options,a=t.chart,o=i.pattern;if(!o)return t;var s=function(l){for(var c,u,f,d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];var p=a.getTheme().defaultColor,v=p,y=(u=(c=a.geometries)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.getAttribute("color");if(y){var m=y.getFields()[0],x=get(l,m);v=Util.getMappingValue(y,x,((f=y.values)===null||f===void 0?void 0:f[0])||p)}var _=o;typeof o=="function"&&(_=o.call(e,l,v)),_ instanceof CanvasPattern||(_=getCanvasPattern(deepAssign({},{cfg:{backgroundColor:v}},_)));var S=i[r];return __assign$1(__assign$1({},typeof S=="function"?S.call.apply(S,__spreadArray$1([e,l],d,!1)):S||{}),{fill:_||v})};return deepAssign({},t,{options:(n={},n[r]=s,n)})}}function legend$g(r){var e=r.chart,t=r.options,n=t.legend,i=t.colorField,a=t.seriesField;return n===!1?e.legend(!1):(i||a)&&e.legend(i||a,n),r}function tooltip$9(r){var e=r.chart,t=r.options,n=t.tooltip;return n!==void 0&&e.tooltip(n),r}function interaction$8(r){var e=r.chart,t=r.options,n=t.interactions;return each$1(n,function(i){i.enable===!1?e.removeInteraction(i.type):e.interaction(i.type,i.cfg||{})}),r}function animation$5(r){var e=r.chart,t=r.options,n=t.animation;return addViewAnimation(e,n),r}function theme$2(r){var e=r.chart,t=r.options,n=t.theme;return n&&e.theme(n),r}function state(r){var e=r.chart,t=r.options,n=t.state;return n&&each$1(e.geometries,function(i){i.state(n)}),r}function slider$2(r){var e=r.chart,t=r.options,n=t.slider;return e.option("slider",n),r}function scrollbar(r){var e=r.chart,t=r.options,n=t.scrollbar;return e.option("scrollbar",n),r}function scale$2(r,e){return function(t){var n=t.chart,i=t.options,a={};return each$1(r,function(o,s){a[s]=pick(o,AXIS_META_CONFIG_KEYS)}),a=deepAssign({},e,i.meta,a),n.scale(a),t}}function annotation$2(r){return function(e){var t=e.chart,n=e.options,i=t.getController("annotation");return each$1(__spreadArray$1(__spreadArray$1([],n.annotations||[],!0),r||[],!0),function(a){i.annotation(a)}),e}}function limitInPlot$2(r){var e=r.chart,t=r.options,n=t.yAxis,i=t.limitInPlot,a=i;return isObject(n)&&isNil(i)&&(Object.values(pick(n,["min","max","minLimit","maxLimit"])).some(function(o){return!isNil(o)})?a=!0:a=!1),e.limitInPlot=a,r}function transformations(r){return r===void 0&&(r="rect"),function(e){var t=e.chart,n=e.options,i=n.coordinate,a=Array.from(i||[]).map(function(o){return o.type==="reflectX"?["reflect","x"]:o.type==="reflectY"?["reflect","y"]:o.type==="transpose"?["transpose"]:null}).filter(function(o){return!!o});return a.length!==0&&t.coordinate({type:r,actions:a}),e}}var GLOBAL={locale:"en-US"},LocaleMap={};function registerLocale(r,e){LocaleMap[r]=e}function getLocale(r){return{get:function(e,t){return template(get(LocaleMap[r],e)||get(LocaleMap[GLOBAL.locale],e)||get(LocaleMap["en-US"],e)||e,t)}}}var EN_US_LOCALE={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},ZH_CN_LOCALE={locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}};function getTooltipMapping(r,e){if(r===!1)return{fields:!1};var t=get(r,"fields"),n=get(r,"formatter");return n&&!t&&(t=e),{fields:t,formatter:n}}function getMappingField(r,e){var t=r.type,n=r.xField,i=r.yField,a=r.colorField,o=r.shapeField,s=r.sizeField,l=r.styleField,c=r.rawFields,u=[];if(c=(isFunction(c)?c(t,e):c)||[],e==="color")u=__spreadArray$1([a||n],c,!0);else if(e==="shape")u=__spreadArray$1([o||n],c,!0);else if(e==="size")u=__spreadArray$1([s||n],c,!0);else{u=__spreadArray$1([n,i,a,o,s,l],c,!0);var f=["x","y","color","shape","size","style"].indexOf(e),d=u[f];u.splice(f,1),u.unshift(d)}var g=uniq$2(u.filter(function(v){return!!v})),p=t==="line"&&[n,i].includes(g.join("*"))?"":g.join("*");return{mappingFields:g,tileMappingField:p}}function getMappingFunction(r,e){if(e)return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={};return r.forEach(function(a,o){i[a]=t[o]}),delete i.undefined,e(i)}}function geometry$x(r){var e=r.chart,t=r.options,n=t.type,i=t.args,a=t.mapping,o=t.xField,s=t.yField,l=t.colorField,c=t.shapeField,u=t.sizeField,f=t.tooltipFields,d=t.label,g=t.state,p=t.customInfo;if(!a)return r;var v=a.color,y=a.shape,m=a.size,x=a.style,_=a.tooltip,S=e[n](i).position("".concat(o,"*").concat(s));if(isString(v))l?S.color(l,v):S.color(v);else if(isFunction(v)){var A=getMappingField(t,"color"),b=A.mappingFields,C=A.tileMappingField;S.color(C,getMappingFunction(b,v))}else l&&S.color(l,v);if(isString(y))c?S.shape(c,[y]):S.shape(y);else if(isFunction(y)){var E=getMappingField(t,"shape"),b=E.mappingFields,C=E.tileMappingField;S.shape(C,getMappingFunction(b,y))}else c&&S.shape(c,y);if(isNumber$1(m))u?S.size(u,m):S.size(m);else if(isFunction(m)){var T=getMappingField(t,"size"),b=T.mappingFields,C=T.tileMappingField;S.size(C,getMappingFunction(b,m))}else u&&S.size(u,m);if(isFunction(x)){var I=getMappingField(t,"style"),b=I.mappingFields,C=I.tileMappingField;S.style(C,getMappingFunction(b,x))}else isObject(x)&&S.style(x);if(f===!1?S.tooltip(!1):isEmpty(f)||S.tooltip(f.join("*"),getMappingFunction(f,_)),d===!1)S.label(!1);else if(d){var w=d.callback,M=d.fields,$=__rest(d,["callback","fields"]);S.label({fields:M||[s],callback:w,cfg:transformLabel($)})}return g&&S.state(g),p&&S.customInfo(p),[o,s].filter(function(P){return P!==l}).forEach(function(P){e.legend(P,!1)}),__assign$1(__assign$1({},r),{ext:{geometry:S}})}function area(r){var e=r.options,t=e.area,n=e.xField,i=e.yField,a=e.seriesField,o=e.smooth,s=e.tooltip,l=e.useDeferredLabel,c=getTooltipMapping(s,[n,i,a]),u=c.fields,f=c.formatter;return t?geometry$x(deepAssign({},r,{options:{type:"area",colorField:a,tooltipFields:u,mapping:deepMix({shape:o?"smooth":"area",tooltip:f},t),args:{useDeferredLabel:l}}})):r}function edge(r){var e=r.options,t=e.edge,n=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=e.useDeferredLabel,l=getTooltipMapping(o,[n,i,a]),c=l.fields,u=l.formatter;return t?geometry$x(deepAssign({},r,{options:{type:"edge",colorField:a,tooltipFields:c,mapping:__assign$1({tooltip:u},t),args:{useDeferredLabel:s}}})):r}function otherAdaptor(r){var e=r.chart,t=r.options,n=r.ext,i=t.seriesField,a=t.isGroup,o=t.isStack,s=t.marginRatio,l=t.widthRatio,c=t.groupField,u=t.theme,f=[];if(i&&(a&&f.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),o&&f.push({type:"stack",marginRatio:s})),f.length&&(n!=null&&n.geometry)){var d=n==null?void 0:n.geometry;d.adjust(f)}return isNil(l)||e.theme(deepAssign({},isObject(u)?u:getTheme(u),{columnWidthRatio:l})),r}function interval(r){var e=r.options,t=e.xField,n=e.yField,i=e.interval,a=e.seriesField,o=e.tooltip,s=e.minColumnWidth,l=e.maxColumnWidth,c=e.columnBackground,u=e.dodgePadding,f=e.intervalPadding,d=e.useDeferredLabel,g=getTooltipMapping(o,[t,n,a]),p=g.fields,v=g.formatter,y=(i?geometry$x(deepAssign({},r,{options:{type:"interval",colorField:a,tooltipFields:p,mapping:__assign$1({tooltip:v},i),args:{dodgePadding:u,intervalPadding:f,minColumnWidth:s,maxColumnWidth:l,background:c,useDeferredLabel:d}}})):r).ext;return otherAdaptor(__assign$1(__assign$1({},r),{ext:y}))}function line(r){var e=r.options,t=e.line,n=e.stepType,i=e.xField,a=e.yField,o=e.seriesField,s=e.smooth,l=e.connectNulls,c=e.tooltip,u=e.useDeferredLabel,f=getTooltipMapping(c,[i,a,o]),d=f.fields,g=f.formatter;return t?geometry$x(deepAssign({},r,{options:{type:"line",colorField:o,tooltipFields:d,mapping:deepMix({shape:n||(s?"smooth":"line"),tooltip:g},t),args:{connectNulls:l,useDeferredLabel:u}}})):r}function point(r){var e=r.options,t=e.point,n=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,s=e.shapeField,l=e.tooltip,c=e.useDeferredLabel,u=getTooltipMapping(l,[n,i,a,o,s]),f=u.fields,d=u.formatter;return t?geometry$x(deepAssign({},r,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:f,mapping:__assign$1({tooltip:d},t),args:{useDeferredLabel:c}}})):r}function polygon(r){var e=r.options,t=e.polygon,n=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=e.useDeferredLabel,l=getTooltipMapping(o,[n,i,a]),c=l.fields,u=l.formatter;return t?geometry$x(deepAssign({},r,{options:{type:"polygon",colorField:a,tooltipFields:c,mapping:__assign$1({tooltip:u},t),args:{useDeferredLabel:s}}})):r}function schema(r){var e=r.options,t=e.schema,n=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=e.useDeferredLabel,l=getTooltipMapping(o,[n,i,a]),c=l.fields,u=l.formatter;return t?geometry$x(deepAssign({},r,{options:{type:"schema",colorField:a,tooltipFields:c,mapping:__assign$1({tooltip:u},t),args:{useDeferredLabel:s}}})):r}function violin(r){var e=r.options,t=e.violin,n=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,s=e.tooltip,l=getTooltipMapping(s,[n,i,a,o]),c=l.fields,u=l.formatter;return t?geometry$x(deepAssign({},r,{options:{type:"violin",colorField:a,tooltipFields:c,mapping:__assign$1({tooltip:u},t)}})):r}var lib={},sensorPool={},id={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=1,t=function(){return"".concat(e++)};r.default=t})(id);var sensors={},object={},debounce={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,a=null;return function(){for(var o=this,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];clearTimeout(a),a=setTimeout(function(){n.apply(o,l)},i)}};r.default=e})(debounce);var constant$2={};Object.defineProperty(constant$2,"__esModule",{value:!0});constant$2.SizeSensorId=constant$2.SensorTabIndex=constant$2.SensorClassName=void 0;var SizeSensorId="size-sensor-id";constant$2.SizeSensorId=SizeSensorId;var SensorClassName="size-sensor-object";constant$2.SensorClassName=SensorClassName;var SensorTabIndex="-1";constant$2.SensorTabIndex=SensorTabIndex;Object.defineProperty(object,"__esModule",{value:!0});object.createSensor=void 0;var _debounce$1=_interopRequireDefault$2(debounce),_constant$2=constant$2;function _interopRequireDefault$2(r){return r&&r.__esModule?r:{default:r}}var createSensor$2=function r(e,t){var n=void 0,i=[],a=function(){getComputedStyle(e).position==="static"&&(e.style.position="relative");var f=document.createElement("object");return f.onload=function(){f.contentDocument.defaultView.addEventListener("resize",o),o()},f.style.display="block",f.style.position="absolute",f.style.top="0",f.style.left="0",f.style.height="100%",f.style.width="100%",f.style.overflow="hidden",f.style.pointerEvents="none",f.style.zIndex="-1",f.style.opacity="0",f.setAttribute("class",_constant$2.SensorClassName),f.setAttribute("tabindex",_constant$2.SensorTabIndex),f.type="text/html",e.appendChild(f),f.data="about:blank",f},o=(0,_debounce$1.default)(function(){i.forEach(function(u){u(e)})}),s=function(f){n||(n=a()),i.indexOf(f)===-1&&i.push(f)},l=function(){n&&n.parentNode&&(n.contentDocument&&n.contentDocument.defaultView.removeEventListener("resize",o),n.parentNode.removeChild(n),e.removeAttribute(_constant$2.SizeSensorId),n=void 0,i=[],t&&t())},c=function(f){var d=i.indexOf(f);d!==-1&&i.splice(d,1),i.length===0&&n&&l()};return{element:e,bind:s,destroy:l,unbind:c}};object.createSensor=createSensor$2;var resizeObserver={};Object.defineProperty(resizeObserver,"__esModule",{value:!0});resizeObserver.createSensor=void 0;var _constant$1=constant$2,_debounce=_interopRequireDefault$1(debounce);function _interopRequireDefault$1(r){return r&&r.__esModule?r:{default:r}}var createSensor$1=function r(e,t){var n=void 0,i=[],a=(0,_debounce.default)(function(){i.forEach(function(u){u(e)})}),o=function(){var f=new ResizeObserver(a);return f.observe(e),a(),f},s=function(f){n||(n=o()),i.indexOf(f)===-1&&i.push(f)},l=function(){n.disconnect(),i=[],n=void 0,e.removeAttribute(_constant$1.SizeSensorId),t&&t()},c=function(f){var d=i.indexOf(f);d!==-1&&i.splice(d,1),i.length===0&&n&&l()};return{element:e,bind:s,destroy:l,unbind:c}};resizeObserver.createSensor=createSensor$1;Object.defineProperty(sensors,"__esModule",{value:!0});sensors.createSensor=void 0;var _object=object,_resizeObserver=resizeObserver,createSensor=typeof ResizeObserver<"u"?_resizeObserver.createSensor:_object.createSensor;sensors.createSensor=createSensor;Object.defineProperty(sensorPool,"__esModule",{value:!0});sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var _id=_interopRequireDefault(id),_sensors=sensors,_constant=constant$2;function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}var Sensors={};sensorPool.Sensors=Sensors;function clean(r){r&&Sensors[r]&&delete Sensors[r]}var getSensor=function r(e){var t=e.getAttribute(_constant.SizeSensorId);if(t&&Sensors[t])return Sensors[t];var n=(0,_id.default)();e.setAttribute(_constant.SizeSensorId,n);var i=(0,_sensors.createSensor)(e,function(){return clean(n)});return Sensors[n]=i,i};sensorPool.getSensor=getSensor;var removeSensor=function r(e){var t=e.element.getAttribute(_constant.SizeSensorId);e.destroy(),clean(t)};sensorPool.removeSensor=removeSensor;Object.defineProperty(lib,"__esModule",{value:!0});lib.ver=lib.clear=bind_1=lib.bind=void 0;var _sensorPool=sensorPool,bind=function r(e,t){var n=(0,_sensorPool.getSensor)(e);return n.bind(t),function(){n.unbind(t)}},bind_1=lib.bind=bind,clear=function r(e){var t=(0,_sensorPool.getSensor)(e);(0,_sensorPool.removeSensor)(t)};lib.clear=clear;var ver="1.0.2";lib.ver=ver;var SOURCE_ATTRIBUTE_NAME="data-chart-source-type",PLOT_CONTAINER_OPTIONS=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Plot=function(r){__extends$1(e,r);function e(t,n){var i=r.call(this)||this;return i.container=typeof t=="string"?document.getElementById(t):t,i.options=deepAssign({},i.getDefaultOptions(),n),i.createG2(),i.bindEvents(),i}return e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var t=this.options,n=t.width,i=t.height,a=t.defaultInteractions;this.chart=new Chart(__assign$1(__assign$1(__assign$1(__assign$1({container:this.container,autoFit:!1},this.getChartSize(n,i)),{localRefresh:!1}),pick(this.options,PLOT_CONTAINER_OPTIONS)),{defaultInteractions:a})),this.container.setAttribute(SOURCE_ATTRIBUTE_NAME,"G2Plot")},e.prototype.getChartSize=function(t,n){var i=getContainerSize(this.container);return{width:t||i.width||400,height:n||i.height||400}},e.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",function(n){n!=null&&n.type&&t.emit(n.type,n)})},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(t){this.updateOption(t),this.render()},e.prototype.updateOption=function(t){this.options=deepAssign({},this.options,t)},e.prototype.setState=function(t,n,i){i===void 0&&(i=!0);var a=getAllElementsRecursively(this.chart);each$1(a,function(o){n(o.getData())&&o.setState(t,i)})},e.prototype.getStates=function(){var t=getAllElementsRecursively(this.chart),n=[];return each$1(t,function(i){var a=i.getData(),o=i.getStates();each$1(o,function(s){n.push({data:a,state:s,geometry:i.geometry,element:i})})}),n},e.prototype.changeData=function(t){this.update({data:t})},e.prototype.changeSize=function(t,n){this.chart.changeSize(t,n)},e.prototype.addAnnotations=function(t,n){n=n||this.chart;var i=__spreadArray$1([],t,!0),a=n.getController("annotation"),o=a.getComponents().map(function(c){return c.extra});a.clear(!0);for(var s=function(c){var u=o[c],f=i.findIndex(function(d){return d.id&&d.id===u.id});f!==-1&&(u=deepAssign({},u,i[f]),i.splice(f,1)),a.annotation(u)},l=0;l<o.length;l++)s(l);i.forEach(function(c){return a.annotation(c)}),n.render(!0)},e.prototype.removeAnnotations=function(t){var n=this.chart.getController("annotation"),i=n.getComponents().map(function(s){return s.extra});n.clear(!0);for(var a=function(s){var l=i[s];t.find(function(c){return c.id&&c.id===l.id})||n.annotation(l)},o=0;o<i.length;o++)a(o);this.chart.render(!0)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(SOURCE_ATTRIBUTE_NAME)},e.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),n=this.options,i=n.padding,a=n.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,t({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var n=this.options.autoFit,i=n===void 0?!0:n;i&&(this.unbind=bind_1(this.container,function(){var a=getContainerSize(t.container),o=a.width,s=a.height;(o!==t.chart.width||s!==t.chart.height)&&t.triggerResize()}))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e}(EventEmitter);function percent(r,e,t,n){var i=reduce(r,function(a,o){var s=o[t],l=a.has(s)?a.get(s):0,c=o[e];return l=isRealNumber(c)?l+c:l,a.set(s,l),a},new Map);return map$2(r,function(a){var o,s=a[e],l=a[t],c=isRealNumber(s)&&i.get(l)!==0?s/i.get(l):0;return __assign$1(__assign$1({},a),(o={},o[n]=c,o))})}function getDeepPercent(r,e,t,n){var i=reduce(r,function(a,o){var s=reduce(t,function(u,f){return"".concat(u).concat(o[f])},""),l=a.has(s)?a.get(s):0,c=o[e];return l=isRealNumber(c)?l+c:l,a.set(s,l),a},new Map);return map$2(r,function(a){var o,s=a[e],l=reduce(t,function(u,f){return"".concat(u).concat(a[f])},""),c=isRealNumber(s)&&i.get(l)!==0?s/i.get(l):0;return __assign$1(__assign$1({},a),(o={},o[n]=c,o))})}function getDataWhetherPercentage(r,e,t,n,i){return i?percent(r,e,t,n):r}function geometry$w(r){var e=r.chart,t=r.options,n=t.data,i=t.color,a=t.lineStyle,o=t.lineShape,s=t.point,l=t.area,c=t.seriesField,u=s==null?void 0:s.state,f=l==null?void 0:l.state;e.data(n);var d=deepAssign({},r,{options:{shapeField:c,line:{color:i,style:a,shape:o},point:s&&__assign$1({color:i,shape:"circle"},s),area:l&&__assign$1({color:i},l),label:void 0}}),g=deepAssign({},d,{options:{tooltip:!1,state:u}}),p=deepAssign({},d,{options:{tooltip:!1,state:f}});return line(d),point(g),area(p),r}function meta$l(r){var e,t,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.data;return flow(scale$2((e={},e[o]=i,e[s]=a,e),(t={},t[o]={type:"cat"},t[s]=adjustYMetaByZero(l,s),t)))(r)}function coordinate$9(r){var e=r.chart,t=r.options,n=t.reflect;if(n){var i=n;isArray$3(i)||(i=[i]);var a=i.map(function(o){return["reflect",o]});e.coordinate({type:"rect",actions:a})}return r}function axis$k(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return n===!1?e.axis(a,!1):e.axis(a,n),i===!1?e.axis(o,!1):e.axis(o,i),r}function legend$f(r){var e=r.chart,t=r.options,n=t.legend,i=t.seriesField;return n&&i?e.legend(i,n):n===!1&&e.legend(!1),r}function label$f(r){var e=r.chart,t=r.options,n=t.label,i=t.yField,a=findGeometry(e,"line");if(!n)a.label(!1);else{var o=n.callback,s=__rest(n,["callback"]);a.label({fields:[i],callback:o,cfg:__assign$1({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},transformLabel(s))})}return r}function adjust$1(r){var e=r.chart,t=r.options,n=t.isStack;return n&&each$1(e.geometries,function(i){i.adjust("stack")}),r}function adaptor$y(r){return flow(geometry$w,meta$l,adjust$1,theme$2,coordinate$9,axis$k,legend$f,tooltip$9,label$f,slider$2,scrollbar,interaction$8,animation$5,annotation$2(),limitInPlot$2)(r)}function geometry$v(r){var e=r.chart,t=r.options,n=t.data,i=t.areaStyle,a=t.areaShape,o=t.color,s=t.point,l=t.line,c=t.isPercent,u=t.xField,f=t.yField,d=t.tooltip,g=t.seriesField,p=t.startOnZero,v=s==null?void 0:s.state,y=getDataWhetherPercentage(n,f,u,f,c);e.data(y);var m=c?__assign$1({formatter:function(A){return{name:A[g]||A[u],value:(Number(A[f])*100).toFixed(2)+"%"}}},d):d,x=deepAssign({},r,{options:{area:{color:o,style:i,shape:a},point:s&&__assign$1({color:o},s),tooltip:m,label:void 0,args:{startOnZero:p}}}),_={chart:e,options:deepAssign({line:{size:2}},omit$1(t,["state"]),{line:l&&__assign$1({color:o},l),sizeField:g,state:l==null?void 0:l.state,tooltip:!1,label:void 0,args:{startOnZero:p}})},S=deepAssign({},x,{options:{tooltip:!1,state:v}});return area(x),line(_),point(S),r}function label$e(r){var e=r.chart,t=r.options,n=t.label,i=t.yField,a=findGeometry(e,"area");if(!n)a.label(!1);else{var o=n.callback,s=__rest(n,["callback"]);a.label({fields:[i],callback:o,cfg:__assign$1({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},transformLabel(s))})}return r}function adjust(r){var e=r.chart,t=r.options,n=t.isStack,i=t.isPercent,a=t.seriesField;return(i||n)&&a&&each$1(e.geometries,function(o){o.adjust("stack")}),r}function adaptor$x(r){return flow(theme$2,pattern("areaStyle"),transformations("rect"),geometry$v,meta$l,adjust,axis$k,legend$f,tooltip$9,label$e,slider$2,annotation$2(),interaction$8,animation$5,limitInPlot$2)(r)}var DEFAULT_OPTIONS$z=deepAssign({},Plot.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),Area=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="area",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$z},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this.options,i=n.isPercent,a=n.xField,o=n.yField,s=this,l=s.chart,c=s.options;meta$l({chart:l,options:c}),this.chart.changeData(getDataWhetherPercentage(t,o,a,o,i))},e.prototype.getSchemaAdaptor=function(){return adaptor$x},e}(Plot),PADDING_RIGHT=10,PADDING_TOP$1=5,BUTTON_ACTION_CONFIG={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},ButtonAction=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=__assign$1({name:"button"},BUTTON_ACTION_CONFIG),t}return e.prototype.getButtonCfg=function(){var t=this.context.view,n=get(t,["interactions","filter-action","cfg","buttonConfig"]);return deepAssign(this.buttonCfg,n,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),n=this.context.view.foregroundGroup.addGroup({name:t.name}),i=this.drawText(n);this.drawBackground(n,i.getBBox()),this.buttonGroup=n},e.prototype.drawText=function(t){var n,i=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:__assign$1({text:i.text},(n=i.textStyle)===null||n===void 0?void 0:n.default)})},e.prototype.drawBackground=function(t,n){var i,a=this.getButtonCfg(),o=normalPadding(a.padding),s=t.addShape({type:"rect",name:"button-rect",attrs:__assign$1({x:n.x-o[3],y:n.y-o[0],width:n.width+o[1]+o[3],height:n.height+o[0]+o[2]},(i=a.buttonStyle)===null||i===void 0?void 0:i.default)});return s.toBack(),t.on("mouseenter",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.active)}),t.on("mouseleave",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.default)}),s},e.prototype.resetPosition=function(){var t=this.context.view,n=t.getCoordinate(),i=n.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Util.transform(null,[["t",i.x-o.width-PADDING_RIGHT,i.y+o.height+PADDING_TOP$1]]);a.setMatrix(s)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),r.prototype.destroy.call(this)},e}(Action);registerAction("brush-reset-button",ButtonAction,{name:"brush-reset-button"});registerInteraction("filter-action",{});function isPointInView(r){return r.isInPlot()}function getInteractionCfg(r,e,t){var n=t||{},i=n.mask,a=n.isStartEnable,o=e||"rect";switch(r){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||isPointInView,action:["brush:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:isPointInView,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:isPointInView,action:["brush:filter","brush:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(s){return a?!a(s):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(s){return!s.isInShape("mask")},action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||isPointInView,action:["brush-x:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:isPointInView,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:isPointInView,action:["brush-x:filter","brush-x:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(s){return!s.isInShape("mask")},action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||isPointInView,action:["brush-y:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:isPointInView,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:isPointInView,action:["brush-y:filter","brush-y:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(s){return!s.isInShape("mask")},action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};default:return{}}}registerInteraction("brush",getInteractionCfg("brush"));registerInteraction("brush-highlight",getInteractionCfg("brush-highlight"));registerInteraction("brush-x",getInteractionCfg("brush-x","x-rect"));registerInteraction("brush-y",getInteractionCfg("brush-y","y-rect"));registerInteraction("brush-x-highlight",getInteractionCfg("brush-x-highlight","x-rect"));registerInteraction("brush-y-highlight",getInteractionCfg("brush-y-highlight","y-rect"));var BRUSH_TYPES=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function brushInteraction(r){var e=r.options,t=e.brush,n=filter(e.interactions||[],function(i){return BRUSH_TYPES.indexOf(i.type)===-1});return t!=null&&t.enabled&&(BRUSH_TYPES.forEach(function(i){var a=!1;switch(t.type){case"x-rect":a=i===(t.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":a=i===(t.action==="highlight"?"brush-y-highlight":"brush-y");break;default:a=i===(t.action==="highlight"?"brush-highlight":"brush");break}var o={type:i,enable:a};t&&(o.cfg=getInteractionCfg(i,t.type,t)),n.push(o)}),(t==null?void 0:t.action)!=="highlight"&&n.push({type:"filter-action",cfg:{buttonConfig:t.button}})),deepAssign({},r,{options:{interactions:n}})}var INTERACTION_MAP={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},getStartStages=function(r,e){return r==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};registerInteraction(INTERACTION_MAP.hover,{start:getStartStages(INTERACTION_MAP.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});registerInteraction(INTERACTION_MAP.click,{start:getStartStages(INTERACTION_MAP.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function connectedArea(r){return r===void 0&&(r=!1),function(e){var t=e.chart,n=e.options,i=n.connectedArea,a=function(){t.removeInteraction(INTERACTION_MAP.hover),t.removeInteraction(INTERACTION_MAP.click)};if(!r&&i){var o=i.trigger||"hover";a(),t.interaction(INTERACTION_MAP[o],{start:getStartStages(o,i.style)})}else a();return e}}function conversionTagFormatter(r,e){return!isNumber$1(r)||!isNumber$1(e)||r===0&&e===0?"-":r===e?"100%":r===0?"∞":"".concat((100*e/r).toFixed(2),"%")}function getConversionTagOptionsWithDefaults(r,e){return deepAssign({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:r.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:r.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:conversionTagFormatter}},r)}function parsePoints(r,e){return map$2(e.getModel().points,function(t){return r.convertPoint(t)})}function renderArrowTag(r,e,t){var n=r.view,i=r.geometry,a=r.group,o=r.options,s=r.horizontal,l=o.offset,c=o.size,u=o.arrow,f=n.getCoordinate(),d=parsePoints(f,e)[3],g=parsePoints(f,t)[0],p=g.y-d.y,v=g.x-d.x;if(typeof u!="boolean"){var y=u.headSize,m=o.spacing,x;s?(v-y)/2<m?(m=Math.max(1,(v-y)/2),x=[[d.x+m,d.y-l],[d.x+m,d.y-l-c],[g.x-m,g.y-l-c/2]]):x=[[d.x+m,d.y-l],[d.x+m,d.y-l-c],[g.x-m-y,g.y-l-c],[g.x-m,g.y-l-c/2],[g.x-m-y,g.y-l]]:(p-y)/2<m?(m=Math.max(1,(p-y)/2),x=[[d.x+l,d.y+m],[d.x+l+c,d.y+m],[g.x+l+c/2,g.y-m]]):x=[[d.x+l,d.y+m],[d.x+l+c,d.y+m],[g.x+l+c,g.y-m-y],[g.x+l+c/2,g.y-m],[g.x+l,g.y-m-y]],a.addShape("polygon",{id:"".concat(n.id,"-conversion-tag-arrow-").concat(i.getElementId(e.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:e,nextElement:t},attrs:__assign$1(__assign$1({},u.style||{}),{points:x})})}}function renderTextTag(r,e,t){var n,i,a,o=r.view,s=r.geometry,l=r.group,c=r.options,u=r.field,f=r.horizontal,d=c.offset,g=c.size;if(typeof c.text!="boolean"){var p=o.getCoordinate(),v=((n=c.text)===null||n===void 0?void 0:n.formatter)&&((i=c.text)===null||i===void 0?void 0:i.formatter(e.getData()[u],t.getData()[u])),y=parsePoints(p,e)[f?3:0],m=parsePoints(p,t)[f?0:3],x=l.addShape("text",{id:"".concat(o.id,"-conversion-tag-text-").concat(s.getElementId(e.getModel().mappingData)),name:"conversion-tag-text",origin:{element:e,nextElement:t},attrs:__assign$1(__assign$1({},((a=c.text)===null||a===void 0?void 0:a.style)||{}),{text:v,x:f?(y.x+m.x)/2:y.x+d+g/2,y:f?y.y-d-g/2:(y.y+m.y)/2})});if(f){var _=m.x-y.x,S=x.getBBox().width;if(S>_){var A=S/v.length,b=Math.max(1,Math.ceil(_/A)-1),C="".concat(v.slice(0,b),"...");x.attr("text",C)}}}}function renderTag(r,e,t){renderArrowTag(r,e,t),renderTextTag(r,e,t)}function conversionTag$3(r,e,t){return e===void 0&&(e=!0),t===void 0&&(t=!1),function(n){var i=n.options,a=n.chart,o=i.conversionTag,s=i.theme;return o&&!t&&(a.theme(deepAssign({},isObject(s)?s:getTheme(s),{columnWidthRatio:1/3})),a.annotation().shape({render:function(l,c){var u=l.addGroup({id:"".concat(a.id,"-conversion-tag-group"),name:"conversion-tag-group"}),f=find$1(a.geometries,function(p){return p.type==="interval"}),d={view:c,geometry:f,group:u,field:r,horizontal:e,options:getConversionTagOptionsWithDefaults(o,e)},g=f.elements;each$1(g,function(p,v){v>0&&renderTag(d,g[v-1],p)})}})),n}}function defaultOptions$6(r){var e=r.options,t=e.legend,n=e.seriesField,i=e.isStack;return n?t!==!1&&(t=__assign$1({position:i?"right-top":"top-left"},t)):t=!1,r.options.legend=t,r}function geometry$u(r){var e=r.chart,t=r.options,n=t.data,i=t.columnStyle,a=t.color,o=t.columnWidthRatio,s=t.isPercent,l=t.isGroup,c=t.isStack,u=t.xField,f=t.yField,d=t.seriesField,g=t.groupField,p=t.tooltip,v=t.shape,y=s&&l&&c?getDeepPercent(n,f,[u,g],f):getDataWhetherPercentage(n,f,u,f,s),m=[];c&&d&&!l?y.forEach(function(S){var A=m.find(function(b){return b[u]===S[u]&&b[d]===S[d]});A?A[f]+=S[f]||0:m.push(__assign$1({},S))}):m=y,e.data(m);var x=s?__assign$1({formatter:function(S){var A;return{name:l&&c?"".concat(S[d]," - ").concat(S[g]):(A=S[d])!==null&&A!==void 0?A:S[u],value:(Number(S[f])*100).toFixed(2)+"%"}}},p):p,_=deepAssign({},r,{options:{data:m,widthRatio:o,tooltip:x,interval:{shape:v,style:i,color:a}}});return interval(_),_}function meta$k(r){var e,t,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.data,c=n.isPercent,u=c?{max:1,min:0,minLimit:0,maxLimit:1}:{};return flow(scale$2((e={},e[o]=i,e[s]=a,e),(t={},t[o]={type:"cat"},t[s]=__assign$1(__assign$1({},adjustYMetaByZero(l,s)),u),t)))(r)}function axis$j(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return n===!1?e.axis(a,!1):e.axis(a,n),i===!1?e.axis(o,!1):e.axis(o,i),r}function legend$e(r){var e=r.chart,t=r.options,n=t.legend,i=t.seriesField;return n&&i?e.legend(i,n):n===!1&&e.legend(!1),r}function label$d(r){var e=r.chart,t=r.options,n=t.label,i=t.yField,a=t.isRange,o=findGeometry(e,"interval");if(!n)o.label(!1);else{var s=n.callback,l=__rest(n,["callback"]);o.label({fields:[i],callback:s,cfg:__assign$1({layout:l!=null&&l.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},transformLabel(a?__assign$1({content:function(c){var u;return(u=c[i])===null||u===void 0?void 0:u.join("-")}},l):l))})}return r}function columnTooltip(r){var e=r.chart,t=r.options,n=t.tooltip,i=t.isGroup,a=t.isStack,o=t.groupField,s=t.data,l=t.xField,c=t.yField,u=t.seriesField;if(n===!1)e.tooltip(!1);else{var f=n;if(i&&a){var d=f.customItems,g=(f==null?void 0:f.formatter)||function(p){return{name:"".concat(p[u]," - ").concat(p[o]),value:p[c]}};f=__assign$1(__assign$1({},f),{customItems:function(p){var v=[];return each$1(p,function(y){var m=filter(s,function(x){return isMatch(x,pick(y.data,[l,u]))});m.forEach(function(x){v.push(__assign$1(__assign$1(__assign$1({},y),{value:x[c],data:x,mappingData:{_origin:x}}),g(x)))})}),d?d(v):v}})}e.tooltip(f)}return r}function adaptor$w(r,e){e===void 0&&(e=!1);var t=r.options,n=t.seriesField;return flow(defaultOptions$6,theme$2,pattern("columnStyle"),state,transformations("rect"),geometry$u,meta$k,axis$j,legend$e,columnTooltip,slider$2,scrollbar,label$d,brushInteraction,interaction$8,animation$5,annotation$2(),conversionTag$3(t.yField,!e,!!n),connectedArea(!t.isStack),limitInPlot$2)(r)}function defaultOptions$5(r){var e=r.options,t=e.xField,n=e.yField,i=e.xAxis,a=e.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},s=a!==!1?__assign$1({position:o[(a==null?void 0:a.position)||"left"]},a):!1,l=i!==!1?__assign$1({position:o[(i==null?void 0:i.position)||"bottom"]},i):!1;return __assign$1(__assign$1({},r),{options:__assign$1(__assign$1({},e),{xField:n,yField:t,xAxis:s,yAxis:l})})}function label$c(r){var e=r.options,t=e.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),deepAssign({},r,{options:{label:t}})}function legend$d(r){var e=r.options,t=e.seriesField,n=e.isStack,i=e.legend;return t?i!==!1&&(i=__assign$1({position:n?"top-left":"right-top"},i||{})):i=!1,deepAssign({},r,{options:{legend:i}})}function coordinate$8(r){var e=r.options,t=[{type:"transpose"},{type:"reflectY"}].concat(e.coordinate||[]);return deepAssign({},r,{options:{coordinate:t}})}function geometry$t(r){var e=r.chart,t=r.options,n=t.barStyle,i=t.barWidthRatio,a=t.minBarWidth,o=t.maxBarWidth,s=t.barBackground;return adaptor$w({chart:e,options:__assign$1(__assign$1({},t),{columnStyle:n,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function adaptor$v(r){return flow(defaultOptions$5,label$c,legend$d,tooltip$9,coordinate$8,geometry$t)(r)}var DEFAULT_OPTIONS$y=deepAssign({},Plot.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Bar=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="bar",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$y},e.prototype.changeData=function(t){var n,i;this.updateOption({data:t});var a=this,o=a.chart,s=a.options,l=s.isPercent,c=s.xField,u=s.yField,f=s.xAxis,d=s.yAxis;n=[u,c],c=n[0],u=n[1],i=[d,f],f=i[0],d=i[1];var g=__assign$1(__assign$1({},s),{xField:c,yField:u,yAxis:d,xAxis:f});meta$k({chart:o,options:g}),o.changeData(getDataWhetherPercentage(t,c,u,c,l))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$v},e}(Plot),DEFAULT_OPTIONS$x=deepAssign({},Plot.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Column=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="column",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$x},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this.options,i=n.yField,a=n.xField,o=n.isPercent,s=this,l=s.chart,c=s.options;meta$k({chart:l,options:c}),this.chart.changeData(getDataWhetherPercentage(t,i,a,i,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$w},e}(Plot),_a$2,FUNNEL_PERCENT="$$percentage$$",FUNNEL_MAPPING_VALUE="$$mappingValue$$",FUNNEL_CONVERSATION="$$conversion$$",FUNNEL_TOTAL_PERCENT="$$totalPercentage$$",PLOYGON_X="$$x$$",PLOYGON_Y="$$y$$",DEFAULT_OPTIONS$w={appendPadding:[0,80],minSize:0,maxSize:1,meta:(_a$2={},_a$2[FUNNEL_MAPPING_VALUE]={min:0,max:1,nice:!1},_a$2),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},CONVERSION_TAG_NAME="CONVERSION_TAG_NAME";function transformData$8(r,e,t){var n=[],i=t.yField,a=t.maxSize,o=t.minSize,s=get(maxBy(e,i),[i]),l=isNumber$1(a)?a:1,c=isNumber$1(o)?o:0;return n=map$2(r,function(u,f){var d=(u[i]||0)/s;return u[FUNNEL_PERCENT]=d,u[FUNNEL_MAPPING_VALUE]=(l-c)*d+c,u[FUNNEL_CONVERSATION]=[get(r,[f-1,i]),u[i]],u}),n}function conversionTagComponent(r){return function(e){var t=e.chart,n=e.options,i=n.conversionTag,a=n.filteredData,o=a||t.getOptions().data;if(i){var s=i.formatter;o.forEach(function(l,c){if(!(c<=0||Number.isNaN(l[FUNNEL_MAPPING_VALUE]))){var u=r(l,c,o,{top:!0,name:CONVERSION_TAG_NAME,text:{content:isFunction(s)?s(l,o):s,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:__assign$1({textAlign:"start",textBaseline:"middle"},i.style)}});t.annotation().line(u)}})}return e}}function field$4(r){var e=r.chart,t=r.options,n=t.data,i=n===void 0?[]:n,a=t.yField,o=t.maxSize,s=t.minSize,l=transformData$8(i,i,{yField:a,maxSize:o,minSize:s});return e.data(l),r}function geometry$s(r){var e=r.chart,t=r.options,n=t.xField,i=t.yField,a=t.color,o=t.tooltip,s=t.label,l=t.shape,c=l===void 0?"funnel":l,u=t.funnelStyle,f=t.state,d=getTooltipMapping(o,[n,i]),g=d.fields,p=d.formatter;geometry$x({chart:e,options:{type:"interval",xField:n,yField:FUNNEL_MAPPING_VALUE,colorField:n,tooltipFields:isArray$3(g)&&g.concat([FUNNEL_PERCENT,FUNNEL_CONVERSATION]),mapping:{shape:c,tooltip:p,color:a,style:u},label:s,state:f}});var v=findGeometry(r.chart,"interval");return v.adjust("symmetric"),r}function transpose$1(r){var e=r.chart,t=r.options,n=t.isTransposed;return e.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),r}function conversionTag$2(r){var e=r.options,t=r.chart,n=e.maxSize,i=get(t,["geometries","0","dataArray"],[]),a=get(t,["options","data","length"]),o=map$2(i,function(l){return get(l,["0","nextPoints","0","x"])*a-.5}),s=function(l,c,u,f){var d=n-(n-l[FUNNEL_MAPPING_VALUE])/2;return __assign$1(__assign$1({},f),{start:[o[c-1]||c-.5,d],end:[o[c-1]||c-.5,d+.05]})};return conversionTagComponent(s)(r),r}function basicFunnel(r){return flow(field$4,geometry$s,transpose$1,conversionTag$2)(r)}function field$3(r){var e,t=r.chart,n=r.options,i=n.data,a=i===void 0?[]:i,o=n.yField;return t.data(a),t.scale((e={},e[o]={sync:!0},e)),r}function geometry$r(r){var e=r.chart,t=r.options,n=t.data,i=t.xField,a=t.yField,o=t.color,s=t.compareField,l=t.isTransposed,c=t.tooltip,u=t.maxSize,f=t.minSize,d=t.label,g=t.funnelStyle,p=t.state,v=t.showFacetTitle;return e.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],showTitle:v,eachView:function(y,m){var x=l?m.rowIndex:m.columnIndex;l||y.coordinate({type:"rect",actions:[["transpose"],["scale",x===0?-1:1,-1]]});var _=transformData$8(m.data,n,{yField:a,maxSize:u,minSize:f});y.data(_);var S=getTooltipMapping(c,[i,a,s]),A=S.fields,b=S.formatter,C=l?{offset:x===0?10:-23,position:x===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:x===0?"end":"start"}};geometry$x({chart:y,options:{type:"interval",xField:i,yField:FUNNEL_MAPPING_VALUE,colorField:i,tooltipFields:isArray$3(A)&&A.concat([FUNNEL_PERCENT,FUNNEL_CONVERSATION]),mapping:{shape:"funnel",tooltip:b,color:o,style:g},label:d===!1?!1:deepAssign({},C,d),state:p}})}}),r}function compareConversionTag(r){var e=r.chart,t=r.index,n=r.options,i=n.conversionTag,a=n.isTransposed;(isNumber$1(t)?[e]:e.views).forEach(function(o,s){var l=get(o,["geometries","0","dataArray"],[]),c=get(o,["options","data","length"]),u=map$2(l,function(d){return get(d,["0","nextPoints","0","x"])*c-.5}),f=function(d,g,p,v){var y=(t||s)===0?-1:1;return deepAssign({},v,{start:[u[g-1]||g-.5,d[FUNNEL_MAPPING_VALUE]],end:[u[g-1]||g-.5,d[FUNNEL_MAPPING_VALUE]+.05],text:a?{style:{textAlign:"start"}}:{offsetX:i!==!1?y*i.offsetX:0,style:{textAlign:(t||s)===0?"end":"start"}}})};conversionTagComponent(f)(deepAssign({},{chart:o,options:n}))})}function conversionTag$1(r){var e=r.chart;return e.once("beforepaint",function(){return compareConversionTag(r)}),r}function compareFunnel(r){return flow(field$3,geometry$r,conversionTag$1)(r)}function field$2(r){var e=r.chart,t=r.options,n=t.data,i=n===void 0?[]:n,a=t.yField,o=reduce(i,function(c,u){return c+(u[a]||0)},0),s=maxBy(i,a)[a],l=map$2(i,function(c,u){var f=[],d=[];if(c[FUNNEL_TOTAL_PERCENT]=(c[a]||0)/o,u){var g=i[u-1][PLOYGON_X],p=i[u-1][PLOYGON_Y];f[0]=g[3],d[0]=p[3],f[1]=g[2],d[1]=p[2]}else f[0]=-.5,d[0]=1,f[1]=.5,d[1]=1;return d[2]=d[1]-c[FUNNEL_TOTAL_PERCENT],f[2]=(d[2]+1)/4,d[3]=d[2],f[3]=-f[2],c[PLOYGON_X]=f,c[PLOYGON_Y]=d,c[FUNNEL_PERCENT]=(c[a]||0)/s,c[FUNNEL_CONVERSATION]=[get(i,[u-1,a]),c[a]],c});return e.data(l),r}function geometry$q(r){var e=r.chart,t=r.options,n=t.xField,i=t.yField,a=t.color,o=t.tooltip,s=t.label,l=t.funnelStyle,c=t.state,u=getTooltipMapping(o,[n,i]),f=u.fields,d=u.formatter;return geometry$x({chart:e,options:{type:"polygon",xField:PLOYGON_X,yField:PLOYGON_Y,colorField:n,tooltipFields:isArray$3(f)&&f.concat([FUNNEL_PERCENT,FUNNEL_CONVERSATION]),label:s,state:c,mapping:{tooltip:d,color:a,style:l}}}),r}function transpose(r){var e=r.chart,t=r.options,n=t.isTransposed;return e.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),r}function conversionTag(r){var e=function(t,n,i,a){return __assign$1(__assign$1({},a),{start:[t[PLOYGON_X][1],t[PLOYGON_Y][1]],end:[t[PLOYGON_X][1]+.05,t[PLOYGON_Y][1]]})};return conversionTagComponent(e)(r),r}function dynamicHeightFunnel(r){return flow(field$2,geometry$q,transpose,conversionTag)(r)}function field$1(r){var e,t=r.chart,n=r.options,i=n.data,a=i===void 0?[]:i,o=n.yField;return t.data(a),t.scale((e={},e[o]={sync:!0},e)),r}function geometry$p(r){var e=r.chart,t=r.options,n=t.seriesField,i=t.isTransposed,a=t.showFacetTitle;return e.facet("rect",{fields:[n],padding:[i?0:32,10,0,10],showTitle:a,eachView:function(o,s){basicFunnel(deepAssign({},r,{chart:o,options:{data:s.data}}))}}),r}function facetFunnel(r){return flow(field$1,geometry$p)(r)}var ConversionTagAction=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.rendering=!1,t}return e.prototype.change=function(t){var n=this;if(!this.rendering){var i=t.seriesField,a=t.compareField,o=a?compareConversionTag:conversionTag$2,s=this.context.view,l=i||a?s.views:[s];map$2(l,function(c,u){var f=c.getController("annotation"),d=filter(get(f,["option"],[]),function(p){var v=p.name;return v!==CONVERSION_TAG_NAME});f.clear(!0),each$1(d,function(p){typeof p=="object"&&c.annotation()[p.type](p)});var g=get(c,["filteredData"],c.getOptions().data);o({chart:c,index:u,options:__assign$1(__assign$1({},t),{filteredData:transformData$8(g,g,t)})}),c.filterData(g),n.rendering=!0,c.render(!0)})}this.rendering=!1},e}(Action),FUNNEL_CONVERSION_TAG="funnel-conversion-tag",FUNNEL_LEGEND_FILTER="funnel-afterrender",interactionStart={trigger:"afterrender",action:"".concat(FUNNEL_CONVERSION_TAG,":change")};registerAction(FUNNEL_CONVERSION_TAG,ConversionTagAction);registerInteraction(FUNNEL_LEGEND_FILTER,{start:[interactionStart]});function defaultOptions$4(r){var e=r.options,t=e.compareField,n=e.xField,i=e.yField,a=e.locale,o=e.funnelStyle,s=e.data,l=getLocale(a),c={label:t?{fields:[n,i,t,FUNNEL_PERCENT,FUNNEL_CONVERSATION],formatter:function(f){return"".concat(f[i])}}:{fields:[n,i,FUNNEL_PERCENT,FUNNEL_CONVERSATION],offset:0,position:"middle",formatter:function(f){return"".concat(f[n]," ").concat(f[i])}},tooltip:{title:n,formatter:function(f){return{name:f[n],value:f[i]}}},conversionTag:{formatter:function(f){return"".concat(l.get(["conversionTag","label"]),": ").concat(conversionTagFormatter.apply(void 0,f[FUNNEL_CONVERSATION]))}}},u;return(t||o)&&(u=function(f){return deepAssign({},t&&{lineWidth:1,stroke:"#fff"},isFunction(o)?o(f):o)}),deepAssign({options:c},r,{options:{funnelStyle:u,data:clone(s)}})}function geometry$o(r){var e=r.options,t=e.compareField,n=e.dynamicHeight,i=e.seriesField;return i?facetFunnel(r):t?compareFunnel(r):n?dynamicHeightFunnel(r):basicFunnel(r)}function meta$j(r){var e,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return flow(scale$2((e={},e[a]=n,e[o]=i,e)))(r)}function axis$i(r){var e=r.chart;return e.axis(!1),r}function legend$c(r){var e=r.chart,t=r.options,n=t.legend;return n===!1?e.legend(!1):e.legend(n),r}function interaction$7(r){var e=r.chart,t=r.options,n=t.interactions,i=t.dynamicHeight;return each$1(n,function(a){a.enable===!1?e.removeInteraction(a.type):e.interaction(a.type,a.cfg||{})}),i?e.removeInteraction(FUNNEL_LEGEND_FILTER):e.interaction(FUNNEL_LEGEND_FILTER,{start:[__assign$1(__assign$1({},interactionStart),{arg:t})]}),r}function adaptor$u(r){return flow(defaultOptions$4,geometry$o,meta$j,axis$i,tooltip$9,interaction$7,legend$c,animation$5,theme$2,annotation$2())(r)}var Funnel=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="funnel",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$w},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$u},e.prototype.setState=function(t,n,i){i===void 0&&(i=!0);var a=getAllElementsRecursively(this.chart);each$1(a,function(o){n(o.getData())&&o.setState(t,i)})},e.prototype.getStates=function(){var t=getAllElementsRecursively(this.chart),n=[];return each$1(t,function(i){var a=i.getData(),o=i.getStates();each$1(o,function(s){n.push({data:a,state:s,geometry:i.geometry,element:i})})}),n},e.CONVERSATION_FIELD=FUNNEL_CONVERSATION,e.PERCENT_FIELD=FUNNEL_PERCENT,e.TOTAL_PERCENT_FIELD=FUNNEL_TOTAL_PERCENT,e}(Plot),_a$1,RANGE_VALUE="range",RANGE_TYPE="type",PERCENT="percent",DEFAULT_COLOR$1="#f0f0f0",INDICATEOR_VIEW_ID="indicator-view",RANGE_VIEW_ID="range-view",DEFAULT_OPTIONS$v={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(_a$1={},_a$1[RANGE_VALUE]={sync:"v"},_a$1[PERCENT]={sync:"v",tickCount:5,tickInterval:.2},_a$1),animation:!1};function processRangeData(r,e){return r.map(function(t,n){var i;return i={},i[RANGE_VALUE]=t-(r[n-1]||0),i[RANGE_TYPE]="".concat(n),i[PERCENT]=e,i})}function getIndicatorData(r){var e;return[(e={},e[PERCENT]=clamp(r,0,1),e)]}function getRangeData(r,e){var t=get(e,["ticks"],[]),n=size(t)?uniq$2(t):[0,clamp(r,0,1),1];return n[0]||n.shift(),processRangeData(n,r)}function geometry$n(r){var e=r.chart,t=r.options,n=t.percent,i=t.range,a=t.radius,o=t.innerRadius,s=t.startAngle,l=t.endAngle,c=t.axis,u=t.indicator,f=t.gaugeStyle,d=t.type,g=t.meter,p=i.color,v=i.width;if(u){var y=getIndicatorData(n),m=e.createView({id:INDICATEOR_VIEW_ID});m.data(y),m.point().position("".concat(PERCENT,"*1")).shape(u.shape||"gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:u}),m.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),m.axis(PERCENT,c),m.scale(PERCENT,pick(c,AXIS_META_CONFIG_KEYS))}var x=getRangeData(n,t.range),_=e.createView({id:RANGE_VIEW_ID});_.data(x);var S=isString(p)?[p,DEFAULT_COLOR$1]:p,A=interval({chart:_,options:{xField:"1",yField:RANGE_VALUE,seriesField:RANGE_TYPE,rawFields:[PERCENT],isStack:!0,interval:{color:S,style:f,shape:d==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:v,maxColumnWidth:v}}).ext,b=A.geometry;return b.customInfo({meter:g}),_.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),r}function meta$i(r){var e;return flow(scale$2((e={range:{min:0,max:1,maxLimit:1,minLimit:0}},e[PERCENT]={},e)))(r)}function statistic$2(r,e){var t=r.chart,n=r.options,i=n.statistic,a=n.percent;if(t.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=deepAssign({},{content:"".concat((a*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),renderGaugeStatistic(t,{statistic:__assign$1(__assign$1({},i),{content:s})},{percent:a})}return e&&t.render(!0),r}function tooltip$8(r){var e=r.chart,t=r.options,n=t.tooltip;return n?e.tooltip(deepAssign({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(i,a){var o=get(a,[0,"data",PERCENT],0);return"".concat((o*100).toFixed(2),"%")}},n)):e.tooltip(!1),r}function other(r){var e=r.chart;return e.legend(!1),r}function adaptor$t(r){return flow(theme$2,animation$5,geometry$n,meta$i,tooltip$8,statistic$2,interaction$8,annotation$2(),other)(r)}registerShape("point","gauge-indicator",{draw:function(r,e){var t=r.customInfo,n=t.indicator,i=t.defaultColor,a=n,o=a.pointer,s=a.pin,l=e.addGroup(),c=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:__assign$1({x1:c.x,y1:c.y,x2:r.x,y2:r.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:__assign$1({x:c.x,y:c.y,stroke:i},s.style)}),l}});registerShape("interval","meter-gauge",{draw:function(r,e){var t=r.customInfo.meter,n=t===void 0?{}:t,i=n.steps,a=i===void 0?50:i,o=n.stepRatio,s=o===void 0?.5:o;a=a<1?1:a,s=clamp(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,f=0;if(s>0&&s<1){var d=u-c;f=d/a/(s/(1-s)+1-1/a)}for(var g=f/(1-s)*s,p=e.addGroup(),v=this.coordinate.getCenter(),y=this.coordinate.getRadius(),m=Util.getAngle(r,this.coordinate),x=m.startAngle,_=m.endAngle,S=x;S<_;){var A=void 0,b=(S-c)%(g+f);b<g?A=S+(g-b):(S+=g+f-b,A=S+g);var C=Util.getSectorPath(v.x,v.y,y,S,Math.min(A,_),y*this.coordinate.innerRadius);p.addShape("path",{name:"meter-gauge",attrs:{path:C,fill:r.color,stroke:r.color,lineWidth:.5}}),S=A+f}return p}});var Gauge=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="gauge",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$v},e.prototype.changeData=function(t){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var n=this.chart.views.find(function(a){return a.id===INDICATEOR_VIEW_ID});n&&n.data(getIndicatorData(t));var i=this.chart.views.find(function(a){return a.id===RANGE_VIEW_ID});i&&i.data(getRangeData(t,this.options.range)),statistic$2({chart:this.chart,options:this.options},!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$t},e}(Plot);function getBinKey(r,e,t){if(t===1)return[0,e];var n=Math.floor(r/e);return[e*n,e*(n+1)]}function sturges(r){return Math.ceil(Math.log(r.length)/Math.LN2)+1}function binHistogram(r,e,t,n,i){var a=clone(r);sortBy(a,e);var o=valuesOfKey(a,e),s=getRange(o),l=s.max-s.min,c=t;if(!t&&n&&(c=n>1?l/(n-1):s.max),!t&&!n){var u=sturges(o);c=l/u}var f={},d=groupBy(a,i);isEmpty(d)?each$1(a,function(p){var v=p[e],y=getBinKey(v,c,n),m="".concat(y[0],"-").concat(y[1]);has(f,m)||(f[m]={range:y,count:0}),f[m].count+=1}):Object.keys(d).forEach(function(p){each$1(d[p],function(v){var y=v[e],m=getBinKey(y,c,n),x="".concat(m[0],"-").concat(m[1]),_="".concat(x,"-").concat(p);has(f,_)||(f[_]={range:m,count:0},f[_][i]=p),f[_].count+=1})});var g=[];return each$1(f,function(p){g.push(p)}),g}var HISTOGRAM_X_FIELD="range",HISTOGRAM_Y_FIELD="count",DEFAULT_OPTIONS$u=deepAssign({},Plot.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function geometry$m(r){var e=r.chart,t=r.options,n=t.data,i=t.binField,a=t.binNumber,o=t.binWidth,s=t.color,l=t.stackField,c=t.legend,u=t.columnStyle,f=binHistogram(n,i,o,a,l);e.data(f);var d=deepAssign({},r,{options:{xField:HISTOGRAM_X_FIELD,yField:HISTOGRAM_Y_FIELD,seriesField:l,isStack:!0,interval:{color:s,style:u}}});return interval(d),c&&l?e.legend(l,c):e.legend(!1),r}function meta$h(r){var e,t=r.options,n=t.xAxis,i=t.yAxis;return flow(scale$2((e={},e[HISTOGRAM_X_FIELD]=n,e[HISTOGRAM_Y_FIELD]=i,e)))(r)}function axis$h(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis;return n===!1?e.axis(HISTOGRAM_X_FIELD,!1):e.axis(HISTOGRAM_X_FIELD,n),i===!1?e.axis(HISTOGRAM_Y_FIELD,!1):e.axis(HISTOGRAM_Y_FIELD,i),r}function label$b(r){var e=r.chart,t=r.options,n=t.label,i=findGeometry(e,"interval");if(!n)i.label(!1);else{var a=n.callback,o=__rest(n,["callback"]);i.label({fields:[HISTOGRAM_Y_FIELD],callback:a,cfg:transformLabel(o)})}return r}function adaptor$s(r){return flow(theme$2,pattern("columnStyle"),geometry$m,meta$h,axis$h,state,label$b,tooltip$9,interaction$8,animation$5)(r)}var Histogram=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="histogram",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$u},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this.options,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.stackField;this.chart.changeData(binHistogram(t,i,o,a,s))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$s},e}(Plot),DEFAULT_OPTIONS$t=deepAssign({},Plot.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),MarkerActiveAction=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.active=function(){var t=this.getView(),n=this.context.event;if(n.data){var i=n.data.items,a=t.geometries.filter(function(o){return o.type==="point"});each$1(a,function(o){each$1(o.elements,function(s){var l=findIndex(i,function(c){return c.data===s.data})!==-1;s.setState("active",l)})})}},e.prototype.reset=function(){var t=this.getView(),n=t.geometries.filter(function(i){return i.type==="point"});each$1(n,function(i){each$1(i.elements,function(a){a.setState("active",!1)})})},e.prototype.getView=function(){return this.context.view},e}(Action);registerAction("marker-active",MarkerActiveAction);registerInteraction("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var Line=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="line",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$t},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this,i=n.chart,a=n.options;meta$l({chart:i,options:a}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$y},e}(Plot),DEFAULT_OPTIONS$s=deepAssign({},Plot.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),ORIGIN_MATRIX=[1,0,0,0,1,0,0,0,1];function transform$2(r,e){var t=e?__spreadArray$1([],e,!0):__spreadArray$1([],ORIGIN_MATRIX,!0);return Util.transform(t,r)}var PieLegendAction=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getActiveElements=function(){var t=Util.getDelegationObject(this.context);if(t){var n=this.context.view,i=t.component,a=t.item,o=i.get("field");if(o){var s=n.geometries[0].elements;return s.filter(function(l){return l.getModel().data[o]===a.value})}}return[]},e.prototype.getActiveElementLabels=function(){var t=this.context.view,n=this.getActiveElements(),i=t.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return n.find(function(o){return isEqual$1(o.getData(),a.get("data"))})})},e.prototype.transfrom=function(t){t===void 0&&(t=7.5);var n=this.getActiveElements(),i=this.getActiveElementLabels();n.forEach(function(a,o){var s=i[o],l=a.geometry.coordinate;if(l.isPolar&&l.isTransposed){var c=Util.getAngle(a.getModel(),l),u=c.startAngle,f=c.endAngle,d=(u+f)/2,g=t,p=g*Math.cos(d),v=g*Math.sin(d);a.shape.setMatrix(transform$2([["t",p,v]])),s.setMatrix(transform$2([["t",p,v]]))}})},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(Action);function getCurrentElement(r){var e=r.event,t,n=e.target;return n&&(t=n.get("element")),t}var StatisticAction=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getAnnotations=function(t){var n=t||this.context.view;return n.getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var t=this,n=this.context.view;n.removeInteraction("tooltip"),n.on("afterchangesize",function(){var i=t.getAnnotations(n);t.initialAnnotation=i})},e.prototype.change=function(t){var n=this.context,i=n.view,a=n.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=get(a,["data","data"]);if(a.type.match("legend-item")){var s=Util.getDelegationObject(this.context),l=i.getGroupedFields()[0];if(s&&l){var c=s.item;o=i.getData().find(function(g){return g[l]===c.value})}}if(o){var u=get(t,"annotations",[]),f=get(t,"statistic",{});i.getController("annotation").clear(!0),each$1(u,function(g){typeof g=="object"&&i.annotation()[g.type](g)}),renderStatistic(i,{statistic:f,plotType:"pie"},o),i.render(!0)}var d=getCurrentElement(this.context);d&&d.shape.toFront()},e.prototype.reset=function(){var t=this.context.view,n=t.getController("annotation");n.clear(!0);var i=this.getInitialAnnotation();each$1(i,function(a){t.annotation()[a.type](a)}),t.render(!0)},e}(Action),PIE_STATISTIC="pie-statistic";registerAction(PIE_STATISTIC,StatisticAction);registerInteraction("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});registerAction("pie-legend",PieLegendAction);registerInteraction("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function getTotalValue(r,e){var t=null;return each$1(r,function(n){typeof n[e]=="number"&&(t+=n[e])}),t}function adaptOffset(r,e){var t;switch(r){case"inner":return t="-30%",isString(e)&&e.endsWith("%")?parseFloat(e)*.01>0?t:e:e<0?e:t;case"outer":return t=12,isString(e)&&e.endsWith("%")?parseFloat(e)*.01<0?t:e:e>0?e:t;default:return e}}function isAllZero(r,e){return every(processIllegalData(r,e),function(t){return t[e]===0})}function geometry$l(r){var e=r.chart,t=r.options,n=t.data,i=t.angleField,a=t.colorField,o=t.color,s=t.pieStyle,l=t.shape,c=processIllegalData(n,i);if(isAllZero(c,i)){var u="$$percentage$$";c=c.map(function(d){var g;return __assign$1(__assign$1({},d),(g={},g[u]=1/c.length,g))}),e.data(c);var f=deepAssign({},r,{options:{xField:"1",yField:u,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});interval(f)}else{e.data(c);var f=deepAssign({},r,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});interval(f)}return r}function meta$g(r){var e,t=r.chart,n=r.options,i=n.meta,a=n.colorField,o=deepAssign({},i);return t.scale(o,(e={},e[a]={type:"cat"},e)),r}function coordinate$7(r){var e=r.chart,t=r.options,n=t.radius,i=t.innerRadius,a=t.startAngle,o=t.endAngle;return e.coordinate({type:"theta",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}),r}function label$a(r){var e=r.chart,t=r.options,n=t.label,i=t.colorField,a=t.angleField,o=e.geometries[0];if(!n)o.label(!1);else{var s=n.callback,l=__rest(n,["callback"]),c=transformLabel(l);if(c.content){var u=c.content;c.content=function(p,v,y){var m=p[i],x=p[a],_=e.getScaleByField(a),S=_==null?void 0:_.scale(x);return isFunction(u)?u(__assign$1(__assign$1({},p),{percent:S}),v,y):isString(u)?template(u,{value:x,name:m,percentage:isNumber$1(S)&&!isNil(x)?"".concat((S*100).toFixed(2),"%"):null}):u}}var f={inner:"",outer:"pie-outer",spider:"pie-spider"},d=c.type?f[c.type]:"pie-outer",g=c.layout?isArray$3(c.layout)?c.layout:[c.layout]:[];c.layout=(d?[{type:d}]:[]).concat(g),o.label({fields:i?[a,i]:[a],callback:s,cfg:__assign$1(__assign$1({},c),{offset:adaptOffset(c.type,c.offset),type:"pie"})})}return r}function transformStatisticOptions(r){var e=r.innerRadius,t=r.statistic,n=r.angleField,i=r.colorField,a=r.meta,o=r.locale,s=getLocale(o);if(e&&t){var l=deepAssign({},DEFAULT_OPTIONS$s.statistic,t),c=l.title,u=l.content;return c!==!1&&(c=deepAssign({},{formatter:function(f){var d=f?f[i]:isNil(c.content)?s.get(["statistic","total"]):c.content,g=get(a,[i,"formatter"])||function(p){return p};return g(d)}},c)),u!==!1&&(u=deepAssign({},{formatter:function(f,d){var g=f?f[n]:getTotalValue(d,n),p=get(a,[n,"formatter"])||function(v){return v};return f||isNil(u.content)?p(g):u.content}},u)),deepAssign({},{statistic:{title:c,content:u}},r)}return r}function pieAnnotation(r){var e=r.chart,t=r.options,n=transformStatisticOptions(t),i=n.innerRadius,a=n.statistic;return e.getController("annotation").clear(!0),flow(annotation$2())(r),i&&a&&renderStatistic(e,{statistic:a,plotType:"pie"}),r}function tooltip$7(r){var e=r.chart,t=r.options,n=t.tooltip,i=t.colorField,a=t.angleField,o=t.data;if(n===!1)e.tooltip(n);else if(e.tooltip(deepAssign({},n,{shared:!1})),isAllZero(o,a)){var s=get(n,"fields"),l=get(n,"formatter");isEmpty(get(n,"fields"))&&(s=[i,a],l=l||function(c){return{name:c[i],value:toString$2(c[a])}}),e.geometries[0].tooltip(s.join("*"),getMappingFunction(s,l))}return r}function interaction$6(r){var e=r.chart,t=r.options,n=transformStatisticOptions(t),i=n.interactions,a=n.statistic,o=n.annotations;return each$1(i,function(s){var l,c;if(s.enable===!1)e.removeInteraction(s.type);else if(s.type==="pie-statistic-active"){var u=[];!((l=s.cfg)===null||l===void 0)&&l.start||(u=[{trigger:"element:mouseenter",action:"".concat(PIE_STATISTIC,":change"),arg:{statistic:a,annotations:o}}]),each$1((c=s.cfg)===null||c===void 0?void 0:c.start,function(f){u.push(__assign$1(__assign$1({},f),{arg:{statistic:a,annotations:o}}))}),e.interaction(s.type,deepAssign({},s.cfg,{start:u}))}else e.interaction(s.type,s.cfg||{})}),r}function adaptor$r(r){return flow(pattern("pieStyle"),geometry$l,meta$g,theme$2,coordinate$7,legend$g,tooltip$7,label$a,state,pieAnnotation,interaction$6,animation$5)(r)}var Pie=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="pie",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$s},e.prototype.changeData=function(t){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null));var n=this.options,i=this.options.angleField,a=processIllegalData(n.data,i),o=processIllegalData(t,i);isAllZero(a,i)||isAllZero(o,i)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(o),pieAnnotation({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$r},e}(Plot),DEFAULT_COLOR=["#FAAD14","#E8EDF3"],DEFAULT_OPTIONS$r={percent:.2,color:DEFAULT_COLOR,animation:{}};function getProgressData(r){var e=clamp(isRealNumber(r)?r:0,0,1);return[{current:"".concat(e),type:"current",percent:e},{current:"".concat(e),type:"target",percent:1}]}function geometry$k(r){var e=r.chart,t=r.options,n=t.percent,i=t.progressStyle,a=t.color,o=t.barWidthRatio;e.data(getProgressData(n));var s=deepAssign({},r,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:o,interval:{style:i,color:isString(a)?[a,DEFAULT_COLOR[1]]:a},args:{zIndexReversed:!0,sortZIndex:!0}}});return interval(s),e.tooltip(!1),e.axis(!1),e.legend(!1),r}function coordinate$6(r){var e=r.chart;return e.coordinate("rect").transpose(),r}function adaptor$q(r){return flow(geometry$k,scale$2({}),coordinate$6,animation$5,theme$2,annotation$2())(r)}var Progress=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="process",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$r},e.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(getProgressData(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$q},e}(Plot);function coordinate$5(r){var e=r.chart,t=r.options,n=t.innerRadius,i=t.radius;return e.coordinate("theta",{innerRadius:n,radius:i}),r}function statistic$1(r,e){var t=r.chart,n=r.options,i=n.innerRadius,a=n.statistic,o=n.percent,s=n.meta;if(t.getController("annotation").clear(!0),i&&a){var l=get(s,["percent","formatter"])||function(u){return"".concat((u*100).toFixed(2),"%")},c=a.content;c&&(c=deepAssign({},c,{content:isNil(c.content)?l(o):c.content})),renderStatistic(t,{statistic:__assign$1(__assign$1({},a),{content:c}),plotType:"ring-progress"},{percent:o})}return e&&t.render(!0),r}function adaptor$p(r){return flow(geometry$k,scale$2({}),coordinate$5,statistic$1,animation$5,theme$2,annotation$2())(r)}var DEFAULT_OPTIONS$q={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},RingProgress=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="ring-process",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$q},e.prototype.changeData=function(t){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(getProgressData(t)),statistic$1({chart:this.chart,options:this.options},!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$p},e}(Plot);function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_nonIterableRest()}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _iterableToArrayLimit(r,e){var t=[],n=!0,i=!1,a=void 0;try{for(var o=r[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(t.push(s.value),!(e&&t.length===e));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw a}}return t}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function points(r,e,t,n){r=r.filter(function(p,v){var y=e(p,v),m=t(p,v);return y!=null&&isFinite(y)&&m!=null&&isFinite(m)}),n&&r.sort(function(p,v){return e(p)-e(v)});for(var i=r.length,a=new Float64Array(i),o=new Float64Array(i),s=0,l=0,c,u,f,d=0;d<i;)f=r[d],a[d]=c=+e(f,d,r),o[d]=u=+t(f,d,r),++d,s+=(c-s)/d,l+=(u-l)/d;for(var g=0;g<i;++g)a[g]-=s,o[g]-=l;return[a,o,s,l]}function visitPoints(r,e,t,n){for(var i=0,a=0,o=r.length;a<o;a++){var s=r[a],l=+e(s,a,r),c=+t(s,a,r);l!=null&&isFinite(l)&&c!=null&&isFinite(c)&&n(l,c,i++)}}function determination(r,e,t,n,i){var a=0,o=0;return visitPoints(r,e,t,function(s,l){var c=l-i(s),u=l-n;a+=c*c,o+=u*u}),1-a/o}function angle(r){return Math.atan2(r[1][1]-r[0][1],r[1][0]-r[0][0])*180/Math.PI}function midpoint(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}function interpose(r,e,t){for(var n=Math.log(e-r)*Math.LOG10E+1|0,i=1*Math.pow(10,-n/2-1),a=1e4,o=[l(r),l(e)],s=0;c(o)&&s<a;);return o;function l(u){return[u,t(u)]}function c(u){s++;for(var f=u.length,d=!1,g=0;g<f-1;g++){var p=u[g],v=u[g+1],y=midpoint([p,v]),m=l(y[0]),x=angle([p,y]),_=angle([p,m]),S=Math.abs(x-_);S>i&&(u.splice(g+1,0,m),d=!0)}return d}}function ols(r,e,t,n){var i=n-r*r,a=Math.abs(i)<1e-24?0:(t-r*e)/i,o=e-a*r;return[o,a]}function exponential(){var r=function(a){return a[0]},e=function(a){return a[1]},t;function n(i){var a=0,o=0,s=0,l=0,c=0,u=0,f=t?+t[0]:1/0,d=t?+t[1]:-1/0;visitPoints(i,r,e,function(_,S){var A=Math.log(S),b=_*S;++a,o+=(S-o)/a,l+=(b-l)/a,u+=(_*b-u)/a,s+=(S*A-s)/a,c+=(b*A-c)/a,t||(_<f&&(f=_),_>d&&(d=_))});var g=ols(l/o,s/o,c/o,u/o),p=_slicedToArray(g,2),v=p[0],y=p[1];v=Math.exp(v);var m=function(S){return v*Math.exp(y*S)},x=interpose(f,d,m);return x.a=v,x.b=y,x.predict=m,x.rSquared=determination(i,r,e,o,m),x}return n.domain=function(i){return arguments.length?(t=i,n):t},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(e=i,n):e},n}function linear(){var r=function(a){return a[0]},e=function(a){return a[1]},t;function n(i){var a=0,o=0,s=0,l=0,c=0,u=t?+t[0]:1/0,f=t?+t[1]:-1/0;visitPoints(i,r,e,function(x,_){++a,o+=(x-o)/a,s+=(_-s)/a,l+=(x*_-l)/a,c+=(x*x-c)/a,t||(x<u&&(u=x),x>f&&(f=x))});var d=ols(o,s,l,c),g=_slicedToArray(d,2),p=g[0],v=g[1],y=function(_){return v*_+p},m=[[u,y(u)],[f,y(f)]];return m.a=v,m.b=p,m.predict=y,m.rSquared=determination(i,r,e,s,y),m}return n.domain=function(i){return arguments.length?(t=i,n):t},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(e=i,n):e},n}function median(r){r.sort(function(t,n){return t-n});var e=r.length/2;return e%1===0?(r[e-1]+r[e])/2:r[Math.floor(e)]}var maxiters=2,epsilon=1e-12;function loess(){var r=function(a){return a[0]},e=function(a){return a[1]},t=.3;function n(i){for(var a=points(i,r,e,!0),o=_slicedToArray(a,4),s=o[0],l=o[1],c=o[2],u=o[3],f=s.length,d=Math.max(2,~~(t*f)),g=new Float64Array(f),p=new Float64Array(f),v=new Float64Array(f).fill(1),y=-1;++y<=maxiters;){for(var m=[0,d-1],x=0;x<f;++x){for(var _=s[x],S=m[0],A=m[1],b=_-s[S]>s[A]-_?S:A,C=0,E=0,T=0,I=0,w=0,M=1/Math.abs(s[b]-_||1),$=S;$<=A;++$){var P=s[$],R=l[$],L=tricube(Math.abs(_-P)*M)*v[$],O=P*L;C+=L,E+=O,T+=R*L,I+=R*O,w+=P*O}var k=ols(E/C,T/C,I/C,w/C),B=_slicedToArray(k,2),N=B[0],F=B[1];g[x]=N+F*_,p[x]=Math.abs(l[x]-g[x]),updateInterval(s,x+1,m)}if(y===maxiters)break;var V=median(p);if(Math.abs(V)<epsilon)break;for(var H=0,z,G;H<f;++H)z=p[H]/(6*V),v[H]=z>=1?epsilon:(G=1-z*z)*G}return output(s,g,c,u)}return n.bandwidth=function(i){return arguments.length?(t=i,n):t},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(e=i,n):e},n}function tricube(r){return(r=1-r*r*r)*r*r}function updateInterval(r,e,t){var n=r[e],i=t[0],a=t[1]+1;if(!(a>=r.length))for(;e>i&&r[a]-n<=n-r[i];)t[0]=++i,t[1]=a,++a}function output(r,e,t,n){for(var i=r.length,a=[],o=0,s=0,l=[],c;o<i;++o)c=r[o]+t,l[0]===c?l[1]+=(e[o]-l[1])/++s:(s=0,l[1]+=n,l=[c,e[o]],a.push(l));return l[1]+=n,a}function logarithmic(){var r=function(o){return o[0]},e=function(o){return o[1]},t=Math.E,n;function i(a){var o=0,s=0,l=0,c=0,u=0,f=n?+n[0]:1/0,d=n?+n[1]:-1/0,g=Math.log(t);visitPoints(a,r,e,function(S,A){var b=Math.log(S)/g;++o,s+=(b-s)/o,l+=(A-l)/o,c+=(b*A-c)/o,u+=(b*b-u)/o,n||(S<f&&(f=S),S>d&&(d=S))});var p=ols(s,l,c,u),v=_slicedToArray(p,2),y=v[0],m=v[1],x=function(A){return m*Math.log(A)/g+y},_=interpose(f,d,x);return _.a=m,_.b=y,_.predict=x,_.rSquared=determination(a,r,e,l,x),_}return i.domain=function(a){return arguments.length?(n=a,i):n},i.x=function(a){return arguments.length?(r=a,i):r},i.y=function(a){return arguments.length?(e=a,i):e},i.base=function(a){return arguments.length?(t=a,i):t},i}function quad(){var r=function(a){return a[0]},e=function(a){return a[1]},t;function n(i){var a=points(i,r,e),o=_slicedToArray(a,4),s=o[0],l=o[1],c=o[2],u=o[3],f=s.length,d=0,g=0,p=0,v=0,y=0,m,x,_,S;for(m=0;m<f;)x=s[m],_=l[m++],S=x*x,d+=(S-d)/m,g+=(S*x-g)/m,p+=(S*S-p)/m,v+=(x*_-v)/m,y+=(S*_-y)/m;var A=0,b=0,C=t?+t[0]:1/0,E=t?+t[1]:-1/0;visitPoints(i,r,e,function(L,O){b++,A+=(O-A)/b,t||(L<C&&(C=L),L>E&&(E=L))});var T=p-d*d,I=d*T-g*g,w=(y*d-v*g)/I,M=(v*T-y*g)/I,$=-w*d,P=function(O){return O=O-c,w*O*O+M*O+$+u},R=interpose(C,E,P);return R.a=w,R.b=M-2*w*c,R.c=$-M*c+w*c*c+u,R.predict=P,R.rSquared=determination(i,r,e,A,P),R}return n.domain=function(i){return arguments.length?(t=i,n):t},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(e=i,n):e},n}function polynomial(){var r=function(o){return o[0]},e=function(o){return o[1]},t=3,n;function i(a){if(t===1){var o=linear().x(r).y(e).domain(n)(a);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(t===2){var s=quad().x(r).y(e).domain(n)(a);return s.coefficients=[s.c,s.b,s.a],delete s.a,delete s.b,delete s.c,s}var l=points(a,r,e),c=_slicedToArray(l,4),u=c[0],f=c[1],d=c[2],g=c[3],p=u.length,v=[],y=[],m=t+1,x=0,_=0,S=n?+n[0]:1/0,A=n?+n[1]:-1/0;visitPoints(a,r,e,function(P,R){++_,x+=(R-x)/_,n||(P<S&&(S=P),P>A&&(A=P))});var b,C,E,T,I;for(b=0;b<m;++b){for(E=0,T=0;E<p;++E)T+=Math.pow(u[E],b)*f[E];for(v.push(T),I=new Float64Array(m),C=0;C<m;++C){for(E=0,T=0;E<p;++E)T+=Math.pow(u[E],b+C);I[C]=T}y.push(I)}y.push(v);var w=gaussianElimination(y),M=function(R){R-=d;var L=g+w[0]+w[1]*R+w[2]*R*R;for(b=3;b<m;++b)L+=w[b]*Math.pow(R,b);return L},$=interpose(S,A,M);return $.coefficients=uncenter(m,w,-d,g),$.predict=M,$.rSquared=determination(a,r,e,x,M),$}return i.domain=function(a){return arguments.length?(n=a,i):n},i.x=function(a){return arguments.length?(r=a,i):r},i.y=function(a){return arguments.length?(e=a,i):e},i.order=function(a){return arguments.length?(t=a,i):t},i}function uncenter(r,e,t,n){var i=Array(r),a,o,s,l;for(a=0;a<r;++a)i[a]=0;for(a=r-1;a>=0;--a)for(s=e[a],l=1,i[a]+=s,o=1;o<=a;++o)l*=(a+1-o)/o,i[a-o]+=s*Math.pow(t,o)*l;return i[0]+=n,i}function gaussianElimination(r){var e=r.length-1,t=[],n,i,a,o,s;for(n=0;n<e;++n){for(o=n,i=n+1;i<e;++i)Math.abs(r[n][i])>Math.abs(r[n][o])&&(o=i);for(a=n;a<e+1;++a)s=r[a][n],r[a][n]=r[a][o],r[a][o]=s;for(i=n+1;i<e;++i)for(a=e;a>=n;a--)r[a][i]-=r[a][n]*r[n][i]/r[n][n]}for(i=e-1;i>=0;--i){for(s=0,a=i+1;a<e;++a)s+=r[a][i]*t[a];t[i]=(r[e][i]-s)/r[i][i]}return t}function power(){var r=function(a){return a[0]},e=function(a){return a[1]},t;function n(i){var a=0,o=0,s=0,l=0,c=0,u=0,f=t?+t[0]:1/0,d=t?+t[1]:-1/0;visitPoints(i,r,e,function(_,S){var A=Math.log(_),b=Math.log(S);++a,o+=(A-o)/a,s+=(b-s)/a,l+=(A*b-l)/a,c+=(A*A-c)/a,u+=(S-u)/a,t||(_<f&&(f=_),_>d&&(d=_))});var g=ols(o,s,l,c),p=_slicedToArray(g,2),v=p[0],y=p[1];v=Math.exp(v);var m=function(S){return v*Math.pow(S,y)},x=interpose(f,d,m);return x.a=v,x.b=y,x.predict=m,x.rSquared=determination(i,r,e,u,m),x}return n.domain=function(i){return arguments.length?(t=i,n):t},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(e=i,n):e},n}var REGRESSION_MAP={exp:exponential,linear,loess,log:logarithmic,poly:polynomial,pow:power,quad};function getQuadrantDefaultConfig(r,e){var t=10,n={regionStyle:[{position:{start:[r,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[r,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[r,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[r,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-t,offsetY:-t,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:t,offsetY:-t,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:t,offsetY:t,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-t,offsetY:t,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return n}var splinePath=function(r,e){var t=e.view,n=e.options,i=n.xField,a=n.yField,o=t.getScaleByField(i),s=t.getScaleByField(a),l=r.map(function(c){return t.getCoordinate().convert({x:o.scale(c[0]),y:s.scale(c[1])})});return getSplinePath(l,!1)},getPath=function(r){var e=r.options,t=e.xField,n=e.yField,i=e.data,a=e.regressionLine,o=a.type,s=o===void 0?"linear":o,l=a.algorithm,c=a.equation,u,f=null;if(l)u=isArray$3(l)?l:l(i),f=c;else{var d=REGRESSION_MAP[s]().x(function(g){return g[t]}).y(function(g){return g[n]});u=d(i),f=getRegressionEquation(s,u)}return[splinePath(u,r),f]},getMeta=function(r){var e,t=r.meta,n=t===void 0?{}:t,i=r.xField,a=r.yField,o=r.data,s=o[0][i],l=o[0][a],c=s>0,u=l>0;function f(d,g){var p=get(n,[d]);function v(m){return get(p,m)}var y={};return g==="x"?(isNumber$1(s)&&(isNumber$1(v("min"))||(y.min=c?0:s*2),isNumber$1(v("max"))||(y.max=c?s*2:0)),y):(isNumber$1(l)&&(isNumber$1(v("min"))||(y.min=u?0:l*2),isNumber$1(v("max"))||(y.max=u?l*2:0)),y)}return __assign$1(__assign$1({},n),(e={},e[i]=__assign$1(__assign$1({},n[i]),f(i,"x")),e[a]=__assign$1(__assign$1({},n[a]),f(a,"y")),e))};function getRegressionEquation(r,e){var t,n,i,a=function(c,u){return u===void 0&&(u=4),Math.round(c*Math.pow(10,u))/Math.pow(10,u)},o=function(c){return Number.isFinite(c)?a(c):"?"};switch(r){case"linear":return"y = ".concat(o(e.a),"x + ").concat(o(e.b),", R^2 = ").concat(o(e.rSquared));case"exp":return"y = ".concat(o(e.a),"e^(").concat(o(e.b),"x), R^2 = ").concat(o(e.rSquared));case"log":return"y = ".concat(o(e.a),"ln(x) + ").concat(o(e.b),", R^2 = ").concat(o(e.rSquared));case"quad":return"y = ".concat(o(e.a),"x^2 + ").concat(o(e.b),"x + ").concat(o(e.c),", R^2 = ").concat(o(e.rSquared));case"poly":for(var s="y = ".concat(o((t=e.coefficients)===null||t===void 0?void 0:t[0])," + ").concat(o((n=e.coefficients)===null||n===void 0?void 0:n[1]),"x + ").concat(o((i=e.coefficients)===null||i===void 0?void 0:i[2]),"x^2"),l=3;l<e.coefficients.length;++l)s+=" + ".concat(o(e.coefficients[l]),"x^").concat(l);return"".concat(s,", R^2 = ").concat(o(e.rSquared));case"pow":return"y = ".concat(o(e.a),"x^").concat(o(e.b),", R^2 = ").concat(o(e.rSquared))}return null}function transformOptions$1(r){var e=r.data,t=e===void 0?[]:e,n=r.xField,i=r.yField;if(t.length){for(var a=!0,o=!0,s=t[0],l=void 0,c=1;c<t.length&&(l=t[c],s[n]!==l[n]&&(a=!1),s[i]!==l[i]&&(o=!1),!(!a&&!o));c++)s=l;var u=[];a&&u.push(n),o&&u.push(i);var f=pick(getMeta(r),u);return deepAssign({},r,{meta:f})}return r}function geometry$j(r){var e=r.chart,t=r.options,n=t.data,i=t.type,a=t.color,o=t.shape,s=t.pointStyle,l=t.shapeField,c=t.colorField,u=t.xField,f=t.yField,d=t.sizeField,g=t.size,p=t.tooltip;d&&(g||(g=[2,8]),isNumber$1(g)&&(g=[g,g])),p&&!p.fields&&(p=__assign$1(__assign$1({},p),{fields:[u,f,c,d,l]})),e.data(n),point(deepAssign({},r,{options:{seriesField:c,point:{color:a,shape:o,size:g,style:s},tooltip:p}}));var v=findGeometry(e,"point");return i&&v.adjust(i),r}function meta$f(r){var e,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField,s=transformOptions$1(t);return flow(scale$2((e={},e[a]=n,e[o]=i,e)))(deepAssign({},r,{options:s}))}function axis$g(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return e.axis(a,n),e.axis(o,i),r}function legend$b(r){var e=r.chart,t=r.options,n=t.legend,i=t.colorField,a=t.shapeField,o=t.sizeField,s=t.shapeLegend,l=t.sizeLegend,c=n!==!1;return i&&e.legend(i,c?n:!1),a&&(s?e.legend(a,s):e.legend(a,s===!1?!1:n)),o&&e.legend(o,l||!1),!c&&!s&&!l&&e.legend(!1),r}function label$9(r){var e=r.chart,t=r.options,n=t.label,i=t.yField,a=findGeometry(e,"point");if(!n)a.label(!1);else{var o=n.callback,s=__rest(n,["callback"]);a.label({fields:[i],callback:o,cfg:transformLabel(s)})}return r}function scatterAnnotation(r){var e=r.options,t=e.quadrant,n=[];if(t){var i=t.xBaseline,a=i===void 0?0:i,o=t.yBaseline,s=o===void 0?0:o,l=t.labels,c=t.regionStyle,u=t.lineStyle,f=getQuadrantDefaultConfig(a,s),d=new Array(4).join(",").split(",");d.forEach(function(g,p){n.push(__assign$1(__assign$1({type:"region",top:!1},f.regionStyle[p].position),{style:deepAssign({},f.regionStyle[p].style,c==null?void 0:c[p])}),__assign$1({type:"text",top:!0},deepAssign({},f.labelStyle[p],l==null?void 0:l[p])))}),n.push({type:"line",top:!1,start:["min",s],end:["max",s],style:deepAssign({},f.lineStyle,u)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:deepAssign({},f.lineStyle,u)})}return flow(annotation$2(n))(r)}function regressionLine(r){var e=r.options,t=r.chart,n=e.regressionLine;if(n){var i=n.style,a=n.equationStyle,o=a===void 0?{}:a,s=n.top,l=s===void 0?!1:s,c=n.showEquation,u=c===void 0?!1:c,f={stroke:"#9ba29a",lineWidth:2,opacity:.5},d={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};t.annotation().shape({top:l,render:function(g,p){var v=g.addGroup({id:"".concat(t.id,"-regression-line"),name:"regression-line-group"}),y=getPath({view:p,options:e}),m=y[0],x=y[1];v.addShape("path",{name:"regression-line",attrs:__assign$1(__assign$1({path:m},f),i)}),u&&v.addShape("text",{name:"regression-equation",attrs:__assign$1(__assign$1(__assign$1({},d),o),{text:x})})}})}return r}function tooltip$6(r){var e=r.chart,t=r.options,n=t.tooltip;return n?e.tooltip(n):n===!1&&e.tooltip(!1),r}function adaptor$o(r){return flow(geometry$j,meta$f,axis$g,legend$b,tooltip$6,label$9,brushInteraction,slider$2,scrollbar,interaction$8,scatterAnnotation,animation$5,theme$2,regressionLine)(r)}var DEFAULT_OPTIONS$p=deepAssign({},Plot.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});registerInteraction("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Scatter=function(r){__extends$1(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.type="scatter",i.on(VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(a){var o,s,l=i,c=l.options,u=l.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===EVENTS.FILTER){var f=i.chart.filterData(i.chart.getData());meta$f({chart:u,options:__assign$1(__assign$1({},c),{data:f})})}((s=a.data)===null||s===void 0?void 0:s.source)===EVENTS.RESET&&meta$f({chart:u,options:c})}),i}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$p},e.prototype.changeData=function(t){this.updateOption(transformOptions$1(deepAssign({},this.options,{data:t})));var n=this,i=n.options,a=n.chart;meta$f({chart:a,options:i}),this.chart.changeData(t)},e.prototype.getSchemaAdaptor=function(){return adaptor$o},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(Plot),Y_FIELD$4="$$stock-range$$",TREND_FIELD="trend",TREND_UP="up",TREND_DOWN="down",DEFAULT_TOOLTIP_OPTIONS$2={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(r,e,t){var n;if(r==="x"){var i=t[0];n=i?i.title:e}else n=e;return{position:r==="y"?"start":"end",content:n,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},DEFAULT_OPTIONS$o=deepAssign({},Plot.getDefaultOptions(),{tooltip:DEFAULT_TOOLTIP_OPTIONS$2,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function getStockData(r,e){return map$2(r,function(t){var n=t&&__assign$1({},t);if(isArray$3(e)&&n){var i=e[0],a=e[1],o=e[2],s=e[3];n[TREND_FIELD]=n[i]<=n[a]?TREND_UP:TREND_DOWN,n[Y_FIELD$4]=[n[i],n[a],n[o],n[s]]}return n})}function geometry$i(r){var e=r.chart,t=r.options,n=t.yField,i=t.data,a=t.risingFill,o=t.fallingFill,s=t.tooltip,l=t.stockStyle;e.data(getStockData(i,n));var c=s;return c!==!1&&(c=deepAssign({},{fields:n},c)),schema(deepAssign({},r,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:Y_FIELD$4,seriesField:TREND_FIELD,rawFields:n,tooltip:c}})),r}function meta$e(r){var e,t,n=r.chart,i=r.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=(e={},e[l]={type:"timeCat",tickCount:6},e[TREND_FIELD]={values:[TREND_UP,TREND_DOWN]},e),u=deepAssign(c,a,(t={},t[l]=pick(o,AXIS_META_CONFIG_KEYS),t[Y_FIELD$4]=pick(s,AXIS_META_CONFIG_KEYS),t));return n.scale(u),r}function axis$f(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField;return n===!1?e.axis(a,!1):e.axis(a,n),i===!1?e.axis(Y_FIELD$4,!1):e.axis(Y_FIELD$4,i),r}function tooltip$5(r){var e=r.chart,t=r.options,n=t.tooltip;return n!==!1?e.tooltip(n):e.tooltip(!1),r}function legend$a(r){var e=r.chart,t=r.options,n=t.legend;return n?e.legend(TREND_FIELD,n):n===!1&&e.legend(!1),r}function adaptor$n(r){flow(theme$2,geometry$i,meta$e,axis$f,tooltip$5,legend$a,interaction$8,animation$5,annotation$2(),slider$2)(r)}var Stock=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="stock",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$o},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$n},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this.options.yField;this.chart.changeData(getStockData(t,n))},e}(Plot);function getTinyData(r){return map$2(r||[],function(e,t){return{x:"".concat(t),y:e}})}var X_FIELD$3="x",Y_FIELD$3="y",DEFAULT_TOOLTIP_OPTIONS$1={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(r,e){return"".concat(get(e,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},DEFAULT_OPTIONS$n={appendPadding:2,tooltip:__assign$1({},DEFAULT_TOOLTIP_OPTIONS$1),animation:{}};function geometry$h(r){var e=r.chart,t=r.options,n=t.data,i=t.color,a=t.areaStyle,o=t.point,s=t.line,l=o==null?void 0:o.state,c=getTinyData(n);e.data(c);var u=deepAssign({},r,{options:{xField:X_FIELD$3,yField:Y_FIELD$3,area:{color:i,style:a},line:s,point:o}}),f=deepAssign({},u,{options:{tooltip:!1}}),d=deepAssign({},u,{options:{tooltip:!1,state:l}});return area(u),line(f),point(d),e.axis(!1),e.legend(!1),r}function meta$d(r){var e,t,n=r.options,i=n.xAxis,a=n.yAxis,o=n.data,s=getTinyData(o);return flow(scale$2((e={},e[X_FIELD$3]=i,e[Y_FIELD$3]=a,e),(t={},t[X_FIELD$3]={type:"cat"},t[Y_FIELD$3]=adjustYMetaByZero(s,Y_FIELD$3),t)))(r)}function adaptor$m(r){return flow(pattern("areaStyle"),geometry$h,meta$d,tooltip$9,theme$2,animation$5,annotation$2())(r)}var DEFAULT_OPTIONS$m={appendPadding:2,tooltip:__assign$1({},DEFAULT_TOOLTIP_OPTIONS$1),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},TinyArea=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="tiny-area",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$m},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this,i=n.chart,a=n.options;meta$d({chart:i,options:a}),i.changeData(getTinyData(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$m},e}(Plot);function geometry$g(r){var e=r.chart,t=r.options,n=t.data,i=t.color,a=t.columnStyle,o=t.columnWidthRatio,s=getTinyData(n);e.data(s);var l=deepAssign({},r,{options:{xField:X_FIELD$3,yField:Y_FIELD$3,widthRatio:o,interval:{style:a,color:i}}});return interval(l),e.axis(!1),e.legend(!1),e.interaction("element-active"),r}function adaptor$l(r){return flow(theme$2,pattern("columnStyle"),geometry$g,meta$d,tooltip$9,animation$5,annotation$2())(r)}var DEFAULT_TOOLTIP_OPTIONS={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(r,e){return"".concat(get(e,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},DEFAULT_OPTIONS$l={appendPadding:2,tooltip:__assign$1({},DEFAULT_TOOLTIP_OPTIONS),animation:{}},TinyColumn=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="tiny-column",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$l},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this,i=n.chart,a=n.options;meta$d({chart:i,options:a}),i.changeData(getTinyData(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$l},e}(Plot);function geometry$f(r){var e=r.chart,t=r.options,n=t.data,i=t.color,a=t.lineStyle,o=t.point,s=o==null?void 0:o.state,l=getTinyData(n);e.data(l);var c=deepAssign({},r,{options:{xField:X_FIELD$3,yField:Y_FIELD$3,line:{color:i,style:a},point:o}}),u=deepAssign({},c,{options:{tooltip:!1,state:s}});return line(c),point(u),e.axis(!1),e.legend(!1),r}function adaptor$k(r){return flow(geometry$f,meta$d,theme$2,tooltip$9,animation$5,annotation$2())(r)}var TinyLine=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="tiny-line",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$n},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this,i=n.chart,a=n.options;meta$d({chart:i,options:a}),i.changeData(getTinyData(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$k},e}(Plot),PLOT_ADAPTORS={line:adaptor$y,pie:adaptor$r,column:adaptor$w,bar:adaptor$v,area:adaptor$x,gauge:adaptor$t,"tiny-line":adaptor$k,"tiny-column":adaptor$l,"tiny-area":adaptor$m,"ring-progress":adaptor$p,progress:adaptor$q,scatter:adaptor$o,histogram:adaptor$s,funnel:adaptor$u,stock:adaptor$n},PLOT_CONSTRUCTOR={line:Line,pie:Pie,column:Column,bar:Bar,area:Area,gauge:Gauge,"tiny-line":TinyLine,"tiny-column":TinyColumn,"tiny-area":TinyArea,"ring-progress":RingProgress,progress:Progress,scatter:Scatter,histogram:Histogram,funnel:Funnel,stock:Stock},DEFAULT_OPTIONS_MAP={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function execPlotAdaptor(r,e,t){var n=PLOT_CONSTRUCTOR[r];if(!n){console.error("could not find ".concat(r," plot"));return}var i=PLOT_ADAPTORS[r];i({chart:e,options:deepAssign({},n.getDefaultOptions(),get(DEFAULT_OPTIONS_MAP,r,{}),t)})}function multiView(r){var e=r.chart,t=r.options,n=t.views,i=t.legend;return each$1(n,function(a){var o=a.region,s=a.data,l=a.meta,c=a.axes,u=a.coordinate,f=a.interactions,d=a.annotations,g=a.tooltip,p=a.geometries,v=e.createView({region:o});v.data(s);var y={};c&&each$1(c,function(m,x){y[x]=pick(m,AXIS_META_CONFIG_KEYS)}),y=deepAssign({},l,y),v.scale(y),c?each$1(c,function(m,x){v.axis(x,m)}):v.axis(!1),v.coordinate(u),each$1(p,function(m){var x=geometry$x({chart:v,options:m}).ext,_=m.adjust;_&&x.geometry.adjust(_)}),each$1(f,function(m){m.enable===!1?v.removeInteraction(m.type):v.interaction(m.type,m.cfg)}),each$1(d,function(m){v.annotation()[m.type](__assign$1({},m))}),typeof a.animation=="boolean"?v.animate(!1):(v.animate(!0),each$1(v.geometries,function(m){m.animate(a.animation)})),g&&(v.interaction("tooltip"),v.tooltip(g))}),i?each$1(i,function(a,o){e.legend(o,a)}):e.legend(!1),e.tooltip(t.tooltip),r}function multiPlot(r){var e=r.chart,t=r.options,n=t.plots,i=t.data,a=i===void 0?[]:i;return each$1(n,function(o){var s=o.type,l=o.region,c=o.options,u=c===void 0?{}:c,f=o.top,d=u.tooltip;if(f){execPlotAdaptor(s,e,__assign$1(__assign$1({},u),{data:a}));return}var g=e.createView(__assign$1({region:l},pick(u,PLOT_CONTAINER_OPTIONS)));d&&g.interaction("tooltip"),execPlotAdaptor(s,g,__assign$1({data:a},u))}),r}function slider$1(r){var e=r.chart,t=r.options;return e.option("slider",t.slider),r}function adaptor$j(r){return flow(animation$5,multiView,multiPlot,interaction$8,animation$5,theme$2,tooltip$9,slider$1,annotation$2())(r)}function getElementValue(r,e){var t=r.getModel(),n=t.data,i;return isArray$3(n)?i=n[0][e]:i=n[e],i}function clearHighlight(r){var e=getAllElements(r);each$1(e,function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)})}var Association=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getAssociationItems=function(t,n){var i,a=this.context.event,o=n||{},s=o.linkField,l=o.dim,c=[];if(!((i=a.data)===null||i===void 0)&&i.data){var u=a.data.data;each$1(t,function(f){var d,g,p=s;if(l==="x"?p=f.getXScale().field:l==="y"?p=(d=f.getYScales().find(function(y){return y.field===p}))===null||d===void 0?void 0:d.field:p||(p=(g=f.getGroupScales()[0])===null||g===void 0?void 0:g.field),!!p){var v=map$2(getAllElements(f),function(y){var m=!1,x=!1,_=isArray$3(u)?get(u[0],p):get(u,p);return getElementValue(y,p)===_?m=!0:x=!0,{element:y,view:f,active:m,inactive:x}});c.push.apply(c,v)}})}return c},e.prototype.showTooltip=function(t){var n=getSiblingViews(this.context.view),i=this.getAssociationItems(n,t);each$1(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},e.prototype.hideTooltip=function(){var t=getSiblingViews(this.context.view);each$1(t,function(n){n.hideTooltip()})},e.prototype.active=function(t){var n=getViews(this.context.view),i=this.getAssociationItems(n,t);each$1(i,function(a){var o=a.active,s=a.element;o&&s.setState("active",!0)})},e.prototype.selected=function(t){var n=getViews(this.context.view),i=this.getAssociationItems(n,t);each$1(i,function(a){var o=a.active,s=a.element;o&&s.setState("selected",!0)})},e.prototype.highlight=function(t){var n=getViews(this.context.view),i=this.getAssociationItems(n,t);each$1(i,function(a){var o=a.inactive,s=a.element;o&&s.setState("inactive",!0)})},e.prototype.reset=function(){var t=getViews(this.context.view);each$1(t,function(n){clearHighlight(n)})},e}(Action);registerAction("association",Association);registerInteraction("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});registerInteraction("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});registerInteraction("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});registerInteraction("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="mix",t}return e.prototype.getSchemaAdaptor=function(){return adaptor$j},e})(Plot);var Stage;(function(r){r.DEV="DEV",r.BETA="BETA",r.STABLE="STABLE"})(Stage||(Stage={}));var FIRST_AXES_VIEW="first-axes-view",SECOND_AXES_VIEW="second-axes-view",SERIES_FIELD_KEY="series-field-key";function transformData$7(r,e,t,n,i){var a=[];e.forEach(function(f){n.forEach(function(d){var g,p=(g={},g[r]=d[r],g[t]=f,g[f]=d[f],g);a.push(p)})});var o=Object.values(groupBy(a,t)),s=o[0],l=s===void 0?[]:s,c=o[1],u=c===void 0?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function isHorizontal(r){return r!=="vertical"}function syncViewPadding(r,e,t){var n=e[0],i=e[1],a=n.autoPadding,o=i.autoPadding,s=r.__axisPosition,l=s.layout,c=s.position;if(isHorizontal(l)&&c==="top"&&(n.autoPadding=t.instance(a.top,0,a.bottom,a.left),i.autoPadding=t.instance(o.top,a.left,o.bottom,0)),isHorizontal(l)&&c==="bottom"&&(n.autoPadding=t.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=t.instance(o.top,o.right,o.bottom,a.right/2+5)),!isHorizontal(l)&&c==="bottom"){var u=a.left>=o.left?a.left:o.left;n.autoPadding=t.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=t.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!isHorizontal(l)&&c==="top"){var u=a.left>=o.left?a.left:o.left;n.autoPadding=t.instance(a.top,a.right,0,u),i.autoPadding=t.instance(0,o.right,a.top,u)}}function geometry$e(r){var e=r.chart,t=r.options,n=t.data,i=t.xField,a=t.yField,o=t.color,s=t.barStyle,l=t.widthRatio,c=t.legend,u=t.layout,f=transformData$7(i,a,SERIES_FIELD_KEY,n,isHorizontal(u));c?e.legend(SERIES_FIELD_KEY,c):c===!1&&e.legend(!1);var d,g,p=f[0],v=f[1];isHorizontal(u)?(d=e.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:FIRST_AXES_VIEW}),d.coordinate().transpose().reflect("x"),g=e.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:SECOND_AXES_VIEW}),g.coordinate().transpose(),d.data(p),g.data(v)):(d=e.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:FIRST_AXES_VIEW}),g=e.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:SECOND_AXES_VIEW}),g.coordinate().reflect("y"),d.data(p),g.data(v));var y=deepAssign({},r,{chart:d,options:{widthRatio:l,xField:i,yField:a[0],seriesField:SERIES_FIELD_KEY,interval:{color:o,style:s}}});interval(y);var m=deepAssign({},r,{chart:g,options:{xField:i,yField:a[1],seriesField:SERIES_FIELD_KEY,widthRatio:l,interval:{color:o,style:s}}});return interval(m),r}function meta$c(r){var e,t,n,i=r.options,a=r.chart,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=findViewById(a,FIRST_AXES_VIEW),f=findViewById(a,SECOND_AXES_VIEW),d={};return keys((i==null?void 0:i.meta)||{}).map(function(g){get(i==null?void 0:i.meta,[g,"alias"])&&(d[g]=i.meta[g].alias)}),a.scale((e={},e[SERIES_FIELD_KEY]={sync:!0,formatter:function(g){return get(d,g,g)}},e)),scale$2((t={},t[l]=o,t[c[0]]=s[c[0]],t))(deepAssign({},r,{chart:u})),scale$2((n={},n[l]=o,n[c[1]]=s[c[1]],n))(deepAssign({},r,{chart:f})),r}function axis$e(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField,s=t.layout,l=findViewById(e,FIRST_AXES_VIEW),c=findViewById(e,SECOND_AXES_VIEW);return(n==null?void 0:n.position)==="bottom"?c.axis(a,__assign$1(__assign$1({},n),{label:{formatter:function(){return""}}})):c.axis(a,!1),n===!1?l.axis(a,!1):l.axis(a,__assign$1({position:isHorizontal(s)?"top":"bottom"},n)),i===!1?(l.axis(o[0],!1),c.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),c.axis(o[1],i[o[1]])),e.__axisPosition={position:l.getOptions().axes[a].position,layout:s},r}function interaction$5(r){var e=r.chart;return interaction$8(deepAssign({},r,{chart:findViewById(e,FIRST_AXES_VIEW)})),interaction$8(deepAssign({},r,{chart:findViewById(e,SECOND_AXES_VIEW)})),r}function limitInPlot$1(r){var e=r.chart,t=r.options,n=t.yField,i=t.yAxis;return limitInPlot$2(deepAssign({},r,{chart:findViewById(e,FIRST_AXES_VIEW),options:{yAxis:i[n[0]]}})),limitInPlot$2(deepAssign({},r,{chart:findViewById(e,SECOND_AXES_VIEW),options:{yAxis:i[n[1]]}})),r}function theme$1(r){var e=r.chart;return theme$2(deepAssign({},r,{chart:findViewById(e,FIRST_AXES_VIEW)})),theme$2(deepAssign({},r,{chart:findViewById(e,SECOND_AXES_VIEW)})),theme$2(r),r}function animation$4(r){var e=r.chart;return animation$5(deepAssign({},r,{chart:findViewById(e,FIRST_AXES_VIEW)})),animation$5(deepAssign({},r,{chart:findViewById(e,SECOND_AXES_VIEW)})),r}function label$8(r){var e=this,t,n,i=r.chart,a=r.options,o=a.label,s=a.yField,l=a.layout,c=findViewById(i,FIRST_AXES_VIEW),u=findViewById(i,SECOND_AXES_VIEW),f=findGeometry(c,"interval"),d=findGeometry(u,"interval");if(!o)f.label(!1),d.label(!1);else{var g=o.callback,p=__rest(o,["callback"]);p.position||(p.position="middle"),p.offset===void 0&&(p.offset=2);var v=__assign$1({},p);if(isHorizontal(l)){var y=((t=v.style)===null||t===void 0?void 0:t.textAlign)||(p.position==="middle"?"center":"left");p.style=deepAssign({},p.style,{textAlign:y});var m={left:"right",right:"left",center:"center"};v.style=deepAssign({},v.style,{textAlign:m[y]})}else{var x={top:"bottom",bottom:"top",middle:"middle"};typeof p.position=="string"?p.position=x[p.position]:typeof p.position=="function"&&(p.position=function(){for(var A=[],b=0;b<arguments.length;b++)A[b]=arguments[b];return x[p.position.apply(e,A)]});var _=((n=v.style)===null||n===void 0?void 0:n.textBaseline)||"bottom";v.style=deepAssign({},v.style,{textBaseline:_});var S={top:"bottom",bottom:"top",middle:"middle"};p.style=deepAssign({},p.style,{textBaseline:S[_]})}f.label({fields:[s[0]],callback:g,cfg:transformLabel(v)}),d.label({fields:[s[1]],callback:g,cfg:transformLabel(p)})}return r}function adaptor$i(r){return flow(geometry$e,meta$c,axis$e,limitInPlot$1,theme$1,label$8,tooltip$9,interaction$5,animation$4)(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="bidirectional-bar",t}return e.getDefaultOptions=function(){return deepAssign({},r.getDefaultOptions.call(this),{syncViewPadding})},e.prototype.changeData=function(t){t===void 0&&(t=[]),this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var n=this.options,i=n.xField,a=n.yField,o=n.layout,s=transformData$7(i,a,SERIES_FIELD_KEY,t,isHorizontal(o)),l=s[0],c=s[1],u=findViewById(this.chart,FIRST_AXES_VIEW),f=findViewById(this.chart,SECOND_AXES_VIEW);u.data(l),f.data(c),this.chart.render(!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$i},e.SERIES_FIELD_KEY=SERIES_FIELD_KEY,e})(Plot);var _a,BOX_RANGE="$$range$$",BOX_RANGE_ALIAS="low-q1-median-q3-high",BOX_SYNC_NAME="$$y_outliers$$",OUTLIERS_VIEW_ID="outliers_view",DEFAULT_OPTIONS$k=deepAssign({},Plot.getDefaultOptions(),{meta:(_a={},_a[BOX_RANGE]={min:0,alias:BOX_RANGE_ALIAS},_a),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),transformData$6=function(r,e){var t=r;if(Array.isArray(e)){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4];t=map$2(r,function(l){return l[BOX_RANGE]=[l[n],l[i],l[a],l[o],l[s]],l})}return t};function field(r){var e=r.chart,t=r.options,n=t.xField,i=t.yField,a=t.groupField,o=t.color,s=t.tooltip,l=t.boxStyle;e.data(transformData$6(t.data,i));var c=isArray$3(i)?BOX_RANGE:i,u=i?isArray$3(i)?i:[i]:[],f=s;f!==!1&&(f=deepAssign({},{fields:isArray$3(i)?i:[]},f));var d=schema(deepAssign({},r,{options:{xField:n,yField:c,seriesField:a,tooltip:f,rawFields:u,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&d.geometry.adjust("dodge"),r}function outliersPoint(r){var e=r.chart,t=r.options,n=t.xField,i=t.data,a=t.outliersField,o=t.outliersStyle,s=t.padding,l=t.label;if(!a)return r;var c=e.createView({padding:s,id:OUTLIERS_VIEW_ID}),u=i.reduce(function(f,d){var g=d[a];return g.forEach(function(p){var v;return f.push(__assign$1(__assign$1({},d),(v={},v[a]=p,v)))}),f},[]);return c.data(u),point({chart:c,options:{xField:n,yField:a,point:{shape:"circle",style:o},label:l}}),c.axis(!1),r}function meta$b(r){var e,t,n=r.chart,i=r.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,f=Array.isArray(c)?BOX_RANGE:c,d={};if(u){var g=BOX_SYNC_NAME;d=(e={},e[u]={sync:g,nice:!0},e[f]={sync:g,nice:!0},e)}var p=deepAssign(d,a,(t={},t[l]=pick(o,AXIS_META_CONFIG_KEYS),t[f]=pick(s,AXIS_META_CONFIG_KEYS),t));return n.scale(p),r}function axis$d(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField,s=Array.isArray(o)?BOX_RANGE:o;return n===!1?e.axis(a,!1):e.axis(a,n),i===!1?e.axis(BOX_RANGE,!1):e.axis(s,i),r}function legend$9(r){var e=r.chart,t=r.options,n=t.legend,i=t.groupField;return i?n?e.legend(i,n):e.legend(i,{position:"bottom"}):e.legend(!1),r}function adaptor$h(r){return flow(field,outliersPoint,meta$b,axis$d,legend$9,tooltip$9,annotation$2(),interaction$8,animation$5,theme$2)(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="box",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$k},e.prototype.changeData=function(t){this.updateOption({data:t});var n=this.options.yField,i=this.chart.views.find(function(a){return a.id===OUTLIERS_VIEW_ID});i&&i.data(t),this.chart.changeData(transformData$6(t,n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$h},e})(Plot);function getSeriesFieldKey(r,e,t){return r.length>1?"".concat(e,"_").concat(t):"".concat(e)}function transformData$5(r){var e=r.data,t=r.xField,n=r.measureField,i=r.rangeField,a=r.targetField,o=r.layout,s=[],l=[];e.forEach(function(f,d){var g=[f[i]].flat();g.sort(function(y,m){return y-m}),g.forEach(function(y,m){var x,_=m===0?y:g[m]-g[m-1];s.push((x={rKey:"".concat(i,"_").concat(m)},x[t]=t?f[t]:String(d),x[i]=_,x))});var p=[f[n]].flat();p.forEach(function(y,m){var x;s.push((x={mKey:getSeriesFieldKey(p,n,m)},x[t]=t?f[t]:String(d),x[n]=y,x))});var v=[f[a]].flat();v.forEach(function(y,m){var x;s.push((x={tKey:getSeriesFieldKey(v,a,m)},x[t]=t?f[t]:String(d),x[a]=y,x))}),l.push(f[i],f[n],f[a])});var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,o==="vertical"&&s.reverse(),{min:c,max:u,ds:s}}function geometry$d(r){var e=r.chart,t=r.options,n=t.bulletStyle,i=t.targetField,a=t.rangeField,o=t.measureField,s=t.xField,l=t.color,c=t.layout,u=t.size,f=t.label,d=transformData$5(t),g=d.min,p=d.max,v=d.ds;e.data(v);var y=deepAssign({},r,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:get(f,"range"),interval:{color:get(l,"range"),style:get(n,"range"),size:get(u,"range")}}});interval(y),e.geometries[0].tooltip(!1);var m=deepAssign({},r,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:get(f,"measure"),interval:{color:get(l,"measure"),style:get(n,"measure"),size:get(u,"measure")}}});interval(m);var x=deepAssign({},r,{options:{xField:s,yField:i,seriesField:"tKey",label:get(f,"target"),point:{color:get(l,"target"),style:get(n,"target"),size:isFunction(get(u,"target"))?function(_){return get(u,"target")(_)/2}:get(u,"target")/2,shape:c==="horizontal"?"line":"hyphen"}}});return point(x),c==="horizontal"&&e.coordinate().transpose(),__assign$1(__assign$1({},r),{ext:{data:{min:g,max:p}}})}function meta$a(r){var e,t,n=r.options,i=r.ext,a=n.xAxis,o=n.yAxis,s=n.targetField,l=n.rangeField,c=n.measureField,u=n.xField,f=i.data;return flow(scale$2((e={},e[u]=a,e[c]=o,e),(t={},t[c]={min:f==null?void 0:f.min,max:f==null?void 0:f.max,sync:!0},t[s]={sync:"".concat(c)},t[l]={sync:"".concat(c)},t)))(r)}function axis$c(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.measureField,s=t.rangeField,l=t.targetField;return e.axis("".concat(s),!1),e.axis("".concat(l),!1),n===!1?e.axis("".concat(a),!1):e.axis("".concat(a),n),i===!1?e.axis("".concat(o),!1):e.axis("".concat(o),i),r}function legend$8(r){var e=r.chart,t=r.options,n=t.legend;return e.removeInteraction("legend-filter"),e.legend(n),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),r}function label$7(r){var e=r.chart,t=r.options,n=t.label,i=t.measureField,a=t.targetField,o=t.rangeField,s=e.geometries,l=s[0],c=s[1],u=s[2];return get(n,"range")?l.label("".concat(o),__assign$1({layout:[{type:"limit-in-plot"}]},transformLabel(n.range))):l.label(!1),get(n,"measure")?c.label("".concat(i),__assign$1({layout:[{type:"limit-in-plot"}]},transformLabel(n.measure))):c.label(!1),get(n,"target")?u.label("".concat(a),__assign$1({layout:[{type:"limit-in-plot"}]},transformLabel(n.target))):u.label(!1),r}function adaptor$g(r){flow(geometry$d,meta$a,axis$c,legend$8,theme$2,label$7,tooltip$9,interaction$8,animation$5)(r)}var DEFAULT_OPTIONS$j=deepAssign({},Plot.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="bullet",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$j},e.prototype.changeData=function(t){this.updateOption({data:t});var n=transformData$5(this.options),i=n.min,a=n.max,o=n.ds;meta$a({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},e.prototype.getSchemaAdaptor=function(){return adaptor$g},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(Plot);var DEFAULT_OPTIONS$i={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(r){return r.id},source:function(r){return r.source},target:function(r){return r.target},sourceWeight:function(r){return r.value||1},targetWeight:function(r){return r.value||1},sortBy:null};function processGraph(r,e,t){each$1(r,function(n,i){n.inEdges=e.filter(function(a){return"".concat(t.target(a))==="".concat(i)}),n.outEdges=e.filter(function(a){return"".concat(t.source(a))==="".concat(i)}),n.edges=n.outEdges.concat(n.inEdges),n.frequency=n.edges.length,n.value=0,n.inEdges.forEach(function(a){n.value+=t.targetWeight(a)}),n.outEdges.forEach(function(a){n.value+=t.sourceWeight(a)})})}function sortNodes(r,e){var t={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return"".concat(e.id(i)).localeCompare("".concat(e.id(a)))}},n=t[e.sortBy];!n&&isFunction(e.sortBy)&&(n=e.sortBy),n&&r.sort(n)}function layoutNodes(r,e){var t=r.length;if(!t)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var n=e.nodePaddingRatio;if(n<0||n>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=n/(2*t),a=e.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;r.forEach(function(l){o+=l.value}),r.forEach(function(l){l.weight=l.value/o,l.width=l.weight*(1-n),l.height=a}),r.forEach(function(l,c){for(var u=0,f=c-1;f>=0;f--)u+=r[f].width+2*i;var d=l.minX=i+u,g=l.maxX=l.minX+l.width,p=l.minY=e.y-a/2,v=l.maxY=p+a;l.x=[d,g,g,d],l.y=[p,p,v,v]})}else{var s=1/t;r.forEach(function(l,c){l.x=(c+.5)*s,l.y=e.y})}return r}function locatingEdges(r,e,t){if(t.weight){var n={};each$1(r,function(i,a){n[a]=i.value}),e.forEach(function(i){var a=t.source(i),o=t.target(i),s=r[a],l=r[o];if(s&&l){var c=n[a],u=t.sourceWeight(i),f=s.minX+(s.value-c)/s.value*s.width,d=f+u/s.value*s.width;n[a]-=u;var g=n[o],p=t.targetWeight(i),v=l.minX+(l.value-g)/l.value*l.width,y=v+p/l.value*l.width;n[o]-=p;var m=t.y;i.x=[f,d,v,y],i.y=[m,m,m,m],i.source=s,i.target=l}})}else e.forEach(function(i){var a=r[t.source(i)],o=r[t.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return e}function getDefaultOptions$1(r){return mix({},DEFAULT_OPTIONS$i,r)}function chordLayout(r,e){var t=getDefaultOptions$1(r),n={},i=e.nodes,a=e.links;i.forEach(function(l){var c=t.id(l);n[c]=l}),processGraph(n,a,t),sortNodes(i,t);var o=layoutNodes(i,t),s=locatingEdges(n,a,t);return{nodes:o,links:s}}var X_FIELD$2="x",Y_FIELD$2="y",NODE_COLOR_FIELD="name",EDGE_COLOR_FIELD="source",DEFAULT_OPTIONS$h={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(r,e){var t=(r[0]+r[1])/2,n=t>.5?-4:4;return{offsetX:n,content:e}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(r){return!get(r,[0,"data","isNode"])},formatter:function(r){var e=r.source,t=r.target,n=r.value;return{name:"".concat(e," -> ").concat(t),value:n}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function transformData$4(r){var e=r.options,t=e.data,n=e.sourceField,i=e.targetField,a=e.weightField,o=e.nodePaddingRatio,s=e.nodeWidthRatio,l=e.rawFields,c=l===void 0?[]:l,u=transformDataToNodeLinkData(t,n,i,a),f=chordLayout({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},u),d=f.nodes,g=f.links,p=d.map(function(y){return __assign$1(__assign$1({},pick(y,__spreadArray$1(["id","x","y","name"],c,!0))),{isNode:!0})}),v=g.map(function(y){return __assign$1(__assign$1({source:y.source.name,target:y.target.name,name:y.source.name||y.target.name},pick(y,__spreadArray$1(["x","y","value"],c,!0))),{isNode:!1})});return __assign$1(__assign$1({},r),{ext:__assign$1(__assign$1({},r.ext),{chordData:{nodesData:p,edgesData:v}})})}function scale$1(r){var e,t=r.chart;return t.scale((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},e[NODE_COLOR_FIELD]={sync:"color"},e[EDGE_COLOR_FIELD]={sync:"color"},e)),r}function axis$b(r){var e=r.chart;return e.axis(!1),r}function legend$7(r){var e=r.chart;return e.legend(!1),r}function tooltip$4(r){var e=r.chart,t=r.options,n=t.tooltip;return e.tooltip(n),r}function coordinate$4(r){var e=r.chart;return e.coordinate("polar").reflect("y"),r}function nodeGeometry(r){var e=r.chart,t=r.options,n=r.ext.chordData.nodesData,i=t.nodeStyle,a=t.label,o=t.tooltip,s=e.createView();return s.data(n),polygon({chart:s,options:{xField:X_FIELD$2,yField:Y_FIELD$2,seriesField:NODE_COLOR_FIELD,polygon:{style:i},label:a,tooltip:o}}),r}function edgeGeometry(r){var e=r.chart,t=r.options,n=r.ext.chordData.edgesData,i=t.edgeStyle,a=t.tooltip,o=e.createView();o.data(n);var s={xField:X_FIELD$2,yField:Y_FIELD$2,seriesField:EDGE_COLOR_FIELD,edge:{style:i,shape:"arc"},tooltip:a};return edge({chart:o,options:s}),r}function animation$3(r){var e=r.chart,t=r.options,n=t.animation;return addViewAnimation(e,n,getAllGeometriesRecursively(e)),r}function adaptor$f(r){return flow(theme$2,transformData$4,coordinate$4,scale$1,axis$b,legend$7,tooltip$4,edgeGeometry,nodeGeometry,interaction$8,state,animation$3)(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="chord",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$h},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$f},e})(Plot);var RAW_FIELDS$1=["x","y","r","name","value","path","depth"],DEFAULT_OPTIONS$g={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},PADDING=4,PADDING_LEFT=0,PADDING_TOP=5,BREAD_CRUMB_NAME="drilldown-bread-crumb",DEFAULT_BREAD_CRUMB_CONFIG={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},HIERARCHY_DATA_TRANSFORM_PARAMS="hierarchy-data-transform-params",DrillDownAction=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=DEFAULT_BREAD_CRUMB_CONFIG,t}return e.prototype.click=function(){var t=get(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),n=this.breadCrumbGroup,i=n.getBBox(),a=this.getButtonCfg().position,o={x:t.start.x,y:t.end.y-(i.height+PADDING_TOP*2)};t.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:t.start.x,y:t.start.y});var s=Util.transform(null,[["t",o.x+PADDING_LEFT,o.y+i.height+PADDING_TOP]]);n.setMatrix(s)}},e.prototype.back=function(){size(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},e.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(t){var n=this.context.view,i=get(n,["interactions","drill-down","cfg","transformData"],function(c){return c}),a=i(__assign$1({data:t.data},t[HIERARCHY_DATA_TRANSFORM_PARAMS]));n.changeData(a);for(var o=[],s=t;s;){var l=s.data;o.unshift({id:"".concat(l.name,"_").concat(s.height,"_").concat(s.depth),name:l.name,children:i(__assign$1({data:l},t[HIERARCHY_DATA_TRANSFORM_PARAMS]))}),s=s.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},e.prototype.backTo=function(t){if(!(!t||t.length<=0)){var n=this.context.view,i=last(t).children;n.changeData(i),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var t=this.context.view,n=get(t,["interactions","drill-down","cfg","drillDownConfig"]);return deepAssign(this.breadCrumbCfg,n==null?void 0:n.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var t=this,n=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:BREAD_CRUMB_NAME});var a=0;i.forEach(function(o,s){var l=t.breadCrumbGroup.addShape({type:"text",id:o.id,name:"".concat(BREAD_CRUMB_NAME,"_").concat(o.name,"_text"),attrs:__assign$1(__assign$1({text:s===0&&!isNil(n.rootText)?n.rootText:o.name},n.textStyle),{x:a,y:0})}),c=l.getBBox();if(a+=c.width+PADDING,l.on("click",function(d){var g,p=d.target.get("id");if(p!==((g=last(i))===null||g===void 0?void 0:g.id)){var v=i.slice(0,i.findIndex(function(y){return y.id===p})+1);t.backTo(v)}}),l.on("mouseenter",function(d){var g,p=d.target.get("id");p!==((g=last(i))===null||g===void 0?void 0:g.id)?l.attr(n.activeTextStyle):l.attr({cursor:"default"})}),l.on("mouseleave",function(){l.attr(n.textStyle)}),s<i.length-1){var u=t.breadCrumbGroup.addShape({type:"text",name:"".concat(n.name,"_").concat(o.name,"_divider"),attrs:__assign$1(__assign$1({text:n.dividerText},n.textStyle),{x:a,y:0})}),f=u.getBBox();a+=f.width+PADDING}})},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),r.prototype.destroy.call(this)},e}(Action);function defaultSeparation$1(r,e){return r.parent===e.parent?1:2}function meanX(r){return r.reduce(meanXReduce,0)/r.length}function meanXReduce(r,e){return r+e.x}function maxY(r){return 1+r.reduce(maxYReduce,0)}function maxYReduce(r,e){return Math.max(r,e.y)}function leafLeft(r){for(var e;e=r.children;)r=e[0];return r}function leafRight(r){for(var e;e=r.children;)r=e[e.length-1];return r}function cluster(){var r=defaultSeparation$1,e=1,t=1,n=!1;function i(a){var o,s=0;a.eachAfter(function(d){var g=d.children;g?(d.x=meanX(g),d.y=maxY(g)):(d.x=o?s+=r(d,o):0,d.y=0,o=d)});var l=leafLeft(a),c=leafRight(a),u=l.x-r(l,c)/2,f=c.x+r(c,l)/2;return a.eachAfter(n?function(d){d.x=(d.x-a.x)*e,d.y=(a.y-d.y)*t}:function(d){d.x=(d.x-u)/(f-u)*e,d.y=(1-(a.y?d.y/a.y:1))*t})}return i.separation=function(a){return arguments.length?(r=a,i):r},i.size=function(a){return arguments.length?(n=!1,e=+a[0],t=+a[1],i):n?null:[e,t]},i.nodeSize=function(a){return arguments.length?(n=!0,e=+a[0],t=+a[1],i):n?[e,t]:null},i}function count(r){var e=0,t=r.children,n=t&&t.length;if(!n)e=1;else for(;--n>=0;)e+=t[n].value;r.value=e}function node_count(){return this.eachAfter(count)}function node_each(r,e){let t=-1;for(const n of this)r.call(e,n,++t,this);return this}function node_eachBefore(r,e){for(var t=this,n=[t],i,a,o=-1;t=n.pop();)if(r.call(e,t,++o,this),i=t.children)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}function node_eachAfter(r,e){for(var t=this,n=[t],i=[],a,o,s,l=-1;t=n.pop();)if(i.push(t),a=t.children)for(o=0,s=a.length;o<s;++o)n.push(a[o]);for(;t=i.pop();)r.call(e,t,++l,this);return this}function node_find(r,e){let t=-1;for(const n of this)if(r.call(e,n,++t,this))return n}function node_sum(r){return this.eachAfter(function(e){for(var t=+r(e.data)||0,n=e.children,i=n&&n.length;--i>=0;)t+=n[i].value;e.value=t})}function node_sort(r){return this.eachBefore(function(e){e.children&&e.children.sort(r)})}function node_path(r){for(var e=this,t=leastCommonAncestor(e,r),n=[e];e!==t;)e=e.parent,n.push(e);for(var i=n.length;r!==t;)n.splice(i,0,r),r=r.parent;return n}function leastCommonAncestor(r,e){if(r===e)return r;var t=r.ancestors(),n=e.ancestors(),i=null;for(r=t.pop(),e=n.pop();r===e;)i=r,r=t.pop(),e=n.pop();return i}function node_ancestors(){for(var r=this,e=[r];r=r.parent;)e.push(r);return e}function node_descendants(){return Array.from(this)}function node_leaves(){var r=[];return this.eachBefore(function(e){e.children||r.push(e)}),r}function node_links(){var r=this,e=[];return r.each(function(t){t!==r&&e.push({source:t.parent,target:t})}),e}function*node_iterator(){var r=this,e,t=[r],n,i,a;do for(e=t.reverse(),t=[];r=e.pop();)if(yield r,n=r.children)for(i=0,a=n.length;i<a;++i)t.push(n[i]);while(t.length)}function hierarchy(r,e){r instanceof Map?(r=[void 0,r],e===void 0&&(e=mapChildren)):e===void 0&&(e=objectChildren);for(var t=new Node$1(r),n,i=[t],a,o,s,l;n=i.pop();)if((o=e(n.data))&&(l=(o=Array.from(o)).length))for(n.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new Node$1(o[s])),a.parent=n,a.depth=n.depth+1;return t.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(r){return r.children}function mapChildren(r){return Array.isArray(r)?r[1]:null}function copyData(r){r.data.value!==void 0&&(r.value=r.data.value),r.data=r.data.data}function computeHeight(r){var e=0;do r.height=e;while((r=r.parent)&&r.height<++e)}function Node$1(r){this.data=r,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function array(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function shuffle(r){for(var e=r.length,t,n;e;)n=Math.random()*e--|0,t=r[e],r[e]=r[n],r[n]=t;return r}function enclose(r){for(var e=0,t=(r=shuffle(Array.from(r))).length,n=[],i,a;e<t;)i=r[e],a&&enclosesWeak(a,i)?++e:(a=encloseBasis(n=extendBasis(n,i)),e=0);return a}function extendBasis(r,e){var t,n;if(enclosesWeakAll(e,r))return[e];for(t=0;t<r.length;++t)if(enclosesNot(e,r[t])&&enclosesWeakAll(encloseBasis2(r[t],e),r))return[r[t],e];for(t=0;t<r.length-1;++t)for(n=t+1;n<r.length;++n)if(enclosesNot(encloseBasis2(r[t],r[n]),e)&&enclosesNot(encloseBasis2(r[t],e),r[n])&&enclosesNot(encloseBasis2(r[n],e),r[t])&&enclosesWeakAll(encloseBasis3(r[t],r[n],e),r))return[r[t],r[n],e];throw new Error}function enclosesNot(r,e){var t=r.r-e.r,n=e.x-r.x,i=e.y-r.y;return t<0||t*t<n*n+i*i}function enclosesWeak(r,e){var t=r.r-e.r+Math.max(r.r,e.r,1)*1e-9,n=e.x-r.x,i=e.y-r.y;return t>0&&t*t>n*n+i*i}function enclosesWeakAll(r,e){for(var t=0;t<e.length;++t)if(!enclosesWeak(r,e[t]))return!1;return!0}function encloseBasis(r){switch(r.length){case 1:return encloseBasis1(r[0]);case 2:return encloseBasis2(r[0],r[1]);case 3:return encloseBasis3(r[0],r[1],r[2])}}function encloseBasis1(r){return{x:r.x,y:r.y,r:r.r}}function encloseBasis2(r,e){var t=r.x,n=r.y,i=r.r,a=e.x,o=e.y,s=e.r,l=a-t,c=o-n,u=s-i,f=Math.sqrt(l*l+c*c);return{x:(t+a+l/f*u)/2,y:(n+o+c/f*u)/2,r:(f+i+s)/2}}function encloseBasis3(r,e,t){var n=r.x,i=r.y,a=r.r,o=e.x,s=e.y,l=e.r,c=t.x,u=t.y,f=t.r,d=n-o,g=n-c,p=i-s,v=i-u,y=l-a,m=f-a,x=n*n+i*i-a*a,_=x-o*o-s*s+l*l,S=x-c*c-u*u+f*f,A=g*p-d*v,b=(p*S-v*_)/(A*2)-n,C=(v*y-p*m)/A,E=(g*_-d*S)/(A*2)-i,T=(d*m-g*y)/A,I=C*C+T*T-1,w=2*(a+b*C+E*T),M=b*b+E*E-a*a,$=-(I?(w+Math.sqrt(w*w-4*I*M))/(2*I):M/w);return{x:n+b+C*$,y:i+E+T*$,r:$}}function place(r,e,t){var n=r.x-e.x,i,a,o=r.y-e.y,s,l,c=n*n+o*o;c?(a=e.r+t.r,a*=a,l=r.r+t.r,l*=l,a>l?(i=(c+l-a)/(2*c),s=Math.sqrt(Math.max(0,l/c-i*i)),t.x=r.x-i*n-s*o,t.y=r.y-i*o+s*n):(i=(c+a-l)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),t.x=e.x+i*n-s*o,t.y=e.y+i*o+s*n)):(t.x=e.x+t.r,t.y=e.y)}function intersects(r,e){var t=r.r+e.r-1e-6,n=e.x-r.x,i=e.y-r.y;return t>0&&t*t>n*n+i*i}function score(r){var e=r._,t=r.next._,n=e.r+t.r,i=(e.x*t.r+t.x*e.r)/n,a=(e.y*t.r+t.y*e.r)/n;return i*i+a*a}function Node(r){this._=r,this.next=null,this.previous=null}function packEnclose(r){if(!(i=(r=array(r)).length))return 0;var e,t,n,i,a,o,s,l,c,u,f;if(e=r[0],e.x=0,e.y=0,!(i>1))return e.r;if(t=r[1],e.x=-t.r,t.x=e.r,t.y=0,!(i>2))return e.r+t.r;place(t,e,n=r[2]),e=new Node(e),t=new Node(t),n=new Node(n),e.next=n.previous=t,t.next=e.previous=n,n.next=t.previous=e;t:for(s=3;s<i;++s){place(e._,t._,n=r[s]),n=new Node(n),l=t.next,c=e.previous,u=t._.r,f=e._.r;do if(u<=f){if(intersects(l._,n._)){t=l,e.next=t,t.previous=e,--s;continue t}u+=l._.r,l=l.next}else{if(intersects(c._,n._)){e=c,e.next=t,t.previous=e,--s;continue t}f+=c._.r,c=c.previous}while(l!==c.next);for(n.previous=e,n.next=t,e.next=t.previous=t=n,a=score(e);(n=n.next)!==t;)(o=score(n))<a&&(e=n,a=o);t=e.next}for(e=[t._],n=t;(n=n.next)!==t;)e.push(n._);for(n=enclose(e),s=0;s<i;++s)e=r[s],e.x-=n.x,e.y-=n.y;return n.r}function siblings(r){return packEnclose(r),r}function optional(r){return r==null?null:required(r)}function required(r){if(typeof r!="function")throw new Error;return r}function constantZero(){return 0}function constant$1(r){return function(){return r}}function defaultRadius(r){return Math.sqrt(r.value)}function index$1(){var r=null,e=1,t=1,n=constantZero;function i(a){return a.x=e/2,a.y=t/2,r?a.eachBefore(radiusLeaf(r)).eachAfter(packChildren(n,.5)).eachBefore(translateChild(1)):a.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(n,a.r/Math.min(e,t))).eachBefore(translateChild(Math.min(e,t)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(r=optional(a),i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=typeof a=="function"?a:constant$1(+a),i):n},i}function radiusLeaf(r){return function(e){e.children||(e.r=Math.max(0,+r(e)||0))}}function packChildren(r,e){return function(t){if(n=t.children){var n,i,a=n.length,o=r(t)*e||0,s;if(o)for(i=0;i<a;++i)n[i].r+=o;if(s=packEnclose(n),o)for(i=0;i<a;++i)n[i].r-=o;t.r=s+o}}}function translateChild(r){return function(e){var t=e.parent;e.r*=r,t&&(e.x=t.x+r*e.x,e.y=t.y+r*e.y)}}function roundNode(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function treemapDice(r,e,t,n,i){for(var a=r.children,o,s=-1,l=a.length,c=r.value&&(n-e)/r.value;++s<l;)o=a[s],o.y0=t,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function partition$1(){var r=1,e=1,t=0,n=!1;function i(o){var s=o.height+1;return o.x0=o.y0=t,o.x1=r,o.y1=e/s,o.eachBefore(a(e,s)),n&&o.eachBefore(roundNode),o}function a(o,s){return function(l){l.children&&treemapDice(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var c=l.x0,u=l.y0,f=l.x1-t,d=l.y1-t;f<c&&(c=f=(c+f)/2),d<u&&(u=d=(u+d)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=d}}return i.round=function(o){return arguments.length?(n=!!o,i):n},i.size=function(o){return arguments.length?(r=+o[0],e=+o[1],i):[r,e]},i.padding=function(o){return arguments.length?(t=+o,i):t},i}var preroot={depth:-1},ambiguous={};function defaultId$1(r){return r.id}function defaultParentId(r){return r.parentId}function stratify(){var r=defaultId$1,e=defaultParentId;function t(n){var i=Array.from(n),a=i.length,o,s,l,c,u,f,d,g=new Map;for(s=0;s<a;++s)o=i[s],u=i[s]=new Node$1(o),(f=r(o,s,n))!=null&&(f+="")&&(d=u.id=f,g.set(d,g.has(d)?ambiguous:u)),(f=e(o,s,n))!=null&&(f+="")&&(u.parent=f);for(s=0;s<a;++s)if(u=i[s],f=u.parent){if(c=g.get(f),!c)throw new Error("missing: "+f);if(c===ambiguous)throw new Error("ambiguous: "+f);c.children?c.children.push(u):c.children=[u],u.parent=c}else{if(l)throw new Error("multiple roots");l=u}if(!l)throw new Error("no root");if(l.parent=preroot,l.eachBefore(function(p){p.depth=p.parent.depth+1,--a}).eachBefore(computeHeight),l.parent=null,a>0)throw new Error("cycle");return l}return t.id=function(n){return arguments.length?(r=required(n),t):r},t.parentId=function(n){return arguments.length?(e=required(n),t):e},t}function defaultSeparation(r,e){return r.parent===e.parent?1:2}function nextLeft(r){var e=r.children;return e?e[0]:r.t}function nextRight(r){var e=r.children;return e?e[e.length-1]:r.t}function moveSubtree(r,e,t){var n=t/(e.i-r.i);e.c-=n,e.s+=t,r.c+=n,e.z+=t,e.m+=t}function executeShifts(r){for(var e=0,t=0,n=r.children,i=n.length,a;--i>=0;)a=n[i],a.z+=e,a.m+=e,e+=a.s+(t+=a.c)}function nextAncestor(r,e,t){return r.a.parent===e.parent?r.a:t}function TreeNode(r,e){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(r){for(var e=new TreeNode(r,0),t,n=[e],i,a,o,s;t=n.pop();)if(a=t._.children)for(t.children=new Array(s=a.length),o=s-1;o>=0;--o)n.push(i=t.children[o]=new TreeNode(a[o],o)),i.parent=t;return(e.parent=new TreeNode(null,0)).children=[e],e}function tree(){var r=defaultSeparation,e=1,t=1,n=null;function i(c){var u=treeRoot(c);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),n)c.eachBefore(l);else{var f=c,d=c,g=c;c.eachBefore(function(x){x.x<f.x&&(f=x),x.x>d.x&&(d=x),x.depth>g.depth&&(g=x)});var p=f===d?1:r(f,d)/2,v=p-f.x,y=e/(d.x+p+v),m=t/(g.depth||1);c.eachBefore(function(x){x.x=(x.x+v)*y,x.y=x.depth*m})}return c}function a(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){executeShifts(c);var g=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+r(c._,d._),c.m=c.z-g):c.z=g}else d&&(c.z=d.z+r(c._,d._));c.parent.A=s(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c,u,f){if(u){for(var d=c,g=c,p=u,v=d.parent.children[0],y=d.m,m=g.m,x=p.m,_=v.m,S;p=nextRight(p),d=nextLeft(d),p&&d;)v=nextLeft(v),g=nextRight(g),g.a=c,S=p.z+x-d.z-y+r(p._,d._),S>0&&(moveSubtree(nextAncestor(p,c,f),c,S),y+=S,m+=S),x+=p.m,y+=d.m,_+=v.m,m+=g.m;p&&!nextRight(g)&&(g.t=p,g.m+=x-m),d&&!nextLeft(v)&&(v.t=d,v.m+=y-_,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*t}return i.separation=function(c){return arguments.length?(r=c,i):r},i.size=function(c){return arguments.length?(n=!1,e=+c[0],t=+c[1],i):n?null:[e,t]},i.nodeSize=function(c){return arguments.length?(n=!0,e=+c[0],t=+c[1],i):n?[e,t]:null},i}function treemapSlice(r,e,t,n,i){for(var a=r.children,o,s=-1,l=a.length,c=r.value&&(i-t)/r.value;++s<l;)o=a[s],o.x0=e,o.x1=n,o.y0=t,o.y1=t+=o.value*c}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(r,e,t,n,i,a){for(var o=[],s=e.children,l,c,u=0,f=0,d=s.length,g,p,v=e.value,y,m,x,_,S,A,b;u<d;){g=i-t,p=a-n;do y=s[f++].value;while(!y&&f<d);for(m=x=y,A=Math.max(p/g,g/p)/(v*r),b=y*y*A,S=Math.max(x/b,b/m);f<d;++f){if(y+=c=s[f].value,c<m&&(m=c),c>x&&(x=c),b=y*y*A,_=Math.max(x/b,b/m),_>S){y-=c;break}S=_}o.push(l={value:y,dice:g<p,children:s.slice(u,f)}),l.dice?treemapDice(l,t,n,i,v?n+=p*y/v:a):treemapSlice(l,t,n,v?t+=g*y/v:i,a),v-=y,u=f}return o}const squarify=function r(e){function t(n,i,a,o,s){squarifyRatio(e,n,i,a,o,s)}return t.ratio=function(n){return r((n=+n)>1?n:1)},t}(phi);function index(){var r=squarify,e=!1,t=1,n=1,i=[0],a=constantZero,o=constantZero,s=constantZero,l=constantZero,c=constantZero;function u(d){return d.x0=d.y0=0,d.x1=t,d.y1=n,d.eachBefore(f),i=[0],e&&d.eachBefore(roundNode),d}function f(d){var g=i[d.depth],p=d.x0+g,v=d.y0+g,y=d.x1-g,m=d.y1-g;y<p&&(p=y=(p+y)/2),m<v&&(v=m=(v+m)/2),d.x0=p,d.y0=v,d.x1=y,d.y1=m,d.children&&(g=i[d.depth+1]=a(d)/2,p+=c(d)-g,v+=o(d)-g,y-=s(d)-g,m-=l(d)-g,y<p&&(p=y=(p+y)/2),m<v&&(v=m=(v+m)/2),r(d,p,v,y,m))}return u.round=function(d){return arguments.length?(e=!!d,u):e},u.size=function(d){return arguments.length?(t=+d[0],n=+d[1],u):[t,n]},u.tile=function(d){return arguments.length?(r=required(d),u):r},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:constant$1(+d),u):a},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:constant$1(+d),u):o},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:constant$1(+d),u):s},u.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:constant$1(+d),u):l},u.paddingLeft=function(d){return arguments.length?(c=typeof d=="function"?d:constant$1(+d),u):c},u}function binary(r,e,t,n,i){var a=r.children,o,s=a.length,l,c=new Array(s+1);for(c[0]=l=o=0;o<s;++o)c[o+1]=l+=a[o].value;u(0,s,r.value,e,t,n,i);function u(f,d,g,p,v,y,m){if(f>=d-1){var x=a[f];x.x0=p,x.y0=v,x.x1=y,x.y1=m;return}for(var _=c[f],S=g/2+_,A=f+1,b=d-1;A<b;){var C=A+b>>>1;c[C]<S?A=C+1:b=C}S-c[A-1]<c[A]-S&&f+1<A&&--A;var E=c[A]-_,T=g-E;if(y-p>m-v){var I=g?(p*T+y*E)/g:y;u(f,A,E,p,v,I,m),u(A,d,T,I,v,y,m)}else{var w=g?(v*T+m*E)/g:m;u(f,A,E,p,v,y,w),u(A,d,T,p,w,y,m)}}}function sliceDice(r,e,t,n,i){(r.depth&1?treemapSlice:treemapDice)(r,e,t,n,i)}const resquarify=function r(e){function t(n,i,a,o,s){if((l=n._squarify)&&l.ratio===e)for(var l,c,u,f,d=-1,g,p=l.length,v=n.value;++d<p;){for(c=l[d],u=c.children,f=c.value=0,g=u.length;f<g;++f)c.value+=u[f].value;c.dice?treemapDice(c,i,a,o,v?a+=(s-a)*c.value/v:s):treemapSlice(c,i,a,v?i+=(o-i)*c.value/v:o,s),v-=c.value}else n._squarify=l=squarifyRatio(e,n,i,a,o,s),l.ratio=e}return t.ratio=function(n){return r((n=+n)>1?n:1)},t}(phi),d3Hierarchy=Object.freeze(Object.defineProperty({__proto__:null,cluster,hierarchy,pack:index$1,packEnclose:enclose,packSiblings:siblings,partition:partition$1,stratify,tree,treemap:index,treemapBinary:binary,treemapDice,treemapResquarify:resquarify,treemapSlice,treemapSliceDice:sliceDice,treemapSquarify:squarify},Symbol.toStringTag,{value:"Module"}));var NODE_INDEX_FIELD="nodeIndex",CHILD_NODE_COUNT="childNodeCount",NODE_ANCESTORS_FIELD="nodeAncestor",INVALID_FIELD_ERR_MSG="Invalid field: it must be a string!";function getField(r,e){var t=r.field,n=r.fields;if(isString(t))return t;if(isArray$3(t))return console.warn(INVALID_FIELD_ERR_MSG),t[0];if(console.warn("".concat(INVALID_FIELD_ERR_MSG," will try to get fields instead.")),isString(n))return n;if(isArray$3(n)&&n.length)return n[0];if(e)return e;throw new TypeError(INVALID_FIELD_ERR_MSG)}function getAllNodes(r){var e=[];if(r&&r.each){var t,n;r.each(function(i){var a,o;i.parent!==t?(t=i.parent,n=0):n+=1;var s=filter((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(function(l){return e.find(function(c){return c.name===l.name})||l}),function(l){var c=l.depth;return c>0&&c<i.depth});i[NODE_ANCESTORS_FIELD]=s,i[CHILD_NODE_COUNT]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[NODE_INDEX_FIELD]=n,e.push(i)})}else r&&r.eachNode&&r.eachNode(function(i){e.push(i)});return e}var DEFAULT_OPTIONS$f={field:"value",as:["x","y","r"],sort:function(r,e){return e.value-r.value}};function pack(r,e){e=mix({},DEFAULT_OPTIONS$f,e);var t=e.as;if(!isArray$3(t)||t.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var n;try{n=getField(e)}catch(c){console.warn(c)}var i=function(c){return index$1().size(e.size).padding(e.padding)(hierarchy(c).sum(function(u){return u[n]}).sort(e.sort))},a=i(r),o=t[0],s=t[1],l=t[2];return a.each(function(c){c[o]=c.x,c[s]=c.y,c[l]=c.r}),getAllNodes(a)}function transformData$3(r){var e=r.data,t=r.hierarchyConfig,n=r.rawFields,i=n===void 0?[]:n,a=r.enableDrillDown,o=pack(e,__assign$1(__assign$1({},t),{field:"value",as:["x","y","r"]})),s=[];return o.forEach(function(l){for(var c,u=l.data.name,f=__assign$1({},l);f.depth>1;)u="".concat((c=f.parent.data)===null||c===void 0?void 0:c.name," / ").concat(u),f=f.parent;if(a&&l.depth>2)return null;var d=deepAssign({},l.data,__assign$1(__assign$1(__assign$1({},pick(l.data,i)),{path:u}),l));d.ext=t,d[HIERARCHY_DATA_TRANSFORM_PARAMS]={hierarchyConfig:t,rawFields:i,enableDrillDown:a},s.push(d)}),s}function resolvePaddingForCircle(r,e,t){var n=resolveAllPadding([r,e]),i=n[0],a=n[1],o=n[2],s=n[3],l=t.width,c=t.height,u=l-(s+a),f=c-(i+o),d=Math.min(u,f),g=(u-d)/2,p=(f-d)/2,v=i+p,y=a+g,m=o+p,x=s+g,_=[v,y,m,x],S=d<0?0:d;return{finalPadding:_,finalSize:S}}function defaultOptions$3(r){var e=r.chart,t=Math.min(e.viewBBox.width,e.viewBBox.height);return deepAssign({options:{size:function(n){var i=n.r;return i*t}}},r)}function padding$1(r){var e=r.options,t=r.chart,n=t.viewBBox,i=e.padding,a=e.appendPadding,o=e.drilldown,s=a;if(o!=null&&o.enabled){var l=getAdjustAppendPadding(t.appendPadding,get(o,["breadCrumb","position"]));s=resolveAllPadding([l,a])}var c=resolvePaddingForCircle(i,s,n).finalPadding;return t.padding=c,t.appendPadding=0,r}function geometry$c(r){var e=r.chart,t=r.options,n=e.padding,i=e.appendPadding,a=t.color,o=t.colorField,s=t.pointStyle,l=t.hierarchyConfig,c=t.sizeField,u=t.rawFields,f=u===void 0?[]:u,d=t.drilldown,g=transformData$3({data:t.data,hierarchyConfig:l,enableDrillDown:d==null?void 0:d.enabled,rawFields:f});e.data(g);var p=e.viewBBox,v=resolvePaddingForCircle(n,i,p).finalSize,y=function(m){var x=m.r;return x*v};return c&&(y=function(m){return m[c]*v}),point(deepAssign({},r,{options:{xField:"x",yField:"y",seriesField:o,sizeField:c,rawFields:__spreadArray$1(__spreadArray$1([],RAW_FIELDS$1,!0),f,!0),point:{color:a,style:s,shape:"circle",size:y}}})),r}function meta$9(r){return flow(scale$2({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(r)}function tooltip$3(r){var e=r.chart,t=r.options,n=t.tooltip;if(n===!1)e.tooltip(!1);else{var i=n;get(n,"fields")||(i=deepAssign({},{customItems:function(a){return a.map(function(o){var s=get(e.getOptions(),"scales"),l=get(s,["name","formatter"],function(u){return u}),c=get(s,["value","formatter"],function(u){return u});return __assign$1(__assign$1({},o),{name:l(o.data.name),value:c(o.data.value)})})}},i)),e.tooltip(i)}return r}function axis$a(r){var e=r.chart;return e.axis(!1),r}function adaptorInteraction$2(r){var e=r.drilldown,t=r.interactions,n=t===void 0?[]:t;return e!=null&&e.enabled?deepAssign({},r,{interactions:__spreadArray$1(__spreadArray$1([],n,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:transformData$3,enableDrillDown:!0}}],!1)}):r}function interaction$4(r){var e=r.chart,t=r.options;return interaction$8({chart:e,options:adaptorInteraction$2(t)}),r}function adaptor$e(r){return flow(pattern("pointStyle"),defaultOptions$3,padding$1,theme$2,meta$9,geometry$c,axis$a,legend$g,tooltip$3,interaction$4,animation$5,annotation$2())(r)}function isParentNode(r){var e=get(r,["event","data","data"],{});return isArray$3(e.children)&&e.children.length>0}function inCenter(r){var e=r.view.getCoordinate(),t=e.innerRadius;if(t){var n=r.event,i=n.x,a=n.y,o=e.center,s=o.x,l=o.y,c=e.getRadius()*t,u=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2));return u<c}return!1}registerAction("drill-down-action",DrillDownAction);registerInteraction("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:isParentNode},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:inCenter}],start:[{trigger:"element:click",isEnable:isParentNode,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:inCenter,action:["drill-down-action:back"]}]});(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="circle-packing",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$g},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$e},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(Plot);var LEFT_AXES_VIEW="left-axes-view",RIGHT_AXES_VIEW="right-axes-view",DEFAULT_YAXIS_CONFIG={nice:!0,label:{autoHide:!0,autoRotate:!1}},DEFAULT_LEFT_YAXIS_CONFIG=__assign$1(__assign$1({},DEFAULT_YAXIS_CONFIG),{position:"left"}),DEFAULT_RIGHT_YAXIS_CONFIG=__assign$1(__assign$1({},DEFAULT_YAXIS_CONFIG),{position:"right",grid:null}),AxisType;(function(r){r.Left="Left",r.Right="Right"})(AxisType||(AxisType={}));var DualAxesGeometry;(function(r){r.Line="line",r.Column="column"})(DualAxesGeometry||(DualAxesGeometry={}));function isLine(r){return get(r,"geometry")===DualAxesGeometry.Line}function isColumn(r){return get(r,"geometry")===DualAxesGeometry.Column}function getGeometryOption(r,e,t){return isColumn(t)?deepAssign({},{geometry:DualAxesGeometry.Column,label:t.label&&t.isRange?{content:function(n){var i;return(i=n[e])===null||i===void 0?void 0:i.join("-")}}:void 0},t):__assign$1({geometry:DualAxesGeometry.Line},t)}function transformObjectToArray(r,e){var t=r[0],n=r[1];if(isArray$3(e)){var i=e[0],a=e[1];return[i,a]}var o=get(e,t),s=get(e,n);return[o,s]}function getYAxisWithDefault(r,e){return e===AxisType.Left?r===!1?!1:deepAssign({},DEFAULT_LEFT_YAXIS_CONFIG,r):e===AxisType.Right?r===!1?!1:deepAssign({},DEFAULT_RIGHT_YAXIS_CONFIG,r):r}function drawSingleGeometry(r){var e=r.options,t=r.chart,n=e.geometryOption,i=n.isStack,a=n.color,o=n.seriesField,s=n.groupField,l=n.isGroup,c=["xField","yField"];if(isLine(n)){line(deepAssign({},r,{options:__assign$1(__assign$1(__assign$1({},pick(e,c)),n),{line:{color:n.color,style:n.lineStyle}})})),point(deepAssign({},r,{options:__assign$1(__assign$1(__assign$1({},pick(e,c)),n),{point:n.point&&__assign$1({color:a,shape:"circle"},n.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&u.push({type:"stack"}),u.length&&each$1(t.geometries,function(f){f.adjust(u)})}return isColumn(n)&&adaptor$w(deepAssign({},r,{options:__assign$1(__assign$1(__assign$1({},pick(e,c)),n),{widthRatio:n.columnWidthRatio,interval:__assign$1(__assign$1({},pick(n,["color"])),{style:n.columnStyle})})})),r}function getViewLegendItems(r){var e=r.view,t=r.geometryOption,n=r.yField,i=r.legend,a=get(i,"marker"),o=findGeometry(e,isLine(t)?"line":"interval");if(!t.seriesField){var s=get(e,"options.scales.".concat(n,".alias"))||n,l=o.getAttribute("color"),c=e.getTheme().defaultColor;l&&(c=Util.getMappingValue(l,s,get(l,["values",0],c)));var u=(isFunction(a)?a:!isEmpty(a)&&deepAssign({},{style:{stroke:c,fill:c}},a))||(isLine(t)?{symbol:function(d,g,p){return[["M",d-p,g],["L",d+p,g]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}});return[{value:n,name:s,marker:u,isGeometry:!0,viewId:e.id}]}var f=o.getGroupAttributes();return reduce(f,function(d,g){var p=Util.getLegendItems(e,o,g,e.getTheme(),a);return d.concat(p)},[])}var doSliderFilter=function(r,e){var t=e[0],n=e[1],i=r.getOptions().data,a=r.getXScale(),o=size(i);if(!(!a||!o)){var s=valuesOfKey(i,a.field),l=s,c=size(l),u=Math.floor(t*(c-1)),f=Math.floor(n*(c-1));r.filter(a.field,function(d){var g=l.indexOf(d);return g>-1?isBetween(g,u,f):!0}),r.getRootView().render(!0)}};function transformOptions(r){var e,t=r.options,n=t.geometryOptions,i=n===void 0?[]:n,a=t.xField,o=t.yField,s=every(i,function(l){var c=l.geometry;return c===DualAxesGeometry.Line||c===void 0});return deepAssign({},{options:{geometryOptions:[],meta:(e={},e[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},e),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},r,{options:{yAxis:transformObjectToArray(o,t.yAxis),geometryOptions:[getGeometryOption(a,o[0],i[0]),getGeometryOption(a,o[1],i[1])],annotations:transformObjectToArray(o,t.annotations)}})}function createViews(r){var e,t,n=r.chart,i=r.options,a=i.geometryOptions,o={line:0,column:1},s=[{type:(e=a[0])===null||e===void 0?void 0:e.geometry,id:LEFT_AXES_VIEW},{type:(t=a[1])===null||t===void 0?void 0:t.geometry,id:RIGHT_AXES_VIEW}];return s.sort(function(l,c){return-o[l.type]+o[c.type]}).forEach(function(l){return n.createView({id:l.id})}),r}function geometry$b(r){var e=r.chart,t=r.options,n=t.xField,i=t.yField,a=t.geometryOptions,o=t.data,s=t.tooltip,l=[__assign$1(__assign$1({},a[0]),{id:LEFT_AXES_VIEW,data:o[0],yField:i[0]}),__assign$1(__assign$1({},a[1]),{id:RIGHT_AXES_VIEW,data:o[1],yField:i[1]})];return l.forEach(function(c){var u=c.id,f=c.data,d=c.yField,g=isColumn(c)&&c.isPercent,p=g?percent(f,d,n,d):f,v=findViewById(e,u).data(p),y=g?__assign$1({formatter:function(m){return{name:m[c.seriesField]||d,value:(Number(m[d])*100).toFixed(2)+"%"}}},s):s;drawSingleGeometry({chart:v,options:{xField:n,yField:d,tooltip:y,geometryOption:c}})}),r}function color(r){var e,t=r.chart,n=r.options,i=n.geometryOptions,a=((e=t.getTheme())===null||e===void 0?void 0:e.colors10)||[],o=0;return t.once("beforepaint",function(){each$1(i,function(s,l){var c=findViewById(t,l===0?LEFT_AXES_VIEW:RIGHT_AXES_VIEW);if(!s.color){var u=c.getGroupScales(),f=get(u,[0,"values","length"],1),d=a.slice(o,o+f).concat(l===0?[]:a);c.geometries.forEach(function(g){s.seriesField?g.color(s.seriesField,d):g.color(d[0])}),o+=f}}),t.render(!0)}),r}function meta$8(r){var e,t,n=r.chart,i=r.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return scale$2((e={},e[s]=a,e[l[0]]=o[0],e))(deepAssign({},r,{chart:findViewById(n,LEFT_AXES_VIEW)})),scale$2((t={},t[s]=a,t[l[1]]=o[1],t))(deepAssign({},r,{chart:findViewById(n,RIGHT_AXES_VIEW)})),r}function axis$9(r){var e=r.chart,t=r.options,n=findViewById(e,LEFT_AXES_VIEW),i=findViewById(e,RIGHT_AXES_VIEW),a=t.xField,o=t.yField,s=t.xAxis,l=t.yAxis;return e.axis(a,!1),e.axis(o[0],!1),e.axis(o[1],!1),n.axis(a,s),n.axis(o[0],getYAxisWithDefault(l[0],AxisType.Left)),i.axis(a,!1),i.axis(o[1],getYAxisWithDefault(l[1],AxisType.Right)),r}function tooltip$2(r){var e=r.chart,t=r.options,n=t.tooltip,i=findViewById(e,LEFT_AXES_VIEW),a=findViewById(e,RIGHT_AXES_VIEW);return e.tooltip(n),i.tooltip({shared:!0}),a.tooltip({shared:!0}),r}function interaction$3(r){var e=r.chart;return interaction$8(deepAssign({},r,{chart:findViewById(e,LEFT_AXES_VIEW)})),interaction$8(deepAssign({},r,{chart:findViewById(e,RIGHT_AXES_VIEW)})),r}function annotation$1(r){var e=r.chart,t=r.options,n=t.annotations,i=get(n,[0]),a=get(n,[1]);return annotation$2(i)(deepAssign({},r,{chart:findViewById(e,LEFT_AXES_VIEW),options:{annotations:i}})),annotation$2(a)(deepAssign({},r,{chart:findViewById(e,RIGHT_AXES_VIEW),options:{annotations:a}})),r}function theme(r){var e=r.chart;return theme$2(deepAssign({},r,{chart:findViewById(e,LEFT_AXES_VIEW)})),theme$2(deepAssign({},r,{chart:findViewById(e,RIGHT_AXES_VIEW)})),theme$2(r),r}function animation$2(r){var e=r.chart;return animation$5(deepAssign({},r,{chart:findViewById(e,LEFT_AXES_VIEW)})),animation$5(deepAssign({},r,{chart:findViewById(e,RIGHT_AXES_VIEW)})),r}function limitInPlot(r){var e=r.chart,t=r.options,n=t.yAxis;return limitInPlot$2(deepAssign({},r,{chart:findViewById(e,LEFT_AXES_VIEW),options:{yAxis:n[0]}})),limitInPlot$2(deepAssign({},r,{chart:findViewById(e,RIGHT_AXES_VIEW),options:{yAxis:n[1]}})),r}function legend$6(r){var e=r.chart,t=r.options,n=t.legend,i=t.geometryOptions,a=t.yField,o=t.data,s=findViewById(e,LEFT_AXES_VIEW),l=findViewById(e,RIGHT_AXES_VIEW);if(n===!1)e.legend(!1);else if(isObject(n)&&n.custom===!0)e.legend(n);else{var c=get(i,[0,"legend"],n),u=get(i,[1,"legend"],n);e.once("beforepaint",function(){var f=o[0].length?getViewLegendItems({view:s,geometryOption:i[0],yField:a[0],legend:c}):[],d=o[1].length?getViewLegendItems({view:l,geometryOption:i[1],yField:a[1],legend:u}):[];e.legend(deepAssign({},n,{custom:!0,items:f.concat(d)}))}),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),e.on("legend-item:click",function(f){var d=get(f,"gEvent.delegateObject",{});if(d&&d.item){var g=d.item,p=g.value,v=g.isGeometry,y=g.viewId;if(v){var m=findIndex(a,function(S){return S===p});if(m>-1){var x=get(findViewById(e,y),"geometries");each$1(x,function(S){S.changeVisible(!d.item.unchecked)})}}else{var _=get(e.getController("legend"),"option.items",[]);each$1(e.views,function(S){var A=S.getGroupScales();each$1(A,function(b){b.values&&b.values.indexOf(p)>-1&&S.filter(b.field,function(C){var E=find$1(_,function(T){return T.value===C});return!E.unchecked})}),e.render(!0)})}}})}return r}function slider(r){var e=r.chart,t=r.options,n=t.slider,i=findViewById(e,LEFT_AXES_VIEW),a=findViewById(e,RIGHT_AXES_VIEW);return n&&(i.option("slider",n),i.on("slider:valuechanged",function(o){var s=o.event,l=s.value,c=s.originValue;isEqual$1(l,c)||doSliderFilter(a,l)}),e.once("afterpaint",function(){if(!isBoolean(n)){var o=n.start,s=n.end;(o||s)&&doSliderFilter(a,[o,s])}})),r}function adaptor$d(r){return flow(transformOptions,createViews,theme,geometry$b,meta$8,axis$9,limitInPlot,tooltip$2,interaction$3,annotation$1,animation$2,color,legend$6,slider)(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dual-axes",t}return e.prototype.getDefaultOptions=function(){return deepAssign({},r.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return adaptor$d},e})(Plot);function execViewAdaptor(r,e){var t=e.data,n=e.coordinate,i=e.interactions,a=e.annotations,o=e.animation,s=e.tooltip,l=e.axes,c=e.meta,u=e.geometries;t&&r.data(t);var f={};l&&each$1(l,function(d,g){f[g]=pick(d,AXIS_META_CONFIG_KEYS)}),f=deepAssign({},c,f),r.scale(f),n&&r.coordinate(n),l===!1?r.axis(!1):each$1(l,function(d,g){r.axis(g,d)}),each$1(u,function(d){var g=geometry$x({chart:r,options:d}).ext,p=d.adjust;p&&g.geometry.adjust(p)}),each$1(i,function(d){d.enable===!1?r.removeInteraction(d.type):r.interaction(d.type,d.cfg)}),each$1(a,function(d){r.annotation()[d.type](__assign$1({},d))}),addViewAnimation(r,o),s?(r.interaction("tooltip"),r.tooltip(s)):s===!1&&r.removeInteraction("tooltip")}function facetAdaptor(r){var e=r.chart,t=r.options,n=t.type,i=t.data,a=t.fields,o=t.eachView,s=omit$1(t,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(n,__assign$1(__assign$1({},s),{fields:a,eachView:function(l,c){var u=o(l,c);if(u.geometries)execViewAdaptor(l,u);else{var f=u,d=f.options;d.tooltip&&l.interaction("tooltip"),execPlotAdaptor(f.type,l,d)}}})),r}function component(r){var e=r.chart,t=r.options,n=t.axes,i=t.meta,a=t.tooltip,o=t.coordinate,s=t.theme,l=t.legend,c=t.interactions,u=t.annotations,f={};return n&&each$1(n,function(d,g){f[g]=pick(d,AXIS_META_CONFIG_KEYS)}),f=deepAssign({},i,f),e.scale(f),e.coordinate(o),n?each$1(n,function(d,g){e.axis(g,d)}):e.axis(!1),a?(e.interaction("tooltip"),e.tooltip(a)):a===!1&&e.removeInteraction("tooltip"),e.legend(l),s&&e.theme(s),each$1(c,function(d){d.enable===!1?e.removeInteraction(d.type):e.interaction(d.type,d.cfg)}),each$1(u,function(d){e.annotation()[d.type](__assign$1({},d))}),r}function adaptor$c(r){return flow(theme$2,facetAdaptor,component)(r)}var DEFAULT_OPTIONS$e={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="area",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$e},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$c},e})(Plot);function geometry$a(r){var e=r.chart,t=r.options,n=t.data,i=t.type,a=t.xField,o=t.yField,s=t.colorField,l=t.sizeField,c=t.sizeRatio,u=t.shape,f=t.color,d=t.tooltip,g=t.heatmapStyle,p=t.meta;e.data(n);var v="polygon";i==="density"&&(v="heatmap");var y=getTooltipMapping(d,[a,o,s]),m=y.fields,x=y.formatter,_=1;return(c||c===0)&&(!u&&!l?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):_=c),geometry$x(deepAssign({},r,{options:{type:v,colorField:s,tooltipFields:m,shapeField:l||"",label:void 0,mapping:{tooltip:x,shape:u&&(l?function(S){var A=n.map(function(T){return T[l]}),b=(p==null?void 0:p[l])||{},C=b.min,E=b.max;return C=isNumber$1(C)?C:Math.min.apply(Math,A),E=isNumber$1(E)?E:Math.max.apply(Math,A),[u,(get(S,l)-C)/(E-C),_]}:function(){return[u,1,_]}),color:f||s&&e.getTheme().sequenceColors.join("-"),style:g}}})),r}function meta$7(r){var e,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return flow(scale$2((e={},e[a]=n,e[o]=i,e)))(r)}function axis$8(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return n===!1?e.axis(a,!1):e.axis(a,n),i===!1?e.axis(o,!1):e.axis(o,i),r}function legend$5(r){var e=r.chart,t=r.options,n=t.legend,i=t.colorField,a=t.sizeField,o=t.sizeLegend,s=n!==!1;return i&&e.legend(i,s?n:!1),a&&e.legend(a,o===void 0?n:o),!s&&!o&&e.legend(!1),r}function label$6(r){var e=r.chart,t=r.options,n=t.label,i=t.colorField,a=t.type,o=findGeometry(e,a==="density"?"heatmap":"polygon");if(!n)o.label(!1);else if(i){var s=n.callback,l=__rest(n,["callback"]);o.label({fields:[i],callback:s,cfg:transformLabel(l)})}return r}function coordinate$3(r){var e,t,n=r.chart,i=r.options,a=i.coordinate,o=i.reflect,s=deepAssign({actions:[]},a??{type:"rect"});return o&&((t=(e=s.actions)===null||e===void 0?void 0:e.push)===null||t===void 0||t.call(e,["reflect",o])),n.coordinate(s),r}function adaptor$b(r){return flow(theme$2,pattern("heatmapStyle"),meta$7,coordinate$3,geometry$a,axis$8,legend$5,tooltip$9,label$6,annotation$2(),interaction$8,animation$5,state)(r)}var DEFAULT_OPTIONS$d=deepAssign({},Plot.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});registerShape("polygon","circle",{draw:function(r,e){var t,n,i=r.x,a=r.y,o=this.parsePoints(r.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l)/2,u=Number(r.shape[1]),f=Number(r.shape[2]),d=Math.sqrt(f),g=c*d*Math.sqrt(u),p=((t=r.style)===null||t===void 0?void 0:t.fill)||r.color||((n=r.defaultStyle)===null||n===void 0?void 0:n.fill),v=e.addShape("circle",{attrs:__assign$1(__assign$1(__assign$1({x:i,y:a,r:g},r.defaultStyle),r.style),{fill:p})});return v}});registerShape("polygon","square",{draw:function(r,e){var t,n,i=r.x,a=r.y,o=this.parsePoints(r.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l),u=Number(r.shape[1]),f=Number(r.shape[2]),d=Math.sqrt(f),g=c*d*Math.sqrt(u),p=((t=r.style)===null||t===void 0?void 0:t.fill)||r.color||((n=r.defaultStyle)===null||n===void 0?void 0:n.fill),v=e.addShape("rect",{attrs:__assign$1(__assign$1(__assign$1({x:i-g/2,y:a-g/2,width:g,height:g},r.defaultStyle),r.style),{fill:p})});return v}});(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="heatmap",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$d},e.prototype.getSchemaAdaptor=function(){return adaptor$b},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(Plot);var CAT_VALUE="liquid";function getLiquidData(r){return[{percent:r,type:CAT_VALUE}]}function geometry$9(r){var e=r.chart,t=r.options,n=t.percent,i=t.liquidStyle,a=t.radius,o=t.outline,s=t.wave,l=t.shape,c=t.shapeStyle,u=t.animation;e.scale({percent:{min:0,max:1}}),e.data(getLiquidData(n));var f=t.color||e.getTheme().defaultColor,d=deepAssign({},r,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:f,style:i,shape:"liquid-fill-gauge"}}}),g=interval(d).ext,p=g.geometry,v=e.getTheme().background,y={percent:n,radius:a,outline:o,wave:s,shape:l,shapeStyle:c,background:v,animation:u};return p.customInfo(y),e.legend(!1),e.axis(!1),e.tooltip(!1),r}function statistic(r,e){var t=r.chart,n=r.options,i=n.statistic,a=n.percent,o=n.meta;t.getController("annotation").clear(!0);var s=get(o,["percent","formatter"])||function(c){return"".concat((c*100).toFixed(2),"%")},l=i.content;return l&&(l=deepAssign({},l,{content:isNil(l.content)?s(a):l.content})),renderStatistic(t,{statistic:__assign$1(__assign$1({},i),{content:l}),plotType:"liquid"},{percent:a}),e&&t.render(!0),r}function adaptor$a(r){return flow(theme$2,pattern("liquidStyle"),geometry$9,statistic,scale$2({}),animation$5,interaction$8)(r)}var DEFAULT_OPTIONS$c={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},DURATION=5e3;function lerp(r,e,t){return r+(e-r)*t}function getFillAttrs$2(r){var e=__assign$1({opacity:1},r.style);return r.color&&!e.fill&&(e.fill=r.color),e}function getLineAttrs(r){var e={fill:"#fff",fillOpacity:0,lineWidth:4},t=mix({},e,r.style);return r.color&&!t.stroke&&(t.stroke=r.color),isNumber$1(r.opacity)&&(t.opacity=t.strokeOpacity=r.opacity),t}function getWaterWavePositions(r,e,t,n){return e===0?[[r+1/2*t/Math.PI/2,n/2],[r+1/2*t/Math.PI,n],[r+t/4,n]]:e===1?[[r+1/2*t/Math.PI/2*(Math.PI-2),n],[r+1/2*t/Math.PI/2*(Math.PI-1),n/2],[r+t/4,0]]:e===2?[[r+1/2*t/Math.PI/2,-n/2],[r+1/2*t/Math.PI,-n],[r+t/4,-n]]:[[r+1/2*t/Math.PI/2*(Math.PI-2),-n],[r+1/2*t/Math.PI/2*(Math.PI-1),-n/2],[r+t/4,0]]}function getWaterWavePath(r,e,t,n,i,a,o){for(var s=Math.ceil(2*r/t*4)*4,l=[],c=n;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*t;var u=a-r+c-r*2;l.push(["M",u,e]);for(var f=0,d=0;d<s;++d){var g=d%4,p=getWaterWavePositions(d*t/4,g,t,i);l.push(["C",p[0][0]+u,-p[0][1]+e,p[1][0]+u,-p[1][1]+e,p[2][0]+u,-p[2][1]+e]),d===s-1&&(f=p[2][0])}return l.push(["L",f+u,o+r]),l.push(["L",u,o+r]),l.push(["Z"]),l}function addWaterWave(r,e,t,n,i,a,o,s,l,c){for(var u=i.fill,f=i.opacity,d=o.getBBox(),g=d.maxX-d.minX,p=d.maxY-d.minY,v=0;v<n;v++){var y=n<=1?1:v/(n-1),m=a.addShape("path",{name:"waterwave-path",attrs:{path:getWaterWavePath(s,d.minY+p*t,l,0,g/32,r,e),fill:u,opacity:lerp(.2,.9,y)*f}});try{if(c===!1)return;var x=transform$2([["t",l,0]]);m.stopAnimate(),m.animate({matrix:x},{duration:lerp(.5*DURATION,DURATION,y),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function pin(r,e,t,n){var i=t*2/3,a=Math.max(i,n),o=i/2,s=r,l=o+e-a/2,c=Math.asin(o/((a-o)*.85)),u=Math.sin(c)*o,f=Math.cos(c)*o,d=s-f,g=l+u,p=r,v=l+o/Math.sin(c);return`
      M `.concat(d," ").concat(g,`
      A `).concat(o," ").concat(o," 0 1 1 ").concat(d+f*2," ").concat(g,`
      Q `).concat(p," ").concat(v," ").concat(r," ").concat(e+a/2,`
      Q `).concat(p," ").concat(v," ").concat(d," ").concat(g,`
      Z 
    `)}function circle(r,e,t,n){var i=t/2,a=n/2;return`
      M `.concat(r," ").concat(e-a,` 
      a `).concat(i," ").concat(a," 0 1 0 0 ").concat(a*2,`
      a `).concat(i," ").concat(a," 0 1 0 0 ").concat(-a*2,`
      Z
    `)}function diamond(r,e,t,n){var i=n/2,a=t/2;return`
      M `.concat(r," ").concat(e-i,`
      L `).concat(r+a," ").concat(e,`
      L `).concat(r," ").concat(e+i,`
      L `).concat(r-a," ").concat(e,`
      Z
    `)}function triangle(r,e,t,n){var i=n/2,a=t/2;return`
      M `.concat(r," ").concat(e-i,`
      L `).concat(r+a," ").concat(e+i,`
      L `).concat(r-a," ").concat(e+i,`
      Z
    `)}function rect(r,e,t,n){var i=.618,a=n/2,o=t/2*i;return`
      M `.concat(r-o," ").concat(e-a,`
      L `).concat(r+o," ").concat(e-a,`
      L `).concat(r+o," ").concat(e+a,`
      L `).concat(r-o," ").concat(e+a,`
      Z
    `)}var builtInShapeByName={pin,circle,diamond,triangle,rect};registerShape("interval","liquid-fill-gauge",{draw:function(r,e){var t=.5,n=.5,i=r.customInfo,a=i,o=a.percent,s=a.radius,l=a.shape,c=a.shapeStyle,u=a.background,f=a.animation,d=i.outline,g=i.wave,p=d.border,v=d.distance,y=g.count,m=g.length,x=reduce(r.points,function(P,R){return Math.min(P,R.x)},1/0),_=this.parsePoint({x:t,y:n}),S=this.parsePoint({x,y:n}),A=_.x-S.x,b=Math.min(A,S.y*s),C=getFillAttrs$2(r),E=getLineAttrs(mix({},r,d)),T=b-p/2,I=typeof l=="function"?l:builtInShapeByName[l]||builtInShapeByName.circle,w=I(_.x,_.y,T*2,T*2);if(c&&e.addShape("path",{name:"shape",attrs:__assign$1({path:w},c)}),o>0){var M=e.addGroup({name:"waves"}),$=M.setClip({type:"path",attrs:{path:w}});addWaterWave(_.x,_.y,1-r.points[1].y,y,C,M,$,b*2,m,f)}return e.addShape("path",{name:"distance",attrs:{path:w,fill:"transparent",lineWidth:p+v*2,stroke:u==="transparent"?"#fff":u}}),e.addShape("path",{name:"wrap",attrs:mix(E,{path:w,fill:"transparent",lineWidth:p})}),e}});var Liquid=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="liquid",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$c},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.chart.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(getLiquidData(t)),statistic({chart:this.chart,options:this.options},!0),this.chart.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,Event.fromData(this.chart,VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return adaptor$a},e}(Plot);function geometry$8(r){var e=r.chart,t=r.options,n=t.data,i=t.lineStyle,a=t.color,o=t.point,s=t.area;e.data(n);var l=deepAssign({},r,{options:{line:{style:i,color:a},point:o&&__assign$1({color:a},o),area:s&&__assign$1({color:a},s),label:void 0}}),c=deepAssign({},l,{options:{tooltip:!1}}),u=(o==null?void 0:o.state)||t.state,f=deepAssign({},l,{options:{tooltip:!1,state:u}});return line(l),point(f),area(c),r}function meta$6(r){var e,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return flow(scale$2((e={},e[a]=n,e[o]=i,e)))(r)}function coord(r){var e=r.chart,t=r.options,n=t.radius,i=t.startAngle,a=t.endAngle;return e.coordinate("polar",{radius:n,startAngle:i,endAngle:a}),r}function axis$7(r){var e=r.chart,t=r.options,n=t.xField,i=t.xAxis,a=t.yField,o=t.yAxis;return e.axis(n,i),e.axis(a,o),r}function label$5(r){var e=r.chart,t=r.options,n=t.label,i=t.yField,a=findGeometry(e,"line");if(!n)a.label(!1);else{var o=n.callback,s=__rest(n,["callback"]);a.label({fields:[i],callback:o,cfg:transformLabel(s)})}return r}function adaptor$9(r){return flow(geometry$8,meta$6,theme$2,coord,axis$7,legend$g,tooltip$9,label$5,interaction$8,animation$5,annotation$2())(r)}var RadarTooltipController=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(t){var n=this.getTooltipCfg(),i=n.shared,a=n.title,o=r.prototype.getTooltipItems.call(this,t);if(o.length>0){var s=this.view.geometries[0],l=s.dataArray,c=o[0].name,u=[];return l.forEach(function(f){f.forEach(function(d){var g=Util.getTooltipItems(d,s),p=g[0];if(!i&&p&&p.name===c){var v=isNil(a)?c:a;u.push(__assign$1(__assign$1({},p),{name:p.title,title:v}))}else if(i&&p){var v=isNil(a)?p.name||c:a;u.push(__assign$1(__assign$1({},p),{name:p.title,title:v}))}})}),u}return[]},e}(Tooltip);registerComponentController("radar-tooltip",RadarTooltipController);var RadarTooltipAction=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(){var t=this.context.view;t.removeInteraction("tooltip")},e.prototype.show=function(){var t=this.context.event,n=this.getTooltipController();n.showTooltip({x:t.x,y:t.y})},e.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},e.prototype.getTooltipController=function(){var t=this.context.view;return t.getController("radar-tooltip")},e}(Action);registerAction("radar-tooltip",RadarTooltipAction);registerInteraction("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="radar",t}return e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return deepAssign({},r.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return adaptor$9},e})(Plot);function getScaleMax(r,e,t){var n=t.map(function(o){return o[e]}).filter(function(o){return o!==void 0}),i=n.length>0?Math.max.apply(Math,n):0,a=Math.abs(r)%360;return a?i*360/a:i}function getStackedData(r,e,t){var n=[];return r.forEach(function(i){var a=n.find(function(o){return o[e]===i[e]});a?a[t]+=i[t]||null:n.push(__assign$1({},i))}),n}function geometry$7(r){var e=r.chart,t=r.options,n=t.barStyle,i=t.color,a=t.tooltip,o=t.colorField,s=t.type,l=t.xField,c=t.yField,u=t.data,f=t.shape,d=processIllegalData(u,c);e.data(d);var g=deepAssign({},r,{options:{tooltip:a,seriesField:o,interval:{style:n,color:i,shape:f||(s==="line"?"line":"intervel")},minColumnWidth:t.minBarWidth,maxColumnWidth:t.maxBarWidth,columnBackground:t.barBackground}});return interval(g),s==="line"&&point({chart:e,options:{xField:l,yField:c,seriesField:o,point:{shape:"circle",color:i}}}),r}function meta$5(r){var e,t=r.options,n=t.yField,i=t.xField,a=t.data,o=t.isStack,s=t.isGroup,l=t.colorField,c=t.maxAngle,u=o&&!s&&l?getStackedData(a,i,n):a,f=processIllegalData(u,n);return flow(scale$2((e={},e[n]={min:0,max:getScaleMax(c,n,f)},e)))(r)}function coordinate$2(r){var e=r.chart,t=r.options,n=t.radius,i=t.innerRadius,a=t.startAngle,o=t.endAngle;return e.coordinate({type:"polar",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),r}function axis$6(r){var e=r.chart,t=r.options,n=t.xField,i=t.xAxis;return e.axis(n,i),r}function label$4(r){var e=r.chart,t=r.options,n=t.label,i=t.yField,a=findGeometry(e,"interval");if(!n)a.label(!1);else{var o=n.callback,s=__rest(n,["callback"]);a.label({fields:[i],callback:o,cfg:__assign$1(__assign$1({},transformLabel(s)),{type:"polar"})})}return r}function adaptor$8(r){return flow(pattern("barStyle"),geometry$7,meta$5,axis$6,coordinate$2,interaction$8,animation$5,theme$2,tooltip$9,legend$g,annotation$2(),label$4)(r)}var DEFAULT_OPTIONS$b=deepAssign({},Plot.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="radial-bar",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$b},e.prototype.changeData=function(t){this.updateOption({data:t}),meta$5({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$8},e})(Plot);function geometry$6(r){var e=r.chart,t=r.options,n=t.data,i=t.sectorStyle,a=t.shape,o=t.color;return e.data(n),flow(interval)(deepAssign({},r,{options:{marginRatio:1,interval:{style:i,color:o,shape:a}}})),r}function label$3(r){var e=r.chart,t=r.options,n=t.label,i=t.xField,a=findGeometry(e,"interval");if(n===!1)a.label(!1);else if(isObject(n)){var o=n.callback,s=n.fields,l=__rest(n,["callback","fields"]),c=l.offset,u=l.layout;(c===void 0||c>=0)&&(u=u?isArray$3(u)?u:[u]:[],l.layout=filter(u,function(f){return f.type!=="limit-in-shape"}),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:transformLabel(l)})}else log(LEVEL.WARN,n===null,"the label option must be an Object."),a.label({fields:[i]});return r}function legend$4(r){var e=r.chart,t=r.options,n=t.legend,i=t.seriesField;return n===!1?e.legend(!1):i&&e.legend(i,n),r}function coordinate$1(r){var e=r.chart,t=r.options,n=t.radius,i=t.innerRadius,a=t.startAngle,o=t.endAngle;return e.coordinate({type:"polar",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}),r}function meta$4(r){var e,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return flow(scale$2((e={},e[a]=n,e[o]=i,e)))(r)}function axis$5(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return n?e.axis(a,n):e.axis(a,!1),i?e.axis(o,i):e.axis(o,!1),r}function adaptor$7(r){flow(pattern("sectorStyle"),geometry$6,meta$4,label$3,coordinate$1,axis$5,legend$4,tooltip$9,interaction$8,animation$5,theme$2,annotation$2(),state)(r)}var DEFAULT_OPTIONS$a=deepAssign({},Plot.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),Rose=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="rose",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$a},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$7},e}(Plot),X_FIELD$1="x",Y_FIELD$1="y",COLOR_FIELD="name",NODES_VIEW_ID="nodes",EDGES_VIEW_ID="edges";function getNodes(r,e,t){var n=[];return r.forEach(function(i){var a=i[e],o=i[t];n.includes(a)||n.push(a),n.includes(o)||n.push(o)}),n}function getMatrix(r,e,t,n){var i={};return e.forEach(function(a){i[a]={},e.forEach(function(o){i[a][o]=0})}),r.forEach(function(a){i[a[t]][a[n]]=1}),i}function cutoffCircle(r,e,t){if(!isArray$3(r))return[];var n=[],i=getNodes(r,e,t),a=getMatrix(r,i,e,t),o={};i.forEach(function(l){o[l]=0});function s(l){o[l]=1,i.forEach(function(c){if(a[l][c]!=0)if(o[c]==1)n.push("".concat(l,"_").concat(c));else{if(o[c]==-1)return;s(c)}}),o[l]=-1}return i.forEach(function(l){o[l]!=-1&&s(l)}),n.length!==0&&console.warn("sankey data contains circle, ".concat(n.length," records removed."),n),r.filter(function(l){return n.findIndex(function(c){return c==="".concat(l[e],"_").concat(l[t])})<0})}function targetDepth(r){return r.target.depth}function left(r){return r.depth}function right(r,e){return e-1-r.height}function justify(r,e){return r.sourceLinks.length?r.depth:e-1}function center(r){return r.targetLinks.length?r.depth:r.sourceLinks.length?minBy(r.sourceLinks,targetDepth)-1:0}function constant(r){return function(){return r}}function sumBy(r,e){for(var t=0,n=0;n<r.length;n++)t+=e(r[n]);return t}function maxValueBy(r,e){for(var t=-1/0,n=0;n<r.length;n++)t=Math.max(e(r[n]),t);return t}function minValueBy(r,e){for(var t=1/0,n=0;n<r.length;n++)t=Math.min(e(r[n]),t);return t}function ascendingSourceBreadth(r,e){return ascendingBreadth(r.source,e.source)||r.index-e.index}function ascendingTargetBreadth(r,e){return ascendingBreadth(r.target,e.target)||r.index-e.index}function ascendingBreadth(r,e){return r.y0-e.y0}function value(r){return r.value}function defaultId(r){return r.index}function defaultNodes(r){return r.nodes}function defaultLinks(r){return r.links}function find(r,e){var t=r.get(e);if(!t)throw new Error("missing: "+e);return t}function computeLinkBreadths(r){for(var e=r.nodes,t=0,n=e;t<n.length;t++){for(var i=n[t],a=i.y0,o=a,s=0,l=i.sourceLinks;s<l.length;s++){var c=l[s];c.y0=a+c.width/2,a+=c.width}for(var u=0,f=i.targetLinks;u<f.length;u++){var c=f[u];c.y1=o+c.width/2,o+=c.width}}}function Sankey(){var r=0,e=0,t=1,n=1,i=24,a=8,o,s=defaultId,l=justify,c,u,f,d=defaultNodes,g=defaultLinks,p=6;function v(L){var O={nodes:d(L),links:g(L)};return y(O),m(O),x(O),_(O),b(O),computeLinkBreadths(O),O}v.update=function(L){return computeLinkBreadths(L),L},v.nodeId=function(L){return arguments.length?(s=typeof L=="function"?L:constant(L),v):s},v.nodeAlign=function(L){return arguments.length?(l=typeof L=="function"?L:constant(L),v):l},v.nodeDepth=function(L){return arguments.length?(c=L,v):c},v.nodeSort=function(L){return arguments.length?(u=L,v):u},v.nodeWidth=function(L){return arguments.length?(i=+L,v):i},v.nodePadding=function(L){return arguments.length?(a=o=+L,v):a},v.nodes=function(L){return arguments.length?(d=typeof L=="function"?L:constant(L),v):d},v.links=function(L){return arguments.length?(g=typeof L=="function"?L:constant(L),v):g},v.linkSort=function(L){return arguments.length?(f=L,v):f},v.size=function(L){return arguments.length?(r=e=0,t=+L[0],n=+L[1],v):[t-r,n-e]},v.extent=function(L){return arguments.length?(r=+L[0][0],t=+L[1][0],e=+L[0][1],n=+L[1][1],v):[[r,e],[t,n]]},v.iterations=function(L){return arguments.length?(p=+L,v):p};function y(L){var O=L.nodes,k=L.links;O.forEach(function(G,j){G.index=j,G.sourceLinks=[],G.targetLinks=[]});var B=new Map(O.map(function(G){return[s(G),G]}));if(k.forEach(function(G,j){G.index=j;var Y=G.source,U=G.target;typeof Y!="object"&&(Y=G.source=find(B,Y)),typeof U!="object"&&(U=G.target=find(B,U)),Y.sourceLinks.push(G),U.targetLinks.push(G)}),f!=null)for(var N=0,F=O;N<F.length;N++){var V=F[N],H=V.sourceLinks,z=V.targetLinks;H.sort(f),z.sort(f)}}function m(L){for(var O=L.nodes,k=0,B=O;k<B.length;k++){var N=B[k];N.value=N.fixedValue===void 0?Math.max(sumBy(N.sourceLinks,value),sumBy(N.targetLinks,value)):N.fixedValue}}function x(L){for(var O=L.nodes,k=O.length,B=new Set(O),N=new Set,F=0;B.size;){if(B.forEach(function(G){G.depth=F;for(var j=0,Y=G.sourceLinks;j<Y.length;j++){var U=Y[j].target;N.add(U)}}),++F>k)throw new Error("circular link");B=N,N=new Set}if(c)for(var V=Math.max(maxValueBy(O,function(G){return G.depth})+1,0),H=void 0,z=0;z<O.length;z++)H=O[z],H.depth=c.call(null,H,V)}function _(L){for(var O=L.nodes,k=O.length,B=new Set(O),N=new Set,F=0;B.size;){if(B.forEach(function(V){V.height=F;for(var H=0,z=V.targetLinks;H<z.length;H++){var G=z[H].source;N.add(G)}}),++F>k)throw new Error("circular link");B=N,N=new Set}}function S(L){for(var O=L.nodes,k=Math.max(maxValueBy(O,function(U){return U.depth})+1,0),B=(t-r-i)/(k-1),N=new Array(k).fill(0).map(function(){return[]}),F=0,V=O;F<V.length;F++){var H=V[F],z=Math.max(0,Math.min(k-1,Math.floor(l.call(null,H,k))));H.layer=z,H.x0=r+z*B,H.x1=H.x0+i,N[z]?N[z].push(H):N[z]=[H]}if(u)for(var G=0,j=N;G<j.length;G++){var Y=j[G];Y.sort(u)}return N}function A(L){for(var O=minValueBy(L,function(K){return(n-e-(K.length-1)*o)/sumBy(K,value)}),k=0,B=L;k<B.length;k++){for(var N=B[k],F=e,V=0,H=N;V<H.length;V++){var z=H[V];z.y0=F,z.y1=F+z.value*O,F=z.y1+o;for(var G=0,j=z.sourceLinks;G<j.length;G++){var Y=j[G];Y.width=Y.value*O}}F=(n-F+o)/(N.length+1);for(var U=0;U<N.length;++U){var z=N[U];z.y0+=F*(U+1),z.y1+=F*(U+1)}$(N)}}function b(L){var O=S(L);o=Math.min(a,(n-e)/(maxValueBy(O,function(F){return F.length})-1)),A(O);for(var k=0;k<p;++k){var B=Math.pow(.99,k),N=Math.max(1-B,(k+1)/p);E(O,B,N),C(O,B,N)}}function C(L,O,k){for(var B=1,N=L.length;B<N;++B){for(var F=L[B],V=0,H=F;V<H.length;V++){for(var z=H[V],G=0,j=0,Y=0,U=z.targetLinks;Y<U.length;Y++){var K=U[Y],q=K.source,W=K.value,X=W*(z.layer-q.layer);G+=P(q,z)*X,j+=X}if(j>0){var tt=(G/j-z.y0)*O;z.y0+=tt,z.y1+=tt,M(z)}}u===void 0&&F.sort(ascendingBreadth),F.length&&T(F,k)}}function E(L,O,k){for(var B=L.length,N=B-2;N>=0;--N){for(var F=L[N],V=0,H=F;V<H.length;V++){for(var z=H[V],G=0,j=0,Y=0,U=z.sourceLinks;Y<U.length;Y++){var K=U[Y],q=K.target,W=K.value,X=W*(q.layer-z.layer);G+=R(z,q)*X,j+=X}if(j>0){var tt=(G/j-z.y0)*O;z.y0+=tt,z.y1+=tt,M(z)}}u===void 0&&F.sort(ascendingBreadth),F.length&&T(F,k)}}function T(L,O){var k=L.length>>1,B=L[k];w(L,B.y0-o,k-1,O),I(L,B.y1+o,k+1,O),w(L,n,L.length-1,O),I(L,e,0,O)}function I(L,O,k,B){for(;k<L.length;++k){var N=L[k],F=(O-N.y0)*B;F>1e-6&&(N.y0+=F,N.y1+=F),O=N.y1+o}}function w(L,O,k,B){for(;k>=0;--k){var N=L[k],F=(N.y1-O)*B;F>1e-6&&(N.y0-=F,N.y1-=F),O=N.y0-o}}function M(L){var O=L.sourceLinks,k=L.targetLinks;if(f===void 0){for(var B=0,N=k;B<N.length;B++){var F=N[B].source.sourceLinks;F.sort(ascendingTargetBreadth)}for(var V=0,H=O;V<H.length;V++){var z=H[V].target.targetLinks;z.sort(ascendingSourceBreadth)}}}function $(L){if(f===void 0)for(var O=0,k=L;O<k.length;O++){var B=k[O],N=B.sourceLinks,F=B.targetLinks;N.sort(ascendingTargetBreadth),F.sort(ascendingSourceBreadth)}}function P(L,O){for(var k=L.y0-(L.sourceLinks.length-1)*o/2,B=0,N=L.sourceLinks;B<N.length;B++){var F=N[B],V=F.target,H=F.width;if(V===O)break;k+=H+o}for(var z=0,G=O.targetLinks;z<G.length;z++){var j=G[z],V=j.source,H=j.width;if(V===L)break;k-=H}return k}function R(L,O){for(var k=O.y0-(O.targetLinks.length-1)*o/2,B=0,N=O.targetLinks;B<N.length;B++){var F=N[B],V=F.source,H=F.width;if(V===L)break;k+=H+o}for(var z=0,G=L.sourceLinks;z<G.length;z++){var j=G[z],V=j.target,H=j.width;if(V===O)break;k-=H}return k}return v}var ALIGN_METHOD={left,right,center,justify},DEFAULT_OPTIONS$9={nodeId:function(r){return r.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function getNodeAlignFunction(r){var e=isString(r)?ALIGN_METHOD[r]:isFunction(r)?r:null;return e||justify}function getDefaultOptions(r){return mix({},DEFAULT_OPTIONS$9,r)}function sankeyLayout(r,e){var t=getDefaultOptions(r),n=t.nodeId,i=t.nodeSort,a=t.nodeAlign,o=t.nodeWidth,s=t.nodePadding,l=t.nodeDepth,c=Sankey().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(getNodeAlignFunction(a)).extent([[0,0],[1,1]]).nodeId(n),u=c(e),f=u.nodes.map(function(g){var p=g.x0,v=g.x1,y=g.y0,m=g.y1;return g.x=[p,v,v,p],g.y=[y,y,m,m],g}).filter(function(g){return g.name!==null}),d=u.links.map(function(g){var p=g.source,v=g.target,y=p.x1,m=v.x0;g.x=[y,y,m,m];var x=g.width/2;return g.y=[g.y0+x,g.y0-x,g.y1+x,g.y1-x],g}).filter(function(g){var p=g.source,v=g.target;return p.name!==null&&v.name!==null});return{nodes:f,links:d}}function isNodeLink(r){return r==="node-link"}function getNodeWidthRatio(r,e,t){return isRealNumber(r)?r/t:e}function getNodePaddingRatio(r,e,t){return isRealNumber(r)?r/t:e}function transformToViewsData(r,e,t){var n=r.dataType,i=r.data,a=r.sourceField,o=r.targetField,s=r.weightField,l=r.nodeAlign,c=r.nodeSort,u=r.nodePadding,f=r.nodePaddingRatio,d=r.nodeWidth,g=r.nodeWidthRatio,p=r.nodeDepth,v=r.rawFields,y=v===void 0?[]:v,m;isNodeLink(n)?m=i:m=transformDataToNodeLinkData(cutoffCircle(i,a,o),a,o,s,y);var x=sankeyLayout({nodeAlign:l,nodePadding:getNodePaddingRatio(u,f,t),nodeWidth:getNodeWidthRatio(d,g,e),nodeSort:c,nodeDepth:p},m),_=x.nodes,S=x.links;return{nodes:_.map(function(A){return __assign$1(__assign$1({},pick(A,__spreadArray$1(["x","y","name"],y,!0))),{isNode:!0})}),edges:S.map(function(A){return __assign$1(__assign$1({source:A.source.name,target:A.target.name,name:A.source.name||A.target.name},pick(A,__spreadArray$1(["x","y","value"],y,!0))),{isNode:!1})})}}function defaultOptions$2(r){var e=r.options,t=e.rawFields,n=t===void 0?[]:t;return deepAssign({},{options:{tooltip:{fields:uniq$2(__spreadArray$1(["name","source","target","value","isNode"],n,!0))},label:{fields:uniq$2(__spreadArray$1(["x","name"],n,!0))}}},r)}function geometry$5(r){var e=r.chart,t=r.options,n=t.color,i=t.nodeStyle,a=t.edgeStyle,o=t.label,s=t.tooltip,l=t.nodeState,c=t.edgeState,u=t.rawFields,f=u===void 0?[]:u;e.legend(!1),e.tooltip(s),e.axis(!1),e.coordinate().reflect("y");var d=transformToViewsData(t,e.width,e.height),g=d.nodes,p=d.edges,v=e.createView({id:EDGES_VIEW_ID});v.data(p),edge({chart:v,options:{xField:X_FIELD$1,yField:Y_FIELD$1,seriesField:COLOR_FIELD,rawFields:__spreadArray$1(["source","target"],f,!0),edge:{color:n,style:a,shape:"arc"},tooltip:s,state:c}});var y=e.createView({id:NODES_VIEW_ID});return y.data(g),polygon({chart:y,options:{xField:X_FIELD$1,yField:Y_FIELD$1,seriesField:COLOR_FIELD,polygon:{color:n,style:i},label:o,tooltip:s,state:l}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),r}function animation$1(r){var e=r.chart,t=r.options,n=t.animation,i=__spreadArray$1(__spreadArray$1([],e.views[0].geometries,!0),e.views[1].geometries,!0);return addViewAnimation(e,n,i),r}function nodeDraggable(r){var e=r.chart,t=r.options,n=t.nodeDraggable,i="sankey-node-draggable";return n?e.interaction(i):e.removeInteraction(i),r}function interaction$2(r){var e=r.chart,t=r.options,n=t.interactions,i=n===void 0?[]:n,a=[].concat(i,t.nodeInteractions||[]),o=[].concat(i,t.edgeInteractions||[]),s=findViewById(e,NODES_VIEW_ID),l=findViewById(e,EDGES_VIEW_ID);return a.forEach(function(c){(c==null?void 0:c.enable)===!1?s.removeInteraction(c.type):s.interaction(c.type,c.cfg||{})}),o.forEach(function(c){(c==null?void 0:c.enable)===!1?l.removeInteraction(c.type):l.interaction(c.type,c.cfg||{})}),r}function adaptor$6(r){return flow(defaultOptions$2,geometry$5,interaction$2,nodeDraggable,animation$1,theme$2)(r)}var SankeyNodeDragAction=function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isDragging=!1,t}return e.prototype.isNodeElement=function(){var t=get(this.context,"event.target");if(t){var n=t.get("element");return n&&n.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return findViewById(this.context.view,NODES_VIEW_ID)},e.prototype.getEdgeView=function(){return findViewById(this.context.view,EDGES_VIEW_ID)},e.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:get(this.context,"event.x"),y:get(this.context,"event.y")};var t=this.context.event.target.get("element"),n=this.getCurrentDatumIdx(t);if(n===-1)return;this.currentElementIdx=n,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var t=this.context.view,n={x:get(this.context,"event.x"),y:get(this.context,"event.y")},i=n.x-this.prevPoint.x,a=n.y-this.prevPoint.y,o=this.getNodeView(),s=o.geometries[0].elements[this.currentElementIdx];if(s&&s.getModel()){var l=s.getModel().data,c=o.getOptions().data,u=o.getCoordinate(),f={x:i/u.getWidth(),y:a/u.getHeight()},d=__assign$1(__assign$1({},l),{x:l.x.map(function(m){return m+=f.x}),y:l.y.map(function(m){return m+=f.y})}),g=__spreadArray$1([],c,!0);g[this.currentElementIdx]=d,o.data(g);var p=l.name,v=this.getEdgeView(),y=v.getOptions().data;y.forEach(function(m){m.source===p&&(m.x[0]+=f.x,m.x[1]+=f.x,m.y[0]+=f.y,m.y[1]+=f.y),m.target===p&&(m.x[2]+=f.x,m.x[3]+=f.x,m.y[2]+=f.y,m.y[3]+=f.y)}),v.data(y),this.prevPoint=n,t.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e}(Action);registerAction("sankey-node-drag",SankeyNodeDragAction);registerInteraction("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(r){return r.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="sankey",t}return e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){var n=t.name;return n},callback:function(t){var n=t[1]===1;return{style:{fill:"#545454",textAlign:n?"end":"start"},offsetX:n?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!get(t,[0,"data","isNode"])},formatter:function(t){var n=t.source,i=t.target,a=t.value;return{name:n+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(t){this.updateOption({data:t});var n=transformToViewsData(this.options,this.chart.width,this.chart.height),i=n.nodes,a=n.edges,o=findViewById(this.chart,NODES_VIEW_ID),s=findViewById(this.chart,EDGES_VIEW_ID);o.changeData(i),s.changeData(a)},e.prototype.getSchemaAdaptor=function(){return adaptor$6},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(Plot);var SUNBURST_ANCESTOR_FIELD="ancestor-node",SUNBURST_Y_FIELD="value",SUNBURST_PATH_FIELD="path",RAW_FIELDS=[SUNBURST_PATH_FIELD,NODE_INDEX_FIELD,NODE_ANCESTORS_FIELD,CHILD_NODE_COUNT,"name","depth","height"],DEFAULT_OPTIONS$8=deepAssign({},Plot.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),DEFAULT_OPTIONS$7={field:"value",size:[1,1],round:!1,padding:0,sort:function(r,e){return e.value-r.value},as:["x","y"],ignoreParentValue:!0};function partition(r,e){e=mix({},DEFAULT_OPTIONS$7,e);var t=e.as;if(!isArray$3(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var n;try{n=getField(e)}catch(l){console.warn(l)}var i=function(l){return partition$1().size(e.size).round(e.round).padding(e.padding)(hierarchy(l).sum(function(c){return size(c.children)?e.ignoreParentValue?0:c[n]-reduce(c.children,function(u,f){return u+f[n]},0):c[n]}).sort(e.sort))},a=i(r),o=t[0],s=t[1];return a.each(function(l){var c,u;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((c=l.data)===null||c===void 0?void 0:c.name)||((u=l.data)===null||u===void 0?void 0:u.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(function(f){t.indexOf(f)===-1&&delete l[f]})}),getAllNodes(a)}var DEFAULT_OPTIONS$6={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(r,e){return e.value-r.value},ratio:.5*(1+Math.sqrt(5))};function getTileMethod(r,e){return r==="treemapSquarify"?d3Hierarchy[r].ratio(e):d3Hierarchy[r]}function treemap(r,e){e=mix({},DEFAULT_OPTIONS$6,e);var t=e.as;if(!isArray$3(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var n;try{n=getField(e)}catch(c){console.warn(c)}var i=getTileMethod(e.tile,e.ratio),a=function(c){return index().tile(i).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(hierarchy(c).sum(function(u){return e.ignoreParentValue&&u.children?0:u[n]}).sort(e.sort))},o=a(r),s=t[0],l=t[1];return o.each(function(c){c[s]=[c.x0,c.x1,c.x1,c.x0],c[l]=[c.y1,c.y1,c.y0,c.y0],["x0","x1","y0","y1"].forEach(function(u){t.indexOf(u)===-1&&delete c[u]})}),getAllNodes(o)}function transformData$2(r){var e=r.data,t=r.colorField,n=r.rawFields,i=r.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,s={partition,treemap},l=r.seriesField,c=r.type||"partition",u=s[c](e,__assign$1(__assign$1({field:l||"value"},omit$1(a,["activeDepth"])),{type:"hierarchy.".concat(c),as:["x","y"]})),f=[];return u.forEach(function(d){var g,p,v,y,m,x;if(d.depth===0||o>0&&d.depth>o)return null;for(var _=d.data.name,S=__assign$1({},d);S.depth>1;)_="".concat((p=S.parent.data)===null||p===void 0?void 0:p.name," / ").concat(_),S=S.parent;var A=__assign$1(__assign$1(__assign$1({},pick(d.data,__spreadArray$1(__spreadArray$1([],n||[],!0),[a.field],!1))),(g={},g[SUNBURST_PATH_FIELD]=_,g[SUNBURST_ANCESTOR_FIELD]=S.data.name,g)),d);l&&(A[l]=d.data[l]||((y=(v=d.parent)===null||v===void 0?void 0:v.data)===null||y===void 0?void 0:y[l])),t&&(A[t]=d.data[t]||((x=(m=d.parent)===null||m===void 0?void 0:m.data)===null||x===void 0?void 0:x[t])),A.ext=a,A[HIERARCHY_DATA_TRANSFORM_PARAMS]={hierarchyConfig:a,colorField:t,rawFields:n},f.push(A)}),f}function geometry$4(r){var e=r.chart,t=r.options,n=t.color,i=t.colorField,a=i===void 0?SUNBURST_ANCESTOR_FIELD:i,o=t.sunburstStyle,s=t.rawFields,l=s===void 0?[]:s,c=t.shape,u=transformData$2(t);e.data(u);var f;return o&&(f=function(d){return deepAssign({},{fillOpacity:Math.pow(.85,d.depth)},isFunction(o)?o(d):o)}),polygon(deepAssign({},r,{options:{xField:"x",yField:"y",seriesField:a,rawFields:uniq$2(__spreadArray$1(__spreadArray$1([],RAW_FIELDS,!0),l,!0)),polygon:{color:n,style:f,shape:c}}})),r}function axis$4(r){var e=r.chart;return e.axis(!1),r}function label$2(r){var e=r.chart,t=r.options,n=t.label,i=findGeometry(e,"polygon");if(!n)i.label(!1);else{var a=n.fields,o=a===void 0?["name"]:a,s=n.callback,l=__rest(n,["fields","callback"]);i.label({fields:o,callback:s,cfg:transformLabel(l)})}return r}function coordinate(r){var e=r.chart,t=r.options,n=t.innerRadius,i=t.radius,a=t.reflect,o=e.coordinate({type:"polar",cfg:{innerRadius:n,radius:i}});return a&&o.reflect(a),r}function meta$3(r){var e,t=r.options,n=t.hierarchyConfig,i=t.meta;return flow(scale$2({},(e={},e[SUNBURST_Y_FIELD]=get(i,get(n,["field"],"value")),e)))(r)}function tooltip$1(r){var e=r.chart,t=r.options,n=t.tooltip;if(n===!1)e.tooltip(!1);else{var i=n;get(n,"fields")||(i=deepAssign({},{customItems:function(a){return a.map(function(o){var s=get(e.getOptions(),"scales"),l=get(s,[SUNBURST_PATH_FIELD,"formatter"],function(u){return u}),c=get(s,[SUNBURST_Y_FIELD,"formatter"],function(u){return u});return __assign$1(__assign$1({},o),{name:l(o.data[SUNBURST_PATH_FIELD]),value:c(o.data.value)})})}},i)),e.tooltip(i)}return r}function adaptorInteraction$1(r){var e=r.drilldown,t=r.interactions,n=t===void 0?[]:t;return e!=null&&e.enabled?deepAssign({},r,{interactions:__spreadArray$1(__spreadArray$1([],n,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:transformData$2}}],!1)}):r}function interaction$1(r){var e=r.chart,t=r.options,n=t.drilldown;return interaction$8({chart:e,options:adaptorInteraction$1(t)}),n!=null&&n.enabled&&(e.appendPadding=getAdjustAppendPadding(e.appendPadding,get(n,["breadCrumb","position"]))),r}function adaptor$5(r){return flow(theme$2,pattern("sunburstStyle"),geometry$4,axis$4,meta$3,legend$g,coordinate,tooltip$1,label$2,interaction$1,animation$5,annotation$2())(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="sunburst",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$8},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$5},e.SUNBURST_ANCESTOR_FIELD=SUNBURST_ANCESTOR_FIELD,e.SUNBURST_PATH_FIELD=SUNBURST_PATH_FIELD,e.NODE_ANCESTORS_FIELD=NODE_ANCESTORS_FIELD,e})(Plot);function findInteraction(r,e){if(isArray$3(r))return r.find(function(t){return t.type===e})}function enableInteraction(r,e){var t=findInteraction(r,e);return t&&t.enable!==!1}function enableDrillInteraction(r){var e=r.interactions,t=r.drilldown;return get(t,"enabled")||enableInteraction(e,"treemap-drill-down")}function resetDrillDown(r){var e=r.interactions["drill-down"];if(e){var t=e.context.actions.find(function(n){return n.name==="drill-down-action"});t.reset()}}function transformData$1(r){var e=r.data,t=r.colorField,n=r.enableDrillDown,i=r.hierarchyConfig,a=treemap(e,__assign$1(__assign$1({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(s){if(s.depth===0||n&&s.depth!==1||!n&&s.children)return null;var l=s.ancestors().map(function(d){return{data:d.data,height:d.height,value:d.value}}),c=n&&isArray$3(e.path)?l.concat(e.path.slice(1)):l,u=Object.assign({},s.data,__assign$1({x:s.x,y:s.y,depth:s.depth,value:s.value,path:c},s));if(!s.data[t]&&s.parent){var f=s.ancestors().find(function(d){return d.data[t]});u[t]=f==null?void 0:f.data[t]}else u[t]=s.data[t];u[HIERARCHY_DATA_TRANSFORM_PARAMS]={hierarchyConfig:i,colorField:t,enableDrillDown:n},o.push(u)}),o}function defaultOptions$1(r){var e=r.options,t=e.colorField;return deepAssign({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(n){return{name:n.name,value:n.value}}}}},r)}function geometry$3(r){var e=r.chart,t=r.options,n=t.color,i=t.colorField,a=t.rectStyle,o=t.hierarchyConfig,s=t.rawFields,l=transformData$1({data:t.data,colorField:t.colorField,enableDrillDown:enableDrillInteraction(t),hierarchyConfig:o});return e.data(l),polygon(deepAssign({},r,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:n,style:a}}})),e.coordinate().reflect("y"),r}function axis$3(r){var e=r.chart;return e.axis(!1),r}function adaptorInteraction(r){var e=r.drilldown,t=r.interactions,n=t===void 0?[]:t,i=enableDrillInteraction(r);return i?deepAssign({},r,{interactions:__spreadArray$1(__spreadArray$1([],n,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:transformData$1}}],!1)}):r}function interaction(r){var e=r.chart,t=r.options,n=t.interactions,i=t.drilldown;interaction$8({chart:e,options:adaptorInteraction(t)});var a=findInteraction(n,"view-zoom");a&&(a.enable!==!1?e.getCanvas().on("mousewheel",function(s){s.preventDefault()}):e.getCanvas().off("mousewheel"));var o=enableDrillInteraction(t);return o&&(e.appendPadding=getAdjustAppendPadding(e.appendPadding,get(i,["breadCrumb","position"]))),r}function adaptor$4(r){return flow(defaultOptions$1,theme$2,pattern("rectStyle"),geometry$3,axis$3,legend$g,tooltip$9,interaction,animation$5,annotation$2())(r)}var DEFAULT_OPTIONS$5={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="treemap",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$5},e.prototype.changeData=function(t){var n=this.options,i=n.colorField,a=n.interactions,o=n.hierarchyConfig;this.updateOption({data:t});var s=transformData$1({data:t,colorField:i,enableDrillDown:enableInteraction(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(s),resetDrillDown(this.chart)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$4},e})(Plot);var ID_FIELD="id",PATH_FIELD="path",DEFAULT_OPTIONS$4={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(r){return{name:r.id,value:r.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function placeElementsOrdered(r){if(r){var e=r.geometries[0].elements;e.forEach(function(t){t.shape.toFront()})}}var ElementActiveAction=getActionClass("element-active"),VennElementActive=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},e.prototype.active=function(){r.prototype.active.call(this),this.syncElementsPos()},e.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},e}(ElementActiveAction),ElementHighlightAction=getActionClass("element-highlight"),VennElementHighlight=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},e.prototype.highlight=function(){r.prototype.highlight.call(this),this.syncElementsPos()},e.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.clear=function(){r.prototype.clear.call(this),this.syncElementsPos()},e.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},e}(ElementHighlightAction),ElementSelectedAction=getActionClass("element-selected"),ElementSingleSelectedAction=getActionClass("element-single-selected"),VennElementSelected=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},e.prototype.selected=function(){r.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},e}(ElementSelectedAction),VennElementSingleSelected=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){placeElementsOrdered(this.context.view)},e.prototype.selected=function(){r.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},e}(ElementSingleSelectedAction);registerAction("venn-element-active",VennElementActive);registerAction("venn-element-highlight",VennElementHighlight);registerAction("venn-element-selected",VennElementSelected);registerAction("venn-element-single-selected",VennElementSingleSelected);registerInteraction("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});registerInteraction("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});registerInteraction("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});registerInteraction("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});registerInteraction("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});registerInteraction("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var VennLabel=function(r){__extends$1(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelPoint=function(t,n,i){var a=t.data,o=a.x,s=a.y,l=t.customLabelInfo,c=l.offsetX,u=l.offsetY;return{content:t.content[i],x:o+c,y:s+u}},e}(GeometryLabel);registerGeometryLabel("venn",VennLabel);var isArray=Array.isArray;const isArray$1=isArray;var SPACES=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND=new RegExp("([a-z])["+SPACES+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES+"]*,?["+SPACES+"]*)+)","ig"),PATH_VALUES=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES+"]*,?["+SPACES+"]*","ig");function parsePathString(r){if(!r)return null;if(isArray$1(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(PATH_COMMAND,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(PATH_VALUES,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(t.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([i,o[0]]),s==="r")t.push([i].concat(o));else for(;o.length>=e[s]&&(t.push([i].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}function getFillAttrs$1(r){return deepAssign({},r.defaultStyle,{fill:r.color},r.style)}registerShape("schema","venn",{draw:function(r,e){var t=r.data,n=parsePathString(t[PATH_FIELD]),i=getFillAttrs$1(r),a=e.addGroup({name:"venn-shape"});a.addShape("path",{attrs:__assign$1(__assign$1({},i),{path:n}),name:"venn-path"});var o=r.customInfo,s=o.offsetX,l=o.offsetY,c=Util.transform(null,[["t",s,l]]);return a.setMatrix(c),a},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{lineWidth:0,stroke:e,fill:e,r:4}}}});var each=function(r){return function(e,t){var n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n}},blendObject={normal:function(r){return r},multiply:function(r,e){return r*e/255},screen:function(r,e){return 255*(1-(1-r/255)*(1-e/255))},overlay:function(r,e){return e<128?2*r*e/255:255*(1-2*(1-r/255)*(1-e/255))},darken:function(r,e){return r>e?e:r},lighten:function(r,e){return r>e?r:e},dodge:function(r,e){return r===255?255:(r=255*(e/255)/(1-r/255),r>255?255:r)},burn:function(r,e){return e===255?255:r===0?0:255*(1-Math.min(1,(1-e/255)/(r/255)))}},innerBlend=function(r){if(!blendObject[r])throw new Error("unknown blend mode "+r);return blendObject[r]};function blend(r,e,t){t===void 0&&(t="normal");var n=each(innerBlend(t))(colorToArr(r),colorToArr(e)),i=colorToArr(r),a=i[0],o=i[1],s=i[2],l=i[3],c=colorToArr(e),u=c[0],f=c[1],d=c[2],g=c[3],p=Number((l+g*(1-l)).toFixed(2)),v=Math.round((l*(1-g)*(a/255)+l*g*(n[0]/255)+(1-l)*g*(u/255))/p*255),y=Math.round((l*(1-g)*(o/255)+l*g*(n[1]/255)+(1-l)*g*(f/255))/p*255),m=Math.round((l*(1-g)*(s/255)+l*g*(n[2]/255)+(1-l)*g*(d/255))/p*255);return"rgba(".concat(v,", ").concat(y,", ").concat(m,", ").concat(p,")")}function colorToArr(r){var e=r.replace("/s+/g",""),t;return typeof e=="string"&&!e.startsWith("rgba")&&!e.startsWith("#")?t=colorUtil.rgb2arr(colorUtil.toRGB(e)).concat([1]):(e.startsWith("rgba")&&(t=e.replace("rgba(","").replace(")","").split(",")),e.startsWith("#")&&(t=colorUtil.rgb2arr(e).concat([1])),t.map(function(n,i){return i===3?Number(n):n|0}))}function bisect(r,e,t,n){n=n||{};var i=n.maxIterations||100,a=n.tolerance||1e-10,o=r(e),s=r(t),l=t-e;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return e;if(s===0)return t;for(var c=0;c<i;++c){l/=2;var u=e+l,f=r(u);if(f*o>=0&&(e=u),Math.abs(l)<a||f===0)return u}return e+l}function zeros(r){for(var e=new Array(r),t=0;t<r;++t)e[t]=0;return e}function zerosM(r,e){return zeros(r).map(function(){return zeros(e)})}function dot(r,e){for(var t=0,n=0;n<r.length;++n)t+=r[n]*e[n];return t}function norm2(r){return Math.sqrt(dot(r,r))}function scale(r,e,t){for(var n=0;n<e.length;++n)r[n]=e[n]*t}function weightedSum(r,e,t,n,i){for(var a=0;a<r.length;++a)r[a]=e*t[a]+n*i[a]}function nelderMead(r,e,t){t=t||{};var n=t.maxIterations||e.length*200,i=t.nonZeroDelta||1.05,a=t.zeroDelta||.001,o=t.minErrorDelta||1e-6,s=t.minErrorDelta||1e-5,l=t.rho!==void 0?t.rho:1,c=t.chi!==void 0?t.chi:2,u=t.psi!==void 0?t.psi:-.5,f=t.sigma!==void 0?t.sigma:.5,d,g=e.length,p=new Array(g+1);p[0]=e,p[0].fx=r(e),p[0].id=0;for(var v=0;v<g;++v){var y=e.slice();y[v]=y[v]?y[v]*i:a,p[v+1]=y,p[v+1].fx=r(y),p[v+1].id=v+1}function m(M){for(var $=0;$<M.length;$++)p[g][$]=M[$];p[g].fx=M.fx}for(var x=function(M,$){return M.fx-$.fx},_=e.slice(),S=e.slice(),A=e.slice(),b=e.slice(),C=0;C<n;++C){if(p.sort(x),t.history){var E=p.map(function(M){var $=M.slice();return $.fx=M.fx,$.id=M.id,$});E.sort(function(M,$){return M.id-$.id}),t.history.push({x:p[0].slice(),fx:p[0].fx,simplex:E})}for(d=0,v=0;v<g;++v)d=Math.max(d,Math.abs(p[0][v]-p[1][v]));if(Math.abs(p[0].fx-p[g].fx)<o&&d<s)break;for(v=0;v<g;++v){_[v]=0;for(var T=0;T<g;++T)_[v]+=p[T][v];_[v]/=g}var I=p[g];if(weightedSum(S,1+l,_,-l,I),S.fx=r(S),S.fx<p[0].fx)weightedSum(b,1+c,_,-c,I),b.fx=r(b),b.fx<S.fx?m(b):m(S);else if(S.fx>=p[g-1].fx){var w=!1;if(S.fx>I.fx?(weightedSum(A,1+u,_,-u,I),A.fx=r(A),A.fx<I.fx?m(A):w=!0):(weightedSum(A,1-u*l,_,u*l,I),A.fx=r(A),A.fx<S.fx?m(A):w=!0),w){if(f>=1)break;for(v=1;v<p.length;++v)weightedSum(p[v],1-f,p[0],f,p[v]),p[v].fx=r(p[v])}}else m(S)}return p.sort(x),{fx:p[0].fx,x:p[0]}}function wolfeLineSearch(r,e,t,n,i,a,o){var s=t.fx,l=dot(t.fxprime,e),c=s,u=s,f=l,d=0;i=i||1,a=a||1e-6,o=o||.1;function g(v,y,m){for(var x=0;x<16;++x)if(i=(v+y)/2,weightedSum(n.x,1,t.x,i,e),c=n.fx=r(n.x,n.fxprime),f=dot(n.fxprime,e),c>s+a*i*l||c>=m)y=i;else{if(Math.abs(f)<=-o*l)return i;f*(y-v)>=0&&(y=v),v=i,m=c}return 0}for(var p=0;p<10;++p){if(weightedSum(n.x,1,t.x,i,e),c=n.fx=r(n.x,n.fxprime),f=dot(n.fxprime,e),c>s+a*i*l||p&&c>=u)return g(d,i,u);if(Math.abs(f)<=-o*l)return i;if(f>=0)return g(i,d,c);u=c,d=i,i*=2}return i}function conjugateGradient(r,e,t){var n={x:e.slice(),fx:0,fxprime:e.slice()},i={x:e.slice(),fx:0,fxprime:e.slice()},a=e.slice(),o,s,l=1,c;t=t||{},c=t.maxIterations||e.length*20,n.fx=r(n.x,n.fxprime),o=n.fxprime.slice(),scale(o,n.fxprime,-1);for(var u=0;u<c;++u){if(l=wolfeLineSearch(r,o,n,i,l),t.history&&t.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:l}),!l)scale(o,n.fxprime,-1);else{weightedSum(a,1,i.fxprime,-1,n.fxprime);var f=dot(n.fxprime,n.fxprime),d=Math.max(0,dot(a,i.fxprime)/f);weightedSum(o,d,o,-1,i.fxprime),s=n,n=i,i=s}if(norm2(n.fxprime)<=1e-5)break}return t.history&&t.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:l}),n}var SMALL$1=1e-10;function intersectionArea(r,e){var t=getIntersectionPoints(r),n=t.filter(function(C){return containedInCircles(C,r)}),i=0,a=0,o,s=[];if(n.length>1){var l=getCenter(n);for(o=0;o<n.length;++o){var c=n[o];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}n.sort(function(C,E){return E.angle-C.angle});var u=n[n.length-1];for(o=0;o<n.length;++o){var f=n[o];a+=(u.x+f.x)*(f.y-u.y);for(var d={x:(f.x+u.x)/2,y:(f.y+u.y)/2},g=null,p=0;p<f.parentIndex.length;++p)if(u.parentIndex.indexOf(f.parentIndex[p])>-1){var v=r[f.parentIndex[p]],y=Math.atan2(f.x-v.x,f.y-v.y),m=Math.atan2(u.x-v.x,u.y-v.y),x=m-y;x<0&&(x+=2*Math.PI);var _=m-x/2,S=distance(d,{x:v.x+v.radius*Math.sin(_),y:v.y+v.radius*Math.cos(_)});S>v.radius*2&&(S=v.radius*2),(g===null||g.width>S)&&(g={circle:v,width:S,p1:f,p2:u})}g!==null&&(s.push(g),i+=circleArea(g.circle.radius,g.width),u=f)}}else{var A=r[0];for(o=1;o<r.length;++o)r[o].radius<A.radius&&(A=r[o]);var b=!1;for(o=0;o<r.length;++o)if(distance(r[o],A)>Math.abs(A.radius-r[o].radius)){b=!0;break}b?i=a=0:(i=A.radius*A.radius*Math.PI,s.push({circle:A,p1:{x:A.x,y:A.y+A.radius},p2:{x:A.x-SMALL$1,y:A.y+A.radius},width:A.radius*2}))}return a/=2,e&&(e.area=i+a,e.arcArea=i,e.polygonArea=a,e.arcs=s,e.innerPoints=n,e.intersectionPoints=t),i+a}function containedInCircles(r,e){for(var t=0;t<e.length;++t)if(distance(r,e[t])>e[t].radius+SMALL$1)return!1;return!0}function getIntersectionPoints(r){for(var e=[],t=0;t<r.length;++t)for(var n=t+1;n<r.length;++n)for(var i=circleCircleIntersection(r[t],r[n]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[t,n],e.push(o)}return e}function circleArea(r,e){return r*r*Math.acos(1-e/r)-(r-e)*Math.sqrt(e*(2*r-e))}function distance(r,e){return Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y))}function circleOverlap(r,e,t){if(t>=r+e)return 0;if(t<=Math.abs(r-e))return Math.PI*Math.min(r,e)*Math.min(r,e);var n=r-(t*t-e*e+r*r)/(2*t),i=e-(t*t-r*r+e*e)/(2*t);return circleArea(r,n)+circleArea(e,i)}function circleCircleIntersection(r,e){var t=distance(r,e),n=r.radius,i=e.radius;if(t>=n+i||t<=Math.abs(n-i))return[];var a=(n*n-i*i+t*t)/(2*t),o=Math.sqrt(n*n-a*a),s=r.x+a*(e.x-r.x)/t,l=r.y+a*(e.y-r.y)/t,c=-(e.y-r.y)*(o/t),u=-(e.x-r.x)*(o/t);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function getCenter(r){for(var e={x:0,y:0},t=0;t<r.length;++t)e.x+=r[t].x,e.y+=r[t].y;return e.x/=r.length,e.y/=r.length,e}function circleMargin(r,e,t){var n=e[0].radius-distance(e[0],r),i,a;for(i=1;i<e.length;++i)a=e[i].radius-distance(e[i],r),a<=n&&(n=a);for(i=0;i<t.length;++i)a=distance(t[i],r)-t[i].radius,a<=n&&(n=a);return n}function computeTextCentre(r,e){var t=[],n;for(n=0;n<r.length;++n){var i=r[n];t.push({x:i.x,y:i.y}),t.push({x:i.x+i.radius/2,y:i.y}),t.push({x:i.x-i.radius/2,y:i.y}),t.push({x:i.x,y:i.y+i.radius/2}),t.push({x:i.x,y:i.y-i.radius/2})}var a=t[0],o=circleMargin(t[0],r,e);for(n=1;n<t.length;++n){var s=circleMargin(t[n],r,e);s>=o&&(a=t[n],o=s)}var l=nelderMead(function(d){return-1*circleMargin({x:d[0],y:d[1]},r,e)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(n=0;n<r.length;++n)if(distance(c,r[n])>r[n].radius){u=!1;break}for(n=0;n<e.length;++n)if(distance(c,e[n])<e[n].radius){u=!1;break}if(!u)if(r.length==1)c={x:r[0].x,y:r[0].y};else{var f={};intersectionArea(r,f),f.arcs.length===0?c={x:0,y:-1e3,disjoint:!0}:f.arcs.length==1?c={x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:e.length?c=computeTextCentre(r,[]):c=getCenter(f.arcs.map(function(d){return d.p1}))}return c}function getOverlappingCircles(r){var e={},t=[];for(var n in r)t.push(n),e[n]=[];for(var i=0;i<t.length;i++)for(var a=r[t[i]],o=i+1;o<t.length;++o){var s=r[t[o]],l=distance(a,s);l+s.radius<=a.radius+1e-10?e[t[o]].push(t[i]):l+a.radius<=s.radius+1e-10&&e[t[i]].push(t[o])}return e}function computeTextCentres(r,e){for(var t={},n=getOverlappingCircles(r),i=0;i<e.length;++i){for(var a=e[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var c=n[a[l]],u=0;u<c.length;++u)s[c[u]]=!0}var f=[],d=[];for(var g in r)g in o?f.push(r[g]):g in s||d.push(r[g]);var p=computeTextCentre(f,d);t[a]=p,p.disjoint&&e[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return t}function circlePath(r,e,t){var n=[],i=r-t,a=e;return n.push("M",i,a),n.push("A",t,t,0,1,0,i+2*t,a),n.push("A",t,t,0,1,0,i,a),n.join(" ")}function intersectionAreaPath(r){var e={};intersectionArea(r,e);var t=e.arcs;if(t.length===0)return"M 0 0";if(t.length==1){var n=t[0].circle;return circlePath(n.x,n.y,n.radius)}else{for(var i=[`
M`,t[0].p2.x,t[0].p2.y],a=0;a<t.length;++a){var o=t[a],s=o.circle.radius,l=o.width>s;i.push(`
A`,s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}}function venn(r,e){e=e||{},e.maxIterations=e.maxIterations||500;var t=e.initialLayout||bestInitialLayout,n=e.lossFunction||lossFunction;r=addMissingAreas(r);var i=t(r,e),a=[],o=[],s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));for(var l=nelderMead(function(f){for(var d={},g=0;g<o.length;++g){var p=o[g];d[p]={x:f[2*g],y:f[2*g+1],radius:i[p].radius}}return n(d,r)},a,e),c=l.x,u=0;u<o.length;++u)s=o[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}var SMALL=1e-10;function distanceFromIntersectArea(r,e,t){return Math.min(r,e)*Math.min(r,e)*Math.PI<=t+SMALL?Math.abs(r-e):bisect(function(n){return circleOverlap(r,e,n)-t},0,r+e)}function addMissingAreas(r){r=r.slice();var e=[],t={},n,i,a,o;for(n=0;n<r.length;++n){var s=r[n];s.sets.length==1?e.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],t[[a,o]]=!0,t[[o,a]]=!0)}for(e.sort(function(l,c){return l>c?1:-1}),n=0;n<e.length;++n)for(a=e[n],i=n+1;i<e.length;++i)o=e[i],[a,o]in t||r.push({sets:[a,o],size:0});return r}function getDistanceMatrices(r,e,t){var n=zerosM(e.length,e.length),i=zerosM(e.length,e.length);return r.filter(function(a){return a.sets.length==2}).map(function(a){var o=t[a.sets[0]],s=t[a.sets[1]],l=Math.sqrt(e[o].size/Math.PI),c=Math.sqrt(e[s].size/Math.PI),u=distanceFromIntersectArea(l,c,a.size);n[o][s]=n[s][o]=u;var f=0;a.size+1e-10>=Math.min(e[o].size,e[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:n,constraints:i}}function constrainedMDSGradient(r,e,t,n){var i=0,a;for(a=0;a<e.length;++a)e[a]=0;for(a=0;a<t.length;++a)for(var o=r[2*a],s=r[2*a+1],l=a+1;l<t.length;++l){var c=r[2*l],u=r[2*l+1],f=t[a][l],d=n[a][l],g=(c-o)*(c-o)+(u-s)*(u-s),p=Math.sqrt(g),v=g-f*f;d>0&&p<=f||d<0&&p>=f||(i+=2*v*v,e[2*a]+=4*v*(o-c),e[2*a+1]+=4*v*(s-u),e[2*l]+=4*v*(c-o),e[2*l+1]+=4*v*(u-s))}return i}function bestInitialLayout(r,e){var t=greedyLayout(r,e),n=e.lossFunction||lossFunction;if(r.length>=8){var i=constrainedMDSLayout(r,e),a=n(i,r),o=n(t,r);a+1e-8<o&&(t=i)}return t}function constrainedMDSLayout(r,e){e=e||{};var t=e.restarts||10,n=[],i={},a;for(a=0;a<r.length;++a){var o=r[a];o.sets.length==1&&(i[o.sets[0]]=n.length,n.push(o))}var s=getDistanceMatrices(r,n,i),l=s.distances,c=s.constraints,u=norm2(l.map(norm2))/l.length;l=l.map(function(x){return x.map(function(_){return _/u})});var f=function(x,_){return constrainedMDSGradient(x,_,l,c)},d,g;for(a=0;a<t;++a){var p=zeros(l.length*2).map(Math.random);g=conjugateGradient(f,p,e),(!d||g.fx<d.fx)&&(d=g)}var v=d.x,y={};for(a=0;a<n.length;++a){var m=n[a];y[m.sets[0]]={x:v[2*a]*u,y:v[2*a+1]*u,radius:Math.sqrt(m.size/Math.PI)}}if(e.history)for(a=0;a<e.history.length;++a)scale(e.history[a].x,u);return y}function greedyLayout(r,e){for(var t=e&&e.lossFunction?e.lossFunction:lossFunction,n={},i={},a,o=0;o<r.length;++o){var s=r[o];s.sets.length==1&&(a=s.sets[0],n[a]={x:1e10,y:1e10,rowid:Object.keys(n).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[a]=[])}r=r.filter(function(L){return L.sets.length==2});for(var o=0;o<r.length;++o){var l=r[o],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],f=l.sets[1];l.size+SMALL>=Math.min(n[u].size,n[f].size)&&(c=0),i[u].push({set:f,size:l.size,weight:c}),i[f].push({set:u,size:l.size,weight:c})}var d=[];for(a in i)if(i.hasOwnProperty(a)){for(var g=0,o=0;o<i[a].length;++o)g+=i[a][o].size*i[a][o].weight;d.push({set:a,size:g})}function p(L,O){return O.size-L.size}d.sort(p);var v={};function y(L){return L.set in v}function m(L,O){n[O].x=L.x,n[O].y=L.y,v[O]=!0}m({x:0,y:0},d[0].set);for(var o=1;o<d.length;++o){var x=d[o].set,_=i[x].filter(y);if(a=n[x],_.sort(p),_.length===0)throw"ERROR: missing pairwise overlap information";for(var S=[],A=0;A<_.length;++A){var b=n[_[A].set],C=distanceFromIntersectArea(a.radius,b.radius,_[A].size);S.push({x:b.x+C,y:b.y}),S.push({x:b.x-C,y:b.y}),S.push({y:b.y+C,x:b.x}),S.push({y:b.y-C,x:b.x});for(var E=A+1;E<_.length;++E)for(var T=n[_[E].set],I=distanceFromIntersectArea(a.radius,T.radius,_[E].size),w=circleCircleIntersection({x:b.x,y:b.y,radius:C},{x:T.x,y:T.y,radius:I}),M=0;M<w.length;++M)S.push(w[M])}for(var $=1e50,P=S[0],A=0;A<S.length;++A){n[x].x=S[A].x,n[x].y=S[A].y;var R=t(n,r);R<$&&($=R,P=S[A])}m(P,x)}return n}function lossFunction(r,e){var t=0;function n(u){return u.map(function(f){return r[f]})}for(var i=0;i<e.length;++i){var a=e[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var s=r[a.sets[0]],l=r[a.sets[1]];o=circleOverlap(s.radius,l.radius,distance(s,l))}else o=intersectionArea(n(a.sets));var c=a.hasOwnProperty("weight")?a.weight:1;t+=c*(o-a.size)*(o-a.size)}}return t}function getBoundingBox(r){var e=function(t){var n=Math.max.apply(null,r.map(function(a){return a[t]+a.radius})),i=Math.min.apply(null,r.map(function(a){return a[t]-a.radius}));return{max:n,min:i}};return{xRange:e("x"),yRange:e("y")}}function scaleSolution(r,e,t,n){var i=[],a=[];for(var o in r)r.hasOwnProperty(o)&&(a.push(o),i.push(r[o]));e-=2*n,t-=2*n;var s=getBoundingBox(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),r;for(var u=e/(l.max-l.min),f=t/(c.max-c.min),d=Math.min(f,u),g=(e-(l.max-l.min)*d)/2,p=(t-(c.max-c.min)*d)/2,v={},y=0;y<i.length;++y){var m=i[y];v[a[y]]={radius:d*m.radius,x:n+g+(m.x-l.min)*d,y:n+p+(m.y-c.min)*d}}return v}var getColorMap=memoize(function(r,e,t,n){var i=new Map,a=r.length;return e.forEach(function(o,s){if(o[n].length===1)i.set(o[ID_FIELD],r[(s+a)%a]);else{var l=o[n].map(function(c){return i.get(c)});i.set(o[ID_FIELD],l.slice(1).reduce(function(c,u){return blend(c,u,t)},l[0]))}}),i},function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return JSON.stringify(r)});function layoutVennData(r,e,t,n){n===void 0&&(n=0);var i=r.data,a=r.setsField,o=r.sizeField;if(i.length===0)return log(LEVEL.WARN,!1,"warn: %s","数据不能为空"),[];var s=i.map(function(f){var d;return __assign$1(__assign$1({},f),(d={sets:f[a]||[],size:f[o]},d[PATH_FIELD]="",d[ID_FIELD]="",d))});s.sort(function(f,d){return f.sets.length-d.sets.length});var l=venn(s),c=scaleSolution(l,e,t,n),u=computeTextCentres(c,s);return s.forEach(function(f){var d=f.sets,g=d.join(",");f[ID_FIELD]=g;var p=d.map(function(m){return c[m]}),v=intersectionAreaPath(p);/[zZ]$/.test(v)||(v+=" Z"),f[PATH_FIELD]=v;var y=u[g]||{x:0,y:0};mix(f,y)}),s}function islegalSets(r,e){for(var t=0;t<e.length;t++)if(!r.includes(e[t]))return!1;return!0}var LEGEND_SPACE=40;function colorMap(r,e,t){var n=r.chart,i=r.options,a=i.blendMode,o=i.setsField,s=n.getTheme(),l=s.colors10,c=s.colors20,u=t;isArray$3(u)||(u=e.filter(function(d){return d[o].length===1}).length<=10?l:c);var f=getColorMap(u,e,a,o);return function(d){return f.get(d)||u[0]}}function transformColor(r,e){var t=r.options,n=t.color;if(typeof n!="function"){var i=typeof n=="string"?[n]:n,a=colorMap(r,e,i);return function(o){return a(o[ID_FIELD])}}return n}function padding(r){var e=r.chart,t=r.options,n=t.legend,i=t.appendPadding,a=t.padding,o=normalPadding(i);return n!==!1&&(o=getAdjustAppendPadding(i,get(n,"position"),LEGEND_SPACE)),e.appendPadding=resolveAllPadding([o,a]),r}function data$1(r){var e=r.options,t=e.data;t||(log(LEVEL.WARN,!1,"warn: %s","数据不能为空"),t=[]);var n=t.filter(function(a){return a.sets.length===1}).map(function(a){return a.sets[0]}),i=t.filter(function(a){var o=a.sets;return islegalSets(n,o)});return isEqual$1(i,t)||log(LEVEL.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),deepMix({},r,{options:{data:i}})}function geometry$2(r){var e=r.chart,t=r.options,n=t.pointStyle,i=t.setsField,a=t.sizeField,o=normalPadding(e.appendPadding),s=o[0],l=o[1],c=o[2],u=o[3],f={offsetX:u,offsetY:s},d=e.viewBBox,g=d.width,p=d.height,v=layoutVennData(t,Math.max(g-(l+u),0),Math.max(p-(s+c),0),0);e.data(v);var y=schema(deepAssign({},r,{options:{xField:"x",yField:"y",sizeField:a,seriesField:ID_FIELD,rawFields:[i,a],schema:{shape:"venn",style:n}}})).ext,m=y.geometry;m.customInfo(f);var x=transformColor(r,v);return typeof x=="function"&&m.color(ID_FIELD,function(_){var S=v.find(function(b){return b[ID_FIELD]===_}),A=colorMap(r,v)(_);return x(S,A)}),r}function label$1(r){var e=r.chart,t=r.options,n=t.label,i=normalPadding(e.appendPadding),a=i[0],o=i[3],s={offsetX:o,offsetY:a},l=findGeometry(e,"schema");if(!n)l.label(!1);else{var c=n.callback,u=__rest(n,["callback"]);l.label({fields:["id"],callback:c,cfg:deepMix({},transformLabel(u),{type:"venn",customLabelInfo:s})})}return r}function legend$3(r){var e=r.chart,t=r.options,n=t.legend,i=t.sizeField;return e.legend(ID_FIELD,n),e.legend(i,!1),r}function axis$2(r){var e=r.chart;return e.axis(!1),r}function vennInteraction(r){var e=r.options,t=r.chart,n=e.interactions;if(n){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};interaction$8(deepAssign({},r,{options:{interactions:n.map(function(a){return __assign$1(__assign$1({},a),{type:i[a.type]||a.type})})}}))}return t.removeInteraction("legend-active"),t.removeInteraction("legend-highlight"),r}function adaptor$3(r){return flow(padding,theme$2,data$1,geometry$2,label$1,scale$2({}),legend$3,axis$2,tooltip$9,vennInteraction,animation$5)(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="venn",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$4},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$3},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(Plot);var X_FIELD="x",VIOLIN_Y_FIELD="violinY",VIOLIN_SIZE_FIELD="violinSize",MIN_MAX_FIELD="minMax",QUANTILE_FIELD="quantile",MEDIAN_FIELD="median",VIOLIN_VIEW_ID="violin_view",MIN_MAX_VIEW_ID="min_max_view",QUANTILE_VIEW_ID="quantile_view",MEDIAN_VIEW_ID="median_view",DEFAULT_OPTIONS$3=deepAssign({},Plot.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),src={exports:{}},helper={exports:{}};(function(r){var e=r.exports;r.exports.isNumber=function(t){return typeof t=="number"},r.exports.findMin=function(t){if(t.length===0)return 1/0;for(var n=t[0],i=1;i<t.length;i++)n=Math.min(n,t[i]);return n},r.exports.findMax=function(t){if(t.length===0)return-1/0;for(var n=t[0],i=1;i<t.length;i++)n=Math.max(n,t[i]);return n},r.exports.findMinMulti=function(t){for(var n=e.findMin(t[0]),i=1;i<t.length;i++)n=Math.min(n,e.findMin(t[i]));return n},r.exports.findMaxMulti=function(t){for(var n=e.findMax(t[0]),i=1;i<t.length;i++)n=Math.max(n,e.findMax(t[i]));return n},r.exports.inside=function(t,n,i){return t<=i&&i<=n}})(helper);var helperExports=helper.exports;(function(r){var e=50,t=2,n=Math.log(2),i=r.exports,a=helperExports;function o(l){return 1-Math.abs(l)}r.exports.getUnifiedMinMax=function(l,c){return i.getUnifiedMinMaxMulti([l],c)},r.exports.getUnifiedMinMaxMulti=function(l,c){c=c||{};var u=!1,f=!1,d=a.isNumber(c.width)?c.width:t,g=a.isNumber(c.size)?c.size:e,p=a.isNumber(c.min)?c.min:(u=!0,a.findMinMulti(l)),v=a.isNumber(c.max)?c.max:(f=!0,a.findMaxMulti(l)),y=v-p,m=y/(g-1);return u&&(p=p-2*d*m),f&&(v=v+2*d*m),{min:p,max:v}},r.exports.create=function(l,c){if(c=c||{},!l||l.length===0)return[];var u=a.isNumber(c.size)?c.size:e,f=a.isNumber(c.width)?c.width:t,d=i.getUnifiedMinMax(l,{size:u,width:f,min:c.min,max:c.max}),g=d.min,p=d.max,v=p-g,y=v/(u-1);if(v===0)return[{x:g,y:1}];for(var m=[],x=0;x<u;x++)m.push({x:g+x*y,y:0});var _=function(w){return Math.floor((w-g)/y)},S=s(o,f),A=S[f],b=S[f-1]-S[f-2],C=0;l.forEach(function(w){var M=_(w);if(!(M+f<0||M-f>=m.length)){var $=Math.max(M-f,0),P=M,R=Math.min(M+f,m.length-1),L=$-(M-f),O=M+f-R,k=S[-f-1+L]||0,B=S[-f-1+O]||0,N=A/(A-k-B);L>0&&(C+=N*(L-1)*b);var F=Math.max(0,M-f+1);a.inside(0,m.length-1,F)&&(m[F].y+=N*1*b),a.inside(0,m.length-1,P+1)&&(m[P+1].y-=N*2*b),a.inside(0,m.length-1,R+1)&&(m[R+1].y+=N*1*b)}});var E=C,T=0,I=0;return m.forEach(function(w){T+=w.y,E+=T,w.y=E,I+=E}),I>0&&m.forEach(function(w){w.y/=I}),m};function s(l,c){for(var u={},f=0,d=-c;d<=c;d++)f+=l(d/c),u[d]=f;return u}r.exports.getExpectedValueFromPdf=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){c+=u.x*u.y}),c}},r.exports.getXWithLeftTailArea=function(l,c){if(!(!l||l.length===0)){for(var u=0,f=0,d=0;d<l.length&&(f=d,u+=l[d].y,!(u>=c));d++);return l[f].x}},r.exports.getPerplexity=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){var f=Math.log(u.y);isFinite(f)&&(c+=u.y*f)}),c=-c/n,Math.pow(2,c)}}})(src);var srcExports=src.exports;const pdf=getDefaultExportFromCjs(srcExports);function quantileSorted(r,e){var t=r.length*e;if(r.length===0)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return e===1?r[r.length-1]:e===0?r[0]:t%1!==0?r[Math.ceil(t)-1]:r.length%2===0?(r[t-1]+r[t])/2:r[t]}function swap(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function quickselect(r,e,t,n){for(t=t||0,n=n||r.length-1;n>t;){if(n-t>600){var i=n-t+1,a=e-t+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1);var c=Math.max(t,Math.floor(e-a*s/i+l)),u=Math.min(n,Math.floor(e+(i-a)*s/i+l));quickselect(r,e,c,u)}var f=r[e],d=t,g=n;for(swap(r,t,e),r[n]>f&&swap(r,t,n);d<g;){for(swap(r,d,g),d++,g--;r[d]<f;)d++;for(;r[g]>f;)g--}r[t]===f?swap(r,t,g):(g++,swap(r,g,n)),g<=e&&(t=g+1),e<=g&&(n=g-1)}}function quantile(r,e){var t=r.slice();if(Array.isArray(e)){multiQuantileSelect(t,e);for(var n=[],i=0;i<e.length;i++)n[i]=quantileSorted(t,e[i]);return n}else{var a=quantileIndex(t.length,e);return quantileSelect(t,a,0,t.length-1),quantileSorted(t,e)}}function quantileSelect(r,e,t,n){e%1===0?quickselect(r,e,t,n):(e=Math.floor(e),quickselect(r,e,t,n),quickselect(r,e+1,e+1,n))}function multiQuantileSelect(r,e){for(var t=[0],n=0;n<e.length;n++)t.push(quantileIndex(r.length,e[n]));t.push(r.length-1),t.sort(compare);for(var i=[0,t.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);quantileSelect(r,t[s],Math.floor(t[o]),Math.ceil(t[a])),i.push(o,s,s,a)}}}function compare(r,e){return r-e}function quantileIndex(r,e){var t=r*e;return e===1?r-1:e===0?0:t%1!==0?Math.ceil(t)-1:r%2===0?t-.5:t}var toBoxValue=function(r){return{low:min$2(r),high:max$2(r),q1:quantile(r,.25),q3:quantile(r,.75),median:quantile(r,[.5]),minMax:[min$2(r),max$2(r)],quantile:[quantile(r,.25),quantile(r,.75)]}},toViolinValue=function(r,e){var t=pdf.create(r,e);return{violinSize:t.map(function(n){return n.y}),violinY:t.map(function(n){return n.x})}},transformViolinData=function(r){var e=r.xField,t=r.yField,n=r.seriesField,i=r.data,a=r.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!n){var s=groupBy(i,e);return Object.keys(s).map(function(u){var f=s[u],d=f.map(function(g){return g[t]});return __assign$1(__assign$1({x:u},toViolinValue(d,o)),toBoxValue(d))})}var l=[],c=groupBy(i,n);return Object.keys(c).forEach(function(u){var f=groupBy(c[u],e);return Object.keys(f).forEach(function(d){var g,p=f[d],v=p.map(function(y){return y[t]});l.push(__assign$1(__assign$1((g={x:d},g[n]=u,g),toViolinValue(v,o)),toBoxValue(v)))})}),l},TOOLTIP_FIELDS=["low","high","q1","q3","median"],adjustCfg=[{type:"dodge",marginRatio:1/32}];function data(r){var e=r.chart,t=r.options;return e.data(transformViolinData(t)),r}function violinView(r){var e=r.chart,t=r.options,n=t.seriesField,i=t.color,a=t.shape,o=a===void 0?"violin":a,s=t.violinStyle,l=t.tooltip,c=t.state,u=e.createView({id:VIOLIN_VIEW_ID});return violin({chart:u,options:{xField:X_FIELD,yField:VIOLIN_Y_FIELD,seriesField:n||X_FIELD,sizeField:VIOLIN_SIZE_FIELD,tooltip:__assign$1({fields:TOOLTIP_FIELDS},l),violin:{style:s,color:i,shape:o},state:c}}),u.geometries[0].adjust(adjustCfg),r}function boxView(r){var e=r.chart,t=r.options,n=t.seriesField,i=t.color,a=t.tooltip,o=t.box;if(o===!1)return r;var s=e.createView({id:MIN_MAX_VIEW_ID});interval({chart:s,options:{xField:X_FIELD,yField:MIN_MAX_FIELD,seriesField:n||X_FIELD,tooltip:__assign$1({fields:TOOLTIP_FIELDS},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(adjustCfg);var l=e.createView({id:QUANTILE_VIEW_ID});interval({chart:l,options:{xField:X_FIELD,yField:QUANTILE_FIELD,seriesField:n||X_FIELD,tooltip:__assign$1({fields:TOOLTIP_FIELDS},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(adjustCfg);var c=e.createView({id:MEDIAN_VIEW_ID});return point({chart:c,options:{xField:X_FIELD,yField:MEDIAN_FIELD,seriesField:n||X_FIELD,tooltip:__assign$1({fields:TOOLTIP_FIELDS},a),state:typeof o=="object"?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(adjustCfg),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),r}function meta$2(r){var e,t=r.chart,n=r.options,i=n.meta,a=n.xAxis,o=n.yAxis,s={},l=deepAssign(s,i,(e={},e[X_FIELD]=__assign$1(__assign$1({sync:!0},pick(a,AXIS_META_CONFIG_KEYS)),{type:"cat"}),e[VIOLIN_Y_FIELD]=__assign$1({sync:!0},pick(o,AXIS_META_CONFIG_KEYS)),e[MIN_MAX_FIELD]=__assign$1({sync:VIOLIN_Y_FIELD},pick(o,AXIS_META_CONFIG_KEYS)),e[QUANTILE_FIELD]=__assign$1({sync:VIOLIN_Y_FIELD},pick(o,AXIS_META_CONFIG_KEYS)),e[MEDIAN_FIELD]=__assign$1({sync:VIOLIN_Y_FIELD},pick(o,AXIS_META_CONFIG_KEYS)),e));return t.scale(l),r}function axis$1(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=findViewById(e,VIOLIN_VIEW_ID);return n===!1?a.axis(X_FIELD,!1):a.axis(X_FIELD,n),i===!1?a.axis(VIOLIN_Y_FIELD,!1):a.axis(VIOLIN_Y_FIELD,i),e.axis(!1),r}function legend$2(r){var e=r.chart,t=r.options,n=t.legend,i=t.seriesField,a=t.shape;if(n===!1)e.legend(!1);else{var o=i||X_FIELD,s=omit$1(n,["selected"]);(!a||!a.startsWith("hollow"))&&(get(s,["marker","style","lineWidth"])||set(s,["marker","style","lineWidth"],0)),e.legend(o,s),get(n,"selected")&&each$1(e.views,function(l){return l.legend(o,n)})}return r}function annotation(r){var e=r.chart,t=findViewById(e,VIOLIN_VIEW_ID);return annotation$2()(__assign$1(__assign$1({},r),{chart:t})),r}function animation(r){var e=r.chart,t=r.options,n=t.animation;return each$1(e.views,function(i){addViewAnimation(i,n)}),r}function adaptor$2(r){return flow(theme$2,data,violinView,boxView,meta$2,tooltip$9,axis$1,legend$2,interaction$8,annotation,animation)(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="violin",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$3},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(transformViolinData(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adaptor$2},e})(Plot);var Y_FIELD="$$yField$$",DIFF_FIELD="$$diffField$$",ABSOLUTE_FIELD="$$absoluteField$$",IS_TOTAL="$$isTotal$$",DEFAULT_OPTIONS$2={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function getRectPath(r){for(var e=[],t=0;t<r.length;t++){var n=r[t];if(n){var i=t===0?"M":"L";e.push([i,n.x,n.y])}}var a=r[0];return e.push(["L",a.x,a.y]),e.push(["z"]),e}function getFillAttrs(r){return deepAssign({},r.defaultStyle,r.style,{fill:r.color})}registerShape("interval","waterfall",{draw:function(r,e){var t=r.customInfo,n=r.points,i=r.nextPoints,a=e.addGroup(),o=this.parsePath(getRectPath(n)),s=getFillAttrs(r);a.addShape("path",{attrs:__assign$1(__assign$1({},s),{path:o})});var l=get(t,"leaderLine");if(l&&i){var c=[["M",n[2].x,n[2].y],["L",i[0].x,i[0].y]];n[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),a.addShape("path",{attrs:__assign$1({path:c},l.style||{})})}return a}});function processData(r,e,t,n,i){var a,o=[];if(reduce(r,function(l,c){var u;log(LEVEL.WARN,isNumber$1(c[t]),"".concat(c[t]," is not a valid number"));var f=isUndefined(c[t])?null:c[t];return o.push(__assign$1(__assign$1({},c),(u={},u[n]=[l,l+f],u))),l+f},0),o.length&&i){var s=get(o,[[r.length-1],n,[1]]);o.push((a={},a[e]=i.label,a[t]=s,a[n]=[0,s],a))}return o}function transformData(r,e,t,n){var i=processData(r,e,t,Y_FIELD,n);return i.map(function(a,o){var s;return isObject(a)?__assign$1(__assign$1({},a),(s={},s[ABSOLUTE_FIELD]=a[Y_FIELD][1],s[DIFF_FIELD]=a[Y_FIELD][1]-a[Y_FIELD][0],s[IS_TOTAL]=o===r.length,s)):a})}function defaultOptions(r){var e=r.options,t=e.locale,n=e.total,i=getLocale(t).get(["waterfall","total"]);return n&&typeof n.label!="string"&&i&&(r.options.total.label=i),r}function geometry$1(r){var e=r.chart,t=r.options,n=t.data,i=t.xField,a=t.yField,o=t.total,s=t.leaderLine,l=t.columnWidthRatio,c=t.waterfallStyle,u=t.risingFill,f=t.fallingFill,d=t.color,g=t.shape,p=t.customInfo;e.data(transformData(n,i,a,o));var v=d||function(_){return get(_,[IS_TOTAL])?get(o,["style","fill"],""):get(_,[Y_FIELD,1])-get(_,[Y_FIELD,0])>0?u:f},y=deepAssign({},r,{options:{xField:i,yField:Y_FIELD,seriesField:i,rawFields:[a,DIFF_FIELD,IS_TOTAL,Y_FIELD],widthRatio:l,interval:{style:c,shape:g||"waterfall",color:v}}}),m=interval(y).ext,x=m.geometry;return x.customInfo(__assign$1(__assign$1({},p),{leaderLine:s})),r}function meta$1(r){var e,t,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.meta,c=deepAssign({},{alias:s},get(l,s));return flow(scale$2((e={},e[o]=i,e[s]=a,e[Y_FIELD]=a,e),deepAssign({},l,(t={},t[Y_FIELD]=c,t[DIFF_FIELD]=c,t[ABSOLUTE_FIELD]=c,t))))(r)}function axis(r){var e=r.chart,t=r.options,n=t.xAxis,i=t.yAxis,a=t.xField,o=t.yField;return n===!1?e.axis(a,!1):e.axis(a,n),i===!1?(e.axis(o,!1),e.axis(Y_FIELD,!1)):(e.axis(o,i),e.axis(Y_FIELD,i)),r}function legend$1(r){var e=r.chart,t=r.options,n=t.legend,i=t.total,a=t.risingFill,o=t.fallingFill,s=t.locale,l=getLocale(s);if(n===!1)e.legend(!1);else{var c=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&c.push({name:i.label||"",value:"total",marker:{symbol:"square",style:deepAssign({},{r:5},get(i,"style"))}}),e.legend(deepAssign({},{custom:!0,position:"top",items:c},n)),e.removeInteraction("legend-filter")}return r}function label(r){var e=r.chart,t=r.options,n=t.label,i=t.labelMode,a=t.xField,o=findGeometry(e,"interval");if(!n)o.label(!1);else{var s=n.callback,l=__rest(n,["callback"]);o.label({fields:i==="absolute"?[ABSOLUTE_FIELD,a]:[DIFF_FIELD,a],callback:s,cfg:transformLabel(l)})}return r}function tooltip(r){var e=r.chart,t=r.options,n=t.tooltip,i=t.xField,a=t.yField;if(n!==!1){e.tooltip(__assign$1({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},n));var o=e.geometries[0];n!=null&&n.formatter?o.tooltip("".concat(i,"*").concat(a),n.formatter):o.tooltip(a)}else e.tooltip(!1);return r}function adaptor$1(r){return flow(defaultOptions,theme$2,geometry$1,meta$1,axis,legend$1,tooltip,label,state,interaction$8,animation$5,annotation$2())(r)}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="waterfall",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$2},e.prototype.changeData=function(t){var n=this.options,i=n.xField,a=n.yField,o=n.total;this.updateOption({data:t}),this.chart.changeData(transformData(t,i,a,o))},e.prototype.getSchemaAdaptor=function(){return adaptor$1},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(Plot);var WORD_CLOUD_COLOR_FIELD="color",DEFAULT_OPTIONS$1=deepAssign({},Plot.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",WORD_CLOUD_COLOR_FIELD],formatter:function(r){return{name:r.text,value:r.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),DEFAULT_OPTIONS={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function wordCloud(r,e){return e=mix({},DEFAULT_OPTIONS,e),transform$1(r,e)}function transform$1(r,e){var t=tagCloud();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(l){isNil(e[l])||t[l](e[l])}),t.words(r),e.imageMask&&t.createMask(e.imageMask);var n=t.start(),i=n._tags;i.forEach(function(l){l.x+=e.size[0]/2,l.y+=e.size[1]/2});var a=e.size,o=a[0],s=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:s,opacity:0}),i}var cloudRadians=Math.PI/180,cw=64,ch=2048;function cloudText(r){return r.text}function cloudFont(){return"serif"}function cloudFontNormal(){return"normal"}function cloudFontSize(r){return r.value}function cloudRotate(){return~~(Math.random()*2)*90}function cloudPadding(){return 1}function cloudSprite(r,e,t,n){if(!e.sprite){var i=r.context,a=r.ratio;i.clearRect(0,0,(cw<<5)/a,ch/a);var o=0,s=0,l=0,c=t.length;for(--n;++n<c;){e=t[n],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var u=i.measureText(e.text+"m").width*a,f=e.size<<1;if(e.rotate){var d=Math.sin(e.rotate*cloudRadians),g=Math.cos(e.rotate*cloudRadians),p=u*g,v=u*d,y=f*g,m=f*d;u=Math.max(Math.abs(p+m),Math.abs(p-m))+31>>5<<5,f=~~Math.max(Math.abs(v+y),Math.abs(v-y))}else u=u+31>>5<<5;if(f>l&&(l=f),o+u>=cw<<5&&(o=0,s+=l,l=0),s+f>=ch)break;i.translate((o+(u>>1))/a,(s+(f>>1))/a),e.rotate&&i.rotate(e.rotate*cloudRadians),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=u,e.height=f,e.xoff=o,e.yoff=s,e.x1=u>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=u}for(var x=i.getImageData(0,0,(cw<<5)/a,ch/a).data,_=[];--n>=0;)if(e=t[n],!!e.hasText){for(var u=e.width,S=u>>5,f=e.y1-e.y0,A=0;A<f*S;A++)_[A]=0;if(o=e.xoff,o==null)return;s=e.yoff;for(var b=0,C=-1,E=0;E<f;E++){for(var A=0;A<u;A++){var T=S*E+(A>>5),I=x[(s+E)*(cw<<5)+(o+A)<<2]?1<<31-A%32:0;_[T]|=I,b|=I}b?C=E:(e.y0++,f--,E--,s++)}e.y1=e.y0+C,e.sprite=_.slice(0,(e.y1-e.y0)*S)}}}function cloudCollide(r,e,t){t>>=5;for(var n=r.sprite,i=r.width>>5,a=r.x-(i<<4),o=a&127,s=32-o,l=r.y1-r.y0,c=(r.y+r.y0)*t+(a>>5),u,f=0;f<l;f++){u=0;for(var d=0;d<=i;d++)if((u<<s|(d<i?(u=n[f*i+d])>>>o:0))&e[c+d])return!0;c+=t}return!1}function cloudBounds(r,e){var t=r[0],n=r[1];e.x+e.x0<t.x&&(t.x=e.x+e.x0),e.y+e.y0<t.y&&(t.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function collideRects(r,e){return r.x+r.x1>e[0].x&&r.x+r.x0<e[1].x&&r.y+r.y1>e[0].y&&r.y+r.y0<e[1].y}function archimedeanSpiral(r){var e=r[0]/r[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function rectangularSpiral(r){var e=4,t=e*r[0]/r[1],n=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:n+=t;break;case 1:i+=e;break;case 2:n-=t;break;default:i-=e;break}return[n,i]}}function zeroArray(r){for(var e=[],t=-1;++t<r;)e[t]=0;return e}function cloudCanvas(){return document.createElement("canvas")}function functor(r){return isFunction(r)?r:function(){return r}}var spirals={archimedean:archimedeanSpiral,rectangular:rectangularSpiral};function tagCloud(){var r=[256,256],e=cloudFont,t=cloudFontSize,n=cloudFontNormal,i=cloudRotate,a=cloudPadding,o=archimedeanSpiral,s=Math.random,l=[],c=1/0,u=cloudText,f=cloudFontNormal,d=cloudCanvas,g={};g.start=function(){var y=r[0],m=r[1],x=p(d()),_=g.board?g.board:zeroArray((r[0]>>5)*r[1]),S=l.length,A=[],b=l.map(function(I,w,M){return I.text=u.call(this,I,w,M),I.font=e.call(this,I,w,M),I.style=f.call(this,I,w,M),I.weight=n.call(this,I,w,M),I.rotate=i.call(this,I,w,M),I.size=~~t.call(this,I,w,M),I.padding=a.call(this,I,w,M),I}).sort(function(I,w){return w.size-I.size}),C=-1,E=g.board?[{x:0,y:0},{x:y,y:m}]:null;T();function T(){for(var I=Date.now();Date.now()-I<c&&++C<S;){var w=b[C];w.x=y*(s()+.5)>>1,w.y=m*(s()+.5)>>1,cloudSprite(x,w,b,C),w.hasText&&v(_,w,E)&&(A.push(w),E?g.hasImage||cloudBounds(E,w):E=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=r[0]>>1,w.y-=r[1]>>1)}g._tags=A,g._bounds=E}return g};function p(y){y.width=y.height=1;var m=Math.sqrt(y.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);y.width=(cw<<5)/m,y.height=ch/m;var x=y.getContext("2d",{willReadFrequently:!0});return x.fillStyle=x.strokeStyle="red",x.textAlign="center",{context:x,ratio:m}}function v(y,m,x){for(var _=m.x,S=m.y,A=Math.sqrt(r[0]*r[0]+r[1]*r[1]),b=o(r),C=s()<.5?1:-1,E,T=-C,I,w;(E=b(T+=C))&&(I=~~E[0],w=~~E[1],!(Math.min(Math.abs(I),Math.abs(w))>=A));)if(m.x=_+I,m.y=S+w,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>r[0]||m.y+m.y1>r[1])&&(!x||!cloudCollide(m,y,r[0]))&&(!x||collideRects(m,x))){for(var M=m.sprite,$=m.width>>5,P=r[0]>>5,R=m.x-($<<4),L=R&127,O=32-L,k=m.y1-m.y0,B=void 0,N=(m.y+m.y0)*P+(R>>5),F=0;F<k;F++){B=0;for(var V=0;V<=$;V++)y[N+V]|=B<<O|(V<$?(B=M[F*$+V])>>>L:0);N+=P}return delete m.sprite,!0}return!1}return g.createMask=function(y){var m=document.createElement("canvas"),x=r[0],_=r[1];if(!(!x||!_)){var S=x>>5,A=zeroArray((x>>5)*_);m.width=x,m.height=_;var b=m.getContext("2d");b.drawImage(y,0,0,y.width,y.height,0,0,x,_);for(var C=b.getImageData(0,0,x,_).data,E=0;E<_;E++)for(var T=0;T<x;T++){var I=S*E+(T>>5),w=E*x+T<<2,M=C[w]>=250&&C[w+1]>=250&&C[w+2]>=250,$=M?1<<31-T%32:0;A[I]|=$}g.board=A,g.hasImage=!0}},g.timeInterval=function(y){c=y??1/0},g.words=function(y){l=y},g.size=function(y){r=[+y[0],+y[1]]},g.font=function(y){e=functor(y)},g.fontWeight=function(y){n=functor(y)},g.rotate=function(y){i=functor(y)},g.spiral=function(y){o=spirals[y]||y},g.fontSize=function(y){t=functor(y)},g.padding=function(y){a=functor(y)},g.random=function(y){s=functor(y)},g}function transform(r){var e=r.options,t=r.chart,n=t,i=n.width,a=n.height,o=n.padding,s=n.appendPadding,l=n.ele,c=e.data,u=e.imageMask,f=e.wordField,d=e.weightField,g=e.colorField,p=e.wordStyle,v=e.timeInterval,y=e.random,m=e.spiral,x=e.autoFit,_=x===void 0?!0:x,S=e.placementStrategy;if(!c||!c.length)return[];var A=p.fontFamily,b=p.fontWeight,C=p.padding,E=p.fontSize,T=getSingleKeyValues(c,d),I=[min(T),max(T)],w=c.map(function(P){return{text:P[f],value:P[d],color:P[g],datum:P}}),M={imageMask:u,font:A,fontSize:getFontSizeMapping(E,I),fontWeight:b,size:getSize({width:i,height:a,padding:o,appendPadding:s,autoFit:_,container:l}),padding:C,timeInterval:v,random:y,spiral:m,rotate:getRotate(e)};if(isFunction(S)){var $=w.map(function(P,R,L){return __assign$1(__assign$1(__assign$1({},P),{hasText:!!P.text,font:functor(M.font)(P,R,L),weight:functor(M.fontWeight)(P,R,L),rotate:functor(M.rotate)(P,R,L),size:functor(M.fontSize)(P,R,L),style:"normal"}),S.call(t,P,R,L))});return $.push({text:"",value:0,x:0,y:0,opacity:0}),$.push({text:"",value:0,x:M.size[0],y:M.size[1],opacity:0}),$}return wordCloud(w,M)}function getSize(r){var e=r.width,t=r.height,n=r.container,i=r.autoFit,a=r.padding,o=r.appendPadding;if(i){var s=getContainerSize(n);e=s.width,t=s.height}e=e||400,t=t||400;var l=resolvePadding({padding:a,appendPadding:o}),c=l[0],u=l[1],f=l[2],d=l[3],g=[e-(d+u),t-(c+f)];return g}function resolvePadding(r){var e=normalPadding(r.padding),t=normalPadding(r.appendPadding),n=e[0]+t[0],i=e[1]+t[1],a=e[2]+t[2],o=e[3]+t[3];return[n,i,a,o]}function processImageMask(r){return new Promise(function(e,t){if(r instanceof HTMLImageElement){e(r);return}if(isString(r)){var n=new Image;n.crossOrigin="anonymous",n.src=r,n.onload=function(){e(n)},n.onerror=function(){log(LEVEL.ERROR,!1,"image %s load failed !!!",r),t()};return}log(LEVEL.WARN,r===void 0,"The type of imageMask option must be String or HTMLImageElement."),t()})}function getFontSizeMapping(r,e){if(isFunction(r))return r;if(isArray$3(r)){var t=r[0],n=r[1];if(!e)return function(){return(n+t)/2};var i=e[0],a=e[1];return a===i?function(){return(n+t)/2}:function(s){var l=s.value;return(n-t)/(a-i)*(l-i)+t}}return function(){return r}}function getSingleKeyValues(r,e){return r.map(function(t){return t[e]}).filter(function(t){return typeof t=="number"&&!isNaN(t)})}function getRotate(r){var e=resolveRotate(r),t=e.rotation,n=e.rotationSteps;if(!isArray$3(t))return t;var i=t[0],a=t[1],o=n===1?0:(a-i)/(n-1);return function(){return a===i?a:Math.floor(Math.random()*n)*o}}function resolveRotate(r){var e=r.wordStyle.rotationSteps;return e<1&&(log(LEVEL.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1),{rotation:r.wordStyle.rotation,rotationSteps:e}}function min(r){return Math.min.apply(Math,r)}function max(r){return Math.max.apply(Math,r)}function geometry(r){var e=r.chart,t=r.options,n=t.colorField,i=t.color,a=transform(r);e.data(a);var o=deepAssign({},r,{options:{xField:"x",yField:"y",seriesField:n&&WORD_CLOUD_COLOR_FIELD,rawFields:isFunction(i)&&__spreadArray$1(__spreadArray$1([],get(t,"rawFields",[]),!0),["datum"],!1),point:{color:i,shape:"word-cloud"}}}),s=point(o).ext;return s.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),r}function meta(r){return flow(scale$2({x:{nice:!1},y:{nice:!1}}))(r)}function legend(r){var e=r.chart,t=r.options,n=t.legend,i=t.colorField;return n===!1?e.legend(!1):i&&e.legend(WORD_CLOUD_COLOR_FIELD,n),r}function adaptor(r){flow(geometry,meta,tooltip$9,legend,interaction$8,animation$5,theme$2,state)(r)}registerShape("point","word-cloud",{draw:function(r,e){var t=r.x,n=r.y,i=e.addShape("text",{attrs:__assign$1(__assign$1({},getTextAttrs(r)),{x:t,y:n})}),a=r.data.rotate;return typeof a=="number"&&Util.rotate(i,a*Math.PI/180),i}});function getTextAttrs(r){return{fontSize:r.data.size,text:r.data.text,textAlign:"center",fontFamily:r.data.font,fontWeight:r.data.weight,fill:r.color||r.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(r){__extends$1(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="word-cloud",t}return e.getDefaultOptions=function(){return DEFAULT_OPTIONS$1},e.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(transform({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var t=this;return new Promise(function(n){var i=t.options.imageMask;if(!i){r.prototype.render.call(t),n();return}var a=function(o){t.options=__assign$1(__assign$1({},t.options),{imageMask:o||null}),r.prototype.render.call(t),n()};processImageMask(i).then(a).catch(a)})},e.prototype.getSchemaAdaptor=function(){return adaptor},e.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){r.prototype.triggerResize.call(t)}))},e})(Plot);(function(r){__extends$1(e,r);function e(t,n,i,a){var o=r.call(this,t,deepAssign({},a,n))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor},e})(Plot);registerLocale("en-US",EN_US_LOCALE);registerLocale("zh-CN",ZH_CN_LOCALE);class HttpUtil{static async sendHttpRequest(e,t,n,i){const a={method:t.toUpperCase(),headers:n};if(t.toUpperCase()==="POST")a.headers["Content-Type"]="application/json",a.body=JSON.stringify(i);else if(t.toUpperCase()==="GET"){const s=new URLSearchParams(i).toString();e+=`?${s}`}return await(await fetch(e,a)).json()}}class AbstractDesignerController extends AbstractController{constructor(){super(...arguments);D(this,"interval",null);D(this,"lastReqState",!0);D(this,"reConnect",!1);D(this,"errMsgDom",null)}changeData(t){}registerEvent(){}loadComponentData(){const{data:t}=this.config;if(!t)return;const{dataSource:n}=t;switch(n){case"static":break;case"api":const{url:i,method:a,params:o,header:s,flashFrequency:l=5}=t==null?void 0:t.apiData;this.interval=setInterval(()=>{HttpUtil.sendHttpRequest(i,a,s,o).then(c=>{var u;c&&(this.lastReqState||(this.lastReqState=!0,(u=this.errMsgDom)==null||u.remove(),this.errMsgDom=null,this.changeData(c)),this.changeData(c))}).catch(()=>{this.lastReqState=!1,this.errMsgDom||(this.errMsgDom=document.createElement("div"),this.errMsgDom.classList.add("view-error-message"),this.errMsgDom.innerText="数据加载失败...",this.container.appendChild(this.errMsgDom))})},l*1e3);break}}updateTheme(t){}}class BPExecutor{constructor(){D(this,"executeCount",0)}static triggerComponentEvent(e,t,n){const i=e+":"+t+":"+AnchorPointType.OUTPUT,a=new BPExecutor;a.execute(i,a,n)}execute(e,t,n){if(t.executeCount>1e3){console.warn("蓝图单条路径执行次数超过1000，请检查是否出现死循环逻辑！");return}if(t.executeCount++,!e||e===""||e.split(":").length!==3)return;const{bpAPMap:a}=bpStore$1,o=a[e];o&&o.forEach(s=>{const[l,c,u]=s.split(":"),{bpNodeControllerInsMap:f}=bpStore$1,d=f[l];d&&d.execute({nodeId:l,apId:c,anchorType:parseInt(u)},t,n)})}}class AntdBaseDesignerController extends AbstractDesignerController{constructor(){super(...arguments);D(this,"interval",null);D(this,"lastReqState",!0);D(this,"reConnect",!1)}changeData(t){var n,i,a;(i=(n=this.config)==null?void 0:n.style)!=null&&i.data&&(this.config.style.data=t),(a=this.instance)==null||a.changeData(t)}registerEvent(){var n,i,a,o,s,l,c;const t=(i=(n=this.config)==null?void 0:n.base)==null?void 0:i.id;(a=this.instance)==null||a.on("plot:click",(...u)=>{BPExecutor.triggerComponentEvent(t,"globalClick",{msg:"这是测试参数"})}),(o=this.instance)==null||o.on("element:click",(...u)=>{BPExecutor.triggerComponentEvent(t,"elementClick",{msg:"这是测试参数"})}),(s=this.instance)==null||s.on("legend-item:click",(...u)=>{BPExecutor.triggerComponentEvent(t,"legendClick",{msg:"这是测试参数"})}),(l=this.instance)==null||l.on("legend-item-name:click",(...u)=>{BPExecutor.triggerComponentEvent(t,"elementNameClick",{msg:"这是测试参数"})}),(c=this.instance)==null||c.on("axis-label:click",(...u)=>{BPExecutor.triggerComponentEvent(t,"axisLabelClick",{msg:"这是测试参数"})})}commonCreate(t,n,i){var a,o;this.config=i,this.container=t,this.instance=new n(t,(a=this.config)==null?void 0:a.style),(o=this.instance)==null||o.render(),this.registerEvent()}commonUpdate(t,n,i){var a,o;this.config=ObjectUtil.merge(this.config,t),i=i||{reRender:!0},i.reRender&&((o=this.instance)==null||o.update((a=this.config)==null?void 0:a.style))}}class AntdCommonAreaController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Area,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Area,t)}updateTheme(e){var c,u,f,d,g,p,v,y,m,x,_,S,A,b,C,E,T,I,w,M,$,P,R,L,O,k,B,N,F;const{type:t}=(c=this.config)==null?void 0:c.base;if(!e)return;const n=(u=this.config)==null?void 0:u.style,{colors:{main:i,mainText:a,subText:o,supplementFirst:s,supplementSecond:l}}=e;n!=null&&n.color&&(t==="AntdBaseArea"?n.color=i:n.color=[i,s,l]),n!=null&&n.point&&((f=n==null?void 0:n.point)!=null&&f.style)&&(n.point.style.fill=i),n!=null&&n.line&&((d=n==null?void 0:n.line)!=null&&d.style)&&(n.line.style.stroke=i),n.legend&&((g=n.legend.itemName)!=null&&g.style)&&(n.legend.itemName.style.fill=a),n!=null&&n.xAxis&&((v=(p=n==null?void 0:n.xAxis)==null?void 0:p.label)!=null&&v.style)&&(n.xAxis.label.style.fill=o),n!=null&&n.xAxis&&((y=n==null?void 0:n.xAxis)!=null&&y.title)&&(n.xAxis.title.style.fill=a),n!=null&&n.xAxis&&((x=(m=n==null?void 0:n.xAxis)==null?void 0:m.line)!=null&&x.style)&&(n.xAxis.line.style.stroke=s),n!=null&&n.xAxis&&((A=(S=(_=n==null?void 0:n.xAxis)==null?void 0:_.grid)==null?void 0:S.line)!=null&&A.style)&&(n.xAxis.grid.line.style.stroke=s),n!=null&&n.xAxis&&((C=(b=n==null?void 0:n.xAxis)==null?void 0:b.tickLine)!=null&&C.style)&&(n.xAxis.tickLine.style.stroke=l),n!=null&&n.xAxis&&((T=(E=n==null?void 0:n.xAxis)==null?void 0:E.subTickLine)!=null&&T.style)&&(n.xAxis.subTickLine.style.stroke=l),n!=null&&n.yAxis&&((w=(I=n==null?void 0:n.yAxis)==null?void 0:I.label)!=null&&w.style)&&(n.yAxis.label.style.fill=o),n!=null&&n.yAxis&&((M=n==null?void 0:n.yAxis)!=null&&M.title)&&(n.yAxis.title.style.fill=a),n!=null&&n.yAxis&&((P=($=n==null?void 0:n.yAxis)==null?void 0:$.line)!=null&&P.style)&&(n.yAxis.line.style.stroke=s),n!=null&&n.yAxis&&((O=(L=(R=n==null?void 0:n.yAxis)==null?void 0:R.grid)==null?void 0:L.line)!=null&&O.style)&&(n.yAxis.grid.line.style.stroke=s),n!=null&&n.yAxis&&((B=(k=n==null?void 0:n.yAxis)==null?void 0:k.tickLine)!=null&&B.style)&&(n.yAxis.tickLine.style.stroke=l),n!=null&&n.yAxis&&((F=(N=n==null?void 0:n.yAxis)==null?void 0:N.subTickLine)!=null&&F.style)&&(n.yAxis.subTickLine.style.stroke=l),this.update({style:n},{reRender:!0})}}class AxisConfig extends reactExports.Component{constructor(t){super(t);D(this,"defaultData",{label:{style:{fill:"#00FFEAFF"}},line:{style:{stroke:"#00dbffff",lineWidth:1}}});D(this,"oldData");D(this,"emptyData",{grid:null,line:null,title:null,label:null,tickLine:null,subTickLine:null});this.oldData={...t==null?void 0:t.config}}render(){const{config:t,title:n="坐标轴",onChange:i}=this.props,{grid:a,line:o,label:s,title:l,tickLine:c,subTickLine:u}=t||{},f=!!(a||o||s||l||c||u);return jsxRuntimeExports.jsxs(Accordion,{label:n,showSwitch:!0,defaultValue:f,onChange:d=>{i(d?lodashExports.isEqual(this.oldData,this.emptyData)?this.defaultData:this.oldData:this.emptyData)},children:[jsxRuntimeExports.jsx(Radio,{padding:"7px 0 10px 0",label:"位置",defaultValue:(t==null?void 0:t.position)||"right",onChange:d=>i({position:d}),options:[{label:"上",value:"top"},{label:"下",value:"bottom"},{label:"左",value:"left"},{label:"右",value:"right"}]}),jsxRuntimeExports.jsx(AxisText,{config:t==null?void 0:t.label,onChange:d=>i({label:d})}),jsxRuntimeExports.jsx(AxisTitle,{config:t==null?void 0:t.title,onChange:d=>i({title:d})}),jsxRuntimeExports.jsx(AxisLine,{config:t==null?void 0:t.line,onChange:d=>i({line:d})}),jsxRuntimeExports.jsx(AxisGridLine,{config:t==null?void 0:t.grid,onChange:d=>i({grid:d})}),jsxRuntimeExports.jsx(AxisTickLine,{config:t==null?void 0:t.tickLine,onChange:d=>i({tickLine:d})}),jsxRuntimeExports.jsx(AxisSubTickLine,{config:t==null?void 0:t.subTickLine,onChange:d=>i({subTickLine:d})})]})}}const AxisSubTickLine=({config:r,onChange:e})=>{var o,s;const[t,n]=reactExports.useState(r),i=l=>{const{id:c,data:u}=l;if(c==="subTickLineSwitch")if(u){const f={count:5,length:1,style:{stroke:"#6e6e6e",lineWidth:1}};e(f),n(f)}else e(null),n(null);else e(l.dataFragment)},a={type:"item-panel",label:"子刻度",children:[{type:"grid",config:{columns:2},children:[{key:"subTickLineSwitch",id:"subTickLineSwitch",type:"switch",label:"开启",value:!!t},{rules:"{subTickLineSwitch}==='true'",key:"count",type:"input",label:"数量",value:t==null?void 0:t.count,config:{type:"number",min:0,max:100}},{rules:"{subTickLineSwitch}==='true'",key:"length",type:"input",label:"长度",value:t==null?void 0:t.length,config:{type:"number",min:0,max:10}},{rules:"{subTickLineSwitch}==='true'",key:"style",children:[{key:"lineWidth",type:"input",label:"宽度",value:(o=t==null?void 0:t.style)==null?void 0:o.lineWidth,config:{type:"number",min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:(s=t==null?void 0:t.style)==null?void 0:s.stroke,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:i})},AxisTickLine=({config:r,onChange:e})=>{var o,s;const[t,n]=reactExports.useState(r),i=l=>{const{id:c,data:u}=l;if(c==="tickLineSwitch")if(u){const f={alignTick:!0,length:1,style:{stroke:"#6e6e6e",lineWidth:1}};e(f),n(f)}else e(null),n(null);else e(l.dataFragment)},a={type:"item-panel",label:"刻度线",children:[{type:"grid",config:{columns:2},children:[{key:"tickLineSwitch",id:"tickLineSwitch",type:"switch",label:"开启",value:!!t},{key:"alignTick",rules:"{tickLineSwitch}==='true'",type:"switch",label:"对齐",value:t==null?void 0:t.alignTick},{key:"length",rules:"{tickLineSwitch}==='true'",type:"input",label:"长度",value:t==null?void 0:t.length,config:{type:"number",min:0,max:10}},{key:"style",rules:"{tickLineSwitch}==='true'",children:[{key:"lineWidth",type:"input",label:"宽度",value:(o=t==null?void 0:t.style)==null?void 0:o.lineWidth,config:{type:"number",min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:(s=t==null?void 0:t.style)==null?void 0:s.stroke,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:i})},AxisGridLine=({config:r,onChange:e})=>{var o,s,l,c;const[t,n]=reactExports.useState(r),i=u=>{const{id:f,data:d}=u;if(f==="gridLineSwitch")if(d){const g={alignTick:!0,line:{style:{stroke:"#5c5c5c",lineWidth:1}}};e(g),n(g)}else e(null),n(null);else e(u.dataFragment)},a={type:"item-panel",label:"网格线",children:[{type:"grid",config:{columns:2},children:[{key:"gridLineSwitch",id:"gridLineSwitch",type:"switch",label:"开启",value:!!t},{rules:"{gridLineSwitch} === 'true'",key:"alignTick",type:"switch",label:"对齐",value:t==null?void 0:t.alignTick},{rules:"{gridLineSwitch} === 'true'",key:"line",children:[{key:"style",children:[{key:"lineWidth",type:"input",label:"宽度",value:(s=(o=t==null?void 0:t.line)==null?void 0:o.style)==null?void 0:s.lineWidth,config:{type:"number",min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:(c=(l=t==null?void 0:t.line)==null?void 0:l.style)==null?void 0:c.stroke,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:i})},AxisLine=({config:r,onChange:e})=>{var o,s;const[t,n]=reactExports.useState(r),i=l=>{const{id:c,data:u}=l;c==="lineSwitch"?u?(e({style:{stroke:"#595959",lineWidth:1}}),n({style:{stroke:"#595959",lineWidth:1}})):(e(null),n(null)):e(l.dataFragment)},a={type:"item-panel",label:"轴线",children:[{type:"grid",config:{columns:2},children:[{key:"lineSwitch",id:"lineSwitch",type:"switch",label:"开启",value:!!t},{key:"style",rules:"{lineSwitch} === 'true'",children:[{key:"lineWidth",type:"input",label:"宽度",value:((o=t==null?void 0:t.style)==null?void 0:o.lineWidth)||1,config:{type:"number",min:0,max:10}},{key:"stroke",type:"color-picker",label:"颜色",value:((s=t==null?void 0:t.style)==null?void 0:s.stroke)||"#595959",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:i})},AxisTitle=({config:r,onChange:e})=>{const[t,n]=reactExports.useState(r),i=o=>{const{id:s,data:l}=o;s==="titleSwitch"?l?(e({text:"标题",offset:0,style:{fill:"#d2d2d2",fontSize:12}}),n({text:"标题",offset:0,style:{fill:"#d2d2d2",fontSize:12}})):(e(null),n(null)):e(o.dataFragment)},a={type:"item-panel",label:"标题",children:[{type:"grid",config:{columns:2},children:[{key:"titleSwitch",id:"titleSwitch",type:"switch",label:"开启",reRender:!0,value:!!t},{rules:"{titleSwitch} === 'true'",children:[{key:"position",type:"select",label:"位置",value:(t==null?void 0:t.position)||"center",config:{options:[{value:"start",label:"前"},{value:"center",label:"中"},{value:"end",label:"后"}]}},{key:"text",type:"input",label:"内容",value:(t==null?void 0:t.text)||"标题"},{key:"offset",type:"input",label:"偏移",value:(t==null?void 0:t.offset)||0,config:{type:"number"}},{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:12,config:{type:"number",min:1,max:50}},{key:"fill",type:"color-picker",label:"颜色",value:"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:i})},AxisText=({config:r,onChange:e})=>{const{offset:t,style:n,rotate:i}=r||{},a=s=>{e(s.dataFragment)},o={type:"item-panel",label:"文本",children:[{type:"grid",config:{columns:2},children:[{key:"rotate",type:"input",label:"角度",value:i||0,config:{type:"number",min:0,max:360}},{key:"offset",type:"input",label:"偏移",value:t||0,config:{type:"number"}},{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:(n==null?void 0:n.fontSize)||12,config:{type:"number",min:1,max:50}},{key:"fill",type:"color-picker",label:"颜色",value:(n==null?void 0:n.fill)||"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:o,onFieldChange:a})},AntdCartesianCoordinateSys=({config:r,onChange:e})=>{const t=i=>{e({xAxis:i})},n=i=>{e({yAxis:i})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AxisConfig,{title:"X轴",config:r==null?void 0:r.xAxis,onChange:t}),jsxRuntimeExports.jsx(AxisConfig,{title:"Y轴",config:r==null?void 0:r.yAxis,onChange:n})]})};class AntdCommonUtil{static getDataFieldOptions(e){var a,o;const t=e.getConfig(),n=(o=(a=t==null?void 0:t.data)==null?void 0:a.staticData)==null?void 0:o.data,i=[];if(n&&n.length>=1){const s=n[0];Object.keys(s).forEach(l=>i.push({label:l,value:l}))}return i}}const AntdLegend=r=>{const{controller:e}=r,{legend:t}=e.getConfig().style,n=a=>{const{id:o,data:s,dataFragment:l}=a;o==="legendSwitch"?s?e.update({style:{legend:t}}):e.update({style:{legend:!1}}):e.update(l)},i={key:"style",id:"legendSwitch",type:"accordion",label:"图例",config:{showSwitch:!0},value:!!t,children:[{key:"legend",type:"grid",config:{columns:2},children:[{key:"position",type:"select",label:"位置",value:"left-top",config:{options:[{value:"left-top",label:"左上"},{value:"left",label:"正左"},{value:"left-bottom",label:"左下"},{value:"top-left",label:"上左"},{value:"top",label:"正上"},{value:"top-right",label:"上右"},{value:"right-top",label:"右上"},{value:"right",label:"正右"},{value:"right-bottom",label:"右下"},{value:"bottom-left",label:"下左"},{value:"bottom",label:"正下"},{value:"bottom-right",label:"下右"}]}},{key:"layout",type:"select",label:"方向",value:"horizontal",config:{options:[{value:"horizontal",label:"水平"},{value:"vertical",label:"垂直"}]}},{key:"itemName",children:[{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:12,config:{type:"number",min:0,max:100}},{key:"fill",type:"color-picker",label:"颜色",value:"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:i,onFieldChange:n})};let AntdAreaCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);D(this,"legendChange",t=>{this.props.controller.update({style:{legend:t}})});D(this,"areaCoordinateSysChange",t=>{this.props.controller.update({style:t})});D(this,"areaGraphicsChange",t=>{this.props.controller.update({style:t})})}render(){const{controller:t}=this.props,n=t.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdCommonAreaGraphics,{config:n,onChange:this.areaGraphicsChange}),jsxRuntimeExports.jsx(AntdLegend,{controller:t}),jsxRuntimeExports.jsx(AntdCartesianCoordinateSys,{onChange:this.areaCoordinateSysChange,config:n})]})}};const AntdCommonAreaGraphics=({config:r,onChange:e})=>{var i,a,o,s,l,c,u;const t=f=>{const{id:d,data:g,dataFragment:p}=f;console.log(d,g,p),d==="areaColor"?g&&Array.isArray(g)?e({color:g,areaStyle:{fill:void 0}}):g&&typeof g=="string"&&g.indexOf("gradient")!==-1||e({areaStyle:{fill:g}}):e&&e(p)},n={type:"accordion",label:"图形",children:[{type:"item-panel",label:"数据点",key:"point",children:[{type:"grid",config:{columns:2},children:[{key:"size",type:"input",label:"尺寸",value:((i=r==null?void 0:r.point)==null?void 0:i.size)||0,config:{type:"number",min:0,max:100}},{key:"shape",type:"select",label:"形状",value:((a=r==null?void 0:r.point)==null?void 0:a.shape)||"circle",config:{options:[{value:"circle",label:"圈形"},{value:"square",label:"方形"},{value:"bowtie",label:"领结"},{value:"diamond",label:"钻石"},{value:"hexagon",label:"六角形"},{value:"triangle",label:"三角形"}]}},{key:"style",children:[{key:"fill",type:"color-picker",label:"颜色",value:((s=(o=r==null?void 0:r.point)==null?void 0:o.style)==null?void 0:s.fill)||"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]},{type:"item-panel",label:"数据线",children:[{type:"grid",config:{columns:2},children:[{key:"smooth",type:"switch",label:"平滑",value:(r==null?void 0:r.smooth)||!1},{key:"line",children:[{key:"style",children:[{key:"lineWidth",type:"input",label:"宽度",value:((c=(l=r==null?void 0:r.line)==null?void 0:l.style)==null?void 0:c.lineWidth)||0,config:{type:"number",min:0,max:100}}]}]}]}]},{type:"item-panel",label:"数据面",children:[{type:"grid",children:[{id:"areaColor",type:"color-mode",label:"颜色",value:((u=r==null?void 0:r.areaStyle)==null?void 0:u.fill)||"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:n,onFieldChange:t})},AntdAreaFieldMapping=({controller:r})=>{const e=AntdCommonUtil.getDataFieldOptions(r),t={type:"grid",config:{columns:2},children:[{type:"select",label:"X字段",value:"country",config:{options:e}},{type:"select",label:"Y字段",config:{options:e}},{type:"select",label:"分组字段",config:{options:e}}]},n=i=>{};return jsxRuntimeExports.jsx(LCGUI,{schema:t,onFieldChange:n})},AntdAreaCommonFieldMapping=r=>{const{controller:e}=r,t=e.config.style,n=AntdCommonUtil.getDataFieldOptions(e),i={key:"style",type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:t.xField,config:{options:n}},{key:"yField",type:"select",label:"Y字段",value:t.yField,config:{options:n}},{key:"seriesField",type:"select",label:"分组字段",value:t.seriesField,config:{options:n}}]},a=o=>{e.update(o.dataFragment)};return jsxRuntimeExports.jsx(LCGUI,{schema:i,onFieldChange:a})},AntdAreaCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdAreaCommonFieldMapping,AntdAreaCommonStyleConfig:AntdAreaCommonStyleConfig$1,AntdAreaFieldMapping,AntdCommonAreaGraphics},Symbol.toStringTag,{value:"Module"})),AnimationConfig$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdAreaCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdAreaCommonConfig),void 0).then(r=>({default:r.AntdAreaCommonStyleConfig}))),ThemeConfig$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$b=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractAreaDefinition extends AntdCommonDefinition{getController(){return AntdCommonAreaController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$b,data:DataConfig$b,style:AntdAreaCommonStyleConfig,animation:AnimationConfig$b,theme:ThemeConfig$b,mapping:AntdAreaCommonFieldMapping}}}const __vite_glob_0_1=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractAreaDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonBarController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Bar,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Bar,t)}updateTheme(e){var l,c,u,f,d,g,p,v,y,m,x,_,S,A,b,C,E,T,I,w,M,$,P,R,L,O;if(!e)return;const t=(l=this.config)==null?void 0:l.style,{colors:{main:n,mainText:i,supplementSecond:a,supplementFirst:o,subText:s}}=e;t!=null&&t.color&&(t.barStyle={fill:void 0},t.color=[n,o,a]),t.legend&&((c=t.legend.itemName)!=null&&c.style)&&(t.legend.itemName.style.fill=i),t!=null&&t.xAxis&&((f=(u=t==null?void 0:t.xAxis)==null?void 0:u.label)!=null&&f.style)&&(t.xAxis.label.style.fill=s),t!=null&&t.xAxis&&((d=t==null?void 0:t.xAxis)!=null&&d.title)&&(t.xAxis.title.style.fill=i),t!=null&&t.xAxis&&((p=(g=t==null?void 0:t.xAxis)==null?void 0:g.line)!=null&&p.style)&&(t.xAxis.line.style.stroke=o),t!=null&&t.xAxis&&((m=(y=(v=t==null?void 0:t.xAxis)==null?void 0:v.grid)==null?void 0:y.line)!=null&&m.style)&&(t.xAxis.grid.line.style.stroke=o),t!=null&&t.xAxis&&((_=(x=t==null?void 0:t.xAxis)==null?void 0:x.tickLine)!=null&&_.style)&&(t.xAxis.tickLine.style.stroke=o),t!=null&&t.xAxis&&((A=(S=t==null?void 0:t.xAxis)==null?void 0:S.subTickLine)!=null&&A.style)&&(t.xAxis.subTickLine.style.stroke=a),t!=null&&t.yAxis&&((C=(b=t==null?void 0:t.yAxis)==null?void 0:b.label)!=null&&C.style)&&(t.yAxis.label.style.fill=s),t!=null&&t.yAxis&&((E=t==null?void 0:t.yAxis)!=null&&E.title)&&(t.yAxis.title.style.fill=i),t!=null&&t.yAxis&&((I=(T=t==null?void 0:t.yAxis)==null?void 0:T.line)!=null&&I.style)&&(t.yAxis.line.style.stroke=o),t!=null&&t.yAxis&&(($=(M=(w=t==null?void 0:t.yAxis)==null?void 0:w.grid)==null?void 0:M.line)!=null&&$.style)&&(t.yAxis.grid.line.style.stroke=o),t!=null&&t.yAxis&&((R=(P=t==null?void 0:t.yAxis)==null?void 0:P.tickLine)!=null&&R.style)&&(t.yAxis.tickLine.style.stroke=o),t!=null&&t.yAxis&&((O=(L=t==null?void 0:t.yAxis)==null?void 0:L.subTickLine)!=null&&O.style)&&(t.yAxis.subTickLine.style.stroke=a),this.update({style:t},{reRender:!0})}}let AntdBarCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);D(this,"legendChange",t=>{this.props.controller.update({style:{legend:t}})});D(this,"barGraphicsChange",t=>{this.props.controller.update({style:t})});D(this,"barCoordinateSysChange",t=>{this.props.controller.update({style:t})})}render(){const{controller:t}=this.props,n=t.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdBarGraphics,{controller:t}),jsxRuntimeExports.jsx(AntdLegend,{controller:t}),jsxRuntimeExports.jsx(AntdCartesianCoordinateSys,{onChange:this.barCoordinateSysChange,config:n})]})}};const AntdBarGraphics=({controller:r})=>{const e=r.getConfig().style,t=i=>{const{id:a,data:o,dataFragment:s}=i;a==="barColor"?o&&Array.isArray(o)?r.update({style:{color:o,barStyle:{fill:void 0}}}):o&&typeof o=="string"&&o.indexOf("gradient")!==-1||r.update({style:{barStyle:{fill:o}}}):r.update(s)},n={key:"style",type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2,margin:"0 0 7px 0"},children:[{key:"maxBarWidth",type:"input",label:"宽度",value:e==null?void 0:e.maxBarWidth,config:{width:80,type:"number",min:1,max:100}}]},{type:"grid",children:[{id:"barColor",type:"color-mode",label:"颜色",value:"#1c1c1c"}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:n,onFieldChange:t})},AntdBarFieldMapping=({controller:r})=>{const e=r.getConfig().style,{data:t,xField:n,yField:i,seriesField:a}=e,o=[];if(t&&t.length>=1){const c=t[0];Object.keys(c).forEach(u=>o.push({label:u,value:u}))}const s=c=>{r.update(c.dataFragment)},l={key:"style",type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:n,config:{options:o}},{key:"yField",type:"select",label:"Y字段",value:i,config:{options:o}},{key:"seriesField",type:"select",label:"分组字段",value:a,config:{options:o}}]};return jsxRuntimeExports.jsx(LCGUI,{schema:l,onFieldChange:s})},AntdBarCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdBarCommonStyleConfig:AntdBarCommonStyleConfig$1,AntdBarFieldMapping,AntdBarGraphics},Symbol.toStringTag,{value:"Module"})),AnimationConfig$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdBarCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdBarCommonConfig),void 0).then(r=>({default:r.AntdBarCommonStyleConfig}))),ThemeConfig$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$a=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractBarDefinition extends AntdCommonDefinition{getController(){return AntdCommonBarController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$a,data:DataConfig$a,style:AntdBarCommonStyleConfig,animation:AnimationConfig$a,theme:ThemeConfig$a,mapping:AntdBarFieldMapping}}}const __vite_glob_0_2=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractBarDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonColumnController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Column,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Column,t)}updateTheme(e){var l,c,u,f,d,g,p,v,y,m,x,_,S,A,b,C,E,T,I,w,M,$,P,R,L,O,k;if(!e)return;const t=(l=this.config)==null?void 0:l.style,{colors:{main:n,mainText:i,supplementSecond:a,supplementFirst:o,subText:s}}=e;t!=null&&t.color&&(t.columnStyle={fill:void 0},t.color=[n,o,a]),t.legend&&((c=t.legend.itemName)!=null&&c.style)&&(t.legend.itemName.style.fill=i),t!=null&&t.xAxis&&((d=(f=(u=t==null?void 0:t.xAxis)==null?void 0:u.label)==null?void 0:f.style)!=null&&d.fill)&&(t.xAxis.label.style.fill=s),t!=null&&t.xAxis&&((g=t==null?void 0:t.xAxis)!=null&&g.title)&&(t.xAxis.title.style.fill=i),t!=null&&t.xAxis&&((v=(p=t==null?void 0:t.xAxis)==null?void 0:p.line)!=null&&v.style)&&(t.xAxis.line.style.stroke=o),t!=null&&t.xAxis&&((x=(m=(y=t==null?void 0:t.xAxis)==null?void 0:y.grid)==null?void 0:m.line)!=null&&x.style)&&(t.xAxis.grid.line.style.stroke=o),t!=null&&t.xAxis&&((S=(_=t==null?void 0:t.xAxis)==null?void 0:_.tickLine)!=null&&S.style)&&(t.xAxis.tickLine.style.stroke=o),t!=null&&t.xAxis&&((b=(A=t==null?void 0:t.xAxis)==null?void 0:A.subTickLine)!=null&&b.style)&&(t.xAxis.subTickLine.style.stroke=a),t!=null&&t.yAxis&&((E=(C=t==null?void 0:t.yAxis)==null?void 0:C.label)!=null&&E.style)&&(t.yAxis.label.style.fill=i),t!=null&&t.yAxis&&((T=t==null?void 0:t.yAxis)!=null&&T.title)&&(t.yAxis.title.style.fill=i),t!=null&&t.yAxis&&((w=(I=t==null?void 0:t.yAxis)==null?void 0:I.line)!=null&&w.style)&&(t.yAxis.line.style.stroke=o),t!=null&&t.yAxis&&((P=($=(M=t==null?void 0:t.yAxis)==null?void 0:M.grid)==null?void 0:$.line)!=null&&P.style)&&(t.yAxis.grid.line.style.stroke=o),t!=null&&t.yAxis&&((L=(R=t==null?void 0:t.yAxis)==null?void 0:R.tickLine)!=null&&L.style)&&(t.yAxis.tickLine.style.stroke=o),t!=null&&t.yAxis&&((k=(O=t==null?void 0:t.yAxis)==null?void 0:O.subTickLine)!=null&&k.style)&&(t.yAxis.subTickLine.style.stroke=a),this.update({style:t},{reRender:!0})}}let AntdColumnCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);D(this,"legendChange",t=>{this.props.controller.update({style:{legend:t}})});D(this,"barGraphicsChange",t=>{this.props.controller.update({style:t})});D(this,"barCoordinateSysChange",t=>{this.props.controller.update({style:t})})}render(){const{controller:t}=this.props,n=t.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdColumnGraphics,{onChange:this.barGraphicsChange,config:n}),jsxRuntimeExports.jsx(AntdLegend,{controller:t}),jsxRuntimeExports.jsx(AntdCartesianCoordinateSys,{onChange:this.barCoordinateSysChange,config:n})]})}};const AntdColumnGraphics=({config:r,onChange:e})=>{const t=i=>{const{id:a,data:o,dataFragment:s}=i;a==="columnColor"?o&&Array.isArray(o)?e({color:o,columnStyle:{fill:void 0}}):o&&typeof o=="string"&&o.indexOf("gradient")!==-1||e({columnStyle:{fill:o}}):e(s)},n={type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2},children:[{key:"maxColumnWidth",type:"input",label:"宽度",value:12,config:{type:"number",min:0,max:100}}]},{type:"grid",children:[{id:"columnColor",type:"color-mode",label:"颜色",value:"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:n,onFieldChange:t})},AntdColumnCommonFieldMapping=r=>{const{controller:e}=r,{xField:t,yField:n,seriesField:i}=e.getConfig().style,a=AntdCommonUtil.getDataFieldOptions(e),o={key:"style",type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:t,config:{options:a}},{key:"yField",type:"select",label:"Y字段",value:n,config:{options:a}},{key:"seriesField",type:"select",label:"分组字段",value:i,config:{options:a}}]},s=l=>{const{dataFragment:c}=l;e.update(c)};return jsxRuntimeExports.jsx(LCGUI,{schema:o,onFieldChange:s})},AntdColumnCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdColumnCommonFieldMapping,AntdColumnCommonStyleConfig:AntdColumnCommonStyleConfig$1,AntdColumnGraphics},Symbol.toStringTag,{value:"Module"})),AnimationConfig$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdColumnCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdColumnCommonConfig),void 0).then(r=>({default:r.AntdColumnCommonStyleConfig}))),ThemeConfig$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$9=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractColumnDefinition extends AntdCommonDefinition{getController(){return AntdCommonColumnController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$9,data:DataConfig$9,style:AntdColumnCommonStyleConfig,animation:AnimationConfig$9,theme:ThemeConfig$9,mapping:AntdColumnCommonFieldMapping}}}const __vite_glob_0_3=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractColumnDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonLineController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Line,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Line,t)}updateTheme(e){var c,u,f,d,g,p,v,y,m,x,_,S,A,b,C,E,T,I,w,M,$,P,R,L,O,k,B,N,F,V,H,z,G,j,Y,U,K,q,W,X,tt;if(!e)return;const{type:t}=(c=this.config)==null?void 0:c.base,n=(u=this.config)==null?void 0:u.style,{colors:{main:i,mainText:a,supplementSecond:o,supplementFirst:s,subText:l}}=e;n!=null&&n.color&&(t==="AntdMultiLine"?n.color=[i,s,o]:n.color=i),n!=null&&n.point&&((f=n==null?void 0:n.point)!=null&&f.style)&&(n.point.style.fill=void 0),n.legend&&((g=(d=n.legend.itemName)==null?void 0:d.style)!=null&&g.fill)&&(n.legend.itemName.style.fill=a),n!=null&&n.xAxis&&((y=(v=(p=n==null?void 0:n.xAxis)==null?void 0:p.label)==null?void 0:v.style)!=null&&y.fill)&&(n.xAxis.label.style.fill=a),n!=null&&n.xAxis&&((x=(m=n==null?void 0:n.xAxis)==null?void 0:m.title)!=null&&x.fill)&&(n.xAxis.title.style.fill=a),n!=null&&n.xAxis&&((A=(S=(_=n==null?void 0:n.xAxis)==null?void 0:_.line)==null?void 0:S.style)!=null&&A.stroke)&&(n.xAxis.line.style.stroke=o),n!=null&&n.xAxis&&((T=(E=(C=(b=n==null?void 0:n.xAxis)==null?void 0:b.grid)==null?void 0:C.line)==null?void 0:E.style)!=null&&T.stroke)&&(n.xAxis.grid.line.style.stroke=l),n!=null&&n.xAxis&&((M=(w=(I=n==null?void 0:n.xAxis)==null?void 0:I.tickLine)==null?void 0:w.style)!=null&&M.stroke)&&(n.xAxis.tickLine.style.stroke=s),n!=null&&n.xAxis&&((R=(P=($=n==null?void 0:n.xAxis)==null?void 0:$.subTickLine)==null?void 0:P.style)!=null&&R.stroke)&&(n.xAxis.subTickLine.style.stroke=l),n!=null&&n.yAxis&&((k=(O=(L=n==null?void 0:n.yAxis)==null?void 0:L.label)==null?void 0:O.style)!=null&&k.fill)&&(n.yAxis.label.style.fill=a),n!=null&&n.yAxis&&((N=(B=n==null?void 0:n.yAxis)==null?void 0:B.title)!=null&&N.fill)&&(n.yAxis.title.style.fill=a),n!=null&&n.yAxis&&((H=(V=(F=n==null?void 0:n.yAxis)==null?void 0:F.line)==null?void 0:V.style)!=null&&H.stroke)&&(n.yAxis.line.style.stroke=o),n!=null&&n.yAxis&&((Y=(j=(G=(z=n==null?void 0:n.yAxis)==null?void 0:z.grid)==null?void 0:G.line)==null?void 0:j.style)!=null&&Y.stroke)&&(n.yAxis.grid.line.style.stroke=l),n!=null&&n.yAxis&&((q=(K=(U=n==null?void 0:n.yAxis)==null?void 0:U.tickLine)==null?void 0:K.style)!=null&&q.stroke)&&(n.yAxis.tickLine.style.stroke=s),n!=null&&n.yAxis&&((tt=(X=(W=n==null?void 0:n.yAxis)==null?void 0:W.subTickLine)==null?void 0:X.style)!=null&&tt.stroke)&&(n.yAxis.subTickLine.style.stroke=l),this.update({style:n},{reRender:!0})}}const AnimationConfig$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdLineCommonStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdLineCommonConfig-7R5gGDug.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(r=>({default:r.AntdLineCommonStyleConfig}))),AntdLineFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdLineCommonConfig-7R5gGDug.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(r=>({default:r.AntdLineFieldMapping}))),ThemeConfig$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$8=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractLineDefinition extends AntdCommonDefinition{getController(){return AntdCommonLineController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$8,data:DataConfig$8,style:AntdLineCommonStyleConfig,animation:AnimationConfig$8,theme:ThemeConfig$8,mapping:AntdLineFieldMapping}}}const __vite_glob_0_4=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractLineDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonRoseController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Rose,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Rose,t)}updateTheme(e){var c,u,f,d;if(!e)return;const t=(c=this.config)==null?void 0:c.style,{colors:{main:n,mainText:i,supplementSecond:a,background:o,supplementFirst:s,subText:l}}=e;t!=null&&t.color&&(t.color=[n,i,l,s,a]),t.legend&&((f=(u=t.legend.itemName)==null?void 0:u.style)!=null&&f.fill)&&(t.legend.itemName.style.fill=i),t!=null&&t.sectorStyle&&(t!=null&&t.sectorStyle)&&(t.sectorStyle.stroke=o),t!=null&&t.label&&((d=t==null?void 0:t.label)!=null&&d.style)&&(t.label.style.fill=i),this.update({style:t},{reRender:!0})}}let AntdRoseCommonStyleConfig$1=class extends reactExports.Component{constructor(){super(...arguments);D(this,"roseGraphicsChange",t=>{this.props.controller.update({style:t})});D(this,"legendChange",t=>{this.props.controller.update({style:{legend:t}})})}render(){const t=this.props.controller,n=t.getConfig().style;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AntdLegend,{controller:t}),jsxRuntimeExports.jsx(AntdRoseGraphicsConfig,{onChange:this.roseGraphicsChange,config:n})]})}};const AntdRoseGraphicsConfig=({config:r,onChange:e})=>{var o,s,l,c,u,f,d,g,p;const[t,n]=reactExports.useState(r),i=v=>{let{id:y,data:m,dataKeyPath:x,dataFragment:_,reRender:S}=v;y==="startAngle"||y==="endAngle"?(m=Math.PI*m,e&&e(LCGUIUtil.createObjectFromArray(x,m))):y==="labelRotate"?e({label:{rotate:m*Math.PI}}):e&&e(_),S&&n({...t,..._})},a={children:[{type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2},children:[{key:"radius",type:"input",label:"外径",value:r.radius,config:{type:"number",min:0,max:1,step:.01}},{id:"startAngle",key:"startAngle",type:"input",label:"起始角",value:(r.startAngle||0)/Math.PI,config:{suffix:"Π",type:"number",min:0,max:2,step:.01}},{key:"innerRadius",type:"input",label:"内径",value:r.innerRadius,config:{type:"number",min:0,max:1,step:.01}},{id:"endAngle",key:"endAngle",type:"input",label:"结束角",value:(r.endAngle||2*Math.PI)/Math.PI,config:{suffix:"Π",type:"number",min:0,max:2,step:.01}},{key:"pieStyle",children:[{key:"stroke",type:"color-picker",label:"描边色",value:"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"lineWidth",type:"input",label:"描边宽",value:0,config:{type:"number",min:0,max:30}}]},{key:"color",type:"color-mode",label:"颜色",value:"#1c1c1c",config:{gridColumn:"1 / 3"}}]}]},{type:"accordion",label:"标签",children:[{key:"label",type:"grid",config:{columns:2},children:[{key:"offset",type:"input",label:"偏移",value:((o=t.label)==null?void 0:o.offset)||0,config:{type:"number"}},{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:((l=(s=t.label)==null?void 0:s.style)==null?void 0:l.fontSize)||12,config:{type:"number",min:0,max:100}},{key:"fontWeight",type:"input",label:"加粗",value:((u=(c=t.label)==null?void 0:c.style)==null?void 0:u.fontWeight)||500,config:{type:"number",min:100,max:900,step:100}},{key:"fill",type:"color-picker",label:"颜色",value:(d=(f=t.label)==null?void 0:f.style)==null?void 0:d.fill,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]},{key:"autoRotate",type:"switch",label:"自动旋转",reRender:!0,value:(g=t.label)==null?void 0:g.autoRotate},{id:"labelRotate",key:"rotate",type:"input",label:"旋转角度",rules:"{autoRotate} === 'false'",value:((p=t.label)==null?void 0:p.rotate)||0,config:{type:"number",min:0,max:2,step:.01}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:i})},AntdRoseFieldMapping=({controller:r})=>{var a;const e=(a=r.getConfig())==null?void 0:a.style,t=AntdCommonUtil.getDataFieldOptions(r),n={type:"grid",config:{columns:2},children:[{key:"xField",type:"select",label:"X字段",value:e==null?void 0:e.xField,config:{options:t}},{key:"yField",type:"select",label:"Y字段",value:e==null?void 0:e.yField,config:{options:t}},{key:"seriesField",type:"select",label:"分组字段",value:e==null?void 0:e.seriesField,config:{options:t}}]},i=o=>{r.update(o.dataFragment)};return jsxRuntimeExports.jsx(LCGUI,{schema:n,onFieldChange:i})},AntdRoseCommonConfig=Object.freeze(Object.defineProperty({__proto__:null,AntdRoseFieldMapping,AntdRoseGraphicsConfig,default:AntdRoseCommonStyleConfig$1},Symbol.toStringTag,{value:"Module"})),AnimationConfig$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdRoseCommonStyleConfig=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AntdRoseCommonConfig),void 0)),ThemeConfig$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$7=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractRoseDefinition extends AntdCommonDefinition{getController(){return AntdCommonRoseController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$7,data:DataConfig$7,style:AntdRoseCommonStyleConfig,animation:AnimationConfig$7,theme:ThemeConfig$7,mapping:AntdRoseFieldMapping}}}const __vite_glob_0_5=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractRoseDefinition},Symbol.toStringTag,{value:"Module"}));class AntdCommonScatterController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Scatter,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Scatter,t)}updateTheme(e){var l,c,u,f,d,g,p,v,y,m,x,_,S,A,b,C,E,T,I,w,M,$,P,R,L,O;if(!e)return;const t=(l=this.config)==null?void 0:l.style,{colors:{main:n,mainText:i,supplementSecond:a,supplementFirst:o,subText:s}}=e;t!=null&&t.color&&(t.color=[n,i,s,o,a]),t.legend&&((c=t.legend.itemName)!=null&&c.style)&&(t.legend.itemName.style.fill=i),t!=null&&t.xAxis&&((f=(u=t==null?void 0:t.xAxis)==null?void 0:u.label)!=null&&f.style)&&(t.xAxis.label.style.fill=s),t!=null&&t.xAxis&&((d=t==null?void 0:t.xAxis)!=null&&d.title)&&(t.xAxis.title.style.fill=i),t!=null&&t.xAxis&&((p=(g=t==null?void 0:t.xAxis)==null?void 0:g.line)!=null&&p.style)&&(t.xAxis.line.style.stroke=o),t!=null&&t.xAxis&&((m=(y=(v=t==null?void 0:t.xAxis)==null?void 0:v.grid)==null?void 0:y.line)!=null&&m.style)&&(t.xAxis.grid.line.style.stroke=o),t!=null&&t.xAxis&&((_=(x=t==null?void 0:t.xAxis)==null?void 0:x.tickLine)!=null&&_.style)&&(t.xAxis.tickLine.style.stroke=o),t!=null&&t.xAxis&&((A=(S=t==null?void 0:t.xAxis)==null?void 0:S.subTickLine)!=null&&A.style)&&(t.xAxis.subTickLine.style.stroke=a),t!=null&&t.yAxis&&((C=(b=t==null?void 0:t.yAxis)==null?void 0:b.label)!=null&&C.style)&&(t.yAxis.label.style.fill=s),t!=null&&t.yAxis&&((E=t==null?void 0:t.yAxis)!=null&&E.title)&&(t.yAxis.title.style.fill=i),t!=null&&t.yAxis&&((I=(T=t==null?void 0:t.yAxis)==null?void 0:T.line)!=null&&I.style)&&(t.yAxis.line.style.stroke=o),t!=null&&t.yAxis&&(($=(M=(w=t==null?void 0:t.yAxis)==null?void 0:w.grid)==null?void 0:M.line)!=null&&$.style)&&(t.yAxis.grid.line.style.stroke=o),t!=null&&t.yAxis&&((R=(P=t==null?void 0:t.yAxis)==null?void 0:P.tickLine)!=null&&R.style)&&(t.yAxis.tickLine.style.stroke=o),t!=null&&t.yAxis&&((O=(L=t==null?void 0:t.yAxis)==null?void 0:L.subTickLine)!=null&&O.style)&&(t.yAxis.subTickLine.style.stroke=a),this.update({style:t},{reRender:!0})}}const AnimationConfig$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdScatterCommonStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdScatterCommonConfig-i8Too6eA.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(r=>({default:r.AntdScatterCommonStyleConfig}))),AntdScatterFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdScatterCommonConfig-i8Too6eA.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(r=>({default:r.AntdScatterFieldMapping}))),ThemeConfig$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$6=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AbstractScatterDefinition extends AntdCommonDefinition{getController(){return AntdCommonScatterController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$6,data:DataConfig$6,style:AntdScatterCommonStyleConfig,animation:AnimationConfig$6,theme:ThemeConfig$6,mapping:AntdScatterFieldMapping}}}const __vite_glob_0_6=Object.freeze(Object.defineProperty({__proto__:null,default:AbstractScatterDefinition},Symbol.toStringTag,{value:"Module"})),baseAreaImg="/light-chaser-app/assets/base-area-rTZyFFIu.png",AntdBaseAreaStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdBaseAreaConfig-1lmoZFY4.js"),__vite__mapDeps([33,1,2,3,28,12,13,14,29,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,26,27,30,31])).then(r=>({default:r.AntdBaseAreaStyleConfig}))),AntdBaseAreaFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdBaseAreaConfig-1lmoZFY4.js"),__vite__mapDeps([33,1,2,3,28,12,13,14,29,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,26,27,30,31])).then(r=>({default:r.AntdBaseAreaFieldMapping})));class AntdBaseAreaDefinition extends AbstractAreaDefinition{getBaseInfo(){return{compName:"Antd基础面积图",compKey:"AntdBaseArea",type:"条形图",typeKey:"area"}}getChartImg(){return baseAreaImg}getMenuToConfigContentMap(){let e=super.getMenuToConfigContentMap();return e.style=AntdBaseAreaStyleConfig,e.mapping=AntdBaseAreaFieldMapping,e}getInitConfig(){const e=[{name:"Q1",value:140},{name:"Q2",value:205},{name:"Q3",value:186},{name:"Q4",value:220}];return{base:{id:"",name:"基础面积图",type:"AntdBaseArea"},style:{data:e,xField:"name",yField:"value",color:"#00d7ff",smooth:!1,supportCSSTransform:!0,isStack:!1,xAxis:{range:[0,1],grid:null,label:{style:{fill:"#adadadff",fontSize:10}},line:{style:{stroke:"#c7c7c76e",lineWidth:1}},tickLine:null,subTickLine:null,title:null,position:"bottom"},yAxis:{grid:null,label:{style:{fill:"#9a9a9aff",fontSize:10}},line:null,tickLine:null,subTickLine:null,title:null},legend:{position:"right-top",layout:"vertical",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"wave-in",duration:3e3}},startOnZero:!1,point:{size:4,style:{fill:"#00ddffff"}},line:{size:0}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_7=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseAreaDefinition},Symbol.toStringTag,{value:"Module"})),percentAreaImg="/light-chaser-app/assets/percent-area-ximgswaD.png";class AntdPercentAreaDefinition extends AbstractAreaDefinition{getBaseInfo(){return{compName:"Antd百分比面积图",compKey:"AntdPercentArea",type:"条形图",typeKey:"area"}}getChartImg(){return percentAreaImg}getInitConfig(){const e=[{country:"Asia",year:"1750",value:502},{country:"Asia",year:"1800",value:635},{country:"Asia",year:"1850",value:809},{country:"Asia",year:"1900",value:947},{country:"Asia",year:"1950",value:1402},{country:"Asia",year:"1999",value:3634},{country:"Asia",year:"2050",value:5268},{country:"Africa",year:"1750",value:106},{country:"Africa",year:"1800",value:107},{country:"Africa",year:"1850",value:111},{country:"Africa",year:"1900",value:133},{country:"Africa",year:"1950",value:221},{country:"Africa",year:"1999",value:767},{country:"Africa",year:"2050",value:1766},{country:"Europe",year:"1750",value:163},{country:"Europe",year:"1800",value:203},{country:"Europe",year:"1850",value:276},{country:"Europe",year:"1900",value:408},{country:"Europe",year:"1950",value:547},{country:"Europe",year:"1999",value:729},{country:"Europe",year:"2050",value:628}];return{base:{id:"",name:"百分比面积图",type:"AntdPercentArea"},style:{data:e,xField:"year",yField:"value",seriesField:"country",isPercent:!0,xAxis:{position:"bottom",range:[0,1],grid:null,label:{style:{fill:"#aaaaaaff",fontSize:8}},line:null,tickLine:null,subTickLine:null,title:null},yAxis:{position:"left",grid:null,label:{style:{fill:"#afafafff",fontSize:8}},line:{style:{stroke:"#545454c7",lineWidth:1}},tickLine:null,subTickLine:null,title:null},smooth:!0,legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#b1b1b1ff",fontSize:12}}},supportCSSTransform:!0,animation:{appear:{animation:"wave-in",duration:3e3}},line:{style:{lineWidth:0}},color:["#4fa3ffff","#009affff","#006d7fff"],areaStyle:{},point:{size:3,style:{fill:"#78edffad"}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_8=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPercentAreaDefinition},Symbol.toStringTag,{value:"Module"})),stackAreaImg="/light-chaser-app/assets/stack-area-KoSo3CYW.png";class AntdStackAreaDefinition extends AbstractAreaDefinition{getBaseInfo(){return{compName:"Antd堆叠面积图",compKey:"AntdStackArea",type:"条形图",typeKey:"area"}}getChartImg(){return stackAreaImg}getInitConfig(){const e=[{country:"北美",date:1965,value:1390.5},{country:"北美",date:1966,value:1469.5},{country:"北美",date:1967,value:1521.7},{country:"北美",date:1968,value:1615.9},{country:"北美",date:1969,value:1703.7},{country:"北美",date:1970,value:1767.8},{country:"北美",date:1971,value:1806.2},{country:"北美",date:1972,value:1903.5},{country:"北美",date:1973,value:1986.6},{country:"北美",date:1974,value:1952},{country:"北美",date:1975,value:1910.4},{country:"北美",date:1976,value:2015.8},{country:"北美",date:1977,value:2074.7},{country:"北美",date:1978,value:2092.7},{country:"北美",date:1979,value:2123.8},{country:"北美",date:1980,value:2068.3},{country:"北美",date:1981,value:2018},{country:"北美",date:1982,value:1951.5},{country:"北美",date:1983,value:1941.1},{country:"北美",date:1984,value:2046.2},{country:"北美",date:1985,value:2053.1},{country:"北美",date:1986,value:2060.7},{country:"北美",date:1987,value:2130.8},{country:"北美",date:1988,value:2223.5},{country:"北美",date:1989,value:2275.9},{country:"北美",date:1990,value:2280.7},{country:"北美",date:1991,value:2282},{country:"北美",date:1992,value:2319.7},{country:"北美",date:1993,value:2366.6},{country:"北美",date:1994,value:2420.2},{country:"北美",date:1995,value:2466.9},{country:"北美",date:1996,value:2547.4},{country:"北美",date:1997,value:2569},{country:"北美",date:1998,value:2585.2},{country:"北美",date:1999,value:2633.8},{country:"北美",date:2e3,value:2699.4},{country:"北美",date:2001,value:2640.1},{country:"北美",date:2002,value:2687.7},{country:"北美",date:2003,value:2700.7},{country:"北美",date:2004,value:2759.4},{country:"北美",date:2005,value:2775.6},{country:"北美",date:2006,value:2761.9},{country:"北美",date:2007,value:2809.5},{country:"北美",date:2008,value:2759.4},{country:"北美",date:2009,value:2632.5},{country:"北美",date:2010,value:2720.7},{country:"北美",date:2011,value:2722.9},{country:"北美",date:2012,value:2665.1},{country:"北美",date:2013,value:2738.3},{country:"北美",date:2014,value:2766.8},{country:"北美",date:2015,value:2739.7},{country:"北美",date:2016,value:2761.9},{country:"北美",date:2017,value:2772.8},{country:"中南美",date:1965,value:109.2},{country:"中南美",date:1966,value:115.7},{country:"中南美",date:1967,value:120.5},{country:"中南美",date:1968,value:128},{country:"中南美",date:1969,value:134.4},{country:"中南美",date:1970,value:142.2},{country:"中南美",date:1971,value:157.5},{country:"中南美",date:1972,value:169.5},{country:"中南美",date:1973,value:186.3},{country:"中南美",date:1974,value:195.5},{country:"中南美",date:1975,value:198},{country:"中南美",date:1976,value:211.7},{country:"中南美",date:1977,value:223.8},{country:"中南美",date:1978,value:236.5},{country:"中南美",date:1979,value:251.8},{country:"中南美",date:1980,value:262.9},{country:"中南美",date:1981,value:262.7},{country:"中南美",date:1982,value:265.9},{country:"中南美",date:1983,value:268.3},{country:"中南美",date:1984,value:278.3},{country:"中南美",date:1985,value:285.2},{country:"中南美",date:1986,value:304.2},{country:"中南美",date:1987,value:315.4},{country:"中南美",date:1988,value:324.6},{country:"中南美",date:1989,value:329.9},{country:"中南美",date:1990,value:331.1},{country:"中南美",date:1991,value:339.7},{country:"中南美",date:1992,value:355.8},{country:"中南美",date:1993,value:368.8},{country:"中南美",date:1994,value:390.9},{country:"中南美",date:1995,value:408.3},{country:"中南美",date:1996,value:425.8},{country:"中南美",date:1997,value:448.2},{country:"中南美",date:1998,value:465.5},{country:"中南美",date:1999,value:463.7},{country:"中南美",date:2e3,value:476.1},{country:"中南美",date:2001,value:477.7},{country:"中南美",date:2002,value:483.5},{country:"中南美",date:2003,value:489.3},{country:"中南美",date:2004,value:515.5},{country:"中南美",date:2005,value:533.6},{country:"中南美",date:2006,value:564},{country:"中南美",date:2007,value:587},{country:"中南美",date:2008,value:605.8},{country:"中南美",date:2009,value:596.8},{country:"中南美",date:2010,value:632.5},{country:"中南美",date:2011,value:658.9},{country:"中南美",date:2012,value:676.5},{country:"中南美",date:2013,value:692},{country:"中南美",date:2014,value:697.7},{country:"中南美",date:2015,value:701.1},{country:"中南美",date:2016,value:696.8},{country:"中南美",date:2017,value:700.6},{country:"欧洲",date:1965,value:1058.1},{country:"欧洲",date:1966,value:1089.7},{country:"欧洲",date:1967,value:1121.7},{country:"欧洲",date:1968,value:1196.6},{country:"欧洲",date:1969,value:1285.5},{country:"欧洲",date:1970,value:1369},{country:"欧洲",date:1971,value:1406.2},{country:"欧洲",date:1972,value:1472.7},{country:"欧洲",date:1973,value:1558},{country:"欧洲",date:1974,value:1535.5},{country:"欧洲",date:1975,value:1519.3},{country:"欧洲",date:1976,value:1606.9},{country:"欧洲",date:1977,value:1632.4},{country:"欧洲",date:1978,value:1687.5},{country:"欧洲",date:1979,value:1749.6},{country:"欧洲",date:1980,value:1706.4},{country:"欧洲",date:1981,value:1661.4},{country:"欧洲",date:1982,value:1630.2},{country:"欧洲",date:1983,value:1645.2},{country:"欧洲",date:1984,value:1686.9},{country:"欧洲",date:1985,value:1779.4},{country:"欧洲",date:1986,value:1811.3},{country:"欧洲",date:1987,value:1849.7},{country:"欧洲",date:1988,value:1870},{country:"欧洲",date:1989,value:1875},{country:"欧洲",date:1990,value:1853.3},{country:"欧洲",date:1991,value:1844.6},{country:"欧洲",date:1992,value:1814.1},{country:"欧洲",date:1993,value:1805.3},{country:"欧洲",date:1994,value:1791.3},{country:"欧洲",date:1995,value:1836.2},{country:"欧洲",date:1996,value:1896.1},{country:"欧洲",date:1997,value:1896.4},{country:"欧洲",date:1998,value:1918.8},{country:"欧洲",date:1999,value:1907.7},{country:"欧洲",date:2e3,value:1932.1},{country:"欧洲",date:2001,value:1959.2},{country:"欧洲",date:2002,value:1954.8},{country:"欧洲",date:2003,value:1991.6},{country:"欧洲",date:2004,value:2025.4},{country:"欧洲",date:2005,value:2037.4},{country:"欧洲",date:2006,value:2056.4},{country:"欧洲",date:2007,value:2041.7},{country:"欧洲",date:2008,value:2038.5},{country:"欧洲",date:2009,value:1932.1},{country:"欧洲",date:2010,value:2001.1},{country:"欧洲",date:2011,value:1949.1},{country:"欧洲",date:2012,value:1944.3},{country:"欧洲",date:2013,value:1934},{country:"欧洲",date:2014,value:1871.2},{country:"欧洲",date:2015,value:1908.7},{country:"欧洲",date:2016,value:1934.6},{country:"欧洲",date:2017,value:1969.5}];return{base:{id:"",name:"堆叠面积图",type:"AntdStackArea"},style:{data:e,xField:"date",yField:"value",seriesField:"country",smooth:!1,supportCSSTransform:!0,color:["#4ebfffff","#00a3ffff","#0060b1ff"],xAxis:{grid:null,label:{style:{fill:"#8c8c8cff",fontSize:10}},line:null,tickLine:null,subTickLine:null,title:null,position:"left"},yAxis:{grid:null,label:{style:{fill:"#a8a8a8ff",fontSize:10}},line:{style:{stroke:"#9e9e9e6e",lineWidth:1}},tickLine:null,subTickLine:null,title:null,position:"bottom"},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a4a4a4ff",fontSize:10}}},animation:{appear:{animation:"wave-in",duration:3e3}},line:{style:{lineWidth:0}},point:{size:0,style:{fill:"#ffffffff"}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_9=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackAreaDefinition},Symbol.toStringTag,{value:"Module"})),baseBarImg="/light-chaser-app/assets/base-bar-o8Kakkm6.png";class AntdBaseBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd基础条形图",compKey:"AntdBaseBar",type:"条形图",typeKey:"bar"}}getChartImg(){return baseBarImg}getInitConfig(){const e=[{name:"1951 年",value:48},{name:"1952 年",value:52},{name:"1956 年",value:22}];return{base:{id:"",name:"基础条形图",type:"AntdBaseBar"},style:{data:e,xField:"value",yField:"name",seriesField:"name",maxBarWidth:8,color:["#005d71ff","#00d0e4ff","#5bf0ffff"],barStyle:void 0,supportCSSTransform:!0,xAxis:{grid:null,label:{style:{fill:"#878787ff",fontSize:10}},line:{style:{stroke:"#6f6f6f91",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#6b6b6bff",fontSize:10},offset:9},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#989898ff",fontSize:10}}},animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_10=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseBarDefinition},Symbol.toStringTag,{value:"Module"})),groupBarImg="/light-chaser-app/assets/group-bar-yoW9hgxO.png";class AntdGroupBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd分组条形图",compKey:"AntdGroupBar",type:"条形图",typeKey:"bar"}}getChartImg(){return groupBarImg}getInitConfig(){const e=[{label:"Mon.",type:"series1",value:2800},{label:"Mon.",type:"series2",value:2260},{label:"Tues.",type:"series1",value:1800},{label:"Tues.",type:"series2",value:1300},{label:"Wed.",type:"series1",value:950},{label:"Wed.",type:"series2",value:900}];return{base:{id:"",name:"Antd分组条形图",type:"AntdGroupBar"},style:{data:e,isGroup:!0,xField:"value",yField:"label",seriesField:"type",color:["#00a6ffff","#5dd1ffff"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#929292ff",fontSize:10}},line:{style:{stroke:"#a2a2a273",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#9c9c9cff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#adadadff",fontSize:12}}},maxBarWidth:8,supportCSSTransform:!0,animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_11=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGroupBarDefinition},Symbol.toStringTag,{value:"Module"})),percentBarImg="/light-chaser-app/assets/percent-bar-dd_G1Ngg.png";class AntdPercentBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd百分比条形图",compKey:"AntdPercentBar",type:"条形图",typeKey:"bar"}}getChartImg(){return percentBarImg}getInitConfig(){const e=[{country:"Asia",year:"1750",value:502},{country:"Asia",year:"1800",value:635},{country:"Asia",year:"1850",value:809},{country:"Africa",year:"1750",value:106},{country:"Africa",year:"1800",value:107},{country:"Africa",year:"1850",value:111},{country:"Europe",year:"1750",value:163},{country:"Europe",year:"1800",value:203},{country:"Europe",year:"1850",value:276}];return{base:{id:"",name:"Antd百分比条形图",type:"AntdPercentBar"},style:{data:e,xField:"value",yField:"year",seriesField:"country",isPercent:!0,isStack:!0,color:["#59bfff","#298aff","#004294"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#b7b7b7ff",fontSize:10}},line:{style:{stroke:"#a4a4a473",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#9e9e9eff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#989898ff",fontSize:12}}},maxBarWidth:8,supportCSSTransform:!0,animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_12=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPercentBarDefinition},Symbol.toStringTag,{value:"Module"})),rangeBarImg="/light-chaser-app/assets/range-bar-2Igv1w3w.png";class AntdRangeBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd区间条形图",compKey:"AntdRangeBar",type:"条形图",typeKey:"bar"}}getChartImg(){return rangeBarImg}getInitConfig(){const e=[{type:"sort1",values:[36,130]},{type:"sort2",values:[60,95]},{type:"sort3",values:[50,110]},{type:"sort4",values:[20,135]}];return{base:{id:"",name:"Antd区间条形图",type:"AntdRangeBar"},style:{data:e,xField:"values",yField:"type",seriesField:"type",isRange:!0,color:["#2ea4ffff","#7cdaffff","#6cc2ffff"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#9c9c9cff",fontSize:11}},line:{style:{stroke:"#b9b9b975",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#9c9c9cff",fontSize:11}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#9e9e9eff",fontSize:12}}},maxBarWidth:8,supportCSSTransform:!0,animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_13=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRangeBarDefinition},Symbol.toStringTag,{value:"Module"})),stackBarImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ8AAACqCAIAAAA8612AAAALlElEQVR4Xu3dfUzU9x3AcRDrdF02bedS5e7gDjge6gR8qJHalhaBAlLKxIoNihQrWqEi1lauBXk2VYklCipQqEEKrS3MZp1Z1izLtibNknZdky5Ln/fg1gezZuvWJU328PG+eIWftfl4Oe8Q36984u5+dz92vfu9fw9//cJsAHTCrAsAXAS1AFrUAmhRC6BFLYAWtQBa1AJoXXW1RDpdkbFxlrG+yWt+ckrEu59Yl04Odmec3RlvGeubvK6rqAz/6+cRvz8TfvaLOdt3WV/Gpbjqarm28XDYz9+3TGS00/q+yV1LvOe9xH3/s4z1TV5Sy8wf/lQe3JC2YsbLv7W+jEtBLdpa5icmTX/jfZlpH3z6raPHZcl39rRd2zs4/fV3wj/8fLan4cs1L79LrSXS5Zp5+hfXl5TJknmpiyPe+eiaV98K/8u/zNFmxi9/882hU2Gf/te6MiaiFm0ts07+eG7BavM4/Mw/5y1ZKrXMPHVutx0ZExvxzse+dwbBJdUy7Y9/v+blN+S/5Tv1rbIk4u0Pb1i23Lw67Q+fRrrjZ/zqdfMSvh61aGu55rW3IuMTzOMZP/v13B+skVpmexrNEtkife8MgkuqxZyJiWl//kekKyb8o3/7Xp3+2tvzFi+RY8v3snN9C3Ex1KKtZdboT3zHlmlnPpv//YVXXC3hZz6zORwR73785bHl3U8iY2LO1ZKV8+U6uAhq+bpawv72HwlD5hsvvSLXLRG/+9P0Nz6Qs5dvN++zea9brohaws9+If8JcnE1p2qnzXvdMu29s3LdIguvLy23ea9bqEXjqqtlbmb+nNJKy8ge1/q+yS36jm2unFrLWN+EQLvqagH8Ri2AFrUAWtQCaFELoEUtgBa1AFrUAmhRC6BFLYAWtQBa1AJoUQugRS2AFrUAWtQCaFELoEUtgBa1AFrUAmhRC6BFLYAWtQBa1AJoUQugRS2AFrUAWmO1FBUVJSYmyoPY2Ni9e/c2NDT4lh88eDA9Pd23QnV1te+xxXVrNjJmvlu8zXkHMzZ29yLrtnJlCnM6ncPDw319fQsXLpTnPT09EkxSUtIjjzySkZFh2uju7na5XHl5eQMDA729vZY/4RNx6tXw028yMjMHXklo+Ywx40jOsG4rV6axY0tbW5uppbOzU/6Nioo6duxYRUVFWlqaPC0rK8vKyjLvlHLGVr0AtfiGWsbPlK2lubnZ4/Hs27dPjiFut3toaEia6e/vz8kZu78HtWiGWsbPlK3FkPOuxsax+/iI+vr6hISxm8hRi2aoZfxM2Vrksl4OI3Jln5KSEhMTU1hYWFpa2tTU5FuBWjRDLeNnqtUSHR1tt9vNA4nEcf5eWS4v37uF0/kVN50zqMU31DJ+plotAXF90QbGzNw1W5x3bGXM2N2p1m3lyhTIWoCpjVoALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0ztUSGxvb0tJi7mm8cuXKI0eOPPnkk8nJyfK0sbGxs7OzurpaHt99991dXV09PT2pqV99G8HZZVWzN9Uwl3XmF+5wrWpgLus4c+usG7dXWExMTHt7+4EDB0wt3d3dDodD+mltbS0uLpZCZGFDQ8OCBQsSEhLkcUpKSnNzs+WvGNzTOAgzr/6lC28azAR4Gs9aN26vsTOxtrY2U4scOux2e3R0dF9fX3l5eV5eniysqqrKz88378zIyNi0adP51SegliAMtQRjlLWsXbtWgjl06JCcdEVFRclpWEdHR1NTk0QirxYUFMhxRpaP/xM+1BKEoZZgjLIWIy4urqamxvf0iSeekNMzOdRkZ2f7Fl6IWoIw1BKMUdbi8Xh2797d29srBxC32y1HFUll3bp18pIs3OVlLvovRC1BGGoJxnx9LQFBLUEYagnGBKGWSFcMc7nHFi0Ty1z2+SqBrAWY2qgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZA61wtdru9oqLC3NM4MTFxcHCwr6/P4XDIU1k+MjJy1113yeN77713dHT08OHD0dHRE//ImFn7+mftZy555taPxG3+EePH2N0p1q3wcgpzuVy9vb1dXV2mlu7ubqfTmZCQUFdXl5eXV15eLgsPHjzodrvNCpmZmaWlpeP/hA/3NPZv5nS/ab2nLqObYNdi/qetrc3UcvToUfk3Kiqqp6dHDiy33XabPL3//vtzc3PNO6WiZcuWja09EbX4N9Ti94S4loceeqi9vV2akYOMnHENDw8/+uij8jQ7O1uOOevWrZOjUEZGxoS/cR61+DfU4veEuBYjNjbW4/H4nra2tsoS81hOyTo6OnwvjUct/g21+D0hrqWysnL9+vUnTpyI83rggQcee+yxmpoaeam2tlYu9Ds7O1euXDn+T/hQi39DLX5PaGoJCGrxb6jF77mCa5mXvJjxY+anLHckLmP8GFv02AVCcASyFmBqoxZAi1oALWoBtKgF0KIWQItaAC1qAbSoBdCiFkCLWgAtagG0qAXQohZAi1oALWoBtKgF0ApkLSUlJRuBK9+GDRusG7dXIGsBpjZqAbSoBdCiFkCLWgAtagG0qAXQCkwtycnJx48f37NnT319vfW1SWPRokVdXV21tbVPPfWUPN25c2dzc3N3d/fy5cujoqKGh4crKiqefvppu91uXTOkHA7HyZMnU1NT5cHAwMDmzZufffZZ+cApKSm9vb0tLS27du2yrhNSWVlZsjFs3br19ttvly9TPvz27dvNd15XVycbSX9/v2ww1tVCSj7ktm3bTp06JR84Jyfn2LFjjz/++Pr1623ee7Rs2bJF3uB2uwNTS09Pj7lhmPz/WV+bfF544QXZ8szvl5CQcOTIkezs7HvuucfmvVON/MbWFUKqurpaqpZapOr77rtPlqxZs2bVqlUStvnOn3/+ees6oSMZd3Z2+vY48uFvvfVWm/eGWbK3Mt95UlKSvGf8WiHX1tZm/pUPeeLECbNwZGRk8eLFZmckuwCJJzC1jI6Omgey24iLi5v44uSydOlSyWPBggX79+83S4aGhqqqqlasWCGPc3NzZVsc//7QyszMfPDBBysrK6WWkpKSO++8UxbefPPNks3p06fNe2QT9N0vJORk7yMHwKamJtnm0tPT5ehn7ionu2fZH+3du9e8TQ6PE1YLNTnjkGOI+XiyPZiF8iElkrVr19q8m83u3bsDU8tzzz1nHsgv53Q6J744ieTn55u9iPyo7e3tNu89N+XXlUOKuQua7LMLCgosa4WK7IPlRFE6efjhhyWbwsJCc4e2W265Rcp58cUXzdvkO7/YnUCD78YbbzS7IXlw4MABOYaYWiT4vLw8Ob2xeb/zwcFBy4ohJMcT2V3azt8DTw7aZrnUIicaxcXF8vimm26qqakJTC3yLcgxS05v5OBlfW3SkFMCuTIxj+UHk3NreZCWliYXMHKSIz+nPJXLgMlzSi1HjHQvOd2XVORCRXaBNu/92+THO3TokCyR73xSbXnSrRQun0p2xvI5i4qKzL5Zdkkul8tsiPJfJBcJ1jVDR3aR5hR39erVshuSi5ZYL7m+8MW/ceNGKScwtcjZqpyDPfPMM/Hx8dbXJg0pQc4YR7zkW5B9tjzt6OiQn1bikWbkAmBSnYb5mDMx2/lbTJeVldm826UcVYaHh3030J0k5JxWronlizVHPDm9kS9W9kfyeMmSJfKdy1Hd3DF78vB4PPLFtra2ygeTTmRLlp2puaaQ2uWlHTt2yEYSmFqAqwG1AFr/B72o7yOp7VkjAAAAAElFTkSuQmCC";class AntdStackBarDefinition extends AbstractBarDefinition{getBaseInfo(){return{compName:"Antd堆叠条形图",compKey:"AntdStackBar",type:"条形图",typeKey:"bar"}}getChartImg(){return stackBarImg}getInitConfig(){const e=[{year:"1991",value:300,type:"Lon"},{year:"1992",value:400,type:"Lon"},{year:"1993",value:350,type:"Lon"},{year:"1991",value:300,type:"Bor"},{year:"1992",value:400,type:"Bor"},{year:"1993",value:350,type:"Bor"}];return{base:{id:"",name:"Antd堆叠条形图",type:"AntdStackBar"},style:{data:e,xField:"value",yField:"year",seriesField:"type",isStack:!0,maxBarWidth:8,supportCSSTransform:!0,color:["#00c0df","#298aff"],barStyle:{},xAxis:{grid:null,label:{style:{fill:"#b9b9b9ff",fontSize:10}},line:{style:{stroke:"#b9b9b980",lineWidth:1}},tickLine:null,subTickLine:null,position:"right",title:null},yAxis:{grid:null,label:{style:{fill:"#b3b3b3ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"scale-in-x",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_14=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackBarDefinition},Symbol.toStringTag,{value:"Module"})),baseColumnImg="/light-chaser-app/assets/base-column-wb9fa2bU.png";class AntdBaseColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd基础柱状图",compKey:"AntdBaseColumn",type:"柱状图",typeKey:"column"}}getChartImg(){return baseColumnImg}getInitConfig(){const e=[{name:"1951 年",value:48},{name:"1952 年",value:52},{name:"1956 年",value:22}];return{base:{id:"",name:"基础条形图",type:"AntdBaseBar"},style:{data:e,xField:"name",yField:"value",seriesField:"name",maxColumnWidth:8,supportCSSTransform:!0,color:["#00dbffff"],columnStyle:{fill:void 0},xAxis:{grid:null,label:{style:{fill:"#afafafff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a8a8a8ff",fontSize:10}},line:{style:{stroke:"#9898987a",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a6a6a6ff",fontSize:10}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_15=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseColumnDefinition},Symbol.toStringTag,{value:"Module"})),groupColumnImg="/light-chaser-app/assets/group-column-PnUC7N0s.png";class AntdGroupColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd分组柱状图",compKey:"AntdGroupColumn",type:"柱状图",typeKey:"column"}}getChartImg(){return groupColumnImg}getInitConfig(){const e=[{label:"Mon.",type:"series1",value:2800},{label:"Mon.",type:"series2",value:2260},{label:"Tues.",type:"series1",value:1800},{label:"Tues.",type:"series2",value:1300},{label:"Wed.",type:"series1",value:950},{label:"Wed.",type:"series2",value:900}];return{base:{id:"",name:"Antd分组柱状图",type:"AntdGroupColumn"},style:{data:e,isGroup:!0,xField:"label",yField:"value",seriesField:"type",maxColumnWidth:8,supportCSSTransform:!0,color:["#00c0df","#298aff"],columnStyle:{},xAxis:{grid:null,label:{style:{fill:"#949494ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b1b1b1ff",fontSize:10}},line:{style:{stroke:"#b3b3b37d",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a8a8a8ff",fontSize:10}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_16=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGroupColumnDefinition},Symbol.toStringTag,{value:"Module"})),percentColumnImg="/light-chaser-app/assets/percent-column-gPdW4L9g.png";class AntdPercentColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd百分比柱状图",compKey:"AntdPercentColumn",type:"柱状图",typeKey:"column"}}getChartImg(){return percentColumnImg}getInitConfig(){const e=[{country:"Asia",year:"1750",value:502},{country:"Asia",year:"1800",value:635},{country:"Asia",year:"1850",value:809},{country:"Africa",year:"1750",value:106},{country:"Africa",year:"1800",value:107},{country:"Africa",year:"1850",value:111},{country:"Europe",year:"1750",value:163},{country:"Europe",year:"1800",value:203},{country:"Europe",year:"1850",value:276}];return{base:{id:"",name:"Antd百分比柱状图",type:"AntdPercentColumn"},style:{data:e,xField:"year",yField:"value",seriesField:"country",isPercent:!0,isStack:!0,maxColumnWidth:8,supportCSSTransform:!0,color:["#59bfff","#298aff","#004294"],columnStyle:{},xAxis:{grid:null,label:{style:{fill:"#a2a2a2ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b3b3b3ff",fontSize:10}},line:{style:{stroke:"#92929278",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_17=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPercentColumnDefinition},Symbol.toStringTag,{value:"Module"})),rangeColumnImg="/light-chaser-app/assets/range-column-VnDciZC_.png";class AntdRangeColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd区间柱状图",compKey:"AntdRangeColumn",type:"柱状图",typeKey:"column"}}getChartImg(){return rangeColumnImg}getInitConfig(){const e=[{type:"sort1",values:[76,100]},{type:"sort2",values:[56,108]},{type:"sort3",values:[38,129]},{type:"sort4",values:[38,129]}];return{base:{id:"",name:"Antd区间柱状图",type:"AntdRangeColumn"},style:{data:e,xField:"type",yField:"values",seriesField:"type",isRange:!0,maxColumnWidth:8,supportCSSTransform:!0,color:["#00dbffff"],columnStyle:{fill:"#00c0df"},xAxis:{grid:null,label:{style:{fill:"#a6a6a6ff",fontSize:11}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#d0d0d0ff",fontSize:11}},line:{style:{stroke:"#9e9e9e91",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#969696ff",fontSize:12}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_18=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRangeColumnDefinition},Symbol.toStringTag,{value:"Module"})),stackColumnImg="/light-chaser-app/assets/stack-column-vyea8mUD.png";class AntdStackColumnDefinition extends AbstractColumnDefinition{getBaseInfo(){return{compName:"Antd堆叠柱状图",compKey:"AntdStackColumn",type:"柱状图",typeKey:"column"}}getChartImg(){return stackColumnImg}getInitConfig(){const e=[{year:"1991",value:3,type:"Lon"},{year:"1992",value:4,type:"Lon"},{year:"1993",value:3.5,type:"Lon"},{year:"1991",value:3,type:"Bor"},{year:"1992",value:4,type:"Bor"},{year:"1993",value:3.5,type:"Bor"}];return{base:{id:"",name:"Antd堆叠柱状图",type:"AntdStackColumn"},style:{data:e,xField:"year",yField:"value",seriesField:"type",isStack:!0,maxColumnWidth:8,supportCSSTransform:!0,color:["#00c0df","#298aff"],columnStyle:{},xAxis:{grid:null,label:{style:{fill:"#c7c7c7ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b7b7b7ff"}},line:{style:{stroke:"#9e9e9e75",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#aaaaaaff",fontSize:12}}},animation:{appear:{animation:"scale-in-y",duration:3e3}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_19=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackColumnDefinition},Symbol.toStringTag,{value:"Module"}));class AntdGaugeController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Gauge,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Gauge,t)}updateTheme(e){}}const gaugeImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMEAAABuCAIAAAARauDwAAAM3klEQVR4Xu2d7VMURx7H9wl2YReWhQDLw4KIwgLLqohnIDzFx0PPSNTTSISAD0QTEDDFiSYYPYmpUy93llp15nJGr67qjIlUVLxUpUxSlbyJVanEJBVTpq5MVTJ/QPI6L+6abrPOfnv2QWB3Z2b7U7+amu359rDT+6W7p2emx2AQCAQCgUAgEAgAky3FVpKTUVfKIt1bYPNkW7IdJqsFpYIkJzXfmbtpSfmJLf4b+6YXla/3Fu9daa8txl0LdAwxTfW/9/BumK3wDK82Z9jwrwq0TnplgfcfO/jfO6ZR83a/a0UNfhWBtrB6cqr+2cf/uvGP7HY/fjmBypkz9gT/QyY8qt7cac5Mw+8qUBVp5Xm114f5H09tkb3Kh19dkHDIGTj/U00vyKlW6YHfFQ2sLOhtztuydNH+50g3vKCnuei55SUj7fP+vLXm8vN8rmkE2SEehiAhOPwe/ueJMsr/tNnZOM9gxH3Kaercj0nBZLV6y8Y38juPMgq2N+MeBXGDnELzP0nEmDO23lrkYnswmszBu1QgoocY1S0byNKS4/C88Fv+j0YM17Jq3KMg1lT+vZf/JcKE+5nHcBcGQ97cyP2SKD1ksWJn2bXKV3t9iP8mYcKYEtnTglmA/MvypR8qSkbWYH4ZLV0vYhJHkXcJJnHYs3INoVvE/M5H+S8WKoqHVmN+wexSey3a/2zHohLMzNG45QVMmha1y7diEofFmbbgyl7+eyqG2WHF/IKZk7EoqjMv38SAMdXi8XhMJhPuItFcuHCBLCvOdvFfmw93TxPmF8yEeX95mi9lCNL5MJgeNCjnz5+X7SDxuN3u1NTUwMfKN7bzh8Ad0bDBGLKJFDwEfOHykVaeB7k2bdoEKYnlxo0bmEQawauRm2YxtD0jTLYUvkwhyLk0ZvuVZ599FpMSBGlYs7KyMJWSUTeHPyiIrDYvZhNEQ3pVIV+aEJgnmNdeew2TEsSVK1cwKZiKs9380cnDMyzO1x6SrGVVfDnKo7CvDfOoGK83ckWSmu/kD1MeVRd2YR5BKNzPNPElKI+G3w9hHl1Qv66v5u1wF+OmetmCiBTsauPLLhDV/7rfxVnSsSc4n+ZxFZSZU6aGhYoHVvIH/iAmhY3Ckr813JCu54V2uTjLXSr/GIoTJ06Q5caNGw8dOoTbYobNZjty5EhaWprdbicrDocDFRxzFz+4jG8tzuYPXx6yfAIZ2atr+cIKhNWTA/qyuschhae5ufn48eNkhfycZJmXh0MAMWL37t1sZXx8nCyPHTsWtJljzsJWTAo7qFH77iCqBbbyPL6kAmGUDR5Gj9VqJRUA8xAbtm5sbERRbBgbGzNQB4+MjJCVl156CRXR4Q99S533zZ2oTmbMditfRoFAddR0dXV1d3eTtowYiLUmrDaKA6TpJMuenh5WDx09ehQVURPmEmFx/wpUJy186QQCpQ8PG2lcunRpR0cHbosZpD+0a9f9U/FAuzZtwgxn233i0bYYG0g3hKmNTGkPLsMlI74rA3yhCAMp4p/EIhJlZbBXF/HFwYL0kKK8gTBJWLj6GZPZwhcUi5rLz2OGpMAYshVzPX7/ykDD5mGjUXW3AcUfeq8cPTM1GvniYuFYFNVoma7gS4EFnLL6Ht8s/5iELGrvkX90hL4XT377lP7JCzUePZnETXvUzD8V8o48lOqW0K0YKgUhCHWaliwtGn/kLKyFyndpCRThC5AF6vRHyiMO/rBJ+N7pR6kgLDlr/Hwxkqi62IdSncEfMwvUCaLAN4Gja7+58QdJkmw2/U6ild/ZwLuHREp+JkoF0fGgGCeH7/z3rvQrqNMNvHvYwaNOEDWlL07NtHToP68H3MNwu90o1QEl+9eie2i0bDtotiT3FZ/pYjQamzqnGi9FUK0DePf4fx2kN1tSmrcdMIrn8R6G+Uvbi6uXkhWfz4f2oeTn52MeTZO7sZ43kD+4K11YWS//KAiDq7Bc/vHevXvoIIpco3l495DwvrEddYLpgvahyJ/O1jaWrHTeQFAJCWbI999/jw6ioE6j8O7x0wk6UCeYAX6/H+1DQZ0mMSnfroAywYxB+1CWLVuGOs1RfvIp3kB+8bxmDBgZGUEHUVCnOdA9NMQLeGIE2oeSkpKCOg1htJh4A/lFQxYz7ty5gw6SJPZ8klapuriLN5DvHdGbjhVmsxkdREGdhuANJCqhWIP2oWi2OQtxA3lfX997772Xm5uLesHMOH369Llz57788kt0kCS1tbWhWhNktVbyBgpMNkBq3c7OTmKmuXPnshSj0Tg2NsYa71deeeXVV18N7Epw+PBhUjKkiFpbWwcHB12u+1P9Ey5evHjy5MnAkHRdXR06iBLQawneQCRILxtkMAnwhg0bDNRPBno1Ub5JH6xduxaToqC7u5ss7Xb73r17DbIH+C0WhTNctA8FRZqAN5A/UmeINNterzdwAX/5cl29WefmzZu3KcwHD8Xu3bszMzOJh0jlbYg0CYTidQ8NdokUh6fDPvpDrBP4r6qpmXqLpQrnKZ8exAHMPYyMjAxURKKsrMxAZ55g7tmzJ9w0cJcuXUIHSRJpBFGncixKL/Uhp/qok0EMlEUx0KmDplHQ6uSLL76QG2h6t0nZbDan08nWQ01THIBUOeggSSKVE+pUzry/KjxHZ7IpNN465tNPP5W7J26zHxn00SXiDeSP1BnSE5cvX5a7p7KyEhUxBu1DQZHK4Q2UJB5qamqSu+fs2bOoiAuKFz001q3mDZQMz2/MStdnVlDsVpeWaudJaqNZ4VKrvqcyff/99+XuidsEtKFYvHgxOkiS+vu18zCxyarwrpbSF59AnS44fvy43D2rVq1CRYJAB0nS1atXUaRaFN8UXtHRkZWvnbo0CioqKuTuIf1oVCSIdOcjJb5GdBAFpaqleGg17yG2yWxJsTnuj3OonNbW1ps3b37++ecff/zx/v04sd+tW7fkBrJaVfH2zLTMbEvq/Yft0T6UYLmK8U0ovLgUReoGeseMJUum3g88MTEhTwxcM1YbaB8KilQLbyBteSjgj2+//fbnn3/+8ccfAylyb23frurn49A+FBSpFt5AGvLQJ598wizyv2C++uqrgHs+/PDDBJ63Rwnah4Ii1cIbSEMeYi755ZdfwEMEtkm1jReA9qGgSLXwBtKch9A+FFYVsVeMqx/FO0BQpFp4A+nDQ19//TXZ9MEHH2AeVfLdd9+hg4SH4kMYD7FNXV1dmEeV/PDDD+gg4aH4wIzyzTffgIF++ukntslsNmMeVYL2oaBItfAG0pCHioqKeBvdu3ePJV67dg0zqBW0DwVFqsU/qfD2PxSpmNHRUeYYHpSqGLQPBUWqZZ7SPA0oUjcejwfc094e9EZi9YP2oaBIteSsXch7yLexs3HLvsbN+6pbNqTY0jGPYDaY/2j7kvV7mp8erV/Xh/ahYAbVYkpP5T1U0NuMOkEsQftIEunhoUi1GFPMvIdqLj2HOkHMcDqd6CBJ0tSjw0pvBqq9NoQyQcw4ePAgOkiS6us1NfMu7yG/1rrVmuazzz5DB0lS4Ak1bcAbSHgonqB9KChSObyBhIfiCdqHgiKV41pZw3uoYEcL6gSxAe1DQZHKMVoUTs1Etzo+jI6Oon0k6dSpU6hTP7yH/KI5iwu3b99GB0lSYWEh6tQPbyDhofiA9qGgSBOU/XED76HCPdqftl31oH0oKNIEiqPV7Kl797wFj20dyS2twjyCaeHIdtev6/M2rTeaTNevX0f7SNJbb72FebQCGohGTvF81AlmibTMHLQPJeK0V+qFNxCJRzrqUCeYPdA+FBRpiFS3k/dQMkwikygUG7K7d++iTluggWigKDTNzc16flt7aEpKSthKS0sLm+q0vr7e4/EEiTjQPpSIudSOfxINRKLyXA/qlHjyySfJcmgo6UYmBwYGxsbGyMrg4NSkTWQ9NzfXbDYvXLgwzPO1drsd7UNBneYw2RTmIoqyKjp27BhZxn8yQzVw4MABsmR3/DxFYelhamXSZqF9JGliYgJ1WoQ3EIms5sjOGB0dJcs1a9bghiSAeejIkSNk2d/f39DQQFZcLleYObvRPhSHw4E6LVJ6cB3voSiropdffrmpqQlTkwDmIavVSlbYE/6HDx9mb1xQ5NatW2gfCuq0C28gEmlzEzxpoZ5A71DY7Po6ofbqIO8hvio6ffo0e8uCIAykiwNjhvqvhAhGxdd33NiX2VDOBJ2dnTt37gzOJAhJdXX1mTNnAn0j9A6lt7c3OJP2UXz4lQSpb8+fP49qQRTs2LFj27Ztind6SDqrhBiKk1YX9rWlp4vnFWfEggUL+Ck+dFup1777oFdU8bce3CyYAePj43IP4Wb9wN7wOjlsCD3YKpgJH330ETHQihUrcIOecDZVYJJAIBAIBDPi//bPojGZYn48AAAAAElFTkSuQmCC",AnimationConfig$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdGaugeConfig=React.lazy(()=>__vitePreload(()=>import("./AntdGaugeConfig-YO5Q0ufd.js"),__vite__mapDeps([34,1,2])).then(r=>({default:r.AntdGaugeConfig}))),ThemeConfig$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$5=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AntdGaugeDefinition{getComponent(){return AntdGaugeController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$5,data:DataConfig$5,style:AntdGaugeConfig,animation:AnimationConfig$5,theme:ThemeConfig$5}}getBaseInfo(){return{compName:"Antd仪表盘",compKey:"AntdGauge",type:"仪表盘",typeKey:"gauge"}}getChartImg(){return gaugeImg}getInitConfig(){return{base:{id:"",name:"Antd仪表盘",type:"AntdGauge"},style:{percent:.75,range:{color:"#30BF78"},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},axis:{label:{formatter(e){return Number(e)*100}},subTickLine:{count:3}},statistic:{content:{formatter:({percent:e})=>`Rate: ${(e*100).toFixed(0)}%`,style:{color:"rgba(0,0,0,0.65)",fontSize:"16px"}}}},data:{dataSource:"static",staticData:{data:[]}}}}}const __vite_glob_0_20=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGaugeDefinition},Symbol.toStringTag,{value:"Module"})),baseLineImg="/light-chaser-app/assets/base-line-OYaftkGE.png",AntdBaseLineStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdBaseLineConfig-ta3Us7jr.js"),__vite__mapDeps([35,1,2,3,0,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(r=>({default:r.AntdBaseLineStyleConfig})));class AntdBaseLineDefinition extends AbstractLineDefinition{getBaseInfo(){return{compName:"Antd基础折线图",compKey:"AntdBaseLine",type:"折线图",typeKey:"line"}}getChartImg(){return baseLineImg}getMenuToConfigContentMap(){let e=super.getMenuToConfigContentMap();return e.style=AntdBaseLineStyleConfig,e}getInitConfig(){const e=[{name:"1990",value:525},{name:"1991",value:459},{name:"1992",value:357},{name:"1993",value:414},{name:"1994",value:234},{name:"1995",value:250},{name:"1996",value:156}];return{base:{id:"",name:"基础折线图",type:"AntdBaseLine"},style:{data:e,xField:"name",yField:"value",smooth:!1,supportCSSTransform:!0,color:"#00d7ff",lineStyle:{stroke:void 0,lineWidth:2},xAxis:{grid:null,label:{style:{fill:"#969696ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#b1b1b1ff",fontSize:9}},line:{style:{stroke:"#9e9e9e7d",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},animation:{appear:{animation:"wave-in",duration:3e3}},point:{size:4,style:{fill:"#00d7ff"}}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_21=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseLineDefinition},Symbol.toStringTag,{value:"Module"})),multiLineImg="/light-chaser-app/assets/multi-line-sQL9gk6w.png";class AntdMultiLineDefinition extends AbstractLineDefinition{getBaseInfo(){return{compName:"Antd多折线图",compKey:"AntdMultiLine",type:"折线图",typeKey:"line"}}getChartImg(){return multiLineImg}getInitConfig(){const e=[{year:"2007",value:1706,category:"sort1"},{year:"2007",value:448,category:"sort2"},{year:"2008",value:1361,category:"sort1"},{year:"2008",value:779,category:"sort2"},{year:"2009",value:1722,category:"sort1"},{year:"2009",value:430,category:"sort2"},{year:"2010",value:1626,category:"sort1"},{year:"2010",value:555,category:"sort2"}];return{base:{id:"",name:"多折线图",type:"AntdMultiLine"},style:{data:e,xField:"year",yField:"value",seriesField:"category",supportCSSTransform:!0,color:["#00a8ff","#00ffc9"],lineStyle:{},xAxis:{grid:null,label:{style:{fill:"#969696ff",fontSize:11}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a0a0a0ff",fontSize:10}},line:{style:{stroke:"#adadad75",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},smooth:!1,legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a0a0a0ff",fontSize:12}}},animation:{appear:{animation:"wave-in",duration:3e3}},point:{size:3}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_22=Object.freeze(Object.defineProperty({__proto__:null,default:AntdMultiLineDefinition},Symbol.toStringTag,{value:"Module"})),stepLineImg="/light-chaser-app/assets/step-line-ZsCy2NyX.png",AntdStepLineStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdStepLineConfig-KrXrDf8s.js"),__vite__mapDeps([36,1,2,3,0,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(r=>({default:r.AntdStepLineStyleConfig})));class AntdStepLineDefinition extends AbstractLineDefinition{getBaseInfo(){return{compName:"Antd阶梯折线图",compKey:"AntdStepLine",type:"折线图",typeKey:"line"}}getChartImg(){return stepLineImg}getMenuToConfigContentMap(){let e=super.getMenuToConfigContentMap();return e.style=AntdStepLineStyleConfig,e}getInitConfig(){const e=[{year:"1991",value:3},{year:"1992",value:4},{year:"1993",value:3.5},{year:"1994",value:5},{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:13},{year:"1999",value:8}];return{base:{id:"",name:"多折线图",type:"AntdStepLine"},style:{data:e,xField:"year",yField:"value",stepType:"vh",color:"#00d7ff",smooth:!0,supportCSSTransform:!0,lineStyle:{stroke:void 0,lineWidth:1},xAxis:{grid:null,label:{style:{fill:"#989898ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a6a6a6ff"}},line:{style:{stroke:"#9a9a9a8c",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"right-top",layout:"vertical",itemName:{style:{fill:"#00f0ffff",fontSize:12}}},animation:{appear:{animation:"wave-in",duration:3e3}},point:{size:3,style:{fill:"#00d7ff"},shape:"bowtie"}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_23=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStepLineDefinition},Symbol.toStringTag,{value:"Module"}));class AntdLiquidController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Liquid,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Liquid,t)}updateTheme(e){}}const liquidImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMEAAABuCAIAAAARauDwAAALFklEQVR4Xu2deVRU9xXHFURQXNg0rDIRRBYjIipIJAKKssggAwODDDPDIsjI6paaKAYQZUTZhwHiknpaE6PWJKZtUntOT9v805ye5tgktUnTU2ti1LomEYX/eocfjuN9LMMy+/2cezjj+7558/vd3/fd95v3nm+mTCEIgiAIgiAIgiAIk8HLNzBrx1l+1UeJVX8SVn8hbrguafxeVPsVf89fEso+Fu66FLOpCL+HsHIySk/ktdzPae4fR0ha+1OqLjvOdsYbJSye4OVxsqY7XE8wW8iqL69KrPQKjOeFxPGC1vACI3khMT7B64OicpPzW0tVP3DfBSFu6U/bfgp/EmFhuLkvEDdcQ2NfcvQLXtBqvKpuzHVxjxXVi5/foLS1L1nagFclzJ1NRceRdQLCU/BKE2O+p19J2/faHyGq+YeNjS1ejzA7EuQXtcc1LL4UrzHZLAyJlrY+1nyirPnedPsZeCXCLEgoeFMzkHntfZ68ELyGnsl57XeaBkgbb2KZMGU8fAI0c5SCjr4ZM+fgNQyIoPyMxkmbKy5gmTBBZI3XNWPm6s7DspGQKb7WtGq2kxuWCRPB3XuRZpxWJVVh2dg4uXrA93/WvLSqD7BMGJ2NhSfY8Eha+03525Cg4h3Wzry2J1gjjIjk6F02MGvSa7Bmeji7eWrq5ay5rlgmDE9uyxM2Hs7zfbFmwkibB89384LWYI0wJJod2tZ2GtZMHnHNZ6zxqxPlWCMMAxsAmABhwXxYt0XBehGfXYs1Qt+w1Oe392HB3IhIqqRqZATYKURZm9kbiBGZVMVstGjZBqwR+iC3WX01KrfFjA9hXOJzjzEbObt5Y42YXHKPDF4bx4L5s+XAp0+7NhVrxGQRK6pjWbazs8eaRSBu/J/llVgTwnaaHTOQ54uhWLMgWB8zdn+MBWLisItNgqqLWLAs7KY7MBu5efhhjZgIkoOfW+o0iEtSQZf1dNZATLWxYTm1d3DEmoUibekdOKL9FgvE+GBXxLL2/BoLFszUqWy3meFozBvoLISg8HjrLOzCvX/MsYgT8caHGYgXHI0FK4D1fZ7XIiwQuhOxXmKdRYiRkNcBfc8154vKxoddF3PzCsSC1cB2Ied5PlggdGG+50JrLkKM5OK3IANbO3qxQOiCpPknSF9wRCoWrAzakcYP5Y6RXfcV5GG9+CgWiJER7zmnruHtD7FgfWiufmCBGJncgatjzvMWYMEqYR6i/7c/NmjP0ybt1U8gG+kV72CBGA7J/suQspL221iwYminGhvsiqPLCzwsWDHkobFB+eKSP/DQSL+lcVgghoQ8xCW1WH1TUUnT11gguOTufhuSVa78FgtWD+1aurJFcVM9GfIIwILVQx7SFXZmaOYsJyxYPeQhXaFMDUdBm/pRIb4BK7BAIMhDw5FU+XvIzMLwDCwQCPLQcPDzj+QMPJQdCwSCPDQcUfFiyEyp6gEWCITBPDTDyTmpXpV98kN+4yl4vSqvQnTyQ9Gp30RXHmAr+McmC7t+ldnz3lKBBP65YX8TrAxv8VkRxT96Kl35bghftDA6HpY4+/o/t2n94LEgIIfu0h+VFwPCIE3FnYZ43qWrX1DAhlRwj1B1Prq8GqwAob2CoOPsmtLXIITdF1dKSoVdF5y8fDN7Lgrazmyoblm7ozaxTslvPAHv1X6XXjHYDmbGxAvKIEdVXbewoDfUHuq6ABbZeKA1Q3UenAFGgeW+ETFQgfzWboSAF6nNp5MPdcNy+CtUXYA1oRSlNp2Gv3iL+oQ8NDoJWbvUHlJ9hwX9MH/xSxnKd5Pru+C1d1hEqFCW1vrL1GM/h3/CQSrzzffgL3sBy1mVYuUKFi5JzYGFYCnRyUtQltCW9QR5aHQWhURCjuRdhrgFHQwEFSVq2x7thSulZVCWprD61H3xpbTcsMx8OH6t26uAqgPLwTdQq+BF4sHOjW+0Cdre9o9JhIXaG9Ef5CGdMFiaoOqIf3EZJtFsHg0VBQyx5fRHMTvrUhpPrtvbsKG6GSbRouPvx+yo9QmPghk3zJzAdmC+MFEhWAqOeukdZ9M7z21uVttL38ya4wKZkbUbIjnmjcE8ZHaERiblqL/b0z3mo0EeGo6NmbshM9ub6faP0SAPDUdc0QXITGCUFAsEgjw0HPlNtyEzC4OjsEAg2DPzLPWpnROB9i5dETeqfzXc1d0QVw/MC/KQrhTU/AEyJT/8ZyxYPeShMUDJ4pK4ZR/kpEx1FwvEkJCHuEgU1yAn/suSsEAMiaS1D/I118UdC1YM7VdjQ3RA/eNwNCXShjw0Zihl2iSUnFfvVE1XsUCMAPOQ42wXLFglLBtOrh5YIEZAUvtXyFpF+zdYsEqoKo8TShwjuVL9JJ382k+wQIwK+w+vLh6LsWBlsH3Jxgx/ONv4RMZlUylKlhykJEwIlj5r/olTlgFeYCQWCB3J3XMWMihu6XfxWe7iE+bsFbqcr0h+9W+bq/8lqLnGjbQD/07ZeyVCpLK1c8DbGi/T7Gf5RchCk2rC+A3LUxXcCEs5tDSh2iMw3mGOu5PXUmfvsIHWDhHQflh5xPZ/k/KzK9GyM3b2s+GjY/hyKkKTAEtijuJWxsEb3Eiv+5Y7EtrBf/3L4LideKOj4b2Evyy5jmsXFCsETatzTkaJ30IRkaXyWrKJ+cZ/dX7qvqvcluvSftZ3f3r22QQRFDWzVHIH4Pn4jjsGKJJ2fWo/c9gTTvaOrksT9nONwo3I7B6ub1CkvfEf0ZGHEFmKe5ymDh2otXLlQypCkwZLZXnPo4z6m9zUc2PknRsidd8/A18pZRv3DEpYllLPNQqK8LRjQ5Yc7Ygt+kB46DazzhCheDCm9rNeO7l5PZ8MYlw4znFlCdWMR1aDjjs3FKf/cj2UXns9s+EuVAiI9LrrkVkqrmlY6FJyYIPYLqPFqO0v6FBfdZYr7+NcEOMm+/ANyKm07ZmNnoXiQebhO9xh0A5h/a1MxT2R4n6WOtTWGTKEh25BiYotep9rFE1E553dtPfvI9WbsQa0v+G59ld0qx8BS0exyYeltbT7ER4DiwvW0+CVKTgFxARxfYHHkpt77Adu3i0m2Nn5ks6fcP+JSUFWfwVNjCwsSrrU0yA6iukXaav6d8qHnhiZeWzvVv/CBIS9gyPuNjG5sEQXdFiUjbZ3qX80EmJRKJ1R1D82NrYs3cWqPu5gmGMUtP/IevRy2n7cW0JPzJ47eMZom/nbqKBt0ECby87hfhJ6ZZ6nH0t9YYcZ20iuGjyEyQ5+hntIGACX+T6DcyOlWc6N5E8n0Rk7L+G+EQaDPRosZ+D+EO4gmXLIn36Nj81uxL0iDI94YDAg8lp/5I6WCYa0bbDBIRGpuDOEsZAcUz8tRD09Uj7hjpnpRFn3I9ZOCMc5rrgbhHF5RfC6ZngkzaZ4PWRr5+Dxq7DjMW49YSLYTbdnj8CCgAHjjqKxovTp9BlixfpC3G7C1IgTHdIM2FZjH9rKex49s7XysY2NDW4uYbIUtgzOkAaOHUZwUnlPr8Y9EN7+4biJhOnjOMtJ0vLsILKtqz/fIF/cwLKaD4UIi5HhlhHmhb2DY1HbXe1BLVb1ifVwE1KR8rF24YFYEinArSHMmgj+sy9uLIo6+0tUvdmN2A26R9XxXs3ZQk0UHrk6w3Eu/njCkoiXKtGoD1pKpZ6DVx7vlTQNXaWqjj+StDze3oPfyKK49cYC/2X4wwjLJvTljELFl1w36B5Fyt7QdaXT6GnaBGNx6NolMfLChs/RtEYTcuWd6KyjYdFZ0+ym4zcTBEEQBEEQBEEQhJH4P2CrVNZrTYToAAAAAElFTkSuQmCC",AnimationConfig$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdLiquidConfig=React.lazy(()=>__vitePreload(()=>import("./AntdLiquidConfig-v8MRCPRS.js"),__vite__mapDeps([37,1,2])).then(r=>({default:r.AntdLiquidConfig}))),ThemeConfig$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$4=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AntdLiquidDefinition{getComponent(){return AntdLiquidController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$4,data:DataConfig$4,style:AntdLiquidConfig,animation:AnimationConfig$4,theme:ThemeConfig$4}}getBaseInfo(){return{compName:"Antd水波图",compKey:"AntdLiquid",type:"水波图",typeKey:"liquid"}}getChartImg(){return liquidImg}getInitConfig(){return{base:{id:"",name:"Antd水波图",type:"AntdLiquid"},style:{percent:.25,outline:{border:4},wave:{length:128},statistic:{content:{style:{fill:"#7de0ff",fontSize:"16px"}}}},data:{dataSource:"static",staticData:{data:[]}}}}}const __vite_glob_0_24=Object.freeze(Object.defineProperty({__proto__:null,default:AntdLiquidDefinition},Symbol.toStringTag,{value:"Module"})),pieImg="/light-chaser-app/assets/pie-kQBx5-oT.png";class AntdPieController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,Pie,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,Pie,t)}updateTheme(e){var c,u,f,d,g,p;if(!e)return;const t=(c=this.config)==null?void 0:c.style,{colors:{main:n,mainText:i,supplementSecond:a,background:o,supplementFirst:s,subText:l}}=e;t!=null&&t.color&&(t.color=[n,i,l,s,a]),t.legend&&((f=(u=t.legend.itemName)==null?void 0:u.style)!=null&&f.fill)&&(t.legend.itemName.style.fill=i),t!=null&&t.pieStyle&&(t!=null&&t.pieStyle)&&(t.pieStyle.stroke=o),t!=null&&t.label&&((d=t==null?void 0:t.label)!=null&&d.style)&&(t.label.style.fill=i),t!=null&&t.statistic&&((g=t==null?void 0:t.statistic)!=null&&g.title)&&t.statistic.title.style&&(t.statistic.title.style.color=i),t!=null&&t.statistic&&((p=t==null?void 0:t.statistic)!=null&&p.content)&&t.statistic.content.style&&(t.statistic.content.style.color=l),this.update({style:t},{reRender:!0})}}const AnimationConfig$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),AntdPieConfig=React.lazy(()=>__vitePreload(()=>import("./AntdPieStyleConfig-lMP2Epkz.js"),__vite__mapDeps([38,1,2,3,5,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]))),AntdPieFieldMapping=React.lazy(()=>__vitePreload(()=>import("./AntdPieStyleConfig-lMP2Epkz.js"),__vite__mapDeps([38,1,2,3,5,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(r=>({default:r.AntdPieFieldMapping}))),ThemeConfig$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0)),DataConfig$3=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0));class AntdPieDefinition extends AntdCommonDefinition{getController(){return AntdPieController}getMenuList(){return getDefaultMenuList()}getMenuToConfigContentMap(){return{base:BaseInfo$3,data:DataConfig$3,style:AntdPieConfig,animation:AnimationConfig$3,theme:ThemeConfig$3,mapping:AntdPieFieldMapping}}getBaseInfo(){return{compName:"Antd饼图",compKey:"AntdPie",type:"饼图",typeKey:"pie"}}getChartImg(){return pieImg}getInitConfig(){const e=[{type:"sort1",value:30},{type:"sort2",value:25},{type:"sort3",value:20},{type:"sort4",value:25}];return{base:{id:"",name:"Antd饼图",type:"AntdPie"},style:{data:e,angleField:"value",colorField:"type",radius:.7,innerRadius:.6,pieStyle:{stroke:"#fff",lineWidth:0},label:{type:"outer",offset:27,content:"{name} {percentage}",autoRotate:!0,rotate:0,style:{textAlign:"center",fontSize:10,fontWeight:400,fill:"#cececeff"}},legend:{position:"right",layout:"vertical",itemName:{style:{fill:"#adadadff",fontSize:12}}},interactions:[{type:"element-selected"},{type:"element-active"}],statistic:{title:{style:{fontSize:"10px",color:"#b9b9b9ff",fontWeight:300},content:"总计",offsetY:-6},content:{style:{fontSize:"16px",color:"#c5c5c5ff"},content:"100",offsetY:2,offsetX:-2}},animation:{appear:{animation:"wave-in",duration:3e3}},color:["#0087ffff","#339effff","#87c5ffff","#4687c3ff"]},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_25=Object.freeze(Object.defineProperty({__proto__:null,default:AntdPieDefinition},Symbol.toStringTag,{value:"Module"}));class AntdRingProgressController extends AntdBaseDesignerController{async create(e,t){await super.commonCreate(e,RingProgress,t)}destroy(){this.instance.destroy(),this.instance=null,this.config=null,this.interval&&clearInterval(this.interval)}getConfig(){return this.config}update(e,t){super.commonUpdate(e,RingProgress,t)}updateTheme(e){var s,l,c;if(!e)return;const t=(s=this.config)==null?void 0:s.style,{colors:{main:n,mainText:i,supplementFirst:a,subText:o}}=e;t!=null&&t.color&&(t.color=[n,a]),t!=null&&t.statistic&&((l=t==null?void 0:t.statistic)!=null&&l.title)&&t.statistic.title.style&&(t.statistic.title.style.color=i),t!=null&&t.statistic&&((c=t==null?void 0:t.statistic)!=null&&c.content)&&t.statistic.content.style&&(t.statistic.content.style.color=o),this.update({style:t},{reRender:!0})}}const ringProgressImg="/light-chaser-app/assets/ring-progress-hufH-PM8.png",AnimationConfig$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>AnimationConfig$1),void 0)),DataConfig$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>DataConfig$1),void 0)),AntdRingProgressStyleConfig=React.lazy(()=>__vitePreload(()=>import("./AntdRingProgressConfig-y2HX-5pO.js"),__vite__mapDeps([39,1,2,3,5])).then(r=>({default:r.AntdRingProgressStyleConfig}))),ThemeConfig$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ThemeConfig$1),void 0)),BaseInfo$2=React.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>BaseInfo$1),void 0));class AntdRingProgressDefinition extends AntdCommonDefinition{getController(){return AntdRingProgressController}getMenuList(){return getDefaultMenuList().filter(e=>e.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo$2,data:DataConfig$2,style:AntdRingProgressStyleConfig,animation:AnimationConfig$2,theme:ThemeConfig$2}}getBaseInfo(){return{compName:"Antd迷你环图",compKey:"AntdRingProgress",type:"进度图",typeKey:"progress"}}getChartImg(){return ringProgressImg}getInitConfig(){return{base:{id:"",name:"Antd迷你环图",type:"AntdRingProgress"},style:{percent:.7,color:["#00b5ffff","#c5ebfbff"],statistic:{content:{style:{fill:"#fff",fontSize:"24px",fontWeight:400},offsetY:-7},title:{style:{fontSize:"14px",fontWeight:400,color:"#fff"},content:"当前进度",offsetY:-11}},animation:{appear:{animation:"wave-in",duration:3e3}},progressStyle:{}},data:{dataSource:"static",staticData:{data:.7}}}}}const __vite_glob_0_26=Object.freeze(Object.defineProperty({__proto__:null,default:AntdRingProgressDefinition},Symbol.toStringTag,{value:"Module"})),baseRoseImg="/light-chaser-app/assets/base-rose-Q2gpgR7-.png";class AntdBaseRoseDefinition extends AbstractRoseDefinition{getBaseInfo(){return{compName:"Antd基础玫瑰图",compKey:"AntdBaseRose",type:"玫瑰图",typeKey:"rose"}}getChartImg(){return baseRoseImg}getInitConfig(){const e=[{type:"sort1",value:27},{type:"sort2",value:25},{type:"sort3",value:18},{type:"sort4",value:15}];return{base:{id:"",name:"Antd基础玫瑰图",type:"AntdBaseRose"},style:{data:e,xField:"type",yField:"value",seriesField:"type",radius:.8,padding:[50,0,0,0],supportCSSTransform:!0,sectorStyle:{stroke:"#fff",lineWidth:0},label:{style:{fill:"#b5b5b5ff",fontSize:13},autoRotate:!0},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a6a6a6ff",fontSize:12}}},animation:{appear:{animation:"grow-in-xy",duration:3e3}},color:["#0091ffff","#68beffff","#b4e0ffff","#408ec9ff"]},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_27=Object.freeze(Object.defineProperty({__proto__:null,default:AntdBaseRoseDefinition},Symbol.toStringTag,{value:"Module"})),groupRoseImg="/light-chaser-app/assets/group-rose-vO5lvahu.png";class AntdGroupRoseDefinition extends AbstractRoseDefinition{getBaseInfo(){return{compName:"Antd分组玫瑰图",compKey:"AntdGroupRose",type:"玫瑰图",typeKey:"rose"}}getChartImg(){return groupRoseImg}getInitConfig(){const e=[{type:"sort1",value:27,user:"user1"},{type:"sort2",value:25,user:"user2"},{type:"sort3",value:18,user:"user1"},{type:"sort4",value:15,user:"user2"},{type:"sort5",value:18,user:"user1"},{type:"sort6",value:20,user:"user2"}];return{base:{id:"",name:"Antd基础玫瑰图",type:"AntdBaseRose"},style:{data:e,xField:"type",yField:"value",isGroup:!0,seriesField:"user",padding:[60,0,0,0],label:{offset:14,style:{fill:"#aaaaaaff"}},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a8a8a8ff",fontSize:12}}},supportCSSTransform:!0,animation:{appear:{animation:"grow-in-xy",duration:3e3}},color:["#00b7ffff","#81dbffff"],sectorStyle:{lineWidth:0}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_28=Object.freeze(Object.defineProperty({__proto__:null,default:AntdGroupRoseDefinition},Symbol.toStringTag,{value:"Module"})),stackRoseImg="/light-chaser-app/assets/stack-rose-UAs5DTM4.png";class AntdStackRoseDefinition extends AbstractRoseDefinition{getBaseInfo(){return{compName:"Antd堆叠玫瑰图",compKey:"AntdStackRose",type:"玫瑰图",typeKey:"rose"}}getChartImg(){return stackRoseImg}getInitConfig(){const e=[{type:"sort1",value:27,user:"user1"},{type:"sort2",value:25,user:"user1"},{type:"sort3",value:18,user:"user1"},{type:"sort4",value:15,user:"user1"},{type:"sort5",value:10,user:"user1"},{type:"sort1",value:7,user:"user2"},{type:"sort2",value:5,user:"user2"},{type:"sort3",value:28,user:"user2"},{type:"sort4",value:15,user:"user2"},{type:"sort5",value:20,user:"user2"}];return{base:{id:"",name:"Antd堆叠玫瑰图",type:"AntdStackRose"},style:{data:e,xField:"type",yField:"value",isStack:!0,seriesField:"user",label:{offset:-12,style:{fill:"#ffffffff",fontSize:9,fontWeight:700}},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#b9b9b9ff",fontSize:12}}},supportCSSTransform:!0,animation:{appear:{animation:"wave-in",duration:3e3}},color:["#00b7ffff","#8ed2ffff"],radius:1},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_29=Object.freeze(Object.defineProperty({__proto__:null,default:AntdStackRoseDefinition},Symbol.toStringTag,{value:"Module"})),scatterBubble="/light-chaser-app/assets/scatter-bubble-3905Y8Ct.png";class AntdScatterBubbleDefinition extends AbstractScatterDefinition{getBaseInfo(){return{compName:"Antd气泡图",compKey:"AntdScatterBubble",type:"散点图",typeKey:"scatter"}}getChartImg(){return scatterBubble}getInitConfig(){const e=[{x:42,y:38,size:20,genre:"female"},{x:6,y:18,size:1,genre:"female"},{x:58,y:24,size:20,genre:"male"},{x:78,y:37,size:34,genre:"male"},{x:55,y:56,size:53,genre:"male"},{x:18,y:45,size:70,genre:"male"},{x:42,y:44,size:28,genre:"male"},{x:3,y:52,size:59,genre:"male"},{x:31,y:18,size:97,genre:"male"},{x:79,y:91,size:63,genre:"male"},{x:93,y:23,size:23,genre:"male"},{x:44,y:83,size:22,genre:"male"}];return{base:{id:"",name:"Antd气泡图",type:"AntdScatterBubble"},style:{data:e,xField:"x",yField:"y",colorField:"genre",sizeField:"size",size:[5,20],shape:"circle",xAxis:{grid:null,label:{style:{fill:"#9a9a9aff",fontSize:10},offset:16},line:null,tickLine:null,subTickLine:null,position:"left",title:null},yAxis:{grid:null,label:{style:{fill:"#a0a0a0ff",fontSize:10},offset:5},line:{style:{stroke:"#a2a2a275",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#a0a0a0ff",fontSize:10}}},supportCSSTransform:!0,animation:{appear:{animation:"fade-in",duration:3e3}},color:["#116BA2","#58c1ffff"],pointStyle:{lineWidth:0}},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_30=Object.freeze(Object.defineProperty({__proto__:null,default:AntdScatterBubbleDefinition},Symbol.toStringTag,{value:"Module"})),scatterPoint="/light-chaser-app/assets/scatter-point-pdQO4Bno.png";class AntdScatterPointDefinition extends AbstractScatterDefinition{getBaseInfo(){return{compName:"Antd散点图",compKey:"AntdScatterPoint",type:"散点图",typeKey:"scatter"}}getChartImg(){return scatterPoint}getInitConfig(){const e=[{x:1,y:23,type:"one"},{x:2,y:15,type:"two"},{x:3,y:17,type:"three"},{x:4,y:48,type:"four"},{x:5,y:8,type:"five"}];return{base:{id:"",name:"Antd散点图",type:"AntdScatterPoint"},style:{data:e,xField:"x",yField:"y",colorField:"type",sizeField:"y",size:6,shape:"circle",pointStyle:{fillOpacity:1,lineWidth:0},xAxis:{grid:null,label:{style:{fill:"#a8a8a8ff",fontSize:10}},line:{style:{stroke:"#a4a4a470",lineWidth:1}},tickLine:null,subTickLine:null,position:"bottom",title:null},yAxis:{grid:null,label:{style:{fill:"#a0a0a0ff",fontSize:10}},line:null,tickLine:null,subTickLine:null,position:"left",title:null},legend:{position:"top",layout:"horizontal",itemName:{style:{fill:"#969696ff",fontSize:10}}},supportCSSTransform:!0,animation:{appear:{animation:"fade-in",duration:3e3}},color:["#00b7ffff","#006d98ff"]},data:{dataSource:"static",staticData:{data:e}}}}}const __vite_glob_0_31=Object.freeze(Object.defineProperty({__proto__:null,default:AntdScatterPointDefinition},Symbol.toStringTag,{value:"Module"})),alignLeft="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='14.5'%20y='17'%20width='28'%20height='14'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.5%206V42'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignHorizontally="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='7'%20y='17'%20width='34'%20height='14'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M24%206V42'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignRight="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='6'%20y='17'%20width='28'%20height='14'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%206V42'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignTop="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='17'%20y='14.5'%20width='14'%20height='28'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%206.5H6'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignVertically="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='17'%20y='7'%20width='14'%20height='34'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%2024H6'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alignBottom="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='30'%20height='30'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='17'%20y='6'%20width='14'%20height='28'%20fill='%239b9b9b'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M42%2042H6'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";class BaseInfoStore{constructor(){D(this,"baseConfigRef",null);D(this,"setBaseConfigRef",e=>this.baseConfigRef=e);D(this,"updateBaseConfig",e=>{var n;const{activeElem:{id:t}}=rightStore;t===(e==null?void 0:e.id)&&((n=this.baseConfigRef)==null||n.setState(e))})}}const baseInfoStore=new BaseInfoStore;class BaseInfo extends reactExports.Component{constructor(t){super(t);D(this,"init",()=>{var a;const{activeElem:t}=rightStore,{layerConfigs:n}=designerStore$1,i=n[t.id];if(i)if(i.type==="group"){const o=LayerUtil.findAllChildLayer([i.id]).filter(l=>n[l].type!=="group"),s=this.calculateGroupRect(o);this.state={...i,...s}}else{const o=(a=EditorDesignerLoader.getInstance().definitionMap[i.type])==null?void 0:a.getBaseInfo();this.state={...i,version:o==null?void 0:o.version}}});D(this,"calculateGroupRect",t=>{const{layerConfigs:n}=designerStore$1;let i=1/0,a=1/0,o=-1/0,s=-1/0;return t.forEach(l=>{const{x:c=0,y:u=0,width:f=0,height:d=0}=n[l];i=Math.min(i,c),a=Math.min(a,u),o=Math.max(o,c+f),s=Math.max(s,u+d)}),{x:i,y:a,width:o-i,height:s-a}});D(this,"changeName",t=>{const{controller:n}=this.props;n.update({base:{name:t}},{reRender:!1});const{updateLayer:i}=designerStore$1;i&&i([{id:this.state.id,name:t}]);const{layerInstances:a}=layerListStore$1;let o=a[this.state.id];o&&o.setState({name:t})});D(this,"handleMap",{name:this.changeName,width:t=>{var n,i;return(i=(n=eventOperateStore$1.movableRef)==null?void 0:n.current)==null?void 0:i.request("resizable",{offsetWidth:t,direction:[1,1]},!0)},height:t=>{var n,i;return(i=(n=eventOperateStore$1.movableRef)==null?void 0:n.current)==null?void 0:i.request("resizable",{offsetHeight:t,direction:[1,1]},!0)},posX:t=>{var n,i;return(i=(n=eventOperateStore$1.movableRef)==null?void 0:n.current)==null?void 0:i.request("draggable",{x:t},!0)},posY:t=>{var n,i;return(i=(n=eventOperateStore$1.movableRef)==null?void 0:n.current)==null?void 0:i.request("draggable",{y:t},!0)},align:t=>this.handleMap[t](),left:()=>{var t,n;return(n=(t=eventOperateStore$1.movableRef)==null?void 0:t.current)==null?void 0:n.request("draggable",{x:0},!0)},horizontally:()=>{var t,n;return(n=(t=eventOperateStore$1.movableRef)==null?void 0:t.current)==null?void 0:n.request("draggable",{x:designerStore$1.canvasConfig.width/2-this.state.width/2},!0)},right:()=>{var t,n;return(n=(t=eventOperateStore$1.movableRef)==null?void 0:t.current)==null?void 0:n.request("draggable",{x:designerStore$1.canvasConfig.width-this.state.width},!0)},top:()=>{var t,n;return(n=(t=eventOperateStore$1.movableRef)==null?void 0:t.current)==null?void 0:n.request("draggable",{y:0},!0)},vertically:()=>{var t,n;return(n=(t=eventOperateStore$1.movableRef)==null?void 0:t.current)==null?void 0:n.request("draggable",{y:designerStore$1.canvasConfig.height/2-this.state.height/2},!0)},bottom:()=>{var t,n;return(n=(t=eventOperateStore$1.movableRef)==null?void 0:t.current)==null?void 0:n.request("draggable",{y:designerStore$1.canvasConfig.height-this.state.height},!0)}});D(this,"onFieldChange",t=>{const{id:n,data:i}=t,{targetIds:a,setTargetIds:o}=eventOperateStore$1;if(!a.includes(this.state.id)){const{type:l}=this.state;if(l==="group"){const{layerConfigs:c}=designerStore$1,u=LayerUtil.findAllChildLayer([this.state.id]).filter(f=>c[f].type!=="group");o(u)}else o([this.state.id])}const s=setTimeout(()=>{this.handleMap[n](i),clearTimeout(s)},1)});D(this,"buildSchema",()=>{const{name:t,width:n,height:i,x:a,y:o}=this.state;return{type:"grid",config:{columns:2},children:[{id:"name",key:"name",label:"名称",type:"input",value:t,config:{gridColumn:"1/3"}},{type:"grid",label:"尺寸",config:{gridColumn:"1/3",columns:2},children:[{id:"width",key:"width",type:"input",label:"宽度",value:n,reRender:!0,config:{type:"number"}},{id:"height",key:"height",type:"input",label:"高度",value:i,reRender:!0,config:{type:"number"}}]},{type:"grid",label:"位置",config:{gridColumn:"1/3",columns:2},children:[{id:"posX",key:"posX",type:"input",label:"X轴",reRender:!0,value:a,config:{type:"number"}},{id:"posY",key:"posY",type:"input",label:"Y轴",reRender:!0,value:o,config:{type:"number"}}]},{id:"align",label:"对齐",type:"group-button",config:{gridColumn:"1/3",items:[{value:"left",content:jsxRuntimeExports.jsx("img",{src:alignLeft,alt:"left"})},{value:"horizontally",content:jsxRuntimeExports.jsx("img",{src:alignHorizontally,alt:"horizontally"})},{value:"right",content:jsxRuntimeExports.jsx("img",{src:alignRight,alt:"right"})},{value:"top",content:jsxRuntimeExports.jsx("img",{src:alignTop,alt:"top"})},{value:"vertically",content:jsxRuntimeExports.jsx("img",{src:alignVertically,alt:"vertically"})},{value:"bottom",content:jsxRuntimeExports.jsx("img",{src:alignBottom,alt:"bottom"})}]}}]}});this.init()}componentDidMount(){const{setBaseConfigRef:t}=baseInfoStore;t&&t(this)}componentWillUnmount(){const{setBaseConfigRef:t}=baseInfoStore;t&&t(null)}render(){const{type:t,version:n}=this.state,i=this.buildSchema();return jsxRuntimeExports.jsxs("div",{className:"base-info-config",children:[jsxRuntimeExports.jsx("div",{className:"version-info",children:jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(InfoCircleOutlined,{})," ",t," | ",n?`版本: ${n}`:"无版本信息"]})}),jsxRuntimeExports.jsx(LCGUI,{schema:i,onFieldChange:this.onFieldChange})]})}}const BaseInfo$1=Object.freeze(Object.defineProperty({__proto__:null,default:BaseInfo},Symbol.toStringTag,{value:"Module"}));class GroupLayerDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"",compKey:"group",type:"",typeKey:""}}getChartImg(){return null}getController(){return null}getInitConfig(){return{base:{id:"",name:"分组图层",type:"group"}}}getMenuList(){return[{icon:AppstoreFilled$1,key:"base",name:"基础"}]}getMenuToConfigContentMap(){return{base:BaseInfo}}}const __vite_glob_0_32=Object.freeze(Object.defineProperty({__proto__:null,default:GroupLayerDefinition},Symbol.toStringTag,{value:"Module"})),baseColorBlockImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZoAAAEFCAIAAABVVLaiAAAF10lEQVR4Xu3UsaoWBADH0W/Oq7uDi+QNmuSCDermkCgOQoOJXpcKQeSCgpPQJkpDQ0GTTrb3iL3E9/9NB84znMP5kzPIPHxy54enP549fwBHd3jz8vTzpxNovPj4/dU/H1/+5xkcnc5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMbO4e356Zd3J9D45f3Nax9eXP7jFRzd4d39038fXYLGxfO7377+/eTibzi6w/v7N/579A003v50+/qvHy5dfIWj0xkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfs6IyUztjRGSmdsaMzUjpjR2ekdMaOzkjpjB2dkdIZOzojpTN2dEZKZ+zojJTO2NEZKZ2xozNSOmNHZ6R0xo7OSOmMHZ2R0hk7OiOlM3Z0Rkpn7OiMlM7Y0RkpnbGjM1I6Y0dnpHTGjs5I6YwdnZHSGTs6I6UzdnRGSmfsHF7f++6ve1eg8dvDWzd+fnPl/BMc3f+ZJNyrpdScRwAAAABJRU5ErkJggg==",BaseColorBlockComponent=React.forwardRef((r,e)=>{const[t,n]=reactExports.useState({...r});reactExports.useImperativeHandle(e,()=>({updateConfig:a=>n({...a})}));const{style:i}=t;return jsxRuntimeExports.jsx("div",{style:{height:"100%",display:"flex",...i}})});class BaseColorBlockController extends AbstractDesignerController{async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BaseColorBlockComponent,t)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(e,t){var n;this.config=ObjectUtil.merge(this.config,e),t=t||{reRender:!0},t.reRender&&((n=this.instance)==null||n.updateConfig(this.config))}updateTheme(e){}}class AnimationConfig extends reactExports.Component{render(){return jsxRuntimeExports.jsx("div",{className:"lc-animation-config",children:"动画设置"})}}const AnimationConfig$1=Object.freeze(Object.defineProperty({__proto__:null,default:AnimationConfig},Symbol.toStringTag,{value:"Module"}));class ThemeConfig extends reactExports.Component{constructor(){super(...arguments);D(this,"state",{editTheme:!1});D(this,"openThemeEditor",()=>this.setState({editTheme:!0}));D(this,"closeEditor",()=>this.setState({editTheme:!1}));D(this,"themeChange",t=>{if(!t)return;const{activeElem:{id:n}}=rightStore,{compController:i}=designerStore$1,a=i[n+""];a&&a.updateTheme(t)})}render(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"lc-theme-config",children:[jsxRuntimeExports.jsx("div",{className:"lc-theme-custom",children:jsxRuntimeExports.jsx(Button,{onClick:this.openThemeEditor,style:{width:"100%"},children:"+ 自定义主题"})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(ThemeList$1,{onSelected:this.themeChange})]}),jsxRuntimeExports.jsx(Dialog,{onClose:this.closeEditor,title:"编辑主题",visible:this.state.editTheme,width:860,children:jsxRuntimeExports.jsx(ThemeEditor,{})})]})}}const ThemeConfig$1=Object.freeze(Object.defineProperty({__proto__:null,default:ThemeConfig},Symbol.toStringTag,{value:"Module"})),BaseColorBlockConfig=({controller:r})=>{var l;const{background:e,borderWidth:t,borderColor:n,borderStyle:i,borderRadius:a}=(l=r.getConfig())==null?void 0:l.style,o=c=>{const{dataFragment:u}=c;r.update(u)},s={key:"style",type:"grid",config:{columns:2},children:[{key:"background",type:"color-picker",label:"背景色",value:e,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"borderWidth",type:"input",label:"边框宽",value:t,config:{width:"100%",type:"number",min:0,max:10,step:1}},{key:"borderColor",type:"color-picker",label:"边框色",value:n,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"borderStyle",type:"select",label:"样式",value:i,config:{options:[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"点线",value:"dotted"},{label:"双线",value:"double"},{label:"3D凹槽",value:"groove"},{label:"3D垄状",value:"ridge"},{label:"3D内嵌",value:"inset"},{label:"3D外嵌",value:"outset"},{label:"无边框",value:"none"}]}},{key:"borderRadius",type:"input",label:"圆角",value:a,config:{width:"100%",type:"number",min:0}}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})};class BaseColorBlockDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础色块",compKey:"BaseColorBlock",type:"基础",typeKey:"base"}}getChartImg(){return baseColorBlockImg}getController(){return BaseColorBlockController}getInitConfig(){return{base:{id:"",name:"基础色块",type:"BaseColorBlock"},style:{background:"#009DFF33",borderRadius:0,borderWidth:0,borderColor:"#74747400",borderStyle:"none"}}}getMenuList(){return getDefaultMenuList().filter(e=>e.key!=="theme"&&e.key!=="data"&&e.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseColorBlockConfig,animation:AnimationConfig,theme:ThemeConfig}}}const __vite_glob_0_33=Object.freeze(Object.defineProperty({__proto__:null,default:BaseColorBlockDefinition},Symbol.toStringTag,{value:"Module"})),baseIframeImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPwAAACeCAIAAACZ9fBhAAAHQElEQVR4Xu3b72vaeADH8ftDfBDoYMjtZMhYB9mDHsi4spWjlrPggzA492BgjvrEHpajUB8YaPZAhqVIwYKF/ptnYn4ZbZvUbov7vF9PRk1M7HwnfvM1/eUlIOaXFy9elAAlRA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RA85RJ+BUakdWtZhrWKkl2ATEf2DjPp/09u5c6ucXloy3jQ6g9EkWGU6/Gym10DBaEf/2h7dXXPItC+C5m8vO6miK83+JFw4Nz4i+qKTjr52PC92enpw38ClctAb39ze3ox7B5XFJXu96yh2t9u2WkeO0yb6ohOO3qifzsckV91aelk2bzvjIHn3nk8KFI1u9OWP7jzYUXs7vSyjKPqlYQ+KTDb6bfvr2idpot9Mmx298XzHOhud/pV+/GHvuuFwvn7fcN5nHgVtRxep0SNLnKa/QnOQ+NnYbp6N/JHUyA4PDuPVbuvYHV2Fsz6zV3I57H1amhVdPK4M0+p/DZ4yHbudP8PVt0zrZDieL7iZjgb23svVv5ZhJuea/J1a5upVV3pru+ed+qsczyigjY3ef5vn4Qah5RFewk6679KLlq0XfaU5iMIed976iw/64SNp00Fz4WI5Ef1e04k2FJrOtl/6relE19OR634j/Qlm1I6CyaoUb6cZMw5fz/ju46r4NjD6LbNx7MYThRO39Ta9ygOiS9ivdpbh/HL05Z2GNdN2gpcxcWzv55ndqr9CHP1psCtfGH3Tmf0wvfAmfBrvTfN9wz6ZfxR43I+JWqPop1NvhUun88myj11vNil43HG+eP+OB52WZXe/xEfj5Hjh+tz8Jyz+Ztxv12tVc9fqDsOjZfRPtgFatXF6Ge5gttOzVm0D09+o6Leq9SN3Er3fV273MM9Hcyi6hF3I627L0QfuHtNH0XsmTmvn2cLrPLC70cgkYOz+Gx7Ig2a8KJ4gur0d2tvhAuOPXvL7AfdTtLXEdi6iwVSp9PrzMHh01Pk9sef4cSex1/sZlXet/kU8LhudWTvPsz65CDYk+lTul469X33sf3N4CZtlOO9bL/rh59eLy+4SdZzcWhz9pPdHYuVSNao1PeUaHw/xuC/6FSYne6mDzf/U8fTzXRoZz3asRPqT4YllbqVXKqbCR29U9tpO/Gl+2W+9yzr+XC28hE19+t9jreiTp+1Fxq+1utXq/Nfvn48mV4lB0Oro01cu0S4m/+4uLCi3gg+y+Cnllj8E8g70/YV1S/f8dpl46feCa6tbb6x53Ch++kWPPr5kvHY+r5m7JxrOj+yMJ+B7ssgQffopPuNloxefI5esjD7HLqJzdxS92UkMxO+ytJ0cDLN5Gv1Gg/wTC99X0aMv73fj88h01P+0W13nRFK2grPgfTfbpK0Tffr8PFNu9KPJlqth/6hlHe6a1cqz31dtLcMu0q/qO0c/O9cfdpxo+zdj5+OjtvMdFT16n2Eedt2r6N2ZDR8fOWmw3Z7PYDxws03K00YfDcb96caEbxl9eM/cpLdfvUsl78Xoltk4cuJZJ++UtPQ9QyFtRPRzRnXfjs8oXvs9KzUr8oBad37k5LzZ5mmjjxa5fy982JT/DofiTx99Kbo7+vH3XCQYr+r2IK7dn0bL9078WBsU/Vzqysn7H884T28chMP5nG/8N4p+YSIl+QXTN4i+9KEXNDp1W2/WyLNcX7gaWWsa7YfZuOgDhtnongfpL4e1Stk6n6+e+2abp40+Mdc4HZ34X2q1/aP42v/6KbW1DLtIv6qV0ZeSXwxPR943WaF21xmOhxm/nApfz/Ri7Wm0H2dTo5/z7mDJeO9N+PcimWfnY08bfcnY6UR/lRK5dpofVm0twy7Sr2p19N5+w3vsVljayB28e2+6jcd8JVggmx19drlutkl54uhL/o1DZ+FdX9H9YSu3tvJBX+7oPYZ52HHCW9Y808nkq9tt14s/uf6ENKLPebMNfm4S0ee92QY/N4Xoc99sg5+bQvTAAqKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHHKKHnP8B1pcLr7NqN7oAAAAASUVORK5CYII=";class BaseIframeComponent extends reactExports.Component{constructor(e){super(e),this.state={...e}}render(){const{src:e}=this.state.style;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e===""?jsxRuntimeExports.jsx("div",{style:{color:"#9a9a9a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx("div",{children:"请设置iframe地址"})}):jsxRuntimeExports.jsx("div",{style:{height:"100%",display:"flex"},children:jsxRuntimeExports.jsx("iframe",{title:"lc标准iframe组件",src:e,style:{width:"100%",height:"100%",border:"none"}})})})}}class BaseIframeController extends AbstractDesignerController{async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BaseIframeComponent,t)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(e,t){var n;this.config=ObjectUtil.merge(this.config,e),t=t||{reRender:!0},t.reRender&&((n=this.instance)==null||n.setState(this.config))}updateTheme(e){}}const BaseIframeStyleConfig=({controller:r})=>{var i;const{src:e}=(i=r.getConfig())==null?void 0:i.style,t=a=>{const{dataFragment:o}=a;r.update(o)},n={key:"style",type:"grid",children:[{key:"src",type:"input",label:"地址",value:e}]};return jsxRuntimeExports.jsx(LCGUI,{schema:n,onFieldChange:t})};class BaseIframeDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础iframe",compKey:"BaseIframe",type:"基础",typeKey:"base"}}getChartImg(){return baseIframeImg}getController(){return BaseIframeController}getInitConfig(){return{base:{id:"",name:"基础iframe",type:"BaseIframe"},style:{src:""}}}getMenuList(){return[{icon:AppstoreFilled$1,name:"基础",key:"base"},{icon:HighlightFilled$1,name:"样式",key:"style"}]}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseIframeStyleConfig}}}const __vite_glob_0_34=Object.freeze(Object.defineProperty({__proto__:null,default:BaseIframeDefinition},Symbol.toStringTag,{value:"Module"}));class BaseImageComponent extends reactExports.Component{constructor(e){super(e),this.state={...e}}render(){const{type:e,onLineUrl:t,localUrl:n}=this.state,i=e==="online"?t:n;return jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:i?jsxRuntimeExports.jsx("img",{alt:"图片组件",width:"100%",height:"100%",src:i}):jsxRuntimeExports.jsx("div",{style:{color:"#9a9a9a",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx("div",{children:"请配置图片连接或上传图片"})})})}}class BaseImageController extends AbstractDesignerController{async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BaseImageComponent,t.style)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(e,t){var n,i;this.config=ObjectUtil.merge(this.config,e),t=t||{reRender:!0},t.reRender&&((i=this.instance)==null||i.setState((n=this.config)==null?void 0:n.style))}updateTheme(e){}}const baseImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZoAAAEFCAIAAABVVLaiAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAy4SURBVHic7d29b1vnFQfgm7ZoFl4CRVogIggUTRER4Cho0JTAQ40CdjVpCJAtf1i2ABk8Gc6iRXAmDYI6tCBAeSWozKSWZOrwmteqRF5RFHk/jp9nMCSTpq9E6Kdz3o/7ftL7Yj8DaL/f1X0BANshzoAgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEIQ4A4IQZ0AQ4gwIQpwBQYgzIAhxBgQhzoAgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEIQ4A4IQZ0AQ4gwIQpwBQYgzIAhxBgTxh7ovgP/TzTtZlg0H++mDbp4v/j6v87I+SrP5PP05mf6y+OC67ouijOoMCOKT3hf7dV8D2dHhQXarKKOZZvObLMtG46vzi8u6r4UlxFmd+r29LMueP/tairVLyrXTs7faz0bRbAJBqM5qMxzsP3/2Vd1XweZm85vR+CrLMr1nQ5jZrEFKseHAL5J26+adNOiZSbRm0GwCQajOqjYc7K9Tl6XBZmud6tLNO2mtX5quKadGawhxVp3FPGbZeFkKr1evf6romlhDsba5iK370q+oyfTar58aaTaBIMxsVufk+EW2onmxjqkVUgl2dHiwap3gbH7z/Q8/VntRfKDZrMhwsF8yCuNnoBXSsozJdHpy/DJbNKG3dfNOirz0TCqm2QSC+H3+p8/qvoaPwr/++Y9PP/3j0odevf4pNZu0wq+//fbrb79Nptd//9tf7z/6lz9/1u/t/fs//63+wtBsVmTpaEsaKTNe1jqpl+z3Pr+/5ia90f3enre1eppNIAjV2c6VLJo9PXtb5ZWwXecXl6veXNVZLcTZzvV7n696yJBZq5W8fe74VAvNJhCEOKuNpUkBrNrV5GyHWmg2d67f69V9CexKyrL7C6TFWS1UZ0AQ4qw25gFguzSbMRX3tEmf9nt7Rftz5/jIyXQqWIlBdQYEoToLJRVlR4cHJWt3F0ui9ornuD0RMYizOI4OD0pul1oiBdzJ8Yu0duT07OctXxlUQrMJBKE6a71u3nn+7OtsvUM6yqX2s9/rvXr9JjP3StuIsxZLTeJ3336z9ZdNd1t99fqNRKNFNJtAEKqzFks9Zrn753WmnrS8M11MDrx0iAEtIs7a6vmzr0oiaZ21F0VmrbqbTTfvpFNBzXXSCppNIAjVWfvc2cB032h8tU49lSq4V6/fFMdH3n/O4pi1d1bY0nzirH1K1sqm0HlUbzib35xfXJa/8tHhwavXPz3mGqEGmk0gCNVZ+6xqM2fzm6fUUKPx1apJTzcjpBVUZy1TMmRW9Iybmc1vTs/eLj1cqpt3+r29p+86gJ0SZ0AQms2WKTnxbDKdPvHFS7Y0DQdfZg5sp9lUZy1TEmfb2l+56mgiI2g0nDgDgtBsRrDdIzsn02uj/rSROGuZpR3fdtvAkn4WmkyzCQShOmuZpZ3gdquzpce2p+PsuE0Z2zTiLIL0c9XNO1uZ3PzIf0qLL79Ysbz49uaLT/OP/FvUWJpNIAjVWcuMxler7nsxHOw/cZ9TyQ6qdGR6MN28k2quYguXyqvVxFnLzOY3aZnr/RG04WA/PbTZ2v3i3rNLbXctSF2KW8Wtc4dxWkezCQShOmuf0fhdtvw2Pu8P3NzsvJKSg1RaXZoVjeRmR8TTIuKsfdJW89n85v4oT3Hy5vrn/q5z6vATh+QqVnSU8utjo9kEglCdtU+quc4vLleN3BfHmI/GV6smB7p5p+TEk0Kqy5p/Fnrx5QwH+9udmpzNb9IS4tl8XnwfitNL032TSmaEqZI4a6vR+Cr93C7NozsPFT+T2WOm8ybT64a3mWuG8oOK70+R+5Pp9ToTxOZGG0WzCQShOmuxNOG4zl38u3nnUS3Y4gjOhh5G9/SiLH2BJc04bSTOWiz9TJ6evd1Kw1WYTK+bGWQbp5jw+khoNoEgVGetd/sY81S8bDa1N5vfpO61gcP/qRzbuChr4FfELoizOM4vLlMePWpPYpNTLOXyyfHL9QO6+HJG46vmry9huzSbQBCqs1CKFbbp027eSbeWvT2zWdQsqYppYAmzwS6lJteYVEacRVb8kLdIv7d3cvxizSdLMW7TbAJBqM5oivWnLxVlLCXOqFkaKXv+7Ot15mFTfkkxltJsAkGozqjTmgP/xXYu+5MoIc6oxzojZZb18yiaTSAI1Rk1ODl+8eDAf2Nv7EFjiTOqs84xK5npSzal2QSCUJ1RhXUWl5m+5InEGTvXzTvffftN+XNm85v1zwaFpTSbQBCqM3YotZblC2VTa2kSk6cTZ+xKN+88uOJ/NL46Pfu5mushPM0mEITqjO0r7vFf8hyLy9g6ccb2pbWyJeeVnJ793Lrb5NJ8mk0gCNUZW1a+HzPNYFooyy6IM7YmzWOWZNn5xaUgY3c0m0AQqjO24+jwoKQuc1IJFRBnPFVKsZL7yk6m19bKUgHNJhCE6ownKd/JZD8mVRJnPElaMbvUbH4jyKiSZhMIQnXGhtLYf8ls5unZ2wovB8QZG+n39kqmMi39pxaaTSAI1RmbKF9lpi6jFuKMxxkO9rMVQ2bp1BKzmdRFswkEoTprn3RbxG6eLz7N7zxhNp/P5vNsB4e8dfPO82dfrXrUVCb1EmdNl9q6fm+v+GD9f1vE2WQ6nUx/yRZbwTdWsmh2NL4yZEa9NJtAEKqzJurmnTTiXjKBuObrpA+Gg/3iBVMfOpleP+p2PQ/Whu6ZQe3EWYMcHR6k0Ck5NOSJunknvXi/t5f+r9H4ap1ce3DRLNROswkEoTqrXzfvpCH2Rw3zb+X/zW6VhCVl2nCwv+raLJqlOcRZbbp5J3VwTxwgyxYzmBu3qHdy7dXrN3dWeAwHX676t+6XTXNoNoEgVGe1SaXQ+lLFVCzvms3n91fJFgVaWlvbzfN+7/P1/6/0z0+OXxYnlZRsaUrP0WnSHOKs0c4vLosUW+f5RcAtPri+c4RSsWKjpDMtuuDyENRm0jSaTSAI1VkTTabXaf/jtjZdFq9zfnGZ6rXhYP/BKYiSCm40vtr6hlB4InHWIFtPsaXSiz8q1+7TadJAmk0gCNVZI6Rip+KS506ZdnL8cp2Va+nJOk0aSJzVKYXC6dnbepc7LO4i+2adCc3R+F1FlwWPpNkEglCd1WY2v/n+hx/rvooPZvOb1O3O5jerJgfs0KTJxFltnnhj2F1IXWfJuJhOkybTbAJBiDPuSts8l2pgRQkFzSZ3LZ3ZFGQ0n+oMCEJ1xgclK87SuXbQZOKMD4ya0WqaTSAI1Rkf9Hu9pX+vNKMVxBnv9Xt7q7agGzijFTSbQBDijPfSaSlLTabTKq8ENqPZ5L2l05qLU6Pc3YwWUJ0BQajOeG/ptOZsPq/+SmAz4oz3lk5rmtOkRTSbQBCqM8q3aprTpDXEGSu3as7mN+Y0aRHNJhCEOGMlnSbtotlk5c5zaBfVGRCE6ozlK84yi85oG9UZK9kSQLuIMyAIzebOpRpnVUNXu35vb9VDqrMHrXpbfetqoTqrTUmOVKnkNmfW0G5MnNVCnAFBaDZ3bvGL+m4tVlIWVWlpu6QuW5Mle42iOtu5yfSXpSseunmn39trSMvJZrp5x42VmkOcAUFoNneuZOfjcPBltrgff6MYyV7HyfGLVQ/Z7loLcbZzaRxqMr2+31emG41Npr/UeC5vY1eQNFl6K5cOFDgspkaaTSAI1VlFRuN3q0b9jw4PUm/SnF/pms0S3bxT0maOxu+qvBhuE2cVGY2v0kjZ/VDr5p2T45fpOecXlzVcHOtJ713pkNl1jeMGaDaBIFRn1UmV19Lf7Wk8/ujwIH0wGr+rbLqzIat5myy9Kc+fff3gIkHFdb0+6X2x8hQfdmE42H/+7KsHn5bG0WbzeRrG2t2w2tKlvClMG7iCpEol05f3nZ79nGWZTrNemk0gCNVZDY4OD4o/CWA0vkrVGfUydlaDYoRForWdHrNRNJtAEJrNOq0/ZUajpJmZ07O3H/lsSdOIs0ZImzeHgy/lWpOlFLPaubE0m0AQqrNmSe1nv9fr9z7Pbq1xtdi1eosVf/NUlKnImk+cAUFoNoEgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEIQ4A4IQZ0AQ4gwIQpwBQYgzIAhxBgQhzoAgxBkQhDgDghBnQBDiDAhCnAFBiDMgCHEGBCHOgCDEGRCEOAOCEGdAEOIMCEKcAUGIMyAIcQYEIc6AIMQZEMT/AEj3mqGP6JRpAAAAAElFTkSuQmCC",BaseImageStyleConfig=({controller:r})=>{const{style:e}=r.getConfig();let{type:t,onLineUrl:n,localUrl:i}=e;const[,a]=reactExports.useState(0),o=l=>{const{id:c,data:u,dataFragment:f,reRender:d}=l;if(c==="localUrl"){const{hashCode:g,value:p}=u;r.update({style:{localUrl:p,hashCode:g}})}else r.update(f);d&&a(g=>g+1)},s={key:"style",type:"grid",children:[{id:"imageType",key:"type",type:"radio",label:"来源",value:t,reRender:!0,config:{options:[{label:"本地",value:"local"},{label:"在线",value:"online"}]}},{key:"onLineUrl",rules:"{type} === 'online'",type:"input",label:"链接",value:i},{id:"localUrl",key:"localUrl",rules:"{type} === 'local'",type:"image-upload",label:"上传",value:n}]};return jsxRuntimeExports.jsx(LCGUI,{schema:s,onFieldChange:o})};class BaseImageDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础图片",compKey:"BaseImage",type:"基础",typeKey:"base"}}getChartImg(){return baseImage}getController(){return BaseImageController}getInitConfig(){return{base:{id:"",name:"基础图片",type:"BaseImage"},style:{type:"online",localUrl:"",onLineUrl:""}}}getMenuList(){return getDefaultMenuList().filter(e=>e.key!=="theme"&&e.key!=="data"&&e.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseImageStyleConfig}}}const __vite_glob_0_35=Object.freeze(Object.defineProperty({__proto__:null,default:BaseImageDefinition},Symbol.toStringTag,{value:"Module"})),baseTableImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAABZCAIAAACIZuD2AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAi1SURBVHic7Z1bUFP5Hcd/hhPMyeWQeIAkco1glPtFUEFwNax4ic5sdHULebBTnc507E6nXV+6sy/t6OPah9pxH9idMg5k2B1Fq1Anu6Zd2PVYZdEoBD3LAhIxCRgJIXCAnGb7gBdqO3U4YXLyn/4/b2EOv/lOPjn/c/vN76xKqXh7wvxbiA+kk4/DmnSxU7xCOuUNJ+nETvGc1L/8ngAAWLVK7CRLiKswEF95JGIHwCwDbAslsC2UwLZQghD6j9oLh1WHvhj9YLveoFfdaOtrBQBKf+FoJgxOegBg0v/Lm/6Vy/kGDh4qP8mHehcWP3Gdf41U1yWp5b4WZtq8t1B2vffkk5hlgcZdufDlpL46qTpDcqhtEABOHCjdp4xA4kInMzUXUuQVDJ78UkhlgbZMNfoyndRlVXp0inJCcuhXldXME82GlMnbD47fDJ+wbNxH+oRVFkKm8RiMVV/2Nb5XWN7WdxIAko0frE30zskM2SllQX+gNreqbZCJTZjcLFOyJt+qlKmlagI6GooHBu6BEm7cHoOqNEMWbfDNDQutLdCWI7DAuCYhW8N9/e2dnMLetj5Hvrb6MqvZW+TZNN/ytz6za0FopGWjIyaGZcbrDVoyVSFrKO6Ym/rYOd35KKIH8pCB61xQ5N2fM5UD0xuTNFmr9cHJC7xEdmWqfK9qcd/aRywcK5Jd+N5/R6U5FkVtoSuhDHTpdOCJH9YXl6cqqhvy62Yl2TvX5fNc77NIXkm+qyyY3zIURbDlMAsyybzjH2NQlWG4PXYRgNNr9Clyk4yYjATyQrzhLcpzLkZZ4DrbsisXJiJWc1peakJHQ/4NZtSrSjSkJplTEz1DfDS1hZ5lsJ6ByGqDkj9lu+fwTp+1uY5d7qtjp28wd822e2abZ4CP6fnLRcZ959/+ICmTTP3paQIsEHq1bG5w+HQs0wDA3UGzbeyOd9Jsc50eCXVw/MB9V0eAh0f+zqfCqwo9bm1KCXzNlK/J7WgoliVK8hryDYzrNA/69cazaQBA6GFOeKhl4vVOdgIAgLpISw76OwFgNpGhVGXKfwaesSd8xlPJ4ZiFAQDgI+W7i61rQJYo6WgoDrg5SJvtDRQf40MfyRUf79S4hB5CV6VUvD2x/8MVDSsc6TN3eE2G2CleIQ14wmq92Cmek3r5d/h6CyWwLZTAtlAC20IJAgDIke/EjvGcyGpF/IQBgEiinAzE8J7Vm1iVnh5Hz2ox/xu8EqIEtoUS2BZKYFsogW2hBLaFEtgWSmBbKCHw+Ra92bJ/Ax0e7Ye1ZKutq6Cm9KkzaKzKJl9uMTvCfMNOr1DK5UCQSuBCPKGkaXLWP8FF9bA2KgyWX+ynQkFKTQUDQUoZvHquXXBHxiICbfmdX117tGOPiQwTugM/Pz5/ramfk/LOqVflIkEuumSCMB742TvruS/O2NKtP4FrwxusgaZm8e5kkTIphECaKAUAqYx84/ZvROhKuG1vHX2r60GSLpmaHx2CjVVGkqDXl7zEqCHE+FGzVz7r8QIAuDzzG+qywkNR/phXgvDCij25FrhvkVNh+aYjlT9c9XoLQaMYsNndQJAPnVMv7PMzYuxaL8muywy0N31b3bhNC1di2Cu3FJXU3d9HQiaVNOLxzXt8vtmoSwrct7jv2pvsj8MyAEI1Nk69855RpkyilhQjFEmk4M7S6PF7IGt3/a40mIhdB+rrTLPddscYDSOXrtjt9u/pgoKoSwq9B280Ha1JZi89TN4lv3WJ4XMKUn5ck5mxdGnmRphuUU4z4oU1pqPvJg/ZL3YHSy3mAjrEtrUzUX4f+IkJSuDrLZTAtlAC20IJbAslsC2UwLZQAttCCWwLJbAtlMC2UALbQglsCyWwLZTAtlAC20IJbAslhD6NJ0iapgjI2LwZbt1yQyTol1RYD5dSr7Z47Djb3r8iGZcVK4WWc35/XHSoAQCozMcPDDS1rtCclwSKot681X8ikcrp3J3m7QZdVq56ZtTtDSq25IU/dUhyw3/nEsKfOiTl6X33Y91xpC0qTQ6l7j5ouC/fbKEnNLsPJPU4PTEO8QKj6ei+7TUb0ySUoaCisrKkSD3rHI6uTUTgSkhutRwuI/s7r153XO14CKX1lioKAIAK8+K1rQD4nD0u/+wMx2UaCB8zfI0NGw2ihWEdzZeeeR80f3K+uWsm+PDPzQ422pJCe56+af2kvbv/sQfSK6rSgl3nW7uDINVativd/TPTVNnxKnFmB9O11iNyx8WexU8E8HPRt4VFkWZbtm6eJFNMdYnuFZngJnAlVBlrd2zamJNTtDVPOTr+49qctQlzSTqivfnCKD/D9jC9IUORJvYrYY31XaVnSq1L+OHZ2h3V2YU6vrubDcY4xCu4wd4+ct+Jo0ZuqG94aIKLRFswmp6nisaP9uv6m88sdndnW47Xzoy+6LRU5CR7z7XGaCRgfFJkeX+L9G7XFYblIKXiYD3FtDjc0ZXEHWooga+3UALbQglsCyWwLZTAtlAC20IJbAslsC2UwLZQAttCCWwLJbAtlMC2UALbQglsCyWwLZTAtlBCaD+hylj72ny78fSDWzJgtVQ6Hw4DALiZ89E3+SyXJf2Eai0Nfl9AxHbCuJl4B9Nst50FMP3m13DmDw4AAGCbWTA1NA7bWkUbXKYtKKC90q1W4rMubiP4dXuO3G3+fESsNCs/8U74O1lL6ku0kEmpoL6egAmnfaLk/Z9WZyjksznreInc+9WHTTeij7dMfM4eH1FSxElhuOcm0HsqOVEnuS0i/sQ7AP+Q0+mF1YVF4HQ6Yd4PAfsfT3GNDb5WGwvrGhuzVyrhsqBrrbt5++cMEEazdcNwi1jT7gDiaeIdAD/t8/l8MxCZ8fl8zw8P2mR+PFZv9vyv1Fgq+aeqsipj/kFTmmc+3VQi4ovp4mfi3WsnGQDc+DikpuKJd0vAE+/+z8HXWyiBbaEEtoUS2BZKYFsogW2hBLaFEtgWSvwLmSM+VkgCs7QAAAAASUVORK5CYII=";class BaseTableComponent extends reactExports.Component{constructor(t){super(t);D(this,"tableRef",null);D(this,"theadRef",null);D(this,"tbodyRef1",null);D(this,"tbodyRef2",null);D(this,"resizeObserver",null);D(this,"contentHeight",null);D(this,"changeTableTrHeight",()=>{var n;const{pageSize:t=0}=this.state.style.body;if(t){const i=((n=this.tableRef)==null?void 0:n.getElementsByClassName("base-table-tr"))||[];console.log(i);const a=this.contentHeight/t;for(let o=0;o<i.length;o++)i[o].style.height=`${a}px`}});this.state={...t}}componentDidMount(){this.tableRef&&(this.contentHeight=this.tableRef.clientHeight-this.theadRef.clientHeight,this.resizeObserver=new ResizeObserver(lodashExports.debounce(t=>{for(let n of t){const{height:i}=n.contentRect;this.contentHeight=i-this.theadRef.clientHeight,this.tbodyRef1&&(this.tbodyRef1.style.height=`${this.contentHeight}px`),this.tbodyRef2&&(this.tbodyRef2.style.height=`${this.contentHeight}px`)}this.changeTableTrHeight()},100)),this.resizeObserver.observe(this.tableRef),this.changeTableTrHeight())}componentWillUnmount(){this.tableRef&&(this.tableRef=null),this.theadRef&&(this.theadRef=null),this.tbodyRef1&&(this.tbodyRef1=null),this.tbodyRef2&&(this.tbodyRef2=null),this.resizeObserver&&this.resizeObserver.disconnect()}render(){const{columns:t,data:n,header:i,body:a}=this.state.style,{enableCarousel:o,carouselSpeed:s=3,pageSize:l,...c}=a,u=o?`scroll ${s}s linear infinite`:"none";return l&&this.changeTableTrHeight(),jsxRuntimeExports.jsx("div",{className:"base-table",ref:f=>this.tableRef=f,children:jsxRuntimeExports.jsxs("table",{children:[jsxRuntimeExports.jsx("thead",{style:{...i},ref:f=>this.theadRef=f,children:jsxRuntimeExports.jsx("tr",{children:t&&t.map((f,d)=>jsxRuntimeExports.jsx("th",{style:{width:f.width,fontWeight:i==null?void 0:i.fontWeight,textAlign:f.textAlign},children:f.label},d))})}),jsxRuntimeExports.jsx("tbody",{style:{...c,animation:u},className:"scroll-body",ref:f=>this.tbodyRef1=f,children:n&&n.map((f,d)=>jsxRuntimeExports.jsx("tr",{className:"base-table-tr",children:t&&t.map((g,p)=>jsxRuntimeExports.jsx("td",{style:{textAlign:g.textAlign},children:f[g.key]},p))},d))}),jsxRuntimeExports.jsx("tbody",{style:{...c,animation:u},className:"scroll-body",ref:f=>this.tbodyRef2=f,children:n&&n.map((f,d)=>jsxRuntimeExports.jsx("tr",{className:"base-table-tr",children:t&&t.map((g,p)=>jsxRuntimeExports.jsx("td",{style:{textAlign:g.textAlign},children:f[g.key]},p))},d))})]})})}}class BaseTableController extends AbstractDesignerController{async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BaseTableComponent,t)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}changeData(e){var n,i;const t=ObjectUtil.merge((n=this.config)==null?void 0:n.style,{data:e});(i=this.instance)==null||i.setState(t)}update(e,t){var n;this.config=ObjectUtil.merge(this.config,e),t=t||{reRender:!0},t.reRender&&((n=this.instance)==null||n.setState(this.config))}updateTheme(e){}}const BaseTableStyleConfig=({controller:r})=>{var s;const{columns:e,header:t,body:n}=((s=r.getConfig())==null?void 0:s.style)||{},[,i]=React.useState(0),a={key:"style",children:[{key:"header",type:"accordion",label:"表头",children:[{type:"grid",config:{columns:2},children:[{key:"height",type:"input",label:"高度",value:t==null?void 0:t.height,config:{type:"number",min:0}},{key:"background",type:"color-picker",label:"背景",value:t==null?void 0:t.background,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"color",type:"color-picker",label:"字色",value:t==null?void 0:t.color,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"fontSize",type:"input",label:"字号",value:t==null?void 0:t.fontSize,config:{type:"number",min:0}},{key:"fontWeight",type:"input",label:"加粗",value:t==null?void 0:t.fontWeight,config:{type:"number",min:0,max:900,step:100}}]}]},{key:"body",type:"accordion",label:"表体",children:[{type:"grid",config:{columns:2},children:[{key:"background",type:"color-picker",label:"背景",value:n==null?void 0:n.background,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"color",type:"color-picker",label:"字色",value:n==null?void 0:n.color,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"fontSize",type:"input",label:"字号",value:n==null?void 0:n.fontSize,config:{type:"number",min:0}},{key:"fontWeight",type:"input",label:"加粗",value:n==null?void 0:n.fontWeight,config:{type:"number",min:0,max:900,step:100}},{type:"switch",label:"轮播",key:"enableCarousel",reRender:!0,value:n==null?void 0:n.enableCarousel},{rules:"{enableCarousel}==='true'",type:"input",label:"速度",key:"carouselSpeed",value:n==null?void 0:n.carouselSpeed,config:{type:"number",min:0,max:100,step:.1}},{type:"input",label:"页行数",key:"pageSize",value:n==null?void 0:n.pageSize,config:{type:"number",min:0,max:100}}]}]},{key:"columns",type:"control-group",label:"表格列",value:e,config:{itemName:"列",template:{type:"grid",config:{columns:2},children:[{key:"key",type:"input",label:"列字段名",value:"newColumn"},{key:"width",type:"input",label:"列宽",config:{type:"number",min:0}},{key:"label",type:"input",label:"列显示名",value:"新建字段"},{key:"textAlign",type:"select",label:"对齐",value:"center",config:{options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}]}}]}}}]},o=l=>{const{dataFragment:c,reRender:u}=l;r.update(c),u&&i(f=>f+1)};return jsxRuntimeExports.jsx(LCGUI,{schema:a,onFieldChange:o})};class DataConfig extends reactExports.Component{constructor(t){var a,o,s,l,c,u;super(t);D(this,"schema",{});D(this,"dataConfig",{});D(this,"apiTestDataResult",null);D(this,"state",{renderCount:0});D(this,"dataSourcesChange",t=>{const{controller:n}=this.props;n.update({data:{dataSource:t}},{reRender:!1}),this.setState({dataSource:t})});D(this,"validate",()=>{var t,n,i;return(t=this.dataConfig.apiData)!=null&&t.url?(n=this.dataConfig.apiData)!=null&&n.method?(i=this.dataConfig.apiData)!=null&&i.header?this.dataConfig.apiData.params?!0:(message.error("请求参数不符合json格式"),!1):(message.error("请求头不符合json格式"),!1):(message.error("请求方式不能为空"),!1):(message.error("接口地址不能为空"),!1)});D(this,"testApi",()=>{var o,s;if(!this.validate())return;let{params:t,header:n}=this.dataConfig.apiData;n=n&&typeof n=="string"?ObjectUtil.stringToJsObj((o=this.dataConfig.apiData)==null?void 0:o.header):n,t=t&&typeof t=="string"?ObjectUtil.stringToJsObj((s=this.dataConfig.apiData)==null?void 0:s.params):t;const{url:i,method:a}=this.dataConfig.apiData;HttpUtil.sendHttpRequest(i,a,n,t).then(l=>{this.apiTestDataResult=l,this.schema.children[2].children[5].children[0].value=JSON.stringify(l,null,2),this.setState({renderCount:this.state.renderCount+1})}).catch(()=>{this.schema.children[2].children[5].children[0].value=JSON.stringify({msg:"请求错误"},null,2),this.setState({renderCount:this.state.renderCount+1})})});D(this,"onFieldChange",t=>{const{schemaKeyPath:n,data:i,reRender:a,id:o,dataFragment:s}=t;if(this.dataConfig=ObjectUtil.merge(this.dataConfig,s),o==="doStaticSave"){const l=this.schema.children[1].children[0].value.replace(/'/g,'"').replace(/\s/g,""),c=JSON.parse(l),{controller:u}=this.props;u.update({data:{staticData:{data:c}}},{reRender:!1}),u.changeData(c)}if(o==="doTest"&&this.testApi(),o==="doSave"){if(!this.validate())return;const{controller:l}=this.props,{params:c,header:u}=this.dataConfig.apiData;c&&typeof c=="string"&&(this.dataConfig.apiData.params=ObjectUtil.stringToJsObj(c)),u&&typeof u=="string"&&(this.dataConfig.apiData.header=ObjectUtil.stringToJsObj(u)),l.update({data:{apiData:this.dataConfig.apiData}},{reRender:!1}),l.changeData(this.apiTestDataResult)}LCGUIUtil.updateSchema(this.schema,n,i),a&&this.setState({renderCount:this.state.renderCount+1})});const{controller:n}=t,i=n.getConfig().data;this.dataConfig=i,this.state={renderCount:0},this.schema={type:"grid",config:{gridGap:"10px"},children:[{key:"dataSource",label:"数据源",type:"select",reRender:!0,value:(i==null?void 0:i.dataSource)||"static",config:{options:[{value:"static",label:"静态数据"},{value:"api",label:"接口(API)"}]}},{key:"staticData",rules:"{dataSource} === 'static'",children:[{key:"data",type:"code-editor",config:{height:500},value:JSON.stringify((a=i==null?void 0:i.staticData)==null?void 0:a.data,null,2)||""},{id:"doStaticSave",type:"button",config:{children:"保存并刷新数据",style:{width:"100%"}}}]},{key:"apiData",rules:"{dataSource} === 'api'",children:[{key:"url",type:"input",label:"接口地址",value:((o=i==null?void 0:i.apiData)==null?void 0:o.url)||""},{key:"method",label:"请求方式",type:"select",value:((s=i==null?void 0:i.apiData)==null?void 0:s.method)||"get",config:{options:[{value:"get",label:"GET"},{value:"post",label:"POST"}]}},{key:"flashFrequency",label:"刷新频率",type:"input",config:{prefix:"每",type:"number",suffix:"秒",min:5},value:((l=i==null?void 0:i.apiData)==null?void 0:l.flashFrequency)||5},{type:"item-panel",label:"请求头",tip:"请求头信息，json格式",children:[{key:"header",type:"code-editor",config:{height:100},value:JSON.stringify((c=i==null?void 0:i.apiData)==null?void 0:c.header,null,2)||""}]},{type:"item-panel",tip:"请求参数，json格式",label:"请求参数",children:[{key:"params",type:"code-editor",config:{height:100},value:JSON.stringify((u=i==null?void 0:i.apiData)==null?void 0:u.params,null,2)||""}]},{type:"item-panel",label:"响应结果",children:[{type:"code-editor",reRender:!0,config:{readonly:!0,height:160},value:""}]},{type:"grid",config:{columns:2},children:[{id:"doTest",type:"button",config:{children:"测试接口",style:{width:"100%"}}},{id:"doSave",type:"button",config:{children:"保存",style:{width:"100%"}}}]}]}]}}render(){return jsxRuntimeExports.jsx(LCGUI,{schema:this.schema,onFieldChange:this.onFieldChange})}}const DataConfig$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataConfig},Symbol.toStringTag,{value:"Module"}));class BaseTableDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础表格",compKey:"LcBaseTable",type:"基础",typeKey:"base"}}getChartImg(){return baseTableImg}getController(){return BaseTableController}getInitConfig(){const e=[{name:"张三",age:18,sex:"男"},{name:"李四",age:20,sex:"女"},{name:"王五",age:22,sex:"男"}];return{base:{id:"",name:"基础表格",type:"LcBaseTable"},style:{columns:[{key:"name",label:"姓名",width:void 0,textAlign:"center"},{key:"age",label:"年龄",width:void 0,textAlign:"center"},{key:"sex",label:"性别",width:void 0,textAlign:"center"}],data:e,header:{height:40,background:"#0080be",color:"#fff",fontSize:14,fontWeight:900},body:{background:"#141414",color:"#acacac",fontSize:14,fontWeight:500,enableCarousel:!1,carouselSpeed:3}},data:{dataSource:"static",staticData:{data:e}}}}getMenuList(){return getDefaultMenuList().filter(e=>e.key!=="theme"&&e.key!=="mapping")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseTableStyleConfig,animation:AnimationConfig,data:DataConfig}}}const __vite_glob_0_36=Object.freeze(Object.defineProperty({__proto__:null,default:BaseTableDefinition},Symbol.toStringTag,{value:"Module"})),baseTextImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARAAAACqCAIAAADqToflAAAGs0lEQVR4Xu3bXWsTWQCHcT9ILwYsLGVpVoJYIb2IEMSgZTHFCkGCYEQCWjoiUQISMBeZixTJRUoJQgpT6NfceZ/JvP9bd9mL50cv2sx0OoV5es6ZSe89fvz4LwD13HOC2QFQD8EAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBARTV+fDbPbD+Rh10lscnZG7aTb7kLexTPPki/SNxl6z0xt8GuefRqXwPL+cNNObUAvB1NWf33isfnqLo2/5G+fbG+/vNTMafxiJPVrmZd43FupNbf8n2dPj5HFqCs/z0mylN6EWgqnQOlv715hkfeZdkOH1ub2p2341cHQfuodPBrPXPnE3PC/769/7HhTjfIteDMHcFcFU+BeC6fuReEPVVjDBz/I+b74eezPAzMfPTXSkRXbrj9n4tdfb8XTza5P5CGO7sTOb3I/pceI3Rx6Cqes2UzJPMCaszXbwQhBJeTC3C/WmtNVKub8bkgimrjCYUjnBdCfekLD51g1f+U+CyRth7OvEftc5gwwjTCWCqSsMZrPMzIJmP5bBPCkbzNOxt8mevoxeqhVMLDhC3sLDiO4B3Cze7qU2ph1+WgX7+pajR+ldUIlg6gqDWU3chXnKJLgW08HEV7Qd/BWf9sJINj+d0qyVv/3X0gnPuvC+SB+kM/7lH2Mzeba1zt97u/A3OD32yu8AGG3zItg3dmG2y78LGQRT122mZI9Gy/QezrgSjipF0sHsHHwMx4bzYSN+OT7O5mv5U5lGfx4t9z227X9tz/uJA6IawdSlL/obfSu8TNeTo+bQ28cNZnSeWFf4OyRXFN97iYN49gbRUDJ7FUy9Gu/C124Ww/3t/bcY7bOgt/VnM7qt3P8crJFWZwwzAoIpd6ubTS4njGgq5S8//EOleqv74DK+B3Bl9fd3jCdmtCAJVvn5jPZoGTTpTsASz2ESk7TVWYdmaiKYcncJJjGVSgbTGi3ckWQxcq/z7WCCW1vTzBDjLUKiidzFYnkVfV6yDjE64djiRGE+MdIPLveH0SC1/n7SKDwOYgRTz/3W0PJvVtmWO+0P3wPmvSmr0Z/52zbn5lFydnQ4Mi1vFZMM5tD0Bou1ebiTDia4nnNnfVujSsjPII9xEJ7wTXjOO+lgnDM/nsZ3ry8nJw8KjoYQwVQxdtuD2Tp4gmEvRm3vHWFHE/9Ccxcnrva7cL1yvbY+HsV/rf1L9HcE45xK99vWw5nV54LRZTc8Pc/6W+8geCObv46KT9s98/fRSss5+cWgbDkEgim3P4ivpqvgzlIhe72OZkq2FVx5vycYr9q8e2vOmNZ7mK0mXuivToN34hSa9xtv/N8yGohQiGAqtE7dK8+ba/WmiYfiYTyJu1vno9b+kXnuToRWp+FC3G/AXlnBw001GKP5fDjzn89Erjab5DN792HqZPi8ud1Noz9fL94dGPXuYjdejGenBeMVEgimUrPzNLseDq/C7NP3HaPxtBO/3zh91yAOZvIiMbWzhu706H0cjPGwO/y6CB5rJqxng9Z9Z+gLytxyvVnOx6NnqTc7G7sPwulX3pSs+Wfml0MxgqlU9Rc6K1lR4QhTwgsmu8S/nA3au4mr22j8bS5S1Xg3nYulF/1QEUyl3xGM+4r/346jTr1gkusQ+8L69DI144oYrdemFZxh/FizAMHcFcH8n6Sewxjt4VfzpFVQyjZ3CvemW7Ur/6J8VwQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEBAMICAYQEAwgIBgAAHBAAKCAQQEAwgIBhAQDCAgGEBAMICAYAABwQACggEEBAMICAYQEAwgIBhAQDCAgGAAAcEAAoIBBAQDCAgGEPwDp7rmXPlnA2sAAAAASUVORK5CYII=";class BaseTextComponent extends reactExports.Component{constructor(e){super(e),this.state={...e}}render(){var n;const{style:e,data:t}=this.state;return jsxRuntimeExports.jsx("div",{style:{height:"100%",...e},children:(n=t==null?void 0:t.staticData)==null?void 0:n.data})}}class BaseTextController extends AbstractDesignerController{async create(e,t){this.config=t,this.container=e,this.instance=await ComponentUtil.createAndRender(e,BaseTextComponent,t)}destroy(){this.instance=null,this.config=null}getConfig(){return this.config}update(e,t){var n;this.config=ObjectUtil.merge(this.config,e),t=t||{reRender:!0},t.reRender&&((n=this.instance)==null||n.setState(this.config))}updateTheme(e){}}const BaseTextStyleConfig=({controller:r})=>{var a;const{data:e,style:t}=r.getConfig(),n=o=>{const{dataFragment:s}=o;r.update(s)},i={type:"grid",config:{columns:2},children:[{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:t==null?void 0:t.fontSize,config:{type:"number",min:1}},{key:"fontWeight",type:"input",label:"加粗",value:(t==null?void 0:t.fontWeight)||400,config:{type:"number",min:100,max:900,step:100}},{key:"color",type:"color-picker",label:"颜色",value:"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"fontFamily",type:"select",label:"字体",value:"",config:{options:[{label:"钉钉进步体",value:"DingTalk JinBuTi"},{label:"点点像素体",value:"DottedSongtiCircleRegular"},{label:"抖音美好体",value:"DouyinSansBold"},{label:"优设标题黑",value:"优设标题黑"},{label:"字体传奇南安体",value:"字体传奇南安体-免费商用"},{label:"庞门正道标题",value:"庞门正道标题体免费版"},{label:"站酷文艺体",value:"站酷文艺体"},{label:"LHTFONT",value:"LHTFONT"}]}}]},{key:"data",children:[{key:"staticData",children:[{key:"data",type:"text-area",label:"内容",value:(a=e==null?void 0:e.staticData)==null?void 0:a.data,config:{gridColumn:"1/3"}}]}]}]};return jsxRuntimeExports.jsx(LCGUI,{schema:i,onFieldChange:n})};class BaseTextDefinition extends AbstractDefinition{getBaseInfo(){return{compName:"基础文本",compKey:"BaseText",type:"基础",typeKey:"base",width:64,height:26}}getChartImg(){return baseTextImg}getController(){return BaseTextController}getInitConfig(){return{base:{id:"",name:"基础文本",type:"BaseText"},style:{color:"#a7a7a7",fontSize:16,alignItems:"left",justifyContent:"space-around"},data:{dataSource:"static",staticData:{data:"基础文本"}}}}getMenuList(){return getDefaultMenuList().filter(e=>e.key!=="theme"&&e.key!=="mapping"&&e.key!=="data")}getMenuToConfigContentMap(){return{base:BaseInfo,style:BaseTextStyleConfig,animation:AnimationConfig,theme:ThemeConfig}}}const __vite_glob_0_37=Object.freeze(Object.defineProperty({__proto__:null,default:BaseTextDefinition},Symbol.toStringTag,{value:"Module"}));class AbstractConvert{}class AbstractLoader{}class AbstractDesignerLoader extends AbstractLoader{constructor(){super(...arguments);D(this,"definitionMap",{});D(this,"headerItemInstances",[]);D(this,"convertMap",{})}load(){this.scanComponents(),this.initProject()}scannerCustomComponents(){const t=Object.assign({"../../comps/antd-common/AntdCommonDefinition.ts":__vite_glob_0_0,"../../comps/antd-common/area/AbstractAreaDefinition.ts":__vite_glob_0_1,"../../comps/antd-common/bar/AbstractBarDefinition.ts":__vite_glob_0_2,"../../comps/antd-common/column/AbstractColumnDefinition.ts":__vite_glob_0_3,"../../comps/antd-common/line/AbstractLineDefinition.ts":__vite_glob_0_4,"../../comps/antd-common/rose/AbstractRoseDefinition.ts":__vite_glob_0_5,"../../comps/antd-common/scatter/AbstractScatterDefinition.ts":__vite_glob_0_6,"../../comps/antd/area-base/AntdBaseAreaDefinition.ts":__vite_glob_0_7,"../../comps/antd/area-percent/AntdPercentAreaDefinition.ts":__vite_glob_0_8,"../../comps/antd/area-stack/AntdStackAreaDefinition.ts":__vite_glob_0_9,"../../comps/antd/bar-base/AntdBaseBarDefinition.ts":__vite_glob_0_10,"../../comps/antd/bar-group/AntdGroupBarDefinition.ts":__vite_glob_0_11,"../../comps/antd/bar-percent/AntdPercentBarDefinition.ts":__vite_glob_0_12,"../../comps/antd/bar-range/AntdRangeBarDefinition.ts":__vite_glob_0_13,"../../comps/antd/bar-stack/AntdStackBarDefinition.ts":__vite_glob_0_14,"../../comps/antd/column-base/AntdBaseColumnDefinition.ts":__vite_glob_0_15,"../../comps/antd/column-group/AntdGroupColumnDefinition.ts":__vite_glob_0_16,"../../comps/antd/column-percent/AntdPercentColumnDefinition.ts":__vite_glob_0_17,"../../comps/antd/column-range/AntdRangeColumnDefinition.ts":__vite_glob_0_18,"../../comps/antd/column-stack/AntdStackColumnDefinition.ts":__vite_glob_0_19,"../../comps/antd/gauge/AntdGaugeDefinition.ts":__vite_glob_0_20,"../../comps/antd/line-base/AntdBaseLineDefinition.ts":__vite_glob_0_21,"../../comps/antd/line-multi/AntdMultiLineDefinition.ts":__vite_glob_0_22,"../../comps/antd/line-step/AntdStepLineDefinition.ts":__vite_glob_0_23,"../../comps/antd/liquid/AntdLiquidDefinition.ts":__vite_glob_0_24,"../../comps/antd/pie/AntdPieDefinition.ts":__vite_glob_0_25,"../../comps/antd/ring-progress/AntdRingProgressDefinition.ts":__vite_glob_0_26,"../../comps/antd/rose-base/AntdBaseRoseDefinition.ts":__vite_glob_0_27,"../../comps/antd/rose-group/AntdGroupRoseDefinition.ts":__vite_glob_0_28,"../../comps/antd/rose-stack/AntdStackRoseDefinition.ts":__vite_glob_0_29,"../../comps/antd/scatter-bubble/AntdScatterBubbleDefinition.ts":__vite_glob_0_30,"../../comps/antd/scatter-point/AntdScatterPointDefinition.ts":__vite_glob_0_31,"../../comps/group-layer/GroupLayerDefinition.ts":__vite_glob_0_32,"../../comps/lc/base-color-block/BaseColorBlockDefinition.ts":__vite_glob_0_33,"../../comps/lc/base-iframe/BaseIframeDefinition.ts":__vite_glob_0_34,"../../comps/lc/base-image/BaseImageDefinition.ts":__vite_glob_0_35,"../../comps/lc/base-table/BaseTableDefinition.ts":__vite_glob_0_36,"../../comps/lc/base-text/BaseTextDefinition.ts":__vite_glob_0_37});Object.keys(t).forEach(n=>{var a;const i=(a=t[n])==null?void 0:a.default;if(i&&AbstractDefinition.isPrototypeOf(i)){let o=new i;if(typeof o.getBaseInfo=="function"){let s=o.getBaseInfo().compKey;s&&(this.definitionMap[s]=o)}}else if(i&&AbstractConvert.isPrototypeOf(i)){let o=new i,s=o.getKey();this.convertMap[s]=o}})}}const vt=class vt extends AbstractDesignerLoader{static getInstance(){return this.instance||(this.instance=new vt),this.instance}scanComponents(){this.scannerHeader(),this.scannerCustomComponents()}scannerHeader(){const e=Object.assign({"/src/designer/header/items/blue-print/BluePrintHdImpl.tsx":__vite_glob_0_0$1,"/src/designer/header/items/blue-print/BluePrintHdItem.ts":__vite_glob_0_1$1,"/src/designer/header/items/canvas/CanvasHdConfigImpl.tsx":__vite_glob_0_2$1,"/src/designer/header/items/canvas/CanvasHdItem.tsx":__vite_glob_0_3$1,"/src/designer/header/items/preview/PreViewHdItem.tsx":__vite_glob_0_4$1,"/src/designer/header/items/project/ProjectHdItem.tsx":__vite_glob_0_5$1,"/src/designer/header/items/project/ProjectHdItemImpl.tsx":__vite_glob_0_6$1,"/src/designer/header/items/save/SaveHdItem.tsx":__vite_glob_0_7$1,"/src/designer/header/items/theme/ThemeHdItem.tsx":__vite_glob_0_8$1,"/src/designer/header/items/theme/ThemeHdItemImpl.tsx":__vite_glob_0_9$1});let t=[];Object.keys(e).forEach(n=>{var a;const i=(a=e[n])==null?void 0:a.default;if(i&&AbstractHeaderItem.isPrototypeOf(i)){let o=new i;t.push(o.getHeaderItemInfo())}}),this.headerItemInstances=t.sort((n,i)=>{const a=n.order||0,o=i.order||0;return a-o})}initProject(){const{saveType:e,id:t}=URLUtil.parseUrlParams();operatorMap[e].getProjectData(t).then(n=>{var i,a;if(n){const{doInit:o,setLoaded:s}=designerStore$1;o({id:t,canvasConfig:n==null?void 0:n.canvasConfig,elemConfigs:n==null?void 0:n.elemConfigs,layerConfigs:n==null?void 0:n.layerConfigs,statisticInfo:n==null?void 0:n.statisticInfo,themeConfig:n==null?void 0:n.themeConfig,extendParams:n==null?void 0:n.extendParams});const{setMinLevel:l,setMaxLevel:c}=eventOperateStore$1;l(((i=n==null?void 0:n.extendParams)==null?void 0:i.minLevel)||0),c(((a=n==null?void 0:n.extendParams)==null?void 0:a.maxLevel)||0);const{setAPMap:u,setLines:f,setAPLineMap:d,setBpNodeLayoutMap:g,setBpNodeConfigMap:p}=bpStore$1;u((n==null?void 0:n.bpAPMap)||{}),f((n==null?void 0:n.bpLines)||{}),d((n==null?void 0:n.bpAPLineMap)||{}),g((n==null?void 0:n.bpNodeLayoutMap)||{}),p((n==null?void 0:n.bpNodeConfigMap)||{});const{initUsedLayerNodes:v}=bpLeftStore$1,y={};Object.keys((n==null?void 0:n.bpNodeLayoutMap)||{}).forEach(m=>{y[m]=!0}),v(y),s(!0)}else message.error("项目不存在")})}};D(vt,"instance",null);let EditorDesignerLoader=vt;const yt=class yt extends AbstractDesignerLoader{static getInstance(){return this.instance||(this.instance=new yt),this.instance}scanComponents(){this.scannerCustomComponents()}initProject(){const{saveType:e,id:t}=URLUtil.parseUrlParams();operatorMap[e].getProjectData(t).then(n=>{var i,a;if(n){const{doInit:o,setLoaded:s}=designerStore$1;o({id:t,canvasConfig:n==null?void 0:n.canvasConfig,elemConfigs:n==null?void 0:n.elemConfigs,layerConfigs:n==null?void 0:n.layerConfigs,statisticInfo:n==null?void 0:n.statisticInfo,themeConfig:n==null?void 0:n.themeConfig,extendParams:n==null?void 0:n.extendParams});const{setMinLevel:l,setMaxLevel:c}=eventOperateStore$1;l(((i=n==null?void 0:n.extendParams)==null?void 0:i.minLevel)||0),c(((a=n==null?void 0:n.extendParams)==null?void 0:a.maxLevel)||0);const{setAPMap:u,setLines:f,setAPLineMap:d,setBpNodeConfigMap:g,setBpNodeControllerInsMap:p}=bpStore$1;u((n==null?void 0:n.bpAPMap)||{}),f((n==null?void 0:n.bpLines)||{}),d((n==null?void 0:n.bpAPLineMap)||{}),g((n==null?void 0:n.bpNodeConfigMap)||{});const v={};Object.values(n==null?void 0:n.bpNodeLayoutMap).forEach(x=>{const{type:_,id:S}=x,A=bpNodeControllerMap.get(_),b=n==null?void 0:n.bpNodeConfigMap[S];v[S]=new A(b)}),p(v);const{initUsedLayerNodes:y}=bpLeftStore$1,m={};Object.keys((n==null?void 0:n.bpNodeLayoutMap)||{}).forEach(x=>{m[x]=!0}),y(m),s(!0)}else message.error("项目不存在")})}};D(yt,"instance",null);let ViewDesignerLoader=yt;const loaderMap=new Map;loaderMap.set(DesignerMode.EDIT,EditorDesignerLoader.getInstance());loaderMap.set(DesignerMode.VIEW,ViewDesignerLoader.getInstance());class DesignerLoaderFactory{static getLoader(){const{mode:e}=URLUtil.parseUrlParams();return e&&loaderMap.has(e)?loaderMap.get(e):EditorDesignerLoader.getInstance()}}class ContextMenuStore{constructor(){D(this,"visible",!1);D(this,"position",[0,0]);D(this,"mouseDownTime",0);D(this,"mouseUpTime",0);D(this,"updateVisible",e=>this.visible=e);D(this,"setPosition",e=>this.position=e);D(this,"setMouseDownTime",e=>this.mouseDownTime=e);D(this,"setMouseUpTime",e=>this.mouseUpTime=e);makeObservable(this,{visible:observable,position:observable,updateVisible:action,setPosition:action})}}const contextMenuStore=new ContextMenuStore;class BaseLayer extends React.PureComponent{constructor(t){super(t);D(this,"layerName","");D(this,"closeContextMenu",()=>{const{visible:t,updateVisible:n}=contextMenuStore;t&&n(!1)});D(this,"toggleLock",t=>{t.stopPropagation();const{lockChange:n}=layerListStore$1;n&&n(this.state.compId,!this.state.lock),this.closeContextMenu()});D(this,"toggleHide",t=>{t.stopPropagation();const{hideChange:n}=layerListStore$1;n&&n(this.state.compId,!this.state.hide),this.closeContextMenu()});D(this,"onSelected",t=>{const{hide:n,compId:i}=this.state;if(n)return;t.stopPropagation();const{selectedChange:a}=layerListStore$1;a&&a(i,t),this.closeContextMenu()});D(this,"openInput",t=>{t.stopPropagation();const{inputMode:n}=this.state;n||this.setState({inputMode:!0}),this.closeContextMenu()});D(this,"closeInput",()=>{const{inputMode:t,compId:n,name:i}=this.state;if(t&&i!==this.layerName){const{updateLayer:a,compController:o}=designerStore$1;a([{id:n,name:this.layerName}],!1);const s=o[n];s&&s.update({base:{name:this.layerName}},{reRender:!1}),this.setState({inputMode:!1,name:this.layerName})}else this.setState({inputMode:!1})});D(this,"changeLayerName",t=>{this.layerName=t.target.value});this.state={...t},this.layerName=t.name||""}}class LayerItem extends BaseLayer{render(){const{name:e="",inputMode:t,lock:n=!1,hide:i=!1,selected:a=!1}=this.state||{};return jsxRuntimeExports.jsxs("div",{className:`layer-item ${a?"layer-selected":i?"layer-hide":n?"layer-lock":""}`,onClick:this.onSelected,onDoubleClick:this.openInput,children:[jsxRuntimeExports.jsx("div",{className:"layer-name",children:t?jsxRuntimeExports.jsx("input",{type:"text",defaultValue:e,autoFocus:!0,onChange:this.changeLayerName,onKeyDown:o=>{o.code==="Enter"&&this.closeInput()},onBlur:this.closeInput}):e}),jsxRuntimeExports.jsxs("div",{className:"layer-operators",children:[jsxRuntimeExports.jsx("div",{className:"layer-operator",onClick:this.openInput,children:jsxRuntimeExports.jsx(EditFilled,{})}),jsxRuntimeExports.jsx("div",{className:"layer-operator",onClick:this.toggleHide,children:i?jsxRuntimeExports.jsx(EyeInvisibleFilled$1,{}):jsxRuntimeExports.jsx(EyeFilled,{})}),jsxRuntimeExports.jsx("div",{className:"layer-operator",onClick:this.toggleLock,children:n?jsxRuntimeExports.jsx(UsbFilled$1,{}):jsxRuntimeExports.jsx(UnlockFilled$1,{})})]})]})}}class LayerGroupItem extends BaseLayer{render(){const{children:e}=this.props,{hide:t,lock:n,showContent:i,selected:a,name:o,inputMode:s}=this.state;return jsxRuntimeExports.jsxs("div",{className:"layer-group",children:[jsxRuntimeExports.jsxs("div",{className:`group-header ${a?"layer-selected":t?"layer-hide":n?"layer-lock":""}`,onDoubleClick:this.openInput,onClick:l=>this.onSelected(l),children:[jsxRuntimeExports.jsxs("div",{className:"group-left",children:[jsxRuntimeExports.jsx("div",{className:"group-icon",onClick:()=>this.setState({showContent:!i}),children:jsxRuntimeExports.jsx(FolderOpenFilled$1,{})}),jsxRuntimeExports.jsx("div",{className:"group-name",children:s?jsxRuntimeExports.jsx("input",{type:"text",defaultValue:o,autoFocus:!0,onChange:this.changeLayerName,onKeyDown:l=>{l.code==="Enter"&&this.closeInput()},onBlur:this.closeInput}):o})]}),jsxRuntimeExports.jsxs("div",{className:"group-operators",children:[jsxRuntimeExports.jsx("div",{className:"group-operator",onClick:this.openInput,children:jsxRuntimeExports.jsx(EditFilled,{})}),jsxRuntimeExports.jsx("div",{className:"group-operator",onClick:this.toggleHide,children:t?jsxRuntimeExports.jsx(EyeInvisibleFilled$1,{}):jsxRuntimeExports.jsx(EyeFilled,{})}),jsxRuntimeExports.jsx("div",{className:"group-operator",onClick:this.toggleLock,children:n?jsxRuntimeExports.jsx(UsbFilled$1,{}):jsxRuntimeExports.jsx(UnlockFilled$1,{})})]})]}),i&&jsxRuntimeExports.jsx("div",{className:"group-content",children:e})]})}}var It;class ComponentContainer extends React.PureComponent{constructor(){super(...arguments);D(this,"ref",null);D(this,"mode",((It=URLUtil.parseUrlParams())==null?void 0:It.mode)||DesignerMode.EDIT)}componentDidMount(){const{layer:t}=this.props,{elemConfigs:n,compController:i}=designerStore$1;let a=DesignerLoaderFactory.getLoader().definitionMap[t.type];if(a){const o=a.getController();if(o){let s;t.id in i?s=i[t.id].getConfig():t.id in n?s=n[t.id]:(s=a.getInitConfig(),s.base.id=t.id);const{mode:l}=URLUtil.parseUrlParams(),c=new o;i[t.id+""]=c,c.create(this.ref,s).then(()=>{l===DesignerMode.VIEW&&(c.registerEvent(),c.loadComponentData())})}}}render(){const{layer:t}=this.props,{auxiliaryBorder:n}=runtimeConfigStore;return jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Loading,{}),children:jsxRuntimeExports.jsx("div",{id:t.id,"data-type":t.type,"data-lock":t.lock,"data-hide":t.hide,style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`,position:"absolute",display:t.hide?"none":"block",border:n?"1px solid #65eafc":"none"},className:"lc-comp-item",children:jsxRuntimeExports.jsx("div",{ref:i=>this.ref=i,style:{width:"100%",height:"100%",pointerEvents:`${this.mode===DesignerMode.VIEW?"auto":"none"}`,position:"relative"}})},t.id+"")})}}class GroupLayerController extends AbstractDesignerController{constructor(e,t,n){super(),this.container=e,this.config=t,this.instance=n}async create(e,t){}getConfig(){return this.config}update(e,t){}}class GroupLayer extends React.PureComponent{constructor(){super(...arguments);D(this,"groupLayerRef",null)}componentDidMount(){const{layer:t}=this.props,{elemConfigs:n,compController:i}=designerStore$1;let a=DesignerLoaderFactory.getLoader().definitionMap.group,o;t.id in i?o=i[t.id].getConfig():t.id in n?o=n[t.id]:(o=a.getInitConfig(),o.base.id=t.id),i[t.id]=new GroupLayerController(this.groupLayerRef,o,this)}render(){return jsxRuntimeExports.jsx("div",{className:"component-group",ref:t=>this.groupLayerRef=t,style:{position:"absolute"},children:this.props.children})}}class LayerBuilder{constructor(){D(this,"parser",(e,t=1)=>{e=lodashExports.cloneDeep(e);let n;t===1?n=Object.values(e).sort((a,o)=>o.order-a.order):n=Object.values(e).sort((a,o)=>a.order-o.order);const i=[];for(const a of n)if(!(a!=null&&a.pid))i.push(a);else{const o=e[a.pid];o&&(o.children=o.children||[],o.children.push(a))}return i});D(this,"buildLayerList",e=>{const t=[];return this.parser(e,1).forEach(n=>{t.push(this.buildLayer(n))}),t});D(this,"buildLayer",e=>{const{type:t,children:n}=e,{targetIds:i}=eventOperateStore$1,{layerInstances:a}=layerListStore$1;let o={key:e.id,name:e.name,lock:e.lock,hide:e.hide,compId:e.id,type:e.type,selected:i.includes(e.id)};if(t==="group"){const s=[];return n==null||n.forEach(l=>{s.push(this.buildLayer(l))}),jsxRuntimeExports.jsx(LayerGroupItem,{...o,ref:l=>a[e.id]=l,children:s})}else return jsxRuntimeExports.jsx(LayerItem,{...o,ref:s=>a[e.id]=s})});D(this,"buildCanvasComponents",e=>{const t=[];return this.parser(e,0).forEach(n=>{t.push(this.buildComponents(n))}),t});D(this,"buildComponents",e=>{const{type:t,children:n}=e;if(t==="group"){const i=[];return n==null||n.forEach(a=>{i.push(this.buildComponents(a))}),jsxRuntimeExports.jsx(GroupLayer,{layer:e,children:i},e.id)}else return jsxRuntimeExports.jsx(ComponentContainer,{layer:e},e.id)})}}const layerBuilder=new LayerBuilder;export{AntdLegend as $,undo as A,BluePrintHdImpl as B,redo as C,DesignerLoaderFactory as D,EditorDesignerLoader as E,toggleSecondaryBorder as F,toggleProjectConfig as G,toggleCanvasConfig as H,toggleGlobalThemeConfig as I,toggleHotKeyDes as J,toggleLayer as K,LayerUtil as L,Moveable as M,doMoveUp as N,doMoveDown as O,doMoveLeft as P,doMoveRight as Q,doBaseBottomEnlargeUp as R,doBaseUpEnlargeDown as S,doBaseRightEnlargeLeft as T,doBaseLeftEnlargeRight as U,doBaseBottomDecreaseUp as V,doBaseUpDecreaseDown as W,doBaseRightDecreaseLeft as X,doBaseLeftDecreaseRight as Y,DragScaleProvider as Z,GroupSelectable as _,layerBuilder as a,AntdCartesianCoordinateSys as a0,AntdCommonUtil as a1,__vite_glob_0_2$1 as a2,__vite_glob_0_6$1 as a3,__vite_glob_0_9$1 as a4,headerStore as b,ref as c,designerStore$1 as d,eventOperateStore$1 as e,footerStore as f,convertUnitSize as g,historyRecordOperateProxy$1 as h,findLast as i,baseInfoStore as j,doCopy as k,layerListStore$1 as l,toBottom as m,doDelete as n,doHide as o,doUnLock as p,doLock as q,rightStore as r,doGrouping as s,toTop as t,doUnGrouping as u,contextMenuStore as v,selectAll as w,doSave as x,delBPLine as y,delBPNode as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AntdLineCommonConfig-7R5gGDug.js","assets/index-n_baRMQq.js","assets/index-pJv3-fHv.css","assets/LCGUI-eTgx-a7u.js","assets/mobxreact.esm-yoTFdQ-y.js","assets/lodash-PKoA678W.js","assets/index-d0SB--Ec.js","assets/index-5z4L7uDA.css","assets/MonacoEditor-hmlWaHFJ.js","assets/MonacoEditor-dxZE7QjG.css","assets/Accordion-mABzpyGC.js","assets/Switch-oFF2VnxV.js","assets/UIContainer-3GtuBK9j.js","assets/QuestionCircleOutlined-sFAPCndT.js","assets/UIContainer-2wM5o6qv.css","assets/Switch-sX9zyvHK.css","assets/Accordion-i35kZnIZ.css","assets/DatabaseFilled-24Fq9-Vu.js","assets/Grid-xGMZ5ABH.js","assets/Grid-p4FjUlc6.css","assets/Input-F0yORoWo.js","assets/Input-kjLITG7W.css","assets/Button-heKRj89e.js","assets/Button-Vi-JaWc8.css","assets/Radio-bSze70jI.js","assets/Radio-scZDuxp-.css","assets/Select-ZiCi6lCH.js","assets/Select-fufuxCpP.css","assets/ColorPicker-AdFWLWru.js","assets/ColorPicker-yQRt1qdR.css","assets/ItemPanel-GHXnX9qH.js","assets/ItemPanel-jQ3rg-Co.css","assets/AntdScatterCommonConfig-i8Too6eA.js","assets/AntdBaseAreaConfig-1lmoZFY4.js","assets/AntdGaugeConfig-YO5Q0ufd.js","assets/AntdBaseLineConfig-ta3Us7jr.js","assets/AntdStepLineConfig-KrXrDf8s.js","assets/AntdLiquidConfig-v8MRCPRS.js","assets/AntdPieStyleConfig-lMP2Epkz.js","assets/AntdRingProgressConfig-y2HX-5pO.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}