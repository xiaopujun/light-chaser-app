var k=Object.defineProperty;var N=(i,n,r)=>n in i?k(i,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[n]=r;var x=(i,n,r)=>(N(i,typeof n!="symbol"?n+"":n,r),r);import{r as u,j as s}from"./index-SMBBRqB_.js";import{C as h}from"./ColorPicker-ftZb5KJZ.js";import{o as D,l as y}from"./LCGUI-jOMUoJmj.js";import{aJ as j}from"./LayerManager-VL54_p8M.js";import{CardPanel as v}from"./CardPanel-rLCMZ88g.js";import I from"./Input-Ud-8WJLh.js";import{U as d}from"./UIContainer-js826Hx0.js";import{Grid as F}from"./Grid-K6MrIzI9.js";import L from"./Button-HBWjA0KU.js";const O="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='25'%20height='25'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%208L40%2040'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2040L40%208'%20stroke='%239b9b9b'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";class E extends u.Component{constructor(){super(...arguments);x(this,"onSelected",()=>{const{onSelected:r,id:e="",name:t="",colors:c}=this.props;r&&r({id:e,name:t,colors:c})})}render(){const{colors:r,selected:e=!1,itemStyle:t,name:c,id:l,showOperator:m=!1,onDel:g}=this.props;return s.jsxs("div",{id:l,className:`lc-theme-item ${e?"lc-theme-item-active":""}`,style:t,onClick:this.onSelected,children:[s.jsxs("div",{className:"lc-theme-item-header",children:[s.jsx("div",{className:"lc-theme-item-title",children:c}),m&&s.jsx("div",{className:"lc-theme-item-operators",children:s.jsx("div",{className:"operator-item",onClick:p=>{p.stopPropagation(),g&&g(l||"")},children:s.jsx("img",{src:O,alt:"删除"})})})]}),s.jsx("div",{className:"lc-theme-item-body",children:Object.keys(this.props.colors).map((p,f)=>s.jsx(h,{disabled:!0,value:r[p]},f))})]})}}class U extends u.Component{constructor(){super(...arguments);x(this,"state",{activeId:""});x(this,"onDel",r=>{const{onDel:e}=this.props,{themeConfig:t,updateThemeConfig:c}=j,l=t.filter(m=>m.id!==r);c(l),e&&e(r)});x(this,"onSelected",r=>{this.setState({activeId:r.id});const{onSelected:e}=this.props;e&&e(r)})}render(){const{activeId:r}=this.state,{showOperator:e}=this.props,{themeConfig:t}=j,c=[];for(let l=0;l<t.length;l++)c.push(s.jsx(E,{id:t[l].id,selected:t[l].id===r,name:t[l].name,showOperator:e,onDel:this.onDel,onSelected:this.onSelected,colors:t[l].colors},l));return s.jsx("div",{className:"lc-theme-list",style:{width:"100%"},children:c})}}const P=D(U),K=()=>{const i=u.useRef({id:"",name:"",colors:{main:"#000000",mainText:"#000000",background:"#000000",subText:"#000000",supplementFirst:"#000000",supplementSecond:"#000000"}}),[n,r]=u.useState(y.cloneDeep(j.themeConfig)||[]),[e,t]=u.useState(i.current),c=o=>{t({...e,name:o})},l=o=>{t({...e,colors:{...e.colors,main:o}})},m=o=>{t({...e,colors:{...e.colors,mainText:o}})},g=o=>{t({...e,colors:{...e.colors,subText:o}})},p=o=>{t({...e,colors:{...e.colors,background:o}})},f=o=>{t({...e,colors:{...e.colors,supplementFirst:o}})},C=o=>{t({...e,colors:{...e.colors,supplementSecond:o}})},T=o=>{if(o==null||o.preventDefault(),e.id===""){n.length>20&&alert("主题数量已达上限");for(let a=0;a<n.length;a++)if(n[a].name===e.name){alert("主题名称重复");return}e.id=n.length+1+"",n.push({...e})}else{for(let a=0;a<n.length;a++)if(n[a].id===e.id){n[a]={...e};break}e.id=""}r(n),t(i.current);const{updateThemeConfig:b}=j;b(n)},w=o=>{const b=n.filter(a=>a.id!==o);r(b)},S=o=>{e.id===o.id?t(i.current):t(o)};return s.jsxs("div",{className:"lc-theme-editor",children:[s.jsx("div",{className:"editor-left",children:s.jsxs("form",{onSubmit:T,children:[s.jsx(v,{label:"主题信息",children:s.jsx(d,{label:"名称",children:s.jsx(I,{value:e.name,onChange:c})})}),s.jsx(v,{label:"颜色定义",children:s.jsxs(F,{columns:3,gridGap:"15px",children:[s.jsx(d,{label:"主体色",children:s.jsx(h,{onChange:l,showText:!0,value:e.colors.main})}),s.jsx(d,{label:"主文字",children:s.jsx(h,{onChange:m,showText:!0,value:e.colors.mainText})}),s.jsx(d,{label:"辅文字",children:s.jsx(h,{onChange:g,showText:!0,value:e.colors.subText})}),s.jsx(d,{label:"背景色",children:s.jsx(h,{onChange:p,showText:!0,value:e.colors.background})}),s.jsx(d,{label:"补充一",children:s.jsx(h,{onChange:f,showText:!0,value:e.colors.supplementFirst})}),s.jsx(d,{label:"补充二",children:s.jsx(h,{onChange:C,showText:!0,value:e.colors.supplementSecond})})]})}),s.jsx("p",{style:{color:"#6e6e6e"},children:"说明：自定义主题色的色值应该保持在同一色系。以确保整体统一的风格。主题色占据主要面积"}),s.jsx("br",{}),s.jsx("div",{className:"theme-operate-btn",children:s.jsx(L,{type:"submit",children:"添加 / 更新"})})]})}),s.jsx("div",{className:"editor-right",children:s.jsx(v,{label:"主题列表",children:s.jsx(P,{showOperator:!0,onSelected:S,onDel:w})})})]})};export{P as T,K as a};
