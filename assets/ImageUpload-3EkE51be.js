import{r as j,j as e}from"./index-iCZTP-IQ.js";import{U as v}from"./Button-jnQH9M57.js";import{U as P,q as w}from"./LayerManager-3yuLGPiW.js";import{g as c}from"./GlobalMessage-WsCOzKv8.js";import{A,P as I}from"./PlusOutlined-xDvzDtDS.js";import"./AntdIcon-zgNTTfGj.js";import"./MainRouter-TLmFUNhG.js";import"./AntdIcon-Rd3SO3V6.js";import"./Compact-oDknFkFq.js";import"./useZIndex-efm0wnDD.js";import"./button-B5djIpAo.js";import"./omit-k9ShT0Nc.js";import"./render-RO1Jm6GY.js";import"./Overflow-hRFeWmQp.js";import"./PlusOutlined-VdblB-UP.js";const $=d=>{const{onChange:o,defaultValue:a,accept:g,size:r,...f}=d,i={uid:"-1",name:"image.png",status:"done"},[s,n]=j.useState(a?[{...i,url:a}]:[]),h=p=>{var l;if(r&&p.size>r*1024*1024)return(l=c.messageApi)==null||l.warning(`文件大小不能超过${r}M`),!1;const{saveType:U}=P.parseUrlParams();return w[U].uploadImage(p).then(m=>{var u;if(!m)(u=c.messageApi)==null||u.error("上传失败");else{const{url:t,hash:x}=m;console.log(t),o&&o({url:t,hash:x}),n([{...i,url:t}])}}),!1};return e.jsx(v,{...f,className:"image-upload",children:e.jsx(A,{name:"file",beforeUpload:h,listType:"picture-card",fileList:s,accept:g,onRemove:()=>{n([]),o&&o({url:"",hash:""})},onPreview:()=>window.open(s[0].url),children:s.length>0?null:e.jsxs("div",{className:"upload-btn",children:[e.jsx(I,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})};export{$ as ImageUpload};
