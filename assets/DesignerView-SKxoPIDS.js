import{r as a,j as s,L as $}from"./index-2e9IcPy_.js";import{aO as z,D as j,a as C}from"./EventOperateStore-HyYK-r0h.js";import{o as E}from"./mobxreact.esm-AuwNKQbs.js";import{l as L}from"./LayerBuilder-AEimkwbo.js";import"./AntdIcon-ncNZqSjB.js";import"./Button-K5sqjUdf.js";import"./index-N2MzzWyb.js";import"./ColorPicker-ZMLKIhUe.js";function O(i){const{width:n,height:d,bodyOverflowHidden:o=!0,delay:h=100}=i;let b;const e=a.useRef(null),[t,S]=a.useState({width:n,height:d,originalHeight:0,originalWidth:0}),p={box:{overflow:"hidden",backgroundSize:"100% 100%",backgroundColor:"#545454",width:"100vw",height:"100vh"},wrapper:{transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms",position:"relative",overflow:"hidden",transformOrigin:"left top"}};let u;function v(){t.width&&t.height?(e.current.style.width=`${t.width}px`,e.current.style.height=`${t.height}px`):(e.current.style.width=`${t.originalWidth}px`,e.current.style.height=`${t.originalHeight}px`)}function H(r){e.current.style.transform=`scale(${r},${r})`;const m=e.current.clientWidth,f=e.current.clientHeight,w=document.body.clientWidth,c=document.body.clientHeight;let l=Math.max((w-m*r)/2,0),y=Math.max((c-f*r)/2,0);e.current.style.margin=`${y}px ${l}px`}function x(){const r=document.body.clientWidth,m=document.body.clientHeight,f=t.width||t.originalWidth,w=t.height||t.originalHeight,c=r/+f,l=m/+w;if(i.fullScreen){e.current.style.transform=`scale(${c},${l})`;return}const y=Math.min(c,l);H(y)}const g=z.debounce(()=>{e.current&&(v(),x())},h);function W(){o&&(b=document.body.style.overflow,document.body.style.overflow="hidden"),u=new MutationObserver(()=>g()),u.observe(e.current,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),S({...t,originalWidth:window.screen.width,originalHeight:window.screen.height}),v(),x(),window.addEventListener("resize",g)}return a.useEffect(()=>(W(),()=>{u.disconnect(),window.removeEventListener("resize",g),o&&(document.body.style.overflow=b)}),[]),s.jsx("div",{style:{...p.box,...i.boxStyle},className:"react-screen-box",children:s.jsx("div",{className:"screen-wrapper",style:{...p.wrapper,...i.wrapperStyle},ref:e,children:i.children})})}class D extends a.Component{constructor(n){super(n),j.getLoader().load()}render(){let{loaded:n,canvasConfig:{width:d,height:o},layerConfigs:h}=C;return n?s.jsx(O,{width:d,height:o,children:s.jsx("div",{style:{width:d,height:o,background:"black",overflow:"hidden",position:"relative"},children:L.buildCanvasComponents(h)})}):s.jsx($,{})}}const P=E(D);export{P as default};
