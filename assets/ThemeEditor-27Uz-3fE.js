var N=Object.defineProperty;var D=(i,n,l)=>n in i?N(i,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[n]=l;var x=(i,n,l)=>(D(i,typeof n!="symbol"?n+"":n,l),l);import{r as u,j as s}from"./index-_9qr0oWN.js";import m from"./ColorPicker-f81jWooX.js";import{C as k}from"./Dialog-qTyf30F_.js";import{o as y}from"./LCGUI-_TxVjmqL.js";import{aE as f}from"./LayerManager-hIg0IjRX.js";import{l as I,U as d}from"./UIContainer-XLRf6mqQ.js";import{CardPanel as b}from"./CardPanel-OkQkI0XZ.js";import E from"./Input-kae2MJ49.js";import{Grid as O}from"./Grid-pYVvnuk_.js";import F from"./Button-z-XazXQz.js";class L extends u.Component{constructor(){super(...arguments);x(this,"onSelected",()=>{const{onSelected:l,id:e="",name:t="",colors:c}=this.props;l&&l({id:e,name:t,colors:c})})}render(){const{colors:l,selected:e=!1,itemStyle:t,name:c,id:r,showOperator:h=!1,onDel:j}=this.props;return s.jsxs("div",{id:r,className:`lc-theme-item ${e?"lc-theme-item-active":""}`,style:t,onClick:this.onSelected,children:[s.jsxs("div",{className:"lc-theme-item-header",children:[s.jsx("div",{className:"lc-theme-item-title",children:c}),h&&s.jsx("div",{className:"lc-theme-item-operators",children:s.jsx("div",{className:"operator-item",onClick:p=>{p.stopPropagation(),j&&j(r||"")},children:s.jsx(k,{})})})]}),s.jsx("div",{className:"lc-theme-item-body",children:Object.keys(this.props.colors).map((p,g)=>s.jsx(m,{disabled:!0,value:l[p]},g))})]})}}class P extends u.Component{constructor(){super(...arguments);x(this,"state",{activeId:""});x(this,"onDel",l=>{const{onDel:e}=this.props,{themeConfig:t,updateThemeConfig:c}=f,r=t.filter(h=>h.id!==l);c(r),e&&e(l)});x(this,"onSelected",l=>{this.setState({activeId:l.id});const{onSelected:e}=this.props;e&&e(l)})}render(){const{activeId:l}=this.state,{showOperator:e}=this.props,{themeConfig:t}=f,c=[];for(let r=0;r<t.length;r++)c.push(s.jsx(L,{id:t[r].id,selected:t[r].id===l,name:t[r].name,showOperator:e,onDel:this.onDel,onSelected:this.onSelected,colors:t[r].colors},r));return s.jsx("div",{className:"lc-theme-list",style:{width:"100%"},children:c})}}const R=y(P),Q=()=>{const i=u.useRef({id:"",name:"",colors:{main:"#000000",mainText:"#000000",background:"#000000",subText:"#000000",supplementFirst:"#000000",supplementSecond:"#000000"}}),[n,l]=u.useState(I.cloneDeep(f.themeConfig)||[]),[e,t]=u.useState(i.current),c=o=>{t({...e,name:o})},r=o=>{t({...e,colors:{...e.colors,main:o}})},h=o=>{t({...e,colors:{...e.colors,mainText:o}})},j=o=>{t({...e,colors:{...e.colors,subText:o}})},p=o=>{t({...e,colors:{...e.colors,background:o}})},g=o=>{t({...e,colors:{...e.colors,supplementFirst:o}})},v=o=>{t({...e,colors:{...e.colors,supplementSecond:o}})},T=o=>{if(o==null||o.preventDefault(),e.id===""){n.length>20&&alert("主题数量已达上限");for(let a=0;a<n.length;a++)if(n[a].name===e.name){alert("主题名称重复");return}e.id=n.length+1+"",n.push({...e})}else{for(let a=0;a<n.length;a++)if(n[a].id===e.id){n[a]={...e};break}e.id=""}l(n),t(i.current);const{updateThemeConfig:C}=f;C(n)},S=o=>{const C=n.filter(a=>a.id!==o);l(C)},w=o=>{e.id===o.id?t(i.current):t(o)};return s.jsxs("div",{className:"lc-theme-editor",children:[s.jsx("div",{className:"editor-left",children:s.jsxs("form",{onSubmit:T,children:[s.jsx(b,{label:"主题信息",children:s.jsx(d,{label:"名称",children:s.jsx(E,{value:e.name,onChange:c})})}),s.jsx(b,{label:"颜色定义",children:s.jsxs(O,{columns:3,gridGap:"15px",children:[s.jsx(d,{label:"主体色",children:s.jsx(m,{onChange:r,showText:!0,value:e.colors.main})}),s.jsx(d,{label:"主文字",children:s.jsx(m,{onChange:h,showText:!0,value:e.colors.mainText})}),s.jsx(d,{label:"辅文字",children:s.jsx(m,{onChange:j,showText:!0,value:e.colors.subText})}),s.jsx(d,{label:"背景色",children:s.jsx(m,{onChange:p,showText:!0,value:e.colors.background})}),s.jsx(d,{label:"补充一",children:s.jsx(m,{onChange:g,showText:!0,value:e.colors.supplementFirst})}),s.jsx(d,{label:"补充二",children:s.jsx(m,{onChange:v,showText:!0,value:e.colors.supplementSecond})})]})}),s.jsx("p",{style:{color:"#6e6e6e"},children:"说明：自定义主题色的色值应该保持在同一色系。以确保整体统一的风格。主题色占据主要面积"}),s.jsx("br",{}),s.jsx("div",{className:"theme-operate-btn",children:s.jsx(F,{type:"submit",children:"添加 / 更新"})})]})}),s.jsx("div",{className:"editor-right",children:s.jsx(b,{label:"主题列表",children:s.jsx(R,{showOperator:!0,onSelected:w,onDel:S})})})]})};export{R as T,Q as a};
