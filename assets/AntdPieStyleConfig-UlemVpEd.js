var ae=Object.defineProperty;var se=(i,t,e)=>t in i?ae(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var c=(i,t,e)=>(se(i,typeof t!="symbol"?t+"":t,e),e);import{r as ee,j as o}from"./index-wY5bseHE.js";import{L as te,a as re}from"./LCGUI-_dUeXFrq.js";import{$ as ce,a1 as pe}from"./LayerBuilder-Ryf4Spmd.js";import{O as r}from"./lodash-XPHEvF3G.js";import"./mobxreact.esm-PDbK3QgA.js";import"./index--5LX04Uf.js";import"./MonacoEditor-5puMjBHq.js";import"./Accordion-paSRSYNv.js";import"./Switch-Iiw6phDi.js";import"./UIContainer-aDq5B8cI.js";import"./QuestionCircleOutlined-_KKQMd73.js";import"./DatabaseFilled-fwiZtmlE.js";import"./Grid-t0ylKH9l.js";import"./Input-Cpxuhm5A.js";import"./Button-bgrh0ISv.js";import"./Radio-a56E0sW3.js";import"./Select-2Dof2XEt.js";import"./ColorPicker-2gxUn56y.js";import"./ItemPanel-3Ea9lF0S.js";class We extends ee.Component{constructor(){super(...arguments);c(this,"pieGraphicsChange",e=>{this.props.controller.update({style:e})});c(this,"legendChange",e=>{this.props.controller.update({style:{legend:e}})})}render(){const e=this.props.controller,l=e.getConfig().style;return o.jsxs(o.Fragment,{children:[o.jsx(ce,{controller:e}),o.jsx(ye,{onChange:this.pieGraphicsChange,config:l})]})}}const ye=({config:i,onChange:t})=>{var y,u,f,m,d,h,g,b,k,x,v,w,S,C,A,R,j,P,z,F,I,W,M,G,T,U,B,L,O,X,Y,D,E,K,_,$,q,H,J,N,Q,V;const[e,l]=ee.useState(i),p=le=>{let{id:a,data:n,dataKeyPath:ne,dataFragment:Z,reRender:oe}=le;if(a==="startAngle"||a==="endAngle")n=Math.PI*n,t&&t(re.createObjectFromArray(ne,n));else if(a==="titleSwitch")if(n){const s={statistic:{title:{style:{fontSize:12,color:"#fff"},content:"text"}}};t(s),l({...r.merge(e,s)})}else t({statistic:{content:!1}}),l({...r.merge(e,{statistic:{title:!1}})});else if(a==="contentSwitch")if(n){const s={statistic:{content:{style:{fontSize:12,color:"#fff"},content:"content"}}};t(s),l({...r.merge(e,s)})}else t({statistic:{title:!1}}),l({...r.merge(e,{statistic:{content:!1}})});else a==="labelRotate"?t({label:{rotate:n*Math.PI}}):t&&t(Z);oe&&l({...e,...Z})},ie={children:[{type:"accordion",label:"图形",children:[{type:"grid",config:{columns:2},children:[{key:"radius",type:"input",label:"外径",value:i.radius,config:{type:"number",min:0,max:1,step:.01}},{id:"startAngle",key:"startAngle",type:"input",label:"起始角",value:(i.startAngle||0)/Math.PI,config:{suffix:"Π",type:"number",min:0,max:2,step:.01}},{key:"innerRadius",type:"input",label:"内径",value:i.innerRadius,config:{type:"number",min:0,max:1,step:.01}},{id:"endAngle",key:"endAngle",type:"input",label:"结束角",value:(i.endAngle||2*Math.PI)/Math.PI,config:{suffix:"Π",type:"number",min:0,max:2,step:.01}},{key:"pieStyle",children:[{key:"stroke",type:"color-picker",label:"描边色",value:"#1c1c1c",config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}},{key:"lineWidth",type:"input",label:"描边宽",value:0,config:{type:"number",min:0,max:30}}]},{key:"color",type:"color-mode",label:"颜色",value:"#1c1c1c",config:{gridColumn:"1 / 3"}}]}]},{key:"statistic",type:"accordion",label:"标题",children:[{key:"title",type:"grid",config:{columns:2},children:[{id:"titleSwitch",key:"titleSwitch",type:"switch",label:"开启",value:!!((y=e.statistic)!=null&&y.title)},{rules:"{titleSwitch} === 'true'",children:[{key:"content",type:"input",label:"内容",value:(f=(u=e.statistic)==null?void 0:u.title)==null?void 0:f.content},{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:((h=(d=(m=e.statistic)==null?void 0:m.title)==null?void 0:d.style)==null?void 0:h.fontSize)||12,config:{type:"number",min:0,max:100}},{key:"fontWeight",type:"input",label:"加粗",value:((k=(b=(g=e.statistic)==null?void 0:g.title)==null?void 0:b.style)==null?void 0:k.fontWeight)||500,config:{type:"number",min:100,max:900,step:100}},{key:"color",type:"color-picker",label:"颜色",value:(w=(v=(x=e.statistic)==null?void 0:x.title)==null?void 0:v.style)==null?void 0:w.color,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]},{key:"offsetX",type:"input",label:"x偏移",value:((C=(S=e.statistic)==null?void 0:S.title)==null?void 0:C.offsetX)||0,config:{type:"number"}},{key:"offsetY",type:"input",label:"y偏移",value:((R=(A=e.statistic)==null?void 0:A.title)==null?void 0:R.offsetY)||0,config:{type:"number"}}]}]}]},{key:"statistic",type:"accordion",label:"内容",children:[{key:"content",type:"grid",config:{columns:2},children:[{id:"contentSwitch",key:"contentSwitch",type:"switch",label:"开启",value:!!((j=e.statistic)!=null&&j.content)},{rules:"{contentSwitch} === 'true'",children:[{key:"content",type:"input",label:"内容",value:(z=(P=e.statistic)==null?void 0:P.content)==null?void 0:z.content},{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:((W=(I=(F=e.statistic)==null?void 0:F.content)==null?void 0:I.style)==null?void 0:W.fontSize)||12,config:{type:"number",min:0,max:100}},{key:"fontWeight",type:"input",label:"加粗",value:((T=(G=(M=e.statistic)==null?void 0:M.content)==null?void 0:G.style)==null?void 0:T.fontWeight)||500,config:{type:"number",min:100,max:900,step:100}},{key:"color",type:"color-picker",label:"颜色",value:(L=(B=(U=e.statistic)==null?void 0:U.content)==null?void 0:B.style)==null?void 0:L.color,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]},{key:"offsetX",type:"input",label:"x偏移",value:((X=(O=e.statistic)==null?void 0:O.content)==null?void 0:X.offsetX)||0,config:{type:"number"}},{key:"offsetY",type:"input",label:"y偏移",value:((D=(Y=e.statistic)==null?void 0:Y.content)==null?void 0:D.offsetY)||0,config:{type:"number"}}]}]}]},{type:"accordion",label:"标签",children:[{key:"label",type:"grid",config:{columns:2},children:[{key:"type",type:"select",label:"位置",value:((E=e.label)==null?void 0:E.type)||"inner",config:{options:[{value:"inner",label:"内测"},{value:"outer",label:"外侧"}]}},{key:"offset",type:"input",label:"偏移",value:((K=e.label)==null?void 0:K.offset)||0,config:{type:"number",min:0,max:100}},{key:"style",children:[{key:"fontSize",type:"input",label:"字号",value:(($=(_=e.label)==null?void 0:_.style)==null?void 0:$.fontSize)||12,config:{type:"number",min:0,max:100}},{key:"fontWeight",type:"input",label:"加粗",value:((H=(q=e.label)==null?void 0:q.style)==null?void 0:H.fontWeight)||500,config:{type:"number",min:100,max:900,step:100}},{key:"fill",type:"color-picker",label:"颜色",value:(N=(J=e.label)==null?void 0:J.style)==null?void 0:N.fill,config:{width:"100%",radius:3,showBorder:!0,showText:!0,height:16,hideControls:!0}}]},{key:"autoRotate",type:"switch",label:"自动旋转",reRender:!0,value:(Q=e.label)==null?void 0:Q.autoRotate},{id:"labelRotate",key:"rotate",type:"input",label:"旋转角度",rules:"{autoRotate} === 'false'",value:((V=e.label)==null?void 0:V.rotate)||0,config:{type:"number",min:0,max:2,step:.01}}]}]}]};return o.jsx(te,{schema:ie,onFieldChange:p})},Me=({controller:i})=>{const t=pe.getDataFieldOptions(i),e={type:"grid",config:{columns:2},children:[{type:"select",label:"角度字段",config:{options:t}},{type:"select",label:"颜色字段",config:{options:t}}]},l=p=>{};return o.jsx(te,{schema:e,onFieldChange:l})};export{Me as AntdPieFieldMapping,ye as AntdPieGraphicsConfig,We as default};
