import{b as n,r as j,j as t,L as v}from"./index-SMBBRqB_.js";import{c as u,l as N,L as y,O as M}from"./LCGUI-jOMUoJmj.js";import{I as g}from"./index-sdBZGtOm.js";import{D as S}from"./Down-es5kzsqt.js";import{R as w}from"./Right-SX3sxSlg.js";import"./MainRouter-M1tmlz0W.js";import"./useZIndex-wp6dXb7H.js";const z=g("add-one",!1,function(e){return n.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},n.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M24 16V32",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M16 24L32 24",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),D=g("delete-five",!1,function(e){return n.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},n.createElement("path",{d:"M8 11L40 11",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M18 5L30 5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M12 17H36V40C36 41.6569 34.6569 43 33 43H15C13.3431 43 12 41.6569 12 40V17Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M20 25L28 33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),n.createElement("path",{d:"M28 25L20 33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),A=e=>{const{label:x,defaultValue:l=[],template:d,itemName:h}=e,[a,f]=n.useState(!1),W=u.parseSchemaData(d),k={children:[]};l.forEach((s,o)=>{var r;(r=k.children)==null||r.push({type:"accordion",key:o+"",label:(h||"系列")+(o+1),children:[{...u.schemaStructureAssignment(s,N.cloneDeep(d))}]})});const i=j.useRef(l),[c,m]=n.useState(k),C=()=>{var r;const{template:s}=e;if(!s)return;(r=c.children)==null||r.push({type:"accordion",key:i.current.length+"",label:(h||"系列")+(i.current.length+1),children:[s]}),m({...c}),i.current=[...i.current,{...W}];const{onChange:o}=e;o&&o(i.current)},E=()=>{var o;(o=c.children)==null||o.pop(),m({...c}),i.current.pop();const{onChange:s}=e;s&&s(i.current)},b=s=>{const{dataFragment:o}=s,r=Number(Object.keys(o)[0]);i.current[r]=M.merge(i.current[r],o[r]);const{onChange:L}=e;L&&L(i.current)};return t.jsxs("div",{className:"control-group",children:[t.jsxs("div",{className:"control-group-header",children:[t.jsx("div",{className:"cgh-label",children:t.jsx("span",{children:x})}),t.jsxs("div",{className:"cgh-operate",children:[t.jsx("span",{className:"operate-icon",onClick:E,children:t.jsx(D,{})}),t.jsx("span",{className:"operate-icon",onClick:C,children:t.jsx(z,{})}),t.jsx("span",{className:"operate-icon toggle-icon",onClick:()=>f(!a),children:a?t.jsx(S,{size:16}):t.jsx(w,{size:16})})]})]}),a&&t.jsx("div",{className:"control-group-body",style:{display:a?"block":"none"},children:t.jsx(j.Suspense,{fallback:t.jsx(v,{}),children:t.jsx(y,{schema:c,onFieldChange:b})})})]})};export{A as default};
