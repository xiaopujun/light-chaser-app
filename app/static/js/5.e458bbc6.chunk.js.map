{"version":3,"sources":["designer/right/RightStore.ts","comps/lc/background/DesignerBackground.tsx","framework/core/ComponentContainer.tsx","designer/LoadDesigner.ts","designer/operate-provider/core/EventManager.ts","designer/operate-provider/keyboard-mouse/KeyboardMouse.ts","designer/operate-provider/drag/AbstractDrag.ts","designer/operate-provider/drag/CanvasDragger.ts","designer/operate-provider/keyboard-mouse/HotKey.tsx","designer/operate-provider/scale/Scaler.ts","designer/operate-provider/DragScaleProvider.tsx","lib/lc-ruler/DesignerRuler.tsx","designer/operate-provider/DesignerContainer.tsx","lib/lc-movable/GroupMovable.tsx","lib/lc-movable/GroupSelectable.tsx","designer/operate-provider/right-click-menu/ContextMenuStore.ts","utils/RenderUtil.ts","designer/left/classify-list/ClassifyType.ts","designer/operate-provider/keyboard-mouse/HotKeyConfig.ts","designer/operate-provider/right-click-menu/ContextMenu.tsx","designer/canvas/DesignerCanvas.tsx","designer/header/DesignerHeader.tsx","designer/structure/LcHeader.tsx","designer/structure/LcBody.tsx","designer/structure/LcLeft.tsx","designer/structure/LcContent.tsx","designer/structure/LcRight.tsx","designer/structure/LcStructure.tsx","designer/structure/LcFoot.tsx","icon/icon-all.svg","icon/icon-bar.svg","icon/icon-column.svg","icon/icon-area.svg","icon/icon-pie.svg","icon/icon-scatter.svg","icon/icon-histogram.svg","icon/icon-line.svg","icon/icon-loading.svg","icon/icon-flowers.svg","icon/icon-radar.svg","icon/icon-ring.svg","icon/icon-wordcloud.svg","icon/icon-sun.svg","icon/icon-rectangle.svg","icon/icon-optimize.svg","icon/icon-points.svg","designer/left/classify-list/ClassifyListStore.ts","designer/float-configs/comp-list/CompListStore.ts","designer/left/classify-list/ClassifyList.tsx","designer/left/index.tsx","designer/right/MenuList.tsx","designer/right/ConfigContent.tsx","designer/right/index.tsx","designer/footer/HotKeyDes.tsx","designer/footer/keyboard-icon.svg","designer/footer/layers-icon.svg","designer/footer/DesignerFooter.tsx","designer/operate-provider/drag/CommonDragger.ts","designer/float-configs/common/FloatPanel.tsx","designer/float-configs/comp-list/CompList.tsx","designer/float-configs/layer-list/icon/lock.svg","designer/float-configs/layer-list/icon/preview-close.svg","designer/float-configs/layer-list/icon/preview-open.svg","designer/float-configs/layer-list/icon/unlock.svg","designer/float-configs/layer-list/LayerItem.tsx","designer/float-configs/layer-list/LayerComponent.ts","designer/float-configs/layer-list/LayerContainer.tsx","designer/float-configs/layer-list/LayerList.tsx","designer/float-configs/FloatConfigs.tsx","designer/Designer.tsx","designer/RegisterEvent.ts"],"names":["bgMenu","icon","PictureFilled","name","key","rightStore","activeElem","id","type","menus","activeMenu","visible","setActiveMenu","menu","newMenus","includes","setContentVisible","activeConfig","designerStarter","customComponentInfoMap","getMenuList","length","setNewActiveMenu","i","setTimeout","runInAction","makeObservable","this","observable","action","DesignerBackground","props","onClick","e","getBgConfigProps","bgConfig","state","config","width","height","bgMode","bgColor","bgImg","bgImgSize","bgImgPosition","bgImgPos","bgConfigProps","BackgroundMode","NONE","PICTURE","bgImgUrl","bgImgRepeat","single","radialGradient","linearGradient","bgColorMode","BackgroundColorMode","SINGLE","color","LINEAR_GRADIENT","compInstances","designerStore","elemConfigs","componentDefine","getInitConfig","AbstractBackgroundImpl","background","className","onDoubleClick","style","children","Component","ComponentContainer","ref","mode","parseUrlParams","layout","AbsCompImpl","getComponent","initConfig","info","create","then","instance","fallback","locked","hide","transform","position","display","pointerEvents","React","PureComponent","doScan","loadDesigner","loadProjectData","initExistProject","Error","initNewProject","urlParams","doInit","setLoaded","canvasConfig","parseInt","projectConfig","abstractOperatorMap","saveType","SaveType","LOCAL","getProject","store","layoutConfigs","statisticInfo","themeConfig","theme","extendParams","setMinLevel","eventOperateStore","setMaxLevel","minLevel","maxLevel","EventManager","events","handler","push","index","indexOf","splice","args","forEach","eventManager","KMMap","leftClick","rightClick","middleClick","AbstractDrag","target","dragTarget","x","y","onDragStart","onDragEnd","CanvasDragger","initPosition","register","button","releasePointerCapture","pointerId","unregister","onDragMove","movementX","movementY","scale","scaleCore","setPointerCapture","clientX","clientY","destroy","registerDragger","TriggerType","scaleConfig","content","offsetX","offsetY","doScale","setScale","scaleCanvas","emit","deltaY","compute","origin","ratio","DragScaleProvider","dragger","overflow","window","innerHeight","innerWidth","backgroundColor","observer","DesignerRuler","wheelTimerId","pointerMoveTimerId","render","unit","baseOffset","_scrollPosX","_scrollPosY","rulerX","mousePosX","scrollPosX","startPosX","rulerY","mousePosY","scrollPosY","startPosY","ofX","ofY","Math","floor","clearTimeout","setState","scroll","textAlign","fontSize","top","left","scrollPos","zoom","lineColor","textColor","segment","negativeRuler","textOffset","DesignerContainer","designerContainerRef","handleClick","event","handleContextMenu","handlePointerDown","handlePointerMove","handlePointerUp","document","addEventListener","removeEventListener","dom","outline","GroupMovable","movableRef","updateLayout","lastEvent","beforeTranslate","offsetWidth","offsetHeight","dataset","onDragGroupEnd","data","ev","onResizeEnd","translate","drag","onResizeGroupEnd","targets","setMovableRef","readonly","selectorRef","rasterize","dragStep","resizeStep","draggable","resizable","keepRatio","throttleDrag","throttleResize","onClickGroup","current","clickTarget","inputEvent","inputTarget","onDrag","onDragGroup","onResize","onResizeGroup","GroupSelectable","createRef","setSelectorRef","dragContainer","selectableTargets","hitRate","selectByClick","selectFromInside","toggleContinueSelect","movable","isMoveableElement","some","t","contains","stop","onSelectEnd","setTargets","setTargetIds","isDragStart","preventDefault","dragStart","selected","filter","item","targetIds","contextMenuStore","mouseDownTime","mouseUpTime","updateVisible","setPosition","setMouseDownTime","time","setMouseUpTime","shieldKeyList","HotKey","handlerMapping","currHotKey","existHandlerKey","doHandler","hotKey","triggerType","COILED","pointerTarget","enforcementCap","querySelector","classList","keyDown","toLowerCase","join","keyUp","wheel","onBlur","onblur","RenderUtil","fn","delay","callback","now","Date","prev","ClassifyEnum","selectAll","comps","getElementsByClassName","compIds","compArr","Array","from","comp","doCopy","newIds","copyItem","newId","getElementById","doLock","toBeUpdate","toTop","order","toBottom","doDelete","delItem","doSave","throttle","doCreateOrUpdate","cloneDeep","getData","SERVER","alert","message","warn","doUnLock","unLockedId","doHide","ContextMenu","menuList","LockOutlined","EyeInvisibleOutlined","CopyOutlined","VerticalAlignTopOutlined","VerticalAlignBottomOutlined","DeleteOutlined","menuListDom","menuItem","Icon","DesignerCanvas","backgroundRef","designerRef","updateActive","isEqual","generateElement","Object","values","sort","a","b","map","loaded","Loading","ProjectHdItemImpl","lazy","ThemeHdItemImpl","Header","buildHeaderList","headerItemInstances","items","canvasVisible","headerStore","projectVisible","themeVisible","CanvasHdConfigImpl","LcHeader","LcBody","LcLeft","LcContent","LcRight","LcStructure","LcFoot","classifyListStore","classifies","classifyKey","icon_all","classify","ALL","icon_points","BASE","icon_optimize","icon_bar","BAR","icon_column","COLUMN","icon_line","LINE","icon_area","AREA","icon_pie","icon_loading","icon_scatter","icon_flowers","icon_radar","icon_word_cloud","icon_ring","icon_histogram","icon_sun","icon_rectangle","doClear","setClassifyKey","makeAutoObservable","compListStore","compInfoArr","compKey","keys","baseInfo","getBaseInfo","setVisible","setCompKey","ClassifyList","changeClassifyKey","currentTarget","buildClassifyList","classifyArr","src","alt","classifyListDom","overflowY","DesignerLeft","MenuList","menuChange","buildMenuList","ConfigContent","buildConfigContent","console","log","ConfigComp","getMenuToConfigContentMap","onClose","activeMenuName","LineOutlined","Right","HotKeyDes","DesignerFooter","showHotKeyDes","toggleHotKeyDes","toggleLayerList","layerListStore","stateStr","keyboardIcon","layerIcon","toFixed","Dialog","title","CommonDragger","initPos","FloatPanel","panelRef","dragTargetRef","CompList","addItem","movableItem","idGenerate","generateId","getChartDom","chartDom","typeKey","compInfo","compName","chartImg","getChartImg","backgroundImage","searchChart","value","placeholder","onPressEnter","LayerItem","lock","compId","toggleLock","lockChange","toggleHide","hideChange","onSelected","selectedChange","previewClose","previewOpen","lockImg","unlockImg","LayerComponent","container","ComponentUtil","createAndRender","upOp","merge","reRender","operateType","OperateType","OPTIONS","AbstractComponent","LayerContainer","layerContainerRef","layerInstanceMap","r","LayerList","cancelSelected","layerListDom","searchLayer","setContent","buildLayerList","searchContent","_props","FloatConfigs","compListVisible","layerListVisible","Designer","setUnLockedId","setPointerTarget","registerEventOnDesignerLoaded"],"mappings":"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","file":"static/js/5.e458bbc6.chunk.js","sourcesContent":["import {action, makeObservable, observable, runInAction} from \"mobx\";\r\nimport {MenuInfo} from \"./MenuType\";\r\nimport designerStarter from \"../DesignerStarter\";\r\nimport {AbstractCustomComponentDefinition} from \"../../framework/core/AbstractCustomComponentDefinition\";\r\nimport {ActiveElem} from \"../DesignerType\";\r\nimport {PictureFilled} from \"@ant-design/icons\";\r\n\r\n\r\nexport const bgMenu: MenuInfo[] = [{\r\n    icon: PictureFilled,\r\n    name: '背景',\r\n    key: 'background',\r\n}];\r\n\r\n/**\r\n * 设计器。右侧组件配置状态管理类\r\n */\r\nclass RightStore {\r\n    constructor() {\r\n        makeObservable(this, {\r\n            menus: observable,\r\n            activeMenu: observable,\r\n            visible: observable,\r\n            setActiveMenu: action,\r\n            setContentVisible: action,\r\n            activeConfig: action,\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 当前选中的组件\r\n     */\r\n    activeElem: ActiveElem = {id: '80cc666f', type: 'LcBg'};\r\n    /**\r\n     * 当前选中组件的操作菜单列表\r\n     */\r\n    menus: Array<MenuInfo> = bgMenu;\r\n    /**\r\n     * 当前选中组件的操作菜单列表中处于激活状态的菜单\r\n     */\r\n    activeMenu: string = 'background';\r\n    /**\r\n     * 右侧组件配置区域是否可见\r\n     */\r\n    visible: boolean = false;\r\n\r\n    setActiveMenu = (menu: string, newMenus?: string[]) => {\r\n        if (newMenus && newMenus.includes(this.activeMenu))\r\n            return;\r\n        this.activeMenu = menu;\r\n    }\r\n\r\n    setContentVisible = (visible: boolean) => this.visible = visible;\r\n\r\n    activeConfig = (id: string, type: string) => {\r\n        if (type === 'LcBg') {\r\n            //激活背景设置\r\n            //更新菜单列表\r\n            this.menus = bgMenu;\r\n            this.activeMenu = 'background';\r\n            this.activeElem = {id: '80cc666f', type: 'LcBg'};\r\n        } else {\r\n            //更新菜单列表\r\n            this.menus = (designerStarter.customComponentInfoMap[type] as AbstractCustomComponentDefinition).getMenuList() || [];\r\n            if (this.menus.length > 0) {\r\n                let setNewActiveMenu = true;\r\n                for (let i = 0; i < this.menus.length; i++) {\r\n                    if (this.menus[i].key === this.activeMenu) {\r\n                        setNewActiveMenu = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (setNewActiveMenu)\r\n                    this.activeMenu = this.menus[0].key;\r\n            }\r\n            this.activeElem = {id, type};\r\n            //重新挂载配置面板\r\n            if (this.visible) {\r\n                this.visible = false;\r\n                setTimeout(() => {\r\n                    runInAction(() => this.visible = true);\r\n                }, 0);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst rightStore = new RightStore();\r\nexport default rightStore;","import React, {Component, MouseEvent} from 'react';\r\nimport {BackgroundColorMode, BackgroundMode} from \"../../../designer/DesignerType\";\r\nimport AbstractBackgroundImpl, {AbstractBackgroundImplProps, BackgroundConfigType} from \"./AbstractBackgroundImpl\";\r\nimport designerStore from \"../../../designer/store/DesignerStore\";\r\nimport designerStarter from \"../../../designer/DesignerStarter\";\r\n\r\ninterface LcDesignerBackgroundProps {\r\n    onClick?: (e: MouseEvent<HTMLDivElement>) => void;\r\n    config?: BackgroundConfigType;\r\n}\r\n\r\n/**\r\n * 设计器画布背景\r\n */\r\nclass DesignerBackground extends Component<LcDesignerBackgroundProps> {\r\n\r\n    constructor(props: LcDesignerBackgroundProps) {\r\n        super(props);\r\n        const {compInstances, elemConfigs} = designerStore;\r\n        const {customComponentInfoMap} = designerStarter;\r\n        let config: AbstractBackgroundImplProps | null = null;\r\n        if ('80cc666f' in elemConfigs!)\r\n            config = elemConfigs['80cc666f'];\r\n        else {\r\n            const componentDefine = customComponentInfoMap['LcBg'];\r\n            if (componentDefine)\r\n                config = componentDefine.getInitConfig();\r\n        }\r\n        compInstances['80cc666f'] = new AbstractBackgroundImpl(this, config!);\r\n        this.state = {config: config?.background}\r\n        delete elemConfigs!['80cc666f'];\r\n    }\r\n\r\n    onClick = (e: MouseEvent<HTMLDivElement>) => {\r\n        const {onClick} = this.props;\r\n        onClick && onClick(e);\r\n    }\r\n\r\n    getBgConfigProps = () => {\r\n        // const bgConfig: BackgroundConfigType = this.props.config!!;\r\n        const {config: bgConfig} = this.state as any;\r\n        const {width, height, bgMode, bgColor, bgImg} = bgConfig;\r\n        let bgImgSize = '100% 100%';\r\n        if (bgImg.bgImgSize && bgImg.bgImgSize.length === 2)\r\n            bgImgSize = `${bgConfig.bgImg.bgImgSize[0]}px ${bgImg.bgImgSize[1]}px`;\r\n        let bgImgPosition = '0 0';\r\n        if (bgImg.bgImgPos && bgImg.bgImgPos.length === 2)\r\n            bgImgPosition = `${bgImg.bgImgPos[0]}px ${bgImg.bgImgPos[1]}px`;\r\n        if (bgConfig) {\r\n            let bgConfigProps: any = {height: height, width: width}\r\n            if (bgMode + '' === BackgroundMode.NONE)\r\n                bgConfigProps['backgroundColor'] = '#000000';\r\n            else if (bgMode + '' === BackgroundMode.PICTURE) {\r\n                if (bgImg.bgImgUrl && bgImg.bgImgUrl !== '') {\r\n                    bgConfigProps['backgroundImage'] = `url(${bgImg.bgImgUrl})`;\r\n                    bgConfigProps['backgroundSize'] = bgImgSize;\r\n                    bgConfigProps['backgroundPosition'] = bgImgPosition;\r\n                    bgConfigProps['backgroundRepeat'] = bgImg?.bgImgRepeat;\r\n                } else\r\n                    bgConfigProps['backgroundColor'] = '#000000';\r\n            } else {\r\n                const {single, radialGradient, linearGradient, bgColorMode} = bgColor;\r\n                if (bgConfig?.bgColor.bgColorMode + '' === BackgroundColorMode.SINGLE)\r\n                    bgConfigProps['backgroundColor'] = single.color;\r\n                else if (bgColorMode === BackgroundColorMode.LINEAR_GRADIENT)\r\n                    bgConfigProps['background'] = linearGradient.color;\r\n                else\r\n                    bgConfigProps['background'] = radialGradient.color;\r\n            }\r\n            return bgConfigProps;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'lc-background'}\r\n                 id={'80cc666f'}\r\n                 data-type={'LcBg'}\r\n                 onDoubleClick={this.onClick}\r\n                 style={this.getBgConfigProps()}>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerBackground;","import React, {Suspense} from \"react\";\r\nimport designerStarter from \"../../designer/DesignerStarter\";\r\nimport {MovableItemType} from \"../../lib/lc-movable/types\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport designerStore from \"../../designer/store/DesignerStore\";\r\nimport {AbstractCustomComponentDefinition} from \"./AbstractCustomComponentDefinition\";\r\nimport {parseUrlParams} from \"../../utils/URLUtil\";\r\n\r\nexport interface ComponentContainerProps {\r\n    layout: MovableItemType;\r\n}\r\n\r\nclass ComponentContainer extends React.PureComponent<ComponentContainerProps> {\r\n\r\n    private ref: HTMLDivElement | null = null;\r\n\r\n    private mode: string = parseUrlParams()?.action || 'edit';\r\n\r\n    componentDidMount(): void {\r\n        //通过ref创建组件，并将组件实例方法Map中。后续通过Map匹配到具体实例，\r\n        //调用实例的对象方法进行组件的更新操作\r\n        const {layout} = this.props;\r\n        const {customComponentInfoMap} = designerStarter;\r\n        const {elemConfigs} = designerStore;\r\n        let componentDefine: AbstractCustomComponentDefinition = customComponentInfoMap[layout!.type + ''];\r\n        if (componentDefine) {\r\n            const AbsCompImpl = componentDefine.getComponent();\r\n            if (AbsCompImpl) {\r\n                const config = layout.id! in elemConfigs! ? elemConfigs![layout.id!] : (function () {\r\n                    let initConfig = componentDefine.getInitConfig();\r\n                    initConfig.info.id = layout.id!;\r\n                    return initConfig;\r\n                })() as any;\r\n                new AbsCompImpl()!.create(this.ref!, config).then((instance: any) => {\r\n                    const {compInstances} = designerStore;\r\n                    compInstances[layout.id + ''] = instance;\r\n                });\r\n                delete elemConfigs![layout.id!];\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {layout} = this.props;\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <div\r\n                    id={layout.id}\r\n                    data-type={layout.type}\r\n                    data-locked={layout.locked}\r\n                    data-hide={layout.hide}\r\n                    key={layout.id + ''}\r\n                    style={{\r\n                        width: layout.width,\r\n                        height: layout.height,\r\n                        transform: `translate(${layout.position![0]}px, ${layout.position![1]}px)`,\r\n                        position: 'absolute',\r\n                        display: layout.hide ? 'none' : 'block',\r\n                    }} className={'lc-comp-item'}>\r\n                    <div ref={(ref) => this.ref = ref} style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        //todo 要优化\r\n                        pointerEvents: `${this.mode === 'view' ? 'auto' : 'none'}`,\r\n                        position: 'relative'\r\n                    }}/>\r\n                </div>\r\n            </Suspense>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default ComponentContainer;","import designerStore from \"./store/DesignerStore\";\r\nimport eventOperateStore from \"./operate-provider/EventOperateStore\";\r\nimport designerStarter from \"./DesignerStarter\";\r\nimport {parseUrlParams} from \"../utils/URLUtil\";\r\nimport {SaveType} from \"./DesignerType\";\r\n\r\nconst {doScan} = designerStarter;\r\n\r\nexport const loadDesigner = () => {\r\n    //扫描组件\r\n    doScan();\r\n    //初始化项目数据\r\n    loadProjectData();\r\n}\r\n\r\n/**\r\n * 初始化项目操作类型。新增 / 更新\r\n */\r\nconst loadProjectData = () => {\r\n    let urlParams = parseUrlParams();\r\n    const {action} = urlParams;\r\n    if (['edit', 'view'].includes(action))\r\n        initExistProject();\r\n    else if (action === 'create')\r\n        initNewProject();\r\n    else\r\n        throw new Error('action is error')\r\n}\r\n\r\n/**\r\n * 初始化以创建方式打开时项目信息\r\n */\r\nconst initNewProject = () => {\r\n    let urlParams = parseUrlParams();\r\n    const {width, height, name} = urlParams;\r\n    const {doInit, setLoaded} = designerStore;\r\n    doInit({\r\n        canvasConfig: {\r\n            width: parseInt(width),\r\n            height: parseInt(height),\r\n        },\r\n        projectConfig: {\r\n            name: name\r\n        },\r\n    })\r\n    setLoaded(true);\r\n}\r\n\r\n/**\r\n * 初始化以更新方式打开时项目信息\r\n */\r\nconst initExistProject = () => {\r\n    let urlParams = parseUrlParams();\r\n    const {doInit, setLoaded} = designerStore;\r\n    const {abstractOperatorMap} = designerStarter;\r\n    const {projectConfig: {saveType = SaveType.LOCAL}} = designerStore;\r\n    abstractOperatorMap[saveType].getProject(urlParams.id).then((store: any) => {\r\n        if (store) {\r\n            doInit({\r\n                id: store.id,\r\n                canvasConfig: store.canvasConfig,\r\n                projectConfig: store.projectConfig,\r\n                elemConfigs: store.elemConfigs,\r\n                layoutConfigs: store.layoutConfigs,\r\n                statisticInfo: store.statisticInfo,\r\n                themeConfig: store.theme,\r\n                extendParams: store.extendParams,\r\n            })\r\n            //设置事件操作器的最大最小层级\r\n            const {setMinLevel, setMaxLevel} = eventOperateStore;\r\n            setMinLevel(store.layoutConfigs.minLevel || 0);\r\n            setMaxLevel(store.layoutConfigs.maxLevel || 0);\r\n        }\r\n        setLoaded(true);\r\n    })\r\n}","class EventManager {\r\n    events: any = {};\r\n\r\n    register(type: string, handler: Function) {\r\n        if (!this.events[type])\r\n            this.events[type] = [];\r\n        this.events[type].push(handler);\r\n    }\r\n\r\n    unregister(type: string, handler?: Function) {\r\n        if (!this.events[type])\r\n            return;\r\n\r\n        const index = this.events[type].indexOf(handler);\r\n        if (index > -1)\r\n            this.events[type].splice(index, 1);\r\n\r\n    }\r\n\r\n    emit(type: string, ...args: any[]) {\r\n        if (!this.events[type])\r\n            return;\r\n        this.events[type].forEach((handler: Function) => {\r\n            handler(...args);\r\n        });\r\n    }\r\n}\r\n\r\nconst eventManager = new EventManager();\r\nexport default eventManager;","export const KMMap = {\r\n    leftClick: false,\r\n    rightClick: false,\r\n    middleClick: false,\r\n}","abstract class AbstractDrag {\r\n    //被拖拽的目标\r\n    protected target: any = null;\r\n    //触发拖拽的目标元素\r\n    protected dragTarget: any = null;\r\n    //拖拽的起始位置\r\n    protected position: { x: number, y: number } = {x: 0, y: 0};\r\n\r\n    public registerDragger(): void {\r\n        this.onDragStart(this.target);\r\n        this.onDragEnd(this.target);\r\n    }\r\n\r\n    protected abstract onDragStart(e: any): void;\r\n\r\n    protected abstract onDragMove(e: any): void;\r\n\r\n    protected abstract onDragEnd(e: any): void;\r\n}\r\n\r\nexport default AbstractDrag;","import AbstractDrag from \"./AbstractDrag\";\r\nimport eventManager from \"../core/EventManager\";\r\nimport {KMMap} from \"../keyboard-mouse/KeyboardMouse\";\r\nimport scaleCore from \"../scale/ScaleCore\";\r\n\r\nclass CanvasDragger extends AbstractDrag {\r\n\r\n    //设置为静态属性，以供画布的拖拽和缩放信息共用\r\n    public static position: { x: number, y: number } = {x: 0, y: 0};\r\n\r\n    constructor(target: any, initPosition?: { x: number, y: number }) {\r\n        super();\r\n        if (!target)\r\n            throw new Error(\"target is null, cannot drag\");\r\n        this.target = target;\r\n        CanvasDragger.position = initPosition || CanvasDragger.position;\r\n        this.registerDragger();\r\n    }\r\n\r\n    protected onDragEnd = (): void => {\r\n        eventManager.register('pointerup', (e: any) => {\r\n            if (e.button === 2) {\r\n                this.target.releasePointerCapture(e.pointerId);\r\n                eventManager.unregister('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected onDragMove = (e: any): void => {\r\n        if (KMMap.rightClick) {\r\n            CanvasDragger.position.x += e.movementX;\r\n            CanvasDragger.position.y += e.movementY;\r\n            const {scale} = scaleCore;\r\n            this.target.style.transform = 'translate3d(' + CanvasDragger.position.x + 'px, ' + CanvasDragger.position.y + 'px, 0) scale(' + scale + ')';\r\n        }\r\n    }\r\n\r\n    protected onDragStart = (): void => {\r\n        eventManager.register('pointerdown', (e: any) => {\r\n            if (e.button === 2) {\r\n                this.target.setPointerCapture(e.pointerId);\r\n                this.position = {x: e.clientX, y: e.clientY};\r\n                eventManager.register('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    destroy = () => {\r\n        eventManager.unregister('pointerdown');\r\n        eventManager.unregister('pointermove');\r\n        eventManager.unregister('pointerup');\r\n    }\r\n\r\n}\r\n\r\nexport default CanvasDragger;","import {Component} from 'react';\r\nimport eventOperateStore from \"../EventOperateStore\";\r\n\r\nexport enum TriggerType {\r\n    SINGLE,\r\n    COILED\r\n}\r\n\r\nexport interface HandlerMapping {\r\n    [key: string]: {\r\n        handler: Function,\r\n        target?: any,\r\n        triggerType?: TriggerType\r\n    }\r\n}\r\n\r\ninterface HotKeyProps {\r\n    handlerMapping: HandlerMapping;\r\n}\r\n\r\n//需要屏蔽浏览器默认快捷键效果的快捷键列表\r\nconst shieldKeyList = ['control + s', 'alt', 'control + l']\r\n\r\nclass HotKey extends Component<HotKeyProps> {\r\n\r\n    handlerMapping: HandlerMapping = {}\r\n    currHotKey: string[] = [];\r\n    existHandlerKey: string = \"\";\r\n\r\n    constructor(props: HotKeyProps) {\r\n        super(props);\r\n        this.handlerMapping = props.handlerMapping;\r\n    }\r\n\r\n    /**\r\n     * 从快捷键配置管理映射表中匹配对应的快捷键处理函数并执行。\r\n     * @param e 鼠标事件对象\r\n     * @param hotKey 当前按下的快捷键\r\n     */\r\n    doHandler = (e: any, hotKey: string) => {\r\n        const {handler, triggerType = TriggerType.SINGLE} = this.handlerMapping[hotKey] || {};\r\n        if (handler) {\r\n            if ((triggerType === TriggerType.SINGLE && this.existHandlerKey !== hotKey) || triggerType === TriggerType.COILED) {\r\n                const {pointerTarget} = eventOperateStore;\r\n                //todo 需要优化快捷键的执行范围\r\n                const enforcementCap = document.querySelector('.lc-ruler-content');\r\n                if (enforcementCap && (enforcementCap.contains(pointerTarget) || (pointerTarget && pointerTarget.classList.contains('layer-item')))) {\r\n                    handler(e);\r\n                    this.existHandlerKey = hotKey;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    keyDown = (e: any) => {\r\n        const key = e.key.toLowerCase();\r\n        if (!this.currHotKey.some(item => item === key))\r\n            this.currHotKey.push(key);\r\n        let hotKey = this.currHotKey.join(' + ');\r\n        if (shieldKeyList.some(item => item === hotKey))\r\n            e.preventDefault();\r\n        this.doHandler(e, hotKey);\r\n    };\r\n\r\n    keyUp = (e: any) => {\r\n        const key = e.key.toLowerCase();\r\n        if (this.currHotKey.some(item => item === key)) {\r\n            this.currHotKey = this.currHotKey.filter(item => item !== key);\r\n            this.existHandlerKey = '';\r\n        }\r\n    }\r\n\r\n    wheel = (e: any) => {\r\n        let hotKey = this.currHotKey.join(' + ') + ' + wheel';\r\n        const {handler, target} = this.handlerMapping[hotKey] || {};\r\n        if (handler) {\r\n            if (target && !target.contains(e.target))\r\n                return;\r\n            handler(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 失去焦点时清空当前热键（一般是切换屏幕）\r\n     */\r\n    onBlur = () => {\r\n        this.currHotKey = [];\r\n        this.existHandlerKey = '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.keyDown);\r\n        document.addEventListener('keyup', this.keyUp);\r\n        document.addEventListener('wheel', this.wheel);\r\n        window.onblur = this.onBlur;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.keyDown);\r\n        document.removeEventListener('keyup', this.keyUp);\r\n        document.removeEventListener('wheel', this.wheel);\r\n        window.onblur = null;\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default HotKey;","import designerStore from \"../../store/DesignerStore\";\r\nimport scaleCore from \"./ScaleCore\";\r\nimport eventOperateStore from \"../EventOperateStore\";\r\nimport eventManager from \"../core/EventManager\";\r\nimport {KMMap} from \"../keyboard-mouse/KeyboardMouse\";\r\nimport CanvasDragger from \"../drag/CanvasDragger\";\r\n\r\nexport const scaleConfig = {\r\n    content: null,\r\n    offsetX: 0,\r\n    offsetY: 0,\r\n}\r\n\r\nexport const doScale = (e: any) => {\r\n    //缩放拖拽不能同时进行\r\n    if (KMMap.rightClick) return;\r\n    const {setScale} = eventOperateStore;\r\n    //缩放画布\r\n    scaleCanvas(e);\r\n    //缩放标尺\r\n    eventManager.emit('wheel', e);\r\n    setScale(scaleCore.scale);\r\n}\r\n\r\nexport const scaleCanvas = (e: any) => {\r\n    let {canvasConfig: {width = 1920, height = 1080}} = designerStore;\r\n    let type = 1;\r\n    if (e.deltaY > 0)\r\n        type = 0;\r\n    scaleCore.compute(type);\r\n    const origin = {\r\n        x: (scaleCore.ratio - 1) * width * 0.5,\r\n        y: (scaleCore.ratio - 1) * height * 0.5\r\n    };\r\n    // 计算偏移量\r\n    CanvasDragger.position.x -= (scaleCore.ratio - 1) * (e.clientX - scaleConfig.offsetX - CanvasDragger.position.x) - origin.x;\r\n    CanvasDragger.position.y -= (scaleCore.ratio - 1) * (e.clientY - scaleConfig.offsetY - CanvasDragger.position.y) - origin.y;\r\n    (scaleConfig.content as any).style.transform = 'translate3d(' + CanvasDragger.position.x + 'px, ' + CanvasDragger.position.y + 'px, 0) scale(' + scaleCore.scale + ')';\r\n}","import React, {Component} from 'react';\r\nimport {scaleConfig} from \"./scale/Scaler\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport CanvasDragger from \"./drag/CanvasDragger\";\r\n\r\nclass DragScaleProvider extends Component {\r\n\r\n    content: any = null;\r\n    dragger: CanvasDragger | null = null;\r\n\r\n    componentDidMount() {\r\n        //配置缩放\r\n        this.content!.style.transform = 'translate3d(' + CanvasDragger.position.x + 'px, ' + CanvasDragger.position.y + 'px, 0) scale(1)';\r\n        scaleConfig.content = this.content;\r\n        scaleConfig.offsetX = 80;\r\n        scaleConfig.offsetY = 70;\r\n        this.dragger = new CanvasDragger(this.content);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.dragger)\r\n            this.dragger.destroy();\r\n    }\r\n\r\n    render() {\r\n        const {canvasConfig} = designerStore!;\r\n        return (\r\n            <div style={{\r\n                overflow: \"hidden\",\r\n                height: window.innerHeight - 90,\r\n                width: window.innerWidth - 95,\r\n                backgroundColor: '#434343'\r\n            }}>\r\n                <div ref={ref => this.content = ref} className={'lc-content-scale'}\r\n                     style={{width: canvasConfig?.width, height: canvasConfig?.height}}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DragScaleProvider);\r\n","import React, {Component} from 'react';\r\nimport Ruler, {RulerProps} from \"@scena/react-ruler\";\r\nimport {KMMap} from \"../../designer/operate-provider/keyboard-mouse/KeyboardMouse\";\r\nimport eventManager from \"../../designer/operate-provider/core/EventManager\";\r\nimport scaleCore from \"../../designer/operate-provider/scale/ScaleCore\";\r\n\r\ninterface DesignerRulerProps {\r\n    offsetX?: number;\r\n    offsetY?: number;\r\n}\r\n\r\n/**\r\n * 缩放计算公式：\r\n * 设现有条件：\r\n * 1) 当前鼠标位置：P\r\n * 2) 当前缩放倍数：S1\r\n * 3) 最新缩放倍数：S2\r\n * 4) 标尺起始位置：St\r\n * 5) 标尺渲染起始位置：scrollPos\r\n * 则：scrollPos = P-[(P-St)/(S2/S1)]\r\n *\r\n * 鼠标移动计算公式：\r\n * 设现有条件：\r\n * 1) 鼠标按下时在当前屏幕分辨路下的真实鼠标位置：mosP\r\n * 2) 标尺当前的起始位置：startP\r\n * 3) 鼠标本次移动的距离：mouOffset\r\n * 4) 标尺当前的缩放系数：scale\r\n * 5) 在当前缩放系数下，鼠标对应的标尺位置：rulerP\r\n *\r\n * 则鼠标指针在当前缩放系数下的位置为：rulerP = startP + (mouOffset / scale)\r\n * 鼠标移动后的标尺起始位置为：scrollPos = startP + (mouOffset / scale)\r\n */\r\nclass DesignerRuler extends Component<RulerProps & DesignerRulerProps> {\r\n\r\n    wheelTimerId: any = null;\r\n    pointerMoveTimerId: any = null;\r\n\r\n    state = {\r\n        render: 0\r\n    }\r\n\r\n    unit = 50;\r\n\r\n    baseOffset = 20;\r\n    _scrollPosX = 0;\r\n    _scrollPosY = 0;\r\n\r\n    rulerX: any = null;\r\n    offsetX = 0;\r\n    mousePosX = 0;\r\n    scrollPosX = 0;\r\n    startPosX = 0;\r\n\r\n    rulerY: any = null;\r\n    offsetY = 0;\r\n    mousePosY = 0;\r\n    scrollPosY = 0;\r\n    startPosY = 0;\r\n\r\n    componentDidMount() {\r\n        const {offsetX: ofX = 0, offsetY: ofY = 0} = this.props;\r\n        eventManager.register('wheel', () => {\r\n            this.startPosX = this.mousePosX - ((this.mousePosX - this.startPosX) / scaleCore.ratio);\r\n            this.scrollPosX = this.startPosX;\r\n            this.startPosY = this.mousePosY - ((this.mousePosY - this.startPosY) / scaleCore.ratio);\r\n            this.scrollPosY = this.startPosY;\r\n            this.unit = Math.floor(50 / scaleCore.scale);\r\n            clearTimeout(this.wheelTimerId);\r\n            this.wheelTimerId = setTimeout(() => {\r\n                this.setState({render: this.state.render + 1})\r\n            }, 300);\r\n        });\r\n\r\n        eventManager.register('pointermove', (e: any) => {\r\n            const {scale} = scaleCore;\r\n            this.mousePosX = this.startPosX + ((e.clientX - this.baseOffset - ofX) / scale);\r\n            this.mousePosY = this.startPosY + ((e.clientY - this.baseOffset - ofY) / scale);\r\n            if (KMMap.rightClick) {\r\n                this.offsetX = this.offsetX - e.movementX;\r\n                this._scrollPosX = this.startPosX + (this.offsetX / scale)\r\n                this.offsetY = this.offsetY - e.movementY;\r\n                this._scrollPosY = this.startPosY + (this.offsetY / scale)\r\n\r\n                clearTimeout(this.pointerMoveTimerId);\r\n                this.pointerMoveTimerId = setTimeout(() => {\r\n                    this.rulerX && this.rulerX.scroll(this._scrollPosX);\r\n                    this.rulerY && this.rulerY.scroll(this._scrollPosY);\r\n                }, 300);\r\n            }\r\n        });\r\n\r\n        eventManager.register('pointerdown', (e: PointerEvent) => {\r\n            if (e.button === 2) {\r\n                this.offsetX = 0;\r\n                this.offsetY = 0;\r\n            }\r\n        });\r\n\r\n        eventManager.register('pointerup', (e: PointerEvent) => {\r\n            if (e.button === 2) {\r\n                this.offsetX = 0;\r\n                this.offsetY = 0;\r\n                this.scrollPosX = this._scrollPosX;\r\n                this.startPosX = this._scrollPosX;\r\n                this.scrollPosY = this._scrollPosY;\r\n                this.startPosY = this._scrollPosY;\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventManager.unregister('wheel');\r\n        eventManager.unregister('pointermove');\r\n        eventManager.unregister('pointerdown');\r\n        eventManager.unregister('pointerup');\r\n        clearTimeout(this.wheelTimerId);\r\n        clearTimeout(this.pointerMoveTimerId);\r\n    }\r\n\r\n\r\n    render() {\r\n        const {scale} = scaleCore;\r\n        return (\r\n            <div className={'lc-ruler'} style={{position: 'relative'}}>\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    width: 20,\r\n                    height: 20,\r\n                    color: '#838383',\r\n                    textAlign: 'center',\r\n                    fontSize: 12,\r\n                    top: -1\r\n                }}>px\r\n                </div>\r\n                <div className={'lc-ruler-horizontal'}\r\n                     style={{\r\n                         height: this.baseOffset,\r\n                         width: `calc(100% - ${this.baseOffset}px)`,\r\n                         position: 'relative',\r\n                         left: this.baseOffset\r\n                     }}>\r\n                    <Ruler ref={ref => this.rulerX = ref}\r\n                           scrollPos={this.scrollPosX}\r\n                           zoom={scale}\r\n                           lineColor={'#444b4d'}\r\n                           textColor={'#a6a6a6'}\r\n                           segment={2}\r\n                           negativeRuler={true}\r\n                           textOffset={[0, 10]}\r\n                           backgroundColor={'#090f1d'}\r\n                           unit={this.unit}/>\r\n                </div>\r\n                <div className={'lc-ruler-vertical'}\r\n                     style={{\r\n                         width: this.baseOffset,\r\n                         height: window.innerHeight - this.baseOffset - 90,\r\n                         position: 'relative',\r\n                         overflow: 'hidden'\r\n                     }}>\r\n                    <Ruler ref={ref => this.rulerY = ref}\r\n                           type={'vertical'}\r\n                           scrollPos={this.scrollPosY}\r\n                           lineColor={'#444b4d'}\r\n                           textColor={'#a6a6a6'}\r\n                           zoom={scale}\r\n                           segment={2}\r\n                           negativeRuler={true}\r\n                           textOffset={[10, 0]}\r\n                           backgroundColor={'#090f1d'}\r\n                           unit={this.unit}/>\r\n                </div>\r\n                <div className={'lc-ruler-content'} style={{\r\n                    position: 'absolute',\r\n                    top: this.baseOffset,\r\n                    left: this.baseOffset,\r\n                }}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerRuler;","import React, {Component} from 'react';\r\nimport eventManager from \"./core/EventManager\";\r\n\r\nclass DesignerContainer extends Component {\r\n\r\n    designerContainerRef: any;\r\n\r\n    componentDidMount() {\r\n        document.addEventListener(\"click\", this.handleClick);\r\n        this.designerContainerRef.addEventListener(\"contextmenu\", this.handleContextMenu);\r\n        document.addEventListener(\"pointerdown\", this.handlePointerDown);\r\n        document.addEventListener(\"pointermove\", this.handlePointerMove);\r\n        document.addEventListener(\"pointerup\", this.handlePointerUp);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener(\"click\", this.handleClick);\r\n        this.designerContainerRef.removeEventListener(\"contextmenu\", this.handleContextMenu);\r\n        document.removeEventListener(\"pointerdown\", this.handlePointerDown);\r\n        document.removeEventListener(\"pointermove\", this.handlePointerMove);\r\n        document.removeEventListener(\"pointerup\", this.handlePointerUp);\r\n    }\r\n\r\n    /**\r\n     * 监听点击事件\r\n     */\r\n    handleClick = (event: any) => eventManager.emit('click', event);\r\n    /**\r\n     * 监听右键菜单事件\r\n     */\r\n    handleContextMenu = (event: any) => eventManager.emit('contextmenu', event);\r\n    /**\r\n     * 监听触摸屏按下事件\r\n     */\r\n    handlePointerDown = (event: any) => eventManager.emit('pointerdown', event);\r\n    /**\r\n     * 监听指针移动事件\r\n     */\r\n    handlePointerMove = (event: any) => eventManager.emit('pointermove', event);\r\n    /**\r\n     * 监听指针抬起事件\r\n     */\r\n    handlePointerUp = (event: any) => eventManager.emit('pointerup', event);\r\n\r\n    render() {\r\n        return (\r\n            <div ref={dom => this.designerContainerRef = dom} style={{outline: 'none'}}\r\n                 className={'lc-event-container'}>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DesignerContainer;","import * as React from \"react\";\r\nimport Moveable from \"react-moveable\";\r\nimport {observer} from \"mobx-react\";\r\nimport eventOperateStore from \"../../designer/operate-provider/EventOperateStore\";\r\nimport designerStore from \"../../designer/store/DesignerStore\";\r\nimport {MovableItemType} from \"./types\";\r\n\r\ninterface GroupMovableProps {\r\n    readonly?: boolean;\r\n}\r\n\r\nclass GroupMovable extends React.Component<GroupMovableProps> {\r\n    movableRef = React.createRef<Moveable>();\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            targets: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {setMovableRef} = eventOperateStore;\r\n        setMovableRef(this.movableRef);\r\n    }\r\n\r\n    onDragEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        const {lastEvent, target} = e;\r\n        if (lastEvent) {\r\n            const {beforeTranslate} = lastEvent;\r\n            updateLayout([\r\n                {\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [beforeTranslate[0], beforeTranslate[1]]\r\n                }\r\n            ]);\r\n        }\r\n    }\r\n\r\n    onDragGroupEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        let data: MovableItemType[] = [];\r\n        e.events.forEach((ev: any) => {\r\n            const {target, lastEvent} = ev;\r\n            if (lastEvent) {\r\n                const {beforeTranslate} = lastEvent;\r\n                data.push({\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [beforeTranslate[0], beforeTranslate[1]]\r\n                })\r\n            }\r\n        })\r\n        if (data.length > 0)\r\n            updateLayout(data);\r\n    }\r\n\r\n    onResizeEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        const {target, lastEvent} = e;\r\n        if (lastEvent) {\r\n            const {width, height, drag: {translate}} = lastEvent;\r\n            updateLayout([\r\n                {\r\n                    id: target.id,\r\n                    width: width,\r\n                    height: height,\r\n                    type: target.dataset.type,\r\n                    position: [translate[0], translate[1]]\r\n                }\r\n            ])\r\n        }\r\n    }\r\n\r\n    onResizeGroupEnd = (e: any) => {\r\n        const {updateLayout} = designerStore;\r\n        let data: MovableItemType[] = [];\r\n        e.events.forEach((ev: any) => {\r\n            const {target, lastEvent} = ev;\r\n            if (lastEvent) {\r\n                const {drag: {translate}} = lastEvent;\r\n                data.push({\r\n                    id: target.id,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    type: target.dataset.type,\r\n                    position: [translate[0], translate[1]]\r\n                })\r\n            }\r\n        })\r\n        if (data.length > 0)\r\n            updateLayout(data);\r\n    }\r\n\r\n\r\n    render() {\r\n        const {readonly = false} = this.props;\r\n        const {selectorRef, targets} = eventOperateStore;\r\n        const {canvasConfig: {rasterize, dragStep, resizeStep}} = designerStore;\r\n        return (\r\n            <>\r\n                {this.props.children}\r\n                <Moveable ref={this.movableRef}\r\n                          target={targets}\r\n                          draggable={!readonly}\r\n                          resizable={!readonly}\r\n                          keepRatio={false}\r\n                          throttleDrag={rasterize ? dragStep : 0}\r\n                          throttleResize={rasterize ? resizeStep : 1}\r\n                          onClickGroup={e => {\r\n                              (selectorRef.current as any)?.clickTarget(e.inputEvent, e.inputTarget);\r\n                          }}\r\n                          onDrag={({target, beforeTranslate}) => {\r\n                              target.style.transform = `translate(${beforeTranslate[0]}px, ${beforeTranslate[1]}px)`;\r\n                          }}\r\n                          onDragEnd={this.onDragEnd}\r\n                          onDragGroup={e => {\r\n                              e.events.forEach(ev => {\r\n                                  ev.target.style.transform = ev.transform;\r\n                              });\r\n                          }}\r\n                          onDragGroupEnd={this.onDragGroupEnd}\r\n                          onResize={({target, width, height, drag}) => {\r\n                              target.style.width = `${width}px`;\r\n                              target.style.height = `${height}px`;\r\n                              target.style.transform = `translate(${drag.beforeTranslate[0]}px, ${drag.beforeTranslate[1]}px)`;\r\n                          }}\r\n                          onResizeEnd={this.onResizeEnd}\r\n                          onResizeGroupEnd={this.onResizeGroupEnd}\r\n                          onResizeGroup={({events}) => {\r\n                              events.forEach(ev => {\r\n                                  ev.target.style.width = `${ev.width}px`;\r\n                                  ev.target.style.height = `${ev.height}px`;\r\n                                  ev.target.style.transform = ev.drag.transform;\r\n                              })\r\n                          }}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(GroupMovable);","import React, {Component} from 'react';\r\nimport Selecto from \"react-selecto\";\r\nimport eventOperateStore from \"../../designer/operate-provider/EventOperateStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport Moveable from 'react-moveable';\r\n\r\nclass GroupSelectable extends Component {\r\n    selectorRef = React.createRef<Selecto>();\r\n\r\n    componentDidMount() {\r\n        const {setSelectorRef} = eventOperateStore;\r\n        setSelectorRef(this.selectorRef);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.props.children}\r\n                <Selecto ref={this.selectorRef}\r\n                         dragContainer={\".lc-event-container\"}\r\n                         selectableTargets={[\".lc-comp-item\"]}\r\n                         hitRate={0}\r\n                         selectByClick={true}\r\n                         selectFromInside={false}\r\n                         toggleContinueSelect={[\"ctrl\"]}\r\n                         ratio={0}\r\n                         onDragStart={e => {\r\n                             const {movableRef, targets} = eventOperateStore;\r\n                             const movable: Moveable = movableRef.current;\r\n                             const target = e.inputEvent.target;\r\n                             if ((movable.isMoveableElement(target))\r\n                                 || targets.some((t: any) => t === target || t.contains(target))\r\n                             ) {\r\n                                 e.stop();\r\n                             }\r\n                         }}\r\n                         onSelectEnd={e => {\r\n                             const {movableRef, setTargets, setTargetIds} = eventOperateStore;\r\n                             if (!movableRef) return;\r\n                             const movable: Moveable = movableRef.current;\r\n                             if (e.isDragStart) {\r\n                                 e.inputEvent.preventDefault();\r\n                                 setTimeout(() => {\r\n                                     movable.dragStart(e.inputEvent);\r\n                                 });\r\n                             }\r\n                             let selected = e.selected.filter((item: any) => {\r\n                                 return item.dataset.locked !== 'true';\r\n                             });\r\n                             if (e.inputEvent.target.className.indexOf('menu-item') === -1) {\r\n                                 let targetIds: string[] = [];\r\n                                 selected.forEach((item: any) => targetIds.push(item.id));\r\n                                 setTargetIds(targetIds);\r\n                             }\r\n                             setTargets(selected);\r\n                         }}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(GroupSelectable);","import {action, makeObservable, observable} from \"mobx\";\r\n\r\n/**\r\n * 右键操作菜单的状态管理类。\r\n */\r\nclass ContextMenuStore {\r\n    constructor() {\r\n        makeObservable(this, {\r\n            visible: observable,\r\n            position: observable,\r\n            updateVisible: action,\r\n            setPosition: action,\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 右键菜单显示状态\r\n     */\r\n    visible = false;\r\n    /**\r\n     * 右键菜单位置\r\n     */\r\n    position = [0, 0];\r\n    /**\r\n     * 鼠标按下时间，用于优化。 右键菜单的操作体验。由于长按右键是拖拽整个画布的操作。 在长时间按住右键后。\r\n     * 右键菜单也会显示。为了避免这种情况。 需要在鼠标抬起时。 判断鼠标按下到抬起的时间。如果时间小于200ms则不显示右键菜单。\r\n     */\r\n    mouseDownTime = 0;\r\n    /**\r\n     * 鼠标抬起时间\r\n     */\r\n    mouseUpTime = 0;\r\n\r\n    updateVisible = (visible: boolean) => this.visible = visible;\r\n\r\n    setPosition = (position: number[]) => this.position = position;\r\n\r\n    setMouseDownTime = (time: any) => this.mouseDownTime = time;\r\n\r\n    setMouseUpTime = (time: any) => this.mouseUpTime = time;\r\n\r\n}\r\n\r\nconst contextMenuStore = new ContextMenuStore();\r\nexport default contextMenuStore;","export default class RenderUtil {\r\n    private static prev: number = 0;\r\n\r\n    public static throttle(fn: Function, delay: number, callback?: Function) {\r\n\r\n        return function (...args: any) {\r\n            const now = Date.now();\r\n            if (now - RenderUtil.prev > delay) {\r\n                fn(...args);\r\n                RenderUtil.prev = now;\r\n            } else {\r\n                callback && callback(...args);\r\n            }\r\n        };\r\n    }\r\n}\r\n","export enum ClassifyEnum {\r\n    ALL = 'all',\r\n    BAR = 'bar',\r\n    COLUMN = 'column',\r\n    BASE = 'base',\r\n    LINE = 'line',\r\n    AREA = 'area',\r\n}\r\n","import {TriggerType} from \"./HotKey\";\r\nimport {doScale} from \"../scale/Scaler\";\r\nimport eventOperateStore from \"../EventOperateStore\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\nimport rightStore from \"../../right/RightStore\";\r\nimport {SaveType} from \"../../DesignerType\";\r\nimport designerStarter from \"../../DesignerStarter\";\r\nimport RenderUtil from \"../../../utils/RenderUtil\";\r\nimport {message} from \"antd\";\r\nimport {cloneDeep} from \"lodash\";\r\n\r\n\r\nexport const selectAll = () => {\r\n    let comps = document.getElementsByClassName('lc-comp-item');\r\n    let compIds: string[] = [];\r\n    let compArr: any[] = [];\r\n    comps && Array.from(comps).forEach((comp: any) => {\r\n        if (comp.dataset.locked !== 'true') {\r\n            compArr.push(comp);\r\n            compIds.push(comp.id);\r\n        }\r\n    });\r\n    const {setTargets, setTargetIds} = eventOperateStore;\r\n    setTargets(compArr);\r\n    setTargetIds(compIds);\r\n}\r\n\r\nexport const doCopy = () => {\r\n    const {targetIds, setTargetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {copyItem} = designerStore;\r\n    let newIds = copyItem(targetIds);\r\n    let targets: any = [];\r\n    //延迟10毫秒，等待dom元素渲染完毕后再获取。\r\n    setTimeout(() => {\r\n        for (const newId of newIds) {\r\n            targets.push(document.getElementById(newId));\r\n        }\r\n        targets.filter((item: any) => item !== null);\r\n        setTargets(targets);\r\n        setTargetIds(newIds);\r\n    }, 10);\r\n}\r\n\r\nexport const doLock = () => {\r\n    const {targetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate = [];\r\n    for (const targetId of targetIds) {\r\n        let item = layoutConfigs[targetId];\r\n        toBeUpdate.push({...item, locked: true})\r\n    }\r\n    updateLayout(toBeUpdate);\r\n    //操作完毕之后，清空已被选择的元素。\r\n    setTargets([]);\r\n}\r\n\r\nexport const toTop = () => {\r\n    let {maxLevel, setMaxLevel, targetIds, setTargetIds} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, order: ++maxLevel});\r\n    });\r\n    setMaxLevel(maxLevel)\r\n    setTargetIds([]);\r\n    updateLayout(toBeUpdate);\r\n}\r\n\r\nexport const toBottom = () => {\r\n    let {minLevel, setMinLevel, targetIds, setTargetIds} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, order: --minLevel});\r\n    });\r\n    setMinLevel(minLevel)\r\n    setTargetIds([]);\r\n    updateLayout(toBeUpdate);\r\n}\r\n\r\nexport const doDelete = () => {\r\n    const {targetIds, setTargetIds, setTargets} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    // const {updateActive} = designerStore;\r\n    const {setContentVisible} = rightStore;\r\n    setContentVisible(false);\r\n    // updateActive && updateActive({\r\n    //     id: -1,\r\n    //     type: 'LcBg'\r\n    // });\r\n    targetIds.length > 0 && designerStore.delItem(targetIds);\r\n    setTargetIds([]);\r\n    setTargets([])\r\n}\r\n\r\nexport const doSave = () => {\r\n    RenderUtil.throttle(() => {\r\n        let {projectConfig: {saveType}} = designerStore;\r\n        if (saveType === SaveType.LOCAL) {\r\n            const {abstractOperatorMap} = designerStarter;\r\n            const {projectConfig: {saveType = SaveType.LOCAL}} = designerStore;\r\n            abstractOperatorMap[saveType].doCreateOrUpdate(cloneDeep(designerStore.getData()));\r\n        } else if (saveType === SaveType.SERVER) {\r\n            alert(\"server save\");\r\n        }\r\n    }, 5000, () => {\r\n        message.warn('保存过于频繁，请稍后再试！')\r\n    })();\r\n\r\n}\r\n\r\nexport const doUnLock = () => {\r\n    const {unLockedId} = eventOperateStore;\r\n    if (!unLockedId || unLockedId === '') return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let item = layoutConfigs[unLockedId];\r\n    updateLayout([{...item, locked: false}])\r\n}\r\n\r\nexport const doHide = () => {\r\n    const {targetIds} = eventOperateStore;\r\n    if (!targetIds || targetIds.length === 0) return;\r\n    const {updateLayout, layoutConfigs} = designerStore;\r\n    let toBeUpdate: MovableItemType[] = [];\r\n    targetIds.forEach((id: string) => {\r\n        let item = layoutConfigs[id];\r\n        toBeUpdate.push({...item, hide: true});\r\n    });\r\n    updateLayout(toBeUpdate)\r\n}\r\n\r\nexport const getOperateEventMapping: any = () => {\r\n    return {\r\n        'alt + wheel': {\r\n            handler: doScale,\r\n            triggerType: TriggerType.COILED,\r\n        },\r\n        'control + a': {\r\n            handler: selectAll,\r\n        },\r\n        'control + v': {\r\n            handler: doCopy,\r\n        },\r\n        'control + l': {\r\n            handler: doLock,\r\n        },\r\n        'control + arrowup': {\r\n            handler: toTop,\r\n        },\r\n        'control + arrowdown': {\r\n            handler: toBottom,\r\n        },\r\n        'control + s': {\r\n            handler: doSave,\r\n        },\r\n        'delete': {\r\n            handler: doDelete,\r\n        }\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport contextMenuStore from \"./ContextMenuStore\";\r\nimport './OperateMenu.less';\r\nimport {\r\n    CopyOutlined,\r\n    DeleteOutlined,\r\n    EyeInvisibleOutlined,\r\n    LockOutlined,\r\n    VerticalAlignBottomOutlined,\r\n    VerticalAlignTopOutlined\r\n} from \"@ant-design/icons\";\r\nimport {doCopy, doDelete, doHide, doLock, doUnLock, toBottom, toTop} from \"../keyboard-mouse/HotKeyConfig\";\r\n\r\nclass ContextMenu extends Component {\r\n\r\n    menuList = [\r\n        {\r\n            name: '锁定',\r\n            icon: LockOutlined,\r\n            onClick: doLock,\r\n        },\r\n        {\r\n            name: '解锁',\r\n            icon: LockOutlined,\r\n            onClick: doUnLock,\r\n        },\r\n        {\r\n            name: '隐藏',\r\n            icon: EyeInvisibleOutlined,\r\n            onClick: doHide,\r\n        },\r\n        {\r\n            name: '复制',\r\n            icon: CopyOutlined,\r\n            onClick: doCopy,\r\n        },\r\n        {\r\n            name: '置顶',\r\n            icon: VerticalAlignTopOutlined,\r\n            onClick: toTop,\r\n        },\r\n        {\r\n            name: '置底',\r\n            icon: VerticalAlignBottomOutlined,\r\n            onClick: toBottom,\r\n        },\r\n        {\r\n            name: '删除',\r\n            icon: DeleteOutlined,\r\n            onClick: doDelete,\r\n        },\r\n    ]\r\n\r\n    render() {\r\n        const {visible, position = [0, 0]} = contextMenuStore;\r\n        let menuListDom = [];\r\n        for (let i = 0; i < this.menuList.length; i++) {\r\n            let menuItem = this.menuList[i];\r\n            let Icon = menuItem.icon;\r\n            menuListDom.push(\r\n                <div key={i + ''} className={'menu-item'} onClick={menuItem.onClick}>\r\n                    <label><Icon/></label>\r\n                    <span>{menuItem.name}</span>\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <>\r\n                {visible &&\r\n                <div className={'lc-right-menu'} style={{\r\n                    position: 'fixed',\r\n                    top: position[1],\r\n                    left: position[0]\r\n                }}>\r\n                    {menuListDom}\r\n                </div>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ContextMenu);","import React, {MouseEvent, PureComponent} from 'react';\r\nimport DragScaleProvider from \"../operate-provider/DragScaleProvider\";\r\nimport {observer} from \"mobx-react\";\r\nimport designerStore, {DesignerStore} from \"../store/DesignerStore\";\r\nimport DesignerBackground from \"../../comps/lc/background/DesignerBackground\";\r\nimport rightStore from \"../right/RightStore\";\r\nimport DesignerRuler from \"../../lib/lc-ruler/DesignerRuler\";\r\nimport DesignerContainer from \"../operate-provider/DesignerContainer\";\r\nimport GroupMovable from \"../../lib/lc-movable/GroupMovable\";\r\nimport GroupSelectable from \"../../lib/lc-movable/GroupSelectable\";\r\nimport LcRightMenu from \"../operate-provider/right-click-menu/ContextMenu\";\r\nimport {MovableItemType} from \"../../lib/lc-movable/types\";\r\nimport HotKey from \"../operate-provider/keyboard-mouse/HotKey\";\r\nimport {getOperateEventMapping} from \"../operate-provider/keyboard-mouse/HotKeyConfig\";\r\nimport ComponentContainer from \"../../framework/core/ComponentContainer\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport {isEqual} from \"lodash\";\r\n\r\n/**\r\n * 设计器画布\r\n */\r\nclass DesignerCanvas extends PureComponent<DesignerStore | any> {\r\n\r\n    backgroundRef: DesignerBackground | null = null;\r\n\r\n    state = {\r\n        designerRef: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({designerRef: document.querySelector('.lc-ruler-content')});\r\n    }\r\n\r\n    updateActive = (e: MouseEvent<HTMLDivElement>) => {\r\n        let {id, dataset: {type}} = e.target as HTMLDivElement;\r\n        const {activeConfig, activeElem} = rightStore;\r\n        if (isEqual(activeElem, {id, type})) return;\r\n        activeConfig(id, type!);\r\n    }\r\n\r\n    /**\r\n     * 元素生成\r\n     */\r\n    generateElement = () => {\r\n        let {layoutConfigs} = designerStore!;\r\n        const sortLayout = Object.values(layoutConfigs).sort((a: MovableItemType, b: MovableItemType) => a.order! - b.order!);\r\n        return sortLayout.map((item: MovableItemType) => {\r\n            return <ComponentContainer layout={item} key={item.id}/>\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {loaded} = designerStore;\r\n        if (!loaded)\r\n            return <Loading/>;\r\n        return (\r\n            <>\r\n                <DesignerContainer>\r\n                    <GroupSelectable>\r\n                        <DesignerRuler offsetX={60} offsetY={50}>\r\n                            <DragScaleProvider>\r\n                                <GroupMovable>\r\n                                    <DesignerBackground onClick={this.updateActive}\r\n                                                        ref={ref => this.backgroundRef = ref}>\r\n                                        {this.generateElement()}\r\n                                    </DesignerBackground>\r\n                                </GroupMovable>\r\n                            </DragScaleProvider>\r\n                            <LcRightMenu/>\r\n                        </DesignerRuler>\r\n                    </GroupSelectable>\r\n                </DesignerContainer>\r\n                <HotKey handlerMapping={getOperateEventMapping()}/>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DesignerCanvas);\r\n\r\n","import React, {Component, ReactElement, Suspense} from 'react';\r\nimport './DesignerHeader.less';\r\nimport headerStore from \"./HeaderStore\";\r\nimport CanvasHdConfigImpl from \"./items/canvas/CanvasHdConfigImpl\";\r\nimport {observer} from \"mobx-react\";\r\nimport designerStarter from \"../DesignerStarter\";\r\nimport Loading from \"../../lib/loading/Loading\";\r\n\r\nconst ProjectHdItemImpl = React.lazy(() => import('./items/project/ProjectHdItemImpl'));\r\nconst ThemeHdItemImpl = React.lazy(() => import('./items/theme/ThemeHdItemImpl'));\r\n\r\nclass Header extends Component<any> {\r\n\r\n    buildHeaderList = (): Array<ReactElement> => {\r\n        const {headerItemInstances} = designerStarter;\r\n        let items: Array<ReactElement> = [];\r\n        for (let i = 0; i < headerItemInstances.length; i++) {\r\n            const {icon: Icon, name, onClick} = headerItemInstances[i];\r\n            items.push(\r\n                <div key={i + ''} className={'right-item'} onClick={onClick}>\r\n                    <span className={'item-span'}><Icon/>&nbsp;{name}</span>\r\n                </div>\r\n            );\r\n        }\r\n        return items;\r\n    }\r\n\r\n    render() {\r\n        const {canvasVisible, projectVisible, themeVisible} = headerStore;\r\n        const items = this.buildHeaderList();\r\n        return (\r\n            <div className={'designer-header'}>\r\n                <div className={'header-left'}>\r\n                    <div className={'header-title'}>L C</div>\r\n                </div>\r\n                <div className={'header-right'}>\r\n                    {items}\r\n                </div>\r\n                {/*todo 想办法让这两个组件不要在这里写死*/}\r\n                {canvasVisible && <Suspense fallback={<Loading/>}><CanvasHdConfigImpl/> </Suspense>}\r\n                {projectVisible && <Suspense fallback={<Loading/>}><ProjectHdItemImpl/></Suspense>}\r\n                {themeVisible && <Suspense fallback={<Loading/>}><ThemeHdItemImpl/></Suspense>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Header);\r\n","import React, {Component} from 'react';\r\n\r\nclass LcHeader extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-header'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcHeader;","import React, {Component} from 'react';\r\n\r\nclass LcBody extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcBody;","import React, {Component} from 'react';\r\n\r\nclass LcLeft extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body-left'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcLeft;","import React, {Component} from 'react';\r\n\r\nclass LcContent extends Component {\r\n    render() {\r\n        return (\r\n            <div id={'structureContent'} className={'structure-body-content'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcContent;","import React, {Component} from 'react';\r\n\r\nclass LcRight extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-body-right'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcRight;","import React, {Component} from 'react';\r\nimport './structure.less';\r\n\r\nclass LcStructure extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'lc-designer-structure'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcStructure;","import React, {Component} from 'react';\r\n\r\nclass LcFoot extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'structure-foot'}>{this.props.children}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LcFoot;","export default __webpack_public_path__ + \"static/media/icon-all.fe79e4fd.svg\";","export default __webpack_public_path__ + \"static/media/icon-bar.dfbc87b2.svg\";","export default __webpack_public_path__ + \"static/media/icon-column.ae79292f.svg\";","export default __webpack_public_path__ + \"static/media/icon-area.f3992c44.svg\";","export default __webpack_public_path__ + \"static/media/icon-pie.4d05a7b6.svg\";","export default __webpack_public_path__ + \"static/media/icon-scatter.778bce01.svg\";","export default __webpack_public_path__ + \"static/media/icon-histogram.7afbcca1.svg\";","export default __webpack_public_path__ + \"static/media/icon-line.b79af542.svg\";","export default __webpack_public_path__ + \"static/media/icon-loading.9d197f5f.svg\";","export default __webpack_public_path__ + \"static/media/icon-flowers.442a19b5.svg\";","export default __webpack_public_path__ + \"static/media/icon-radar.c8f4b906.svg\";","export default __webpack_public_path__ + \"static/media/icon-ring.9d197f5f.svg\";","export default __webpack_public_path__ + \"static/media/icon-wordcloud.fe36ef61.svg\";","export default __webpack_public_path__ + \"static/media/icon-sun.57eb8ea8.svg\";","export default __webpack_public_path__ + \"static/media/icon-rectangle.996c1059.svg\";","export default __webpack_public_path__ + \"static/media/icon-optimize.9b17ea95.svg\";","export default __webpack_public_path__ + \"static/media/icon-points.7fb541f7.svg\";","import {makeAutoObservable} from \"mobx\";\r\nimport {ClassifyEnum} from \"./ClassifyType\";\r\nimport icon_all from '../../../icon/icon-all.svg';\r\nimport icon_bar from '../../../icon/icon-bar.svg';\r\nimport icon_column from '../../../icon/icon-column.svg';\r\nimport icon_area from '../../../icon/icon-area.svg';\r\nimport icon_pie from '../../../icon/icon-pie.svg';\r\nimport icon_scatter from '../../../icon/icon-scatter.svg';\r\nimport icon_histogram from '../../../icon/icon-histogram.svg';\r\nimport icon_line from '../../../icon/icon-line.svg';\r\nimport icon_loading from '../../../icon/icon-loading.svg';\r\nimport icon_flowers from '../../../icon/icon-flowers.svg';\r\nimport icon_radar from '../../../icon/icon-radar.svg';\r\nimport icon_ring from '../../../icon/icon-ring.svg';\r\nimport icon_word_cloud from '../../../icon/icon-wordcloud.svg';\r\nimport icon_sun from '../../../icon/icon-sun.svg';\r\nimport icon_rectangle from '../../../icon/icon-rectangle.svg';\r\nimport icon_optimize from '../../../icon/icon-optimize.svg';\r\nimport icon_points from '../../../icon/icon-points.svg';\r\n\r\nconst getClassifyItemInfo = () => {\r\n    return [\r\n        {\r\n            icon: icon_all,\r\n            name: \"全部\",\r\n            classify: ClassifyEnum.ALL,\r\n        },\r\n        {\r\n            icon: icon_points,\r\n            name: \"基础\",\r\n            classify: ClassifyEnum.BASE,\r\n        },\r\n        {\r\n            icon: icon_optimize,\r\n            name: \"装饰\",\r\n            classify: ClassifyEnum.ALL,\r\n        },\r\n        {\r\n            icon: icon_bar,\r\n            name: \"条形图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_column,\r\n            name: \"柱状图\",\r\n            classify: ClassifyEnum.COLUMN,\r\n        },\r\n        {\r\n            icon: icon_line,\r\n            name: \"折线图\",\r\n            classify: ClassifyEnum.LINE,\r\n        },\r\n        {\r\n            icon: icon_area,\r\n            name: \"面积图\",\r\n            classify: ClassifyEnum.AREA,\r\n        },\r\n        {\r\n            icon: icon_pie,\r\n            name: \"饼图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_loading,\r\n            name: \"进度图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_scatter,\r\n            name: \"散点图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_flowers,\r\n            name: \"玫瑰图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_radar,\r\n            name: \"雷达图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_word_cloud,\r\n            name: \"词云图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_ring,\r\n            name: \"玉珏图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_histogram,\r\n            name: \"直方图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_sun,\r\n            name: \"旭日图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n        {\r\n            icon: icon_rectangle,\r\n            name: \"矩形树图\",\r\n            classify: ClassifyEnum.BAR,\r\n        },\r\n    ]\r\n}\r\n\r\n/**\r\n * 左侧分类列表store\r\n */\r\nclass ClassifyListStore {\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    /**\r\n     * 分类列表\r\n     */\r\n    classifies: Array<any> = [];\r\n    /**\r\n     * 分类搜索关键字\r\n     */\r\n    classifyKey: string = 'all';\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    doInit = () => {\r\n        this.classifies = getClassifyItemInfo();\r\n    }\r\n\r\n    /**\r\n     * 清空store\r\n     */\r\n    doClear = () => {\r\n        this.classifies = [];\r\n    }\r\n\r\n    setClassifyKey = (key: string) => {\r\n        this.classifyKey = key;\r\n    }\r\n}\r\n\r\nconst classifyListStore = new ClassifyListStore();\r\nexport default classifyListStore;","import {action, makeObservable, observable} from \"mobx\";\r\nimport designerStarter from \"../../DesignerStarter\";\r\n\r\n/**\r\n * 设计器左侧列表组件的状态管理类。\r\n */\r\nclass CompListStore {\r\n    constructor() {\r\n        makeObservable(this, {\r\n            compKey: observable,\r\n            visible: observable,\r\n            setVisible: action,\r\n            setCompKey: action,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 组件基础信息数组。设计器左侧组件列表的展示过滤依赖于此数组。\r\n     * 该数组会在设计器加载时进行初始化，后续不再修改。若其他。 场景或组件需要。 操作该数组的数据。 应该操作他的备份。 而不是直接操作该数组。\r\n     */\r\n    compInfoArr: Array<any> = [];\r\n    /**\r\n     * 组件搜索关键字，左侧组件列表根据关键字过滤与组件，使会用到该属性。\r\n     */\r\n    compKey: string = '';\r\n    /**\r\n     * 组件列表可见性。\r\n     */\r\n    visible: boolean = false;\r\n\r\n    doInit = () => {\r\n        const comps: Array<any> = [];\r\n        const {customComponentInfoMap}: any = designerStarter;\r\n        if (customComponentInfoMap) {\r\n            Object.keys(customComponentInfoMap).forEach(key => {\r\n                let baseInfo = customComponentInfoMap[key].getBaseInfo();\r\n                if (baseInfo.compKey !== 'LcBg') comps.push(baseInfo);\r\n            });\r\n        }\r\n        this.compInfoArr = comps;\r\n    }\r\n\r\n    setVisible = (visible: boolean) => this.visible = visible;\r\n\r\n    setCompKey = (key: string) => this.compKey = key;\r\n}\r\n\r\nconst compListStore = new CompListStore();\r\nexport default compListStore;","import React, {Component, MouseEvent} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport '../classify-list/ClassifyList.less';\r\nimport classifyListStore from \"./ClassifyListStore\";\r\nimport compListStore from \"../../float-configs/comp-list/CompListStore\";\r\n\r\nclass ClassifyList extends Component {\r\n\r\n    constructor(props: {}) {\r\n        super(props);\r\n        const {doInit} = classifyListStore;\r\n        doInit && doInit();\r\n    }\r\n\r\n    changeClassifyKey = (e: MouseEvent<HTMLDivElement>) => {\r\n        const {setClassifyKey} = classifyListStore;\r\n        const {setVisible, visible} = compListStore;\r\n        setClassifyKey(e.currentTarget.id);\r\n        if (!visible)\r\n            setVisible && setVisible(true);\r\n    }\r\n\r\n    buildClassifyList = () => {\r\n        const {classifies} = classifyListStore;\r\n        let classifyArr = [];\r\n        for (let i = 0; i < classifies.length; i++) {\r\n            const {icon: Icon, name, classify} = classifies[i];\r\n            classifyArr.push(\r\n                <div key={i + ''} className={'sort-item'} id={classify} onClick={this.changeClassifyKey}>\r\n                    <div className={'sort-item-icon'}><img style={{width: 20}} src={Icon} alt={'all'}/></div>\r\n                    <span className={'sort-item-content'}>{name}</span>\r\n                </div>\r\n            )\r\n        }\r\n        return classifyArr;\r\n    }\r\n\r\n    render() {\r\n        const classifyListDom = this.buildClassifyList();\r\n        return (\r\n            <div className={'lc-charts-sort'} style={{overflowY: 'scroll'}}>\r\n                {classifyListDom}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ClassifyList);","import React, {Component} from 'react';\r\nimport ClassifyList from \"./classify-list/ClassifyList\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nclass DesignerLeft extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <ClassifyList/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DesignerLeft);","import React, {Component} from 'react';\r\nimport './MenuList.less';\r\nimport {MenuInfo} from \"./MenuType\";\r\nimport rightStore from \"./RightStore\";\r\nimport {observer} from \"mobx-react\";\r\n\r\ninterface LcConfigMenusProps {\r\n    onChange?: (menu: string) => void;\r\n}\r\n\r\nclass MenuList extends Component<LcConfigMenusProps | any> {\r\n\r\n    menuChange = (e: any) => {\r\n        const {setActiveMenu, setContentVisible} = rightStore;\r\n        setActiveMenu && setActiveMenu(e.currentTarget.id);\r\n        setContentVisible && setContentVisible(true);\r\n    }\r\n\r\n    buildMenuList = () => {\r\n        const {menus} = rightStore;\r\n        return menus.map((item: MenuInfo) => {\r\n            const Icon: any = item.icon;\r\n            return (\r\n                <div className={'menu-item'} key={item.key} id={item.key} onClick={this.menuChange}>\r\n                    <div className={'item-icon'}><Icon/></div>\r\n                    <div className={'item-content'}>{item.name}</div>\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'lc-config-menu'}>\r\n                <div className={'menu-list'}>\r\n                    {this.buildMenuList()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(MenuList);","import React, {Component, Suspense} from 'react';\r\nimport {LineOutlined} from \"@ant-design/icons\";\r\nimport rightStore from \"./RightStore\";\r\nimport designerStarter from \"../DesignerStarter\";\r\nimport {observer} from \"mobx-react\";\r\nimport './ConfigContent.less';\r\nimport Loading from \"../../lib/loading/Loading\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport {AbstractCustomComponentDefinition} from \"../../framework/core/AbstractCustomComponentDefinition\";\r\nimport {ConfigType} from \"./ConfigType\";\r\n\r\nclass ConfigContent extends Component {\r\n\r\n    buildConfigContent = () => {\r\n        console.log('buildConfigContent')\r\n        const {compInstances} = designerStore;\r\n        let {activeMenu, activeElem} = rightStore;\r\n        let {customComponentInfoMap} = designerStarter;\r\n        let abstractConfigObj: AbstractCustomComponentDefinition = customComponentInfoMap[activeElem.type + '']\r\n        let configMapping = abstractConfigObj.getMenuToConfigContentMap();\r\n        const ConfigComp: React.ComponentType<ConfigType> = configMapping![activeMenu];\r\n        const instance = compInstances[activeElem.id + ''];\r\n        return (\r\n            <Suspense fallback={<Loading/>}>\r\n                <ConfigComp instance={instance}/>\r\n            </Suspense>\r\n        )\r\n\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setContentVisible} = rightStore;\r\n        setContentVisible && setContentVisible(false);\r\n    }\r\n\r\n    render() {\r\n        const {activeMenu, menus} = rightStore;\r\n        let activeMenuName = '';\r\n        for (let i = 0; i < menus.length; i++) {\r\n            if (menus[i].key === activeMenu) {\r\n                activeMenuName = menus[i].name;\r\n                break;\r\n            }\r\n        }\r\n        return (\r\n            <div className={'lc-config-panel'}>\r\n                <div className={'lc-panel-top'}>\r\n                    <div className={'panel-title'}>\r\n                        <span>{activeMenuName}</span></div>\r\n                    <div className={'panel-operate'} onClick={this.onClose}><LineOutlined/></div>\r\n                </div>\r\n                <div className={'lc-panel-content'}>\r\n                    {this.buildConfigContent()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(ConfigContent);","import React, {Component} from 'react';\r\nimport MenuList from \"./MenuList\";\r\nimport ConfigContent from \"./ConfigContent\";\r\nimport rightStore from \"./RightStore\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nclass Right extends Component {\r\n\r\n    render() {\r\n        const {visible} = rightStore;\r\n        return (\r\n            <>\r\n                <MenuList/>\r\n                {visible && <ConfigContent/>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(Right);","import React, {Component} from 'react';\r\nimport './HotKeyDes.less';\r\n\r\nclass HotKeyDes extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'lc-hotkey-des'} style={{color: 'white'}}>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + S</code></div>\r\n                    <div className={'hotkey-des'}>保存项目</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + V</code></div>\r\n                    <div className={'hotkey-des'}>复制元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + L</code></div>\r\n                    <div className={'hotkey-des'}>锁定元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + up-arrow(方向上键)</code></div>\r\n                    <div className={'hotkey-des'}>元素置顶</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Ctrl + down-arrow(方向下键)</code></div>\r\n                    <div className={'hotkey-des'}>元素置底</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Delete</code></div>\r\n                    <div className={'hotkey-des'}>删除元素</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>Alt + wheel(鼠标滑轮)</code></div>\r\n                    <div className={'hotkey-des'}>缩放画布</div>\r\n                </div>\r\n                <div className={'hotkey-des-item'}>\r\n                    <div className={'hotkey-content'}><code>长按鼠标右键</code></div>\r\n                    <div className={'hotkey-des'}>拖拽画布</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default HotKeyDes;","export default __webpack_public_path__ + \"static/media/keyboard-icon.1ed11794.svg\";","export default __webpack_public_path__ + \"static/media/layers-icon.aabb7495.svg\";","import React, {Component} from 'react';\r\nimport './DesignerFooter.less';\r\nimport eventOperateStore from \"../operate-provider/EventOperateStore\";\r\nimport {observer} from \"mobx-react\";\r\nimport designerStore from \"../store/DesignerStore\";\r\nimport Dialog from \"../../lib/lc-dialog/Dialog\";\r\nimport HotKeyDes from \"./HotKeyDes\";\r\nimport layerListStore from \"../float-configs/layer-list/LayerListStore\";\r\nimport keyboardIcon from './keyboard-icon.svg';\r\nimport layerIcon from './layers-icon.svg';\r\n\r\nclass DesignerFooter extends Component {\r\n\r\n    state = {\r\n        showHotKeyDes: false\r\n    }\r\n\r\n    toggleHotKeyDes = () => {\r\n        const {showHotKeyDes} = this.state;\r\n        this.setState({\r\n            showHotKeyDes: !showHotKeyDes\r\n        })\r\n    }\r\n\r\n    toggleLayerList = () => {\r\n        const {setVisible, visible} = layerListStore;\r\n        setVisible && setVisible(!visible);\r\n    }\r\n\r\n    render() {\r\n        const {scale} = eventOperateStore;\r\n        const {layoutConfigs, projectConfig: {name, state}} = designerStore;\r\n        let stateStr = '';\r\n        switch (state) {\r\n            case '0':\r\n                stateStr = '草稿';\r\n                break;\r\n            case '1':\r\n                stateStr = '发布';\r\n                break;\r\n            case '2':\r\n                stateStr = '封存';\r\n                break;\r\n        }\r\n        return (\r\n            <div className={'lc-designer-footer'}>\r\n                <div className={'footer-left'}>\r\n                    <div className={'footer-item'} onClick={this.toggleHotKeyDes}>\r\n                        <img width={16} alt={'快捷键'}\r\n                             src={keyboardIcon}/>\r\n                        &nbsp;\r\n                        <span style={{position: 'relative', top: 2}}>快捷键</span>\r\n                    </div>\r\n                    <div className={'footer-item'} onClick={this.toggleLayerList}>\r\n                        <img width={16} alt={'图层'} src={layerIcon}/>\r\n                        &nbsp;\r\n                        <span style={{position: 'relative', top: 2}}>图层</span>\r\n                    </div>\r\n                </div>\r\n                <div className={'footer-right'}>\r\n                    <div className={'right-info-item'}>缩放 : {(scale * 100).toFixed(0)}%</div>\r\n                    <div className={'right-info-item'}>当前组件数 : {Object.keys(layoutConfigs).length}</div>\r\n                    <div className={'right-info-item'}>项目 : {name}</div>\r\n                    <div className={'right-info-item'}>状态 : {stateStr}</div>\r\n                </div>\r\n                <Dialog title={'快捷键说明'} visible={this.state.showHotKeyDes} onClose={this.toggleHotKeyDes}>\r\n                    <HotKeyDes/>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(DesignerFooter);","import AbstractDrag from \"./AbstractDrag\";\r\n\r\nexport interface DragCoordinate {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\nexport default class CommonDragger extends AbstractDrag {\r\n\r\n    protected position: { x: number, y: number } = {x: 0, y: 0}; // 第一个点坐标\r\n\r\n    constructor(target: any, dragTarget: any, initPos?: DragCoordinate) {\r\n        super();\r\n        this.target = target;\r\n        this.dragTarget = dragTarget;\r\n        this.registerDragger();\r\n        if (initPos) this.position = initPos;\r\n    }\r\n\r\n    protected onDragEnd = (): void => {\r\n        this.dragTarget.addEventListener('pointerup', (e: any) => {\r\n            if (e.button === 0) {\r\n                this.dragTarget.releasePointerCapture(e.pointerId);\r\n                this.dragTarget.removeEventListener('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected onDragMove = (e: any): void => {\r\n        this.position.x += e.movementX;\r\n        this.position.y += e.movementY;\r\n        this.target.style.transform = 'translate(' + this.position.x + 'px, ' + this.position.y + 'px)';\r\n    }\r\n\r\n    protected onDragStart = (): void => {\r\n        this.dragTarget.addEventListener('pointerdown', (e: any) => {\r\n            if (e.button === 0) {\r\n                this.dragTarget.setPointerCapture(e.pointerId);\r\n                this.dragTarget.addEventListener('pointermove', this.onDragMove);\r\n            }\r\n        });\r\n    }\r\n\r\n}","import React, {Component} from 'react';\r\nimport {LineOutlined} from \"@ant-design/icons\";\r\nimport CommonDragger from \"../../operate-provider/drag/CommonDragger\";\r\nimport './FloatPanel.less';\r\n\r\nexport interface FloatPanelProps {\r\n    title?: string;\r\n    initPosition?: { x: number, y: number };\r\n    width?: number;\r\n    height?: number;\r\n    onClose?: () => void;\r\n    className?: string;\r\n}\r\n\r\n/**\r\n * 浮动面板容器，提供浮动面板的拖拽功能\r\n */\r\nclass FloatPanel extends Component<FloatPanelProps> {\r\n\r\n    panelRef: any = null;\r\n    dragTargetRef: any = null;\r\n\r\n    componentDidMount() {\r\n        const {initPosition = {x: 0, y: 0}} = this.props;\r\n        if (this.dragTargetRef && this.panelRef)\r\n            new CommonDragger(this.panelRef, this.dragTargetRef, initPosition);\r\n    }\r\n\r\n    onClose = () => {\r\n        const {onClose} = this.props;\r\n        onClose && onClose();\r\n    }\r\n\r\n    render() {\r\n        const {initPosition = {x: 0, y: 0}, title, className} = this.props;\r\n        return (\r\n            <div className={`float-panel ${className}`}\r\n                 style={{transform: `translate(${initPosition.x}px, ${initPosition.y}px)`}}\r\n                 ref={ref => this.panelRef = ref}>\r\n                <div className={'panel-title'}>\r\n                    <div className={'title-left'}>{title}</div>\r\n                    <div ref={ref => this.dragTargetRef = ref} className={'title-drag-target'}\r\n                         style={{width: '50%', height: '100%'}}>\r\n                    </div>\r\n                    <div className={'title-right'} onClick={this.onClose}><span><LineOutlined/></span></div>\r\n                </div>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FloatPanel;","import React, {Component} from 'react';\r\nimport {Input} from \"antd\";\r\nimport compListStore from \"./CompListStore\";\r\nimport classifyListStore from \"../../left/classify-list/ClassifyListStore\";\r\nimport './CompList.less';\r\nimport {observer} from \"mobx-react\";\r\nimport designerStarter from \"../../DesignerStarter\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {idGenerate} from \"../../../utils/IdGenerate\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\nimport eventOperateStore from \"../../operate-provider/EventOperateStore\";\r\nimport FloatPanel from \"../common/FloatPanel\";\r\n\r\nclass CompList extends Component {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        const {doInit} = compListStore;\r\n        doInit && doInit();\r\n    }\r\n\r\n    addItem = (compKey: string, name: string) => {\r\n        const {addItem} = designerStore;\r\n        let {maxLevel, setMaxLevel} = eventOperateStore;\r\n        let movableItem: MovableItemType = {\r\n            name: name,\r\n            type: compKey,\r\n            width: 384,\r\n            height: 216,\r\n            position: [0, 0],\r\n            id: idGenerate.generateId() + '',\r\n            locked: false,\r\n            hide: false,\r\n            order: ++maxLevel,\r\n        }\r\n        setMaxLevel && setMaxLevel(maxLevel);\r\n        addItem && addItem(movableItem);\r\n    }\r\n\r\n    getChartDom = () => {\r\n        let chartDom = [];\r\n        let {classifyKey} = classifyListStore\r\n        let {compInfoArr, compKey} = compListStore;\r\n        if (classifyKey !== 'all') {\r\n            compInfoArr = compInfoArr.filter((item: any) => {\r\n                return item.typeKey === classifyKey;\r\n            })\r\n        }\r\n        if (compKey !== '') {\r\n            compInfoArr = compInfoArr.filter((item: any) => {\r\n                return item.name.indexOf(compKey) >= 0;\r\n            })\r\n        }\r\n        for (let i = 0; i < compInfoArr.length; i++) {\r\n            let compInfo: any = compInfoArr[i];\r\n            const {compName, compKey} = compInfo;\r\n            const {customComponentInfoMap} = designerStarter;\r\n            let lcCompInit: any = customComponentInfoMap[compKey];\r\n            let chartImg = lcCompInit.getChartImg();\r\n            chartDom.push(\r\n                <div key={i + ''} className={'list-item droppable-element'}>\r\n                    <div className={'item-header'} ref={'drag-target'}>\r\n                        <div className={'item-name'}>{compName}</div>\r\n                        <div className={'item-type'}>Antd</div>\r\n                    </div>\r\n                    <div className={'item-content'} onDoubleClick={() => this.addItem(compKey, compName)}>\r\n                        <div className={'item-img'} style={{backgroundImage: `url(${chartImg})`}}/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        return chartDom;\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setVisible} = compListStore;\r\n        setVisible && setVisible(false);\r\n    }\r\n\r\n    searchChart = (e: any) => {\r\n        const {setCompKey} = compListStore;\r\n        setCompKey && setCompKey(e.currentTarget.value);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <FloatPanel className={'comp-list'} title={'组件列表'} onClose={this.onClose}\r\n                        initPosition={{x: 60, y: -window.innerHeight + 50}}>\r\n                <div className={'list-search'}>\r\n                    <Input placeholder=\"搜索组件\" onPressEnter={this.searchChart}\r\n                           style={{width: '100%'}}/>\r\n                </div>\r\n                <div className={'list-items'}>\r\n                    {this.getChartDom()}\r\n                </div>\r\n            </FloatPanel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(CompList);","export default __webpack_public_path__ + \"static/media/lock.11cf90eb.svg\";","export default __webpack_public_path__ + \"static/media/preview-close.40634e66.svg\";","export default __webpack_public_path__ + \"static/media/preview-open.fe6af5a2.svg\";","export default __webpack_public_path__ + \"static/media/unlock.a58cef96.svg\";","import React, {MouseEvent} from 'react';\r\nimport './LayerItem.less';\r\nimport lockImg from './icon/lock.svg';\r\nimport previewClose from './icon/preview-close.svg';\r\nimport previewOpen from './icon/preview-open.svg';\r\nimport unlockImg from './icon/unlock.svg';\r\nimport layerListStore from \"./LayerListStore\";\r\n\r\nexport interface LayerItemDataProps {\r\n    compId?: string;\r\n    name?: string;\r\n    lock?: boolean;\r\n    hide?: boolean;\r\n    selected?: boolean;\r\n}\r\n\r\nclass LayerItem extends React.PureComponent<LayerItemDataProps> {\r\n\r\n    state = {\r\n        selected: false,\r\n        lock: false,\r\n        hide: false,\r\n        compId: '',\r\n        name: ''\r\n    }\r\n\r\n    constructor(props: LayerItemDataProps) {\r\n        super(props);\r\n        const {selected, lock, hide, compId, name} = props;\r\n        this.state = {\r\n            selected: selected || false,\r\n            lock: lock || false,\r\n            hide: hide || false,\r\n            compId: compId || '',\r\n            name: name || ''\r\n        }\r\n    }\r\n\r\n    toggleLock = () => {\r\n        const {lockChange} = layerListStore;\r\n        lockChange && lockChange(this.state.compId, !this.state.lock);\r\n    }\r\n\r\n    toggleHide = () => {\r\n        const {hideChange} = layerListStore;\r\n        hideChange && hideChange(this.state.compId, !this.state.hide);\r\n    }\r\n\r\n    onSelected = (event: MouseEvent<HTMLDivElement>) => {\r\n        const {selectedChange} = layerListStore;\r\n        selectedChange && selectedChange({...this.state, ...{selected: true}}, event);\r\n    }\r\n\r\n    render() {\r\n        const {name, lock, hide, selected = false} = this.state || {};\r\n        return (\r\n            <div className={`layer-item ${selected ? \"layer-item-selected\" : \"\"}`}\r\n                 onClick={this.onSelected}>\r\n                <div className={'layer-item-name'}>{name}</div>\r\n                <div className={'layer-item-operators'}>\r\n                    <div className={'layer-item-operator'}>\r\n                        <span onClick={this.toggleHide}>\r\n                            <img src={hide ? previewClose : previewOpen} alt={hide ? '显示' : '隐藏'}\r\n                                 style={{width: 14}}/>\r\n                        </span>\r\n                    </div>\r\n                    <div className={'layer-item-operator'}>\r\n                        <span onClick={this.toggleLock}>\r\n                            <img src={lock ? lockImg : unlockImg} alt={lock ? '锁定' : '解锁'}/>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LayerItem;","import AbstractComponent, {OperateType, UpdateOptions,} from \"../../../framework/core/AbstractComponent\";\r\nimport ComponentUtil from \"../../../utils/ComponentUtil\";\r\nimport LayerItem, {LayerItemDataProps} from \"./LayerItem\";\r\nimport {merge} from \"../../../utils/ObjectUtil\";\r\n\r\nexport default class LayerComponent extends AbstractComponent<LayerItem, LayerItemDataProps> {\r\n\r\n    async create(container: HTMLElement, config: LayerItemDataProps): Promise<this> {\r\n        this.config = config;\r\n        if (!this.instance)\r\n            ComponentUtil.createAndRender<LayerItem, LayerItemDataProps>(container, LayerItem, config).then((instance) => {\r\n                this.instance = instance;\r\n            });\r\n        return this;\r\n    }\r\n\r\n    destroy(): void {\r\n    }\r\n\r\n    getConfig(): LayerItemDataProps | null {\r\n        return this.config;\r\n    }\r\n\r\n    update(config: LayerItemDataProps, upOp?: UpdateOptions): void {\r\n        this.config = merge(this.config, config) as LayerItemDataProps;\r\n        upOp = upOp || {reRender: true, operateType: OperateType.OPTIONS};\r\n        if (upOp.reRender)\r\n            this.instance?.setState({...this.config})\r\n    }\r\n\r\n\r\n}\r\n","import React, {Component} from 'react';\r\nimport LayerComponent from \"./LayerComponent\";\r\nimport layerListStore from \"./LayerListStore\";\r\nimport {LayerItemDataProps} from \"./LayerItem\";\r\n\r\nexport interface LayerContainerProps {\r\n    item: LayerItemDataProps;\r\n}\r\n\r\nclass LayerContainer extends Component<LayerContainerProps> {\r\n\r\n    layerContainerRef: HTMLDivElement | null = null;\r\n\r\n    componentDidMount() {\r\n        const {layerInstanceMap} = layerListStore;\r\n        const {item} = this.props as LayerContainerProps;\r\n        new LayerComponent().create(this.layerContainerRef!, item).then(r => {\r\n            layerInstanceMap[item.compId!] = r;\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {item} = this.props as LayerContainerProps;\r\n        return (\r\n            <div id={item.compId + ''} className={'layer-item-container'}\r\n                 ref={ref => this.layerContainerRef = ref}/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LayerContainer;","import React, {Component, KeyboardEvent} from 'react';\r\nimport './LayerList.less';\r\nimport {Input} from \"antd\";\r\nimport layerListStore from \"./LayerListStore\";\r\nimport designerStore from \"../../store/DesignerStore\";\r\nimport {LayerItemDataProps} from \"./LayerItem\";\r\nimport {observer} from \"mobx-react\";\r\nimport FloatPanel from \"../common/FloatPanel\";\r\nimport eventOperateStore from \"../../operate-provider/EventOperateStore\";\r\nimport eventManager from \"../../operate-provider/core/EventManager\";\r\nimport LayerContainer from \"./LayerContainer\";\r\nimport {MovableItemType} from \"../../../lib/lc-movable/types\";\r\n\r\n//todo 该组件的重新渲染逻辑要重点优化\r\nclass LayerList extends Component {\r\n\r\n    componentDidMount() {\r\n        eventManager.register(\"click\", this.cancelSelected);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        eventManager.unregister(\"click\", this.cancelSelected);\r\n    }\r\n\r\n    //todo: 想想怎么优化\r\n    cancelSelected = (e: PointerEvent) => {\r\n        const layerListDom = document.querySelector(\".layer-list\");\r\n        if (!layerListDom || !e.target) return;\r\n        if (layerListDom.contains(e.target as Node) && !(e.target as HTMLElement).classList.contains(\"layer-item\")) {\r\n            const {setTargetIds, setTargets} = eventOperateStore;\r\n            setTargetIds([]);\r\n            setTargets([]);\r\n        }\r\n    }\r\n\r\n    onClose = () => {\r\n        const {setVisible} = layerListStore;\r\n        setVisible && setVisible(false);\r\n    }\r\n\r\n    searchLayer = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        const {setContent} = layerListStore;\r\n        const content = (e.target as HTMLInputElement).value;\r\n        // if (content === '') return;\r\n        setContent && setContent(content);\r\n    }\r\n\r\n\r\n    buildLayerList = () => {\r\n        const {layoutConfigs} = designerStore;\r\n        const {targetIds} = eventOperateStore;\r\n        const {searchContent} = layerListStore;\r\n        return Object.values(layoutConfigs)\r\n            .filter((item: MovableItemType) => item.name?.includes(searchContent))\r\n            .sort((a: MovableItemType, b: MovableItemType) => b.order! - a.order!)\r\n            .map((item: MovableItemType, index) => {\r\n                let _props: LayerItemDataProps = {\r\n                    name: item.name,\r\n                    lock: item.locked,\r\n                    hide: item.hide,\r\n                    compId: item.id,\r\n                    selected: targetIds.includes(item.id!)\r\n                }\r\n                return <LayerContainer key={item.id} item={_props}/>\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <FloatPanel title={'图层'} onClose={this.onClose} initPosition={{x: 250, y: -window.innerHeight + 50}}\r\n                        className={'layer-list'}>\r\n                <div className={'list-search'}>\r\n                    <Input placeholder=\"搜索图层\" onPressEnter={this.searchLayer}\r\n                           style={{width: '100%'}}/>\r\n                </div>\r\n                <div className={'layer-items'}>\r\n                    {this.buildLayerList()}\r\n                </div>\r\n            </FloatPanel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(LayerList);","import React, {Component} from 'react';\r\nimport {observer} from \"mobx-react\";\r\nimport CompList from \"./comp-list/CompList\";\r\nimport compListStore from \"./comp-list/CompListStore\";\r\nimport layerListStore from \"./layer-list/LayerListStore\";\r\nimport LayerList from \"./layer-list/LayerList\";\r\n\r\nclass FloatConfigs extends Component {\r\n    render() {\r\n        const {visible: compListVisible} = compListStore;\r\n        const {visible: layerListVisible} = layerListStore;\r\n        return (\r\n            <>\r\n                {compListVisible && <CompList/>}\r\n                {layerListVisible && <LayerList/>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default observer(FloatConfigs);","import React, {Component} from 'react';\r\nimport DesignerCanvas from \"./canvas/DesignerCanvas\";\r\nimport DesignerHeader from \"./header/DesignerHeader\";\r\nimport LcHeader from \"./structure/LcHeader\";\r\nimport LcBody from \"./structure/LcBody\";\r\nimport LcLeft from \"./structure/LcLeft\";\r\nimport LcContent from \"./structure/LcContent\";\r\nimport LcRight from \"./structure/LcRight\";\r\nimport LcStructure from \"./structure/LcStructure\";\r\nimport LcFoot from \"./structure/LcFoot\";\r\nimport DesignerLeft from \"./left\";\r\nimport Right from \"./right\";\r\nimport DesignerFooter from \"./footer/DesignerFooter\";\r\nimport {loadDesigner} from \"./LoadDesigner\";\r\nimport {registerEventOnDesignerLoaded} from \"./RegisterEvent\";\r\nimport FloatConfigs from \"./float-configs/FloatConfigs\";\r\n\r\nclass Designer extends Component<any> {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        //加载设计器\r\n        loadDesigner();\r\n    }\r\n\r\n    componentDidMount() {\r\n        //注册设计器加载完成事件\r\n        registerEventOnDesignerLoaded();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <LcStructure>\r\n                <LcHeader>\r\n                    <DesignerHeader/>\r\n                </LcHeader>\r\n                <LcBody>\r\n                    <LcLeft><DesignerLeft/></LcLeft>\r\n                    <LcContent><DesignerCanvas/></LcContent>\r\n                    <LcRight><Right/></LcRight>\r\n                </LcBody>\r\n                <LcFoot>\r\n                    <DesignerFooter/>\r\n                </LcFoot>\r\n                <FloatConfigs/>\r\n            </LcStructure>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Designer;","import contextMenuStore from \"./operate-provider/right-click-menu/ContextMenuStore\";\r\nimport eventOperateStore from \"./operate-provider/EventOperateStore\";\r\nimport eventManager from \"./operate-provider/core/EventManager\";\r\nimport {KMMap} from \"./operate-provider/keyboard-mouse/KeyboardMouse\";\r\n\r\nexport function registerEventOnDesignerLoaded() {\r\n    const {setPosition, updateVisible} = contextMenuStore;\r\n    const {setUnLockedId} = eventOperateStore;\r\n    eventManager.register('click', (e: any) => {\r\n        const {visible, updateVisible} = contextMenuStore;\r\n        if (visible && e.button === 0) {\r\n            //这里添加异步处理的原因：必须要在操作菜单执行点击事件执行之后才能卸载dom元素，不然操作菜单的点击事件会失效。\r\n            setTimeout(() => {\r\n                updateVisible(false);\r\n            });\r\n        }\r\n    });\r\n    eventManager.register('contextmenu', (event: any) => {\r\n        event.preventDefault();\r\n        const {mouseDownTime, mouseUpTime} = contextMenuStore;\r\n        let targetArr = ['lc-comp-item', 'moveable-area'];\r\n        if (targetArr.some((item: string) => event.target.classList.contains(item)) && mouseUpTime - mouseDownTime < 200) {\r\n            updateVisible && updateVisible(true);\r\n            setPosition([event.clientX, event.clientY]);\r\n            setUnLockedId(event.target.id);\r\n        } else {\r\n            updateVisible && updateVisible(false);\r\n        }\r\n    });\r\n    eventManager.register('pointerdown', (e: PointerEvent) => {\r\n        if (e.button === 0) {\r\n            KMMap.leftClick = true;\r\n        } else if (e.button === 2)\r\n            KMMap.rightClick = true;\r\n        const {setMouseDownTime} = contextMenuStore;\r\n        setMouseDownTime(Date.now());\r\n    });\r\n    eventManager.register('pointerup', (e: PointerEvent) => {\r\n        if (e.button === 0)\r\n            KMMap.leftClick = false;\r\n        else if (e.button === 2)\r\n            KMMap.rightClick = false;\r\n        const {setMouseUpTime} = contextMenuStore;\r\n        setMouseUpTime(Date.now());\r\n        const {setPointerTarget} = eventOperateStore;\r\n        setPointerTarget(e.target);\r\n    });\r\n}"],"sourceRoot":""}